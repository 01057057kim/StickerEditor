(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hu(e,t){const r=new Set(e.split(","));return n=>r.has(n)}const Lt={},In=[],Fe=()=>{},Rg=()=>!1,ta=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),du=e=>e.startsWith("onUpdate:"),re=Object.assign,pu=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Ag=Object.prototype.hasOwnProperty,kt=(e,t)=>Ag.call(e,t),yt=Array.isArray,Ln=e=>ea(e)==="[object Map]",Wh=e=>ea(e)==="[object Set]",St=e=>typeof e=="function",Kt=e=>typeof e=="string",Qn=e=>typeof e=="symbol",Nt=e=>e!==null&&typeof e=="object",Hh=e=>(Nt(e)||St(e))&&St(e.then)&&St(e.catch),Vh=Object.prototype.toString,ea=e=>Vh.call(e),Bg=e=>ea(e).slice(8,-1),jh=e=>ea(e)==="[object Object]",vu=e=>Kt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ei=hu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ra=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Og=/-(\w)/g,jn=ra(e=>e.replace(Og,(t,r)=>r?r.toUpperCase():"")),Ig=/\B([A-Z])/g,ti=ra(e=>e.replace(Ig,"-$1").toLowerCase()),$h=ra(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ba=ra(e=>e?`on${$h(e)}`:""),Vr=(e,t)=>!Object.is(e,t),Ws=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},uo=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},hl=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Lg=e=>{const t=Kt(e)?Number(e):NaN;return isNaN(t)?e:t};let Bc;const Xh=()=>Bc||(Bc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function na(e){if(yt(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=Kt(n)?Gg(n):na(n);if(i)for(const s in i)t[s]=i[s]}return t}else if(Kt(e)||Nt(e))return e}const Fg=/;(?![^(]*\))/g,zg=/:([^]+)/,Ng=/\/\*[^]*?\*\//g;function Gg(e){const t={};return e.replace(Ng,"").split(Fg).forEach(r=>{if(r){const n=r.split(zg);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function $t(e){let t="";if(Kt(e))t=e;else if(yt(e))for(let r=0;r<e.length;r++){const n=$t(e[r]);n&&(t+=n+" ")}else if(Nt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const Wg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hg=hu(Wg);function Uh(e){return!!e||e===""}const Oc=e=>Kt(e)?e:e==null?"":yt(e)||Nt(e)&&(e.toString===Vh||!St(e.toString))?JSON.stringify(e,Yh,2):String(e),Yh=(e,t)=>t&&t.__v_isRef?Yh(e,t.value):Ln(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i],s)=>(r[Oa(n,s)+" =>"]=i,r),{})}:Wh(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>Oa(r))}:Qn(t)?Oa(t):Nt(t)&&!yt(t)&&!jh(t)?String(t):t,Oa=(e,t="")=>{var r;return Qn(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $e;class Vg{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$e,!t&&$e&&(this.index=($e.scopes||($e.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=$e;try{return $e=this,t()}finally{$e=r}}}on(){$e=this}off(){$e=this.parent}stop(t){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function jg(e,t=$e){t&&t.active&&t.effects.push(e)}function $g(){return $e}let cn;class gu{constructor(t,r,n,i){this.fn=t,this.trigger=r,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,jg(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,mn();for(let t=0;t<this._depsLength;t++){const r=this.deps[t];if(r.computed&&(Xg(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),yn()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Gr,r=cn;try{return Gr=!0,cn=this,this._runnings++,Ic(this),this.fn()}finally{Lc(this),this._runnings--,cn=r,Gr=t}}stop(){var t;this.active&&(Ic(this),Lc(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function Xg(e){return e.value}function Ic(e){e._trackId++,e._depsLength=0}function Lc(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)qh(e.deps[t],e);e.deps.length=e._depsLength}}function qh(e,t){const r=e.get(t);r!==void 0&&t._trackId!==r&&(e.delete(t),e.size===0&&e.cleanup())}let Gr=!0,dl=0;const Kh=[];function mn(){Kh.push(Gr),Gr=!1}function yn(){const e=Kh.pop();Gr=e===void 0?!0:e}function mu(){dl++}function yu(){for(dl--;!dl&&pl.length;)pl.shift()()}function Jh(e,t,r){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const n=e.deps[e._depsLength];n!==t?(n&&qh(n,e),e.deps[e._depsLength++]=t):e._depsLength++}}const pl=[];function Zh(e,t,r){mu();for(const n of e.keys()){let i;n._dirtyLevel<t&&(i??(i=e.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=t),n._shouldSchedule&&(i??(i=e.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&pl.push(n.scheduler)))}yu()}const Qh=(e,t)=>{const r=new Map;return r.cleanup=e,r.computed=t,r},vl=new WeakMap,fn=Symbol(""),gl=Symbol("");function ke(e,t,r){if(Gr&&cn){let n=vl.get(e);n||vl.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=Qh(()=>n.delete(r))),Jh(cn,i)}}function xr(e,t,r,n,i,s){const o=vl.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(r==="length"&&yt(e)){const l=Number(n);o.forEach((u,c)=>{(c==="length"||!Qn(c)&&c>=l)&&a.push(u)})}else switch(r!==void 0&&a.push(o.get(r)),t){case"add":yt(e)?vu(r)&&a.push(o.get("length")):(a.push(o.get(fn)),Ln(e)&&a.push(o.get(gl)));break;case"delete":yt(e)||(a.push(o.get(fn)),Ln(e)&&a.push(o.get(gl)));break;case"set":Ln(e)&&a.push(o.get(fn));break}mu();for(const l of a)l&&Zh(l,4);yu()}const Ug=hu("__proto__,__v_isRef,__isVue"),td=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Qn)),Fc=Yg();function Yg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=Tt(this);for(let s=0,o=this.length;s<o;s++)ke(n,"get",s+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(Tt)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){mn(),mu();const n=Tt(this)[t].apply(this,r);return yu(),yn(),n}}),e}function qg(e){const t=Tt(this);return ke(t,"has",e),t.hasOwnProperty(e)}class ed{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?l0:sd:s?id:nd).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=yt(t);if(!i){if(o&&kt(Fc,r))return Reflect.get(Fc,r,n);if(r==="hasOwnProperty")return qg}const a=Reflect.get(t,r,n);return(Qn(r)?td.has(r):Ug(r))||(i||ke(t,"get",r),s)?a:he(a)?o&&vu(r)?a:a.value:Nt(a)?i?od(a):Cu(a):a}}class rd extends ed{constructor(t=!1){super(!1,t)}set(t,r,n,i){let s=t[r];if(!this._isShallow){const l=$n(s);if(!co(n)&&!$n(n)&&(s=Tt(s),n=Tt(n)),!yt(t)&&he(s)&&!he(n))return l?!1:(s.value=n,!0)}const o=yt(t)&&vu(r)?Number(r)<t.length:kt(t,r),a=Reflect.set(t,r,n,i);return t===Tt(i)&&(o?Vr(n,s)&&xr(t,"set",r,n):xr(t,"add",r,n)),a}deleteProperty(t,r){const n=kt(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&n&&xr(t,"delete",r,void 0),i}has(t,r){const n=Reflect.has(t,r);return(!Qn(r)||!td.has(r))&&ke(t,"has",r),n}ownKeys(t){return ke(t,"iterate",yt(t)?"length":fn),Reflect.ownKeys(t)}}class Kg extends ed{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const Jg=new rd,Zg=new Kg,Qg=new rd(!0),bu=e=>e,ia=e=>Reflect.getPrototypeOf(e);function gs(e,t,r=!1,n=!1){e=e.__v_raw;const i=Tt(e),s=Tt(t);r||(Vr(t,s)&&ke(i,"get",t),ke(i,"get",s));const{has:o}=ia(i),a=n?bu:r?wu:Ni;if(o.call(i,t))return a(e.get(t));if(o.call(i,s))return a(e.get(s));e!==i&&e.get(t)}function ms(e,t=!1){const r=this.__v_raw,n=Tt(r),i=Tt(e);return t||(Vr(e,i)&&ke(n,"has",e),ke(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function ys(e,t=!1){return e=e.__v_raw,!t&&ke(Tt(e),"iterate",fn),Reflect.get(e,"size",e)}function zc(e){e=Tt(e);const t=Tt(this);return ia(t).has.call(t,e)||(t.add(e),xr(t,"add",e,e)),this}function Nc(e,t){t=Tt(t);const r=Tt(this),{has:n,get:i}=ia(r);let s=n.call(r,e);s||(e=Tt(e),s=n.call(r,e));const o=i.call(r,e);return r.set(e,t),s?Vr(t,o)&&xr(r,"set",e,t):xr(r,"add",e,t),this}function Gc(e){const t=Tt(this),{has:r,get:n}=ia(t);let i=r.call(t,e);i||(e=Tt(e),i=r.call(t,e)),n&&n.call(t,e);const s=t.delete(e);return i&&xr(t,"delete",e,void 0),s}function Wc(){const e=Tt(this),t=e.size!==0,r=e.clear();return t&&xr(e,"clear",void 0,void 0),r}function bs(e,t){return function(n,i){const s=this,o=s.__v_raw,a=Tt(o),l=t?bu:e?wu:Ni;return!e&&ke(a,"iterate",fn),o.forEach((u,c)=>n.call(i,l(u),l(c),s))}}function xs(e,t,r){return function(...n){const i=this.__v_raw,s=Tt(i),o=Ln(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=i[e](...n),c=r?bu:t?wu:Ni;return!t&&ke(s,"iterate",l?gl:fn),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:a?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Pr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function t0(){const e={get(s){return gs(this,s)},get size(){return ys(this)},has:ms,add:zc,set:Nc,delete:Gc,clear:Wc,forEach:bs(!1,!1)},t={get(s){return gs(this,s,!1,!0)},get size(){return ys(this)},has:ms,add:zc,set:Nc,delete:Gc,clear:Wc,forEach:bs(!1,!0)},r={get(s){return gs(this,s,!0)},get size(){return ys(this,!0)},has(s){return ms.call(this,s,!0)},add:Pr("add"),set:Pr("set"),delete:Pr("delete"),clear:Pr("clear"),forEach:bs(!0,!1)},n={get(s){return gs(this,s,!0,!0)},get size(){return ys(this,!0)},has(s){return ms.call(this,s,!0)},add:Pr("add"),set:Pr("set"),delete:Pr("delete"),clear:Pr("clear"),forEach:bs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=xs(s,!1,!1),r[s]=xs(s,!0,!1),t[s]=xs(s,!1,!0),n[s]=xs(s,!0,!0)}),[e,r,t,n]}const[e0,r0,n0,i0]=t0();function xu(e,t){const r=t?e?i0:n0:e?r0:e0;return(n,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(kt(r,i)&&i in n?r:n,i,s)}const s0={get:xu(!1,!1)},o0={get:xu(!1,!0)},a0={get:xu(!0,!1)},nd=new WeakMap,id=new WeakMap,sd=new WeakMap,l0=new WeakMap;function u0(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function c0(e){return e.__v_skip||!Object.isExtensible(e)?0:u0(Bg(e))}function Cu(e){return $n(e)?e:Su(e,!1,Jg,s0,nd)}function f0(e){return Su(e,!1,Qg,o0,id)}function od(e){return Su(e,!0,Zg,a0,sd)}function Su(e,t,r,n,i){if(!Nt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=c0(e);if(o===0)return e;const a=new Proxy(e,o===2?n:r);return i.set(e,a),a}function Fn(e){return $n(e)?Fn(e.__v_raw):!!(e&&e.__v_isReactive)}function $n(e){return!!(e&&e.__v_isReadonly)}function co(e){return!!(e&&e.__v_isShallow)}function ad(e){return Fn(e)||$n(e)}function Tt(e){const t=e&&e.__v_raw;return t?Tt(t):e}function ld(e){return Object.isExtensible(e)&&uo(e,"__v_skip",!0),e}const Ni=e=>Nt(e)?Cu(e):e,wu=e=>Nt(e)?od(e):e;class ud{constructor(t,r,n,i){this.getter=t,this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new gu(()=>t(this._value),()=>Hs(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=Tt(this);return(!t._cacheable||t.effect.dirty)&&Vr(t._value,t._value=t.effect.run())&&Hs(t,4),cd(t),t.effect._dirtyLevel>=2&&Hs(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function h0(e,t,r=!1){let n,i;const s=St(e);return s?(n=e,i=Fe):(n=e.get,i=e.set),new ud(n,i,s||!i,r)}function cd(e){var t;Gr&&cn&&(e=Tt(e),Jh(cn,(t=e.dep)!=null?t:e.dep=Qh(()=>e.dep=void 0,e instanceof ud?e:void 0)))}function Hs(e,t=4,r){e=Tt(e);const n=e.dep;n&&Zh(n,t)}function he(e){return!!(e&&e.__v_isRef===!0)}function jt(e){return d0(e,!1)}function d0(e,t){return he(e)?e:new p0(e,t)}class p0{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Tt(t),this._value=r?t:Ni(t)}get value(){return cd(this),this._value}set value(t){const r=this.__v_isShallow||co(t)||$n(t);t=r?t:Tt(t),Vr(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:Ni(t),Hs(this,4))}}function oe(e){return he(e)?e.value:e}const v0={get:(e,t,r)=>oe(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return he(i)&&!he(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function fd(e){return Fn(e)?e:new Proxy(e,v0)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wr(e,t,r,n){try{return n?e(...n):e()}catch(i){sa(i,t,r)}}function ze(e,t,r,n){if(St(e)){const s=Wr(e,t,r,n);return s&&Hh(s)&&s.catch(o=>{sa(o,t,r)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(ze(e[s],t,r,n));return i}function sa(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${r}`;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Wr(l,null,10,[e,o,a]);return}}g0(e,r,i,n)}function g0(e,t,r,n=!0){console.error(e)}let Gi=!1,ml=!1;const ce=[];let lr=0;const zn=[];let Or=null,Qr=0;const hd=Promise.resolve();let _u=null;function dd(e){const t=_u||hd;return e?t.then(this?e.bind(this):e):t}function m0(e){let t=lr+1,r=ce.length;for(;t<r;){const n=t+r>>>1,i=ce[n],s=Wi(i);s<e||s===e&&i.pre?t=n+1:r=n}return t}function Eu(e){(!ce.length||!ce.includes(e,Gi&&e.allowRecurse?lr+1:lr))&&(e.id==null?ce.push(e):ce.splice(m0(e.id),0,e),pd())}function pd(){!Gi&&!ml&&(ml=!0,_u=hd.then(gd))}function y0(e){const t=ce.indexOf(e);t>lr&&ce.splice(t,1)}function b0(e){yt(e)?zn.push(...e):(!Or||!Or.includes(e,e.allowRecurse?Qr+1:Qr))&&zn.push(e),pd()}function Hc(e,t,r=Gi?lr+1:0){for(;r<ce.length;r++){const n=ce[r];if(n&&n.pre){if(e&&n.id!==e.uid)continue;ce.splice(r,1),r--,n()}}}function vd(e){if(zn.length){const t=[...new Set(zn)].sort((r,n)=>Wi(r)-Wi(n));if(zn.length=0,Or){Or.push(...t);return}for(Or=t,Qr=0;Qr<Or.length;Qr++)Or[Qr]();Or=null,Qr=0}}const Wi=e=>e.id==null?1/0:e.id,x0=(e,t)=>{const r=Wi(e)-Wi(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function gd(e){ml=!1,Gi=!0,ce.sort(x0);try{for(lr=0;lr<ce.length;lr++){const t=ce[lr];t&&t.active!==!1&&Wr(t,null,14)}}finally{lr=0,ce.length=0,vd(),Gi=!1,_u=null,(ce.length||zn.length)&&gd()}}function C0(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Lt;let i=r;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in n){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=n[c]||Lt;h&&(i=r.map(d=>Kt(d)?d.trim():d)),f&&(i=r.map(hl))}let a,l=n[a=Ba(t)]||n[a=Ba(jn(t))];!l&&s&&(l=n[a=Ba(ti(t))]),l&&ze(l,e,6,i);const u=n[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ze(u,e,6,i)}}function md(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const s=e.emits;let o={},a=!1;if(!St(e)){const l=u=>{const c=md(u,t,!0);c&&(a=!0,re(o,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(Nt(e)&&n.set(e,null),null):(yt(s)?s.forEach(l=>o[l]=null):re(o,s),Nt(e)&&n.set(e,o),o)}function oa(e,t){return!e||!ta(t)?!1:(t=t.slice(2).replace(/Once$/,""),kt(e,t[0].toLowerCase()+t.slice(1))||kt(e,ti(t))||kt(e,t))}let _e=null,aa=null;function fo(e){const t=_e;return _e=e,aa=e&&e.type.__scopeId||null,t}function la(e){aa=e}function ua(){aa=null}function Vs(e,t=_e,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&Qc(-1);const s=fo(t);let o;try{o=e(...i)}finally{fo(s),n._d&&Qc(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Ia(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let g,m;const b=fo(e);try{if(r.shapeFlag&4){const S=i||n,_=S;g=ar(c.call(_,S,f,s,d,h,p)),m=l}else{const S=t;g=ar(S.length>1?S(s,{attrs:l,slots:a,emit:u}):S(s,null)),m=t.props?l:S0(l)}}catch(S){Pi.length=0,sa(S,e,1),g=Ft(Ze)}let C=g;if(m&&v!==!1){const S=Object.keys(m),{shapeFlag:_}=C;S.length&&_&7&&(o&&S.some(du)&&(m=w0(m,o)),C=jr(C,m))}return r.dirs&&(C=jr(C),C.dirs=C.dirs?C.dirs.concat(r.dirs):r.dirs),r.transition&&(C.transition=r.transition),g=C,fo(b),g}const S0=e=>{let t;for(const r in e)(r==="class"||r==="style"||ta(r))&&((t||(t={}))[r]=e[r]);return t},w0=(e,t)=>{const r={};for(const n in e)(!du(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function _0(e,t,r){const{props:n,children:i,component:s}=e,{props:o,children:a,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Vc(n,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(o[h]!==n[h]&&!oa(u,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Vc(n,o,u):!0:!!o;return!1}function Vc(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s]&&!oa(r,s))return!0}return!1}function E0({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const k0=Symbol.for("v-ndc"),M0=e=>e.__isSuspense;function T0(e,t){t&&t.pendingBranch?yt(e)?t.effects.push(...e):t.effects.push(e):b0(e)}const P0=Symbol.for("v-scx"),D0=()=>fr(P0),Cs={};function ki(e,t,r){return yd(e,t,r)}function yd(e,t,{immediate:r,deep:n,flush:i,once:s,onTrack:o,onTrigger:a}=Lt){if(t&&s){const y=t;t=(...w)=>{y(...w),_()}}const l=fe,u=y=>n===!0?y:an(y,n===!1?1:void 0);let c,f=!1,h=!1;if(he(e)?(c=()=>e.value,f=co(e)):Fn(e)?(c=()=>u(e),f=!0):yt(e)?(h=!0,f=e.some(y=>Fn(y)||co(y)),c=()=>e.map(y=>{if(he(y))return y.value;if(Fn(y))return u(y);if(St(y))return Wr(y,l,2)})):St(e)?t?c=()=>Wr(e,l,2):c=()=>(d&&d(),ze(e,l,3,[p])):c=Fe,t&&n){const y=c;c=()=>an(y())}let d,p=y=>{d=C.onStop=()=>{Wr(y,l,4),d=C.onStop=void 0}},v;if(pa)if(p=Fe,t?r&&ze(t,l,3,[c(),h?[]:void 0,p]):c(),i==="sync"){const y=D0();v=y.__watcherHandles||(y.__watcherHandles=[])}else return Fe;let g=h?new Array(e.length).fill(Cs):Cs;const m=()=>{if(!(!C.active||!C.dirty))if(t){const y=C.run();(n||f||(h?y.some((w,x)=>Vr(w,g[x])):Vr(y,g)))&&(d&&d(),ze(t,l,3,[y,g===Cs?void 0:h&&g[0]===Cs?[]:g,p]),g=y)}else C.run()};m.allowRecurse=!!t;let b;i==="sync"?b=m:i==="post"?b=()=>Se(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),b=()=>Eu(m));const C=new gu(c,Fe,b),S=$g(),_=()=>{C.stop(),S&&pu(S.effects,C)};return t?r?m():g=C.run():i==="post"?Se(C.run.bind(C),l&&l.suspense):C.run(),v&&v.push(_),_}function R0(e,t,r){const n=this.proxy,i=Kt(e)?e.includes(".")?bd(n,e):()=>n[e]:e.bind(n,n);let s;St(t)?s=t:(s=t.handler,r=t);const o=ts(this),a=yd(i,s.bind(n),r);return o(),a}function bd(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function an(e,t,r=0,n){if(!Nt(e)||e.__v_skip)return e;if(t&&t>0){if(r>=t)return e;r++}if(n=n||new Set,n.has(e))return e;if(n.add(e),he(e))an(e.value,t,r,n);else if(yt(e))for(let i=0;i<e.length;i++)an(e[i],t,r,n);else if(Wh(e)||Ln(e))e.forEach(i=>{an(i,t,r,n)});else if(jh(e))for(const i in e)an(e[i],t,r,n);return e}function A0(e,t){if(_e===null)return e;const r=va(_e)||_e.proxy,n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,o,a,l=Lt]=t[i];s&&(St(s)&&(s={mounted:s,updated:s}),s.deep&&an(o),n.push({dir:s,instance:r,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function qr(e,t,r,n){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[n];l&&(mn(),ze(l,r,8,[e.el,a,e,t]),yn())}}const Ir=Symbol("_leaveCb"),Ss=Symbol("_enterCb");function B0(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ku(()=>{e.isMounted=!0}),_d(()=>{e.isUnmounting=!0}),e}const Ie=[Function,Array],xd={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ie,onEnter:Ie,onAfterEnter:Ie,onEnterCancelled:Ie,onBeforeLeave:Ie,onLeave:Ie,onAfterLeave:Ie,onLeaveCancelled:Ie,onBeforeAppear:Ie,onAppear:Ie,onAfterAppear:Ie,onAppearCancelled:Ie},O0={name:"BaseTransition",props:xd,setup(e,{slots:t}){const r=xm(),n=B0();return()=>{const i=t.default&&Sd(t.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const h of i)if(h.type!==Ze){s=h;break}}const o=Tt(e),{mode:a}=o;if(n.isLeaving)return La(s);const l=jc(s);if(!l)return La(s);const u=yl(l,o,n,r);bl(l,u);const c=r.subTree,f=c&&jc(c);if(f&&f.type!==Ze&&!tn(l,f)){const h=yl(f,o,n,r);if(bl(f,h),a==="out-in")return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,r.update.active!==!1&&(r.effect.dirty=!0,r.update())},La(s);a==="in-out"&&l.type!==Ze&&(h.delayLeave=(d,p,v)=>{const g=Cd(n,f);g[String(f.key)]=f,d[Ir]=()=>{p(),d[Ir]=void 0,delete u.delayedLeave},u.delayedLeave=v})}return s}}},I0=O0;function Cd(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function yl(e,t,r,n){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:v,onAppear:g,onAfterAppear:m,onAppearCancelled:b}=t,C=String(e.key),S=Cd(r,e),_=(x,E)=>{x&&ze(x,n,9,E)},y=(x,E)=>{const k=E[1];_(x,E),yt(x)?x.every(B=>B.length<=1)&&k():x.length<=1&&k()},w={mode:s,persisted:o,beforeEnter(x){let E=a;if(!r.isMounted)if(i)E=v||a;else return;x[Ir]&&x[Ir](!0);const k=S[C];k&&tn(e,k)&&k.el[Ir]&&k.el[Ir](),_(E,[x])},enter(x){let E=l,k=u,B=c;if(!r.isMounted)if(i)E=g||l,k=m||u,B=b||c;else return;let T=!1;const P=x[Ss]=O=>{T||(T=!0,O?_(B,[x]):_(k,[x]),w.delayedLeave&&w.delayedLeave(),x[Ss]=void 0)};E?y(E,[x,P]):P()},leave(x,E){const k=String(e.key);if(x[Ss]&&x[Ss](!0),r.isUnmounting)return E();_(f,[x]);let B=!1;const T=x[Ir]=P=>{B||(B=!0,E(),P?_(p,[x]):_(d,[x]),x[Ir]=void 0,S[k]===e&&delete S[k])};S[k]=e,h?y(h,[x,T]):T()},clone(x){return yl(x,t,r,n)}};return w}function La(e){if(ca(e))return e=jr(e),e.children=null,e}function jc(e){return ca(e)?e.children?e.children[0]:void 0:e}function bl(e,t){e.shapeFlag&6&&e.component?bl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Sd(e,t=!1,r){let n=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const a=r==null?o.key:String(r)+String(o.key!=null?o.key:s);o.type===be?(o.patchFlag&128&&i++,n=n.concat(Sd(o.children,t,a))):(t||o.type!==Ze)&&n.push(a!=null?jr(o,{key:a}):o)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function L0(e,t){return St(e)?re({name:e.name},t,{setup:e}):e}const js=e=>!!e.type.__asyncLoader,ca=e=>e.type.__isKeepAlive;function F0(e,t){wd(e,"a",t)}function z0(e,t){wd(e,"da",t)}function wd(e,t,r=fe){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(fa(t,n,r),r){let i=r.parent;for(;i&&i.parent;)ca(i.parent.vnode)&&N0(n,t,r,i),i=i.parent}}function N0(e,t,r,n){const i=fa(t,e,n,!0);Ed(()=>{pu(n[t],i)},r)}function fa(e,t,r=fe,n=!1){if(r){const i=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(r.isUnmounted)return;mn();const a=ts(r),l=ze(t,r,e,o);return a(),yn(),l});return n?i.unshift(s):i.push(s),s}}const kr=e=>(t,r=fe)=>(!pa||e==="sp")&&fa(e,(...n)=>t(...n),r),G0=kr("bm"),ku=kr("m"),W0=kr("bu"),H0=kr("u"),_d=kr("bum"),Ed=kr("um"),V0=kr("sp"),j0=kr("rtg"),$0=kr("rtc");function X0(e,t=fe){fa("ec",e,t)}function ho(e,t,r,n){let i;const s=r;if(yt(e)||Kt(e)){i=new Array(e.length);for(let o=0,a=e.length;o<a;o++)i[o]=t(e[o],o,void 0,s)}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,s)}else if(Nt(e))if(e[Symbol.iterator])i=Array.from(e,(o,a)=>t(o,a,void 0,s));else{const o=Object.keys(e);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];i[a]=t(e[u],u,a,s)}}else i=[];return i}const xl=e=>e?zd(e)?va(e)||e.proxy:xl(e.parent):null,Mi=re(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>xl(e.parent),$root:e=>xl(e.root),$emit:e=>e.emit,$options:e=>Mu(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Eu(e.update)}),$nextTick:e=>e.n||(e.n=dd.bind(e.proxy)),$watch:e=>R0.bind(e)}),Fa=(e,t)=>e!==Lt&&!e.__isScriptSetup&&kt(e,t),U0={get({_:e},t){const{ctx:r,setupState:n,data:i,props:s,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return s[t]}else{if(Fa(n,t))return o[t]=1,n[t];if(i!==Lt&&kt(i,t))return o[t]=2,i[t];if((u=e.propsOptions[0])&&kt(u,t))return o[t]=3,s[t];if(r!==Lt&&kt(r,t))return o[t]=4,r[t];Cl&&(o[t]=0)}}const c=Mi[t];let f,h;if(c)return t==="$attrs"&&ke(e,"get",t),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(r!==Lt&&kt(r,t))return o[t]=4,r[t];if(h=l.config.globalProperties,kt(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:s}=e;return Fa(i,t)?(i[t]=r,!0):n!==Lt&&kt(n,t)?(n[t]=r,!0):kt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:s}},o){let a;return!!r[o]||e!==Lt&&kt(e,o)||Fa(t,o)||(a=s[0])&&kt(a,o)||kt(n,o)||kt(Mi,o)||kt(i.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:kt(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function $c(e){return yt(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let Cl=!0;function Y0(e){const t=Mu(e),r=e.proxy,n=e.ctx;Cl=!1,t.beforeCreate&&Xc(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:C,unmounted:S,render:_,renderTracked:y,renderTriggered:w,errorCaptured:x,serverPrefetch:E,expose:k,inheritAttrs:B,components:T,directives:P,filters:O}=t;if(u&&q0(u,n,null),o)for(const H in o){const z=o[H];St(z)&&(n[H]=z.bind(r))}if(i){const H=i.call(r,r);Nt(H)&&(e.data=Cu(H))}if(Cl=!0,s)for(const H in s){const z=s[H],Y=St(z)?z.bind(r,r):St(z.get)?z.get.bind(r,r):Fe,J=!St(z)&&St(z.set)?z.set.bind(r):Fe,G=Gd({get:Y,set:J});Object.defineProperty(n,H,{enumerable:!0,configurable:!0,get:()=>G.value,set:tt=>G.value=tt})}if(a)for(const H in a)kd(a[H],n,r,H);if(l){const H=St(l)?l.call(r):l;Reflect.ownKeys(H).forEach(z=>{wn(z,H[z])})}c&&Xc(c,e,"c");function W(H,z){yt(z)?z.forEach(Y=>H(Y.bind(r))):z&&H(z.bind(r))}if(W(G0,f),W(ku,h),W(W0,d),W(H0,p),W(F0,v),W(z0,g),W(X0,x),W($0,y),W(j0,w),W(_d,b),W(Ed,S),W(V0,E),yt(k))if(k.length){const H=e.exposed||(e.exposed={});k.forEach(z=>{Object.defineProperty(H,z,{get:()=>r[z],set:Y=>r[z]=Y})})}else e.exposed||(e.exposed={});_&&e.render===Fe&&(e.render=_),B!=null&&(e.inheritAttrs=B),T&&(e.components=T),P&&(e.directives=P)}function q0(e,t,r=Fe){yt(e)&&(e=Sl(e));for(const n in e){const i=e[n];let s;Nt(i)?"default"in i?s=fr(i.from||n,i.default,!0):s=fr(i.from||n):s=fr(i),he(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[n]=s}}function Xc(e,t,r){ze(yt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function kd(e,t,r,n){const i=n.includes(".")?bd(r,n):()=>r[n];if(Kt(e)){const s=t[e];St(s)&&ki(i,s)}else if(St(e))ki(i,e.bind(r));else if(Nt(e))if(yt(e))e.forEach(s=>kd(s,t,r,n));else{const s=St(e.handler)?e.handler.bind(r):t[e.handler];St(s)&&ki(i,s,e)}}function Mu(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>po(l,u,o,!0)),po(l,t,o)),Nt(t)&&s.set(t,l),l}function po(e,t,r,n=!1){const{mixins:i,extends:s}=t;s&&po(e,s,r,!0),i&&i.forEach(o=>po(e,o,r,!0));for(const o in t)if(!(n&&o==="expose")){const a=K0[o]||r&&r[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const K0={data:Uc,props:Yc,emits:Yc,methods:ci,computed:ci,beforeCreate:ge,created:ge,beforeMount:ge,mounted:ge,beforeUpdate:ge,updated:ge,beforeDestroy:ge,beforeUnmount:ge,destroyed:ge,unmounted:ge,activated:ge,deactivated:ge,errorCaptured:ge,serverPrefetch:ge,components:ci,directives:ci,watch:Z0,provide:Uc,inject:J0};function Uc(e,t){return t?e?function(){return re(St(e)?e.call(this,this):e,St(t)?t.call(this,this):t)}:t:e}function J0(e,t){return ci(Sl(e),Sl(t))}function Sl(e){if(yt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function ge(e,t){return e?[...new Set([].concat(e,t))]:t}function ci(e,t){return e?re(Object.create(null),e,t):t}function Yc(e,t){return e?yt(e)&&yt(t)?[...new Set([...e,...t])]:re(Object.create(null),$c(e),$c(t??{})):t}function Z0(e,t){if(!e)return t;if(!t)return e;const r=re(Object.create(null),e);for(const n in t)r[n]=ge(e[n],t[n]);return r}function Md(){return{app:null,config:{isNativeTag:Rg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Q0=0;function tm(e,t){return function(n,i=null){St(n)||(n=re({},n)),i!=null&&!Nt(i)&&(i=null);const s=Md(),o=new WeakSet;let a=!1;const l=s.app={_uid:Q0++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:Mm,get config(){return s.config},set config(u){},use(u,...c){return o.has(u)||(u&&St(u.install)?(o.add(u),u.install(l,...c)):St(u)&&(o.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,f){if(!a){const h=Ft(n,i);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),c&&t?t(h,u):e(h,u,f),a=!0,l._container=u,u.__vue_app__=l,va(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l},runWithContext(u){const c=Ti;Ti=l;try{return u()}finally{Ti=c}}};return l}}let Ti=null;function wn(e,t){if(fe){let r=fe.provides;const n=fe.parent&&fe.parent.provides;n===r&&(r=fe.provides=Object.create(n)),r[e]=t}}function fr(e,t,r=!1){const n=fe||_e;if(n||Ti){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Ti._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&St(t)?t.call(n&&n.proxy):t}}function em(e,t,r,n=!1){const i={},s={};uo(s,da,1),e.propsDefaults=Object.create(null),Td(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);r?e.props=n?i:f0(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function rm(e,t,r,n){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,a=Tt(i),[l]=e.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(oa(e.emitsOptions,h))continue;const d=t[h];if(l)if(kt(s,h))d!==s[h]&&(s[h]=d,u=!0);else{const p=jn(h);i[p]=wl(l,a,p,d,e,!1)}else d!==s[h]&&(s[h]=d,u=!0)}}}else{Td(e,t,i,s)&&(u=!0);let c;for(const f in a)(!t||!kt(t,f)&&((c=ti(f))===f||!kt(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=wl(l,a,f,void 0,e,!0)):delete i[f]);if(s!==a)for(const f in s)(!t||!kt(t,f))&&(delete s[f],u=!0)}u&&xr(e,"set","$attrs")}function Td(e,t,r,n){const[i,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Ei(l))continue;const u=t[l];let c;i&&kt(i,c=jn(l))?!s||!s.includes(c)?r[c]=u:(a||(a={}))[c]=u:oa(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(s){const l=Tt(r),u=a||Lt;for(let c=0;c<s.length;c++){const f=s[c];r[f]=wl(i,l,f,u[f],e,!kt(u,f))}}return o}function wl(e,t,r,n,i,s){const o=e[r];if(o!=null){const a=kt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&St(l)){const{propsDefaults:u}=i;if(r in u)n=u[r];else{const c=ts(i);n=u[r]=l.call(null,t),c()}}else n=l}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===ti(r))&&(n=!0))}return n}function Pd(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const s=e.props,o={},a=[];let l=!1;if(!St(e)){const c=f=>{l=!0;const[h,d]=Pd(f,t,!0);re(o,h),d&&a.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return Nt(e)&&n.set(e,In),In;if(yt(s))for(let c=0;c<s.length;c++){const f=jn(s[c]);qc(f)&&(o[f]=Lt)}else if(s)for(const c in s){const f=jn(c);if(qc(f)){const h=s[c],d=o[f]=yt(h)||St(h)?{type:h}:re({},h);if(d){const p=Zc(Boolean,d.type),v=Zc(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||kt(d,"default"))&&a.push(f)}}}const u=[o,a];return Nt(e)&&n.set(e,u),u}function qc(e){return e[0]!=="$"&&!Ei(e)}function Kc(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Jc(e,t){return Kc(e)===Kc(t)}function Zc(e,t){return yt(t)?t.findIndex(r=>Jc(r,e)):St(t)&&Jc(t,e)?0:-1}const Dd=e=>e[0]==="_"||e==="$stable",Tu=e=>yt(e)?e.map(ar):[ar(e)],nm=(e,t,r)=>{if(t._n)return t;const n=Vs((...i)=>Tu(t(...i)),r);return n._c=!1,n},Rd=(e,t,r)=>{const n=e._ctx;for(const i in e){if(Dd(i))continue;const s=e[i];if(St(s))t[i]=nm(i,s,n);else if(s!=null){const o=Tu(s);t[i]=()=>o}}},Ad=(e,t)=>{const r=Tu(t);e.slots.default=()=>r},im=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Tt(t),uo(t,"_",r)):Rd(t,e.slots={})}else e.slots={},t&&Ad(e,t);uo(e.slots,da,1)},sm=(e,t,r)=>{const{vnode:n,slots:i}=e;let s=!0,o=Lt;if(n.shapeFlag&32){const a=t._;a?r&&a===1?s=!1:(re(i,t),!r&&a===1&&delete i._):(s=!t.$stable,Rd(t,i)),o=t}else t&&(Ad(e,t),o={default:1});if(s)for(const a in i)!Dd(a)&&o[a]==null&&delete i[a]};function _l(e,t,r,n,i=!1){if(yt(e)){e.forEach((h,d)=>_l(h,t&&(yt(t)?t[d]:t),r,n,i));return}if(js(n)&&!i)return;const s=n.shapeFlag&4?va(n.component)||n.component.proxy:n.el,o=i?null:s,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Lt?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(Kt(u)?(c[u]=null,kt(f,u)&&(f[u]=null)):he(u)&&(u.value=null)),St(l))Wr(l,a,12,[o,c]);else{const h=Kt(l),d=he(l);if(h||d){const p=()=>{if(e.f){const v=h?kt(f,l)?f[l]:c[l]:l.value;i?yt(v)&&pu(v,s):yt(v)?v.includes(s)||v.push(s):h?(c[l]=[s],kt(f,l)&&(f[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else h?(c[l]=o,kt(f,l)&&(f[l]=o)):d&&(l.value=o,e.k&&(c[e.k]=o))};o?(p.id=-1,Se(p,r)):p()}}}const Se=T0;function om(e){return am(e)}function am(e,t){const r=Xh();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Fe,insertStaticContent:p}=e,v=(M,D,I,F=null,N=null,$=null,j=void 0,V=null,q=!!D.dynamicChildren)=>{if(M===D)return;M&&!tn(M,D)&&(F=at(M),tt(M,N,$,!0),M=null),D.patchFlag===-2&&(q=!1,D.dynamicChildren=null);const{type:X,ref:rt,shapeFlag:ut}=D;switch(X){case ha:g(M,D,I,F);break;case Ze:m(M,D,I,F);break;case $s:M==null&&b(D,I,F,j);break;case be:T(M,D,I,F,N,$,j,V,q);break;default:ut&1?_(M,D,I,F,N,$,j,V,q):ut&6?P(M,D,I,F,N,$,j,V,q):(ut&64||ut&128)&&X.process(M,D,I,F,N,$,j,V,q,wt)}rt!=null&&N&&_l(rt,M&&M.ref,$,D||M,!D)},g=(M,D,I,F)=>{if(M==null)n(D.el=a(D.children),I,F);else{const N=D.el=M.el;D.children!==M.children&&u(N,D.children)}},m=(M,D,I,F)=>{M==null?n(D.el=l(D.children||""),I,F):D.el=M.el},b=(M,D,I,F)=>{[M.el,M.anchor]=p(M.children,D,I,F,M.el,M.anchor)},C=({el:M,anchor:D},I,F)=>{let N;for(;M&&M!==D;)N=h(M),n(M,I,F),M=N;n(D,I,F)},S=({el:M,anchor:D})=>{let I;for(;M&&M!==D;)I=h(M),i(M),M=I;i(D)},_=(M,D,I,F,N,$,j,V,q)=>{D.type==="svg"?j="svg":D.type==="math"&&(j="mathml"),M==null?y(D,I,F,N,$,j,V,q):E(M,D,N,$,j,V,q)},y=(M,D,I,F,N,$,j,V)=>{let q,X;const{props:rt,shapeFlag:ut,transition:lt,dirs:gt}=M;if(q=M.el=o(M.type,$,rt&&rt.is,rt),ut&8?c(q,M.children):ut&16&&x(M.children,q,null,F,N,za(M,$),j,V),gt&&qr(M,null,F,"created"),w(q,M,M.scopeId,j,F),rt){for(const Pt in rt)Pt!=="value"&&!Ei(Pt)&&s(q,Pt,null,rt[Pt],$,M.children,F,N,K);"value"in rt&&s(q,"value",null,rt.value,$),(X=rt.onVnodeBeforeMount)&&ir(X,F,M)}gt&&qr(M,null,F,"beforeMount");const bt=lm(N,lt);bt&&lt.beforeEnter(q),n(q,D,I),((X=rt&&rt.onVnodeMounted)||bt||gt)&&Se(()=>{X&&ir(X,F,M),bt&&lt.enter(q),gt&&qr(M,null,F,"mounted")},N)},w=(M,D,I,F,N)=>{if(I&&d(M,I),F)for(let $=0;$<F.length;$++)d(M,F[$]);if(N){let $=N.subTree;if(D===$){const j=N.vnode;w(M,j,j.scopeId,j.slotScopeIds,N.parent)}}},x=(M,D,I,F,N,$,j,V,q=0)=>{for(let X=q;X<M.length;X++){const rt=M[X]=V?Lr(M[X]):ar(M[X]);v(null,rt,D,I,F,N,$,j,V)}},E=(M,D,I,F,N,$,j)=>{const V=D.el=M.el;let{patchFlag:q,dynamicChildren:X,dirs:rt}=D;q|=M.patchFlag&16;const ut=M.props||Lt,lt=D.props||Lt;let gt;if(I&&Kr(I,!1),(gt=lt.onVnodeBeforeUpdate)&&ir(gt,I,D,M),rt&&qr(D,M,I,"beforeUpdate"),I&&Kr(I,!0),X?k(M.dynamicChildren,X,V,I,F,za(D,N),$):j||z(M,D,V,null,I,F,za(D,N),$,!1),q>0){if(q&16)B(V,D,ut,lt,I,F,N);else if(q&2&&ut.class!==lt.class&&s(V,"class",null,lt.class,N),q&4&&s(V,"style",ut.style,lt.style,N),q&8){const bt=D.dynamicProps;for(let Pt=0;Pt<bt.length;Pt++){const Ot=bt[Pt],Ut=ut[Ot],le=lt[Ot];(le!==Ut||Ot==="value")&&s(V,Ot,Ut,le,N,M.children,I,F,K)}}q&1&&M.children!==D.children&&c(V,D.children)}else!j&&X==null&&B(V,D,ut,lt,I,F,N);((gt=lt.onVnodeUpdated)||rt)&&Se(()=>{gt&&ir(gt,I,D,M),rt&&qr(D,M,I,"updated")},F)},k=(M,D,I,F,N,$,j)=>{for(let V=0;V<D.length;V++){const q=M[V],X=D[V],rt=q.el&&(q.type===be||!tn(q,X)||q.shapeFlag&70)?f(q.el):I;v(q,X,rt,null,F,N,$,j,!0)}},B=(M,D,I,F,N,$,j)=>{if(I!==F){if(I!==Lt)for(const V in I)!Ei(V)&&!(V in F)&&s(M,V,I[V],null,j,D.children,N,$,K);for(const V in F){if(Ei(V))continue;const q=F[V],X=I[V];q!==X&&V!=="value"&&s(M,V,X,q,j,D.children,N,$,K)}"value"in F&&s(M,"value",I.value,F.value,j)}},T=(M,D,I,F,N,$,j,V,q)=>{const X=D.el=M?M.el:a(""),rt=D.anchor=M?M.anchor:a("");let{patchFlag:ut,dynamicChildren:lt,slotScopeIds:gt}=D;gt&&(V=V?V.concat(gt):gt),M==null?(n(X,I,F),n(rt,I,F),x(D.children||[],I,rt,N,$,j,V,q)):ut>0&&ut&64&&lt&&M.dynamicChildren?(k(M.dynamicChildren,lt,I,N,$,j,V),(D.key!=null||N&&D===N.subTree)&&Bd(M,D,!0)):z(M,D,I,rt,N,$,j,V,q)},P=(M,D,I,F,N,$,j,V,q)=>{D.slotScopeIds=V,M==null?D.shapeFlag&512?N.ctx.activate(D,I,F,j,q):O(D,I,F,N,$,j,q):L(M,D,q)},O=(M,D,I,F,N,$,j)=>{const V=M.component=bm(M,F,N);if(ca(M)&&(V.ctx.renderer=wt),Cm(V),V.asyncDep){if(N&&N.registerDep(V,W),!M.el){const q=V.subTree=Ft(Ze);m(null,q,D,I)}}else W(V,M,D,I,N,$,j)},L=(M,D,I)=>{const F=D.component=M.component;if(_0(M,D,I))if(F.asyncDep&&!F.asyncResolved){H(F,D,I);return}else F.next=D,y0(F.update),F.effect.dirty=!0,F.update();else D.el=M.el,F.vnode=D},W=(M,D,I,F,N,$,j)=>{const V=()=>{if(M.isMounted){let{next:rt,bu:ut,u:lt,parent:gt,vnode:bt}=M;{const nr=Od(M);if(nr){rt&&(rt.el=bt.el,H(M,rt,j)),nr.asyncDep.then(()=>{M.isUnmounted||V()});return}}let Pt=rt,Ot;Kr(M,!1),rt?(rt.el=bt.el,H(M,rt,j)):rt=bt,ut&&Ws(ut),(Ot=rt.props&&rt.props.onVnodeBeforeUpdate)&&ir(Ot,gt,rt,bt),Kr(M,!0);const Ut=Ia(M),le=M.subTree;M.subTree=Ut,v(le,Ut,f(le.el),at(le),M,N,$),rt.el=Ut.el,Pt===null&&E0(M,Ut.el),lt&&Se(lt,N),(Ot=rt.props&&rt.props.onVnodeUpdated)&&Se(()=>ir(Ot,gt,rt,bt),N)}else{let rt;const{el:ut,props:lt}=D,{bm:gt,m:bt,parent:Pt}=M,Ot=js(D);if(Kr(M,!1),gt&&Ws(gt),!Ot&&(rt=lt&&lt.onVnodeBeforeMount)&&ir(rt,Pt,D),Kr(M,!0),ut&&ht){const Ut=()=>{M.subTree=Ia(M),ht(ut,M.subTree,M,N,null)};Ot?D.type.__asyncLoader().then(()=>!M.isUnmounted&&Ut()):Ut()}else{const Ut=M.subTree=Ia(M);v(null,Ut,I,F,M,N,$),D.el=Ut.el}if(bt&&Se(bt,N),!Ot&&(rt=lt&&lt.onVnodeMounted)){const Ut=D;Se(()=>ir(rt,Pt,Ut),N)}(D.shapeFlag&256||Pt&&js(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&M.a&&Se(M.a,N),M.isMounted=!0,D=I=F=null}},q=M.effect=new gu(V,Fe,()=>Eu(X),M.scope),X=M.update=()=>{q.dirty&&q.run()};X.id=M.uid,Kr(M,!0),X()},H=(M,D,I)=>{D.component=M;const F=M.vnode.props;M.vnode=D,M.next=null,rm(M,D.props,F,I),sm(M,D.children,I),mn(),Hc(M),yn()},z=(M,D,I,F,N,$,j,V,q=!1)=>{const X=M&&M.children,rt=M?M.shapeFlag:0,ut=D.children,{patchFlag:lt,shapeFlag:gt}=D;if(lt>0){if(lt&128){J(X,ut,I,F,N,$,j,V,q);return}else if(lt&256){Y(X,ut,I,F,N,$,j,V,q);return}}gt&8?(rt&16&&K(X,N,$),ut!==X&&c(I,ut)):rt&16?gt&16?J(X,ut,I,F,N,$,j,V,q):K(X,N,$,!0):(rt&8&&c(I,""),gt&16&&x(ut,I,F,N,$,j,V,q))},Y=(M,D,I,F,N,$,j,V,q)=>{M=M||In,D=D||In;const X=M.length,rt=D.length,ut=Math.min(X,rt);let lt;for(lt=0;lt<ut;lt++){const gt=D[lt]=q?Lr(D[lt]):ar(D[lt]);v(M[lt],gt,I,null,N,$,j,V,q)}X>rt?K(M,N,$,!0,!1,ut):x(D,I,F,N,$,j,V,q,ut)},J=(M,D,I,F,N,$,j,V,q)=>{let X=0;const rt=D.length;let ut=M.length-1,lt=rt-1;for(;X<=ut&&X<=lt;){const gt=M[X],bt=D[X]=q?Lr(D[X]):ar(D[X]);if(tn(gt,bt))v(gt,bt,I,null,N,$,j,V,q);else break;X++}for(;X<=ut&&X<=lt;){const gt=M[ut],bt=D[lt]=q?Lr(D[lt]):ar(D[lt]);if(tn(gt,bt))v(gt,bt,I,null,N,$,j,V,q);else break;ut--,lt--}if(X>ut){if(X<=lt){const gt=lt+1,bt=gt<rt?D[gt].el:F;for(;X<=lt;)v(null,D[X]=q?Lr(D[X]):ar(D[X]),I,bt,N,$,j,V,q),X++}}else if(X>lt)for(;X<=ut;)tt(M[X],N,$,!0),X++;else{const gt=X,bt=X,Pt=new Map;for(X=bt;X<=lt;X++){const pe=D[X]=q?Lr(D[X]):ar(D[X]);pe.key!=null&&Pt.set(pe.key,X)}let Ot,Ut=0;const le=lt-bt+1;let nr=!1,ps=0;const Tr=new Array(le);for(X=0;X<le;X++)Tr[X]=0;for(X=gt;X<=ut;X++){const pe=M[X];if(Ut>=le){tt(pe,N,$,!0);continue}let Oe;if(pe.key!=null)Oe=Pt.get(pe.key);else for(Ot=bt;Ot<=lt;Ot++)if(Tr[Ot-bt]===0&&tn(pe,D[Ot])){Oe=Ot;break}Oe===void 0?tt(pe,N,$,!0):(Tr[Oe-bt]=X+1,Oe>=ps?ps=Oe:nr=!0,v(pe,D[Oe],I,null,N,$,j,V,q),Ut++)}const Cn=nr?um(Tr):In;for(Ot=Cn.length-1,X=le-1;X>=0;X--){const pe=bt+X,Oe=D[pe],vs=pe+1<rt?D[pe+1].el:F;Tr[X]===0?v(null,Oe,I,vs,N,$,j,V,q):nr&&(Ot<0||X!==Cn[Ot]?G(Oe,I,vs,2):Ot--)}}},G=(M,D,I,F,N=null)=>{const{el:$,type:j,transition:V,children:q,shapeFlag:X}=M;if(X&6){G(M.component.subTree,D,I,F);return}if(X&128){M.suspense.move(D,I,F);return}if(X&64){j.move(M,D,I,wt);return}if(j===be){n($,D,I);for(let ut=0;ut<q.length;ut++)G(q[ut],D,I,F);n(M.anchor,D,I);return}if(j===$s){C(M,D,I);return}if(F!==2&&X&1&&V)if(F===0)V.beforeEnter($),n($,D,I),Se(()=>V.enter($),N);else{const{leave:ut,delayLeave:lt,afterLeave:gt}=V,bt=()=>n($,D,I),Pt=()=>{ut($,()=>{bt(),gt&&gt()})};lt?lt($,bt,Pt):Pt()}else n($,D,I)},tt=(M,D,I,F=!1,N=!1)=>{const{type:$,props:j,ref:V,children:q,dynamicChildren:X,shapeFlag:rt,patchFlag:ut,dirs:lt}=M;if(V!=null&&_l(V,null,I,M,!0),rt&256){D.ctx.deactivate(M);return}const gt=rt&1&&lt,bt=!js(M);let Pt;if(bt&&(Pt=j&&j.onVnodeBeforeUnmount)&&ir(Pt,D,M),rt&6)st(M.component,I,F);else{if(rt&128){M.suspense.unmount(I,F);return}gt&&qr(M,null,D,"beforeUnmount"),rt&64?M.type.remove(M,D,I,N,wt,F):X&&($!==be||ut>0&&ut&64)?K(X,D,I,!1,!0):($===be&&ut&384||!N&&rt&16)&&K(q,D,I),F&&ot(M)}(bt&&(Pt=j&&j.onVnodeUnmounted)||gt)&&Se(()=>{Pt&&ir(Pt,D,M),gt&&qr(M,null,D,"unmounted")},I)},ot=M=>{const{type:D,el:I,anchor:F,transition:N}=M;if(D===be){et(I,F);return}if(D===$s){S(M);return}const $=()=>{i(I),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(M.shapeFlag&1&&N&&!N.persisted){const{leave:j,delayLeave:V}=N,q=()=>j(I,$);V?V(M.el,$,q):q()}else $()},et=(M,D)=>{let I;for(;M!==D;)I=h(M),i(M),M=I;i(D)},st=(M,D,I)=>{const{bum:F,scope:N,update:$,subTree:j,um:V}=M;F&&Ws(F),N.stop(),$&&($.active=!1,tt(j,M,D,I)),V&&Se(V,D),Se(()=>{M.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},K=(M,D,I,F=!1,N=!1,$=0)=>{for(let j=$;j<M.length;j++)tt(M[j],D,I,F,N)},at=M=>M.shapeFlag&6?at(M.component.subTree):M.shapeFlag&128?M.suspense.next():h(M.anchor||M.el);let ft=!1;const mt=(M,D,I)=>{M==null?D._vnode&&tt(D._vnode,null,null,!0):v(D._vnode||null,M,D,null,null,null,I),ft||(ft=!0,Hc(),vd(),ft=!1),D._vnode=M},wt={p:v,um:tt,m:G,r:ot,mt:O,mc:x,pc:z,pbc:k,n:at,o:e};let nt,ht;return{render:mt,hydrate:nt,createApp:tm(mt,nt)}}function za({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Kr({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function lm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Bd(e,t,r=!1){const n=e.children,i=t.children;if(yt(n)&&yt(i))for(let s=0;s<n.length;s++){const o=n[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Lr(i[s]),a.el=o.el),r||Bd(o,a)),a.type===ha&&(a.el=o.el)}}function um(e){const t=e.slice(),r=[0];let n,i,s,o,a;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(s=0,o=r.length-1;s<o;)a=s+o>>1,e[r[a]]<u?s=a+1:o=a;u<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=t[o];return r}function Od(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Od(t)}const cm=e=>e.__isTeleport,be=Symbol.for("v-fgt"),ha=Symbol.for("v-txt"),Ze=Symbol.for("v-cmt"),$s=Symbol.for("v-stc"),Pi=[];let Ke=null;function Dt(e=!1){Pi.push(Ke=e?null:[])}function fm(){Pi.pop(),Ke=Pi[Pi.length-1]||null}let Hi=1;function Qc(e){Hi+=e}function Id(e){return e.dynamicChildren=Hi>0?Ke||In:null,fm(),Hi>0&&Ke&&Ke.push(e),e}function At(e,t,r,n,i,s){return Id(it(e,t,r,n,i,s,!0))}function Ld(e,t,r,n,i){return Id(Ft(e,t,r,n,i,!0))}function El(e){return e?e.__v_isVNode===!0:!1}function tn(e,t){return e.type===t.type&&e.key===t.key}const da="__vInternal",Fd=({key:e})=>e??null,Xs=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Kt(e)||he(e)||St(e)?{i:_e,r:e,k:t,f:!!r}:e:null);function it(e,t=null,r=null,n=0,i=null,s=e===be?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Fd(t),ref:t&&Xs(t),scopeId:aa,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:_e};return a?(Pu(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=Kt(r)?8:16),Hi>0&&!o&&Ke&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ke.push(l),l}const Ft=hm;function hm(e,t=null,r=null,n=0,i=null,s=!1){if((!e||e===k0)&&(e=Ze),El(e)){const a=jr(e,t,!0);return r&&Pu(a,r),Hi>0&&!s&&Ke&&(a.shapeFlag&6?Ke[Ke.indexOf(e)]=a:Ke.push(a)),a.patchFlag|=-2,a}if(Em(e)&&(e=e.__vccOpts),t){t=dm(t);let{class:a,style:l}=t;a&&!Kt(a)&&(t.class=$t(a)),Nt(l)&&(ad(l)&&!yt(l)&&(l=re({},l)),t.style=na(l))}const o=Kt(e)?1:M0(e)?128:cm(e)?64:Nt(e)?4:St(e)?2:0;return it(e,t,r,n,i,o,s,!0)}function dm(e){return e?ad(e)||da in e?re({},e):e:null}function jr(e,t,r=!1){const{props:n,ref:i,patchFlag:s,children:o}=e,a=t?gm(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Fd(a),ref:t&&t.ref?r&&i?yt(i)?i.concat(Xs(t)):[i,Xs(t)]:Xs(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==be?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&jr(e.ssContent),ssFallback:e.ssFallback&&jr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function pm(e=" ",t=0){return Ft(ha,null,e,t)}function vm(e,t){const r=Ft($s,null,e);return r.staticCount=t,r}function hr(e="",t=!1){return t?(Dt(),Ld(Ze,null,e)):Ft(Ze,null,e)}function ar(e){return e==null||typeof e=="boolean"?Ft(Ze):yt(e)?Ft(be,null,e.slice()):typeof e=="object"?Lr(e):Ft(ha,null,String(e))}function Lr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:jr(e)}function Pu(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(yt(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Pu(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(da in t)?t._ctx=_e:i===3&&_e&&(_e.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else St(t)?(t={default:t,_ctx:_e},r=32):(t=String(t),n&64?(r=16,t=[pm(t)]):r=8);e.children=t,e.shapeFlag|=r}function gm(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=$t([t.class,n.class]));else if(i==="style")t.style=na([t.style,n.style]);else if(ta(i)){const s=t[i],o=n[i];o&&s!==o&&!(yt(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=n[i])}return t}function ir(e,t,r,n=null){ze(e,t,7,[r,n])}const mm=Md();let ym=0;function bm(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||mm,s={uid:ym++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Vg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pd(n,i),emitsOptions:md(n,i),emit:null,emitted:null,propsDefaults:Lt,inheritAttrs:n.inheritAttrs,ctx:Lt,data:Lt,props:Lt,attrs:Lt,slots:Lt,refs:Lt,setupState:Lt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=C0.bind(null,s),e.ce&&e.ce(s),s}let fe=null;const xm=()=>fe||_e;let vo,kl;{const e=Xh(),t=(r,n)=>{let i;return(i=e[r])||(i=e[r]=[]),i.push(n),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};vo=t("__VUE_INSTANCE_SETTERS__",r=>fe=r),kl=t("__VUE_SSR_SETTERS__",r=>pa=r)}const ts=e=>{const t=fe;return vo(e),e.scope.on(),()=>{e.scope.off(),vo(t)}},tf=()=>{fe&&fe.scope.off(),vo(null)};function zd(e){return e.vnode.shapeFlag&4}let pa=!1;function Cm(e,t=!1){t&&kl(t);const{props:r,children:n}=e.vnode,i=zd(e);em(e,r,i,t),im(e,n);const s=i?Sm(e,t):void 0;return t&&kl(!1),s}function Sm(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=ld(new Proxy(e.ctx,U0));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?_m(e):null,s=ts(e);mn();const o=Wr(n,e,0,[e.props,i]);if(yn(),s(),Hh(o)){if(o.then(tf,tf),t)return o.then(a=>{ef(e,a,t)}).catch(a=>{sa(a,e,0)});e.asyncDep=o}else ef(e,o,t)}else Nd(e,t)}function ef(e,t,r){St(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Nt(t)&&(e.setupState=fd(t)),Nd(e,r)}let rf;function Nd(e,t,r){const n=e.type;if(!e.render){if(!t&&rf&&!n.render){const i=n.template||Mu(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,u=re(re({isCustomElement:s,delimiters:a},o),l);n.render=rf(i,u)}}e.render=n.render||Fe}{const i=ts(e);mn();try{Y0(e)}finally{yn(),i()}}}function wm(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return ke(e,"get","$attrs"),t[r]}}))}function _m(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return wm(e)},slots:e.slots,emit:e.emit,expose:t}}function va(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(fd(ld(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Mi)return Mi[r](e)},has(t,r){return r in t||r in Mi}}))}function Em(e){return St(e)&&"__vccOpts"in e}const Gd=(e,t)=>h0(e,t,pa);function km(e,t,r){const n=arguments.length;return n===2?Nt(t)&&!yt(t)?El(t)?Ft(e,null,[t]):Ft(e,t):Ft(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&El(r)&&(r=[r]),Ft(e,t,r))}const Mm="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Tm="http://www.w3.org/2000/svg",Pm="http://www.w3.org/1998/Math/MathML",Fr=typeof document<"u"?document:null,nf=Fr&&Fr.createElement("template"),Dm={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t==="svg"?Fr.createElementNS(Tm,e):t==="mathml"?Fr.createElementNS(Pm,e):Fr.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Fr.createTextNode(e),createComment:e=>Fr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Fr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,s){const o=r?r.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{nf.innerHTML=n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e;const a=nf.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},Dr="transition",li="animation",Vi=Symbol("_vtc"),Di=(e,{slots:t})=>km(I0,Rm(e),t);Di.displayName="Transition";const Wd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Di.props=re({},xd,Wd);const Jr=(e,t=[])=>{yt(e)?e.forEach(r=>r(...t)):e&&e(...t)},sf=e=>e?yt(e)?e.some(t=>t.length>1):e.length>1:!1;function Rm(e){const t={};for(const T in e)T in Wd||(t[T]=e[T]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:s=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:d=`${r}-leave-to`}=e,p=Am(i),v=p&&p[0],g=p&&p[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:C,onLeave:S,onLeaveCancelled:_,onBeforeAppear:y=m,onAppear:w=b,onAppearCancelled:x=C}=t,E=(T,P,O)=>{Zr(T,P?c:a),Zr(T,P?u:o),O&&O()},k=(T,P)=>{T._isLeaving=!1,Zr(T,f),Zr(T,d),Zr(T,h),P&&P()},B=T=>(P,O)=>{const L=T?w:b,W=()=>E(P,T,O);Jr(L,[P,W]),of(()=>{Zr(P,T?l:s),Rr(P,T?c:a),sf(L)||af(P,n,v,W)})};return re(t,{onBeforeEnter(T){Jr(m,[T]),Rr(T,s),Rr(T,o)},onBeforeAppear(T){Jr(y,[T]),Rr(T,l),Rr(T,u)},onEnter:B(!1),onAppear:B(!0),onLeave(T,P){T._isLeaving=!0;const O=()=>k(T,P);Rr(T,f),Im(),Rr(T,h),of(()=>{T._isLeaving&&(Zr(T,f),Rr(T,d),sf(S)||af(T,n,g,O))}),Jr(S,[T,O])},onEnterCancelled(T){E(T,!1),Jr(C,[T])},onAppearCancelled(T){E(T,!0),Jr(x,[T])},onLeaveCancelled(T){k(T),Jr(_,[T])}})}function Am(e){if(e==null)return null;if(Nt(e))return[Na(e.enter),Na(e.leave)];{const t=Na(e);return[t,t]}}function Na(e){return Lg(e)}function Rr(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Vi]||(e[Vi]=new Set)).add(t)}function Zr(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[Vi];r&&(r.delete(t),r.size||(e[Vi]=void 0))}function of(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Bm=0;function af(e,t,r,n){const i=e._endId=++Bm,s=()=>{i===e._endId&&n()};if(r)return setTimeout(s,r);const{type:o,timeout:a,propCount:l}=Om(e,t);if(!o)return n();const u=o+"end";let c=0;const f=()=>{e.removeEventListener(u,h),s()},h=d=>{d.target===e&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},a+1),e.addEventListener(u,h)}function Om(e,t){const r=window.getComputedStyle(e),n=p=>(r[p]||"").split(", "),i=n(`${Dr}Delay`),s=n(`${Dr}Duration`),o=lf(i,s),a=n(`${li}Delay`),l=n(`${li}Duration`),u=lf(a,l);let c=null,f=0,h=0;t===Dr?o>0&&(c=Dr,f=o,h=s.length):t===li?u>0&&(c=li,f=u,h=l.length):(f=Math.max(o,u),c=f>0?o>u?Dr:li:null,h=c?c===Dr?s.length:l.length:0);const d=c===Dr&&/\b(transform|all)(,|$)/.test(n(`${Dr}Property`).toString());return{type:c,timeout:f,propCount:h,hasTransform:d}}function lf(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>uf(r)+uf(e[n])))}function uf(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Im(){return document.body.offsetHeight}function Lm(e,t,r){const n=e[Vi];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const cf=Symbol("_vod"),Fm=Symbol("_vsh"),zm=Symbol(""),Nm=/(^|;)\s*display\s*:/;function Gm(e,t,r){const n=e.style,i=Kt(r);let s=!1;if(r&&!i){if(t)if(Kt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&Us(n,a,"")}else for(const o in t)r[o]==null&&Us(n,o,"");for(const o in r)o==="display"&&(s=!0),Us(n,o,r[o])}else if(i){if(t!==r){const o=n[zm];o&&(r+=";"+o),n.cssText=r,s=Nm.test(r)}}else t&&e.removeAttribute("style");cf in e&&(e[cf]=s?n.display:"",e[Fm]&&(n.display="none"))}const ff=/\s*!important$/;function Us(e,t,r){if(yt(r))r.forEach(n=>Us(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=Wm(e,t);ff.test(r)?e.setProperty(ti(n),r.replace(ff,""),"important"):e[n]=r}}const hf=["Webkit","Moz","ms"],Ga={};function Wm(e,t){const r=Ga[t];if(r)return r;let n=jn(t);if(n!=="filter"&&n in e)return Ga[t]=n;n=$h(n);for(let i=0;i<hf.length;i++){const s=hf[i]+n;if(s in e)return Ga[t]=s}return t}const df="http://www.w3.org/1999/xlink";function Hm(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(df,t.slice(6,t.length)):e.setAttributeNS(df,t,r);else{const s=Hg(t);r==null||s&&!Uh(r)?e.removeAttribute(t):e.setAttribute(t,s?"":r)}}function Vm(e,t,r,n,i,s,o){if(t==="innerHTML"||t==="textContent"){n&&o(n,i,s),e[t]=r??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const u=a==="OPTION"?e.getAttribute("value")||"":e.value,c=r??"";(u!==c||!("_value"in e))&&(e.value=c),r==null&&e.removeAttribute(t),e._value=r;return}let l=!1;if(r===""||r==null){const u=typeof e[t];u==="boolean"?r=Uh(r):r==null&&u==="string"?(r="",l=!0):u==="number"&&(r=0,l=!0)}try{e[t]=r}catch{}l&&e.removeAttribute(t)}function _n(e,t,r,n){e.addEventListener(t,r,n)}function jm(e,t,r,n){e.removeEventListener(t,r,n)}const pf=Symbol("_vei");function $m(e,t,r,n,i=null){const s=e[pf]||(e[pf]={}),o=s[t];if(n&&o)o.value=n;else{const[a,l]=Xm(t);if(n){const u=s[t]=qm(n,i);_n(e,a,u,l)}else o&&(jm(e,a,o,l),s[t]=void 0)}}const vf=/(?:Once|Passive|Capture)$/;function Xm(e){let t;if(vf.test(e)){t={};let n;for(;n=e.match(vf);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ti(e.slice(2)),t]}let Wa=0;const Um=Promise.resolve(),Ym=()=>Wa||(Um.then(()=>Wa=0),Wa=Date.now());function qm(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;ze(Km(n,r.value),t,5,[n])};return r.value=e,r.attached=Ym(),r}function Km(e,t){if(yt(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const gf=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Jm=(e,t,r,n,i,s,o,a,l)=>{const u=i==="svg";t==="class"?Lm(e,n,u):t==="style"?Gm(e,r,n):ta(t)?du(t)||$m(e,t,r,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Zm(e,t,n,u))?Vm(e,t,n,s,o,a,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Hm(e,t,n,u))};function Zm(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&gf(t)&&St(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return gf(t)&&Kt(r)?!1:t in e}const mf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return yt(t)?r=>Ws(t,r):t};function Qm(e){e.target.composing=!0}function yf(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ha=Symbol("_assign"),ty={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e[Ha]=mf(i);const s=n||i.props&&i.props.type==="number";_n(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;r&&(a=a.trim()),s&&(a=hl(a)),e[Ha](a)}),r&&_n(e,"change",()=>{e.value=e.value.trim()}),t||(_n(e,"compositionstart",Qm),_n(e,"compositionend",yf),_n(e,"change",yf))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},s){if(e[Ha]=mf(s),e.composing)return;const o=i||e.type==="number"?hl(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===a)||(e.value=a))}},ey=re({patchProp:Jm},Dm);let bf;function ry(){return bf||(bf=om(ey))}const ny=(...e)=>{const t=ry().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=sy(n);if(!i)return;const s=t._component;!St(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=r(i,!1,iy(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function iy(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function sy(e){return Kt(e)?document.querySelector(e):e}const oy="/StickerEditor/assets/add1-0XuTPjLX.png",ay="/StickerEditor/assets/add2-RRQ8YQ0u.png",xf="/StickerEditor/assets/add3-DWmAwVb9.png",Cf="/StickerEditor/assets/add4-DrcPqAIq.png",Sf="/StickerEditor/assets/add5-BIXogDIN.png",wf="/StickerEditor/assets/add6-D0aQ2SaT.png",_f="/StickerEditor/assets/add21-BGbuhfVT.jpg",ly={class:"flex flex-col gap-5"},uy={class:"bg-Surface h-[50vh] w-[22vw] relative rounded-bl-xl",ref:"parentContainer"},cy=it("label",{Class:"text-Primary font-semibold flex justify-center mb-2 mt-2 text-xl"},"Gallery",-1),fy={class:"max-h-[42vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},hy=["onClick"],dy=["src","alt"],py={class:"bg-Surface h-[50vh] w-[22vw] relative rounded-tl-xl",ref:"parentContainer"},vy=it("label",{Class:"text-Primary font-semibold flex justify-center mb-2 mt-2 text-xl"},"Saved image",-1),gy={class:"max-h-[42vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},my=["onClick"],yy=["src"],by={__name:"AsideRight",emits:["selectImage"],setup(e,{emit:t}){const r=fr("images"),n=fr("savedImages"),i=t,s=o=>{i("selectImage",o)};return(o,a)=>(Dt(),At("div",ly,[it("div",uy,[cy,it("div",fy,[(Dt(!0),At(be,null,ho(oe(r),(l,u)=>(Dt(),At("div",{key:u,class:"object-fill flex justify-center items-center cursor-pointer",onClick:c=>s(l.src)},[it("img",{class:"min-w-[8vw]",src:l.src,alt:l.alt},null,8,dy)],8,hy))),128))])],512),it("div",py,[vy,it("div",gy,[(Dt(!0),At(be,null,ho(oe(n),(l,u)=>(Dt(),At("div",{key:u,class:"object-fill flex justify-center items-center cursor-pointer",onClick:c=>s(l)},[it("img",{class:"max-w-[8vw]",src:l,alt:"Saved Image"},null,8,yy)],8,my))),128))])],512)]))}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hd=function(e,t){return(Hd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(e,t)};function Gt(e,t){function r(){this.constructor=e}Hd(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Ef(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(u){try{l(n.next(u))}catch(c){s(c)}}function a(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof r?c:new r(function(f){f(c)})).then(o,a)}l((n=n.apply(e,[])).next())})}function kf(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(f){c=[6,f],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function ji(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}var Z=function(){function e(){}return e.createDefs=function(){return document.createElementNS("http://www.w3.org/2000/svg","defs")},e.setAttributes=function(t,r){for(var n=0,i=r;n<i.length;n++){var s=i[n],o=s[0],a=s[1];t.setAttribute(o,a)}},e.createRect=function(t,r,n){var i=document.createElementNS("http://www.w3.org/2000/svg","rect");return i.setAttribute("width",t.toString()),i.setAttribute("height",r.toString()),n&&e.setAttributes(i,n),i},e.createLine=function(t,r,n,i,s){var o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",t.toString()),o.setAttribute("y1",r.toString()),o.setAttribute("x2",n.toString()),o.setAttribute("y2",i.toString()),s&&e.setAttributes(o,s),o},e.createPolygon=function(t,r){var n=document.createElementNS("http://www.w3.org/2000/svg","polygon");return n.setAttribute("points",t),r&&e.setAttributes(n,r),n},e.createCircle=function(t,r){var n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",(t/2).toString()),n.setAttribute("cy",(t/2).toString()),n.setAttribute("r",t.toString()),r&&e.setAttributes(n,r),n},e.createEllipse=function(t,r,n){var i=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return i.setAttribute("cx",(t/2).toString()),i.setAttribute("cy",(r/2).toString()),i.setAttribute("rx",(t/2).toString()),i.setAttribute("ry",(r/2).toString()),n&&e.setAttributes(i,n),i},e.createGroup=function(t){var r=document.createElementNS("http://www.w3.org/2000/svg","g");return t&&e.setAttributes(r,t),r},e.createTransform=function(){return document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGTransform()},e.createMarker=function(t,r,n,i,s,o,a){var l=document.createElementNS("http://www.w3.org/2000/svg","marker");return e.setAttributes(l,[["id",t],["orient",r],["markerWidth",n.toString()],["markerHeight",i.toString()],["refX",s.toString()],["refY",o.toString()]]),l.appendChild(a),l},e.createText=function(t){var r=document.createElementNS("http://www.w3.org/2000/svg","text");return r.setAttribute("x","0"),r.setAttribute("y","0"),t&&e.setAttributes(r,t),r},e.createTSpan=function(t,r){var n=document.createElementNS("http://www.w3.org/2000/svg","tspan");return n.textContent=t,r&&e.setAttributes(n,r),n},e.createImage=function(t){var r=document.createElementNS("http://www.w3.org/2000/svg","image");return t&&e.setAttributes(r,t),r},e.createPoint=function(t,r){var n=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGPoint();return n.x=t,n.y=r,n},e.createPath=function(t,r){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),r&&e.setAttributes(n,r),n},e}(),Mf=function(){function e(){}return e.addKey=function(t){e.key=t},Object.defineProperty(e,"isLicensed",{get:function(){return!!e.key&&new RegExp(/^MJS2-[A-Z][0-9]{3}-[A-Z][0-9]{3}-[0-9]{4}$/,"i").test(e.key)},enumerable:!1,configurable:!0}),e}(),xy=function(){function e(){this.naturalSize=!1,this.imageType="image/png",this.markersOnly=!1}return e.prototype.rasterize=function(t,r,n){var i=this;return new Promise(function(s){var o=n!==void 0?n:document.createElement("canvas");t===null&&(i.markersOnly=!0,i.naturalSize=!1);var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("width",r.width.baseVal.valueAsString),a.setAttribute("height",r.height.baseVal.valueAsString),a.setAttribute("viewBox","0 0 "+r.viewBox.baseVal.width.toString()+" "+r.viewBox.baseVal.height.toString()),a.innerHTML=r.innerHTML,i.naturalSize===!0?(a.width.baseVal.value=t.naturalWidth,a.height.baseVal.value=t.naturalHeight):i.width!==void 0&&i.height!==void 0&&(a.width.baseVal.value=i.width,a.height.baseVal.value=i.height),o.width=a.width.baseVal.value,o.height=a.height.baseVal.value;var l=a.outerHTML,u=o.getContext("2d");i.markersOnly!==!0&&u.drawImage(t,0,0,o.width,o.height);var c=window.URL,f=new Image(o.width,o.height);f.setAttribute("crossOrigin","anonymous");var h=new Blob([l],{type:"image/svg+xml"}),d=c.createObjectURL(h);f.onload=function(){u.drawImage(f,0,0),c.revokeObjectURL(d);var p=o.toDataURL(i.imageType,i.imageQuality);s(p)},f.src=d})},e}(),Tf=function(){},Cy=function(){function e(t){this._classNamePrefixBase="__markerjs2_",this.classes=[],this.rules=[],this.settings=this.defaultSettings,this._classNamePrefix=this._classNamePrefixBase+"_"+t+"_"}return Object.defineProperty(e.prototype,"classNamePrefixBase",{get:function(){return this._classNamePrefixBase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNamePrefix",{get:function(){return this._classNamePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultSettings",{get:function(){return{canvasBackgroundColor:"#ffffff",toolbarBackgroundColor:"#111111",toolbarBackgroundHoverColor:"#333333",toolbarColor:"#eeeeee",toolbarHeight:40,toolboxColor:"#eeeeee",toolboxAccentColor:"#3080c3",undoButtonVisible:!0,redoButtonVisible:!1,zoomButtonVisible:!1,zoomOutButtonVisible:!1,clearButtonVisible:!1,resultButtonBlockVisible:!0,logoPosition:"left"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fadeInAnimationClassName",{get:function(){return this.classNamePrefix+"fade_in"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fadeOutAnimationClassName",{get:function(){return this.classNamePrefix+"fade_out"},enumerable:!1,configurable:!0}),e.prototype.addClass=function(t){return this.styleSheet===void 0&&this.addStyleSheet(),t.name=""+this.classNamePrefix+t.localName,this.classes.push(t),this.styleSheet.sheet.insertRule("."+t.name+" {"+t.style+"}",this.styleSheet.sheet.cssRules.length),t},e.prototype.addRule=function(t){this.styleSheet===void 0&&this.addStyleSheet(),this.rules.push(t),this.styleSheet.sheet.insertRule(t.selector+" {"+t.style+"}",this.styleSheet.sheet.cssRules.length)},e.prototype.addStyleSheet=function(){var t;this.styleSheet=document.createElement("style"),((t=this.styleSheetRoot)!==null&&t!==void 0?t:document.head).appendChild(this.styleSheet),this.addRule(new qe("."+this.classNamePrefix+" h3","font-family: sans-serif")),this.addRule(new qe("@keyframes "+this.classNamePrefix+"_fade_in_animation_frames",`
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
    `)),this.addRule(new qe("@keyframes "+this.classNamePrefix+"_fade_out_animation_frames",`
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
    `)),this.addClass(new Qt("fade_in",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_in_animation_frames;
    `)),this.addClass(new Qt("fade_out",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_out_animation_frames;
    `))},e.prototype.removeStyleSheet=function(){var t;this.styleSheet&&(((t=this.styleSheetRoot)!==null&&t!==void 0?t:document.head).removeChild(this.styleSheet),this.styleSheet=void 0)},e}(),qe=function(e,t){this.selector=e,this.style=t},Qt=function(e,t){this.localName=e,this.style=t},Sy=function(){function e(t,r,n,i,s){this.buttons=[],this.markerButtons=[],this.buttonClickListeners=[],this.markerjsContainer=t,this.displayMode=r,this.markerItems=n,this.uiStyleSettings=i,this.styles=s,this.addStyles(),this.adjustLayout=this.adjustLayout.bind(this),this.overflowButtonClicked=this.overflowButtonClicked.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this)}return e.prototype.show=function(t){var r=this;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=t,this.uiContainer.className=this.toolbarStyleClass.name+" "+this.styles.fadeInAnimationClassName+" "+(this.uiStyleSettings.toolbarStyleColorsClassName?this.uiStyleSettings.toolbarStyleColorsClassName:this.toolbarStyleColorsClass.name);var n=document.createElement("div");n.className=this.toolbarBlockStyleClass.name,n.style.whiteSpace="nowrap",this.uiContainer.appendChild(n),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M10.07 14.27a.997.997 0 011.33.48l2.3 4.99 1.8-.85-2.31-4.98c-.24-.5-.02-1.1.48-1.33l.28-.08 2.3-.45L8 5.12V15.9l1.82-1.47.25-.16m3.57 7.7a.99.99 0 01-1.33-.47l-2.18-4.74-2.51 2.02c-.17.14-.38.22-.62.22a1 1 0 01-1-1V3a1 1 0 011-1c.24 0 .47.09.64.23l.01-.01 11.49 9.64a1.001 1.001 0 01-.44 1.75l-3.16.62 2.2 4.73c.26.5.02 1.09-.48 1.32l-3.62 1.69z"/></svg>',"select","Select mode"),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M9 3v1H4v2h1v13a2 2 0 002 2h10a2 2 0 002-2V6h1V4h-5V3H9M7 6h10v13H7V6m2 2v9h2V8H9m4 0v9h2V8h-2z"/></svg>',"delete","Delete marker"),this.uiStyleSettings.clearButtonVisible&&this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M19.36 2.72l1.42 1.42-5.72 5.71c1.07 1.54 1.22 3.39.32 4.59L9.06 8.12c1.2-.9 3.05-.75 4.59.32l5.71-5.72M5.93 17.57c-2.01-2.01-3.24-4.41-3.58-6.65l4.88-2.09 7.44 7.44-2.09 4.88c-2.24-.34-4.64-1.57-6.65-3.58z"/></svg>',"clear","Delete all markers"),this.uiStyleSettings.undoButtonVisible&&this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M12.5 8c-2.65 0-5.05 1-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>',"undo","Undo"),this.uiStyleSettings.redoButtonVisible&&this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 017.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/></svg>',"redo","Redo"),this.uiStyleSettings.zoomButtonVisible&&this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M15.5 14l5 5-1.5 1.5-5-5v-.79l-.27-.28A6.471 6.471 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3 6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.57 4.23l.28.27h.79m-6 0C12 14 14 12 14 9.5S12 5 9.5 5 5 7 5 9.5 7 14 9.5 14m2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"/></svg>',"zoom","Zoom in"),this.uiStyleSettings.zoomButtonVisible&&this.uiStyleSettings.zoomOutButtonVisible&&this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 009.5 3 6.5 6.5 0 003 9.5 6.5 6.5 0 009.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.5-1.5-5-5m-6 0C7 14 5 12 5 9.5S7 5 9.5 5 14 7 14 9.5 12 14 9.5 14M7 9h5v1H7V9z"/></svg>',"zoom-out","Zoom out"),this.uiStyleSettings.notesButtonVisible&&this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M18.13 12l1.26-1.26c.44-.44 1-.68 1.61-.74V9l-6-6H5c-1.11 0-2 .89-2 2v14a2 2 0 002 2h6v-1.87l.13-.13H5V5h7v7h6.13M14 4.5l5.5 5.5H14V4.5m5.13 9.33l2.04 2.04L15.04 22H13v-2.04l6.13-6.13m3.72.36l-.98.98-2.04-2.04.98-.98c.19-.2.52-.2.72 0l1.32 1.32c.2.2.2.53 0 .72z"/></svg>',"notes","Notes"),this.markerButtonBlock=document.createElement("div"),this.markerButtonBlock.className=this.toolbarBlockStyleClass.name,this.markerButtonBlock.style.flexGrow="2",this.markerButtonBlock.style.textAlign="center",this.uiContainer.appendChild(this.markerButtonBlock),this.markerButtonOverflowBlock=document.createElement("div"),this.markerButtonOverflowBlock.className=this.toolbarOverflowBlockStyleClass.name+" "+(this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName?this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName:this.toolbarOverflowBlockStyleColorsClass.name),this.markerButtonOverflowBlock.style.display="none",this.uiContainer.appendChild(this.markerButtonOverflowBlock),this.markerItems&&(this.markerItems.forEach(function(s){var o=document.createElement("div");o.className=""+r.toolbarButtonStyleClass.name,o.setAttribute("data-type-name",s.typeName),o.setAttribute("aria-label",s.title),o.setAttribute("title",s.title),o.innerHTML=s.icon,o.addEventListener("click",function(){r.markerToolbarButtonClicked(o,s)}),r.buttons.push(o),r.markerButtons.push(o)}),this.overflowButton=document.createElement("div"),this.overflowButton.className=this.toolbarButtonStyleClass.name+" "+(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name),this.overflowButton.innerHTML='<svg viewBox="0 0 24 24"><path d="M12 16a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2z"/></svg>',this.overflowButton.addEventListener("click",this.overflowButtonClicked),this.markerButtonBlock.appendChild(this.overflowButton));var i=document.createElement("div");i.className=this.toolbarBlockStyleClass.name,i.style.whiteSpace="nowrap",i.style.display=this.uiStyleSettings.resultButtonBlockVisible!==!1?"":"none",this.uiContainer.appendChild(i),this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M9 20.42l-6.21-6.21 2.83-2.83L9 14.77l9.88-9.89 2.83 2.83L9 20.42z"/></svg>',"render","Save and close"),this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M20 6.91L17.09 4 12 9.09 6.91 4 4 6.91 9.09 12 4 17.09 6.91 20 12 14.91 17.09 20 20 17.09 14.91 12 20 6.91z"/></svg>',"close","Close"),this.markerjsContainer.appendChild(this.uiContainer),this.setSelectMode(),this.setCurrentMarker(),this.adjustLayout()},e.prototype.addButtonClickListener=function(t){this.buttonClickListeners.push(t)},e.prototype.removeButtonClickListener=function(t){this.buttonClickListeners.indexOf(t)>-1&&this.buttonClickListeners.splice(this.buttonClickListeners.indexOf(t),1)},e.prototype.setSelectMode=function(){this.resetButtonStyles(),this.setActiveButton(this.buttons[0])},e.prototype.adjustLayout=function(){if(this.markerButtons&&this.markerButtons.length>0){var t=Math.floor(this.markerButtonBlock.clientWidth/this.uiStyleSettings.toolbarHeight)-1;this.markerButtonBlock.innerHTML="",this.markerButtonOverflowBlock.innerHTML="";for(var r=0;r<this.markerButtons.length;r++)r<t||r===t&&this.markerButtons.length-1===t?this.markerButtonBlock.appendChild(this.markerButtons[r]):(r===t&&this.markerButtonBlock.appendChild(this.overflowButton),this.markerButtonOverflowBlock.appendChild(this.markerButtons[r]))}},e.prototype.overflowButtonClicked=function(){this.markerButtonOverflowBlock.style.display!=="none"?(this.markerButtonOverflowBlock.className=this.markerButtonOverflowBlock.className.replace(this.styles.fadeInAnimationClassName,""),this.markerButtonOverflowBlock.style.display="none"):(this.markerButtonOverflowBlock.className+=" "+this.styles.fadeInAnimationClassName,this.markerButtonOverflowBlock.style.top=this.uiContainer.offsetTop+this.overflowButton.offsetHeight+"px",this.markerButtonOverflowBlock.style.right=this.uiContainer.offsetWidth-this.overflowButton.offsetLeft-this.overflowButton.offsetWidth+2*this.uiContainer.offsetLeft+"px",this.markerButtonOverflowBlock.style.display="inline-block")},e.prototype.resetButtonStyles=function(){var t=this;this.buttons.forEach(function(r){r.className=r.className.replace(t.uiStyleSettings.toolbarButtonStyleColorsClassName?t.uiStyleSettings.toolbarButtonStyleColorsClassName:t.toolbarButtonStyleColorsClass.name,"").trim(),r.className=r.className.replace(t.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?t.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:t.toolbarActiveButtonStyleColorsClass.name,"").trim(),r.className+=" "+(t.uiStyleSettings.toolbarButtonStyleColorsClassName?t.uiStyleSettings.toolbarButtonStyleColorsClassName:t.toolbarButtonStyleColorsClass.name)})},e.prototype.addActionButton=function(t,r,n,i){var s=this,o=document.createElement("div");switch(o.className=""+this.toolbarButtonStyleClass.name,o.innerHTML=r,o.setAttribute("role","button"),o.setAttribute("data-action",n),o.title=i,o.setAttribute("aria-label",i),o.addEventListener("click",function(){s.actionToolbarButtonClicked(o,n)}),n){case"select":o.style.fill=this.uiStyleSettings.selectButtonColor;break;case"delete":case"clear":o.style.fill=this.uiStyleSettings.deleteButtonColor;break;case"undo":case"redo":o.style.fill=this.uiStyleSettings.selectButtonColor;break;case"render":o.style.fill=this.uiStyleSettings.okButtonColor;break;case"close":o.style.fill=this.uiStyleSettings.closeButtonColor}t.appendChild(o),this.buttons.push(o)},e.prototype.addStyles=function(){this.toolbarStyleClass=this.styles.addClass(new Qt("toolbar",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: row;
      justify-content: space-between;      
      height: `+this.uiStyleSettings.toolbarHeight+`px;
      box-sizing: content-box;
      `+(this.displayMode==="inline"?"border-top-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-top-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolbarStyleColorsClass=this.styles.addClass(new Qt("toolbar_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      box-shadow: 0px 3px rgba(33, 33, 33, 0.1);
    `)),this.toolbarBlockStyleClass=this.styles.addClass(new Qt("toolbar-block",`
        display: inline-block;
        box-sizing: content-box;
    `)),this.toolbarOverflowBlockStyleClass=this.styles.addClass(new Qt("toolbar-overflow-block",`
        position: absolute;
        top: `+this.uiStyleSettings.toolbarHeight+`px;
        max-width: `+2*this.uiStyleSettings.toolbarHeight+`px;
        z-index: 10;
        box-sizing: content-box;
      `)),this.toolbarOverflowBlockStyleColorsClass=this.styles.addClass(new Qt("toolbar-overflow-block_colors",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      `));var t=this.uiStyleSettings.toolbarHeight/4;this.toolbarButtonStyleClass=this.styles.addClass(new Qt("toolbar_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*t)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*t)+`px;
      padding: `+t+`px;
      box-sizing: content-box;
    `)),this.toolbarButtonStyleColorsClass=this.styles.addClass(new Qt("toolbar_button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolbarActiveButtonStyleColorsClass=this.styles.addClass(new Qt("toolbar_active_button",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new qe("."+this.toolbarButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new qe("."+this.toolbarButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `))},e.prototype.markerToolbarButtonClicked=function(t,r){this.setActiveButton(t),this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(n){return n("marker",r)}),this.markerButtonOverflowBlock.style.display="none"},e.prototype.actionToolbarButtonClicked=function(t,r){this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(n){return n("action",r)}),this.markerButtonOverflowBlock.style.display="none",this.setActiveButton(this.buttons[0])},e.prototype.setActiveButton=function(t){this.resetButtonStyles(),t.className=t.className.replace(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name,"").trim(),t.className+=" "+(this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:this.toolbarActiveButtonStyleColorsClass.name)},e.prototype.setActiveMarkerButton=function(t){var r=this.markerButtons.find(function(n){return n.getAttribute("data-type-name")===t});r&&this.setActiveButton(r)},e.prototype.setCurrentMarker=function(t){var r=this;this.currentMarker=t,this.buttons.filter(function(n){return/delete|notes/.test(n.getAttribute("data-action"))}).forEach(function(n){r.currentMarker===void 0?(n.style.fillOpacity="0.4",n.style.pointerEvents="none"):(n.style.fillOpacity="1",n.style.pointerEvents="all")})},e}(),wy=function(){function e(t,r,n,i){this.panels=[],this.panelButtons=[],this.markerjsContainer=t,this.displayMode=r,this.uiStyleSettings=n,this.styles=i,this.panelButtonClick=this.panelButtonClick.bind(this),this.addStyles()}return e.prototype.addStyles=function(){var t;this.toolboxStyleClass=this.styles.addClass(new Qt("toolbox",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      font-family: sans-serif;
      `+(this.displayMode==="popup"?"height:"+2.5*this.uiStyleSettings.toolbarHeight+"px;":"")+`
      box-sizing: content-box;
      `+(this.displayMode==="popup"?"background-color: "+this.uiStyleSettings.canvasBackgroundColor+";":"")+`
      `+(this.displayMode==="inline"?"border-bottom-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-bottom-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolboxStyleColorsClass=this.styles.addClass(new Qt("toolbox_colors",`
      color: `+this.uiStyleSettings.toolboxColor+`;
    `));var r=this.uiStyleSettings.toolbarHeight/4;this.toolboxButtonRowStyleClass=this.styles.addClass(new Qt("toolbox-button-row",`
      display: flex;
      cursor: default;
      box-sizing: content-box;
    `)),this.toolboxButtonRowStyleColorsClass=this.styles.addClass(new Qt("toolbox-button-row_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
    `)),this.toolboxPanelRowStyleClass=this.styles.addClass(new Qt("toolbox-panel-row",`
      display: flex;
      `+(this.displayMode==="inline"?"position: absolute;":"")+`
      `+(this.displayMode==="inline"?"bottom: "+this.uiStyleSettings.toolbarHeight+"px;":"")+`
      cursor: default;
      height: `+1.5*this.uiStyleSettings.toolbarHeight+`px;
      `+(this.displayMode==="inline"?"width: 100%;":"")+`
      box-sizing: content-box;
    `)),this.toolboxPanelRowStyleColorsClass=this.styles.addClass(new Qt("toolbox-panel-row_colors",`
      background-color: `+((t=this.uiStyleSettings.toolboxBackgroundColor)!==null&&t!==void 0?t:this.uiStyleSettings.toolbarBackgroundHoverColor)+`;
    `)),this.toolboxButtonStyleClass=this.styles.addClass(new Qt("toolbox_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*r)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*r)+`px;
      padding: `+r+`px;
      box-sizing: content-box;
    `)),this.toolboxButtonStyleColorsClass=this.styles.addClass(new Qt("toolbox-button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolboxActiveButtonStyleColorsClass=this.styles.addClass(new Qt("toolbox-active-button_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`;
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.styles.addRule(new qe("."+this.toolboxButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new qe("."+this.toolboxButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new qe("."+this.toolboxPanelRowStyleClass.name+" > div",`
        scrollbar-width: thin;
        `)),this.styles.addRule(new qe("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar",`
      height: 10px;
      width: 10px;
    `)),this.styles.addRule(new qe("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-track",`
        background-color: transparent;
        `)),this.styles.addRule(new qe("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-thumb",`
        background-color: #444;
        border-radius: 20px;
        border: 2px solid #aaa;
        `))},e.prototype.show=function(t){var r;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=t,this.uiContainer.className=this.toolboxStyleClass.name+" "+((r=this.uiStyleSettings.toolboxStyleColorsClassName)!==null&&r!==void 0?r:this.toolboxStyleColorsClass.name),this.markerjsContainer.appendChild(this.uiContainer)},e.prototype.setPanelButtons=function(t){var r,n,i=this;this.panels=t,this.uiContainer!==void 0&&(this.uiContainer.innerHTML="",this.panelRow=document.createElement("div"),this.panelRow.className=this.toolboxPanelRowStyleClass.name+" "+((r=this.uiStyleSettings.toolboxPanelRowStyleColorsClassName)!==null&&r!==void 0?r:this.toolboxPanelRowStyleColorsClass.name),this.uiContainer.appendChild(this.panelRow),this.buttonRow=document.createElement("div"),this.buttonRow.className=this.toolboxButtonRowStyleClass.name+" "+((n=this.uiStyleSettings.toolboxButtonRowStyleColorsClassName)!==null&&n!==void 0?n:this.toolboxButtonRowStyleColorsClass.name)+" ",this.uiContainer.appendChild(this.buttonRow),this.panelButtons.splice(0),this.panels.forEach(function(s){var o;s.uiStyleSettings=i.uiStyleSettings;var a=document.createElement("div");a.className=i.toolboxButtonStyleClass.name+" "+((o=i.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&o!==void 0?o:i.toolboxButtonStyleColorsClass.name),a.innerHTML=s.icon,a.title=s.title,a.setAttribute("role","button"),a.setAttribute("aria-label",s.title),s.id&&a.setAttribute("data-action",s.id),a.addEventListener("click",function(){i.panelButtonClick(s)}),i.panelButtons.push(a),i.buttonRow.appendChild(a)}),this.displayMode==="inline"?this.panelRow.style.display="none":this.panelRow.style.visibility="hidden")},e.prototype.panelButtonClick=function(t){var r=this,n=-1;if(t!==this.activePanel){n=this.panels.indexOf(t),this.panelRow.innerHTML="";var i=t.getUi();i.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.panelRow.appendChild(i),this.panelRow.style.display="flex",this.panelRow.style.visibility="visible",this.panelRow.className=this.panelRow.className.replace(this.styles.fadeOutAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeInAnimationClassName,this.activePanel=t}else this.activePanel=void 0,this.panelRow.className=this.panelRow.className.replace(this.styles.fadeInAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeOutAnimationClassName,setTimeout(function(){r.displayMode==="inline"?r.panelRow.style.display="none":r.panelRow.style.visibility="hidden"},200);this.panelButtons.forEach(function(s,o){var a,l;s.className=r.toolboxButtonStyleClass.name+" "+(o===n?""+((a=r.uiStyleSettings.toolboxActiveButtonStyleColorsClassName)!==null&&a!==void 0?a:r.toolboxActiveButtonStyleColorsClass.name):""+((l=r.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&l!==void 0?l:r.toolboxButtonStyleColorsClass.name))})},e}(),ei=function(){function e(t,r,n){this.title=t,this.icon=r,this._id=n}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e}(),Ee=function(e){function t(r,n,i,s,o){var a=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M17.5 12a1.5 1.5 0 01-1.5-1.5A1.5 1.5 0 0117.5 9a1.5 1.5 0 011.5 1.5 1.5 1.5 0 01-1.5 1.5m-3-4A1.5 1.5 0 0113 6.5 1.5 1.5 0 0114.5 5 1.5 1.5 0 0116 6.5 1.5 1.5 0 0114.5 8m-5 0A1.5 1.5 0 018 6.5 1.5 1.5 0 019.5 5 1.5 1.5 0 0111 6.5 1.5 1.5 0 019.5 8m-3 4A1.5 1.5 0 015 10.5 1.5 1.5 0 016.5 9 1.5 1.5 0 018 10.5 1.5 1.5 0 016.5 12M12 3a9 9 0 00-9 9 9 9 0 009 9 1.5 1.5 0 001.5-1.5c0-.39-.15-.74-.39-1-.23-.27-.38-.62-.38-1a1.5 1.5 0 011.5-1.5H16a5 5 0 005-5c0-4.42-4.03-8-9-8z"/></svg>',o||"color-picker-panel")||this;return a.colors=[],a.addTransparent=!1,a.colorBoxes=[],a.colors=n,a.currentColor=i,a.setCurrentColor=a.setCurrentColor.bind(a),a.getColorBox=a.getColorBox.bind(a),a}return Gt(t,e),t.prototype.getUi=function(){var r=this,n=document.createElement("div");return n.style.overflow="hidden",n.style.overflowX="scroll",n.style.whiteSpace="nowrap",this.colors.forEach(function(i){var s=r.getColorBox(i);n.appendChild(s),r.colorBoxes.push(s)}),n},t.prototype.getColorBox=function(r){var n=this,i=this.uiStyleSettings.toolbarHeight/4,s=this.uiStyleSettings.toolbarHeight-i,o=document.createElement("div");o.style.display="inline-block",o.style.boxSizing="content-box",o.style.width=s-2+"px",o.style.height=s-2+"px",o.style.padding="1px",o.style.marginRight="2px",o.style.marginBottom="2px",o.style.borderWidth="2px",o.style.borderStyle="solid",o.style.borderRadius=(s+2)/2+"px",o.style.borderColor=r===this.currentColor?this.uiStyleSettings.toolboxAccentColor:"transparent",o.addEventListener("click",function(){n.setCurrentColor(r,o)});var a=document.createElement("div");return a.style.display="inline-block",a.style.width=s-2+"px",a.style.height=s-2+"px",a.style.backgroundColor=r,a.style.borderRadius=s/2+"px",r==="transparent"&&(a.style.fill=this.uiStyleSettings.toolboxAccentColor,a.innerHTML=`<svg viewBox="0 0 24 24">
        <path d="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z" />
      </svg>`),o.appendChild(a),o},t.prototype.setCurrentColor=function(r,n){var i=this;this.currentColor=r,this.colorBoxes.forEach(function(s){s.style.borderColor=s===n?i.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onColorChanged&&this.onColorChanged(r)},t}(ei),Vd=function(){function e(t,r,n){this._state="new",this._isSelected=!1,this._container=t,this._overlayContainer=r,this.globalSettings=n,this.stateChanged=this.stateChanged.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this)}return Object.defineProperty(e.prototype,"typeName",{get:function(){return Object.getPrototypeOf(this).constructor.typeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overlayContainer",{get:function(){return this._overlayContainer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.ownsTarget=function(t){return!1},Object.defineProperty(e.prototype,"isSelected",{get:function(){return this._isSelected},enumerable:!1,configurable:!0}),e.prototype.select=function(){this.container.style.cursor="move",this._isSelected=!0,this.manipulationStartState=this.getState()},e.prototype.deselect=function(){this.container.style.cursor="default",this._isSelected=!1,this.stateChanged()},e.prototype.pointerDown=function(t,r){},e.prototype.dblClick=function(t,r){},e.prototype.manipulate=function(t){},e.prototype.pointerUp=function(t){this.stateChanged()},e.prototype.dispose=function(){},e.prototype.addMarkerVisualToContainer=function(t){this.container.childNodes.length>0?this.container.insertBefore(t,this.container.childNodes[0]):this.container.appendChild(t)},e.prototype.getState=function(){return{typeName:e.typeName,state:this.state,notes:this.notes}},e.prototype.restoreState=function(t){this._state=t.state,this.notes=t.notes},e.prototype.scale=function(t,r){},e.prototype.colorChanged=function(t){this.onColorChanged&&this.onColorChanged(t),this.stateChanged()},e.prototype.fillColorChanged=function(t){this.onFillColorChanged&&this.onFillColorChanged(t),this.stateChanged()},e.prototype.stateChanged=function(){if(this.onStateChanged&&this.state!=="creating"&&this.state!=="new"){var t=this.getState();this.manipulationStartState!==void 0&&(this.manipulationStartState.state="select"),t.state="select",JSON.stringify(this.manipulationStartState)!=JSON.stringify(t)&&this.onStateChanged(this)}},e.typeName="MarkerBase",e}(),_y=function(){function e(){this.findGripByVisual=this.findGripByVisual.bind(this)}return e.prototype.findGripByVisual=function(t){return this.topLeft.ownsTarget(t)?this.topLeft:this.topCenter.ownsTarget(t)?this.topCenter:this.topRight.ownsTarget(t)?this.topRight:this.centerLeft.ownsTarget(t)?this.centerLeft:this.centerRight.ownsTarget(t)?this.centerRight:this.bottomLeft.ownsTarget(t)?this.bottomLeft:this.bottomCenter.ownsTarget(t)?this.bottomCenter:this.bottomRight.ownsTarget(t)?this.bottomRight:void 0},e}(),Du=function(){function e(){this.GRIP_SIZE=10,this.visual=Z.createGroup(),this.visual.appendChild(Z.createCircle(1.5*this.GRIP_SIZE,[["fill","transparent"]])),this.visual.appendChild(Z.createCircle(this.GRIP_SIZE,[["fill","#cccccc"],["fill-opacity","0.7"],["stroke","#333333"],["stroke-width","2"],["stroke-opacity","0.7"]]))}return e.prototype.ownsTarget=function(t){return t===this.visual||t===this.visual.childNodes[0]||t===this.visual.childNodes[1]},e}(),ws=function(){function e(){}return e.toITransformMatrix=function(t){return{a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}},e.toSVGMatrix=function(t,r){return t.a=r.a,t.b=r.b,t.c=r.c,t.d=r.d,t.e=r.e,t.f=r.f,t},e}(),es=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.left=0,s.top=0,s.width=0,s.height=0,s.defaultSize={x:50,y:20},s.offsetX=0,s.offsetY=0,s.rotationAngle=0,s.CB_DISTANCE=10,s._suppressMarkerCreateEvent=!1,s.container.transform.baseVal.appendItem(Z.createTransform()),s.setupControlBox(),s}return Gt(t,e),Object.defineProperty(t.prototype,"centerX",{get:function(){return this.left+this.width/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this.top+this.height/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visual",{get:function(){return this._visual},set:function(r){this._visual=r;var n=Z.createTransform();this._visual.transform.baseVal.appendItem(n)},enumerable:!1,configurable:!0}),t.prototype.ownsTarget=function(r){return!!e.prototype.ownsTarget.call(this,r)||!!(this.controlGrips.findGripByVisual(r)!==void 0||this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(r))},t.prototype.pointerDown=function(r,n){e.prototype.pointerDown.call(this,r,n),this.state==="new"&&(this.left=r.x,this.top=r.y),this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.manipulationStartWidth=this.width,this.manipulationStartHeight=this.height;var i=this.unrotatePoint(r);if(this.manipulationStartX=i.x,this.manipulationStartY=i.y,this.offsetX=i.x-this.left,this.offsetY=i.y-this.top,this.state!=="new")if(this.select(),this.activeGrip=this.controlGrips.findGripByVisual(n),this.activeGrip!==void 0)this._state="resize";else if(this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(n)){this.activeGrip=this.rotatorGrip;var s=this.rotatePoint({x:this.centerX,y:this.centerY});this.left=s.x-this.width/2,this.top=s.y-this.height/2,this.moveVisual({x:this.left,y:this.top});var o=this.container.transform.baseVal.getItem(0);o.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(o,0),this.adjustControlBox(),this._state="rotate"}else this._state="move"},t.prototype.pointerUp=function(r){var n=this.state;e.prototype.pointerUp.call(this,r),this.state==="creating"&&this.width<10&&this.height<10?(this.width=this.defaultSize.x,this.height=this.defaultSize.y):this.manipulate(r),this._state="select",n==="creating"&&this.onMarkerCreated&&this._suppressMarkerCreateEvent===!1&&this.onMarkerCreated(this)},t.prototype.moveVisual=function(r){this.visual.style.transform="translate("+r.x+"px, "+r.y+"px)"},t.prototype.manipulate=function(r){var n=this.unrotatePoint(r);this.state==="creating"?this.resize(r):this.state==="move"?(this.left=this.manipulationStartLeft+(n.x-this.manipulationStartLeft)-this.offsetX,this.top=this.manipulationStartTop+(n.y-this.manipulationStartTop)-this.offsetY,this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()):this.state==="resize"?this.resize(n):this.state==="rotate"&&this.rotate(r)},t.prototype.resize=function(r){var n=this.manipulationStartLeft,i=this.manipulationStartWidth,s=this.manipulationStartTop,o=this.manipulationStartHeight;switch(this.activeGrip){case this.controlGrips.bottomLeft:case this.controlGrips.centerLeft:case this.controlGrips.topLeft:n=this.manipulationStartLeft+r.x-this.manipulationStartX,i=this.manipulationStartWidth+this.manipulationStartLeft-n;break;case this.controlGrips.bottomRight:case this.controlGrips.centerRight:case this.controlGrips.topRight:case void 0:i=this.manipulationStartWidth+r.x-this.manipulationStartX}switch(this.activeGrip){case this.controlGrips.topCenter:case this.controlGrips.topLeft:case this.controlGrips.topRight:s=this.manipulationStartTop+r.y-this.manipulationStartY,o=this.manipulationStartHeight+this.manipulationStartTop-s;break;case this.controlGrips.bottomCenter:case this.controlGrips.bottomLeft:case this.controlGrips.bottomRight:case void 0:o=this.manipulationStartHeight+r.y-this.manipulationStartY}i>=0?(this.left=n,this.width=i):(this.left=n+i,this.width=-i),o>=0?(this.top=s,this.height=o):(this.top=s+o,this.height=-o),this.setSize()},t.prototype.setSize=function(){this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()},t.prototype.rotate=function(r){if(Math.abs(r.x-this.centerX)>.1){var n=Math.sign(r.x-this.centerX);this.rotationAngle=180*Math.atan((r.y-this.centerY)/(r.x-this.centerX))/Math.PI+90*n,this.applyRotation()}},t.prototype.applyRotation=function(){var r=this.container.transform.baseVal.getItem(0);r.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(r,0)},t.prototype.rotatePoint=function(r){if(this.rotationAngle===0)return r;var n=this.container.getCTM(),i=Z.createPoint(r.x,r.y);return{x:(i=i.matrixTransform(n)).x,y:i.y}},t.prototype.unrotatePoint=function(r){if(this.rotationAngle===0)return r;var n=this.container.getCTM();n=n.inverse();var i=Z.createPoint(r.x,r.y);return{x:(i=i.matrixTransform(n)).x,y:i.y}},t.prototype.select=function(){e.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},t.prototype.deselect=function(){e.prototype.deselect.call(this),this.controlBox.style.display="none"},t.prototype.setupControlBox=function(){this.controlBox=Z.createGroup();var r=Z.createTransform();r.setTranslate(-this.CB_DISTANCE/2,-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.appendItem(r),this.container.appendChild(this.controlBox),this.controlRect=Z.createRect(this.width+this.CB_DISTANCE,this.height+this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"],["fill","transparent"],["pointer-events","none"]]),this.controlBox.appendChild(this.controlRect),this.globalSettings.disableRotation!==!0&&(this.rotatorGripLine=Z.createLine((this.width+2*this.CB_DISTANCE)/2,this.top-this.CB_DISTANCE,(this.width+2*this.CB_DISTANCE)/2,this.top-3*this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.appendChild(this.rotatorGripLine)),this.controlGrips=new _y,this.addControlGrips(),this.controlBox.style.display="none"},t.prototype.adjustControlBox=function(){var r=this.controlBox.transform.baseVal.getItem(0);r.setTranslate(this.left-this.CB_DISTANCE/2,this.top-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.replaceItem(r,0),this.controlRect.setAttribute("width",(this.width+this.CB_DISTANCE).toString()),this.controlRect.setAttribute("height",(this.height+this.CB_DISTANCE).toString()),this.rotatorGripLine!==void 0&&(this.rotatorGripLine.setAttribute("x1",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y1",(-this.CB_DISTANCE/2).toString()),this.rotatorGripLine.setAttribute("x2",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y2",(3*-this.CB_DISTANCE).toString())),this.positionGrips()},t.prototype.addControlGrips=function(){this.controlGrips.topLeft=this.createGrip(),this.controlGrips.topCenter=this.createGrip(),this.controlGrips.topRight=this.createGrip(),this.controlGrips.centerLeft=this.createGrip(),this.controlGrips.centerRight=this.createGrip(),this.controlGrips.bottomLeft=this.createGrip(),this.controlGrips.bottomCenter=this.createGrip(),this.controlGrips.bottomRight=this.createGrip(),this.globalSettings.disableRotation!==!0&&(this.rotatorGrip=this.createGrip()),this.positionGrips()},t.prototype.createGrip=function(){var r=new Du;return r.visual.transform.baseVal.appendItem(Z.createTransform()),this.controlBox.appendChild(r.visual),r},t.prototype.positionGrips=function(){var r=this.controlGrips.topLeft.GRIP_SIZE,n=-r/2,i=n,s=(this.width+this.CB_DISTANCE)/2-r/2,o=(this.height+this.CB_DISTANCE)/2-r/2,a=this.height+this.CB_DISTANCE-r/2,l=this.width+this.CB_DISTANCE-r/2;this.positionGrip(this.controlGrips.topLeft.visual,n,i),this.positionGrip(this.controlGrips.topCenter.visual,s,i),this.positionGrip(this.controlGrips.topRight.visual,l,i),this.positionGrip(this.controlGrips.centerLeft.visual,n,o),this.positionGrip(this.controlGrips.centerRight.visual,l,o),this.positionGrip(this.controlGrips.bottomLeft.visual,n,a),this.positionGrip(this.controlGrips.bottomCenter.visual,s,a),this.positionGrip(this.controlGrips.bottomRight.visual,l,a),this.rotatorGrip!==void 0&&this.positionGrip(this.rotatorGrip.visual,s,i-3*this.CB_DISTANCE)},t.prototype.positionGrip=function(r,n,i){var s=r.transform.baseVal.getItem(0);s.setTranslate(n,i),r.transform.baseVal.replaceItem(s,0)},t.prototype.hideControlBox=function(){this.controlBox.style.display="none"},t.prototype.showControlBox=function(){this.controlBox.style.display=""},t.prototype.getState=function(){return Object.assign({left:this.left,top:this.top,width:this.width,height:this.height,rotationAngle:this.rotationAngle,visualTransformMatrix:ws.toITransformMatrix(this.visual.transform.baseVal.getItem(0).matrix),containerTransformMatrix:ws.toITransformMatrix(this.container.transform.baseVal.getItem(0).matrix)},e.prototype.getState.call(this))},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var n=r;this.left=n.left,this.top=n.top,this.width=n.width,this.height=n.height,this.rotationAngle=n.rotationAngle,this.visual.transform.baseVal.getItem(0).setMatrix(ws.toSVGMatrix(this.visual.transform.baseVal.getItem(0).matrix,n.visualTransformMatrix)),this.container.transform.baseVal.getItem(0).setMatrix(ws.toSVGMatrix(this.container.transform.baseVal.getItem(0).matrix,n.containerTransformMatrix))},t.prototype.scale=function(r,n){e.prototype.scale.call(this,r,n);var i=this.rotatePoint({x:this.left,y:this.top}),s=this.unrotatePoint({x:i.x*r,y:i.y*n});this.left=s.x,this.top=s.y,this.width=this.width*r,this.height=this.height*n,this.adjustControlBox()},t}(Vd),jd=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.fillColor="transparent",s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.opacity=1,s.setStrokeColor=s.setStrokeColor.bind(s),s.setFillColor=s.setFillColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.createVisual=s.createVisual.bind(s),s}return Gt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual)},t.prototype.createVisual=function(){this.visual=Z.createRect(1,1,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,n){e.prototype.pointerDown.call(this,r,n),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.setSize()},t.prototype.setSize=function(){e.prototype.setSize.call(this),Z.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]])},t.prototype.pointerUp=function(r){e.prototype.pointerUp.call(this,r),this.setSize()},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.visual&&Z.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},t.prototype.setFillColor=function(r){this.fillColor=r,this.visual&&Z.setAttributes(this.visual,[["fill",this.fillColor]]),this.stateChanged()},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.visual&&Z.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.visual&&Z.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},t.prototype.getState=function(){return Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},e.prototype.getState.call(this))},t.prototype.restoreState=function(r){var n=r;this.fillColor=n.fillColor,this.strokeColor=n.strokeColor,this.strokeWidth=n.strokeWidth,this.strokeDasharray=n.strokeDasharray,this.opacity=n.opacity,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize()},t.prototype.scale=function(r,n){e.prototype.scale.call(this,r,n),this.setSize()},t.title="Rectangle marker",t}(es),ri=function(e){function t(r,n,i,s,o){var a=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M3 17h18v-2H3v2m0 3h18v-1H3v1m0-7h18v-3H3v3m0-9v4h18V4H3z"/></svg>',o||"line-width-panel")||this;return a.widths=[],a.widthBoxes=[],a.widths=n,a.currentWidth=i,a.setCurrentWidth=a.setCurrentWidth.bind(a),a}return Gt(t,e),t.prototype.getUi=function(){var r=this,n=document.createElement("div");return n.style.display="flex",n.style.overflow="hidden",n.style.flexGrow="2",this.widths.forEach(function(i){var s=document.createElement("div");s.style.display="flex",s.style.flexGrow="2",s.style.alignItems="center",s.style.justifyContent="space-between",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.borderColor=i===r.currentWidth?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentWidth(i,s)}),n.appendChild(s);var o=document.createElement("div");o.innerText=i.toString(),o.style.marginRight="5px",s.appendChild(o);var a=document.createElement("div");a.style.minHeight="20px",a.style.flexGrow="2",a.style.display="flex",a.style.alignItems="center";var l=document.createElement("hr");l.style.minWidth="20px",l.style.border="0px",l.style.borderTop=i+"px solid "+r.uiStyleSettings.toolboxColor,l.style.flexGrow="2",a.appendChild(l),s.appendChild(a),r.widthBoxes.push(s)}),n},t.prototype.setCurrentWidth=function(r,n){var i=this;this.currentWidth=r,this.widthBoxes.forEach(function(s){s.style.borderColor=s===n?i.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onWidthChanged&&this.onWidthChanged(this.currentWidth)},t}(ei),rs=function(e){function t(r,n,i,s,o){var a=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M3 16h5v-2H3v2m6.5 0h5v-2h-5v2m6.5 0h5v-2h-5v2M3 20h2v-2H3v2m4 0h2v-2H7v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2M3 12h8v-2H3v2m10 0h8v-2h-8v2M3 4v4h18V4H3z"/></svg>',o||"line-style-panel")||this;return a.styles=[],a.styleBoxes=[],a.styles=n,a.currentStyle=i,a.setCurrentStyle=a.setCurrentStyle.bind(a),a}return Gt(t,e),t.prototype.getUi=function(){var r=this,n=document.createElement("div");return n.style.display="flex",n.style.overflow="hidden",n.style.flexGrow="2",this.styles.forEach(function(i){var s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="space-between",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.overflow="hidden",s.style.maxWidth=100/r.styles.length-5+"%",s.style.borderColor=i===r.currentStyle?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentStyle(i,s)}),n.appendChild(s);var o=document.createElement("div");o.style.minHeight="20px",o.style.flexGrow="2",o.style.overflow="hidden";var a=`<svg width="100" height="20">
      <line x1="0" y1="10" x2="100" y2="10" stroke="`+r.uiStyleSettings.toolboxColor+'" stroke-width="3" '+(i!==""?'stroke-dasharray="'+i+'"':"")+` />
  </svg>`;o.innerHTML=a,s.appendChild(o),r.styleBoxes.push(s)}),n},t.prototype.setCurrentStyle=function(r,n){var i=this;this.currentStyle=r,this.styleBoxes.forEach(function(s){s.style.borderColor=s===n?i.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onStyleChanged&&this.onStyleChanged(this.currentStyle)},t}(ei),Va=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.strokeColor=i.defaultColor,s.strokeWidth=i.defaultStrokeWidth,s.strokeDasharray=i.defaultStrokeDasharray,s.strokePanel=new Ee("Line color",i.defaultColorSet,i.defaultColor),s.strokePanel.onColorChanged=s.setStrokeColor,s.strokeWidthPanel=new ri("Line width",i.defaultStrokeWidths,i.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new rs("Line style",i.defaultStrokeDasharrays,i.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s}return Gt(t,e),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="FrameMarker",t.title="Frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4m14 11H6V8h12v9z"/></svg>',t}(jd),Ey=function(){this.defaultColorSet=["#EF4444","#10B981","#2563EB","#FFFF00","#7C3AED","#F472B6","#000000","#FFFFFF"],this.defaultColor=this.defaultColorSet[0],this.defaultFillColor=this.defaultColorSet[0],this.defaultStrokeColor=this.defaultColorSet[7],this.defaultHighlightColor=this.defaultColorSet[3],this.defaultStrokeWidth=3,this.defaultStrokeDasharray="",this.defaultHighlightOpacity=.5,this.defaultFontFamily="Helvetica, Arial, sans-serif",this.defaultStrokeWidths=[1,2,3,5,10],this.defaultStrokeDasharrays=["","3","12 3","9 6 3 6"],this.defaultOpacitySteps=[.1,.25,.5,.75,1],this.displayMode="inline",this.defaultFontFamilies=['Times, "Times New Roman", serif',"Helvetica, Arial, sans-serif",'Courier, "Courier New", monospace',"cursive","fantasy"],this.popupMargin=30,this.newFreehandMarkerOnPointerUp=!1,this.defaultColorsFollowCurrentColors=!1,this.freehandPixelRatio=1,this.disableRotation=!1,this.defaultCaptionFontSize="1rem",this.defaultCaptionText="Text",this.wrapText=!1,this.defaultText="Your text here"},$d=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.x1=0,s.y1=0,s.x2=0,s.y2=0,s.defaultLength=50,s.manipulationStartX=0,s.manipulationStartY=0,s.manipulationStartX1=0,s.manipulationStartY1=0,s.manipulationStartX2=0,s.manipulationStartY2=0,s.setupControlBox(),s}return Gt(t,e),t.prototype.ownsTarget=function(r){return!!e.prototype.ownsTarget.call(this,r)||!(!this.grip1.ownsTarget(r)&&!this.grip2.ownsTarget(r))},t.prototype.pointerDown=function(r,n){e.prototype.pointerDown.call(this,r,n),this.manipulationStartX=r.x,this.manipulationStartY=r.y,this.state==="new"&&(this.x1=r.x,this.y1=r.y,this.x2=r.x,this.y2=r.y),this.manipulationStartX1=this.x1,this.manipulationStartY1=this.y1,this.manipulationStartX2=this.x2,this.manipulationStartY2=this.y2,this.state!=="new"&&(this.select(),this.grip1.ownsTarget(n)?this.activeGrip=this.grip1:this.grip2.ownsTarget(n)?this.activeGrip=this.grip2:this.activeGrip=void 0,this.activeGrip?this._state="resize":this._state="move")},t.prototype.pointerUp=function(r){var n=this.state;e.prototype.pointerUp.call(this,r),this.state==="creating"&&Math.abs(this.x1-this.x2)<10&&Math.abs(this.y1-this.y2)<10?(this.x2=this.x1+this.defaultLength,this.adjustVisual(),this.adjustControlBox()):this.manipulate(r),this._state="select",n==="creating"&&this.onMarkerCreated&&this.onMarkerCreated(this)},t.prototype.adjustVisual=function(){},t.prototype.manipulate=function(r){this.state==="creating"?this.resize(r):this.state==="move"?(this.x1=this.manipulationStartX1+r.x-this.manipulationStartX,this.y1=this.manipulationStartY1+r.y-this.manipulationStartY,this.x2=this.manipulationStartX2+r.x-this.manipulationStartX,this.y2=this.manipulationStartY2+r.y-this.manipulationStartY,this.adjustVisual(),this.adjustControlBox()):this.state==="resize"&&this.resize(r)},t.prototype.resize=function(r){switch(this.activeGrip){case this.grip1:this.x1=r.x,this.y1=r.y;break;case this.grip2:case void 0:this.x2=r.x,this.y2=r.y}this.adjustVisual(),this.adjustControlBox()},t.prototype.select=function(){e.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},t.prototype.deselect=function(){e.prototype.deselect.call(this),this.controlBox.style.display="none"},t.prototype.setupControlBox=function(){this.controlBox=Z.createGroup(),this.container.appendChild(this.controlBox),this.addControlGrips(),this.controlBox.style.display="none"},t.prototype.adjustControlBox=function(){this.positionGrips()},t.prototype.addControlGrips=function(){this.grip1=this.createGrip(),this.grip2=this.createGrip(),this.positionGrips()},t.prototype.createGrip=function(){var r=new Du;return r.visual.transform.baseVal.appendItem(Z.createTransform()),this.controlBox.appendChild(r.visual),r},t.prototype.positionGrips=function(){var r=this.grip1.GRIP_SIZE;this.positionGrip(this.grip1.visual,this.x1-r/2,this.y1-r/2),this.positionGrip(this.grip2.visual,this.x2-r/2,this.y2-r/2)},t.prototype.positionGrip=function(r,n,i){var s=r.transform.baseVal.getItem(0);s.setTranslate(n,i),r.transform.baseVal.replaceItem(s,0)},t.prototype.getState=function(){return Object.assign({x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2},e.prototype.getState.call(this))},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var n=r;this.x1=n.x1,this.y1=n.y1,this.x2=n.x2,this.y2=n.y2},t.prototype.scale=function(r,n){e.prototype.scale.call(this,r,n),this.x1=this.x1*r,this.y1=this.y1*n,this.x2=this.x2*r,this.y2=this.y2*n,this.adjustVisual(),this.adjustControlBox()},t}(Vd),Ru=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.setStrokeColor=s.setStrokeColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.strokeColor=i.defaultColor,s.strokeWidth=i.defaultStrokeWidth,s.strokeDasharray=i.defaultStrokeDasharray,s.strokePanel=new Ee("Line color",i.defaultColorSet,i.defaultColor),s.strokePanel.onColorChanged=s.setStrokeColor,s.strokeWidthPanel=new ri("Line width",i.defaultStrokeWidths,i.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new rs("Line style",i.defaultStrokeDasharrays,i.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s}return Gt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.selectorLine&&r!==this.visibleLine)},t.prototype.createVisual=function(){this.visual=Z.createGroup(),this.selectorLine=Z.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()]]),this.visibleLine=Z.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.visual.appendChild(this.selectorLine),this.visual.appendChild(this.visibleLine),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,n){e.prototype.pointerDown.call(this,r,n),this.state==="new"&&(this.createVisual(),this.adjustVisual(),this._state="creating")},t.prototype.adjustVisual=function(){this.selectorLine&&this.visibleLine&&(this.selectorLine.setAttribute("x1",this.x1.toString()),this.selectorLine.setAttribute("y1",this.y1.toString()),this.selectorLine.setAttribute("x2",this.x2.toString()),this.selectorLine.setAttribute("y2",this.y2.toString()),this.visibleLine.setAttribute("x1",this.x1.toString()),this.visibleLine.setAttribute("y1",this.y1.toString()),this.visibleLine.setAttribute("x2",this.x2.toString()),this.visibleLine.setAttribute("y2",this.y2.toString()),Z.setAttributes(this.visibleLine,[["stroke",this.strokeColor]]),Z.setAttributes(this.visibleLine,[["stroke-width",this.strokeWidth.toString()]]),Z.setAttributes(this.visibleLine,[["stroke-dasharray",this.strokeDasharray.toString()]]))},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.adjustVisual(),this.colorChanged(r)},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.adjustVisual()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.adjustVisual(),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var n=r;this.strokeColor=n.strokeColor,this.strokeWidth=n.strokeWidth,this.strokeDasharray=n.strokeDasharray,this.createVisual(),this.adjustVisual()},t.typeName="LineMarker",t.title="Line marker",t.icon='<svg viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>',t}($d),Au=function(e){function t(r,n,i,s,o){var a=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M17 8h3v12h1v1h-4v-1h1v-3h-4l-1.5 3H14v1h-4v-1h1l6-12m1 1l-3.5 7H18V9M5 3h5c1.11 0 2 .89 2 2v11H9v-5H6v5H3V5c0-1.11.89-2 2-2m1 2v4h3V5H6z"/></svg>',o||"font-family-panel")||this;return a.fonts=[],a.fontBoxes=[],a.fonts=n,a.currentFont=i,a.setCurrentFont=a.setCurrentFont.bind(a),a}return Gt(t,e),t.prototype.getUi=function(){var r=this,n=document.createElement("div");return n.style.overflow="hidden",n.style.flexGrow="2",this.fonts.forEach(function(i){var s=document.createElement("div");s.style.display="inline-block",s.style.alignItems="center",s.style.justifyContent="space-between",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.overflow="hidden",s.style.maxWidth=100/r.fonts.length-5+"%",s.style.borderColor=i===r.currentFont?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentFont(i,s)}),n.appendChild(s);var o=document.createElement("div");o.style.display="flex",o.style.minHeight="20px",o.style.flexGrow="2",o.style.fontFamily=i,o.style.overflow="hidden";var a=document.createElement("div");a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",a.innerHTML="The quick brown fox jumps over the lazy dog",o.appendChild(a),s.appendChild(o),r.fontBoxes.push(s)}),n},t.prototype.setCurrentFont=function(r,n){var i=this;this.currentFont=r,this.fontBoxes.forEach(function(s){s.style.borderColor=s===n?i.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onFontChanged&&this.onFontChanged(this.currentFont)},t}(ei),fi=function(e){function t(r,n,i){var s,o=e.call(this,r,n,i)||this;return o.color="transparent",o.padding=5,o.DEFAULT_TEXT="your text here",o.isMoved=!1,o.color=i.defaultColor,o.fontFamily=i.defaultFontFamily,o.text=(s=i.defaultText)!==null&&s!==void 0?s:o.DEFAULT_TEXT,o.defaultSize={x:100,y:30},o.setColor=o.setColor.bind(o),o.setFont=o.setFont.bind(o),o.renderText=o.renderText.bind(o),o.sizeText=o.sizeText.bind(o),o.textEditDivClicked=o.textEditDivClicked.bind(o),o.showTextEditor=o.showTextEditor.bind(o),o.setSize=o.setSize.bind(o),o.positionTextEditor=o.positionTextEditor.bind(o),o.wrapText=o.wrapText.bind(o),o.colorPanel=new Ee("Color",i.defaultColorSet,i.defaultColor),o.colorPanel.onColorChanged=o.setColor,o.fontFamilyPanel=new Au("Font",i.defaultFontFamilies,i.defaultFontFamily),o.fontFamilyPanel.onFontChanged=o.setFont,o}return Gt(t,e),t.prototype.ownsTarget=function(r){if(e.prototype.ownsTarget.call(this,r)||r===this.visual||r===this.textElement||r===this.bgRectangle)return!0;var n=!1;return this.textElement.childNodes.forEach(function(i){i===r&&(n=!0)}),n},t.prototype.createVisual=function(){this.visual=Z.createGroup(),this.bgRectangle=Z.createRect(1,1,[["fill","transparent"]]),this.visual.appendChild(this.bgRectangle),this.textElement=Z.createText([["fill",this.color],["font-family",this.fontFamily],["font-size","16px"],["x","0"],["y","0"]]),this.textElement.transform.baseVal.appendItem(Z.createTransform()),this.textElement.transform.baseVal.appendItem(Z.createTransform()),this.visual.appendChild(this.textElement),this.addMarkerVisualToContainer(this.visual),this.renderText()},t.prototype.pointerDown=function(r,n){e.prototype.pointerDown.call(this,r,n),this.isMoved=!1,this.pointerDownPoint=r,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.wrapText=function(){function r(u){var c=u[0].length;return u.forEach(function(f){f.length>c&&(c=f.length)}),.35*c/u.length}if(this.text!==""){for(var n=this.text.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/),i=1*this.width/this.height,s=new(Array.bind.apply(Array,ji([void 0],n))),o=r(s),a=Number.MAX_VALUE,l=function(){var u=s[0];s.forEach(function(c){c.length>u.length&&(u=c)}),(a=u.lastIndexOf(" ",a-1))>0?(s=[],n.forEach(function(c){for(var f=c;f.length>a;){var h=f.lastIndexOf(" ",a);h<0&&(h=f.indexOf(" ")),h>0?(s.push(f.substring(0,h)),f=f.substring(h).trim()):(s.push(f),f="")}s.push(f)}),o=r(s)):o=-1};o>i;)l();return s.join(`\r
`)}return this.text},t.prototype.renderText=function(){var r=this;if(this.textElement){for(;this.textElement.lastChild;)this.textElement.removeChild(this.textElement.lastChild);(this.globalSettings.wrapText?this.wrapText():this.text).split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/).forEach(function(n){r.textElement.appendChild(Z.createTSpan(n.trim()===""?" ":n.trim(),[["x","0"],["dy","1.2em"]]))}),setTimeout(this.sizeText,10)}},t.prototype.getTextScale=function(){var r=this.textElement.getBBox(),n=1;if(r.width>0&&r.height>0){var i=(1*this.width-this.width*this.padding*2/100)/r.width,s=(1*this.height-this.height*this.padding*2/100)/r.height;n=Math.min(i,s)}return n},t.prototype.getTextPosition=function(r){var n=window.getComputedStyle(this.textElement).direction==="rtl"?1:-1,i=this.textElement.getBBox(),s=0,o=0;return i.width>0&&i.height>0&&(s=(this.width+n*i.width*r)/2,o=this.height/2-i.height*r/2),{x:s,y:o}},t.prototype.sizeText=function(){var r=this.textElement.getBBox(),n=this.getTextScale(),i=this.getTextPosition(n);i.y-=r.y*n,navigator.userAgent.indexOf("Edge/")>-1?this.textElement.style.transform="translate("+i.x+"px, "+i.y+"px) scale("+n+", "+n+")":(this.textElement.transform.baseVal.getItem(0).setTranslate(i.x,i.y),this.textElement.transform.baseVal.getItem(1).setScale(n,n))},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(r.x-this.pointerDownPoint.x)>5||Math.abs(r.y-this.pointerDownPoint.y)>5)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.isMoved=!0,this.setSize(),this.globalSettings.wrapText?this.renderText():this.sizeText()},t.prototype.setSize=function(){e.prototype.setSize.call(this),this.visual&&this.bgRectangle&&(Z.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),Z.setAttributes(this.bgRectangle,[["width",this.width.toString()],["height",this.height.toString()]]))},t.prototype.pointerUp=function(r){var n=this.state;n==="creating"&&(this._suppressMarkerCreateEvent=!0),e.prototype.pointerUp.call(this,r),this.setSize(),(n==="creating"||!this.isMoved&&Date.now()-this.pointerDownTimestamp>500)&&this.showTextEditor(),this.pointerDownPoint=void 0},t.prototype.showTextEditor=function(){var r=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditor=document.createElement("div"),this.textEditor.style.position="absolute",this.textEditor.style.fontFamily=this.fontFamily,this.textEditor.style.lineHeight="1em",this.textEditor.innerText=this.text,this.textEditor.contentEditable="true",this.textEditor.style.color=this.color,this.textEditor.style.whiteSpace="pre",this.positionTextEditor(),this.textEditor.addEventListener("pointerup",function(n){n.stopPropagation()}),this.globalSettings.wrapText||this.textEditor.addEventListener("input",function(){for(var n=Number.parseFloat(r.textEditor.style.fontSize);r.textEditor.clientWidth>=Number.parseInt(r.textEditor.style.maxWidth)&&n>.9;)n-=.1,r.textEditor.style.fontSize=Math.max(n,.9)+"em"}),this.textEditor.addEventListener("keyup",function(n){n.cancelBubble=!0}),this.textEditor.addEventListener("paste",function(n){if(n.clipboardData){var i=n.clipboardData.getData("text"),s=window.getSelection();if(!s.rangeCount)return!1;s.deleteFromDocument(),s.getRangeAt(0).insertNode(document.createTextNode(i)),n.preventDefault()}}),this.textEditDiv.addEventListener("pointerup",function(){r.textEditDivClicked(r.textEditor.innerText)}),this.textEditDiv.appendChild(this.textEditor),this.overlayContainer.appendChild(this.textEditDiv),this.hideVisual(),this.textEditor.focus(),document.execCommand("selectAll")},t.prototype.positionTextEditor=function(){if(this.state==="edit")if(this.textEditor===void 0)this.showTextEditor();else if(this.globalSettings.wrapText)this.textEditor.style.left=this.left+this.padding+"px",this.textEditor.style.top=this.top+this.padding+"px",this.textEditor.style.width=this.width-2*this.padding+"px",this.textEditor.style.height=this.height-2*this.padding+"px",this.textEditor.style.maxHeight=this.textEditor.style.height,this.textEditor.style.whiteSpace="wrap";else{this.textElement.style.display="";var r=this.getTextScale(),n=this.rotatePoint({x:this.left+this.width/2,y:this.top+this.height/2}),i=this.textElement.getBBox(),s={x:i.width*r,y:i.height*r};n.x-=s.x/2,n.y-=s.y/2,this.textEditor.style.top=n.y+"px",this.textEditor.style.left=n.x+"px",this.textEditor.style.maxWidth=this.overlayContainer.offsetWidth-n.x+"px",this.textEditor.style.fontSize=Math.max(16*r,12)+"px",this.textElement.style.display="none"}},t.prototype.textEditDivClicked=function(r){this.text=r.trim(),this.overlayContainer.innerHTML="",this.renderText(),this.showVisual(),this._suppressMarkerCreateEvent&&(this._suppressMarkerCreateEvent=!1,this.onMarkerCreated&&this.onMarkerCreated(this)),this.stateChanged()},t.prototype.select=function(){e.prototype.select.call(this),this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText)},t.prototype.deselect=function(){this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText),e.prototype.deselect.call(this)},t.prototype.dblClick=function(r,n){e.prototype.dblClick.call(this,r,n),this.showTextEditor()},t.prototype.setColor=function(r){this.textElement&&Z.setAttributes(this.textElement,[["fill",r]]),this.color=r,this.textEditor&&(this.textEditor.style.color=this.color),this.colorChanged(r)},t.prototype.setFont=function(r){this.textElement&&Z.setAttributes(this.textElement,[["font-family",r]]),this.fontFamily=r,this.textEditor&&(this.textEditor.style.fontFamily=this.fontFamily),this.renderText(),this.stateChanged()},t.prototype.hideVisual=function(){this.textElement.style.display="none",this.hideControlBox()},t.prototype.showVisual=function(){this.state==="edit"&&(this._state="select"),this.textElement.style.display="",this.showControlBox()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({color:this.color,fontFamily:this.fontFamily,padding:this.padding,text:this.text,wrapText:this.globalSettings.wrapText},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){var n=r;this.color=n.color,this.fontFamily=n.fontFamily,this.padding=n.padding,this.text=n.text,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize(),this.globalSettings.wrapText&&this.renderText()},t.prototype.scale=function(r,n){e.prototype.scale.call(this,r,n),this.setSize(),this.sizeText(),this.positionTextEditor()},t.typeName="TextMarker",t.title="Text marker",t.icon='<svg viewBox="0 0 24 24"><path d="M9.6 14L12 7.7l2.4 6.3M11 5L5.5 19h2.2l1.1-3H15l1.1 3h2.2L13 5h-2z"/></svg>',t}(es),ui=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.color="transparent",s.lineWidth=3,s.drawing=!1,s.pixelRatio=1,s.color=i.defaultColor,s.lineWidth=i.defaultStrokeWidth,s.pixelRatio=i.freehandPixelRatio,s.setColor=s.setColor.bind(s),s.addCanvas=s.addCanvas.bind(s),s.finishCreation=s.finishCreation.bind(s),s.setLineWidth=s.setLineWidth.bind(s),s.colorPanel=new Ee("Color",i.defaultColorSet,i.defaultColor),s.colorPanel.onColorChanged=s.setColor,s.lineWidthPanel=new ri("Line width",i.defaultStrokeWidths,i.defaultStrokeWidth),s.lineWidthPanel.onWidthChanged=s.setLineWidth,s}return Gt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.drawingImage)},t.prototype.createVisual=function(){this.visual=Z.createGroup(),this.drawingImage=Z.createImage(),this.visual.appendChild(this.drawingImage);var r=Z.createTransform();this.visual.transform.baseVal.appendItem(r),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,n){this.state==="new"&&(this.addCanvas(),this.createVisual(),this._state="creating"),this.state==="creating"?(this.canvasContext.strokeStyle=this.color,this.canvasContext.lineWidth=this.lineWidth,this.canvasContext.beginPath(),this.canvasContext.moveTo(r.x,r.y),this.drawing=!0):e.prototype.pointerDown.call(this,r,n)},t.prototype.manipulate=function(r){this.state==="creating"?this.drawing&&(this.canvasContext.lineTo(r.x,r.y),this.canvasContext.stroke()):e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),Z.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),Z.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]])},t.prototype.pointerUp=function(r){this._state==="creating"?this.drawing&&(this.canvasContext.closePath(),this.drawing=!1,this.globalSettings.newFreehandMarkerOnPointerUp&&this.finishCreation()):e.prototype.pointerUp.call(this,r)},t.prototype.addCanvas=function(){this.overlayContainer.innerHTML="",this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.overlayContainer.clientWidth*this.pixelRatio,this.canvasElement.height=this.overlayContainer.clientHeight*this.pixelRatio,this.canvasContext=this.canvasElement.getContext("2d"),this.canvasContext.scale(this.pixelRatio,this.pixelRatio),this.overlayContainer.appendChild(this.canvasElement)},t.prototype.select=function(){this.state==="creating"&&this.finishCreation(),e.prototype.select.call(this)},t.prototype.deselect=function(){this.state==="creating"&&this.finishCreation(),e.prototype.deselect.call(this)},t.prototype.finishCreation=function(){for(var r=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),n=[this.canvasElement.width+1,this.canvasElement.height+1,-1,-1],i=n[0],s=n[1],o=n[2],a=n[3],l=!1,u=0;u<this.canvasElement.height;u++)for(var c=0;c<this.canvasElement.width;c++)r.data[u*this.canvasElement.width*4+4*c+3]>0&&(l=!0,u<s&&(s=u),c<i&&(i=c),u>a&&(a=u),c>o&&(o=c));if(l){this.left=i/this.pixelRatio,this.top=s/this.pixelRatio,this.width=(o-i)/this.pixelRatio,this.height=(a-s)/this.pixelRatio;var f=document.createElement("canvas");f.width=o-i,f.height=a-s,f.getContext("2d").putImageData(this.canvasContext.getImageData(i,s,o-i,a-s),0,0),this.drawingImgUrl=f.toDataURL("image/png"),this.setDrawingImage(),this._state="select",this.onMarkerCreated&&this.onMarkerCreated(this)}this.overlayContainer.innerHTML=""},t.prototype.setDrawingImage=function(){Z.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]]),Z.setAttributes(this.drawingImage,[["href",this.drawingImgUrl]]),this.moveVisual({x:this.left,y:this.top})},t.prototype.setColor=function(r){this.color=r,this.colorChanged(r)},t.prototype.setLineWidth=function(r){this.lineWidth=r},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return this.state==="new"||this.state==="creating"?[this.colorPanel,this.lineWidthPanel]:[]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({drawingImgUrl:this.drawingImgUrl},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){this.createVisual(),e.prototype.restoreState.call(this,r),this.drawingImgUrl=r.drawingImgUrl,this.setDrawingImage()},t.prototype.scale=function(r,n){e.prototype.scale.call(this,r,n),this.setDrawingImage()},t.typeName="FreehandMarker",t.title="Freehand marker",t.icon='<svg viewBox="0 0 24 24"><path d="M9.75 20.85c1.78-.7 1.39-2.63.49-3.85-.89-1.25-2.12-2.11-3.36-2.94A9.817 9.817 0 014.54 12c-.28-.33-.85-.94-.27-1.06.59-.12 1.61.46 2.13.68.91.38 1.81.82 2.65 1.34l1.01-1.7C8.5 10.23 6.5 9.32 4.64 9.05c-1.06-.16-2.18.06-2.54 1.21-.32.99.19 1.99.77 2.77 1.37 1.83 3.5 2.71 5.09 4.29.34.33.75.72.95 1.18.21.44.16.47-.31.47-1.24 0-2.79-.97-3.8-1.61l-1.01 1.7c1.53.94 4.09 2.41 5.96 1.79m11.09-15.6c.22-.22.22-.58 0-.79l-1.3-1.3a.562.562 0 00-.78 0l-1.02 1.02 2.08 2.08M11 10.92V13h2.08l6.15-6.15-2.08-2.08L11 10.92z"/></svg>',t}(es),ky=function(e){function t(r,n,i,s){var o=e.call(this,r,i||'<svg viewBox="0 0 24 24"><path d="M8 14v4l-6-6 6-6v4h8V6l6 6-6 6v-4H8z"/></svg>',s||"arrow-type-panel")||this;return o.typeBoxes=[],o.currentType=n,o.setCurrentType=o.setCurrentType.bind(o),o}return Gt(t,e),t.prototype.getUi=function(){var r=this,n=document.createElement("div");n.style.display="flex",n.style.overflow="hidden",n.style.flexGrow="2";for(var i=function(a){var l="both";switch(a){case 0:l="both";break;case 1:l="start";break;case 2:l="end";break;case 3:l="none"}var u=document.createElement("div");if(u.style.display="flex",u.style.flexGrow="2",u.style.alignItems="center",u.style.justifyContent="space-between",u.style.padding="5px",u.style.borderWidth="2px",u.style.borderStyle="solid",u.style.borderColor=l===s.currentType?s.uiStyleSettings.toolboxAccentColor:"transparent",u.addEventListener("click",function(){r.setCurrentType(l,u)}),n.appendChild(u),l==="both"||l==="start"){var c=document.createElement("div");c.style.display="flex",c.style.alignItems="center",c.style.minHeight="20px",c.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,5 10,0 10,10" fill="`+(s.uiStyleSettings!==void 0?s.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,c.style.marginLeft="5px",u.appendChild(c)}var f=document.createElement("div");f.style.display="flex",f.style.alignItems="center",f.style.minHeight="20px",f.style.flexGrow="2";var h=document.createElement("hr");if(h.style.minWidth="20px",h.style.border="0px",h.style.borderTop="3px solid "+(s.uiStyleSettings!==void 0?s.uiStyleSettings.toolboxColor:"#eeeeee"),h.style.flexGrow="2",f.appendChild(h),u.appendChild(f),l==="both"||l==="end"){var d=document.createElement("div");d.style.display="flex",d.style.alignItems="center",d.style.minHeight="20px",d.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,0 10,5 0,10" fill="`+(s.uiStyleSettings!==void 0?s.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,d.style.marginRight="5px",u.appendChild(d)}s.typeBoxes.push(u)},s=this,o=0;o<4;o++)i(o);return n},t.prototype.setCurrentType=function(r,n){var i=this;this.currentType=r,this.typeBoxes.forEach(function(s){s.style.borderColor=s===n?i.uiStyleSettings!==void 0?i.uiStyleSettings.toolboxAccentColor:"#3080c3":"transparent"}),this.onArrowTypeChanged&&this.onArrowTypeChanged(this.currentType)},t}(ei),ja=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.arrowType="end",s.arrowBaseHeight=10,s.arrowBaseWidth=10,s.getArrowPoints=s.getArrowPoints.bind(s),s.setArrowType=s.setArrowType.bind(s),s.arrowTypePanel=new ky("Arrow type","end"),s.arrowTypePanel.onArrowTypeChanged=s.setArrowType,s}return Gt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.arrow1&&r!==this.arrow2)},t.prototype.getArrowPoints=function(r,n){var i=this.arrowBaseWidth+2*this.strokeWidth,s=this.arrowBaseHeight+2*this.strokeWidth;return r-i/2+","+(n+s/2)+" "+r+","+(n-s/2)+" "+(r+i/2)+","+(n+s/2)},t.prototype.createTips=function(){this.arrow1=Z.createPolygon(this.getArrowPoints(this.x1,this.y1),[["fill",this.strokeColor]]),this.arrow1.transform.baseVal.appendItem(Z.createTransform()),this.visual.appendChild(this.arrow1),this.arrow2=Z.createPolygon(this.getArrowPoints(this.x2,this.y2),[["fill",this.strokeColor]]),this.arrow2.transform.baseVal.appendItem(Z.createTransform()),this.visual.appendChild(this.arrow2)},t.prototype.pointerDown=function(r,n){e.prototype.pointerDown.call(this,r,n),this.state==="creating"&&this.createTips()},t.prototype.adjustVisual=function(){if(e.prototype.adjustVisual.call(this),this.arrow1&&this.arrow2){this.arrow1.style.display=this.arrowType==="both"||this.arrowType==="start"?"":"none",this.arrow2.style.display=this.arrowType==="both"||this.arrowType==="end"?"":"none",Z.setAttributes(this.arrow1,[["points",this.getArrowPoints(this.x1,this.y1)],["fill",this.strokeColor]]),Z.setAttributes(this.arrow2,[["points",this.getArrowPoints(this.x2,this.y2)],["fill",this.strokeColor]]);var r=0;Math.abs(this.x1-this.x2)>.1&&(r=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2));var n=this.arrow1.transform.baseVal.getItem(0);n.setRotate(r,this.x1,this.y1),this.arrow1.transform.baseVal.replaceItem(n,0);var i=this.arrow2.transform.baseVal.getItem(0);i.setRotate(r+180,this.x2,this.y2),this.arrow2.transform.baseVal.replaceItem(i,0)}},t.prototype.setArrowType=function(r){this.arrowType=r,this.adjustVisual(),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel,this.arrowTypePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({arrowType:this.arrowType},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var n=r;this.arrowType=n.arrowType,this.createTips(),this.adjustVisual()},t.typeName="ArrowMarker",t.title="Arrow marker",t.icon='<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 7 15.59V9H5v10h10v-2H8.41L19 6.41z"/></svg>',t}(Ru),Xd=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.fillColor=i.defaultFillColor,s.strokeWidth=0,s.fillPanel=new Ee("Color",i.defaultColorSet,i.defaultFillColor),s.fillPanel.onColorChanged=s.setFillColor,s}return Gt(t,e),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.fillPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="CoverMarker",t.title="Cover marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4z"/></svg>',t}(jd),Ud=function(e){function t(r,n,i,s,o){var a=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M17.66 8L12 2.35 6.34 8A8.02 8.02 0 004 13.64c0 2 .78 4.11 2.34 5.67a7.99 7.99 0 0011.32 0c1.56-1.56 2.34-3.67 2.34-5.67S19.22 9.56 17.66 8M6 14c0-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 18 12 18 14H6z"/></svg>',o||"opacity-panel")||this;return a.opacities=[],a.opacityBoxes=[],a.opacities=n,a.currentOpacity=i,a.setCurrentOpacity=a.setCurrentOpacity.bind(a),a}return Gt(t,e),t.prototype.getUi=function(){var r=this,n=document.createElement("div");return n.style.display="flex",n.style.overflow="hidden",n.style.flexGrow="2",n.style.justifyContent="space-between",this.opacities.forEach(function(i){var s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.borderColor=i===r.currentOpacity?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentOpacity(i,s)}),n.appendChild(s);var o=document.createElement("div");o.innerText=100*i+"%",s.appendChild(o),r.opacityBoxes.push(s)}),n},t.prototype.setCurrentOpacity=function(r,n){var i=this;this.currentOpacity=r,this.opacityBoxes.forEach(function(s){s.style.borderColor=s===n?i.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onOpacityChanged&&this.onOpacityChanged(this.currentOpacity)},t}(ei),$a=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.setOpacity=s.setOpacity.bind(s),s.fillColor=i.defaultHighlightColor,s.strokeWidth=0,s.opacity=i.defaultHighlightOpacity,s.fillPanel=new Ee("Color",i.defaultColorSet,s.fillColor),s.fillPanel.onColorChanged=s.setFillColor,s.opacityPanel=new Ud("Opacity",i.defaultOpacitySteps,s.opacity),s.opacityPanel.onOpacityChanged=s.setOpacity,s}return Gt(t,e),t.prototype.setOpacity=function(r){this.opacity=r,this.visual&&Z.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.fillPanel,this.opacityPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="HighlightMarker",t.title="Highlight marker",t.icon='<svg viewBox="0 0 24 24"><path d="M18.5 1.15c-.53 0-1.04.19-1.43.58l-5.81 5.82 5.65 5.65 5.82-5.81c.77-.78.77-2.04 0-2.83l-2.84-2.83c-.39-.39-.89-.58-1.39-.58M10.3 8.5l-5.96 5.96c-.78.78-.78 2.04.02 2.85C3.14 18.54 1.9 19.77.67 21h5.66l.86-.86c.78.76 2.03.75 2.81-.02l5.95-5.96"/></svg>',t}(Xd),Yd='<svg viewBox="0 0 24 24"><path d="M9.62 12L12 5.67 14.37 12M11 3L5.5 17h2.25l1.12-3h6.25l1.13 3h2.25L13 3h-2z"/></svg>',Bu='<svg viewBox="0 0 24 24"><path d="M19 11.5s-2 2.17-2 3.5a2 2 0 002 2 2 2 0 002-2c0-1.33-2-3.5-2-3.5M5.21 10L10 5.21 14.79 10m1.77-1.06L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.56-.59 1.53 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.59.59-1.56 0-2.12z"/></svg>',Pf=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.bgColor="transparent",s.tipPosition={x:0,y:0},s.tipBase1Position={x:0,y:0},s.tipBase2Position={x:0,y:0},s.tipMoving=!1,s.color=i.defaultStrokeColor,s.bgColor=i.defaultFillColor,s.fontFamily=i.defaultFontFamily,s.defaultSize={x:100,y:30},s.setBgColor=s.setBgColor.bind(s),s.getTipPoints=s.getTipPoints.bind(s),s.positionTip=s.positionTip.bind(s),s.setTipPoints=s.setTipPoints.bind(s),s.colorPanel=new Ee("Text color",i.defaultColorSet,s.color,Yd,"text-color-panel"),s.colorPanel.onColorChanged=s.setColor,s.bgColorPanel=new Ee("Fill color",i.defaultColorSet,s.bgColor,Bu,"fill-color-panel"),s.bgColorPanel.onColorChanged=s.setBgColor,s.fontFamilyPanel=new Au("Font",i.defaultFontFamilies,i.defaultFontFamily),s.fontFamilyPanel.onFontChanged=s.setFont,s.tipGrip=new Du,s.tipGrip.visual.transform.baseVal.appendItem(Z.createTransform()),s.controlBox.appendChild(s.tipGrip.visual),s}return Gt(t,e),t.prototype.ownsTarget=function(r){return e.prototype.ownsTarget.call(this,r)||this.tipGrip.ownsTarget(r)||this.tip===r},t.prototype.createTip=function(){Z.setAttributes(this.bgRectangle,[["fill",this.bgColor],["rx","10px"]]),this.tip=Z.createPolygon(this.getTipPoints(),[["fill",this.bgColor]]),this.visual.appendChild(this.tip)},t.prototype.pointerDown=function(r,n){this.state==="new"&&e.prototype.pointerDown.call(this,r,n),this.state==="creating"?this.createTip():this.tipGrip.ownsTarget(n)?(this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.tipMoving=!0):e.prototype.pointerDown.call(this,r,n)},t.prototype.pointerUp=function(r){if(this.tipMoving)this.tipMoving=!1,this.isMoved=!0,e.prototype.pointerUp.call(this,r);else{var n=this.state==="creating";e.prototype.pointerUp.call(this,r),this.setTipPoints(n),this.positionTip()}},t.prototype.manipulate=function(r){if(this.tipMoving){var n=this.unrotatePoint(r);this.tipPosition={x:n.x-this.manipulationStartLeft,y:n.y-this.manipulationStartTop},this.positionTip()}else e.prototype.manipulate.call(this,r)},t.prototype.setBgColor=function(r){this.bgRectangle&&this.tip&&(Z.setAttributes(this.bgRectangle,[["fill",r]]),Z.setAttributes(this.tip,[["fill",r]])),this.bgColor=r,this.fillColorChanged(r)},t.prototype.getTipPoints=function(){return this.setTipPoints(this.state==="creating"),this.tipBase1Position.x+","+this.tipBase1Position.y+" "+this.tipBase2Position.x+","+this.tipBase2Position.y+" "+this.tipPosition.x+","+this.tipPosition.y},t.prototype.setTipPoints=function(r){r===void 0&&(r=!1);var n=Math.min(this.height/2,15),i=this.height/5;r&&(this.tipPosition={x:n+i/2,y:this.height+20});var s=Math.atan(this.height/2/(this.width/2));this.tipPosition.x<this.width/2&&this.tipPosition.y<this.height/2?s<Math.atan((this.height/2-this.tipPosition.y)/(this.width/2-this.tipPosition.x))?(i=this.width/5,n=Math.min(this.width/2,15),this.tipBase1Position={x:n,y:0},this.tipBase2Position={x:n+i,y:0}):(this.tipBase1Position={x:0,y:n},this.tipBase2Position={x:0,y:n+i}):this.tipPosition.x>=this.width/2&&this.tipPosition.y<this.height/2?s<Math.atan((this.height/2-this.tipPosition.y)/(this.tipPosition.x-this.width/2))?(i=this.width/5,n=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-n-i,y:0},this.tipBase2Position={x:this.width-n,y:0}):(this.tipBase1Position={x:this.width,y:n},this.tipBase2Position={x:this.width,y:n+i}):this.tipPosition.x>=this.width/2&&this.tipPosition.y>=this.height/2?s<Math.atan((this.tipPosition.y-this.height/2)/(this.tipPosition.x-this.width/2))?(i=this.width/5,n=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-n-i,y:this.height},this.tipBase2Position={x:this.width-n,y:this.height}):(this.tipBase1Position={x:this.width,y:this.height-n-i},this.tipBase2Position={x:this.width,y:this.height-n}):s<Math.atan((this.tipPosition.y-this.height/2)/(this.width/2-this.tipPosition.x))?(i=this.width/5,n=Math.min(this.width/2,15),this.tipBase1Position={x:n,y:this.height},this.tipBase2Position={x:n+i,y:this.height}):(this.tipBase1Position={x:0,y:this.height-n},this.tipBase2Position={x:0,y:this.height-n-i})},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.positionTip()},t.prototype.positionTip=function(){Z.setAttributes(this.tip,[["points",this.getTipPoints()]]);var r=this.tipGrip.visual.transform.baseVal.getItem(0);r.setTranslate(this.tipPosition.x,this.tipPosition.y),this.tipGrip.visual.transform.baseVal.replaceItem(r,0)},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.bgColorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),t.prototype.select=function(){this.positionTip(),e.prototype.select.call(this)},t.prototype.getState=function(){var r=Object.assign({bgColor:this.bgColor,tipPosition:this.tipPosition},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){var n=r;this.bgColor=n.bgColor,this.tipPosition=n.tipPosition,e.prototype.restoreState.call(this,r),this.createTip(),this.setTipPoints()},t.prototype.scale=function(r,n){e.prototype.scale.call(this,r,n),this.tipPosition={x:this.tipPosition.x*r,y:this.tipPosition.y*n},this.positionTip()},t.typeName="CalloutMarker",t.title="Callout marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 2h16a2 2 0 012 2v12a2 2 0 01-2 2h-4l-4 4-4-4H4a2 2 0 01-2-2V4a2 2 0 012-2m0 2v12h4.83L12 19.17 15.17 16H20V4H4m2 3h12v2H6V7m0 4h10v2H6v-2z"/></svg>',t}(fi),Ml=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.fillColor="transparent",s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.opacity=1,s.strokeColor=i.defaultColor,s.strokeWidth=i.defaultStrokeWidth,s.strokeDasharray=i.defaultStrokeDasharray,s.fillColor=i.defaultFillColor,s.setStrokeColor=s.setStrokeColor.bind(s),s.setFillColor=s.setFillColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.setOpacity=s.setOpacity.bind(s),s.createVisual=s.createVisual.bind(s),s.strokePanel=new Ee("Line color",ji(i.defaultColorSet,["transparent"]),i.defaultColor,void 0,"stroke-color-panel"),s.strokePanel.onColorChanged=s.setStrokeColor,s.fillPanel=new Ee("Fill color",ji(i.defaultColorSet,["transparent"]),s.fillColor,Bu,"fill-color-panel"),s.fillPanel.onColorChanged=s.setFillColor,s.strokeWidthPanel=new ri("Line width",i.defaultStrokeWidths,i.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new rs("Line style",i.defaultStrokeDasharrays,i.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s.opacityPanel=new Ud("Opacity",i.defaultOpacitySteps,s.opacity),s.opacityPanel.onOpacityChanged=s.setOpacity,s}return Gt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual)},t.prototype.createVisual=function(){this.visual=Z.createEllipse(this.width/2,this.height/2,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,n){e.prototype.pointerDown.call(this,r,n),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.setSize()},t.prototype.setSize=function(){e.prototype.setSize.call(this),Z.setAttributes(this.visual,[["cx",(this.width/2).toString()],["cy",(this.height/2).toString()],["rx",(this.width/2).toString()],["ry",(this.height/2).toString()]])},t.prototype.pointerUp=function(r){e.prototype.pointerUp.call(this,r),this.setSize()},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.visual&&Z.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},t.prototype.setFillColor=function(r){this.fillColor=r,this.visual&&Z.setAttributes(this.visual,[["fill",this.fillColor]]),this.fillColorChanged(r),this.stateChanged()},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.visual&&Z.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.visual&&Z.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},t.prototype.setOpacity=function(r){this.opacity=r,this.visual&&Z.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.opacityPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){var n=r;this.fillColor=n.fillColor,this.strokeColor=n.strokeColor,this.strokeWidth=n.strokeWidth,this.strokeDasharray=n.strokeDasharray,this.opacity=n.opacity,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize()},t.prototype.scale=function(r,n){e.prototype.scale.call(this,r,n),this.setSize()},t.typeName="EllipseMarker",t.title="Ellipse marker",t.icon='<svg viewBox="0 0 24 24"><path d="M12 4C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',t}(es),My=function(e){function t(r,n,i){return e.call(this,r,n,i)||this}return Gt(t,e),Object.defineProperty(t.prototype,"tipLength",{get:function(){return 10+3*this.strokeWidth},enumerable:!1,configurable:!0}),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.tip1&&r!==this.tip2)},t.prototype.createTips=function(){this.tip1=Z.createLine(this.x1-this.tipLength/2,this.y1,this.x1+this.tipLength/2,this.y1,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip1.transform.baseVal.appendItem(Z.createTransform()),this.visual.appendChild(this.tip1),this.tip2=Z.createLine(this.x2-this.tipLength/2,this.y2,this.x2+this.tipLength/2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip2.transform.baseVal.appendItem(Z.createTransform()),this.visual.appendChild(this.tip2)},t.prototype.pointerDown=function(r,n){e.prototype.pointerDown.call(this,r,n),this.state==="creating"&&this.createTips()},t.prototype.adjustVisual=function(){if(e.prototype.adjustVisual.call(this),this.tip1&&this.tip2&&(Z.setAttributes(this.tip1,[["x1",(this.x1-this.tipLength/2).toString()],["y1",this.y1.toString()],["x2",(this.x1+this.tipLength/2).toString()],["y2",this.y1.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),Z.setAttributes(this.tip2,[["x1",(this.x2-this.tipLength/2).toString()],["y1",this.y2.toString()],["x2",(this.x2+this.tipLength/2).toString()],["y2",this.y2.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),Math.abs(this.x1-this.x2)>.1)){var r=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2),n=this.tip1.transform.baseVal.getItem(0);n.setRotate(r,this.x1,this.y1),this.tip1.transform.baseVal.replaceItem(n,0);var i=this.tip2.transform.baseVal.getItem(0);i.setRotate(r+180,this.x2,this.y2),this.tip2.transform.baseVal.replaceItem(i,0)}},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r),this.createTips(),this.adjustVisual()},t.typeName="MeasurementMarker",t.title="Measurement marker",t.icon='<svg viewBox="0 0 24 24"><path d="M1.39 18.36l1.77-1.76L4.58 18l1.06-1.05-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.42 1.41L10.59 12l-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.41 1.41 1.07-1.06-1.42-1.41 1.42-1.42L18 6.7l1.07-1.06-2.47-2.48 1.76-1.77 4.25 4.25L5.64 22.61l-4.25-4.25z"/></svg>',t}(Ru),Ty=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.strokePanel.colors=i.defaultColorSet,s.fillColor="transparent",s}return Gt(t,e),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="EllipseFrameMarker",t.title="Ellipse frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M12 6c4.41 0 8 2.69 8 6s-3.59 6-8 6-8-2.69-8-6 3.59-6 8-6m0-2C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',t}(Ml),Py=function(){function e(){this.undoStack=[],this.redoStack=[]}return Object.defineProperty(e.prototype,"isUndoPossible",{get:function(){return this.undoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRedoPossible",{get:function(){return this.redoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoStepCount",{get:function(){return this.undoStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redoStepCount",{get:function(){return this.redoStack.length},enumerable:!1,configurable:!0}),e.prototype.addUndoStep=function(t){this.undoStack.length!==0&&JSON.stringify(this.undoStack[this.undoStack.length-1])===JSON.stringify(t)||(this.undoStack.push(t),JSON.stringify(this.lastRedoStep)!==JSON.stringify(t)&&this.redoStack.splice(0,this.redoStack.length))},e.prototype.replaceLastUndoStep=function(t){this.undoStack.length>0&&(this.undoStack[this.undoStack.length-1]=t)},e.prototype.getLastUndoStep=function(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0},e.prototype.undo=function(){if(this.undoStack.length>1){var t=this.undoStack.pop();return t!==void 0&&this.redoStack.push(t),this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0}},e.prototype.redo=function(){return this.lastRedoStep=this.redoStack.pop(),this.lastRedoStep},e}(),Dy=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.curveX=0,s.curveY=0,s.manipulationStartCurveX=0,s.manipulationStartCurveY=0,s.setStrokeColor=s.setStrokeColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.positionGrips=s.positionGrips.bind(s),s.addControlGrips=s.addControlGrips.bind(s),s.adjustVisual=s.adjustVisual.bind(s),s.setupControlBox=s.setupControlBox.bind(s),s.resize=s.resize.bind(s),s.strokeColor=i.defaultColor,s.strokeWidth=i.defaultStrokeWidth,s.strokeDasharray=i.defaultStrokeDasharray,s.strokePanel=new Ee("Line color",i.defaultColorSet,i.defaultColor),s.strokePanel.onColorChanged=s.setStrokeColor,s.strokeWidthPanel=new ri("Line width",i.defaultStrokeWidths,i.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new rs("Line style",i.defaultStrokeDasharrays,i.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s}return Gt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.selectorCurve&&r!==this.visibleCurve&&!this.curveGrip.ownsTarget(r))},t.prototype.getPathD=function(){return"M "+this.x1+" "+this.y1+" Q "+this.curveX+" "+this.curveY+", "+this.x2+" "+this.y2},t.prototype.createVisual=function(){this.visual=Z.createGroup(),this.selectorCurve=Z.createPath(this.getPathD(),[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()],["fill","transparent"]]),this.visibleCurve=Z.createPath(this.getPathD(),[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["fill","transparent"]]),this.visual.appendChild(this.selectorCurve),this.visual.appendChild(this.visibleCurve),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,n){e.prototype.pointerDown.call(this,r,n),this.manipulationStartCurveX=this.curveX,this.manipulationStartCurveY=this.curveY,this.state==="new"&&(this.curveX=r.x,this.curveY=r.y),this.state==="new"?(this.createVisual(),this.adjustVisual(),this._state="creating"):this.curveGrip.ownsTarget(n)&&(this.activeGrip=this.curveGrip,this._state="resize")},t.prototype.adjustVisual=function(){this.selectorCurve&&this.visibleCurve&&(this.selectorCurve.setAttribute("d",this.getPathD()),this.visibleCurve.setAttribute("d",this.getPathD()),Z.setAttributes(this.visibleCurve,[["stroke",this.strokeColor]]),Z.setAttributes(this.visibleCurve,[["stroke-width",this.strokeWidth.toString()]]),Z.setAttributes(this.visibleCurve,[["stroke-dasharray",this.strokeDasharray.toString()]]))},t.prototype.setupControlBox=function(){e.prototype.setupControlBox.call(this),this.curveControlLine1=Z.createLine(this.x1,this.y1,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.curveControlLine2=Z.createLine(this.x2,this.y2,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.insertBefore(this.curveControlLine1,this.controlBox.firstChild),this.controlBox.insertBefore(this.curveControlLine2,this.controlBox.firstChild)},t.prototype.addControlGrips=function(){this.curveGrip=this.createGrip(),this.curveX=0,this.curveY=0,e.prototype.addControlGrips.call(this)},t.prototype.positionGrips=function(){e.prototype.positionGrips.call(this);var r=this.curveGrip.GRIP_SIZE;this.positionGrip(this.curveGrip.visual,this.curveX-r/2,this.curveY-r/2),this.curveControlLine1&&this.curveControlLine2&&(this.curveControlLine1.setAttribute("x1",this.x1.toString()),this.curveControlLine1.setAttribute("y1",this.y1.toString()),this.curveControlLine1.setAttribute("x2",this.curveX.toString()),this.curveControlLine1.setAttribute("y2",this.curveY.toString()),this.curveControlLine2.setAttribute("x1",this.x2.toString()),this.curveControlLine2.setAttribute("y1",this.y2.toString()),this.curveControlLine2.setAttribute("x2",this.curveX.toString()),this.curveControlLine2.setAttribute("y2",this.curveY.toString()))},t.prototype.manipulate=function(r){this.state==="move"&&(this.curveX=this.manipulationStartCurveX+r.x-this.manipulationStartX,this.curveY=this.manipulationStartCurveY+r.y-this.manipulationStartY),e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){this.activeGrip===this.curveGrip&&(this.curveX=r.x,this.curveY=r.y),e.prototype.resize.call(this,r),this.state==="creating"&&(this.curveX=this.x1+(this.x2-this.x1)/2,this.curveY=this.y1+(this.y2-this.y1)/2)},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.adjustVisual(),this.colorChanged(r)},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.adjustVisual()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.adjustVisual()},t.prototype.scale=function(r,n){this.curveX=this.curveX*r,this.curveY=this.curveY*n,e.prototype.scale.call(this,r,n)},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,curveX:this.curveX,curveY:this.curveY},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var n=r;this.strokeColor=n.strokeColor,this.strokeWidth=n.strokeWidth,this.strokeDasharray=n.strokeDasharray,this.curveX=n.curveX,this.curveY=n.curveY,this.createVisual(),this.adjustVisual()},t.typeName="CurveMarker",t.title="Curve marker",t.icon='<svg viewBox="0 0 24 24"><path d="M18.5 2A1.5 1.5 0 0120 3.5 1.5 1.5 0 0118.5 5c-.23 0-.45-.05-.65-.15l-3.69 3.7.34.45c2.19-1.26 4.76-2 7.5-2l1 .03v2.01L22 9c-2.58 0-5 .75-7 2.04A3.96 3.96 0 0111.04 15C9.75 17 9 19.42 9 22l.04 1H7.03L7 22c0-2.74.74-5.31 2-7.5l-.45-.34-3.7 3.69c.1.2.15.42.15.65A1.5 1.5 0 013.5 20 1.5 1.5 0 012 18.5 1.5 1.5 0 013.5 17c.23 0 .45.05.65.15l3.69-3.7C7.31 12.78 7 11.92 7 11a4 4 0 014-4c.92 0 1.78.31 2.45.84l3.7-3.69c-.1-.2-.15-.42-.15-.65A1.5 1.5 0 0118.5 2M11 9a2 2 0 00-2 2 2 2 0 002 2 2 2 0 002-2 2 2 0 00-2-2z"/></svg>',t}($d),Ry=function(e){function t(r,n,i){var s=e.call(this,r,n,i)||this;return s.fillColor="transparent",s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.textColor="transparent",s.fontSize="1rem",s.isMoved=!1,s.captionText="Caption",s.PADDING=5,s.captionBoxWidth=0,s.captionBoxHeight=0,s.strokeColor=i.defaultColor,s.strokeWidth=i.defaultStrokeWidth,s.strokeDasharray=i.defaultStrokeDasharray,s.fillColor=i.defaultFillColor,s.textColor=i.defaultStrokeColor,s.fontFamily=i.defaultFontFamily,s.fontSize=i.defaultCaptionFontSize,s.captionText=i.defaultCaptionText,s.setStrokeColor=s.setStrokeColor.bind(s),s.setFillColor=s.setFillColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.createVisual=s.createVisual.bind(s),s.sizeCaption=s.sizeCaption.bind(s),s.setCaptionText=s.setCaptionText.bind(s),s.showTextEditor=s.showTextEditor.bind(s),s.positionTextEditor=s.positionTextEditor.bind(s),s.finishTextEditing=s.finishTextEditing.bind(s),s.setFont=s.setFont.bind(s),s.setTextColor=s.setTextColor.bind(s),s.strokePanel=new Ee("Line color",ji(i.defaultColorSet,["transparent"]),s.strokeColor,void 0,"stroke-color-panel"),s.strokePanel.onColorChanged=s.setStrokeColor,s.fillPanel=new Ee("Fill color",ji(i.defaultColorSet,["transparent"]),s.fillColor,Bu,"fill-color-panel"),s.fillPanel.onColorChanged=s.setFillColor,s.strokeWidthPanel=new ri("Line width",i.defaultStrokeWidths,i.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new rs("Line style",i.defaultStrokeDasharrays,i.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s.fontFamilyPanel=new Au("Font",i.defaultFontFamilies,i.defaultFontFamily),s.fontFamilyPanel.onFontChanged=s.setFont,s.textColorPanel=new Ee("Text color",i.defaultColorSet,s.textColor,Yd,"text-color-panel"),s.textColorPanel.onColorChanged=s.setTextColor,s}return Gt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.frame&&r!==this.captionBg&&r!==this.captionElement)},t.prototype.createVisual=function(){this.visual=Z.createGroup(),this.addMarkerVisualToContainer(this.visual),this.captionBg=Z.createRect(1,1,[["fill",this.fillColor]]),this.visual.appendChild(this.captionBg),this.captionElement=Z.createText([["fill",this.textColor],["font-family",this.fontFamily]]),this.captionElement.style.fontSize=this.fontSize,this.captionElement.style.textAnchor="start",this.captionElement.style.dominantBaseline="text-before-edge",this.captionElement.textContent=this.captionText,this.visual.appendChild(this.captionElement),this.frame=Z.createRect(this.width,this.height,[["fill","transparent"],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray]]),this.visual.appendChild(this.frame),this.sizeCaption()},t.prototype.setCaptionText=function(r){this.captionText=r,this.captionElement.textContent=this.captionText,this.sizeCaption()},t.prototype.pointerDown=function(r,n){e.prototype.pointerDown.call(this,r,n),this.isMoved=!1,this.pointerDownPoint=r,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(r.x-this.pointerDownPoint.x)>5||Math.abs(r.y-this.pointerDownPoint.y)>5)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.setSize()},t.prototype.sizeCaption=function(){var r=this.captionElement.getBBox();this.captionText.trim()!==""?(this.captionBoxWidth=r.width+2*this.PADDING,this.captionBoxHeight=r.height+2*this.PADDING):(this.captionBoxWidth=0,this.captionBoxHeight=0),Z.setAttributes(this.captionBg,[["width",this.captionBoxWidth.toString()],["height",this.captionBoxHeight.toString()],["clip-path","path('M0,0 H"+this.width+" V"+this.height+" H"+-this.width+" Z')"]]),Z.setAttributes(this.captionElement,[["x",this.PADDING.toString()],["y",this.PADDING.toString()],["clip-path","path('M0,0 H"+(this.width-this.PADDING)+" V"+this.height+" H"+(-this.width-this.PADDING)+" Z')"]])},t.prototype.showTextEditor=function(){var r=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditBox=document.createElement("input"),this.textEditBox.style.position="absolute",this.textEditBox.style.width=this.width+"px",this.captionBoxHeight>0&&(this.textEditBox.style.height=this.captionBoxHeight+"px"),this.textEditBox.style.fontSize=this.fontSize,this.textEditBox.style.fontFamily=this.fontFamily,this.textEditBox.style.backgroundColor=this.fillColor,this.textEditBox.style.color=this.textColor,this.textEditBox.style.borderWidth="0",this.textEditBox.setAttribute("value",this.captionText),this.textEditBox.select(),this.textEditDiv.appendChild(this.textEditBox),this.overlayContainer.appendChild(this.textEditDiv),this.textEditBox.addEventListener("pointerup",function(n){n.stopPropagation()}),this.textEditBox.addEventListener("keypress",function(n){n.key==="Enter"&&r.finishTextEditing(r.textEditBox.value)}),this.textEditBox.addEventListener("keyup",function(n){n.cancelBubble=!0}),this.textEditBox.addEventListener("blur",function(){r.finishTextEditing(r.textEditBox.value)}),this.textEditDiv.addEventListener("pointerup",function(){r.finishTextEditing(r.textEditBox.value)}),this.positionTextEditor(),this.textEditBox.focus()},t.prototype.positionTextEditor=function(){this.state==="edit"&&(this.textEditBox===void 0?this.showTextEditor():(this.textEditBox.style.left=this.left+"px",this.textEditBox.style.top=this.top+"px",this.textEditBox.style.transform="rotate("+this.rotationAngle+"deg)",this.textEditBox.style.transformOrigin=this.width/2+"px "+this.height/2+"px"))},t.prototype.finishTextEditing=function(r){this.setCaptionText(r.trim()),this.overlayContainer.innerHTML="",this.stateChanged()},t.prototype.setFont=function(r){this.captionElement&&Z.setAttributes(this.captionElement,[["font-family",r]]),this.fontFamily=r,this.textEditBox&&(this.textEditBox.style.fontFamily=this.fontFamily),this.sizeCaption(),this.stateChanged()},t.prototype.setTextColor=function(r){this.captionElement&&Z.setAttributes(this.captionElement,[["fill",r]]),this.textColor=r,this.textEditBox&&(this.textEditBox.style.color=this.textColor),this.stateChanged()},t.prototype.setSize=function(){e.prototype.setSize.call(this),Z.setAttributes(this.frame,[["width",this.width.toString()],["height",this.height.toString()]]),this.sizeCaption()},t.prototype.pointerUp=function(r){e.prototype.pointerUp.call(this,r),this.setSize(),!this.isMoved&&Date.now()-this.pointerDownTimestamp>500&&this.showTextEditor(),this.pointerDownPoint=void 0},t.prototype.dblClick=function(r,n){e.prototype.dblClick.call(this,r,n),this.showTextEditor()},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.frame&&Z.setAttributes(this.frame,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},t.prototype.setFillColor=function(r){this.fillColor=r,this.captionBg&&Z.setAttributes(this.captionBg,[["fill",this.fillColor]]),this.fillColorChanged(r),this.stateChanged()},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.frame&&Z.setAttributes(this.frame,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.frame&&Z.setAttributes(this.frame,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.fontFamilyPanel,this.textColorPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:1,textColor:this.textColor,fontFamily:this.fontFamily,fontSize:this.fontSize,captionText:this.captionText},e.prototype.getState.call(this));return r.typeName=this.typeName,r},t.prototype.restoreState=function(r){var n=r;this.fillColor=n.fillColor,this.strokeColor=n.strokeColor,this.strokeWidth=n.strokeWidth,this.strokeDasharray=n.strokeDasharray,this.textColor=n.textColor,this.fontFamily=n.fontFamily,this.captionText=n.captionText,this.fontSize=n.fontSize,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize()},t.prototype.scale=function(r,n){e.prototype.scale.call(this,r,n),this.setSize()},t.typeName="CaptionFrameMarker",t.title="Caption frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M5 3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2H5m0 2h14v14H5V5m2 2v2h10V7H7z"/></svg>',t}(es),Xe=function(){function e(t,r){r===void 0&&(r=!1),this.cancelable=!1,this._defaultPrevented=!1,this.markerArea=t,this.cancelable=r}return Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this._defaultPrevented=!0},e}(),Ay=function(e){function t(r,n,i){var s=e.call(this,r,!1)||this;return s.dataUrl=n,s.state=i,s}return Gt(t,e),t}(Xe),mr=function(e){function t(r,n,i){i===void 0&&(i=!1);var s=e.call(this,r,i)||this;return s.marker=n,s}return Gt(t,e),t}(Xe),By=function(){function e(){this.render=[],this.beforeclose=[],this.close=[],this.show=[],this.restorestate=[],this.statechange=[],this.markerselect=[],this.markerdeselect=[],this.markercreating=[],this.markercreate=[],this.markerbeforedelete=[],this.markerdelete=[],this.markerchange=[],this.focus=[],this.blur=[]}return e.prototype.addEventListener=function(t,r){this[t].push(r)},e.prototype.removeEventListener=function(t,r){var n=this[t].indexOf(r);n>-1&&this[t].splice(n,1)},e}(),Oy=function(){function e(t){this.touchPoints=0,this._availableMarkerTypes=this.DEFAULT_MARKER_TYPES,this.mode="select",this.markers=[],this.isDragging=!1,this.renderEventListeners=[],this.closeEventListeners=[],this.settings=new Ey,this._isOpen=!1,this.undoRedoManager=new Py,this.renderAtNaturalSize=!1,this.renderImageType="image/png",this.renderMarkersOnly=!1,this.zoomSteps=[1,1.5,2,4],this._zoomLevel=1,this._isResizing=!1,this.prevPanPoint={x:0,y:0},this.eventListeners=new By,this._silentRenderMode=!1,this._isFocused=!1,this._instanceNo=e.instanceCounter++,this.styles=new Cy(this.instanceNo),this.uiStyleSettings=this.styles.settings,this.target=t,this.targetRoot=document.body,this.width=t.clientWidth,this.height=t.clientHeight,this.styles.removeStyleSheet(),this.open=this.open.bind(this),this.setTopLeft=this.setTopLeft.bind(this),this.toolbarButtonClicked=this.toolbarButtonClicked.bind(this),this.createNewMarker=this.createNewMarker.bind(this),this.addNewMarker=this.addNewMarker.bind(this),this.markerCreated=this.markerCreated.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onDblClick=this.onDblClick.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.overrideOverflow=this.overrideOverflow.bind(this),this.restoreOverflow=this.restoreOverflow.bind(this),this.close=this.close.bind(this),this.closeUI=this.closeUI.bind(this),this.addCloseEventListener=this.addCloseEventListener.bind(this),this.removeCloseEventListener=this.removeCloseEventListener.bind(this),this.addRenderEventListener=this.addRenderEventListener.bind(this),this.removeRenderEventListener=this.removeRenderEventListener.bind(this),this.clientToLocalCoordinates=this.clientToLocalCoordinates.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.deleteSelectedMarker=this.deleteSelectedMarker.bind(this),this.setWindowHeight=this.setWindowHeight.bind(this),this.removeMarker=this.removeMarker.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this),this.onPopupTargetResize=this.onPopupTargetResize.bind(this),this.showNotesEditor=this.showNotesEditor.bind(this),this.hideNotesEditor=this.hideNotesEditor.bind(this),this.stepZoom=this.stepZoom.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.markerStateChanged=this.markerStateChanged.bind(this),this.switchToSelectMode=this.switchToSelectMode.bind(this),this.addDefs=this.addDefs.bind(this),this.addDefsToImage=this.addDefsToImage.bind(this),this.addMarkerEvents=this.addMarkerEvents.bind(this)}return Object.defineProperty(e.prototype,"ALL_MARKER_TYPES",{get:function(){return[Va,ui,ja,fi,Ty,Ml,$a,Pf,My,Xd,Ru,Dy,Ry]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DEFAULT_MARKER_TYPES",{get:function(){return[Va,ui,ja,fi,Ml,$a,Pf]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BASIC_MARKER_TYPES",{get:function(){return[Va,ui,ja,fi,$a]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableMarkerTypes",{get:function(){return this._availableMarkerTypes},set:function(t){var r=this;this._availableMarkerTypes.splice(0),t.forEach(function(n){if(typeof n=="string"){var i=r.ALL_MARKER_TYPES.find(function(s){return s.typeName===n});i!==void 0&&r._availableMarkerTypes.push(i)}else r._availableMarkerTypes.push(n)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentMarker",{get:function(){return this._currentMarker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUndoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isUndoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRedoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isRedoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){return this._zoomLevel},set:function(t){this._zoomLevel=t,this.editorCanvas&&this.contentDiv&&(this.editorCanvas.style.transform="scale("+this._zoomLevel+")",this.contentDiv.scrollTo({left:(this.editorCanvas.clientWidth*this._zoomLevel-this.contentDiv.clientWidth)/2,top:(this.editorCanvas.clientHeight*this._zoomLevel-this.contentDiv.clientHeight)/2}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instanceNo",{get:function(){return this._instanceNo},enumerable:!1,configurable:!0}),e.prototype.open=function(){this.setupResizeObserver(),this.setEditingTarget(),this.setTopLeft(),this.initMarkerCanvas(),this.initOverlay(),this.attachEvents(),this.settings.displayMode==="popup"&&this.onPopupTargetResize(),Mf.isLicensed||this.addLogo(),this._isOpen=!0,this._isFocused=!0},e.prototype.show=function(){var t=this;this.styles.styleSheetRoot===void 0&&Tf.styleSheetRoot!==void 0&&(this.styles.styleSheetRoot=Tf.styleSheetRoot),this.markers.splice(0),this.setWindowHeight(),this.showUI(),this.open(),this.eventListeners.show.forEach(function(r){return r(new Xe(t))})},e.prototype.render=function(){return Ef(this,void 0,void 0,function(){var t;return kf(this,function(r){switch(r.label){case 0:return this.setCurrentMarker(),(t=new xy).naturalSize=this.renderAtNaturalSize,t.imageType=this.renderImageType,t.imageQuality=this.renderImageQuality,t.markersOnly=this.renderMarkersOnly,t.width=this.renderWidth,t.height=this.renderHeight,[4,t.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 1:return r.sent(),[4,t.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 2:return[2,r.sent()]}})})},e.prototype.close=function(t){var r=this;if(t===void 0&&(t=!1),this.isOpen){var n=!1;t||this.eventListeners.beforeclose.forEach(function(i){var s=new Xe(r,!0);i(s),s.defaultPrevented&&(n=!0)}),n||(this.coverDiv&&this.closeUI(),this.targetObserver&&(this.targetObserver.unobserve(this.target),this.targetObserver.unobserve(this.editorCanvas)),this.settings.displayMode==="popup"&&window.removeEventListener("resize",this.setWindowHeight),this.eventListeners.close.forEach(function(i){return i(new Xe(r))}),this.detachEvents(),this._isOpen=!1)}},e.prototype.addMarkersToToolbar=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];(t=this._availableMarkerTypes).push.apply(t,r)},e.prototype.addRenderEventListener=function(t){this.addEventListener("render",function(r){t(r.dataUrl,r.state)})},e.prototype.removeRenderEventListener=function(t){},e.prototype.addCloseEventListener=function(t){this.addEventListener("close",function(){t()})},e.prototype.removeCloseEventListener=function(t){},e.prototype.setupResizeObserver=function(){var t=this;this.settings.displayMode==="inline"?window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){t.resize(t.target.clientWidth,t.target.clientHeight)}),this.targetObserver.observe(this.target)):this.settings.displayMode==="popup"&&(window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){return t.onPopupTargetResize()}),this.targetObserver.observe(this.editorCanvas)),window.addEventListener("resize",this.setWindowHeight))},e.prototype.onPopupTargetResize=function(){var t=1*this.target.clientWidth/this.target.clientHeight,r=this.editorCanvas.clientWidth/t>this.editorCanvas.clientHeight?this.editorCanvas.clientHeight*t:this.editorCanvas.clientWidth,n=r<this.editorCanvas.clientWidth?this.editorCanvas.clientHeight:this.editorCanvas.clientWidth/t;this.resize(r,n)},e.prototype.setWindowHeight=function(){this.windowHeight=window.innerHeight},e.prototype.resize=function(t,r){this._isResizing=!0;var n=t/this.imageWidth,i=r/this.imageHeight;this.imageWidth=Math.round(t),this.imageHeight=Math.round(r),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px",this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.settings.displayMode!=="popup"?this.coverDiv.style.width=this.imageWidth.toString()+"px":(this.setTopLeft(),this.positionMarkerImage()),this.toolbar!==void 0&&this.toolbar.adjustLayout(),this.positionLogo(),this.scaleMarkers(n,i),this._isResizing=!1},e.prototype.scaleMarkers=function(t,r){var n,i=this;this._currentMarker&&this._currentMarker instanceof fi?this._currentMarker.scale(t,r):(n=this._currentMarker,this.setCurrentMarker()),this.markers.forEach(function(s){s!==i._currentMarker&&s.scale(t,r)}),n!==void 0&&this.setCurrentMarker(n)},e.prototype.setEditingTarget=function(){this.imageWidth=Math.round(this.target.clientWidth),this.imageHeight=Math.round(this.target.clientHeight),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px"},e.prototype.setTopLeft=function(){var t=this.editingTarget.getBoundingClientRect(),r=this.editorCanvas.getBoundingClientRect();this.left=t.left-r.left,this.top=t.top-r.top},e.prototype.initMarkerCanvas=function(){this.markerImageHolder=document.createElement("div"),this.markerImageHolder.style.setProperty("touch-action","pinch-zoom"),this.markerImage=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.markerImage.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImage.style.pointerEvents="auto",this.markerImageHolder.style.position="absolute",this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.markerImageHolder.style.transformOrigin="top left",this.positionMarkerImage(),this.markerImageHolder.appendChild(this.markerImage),this.editorCanvas.appendChild(this.markerImageHolder)},e.prototype.addDefs=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this.defs=Z.createDefs(),this.addDefsToImage(),(t=this.defs).append.apply(t,r)},e.prototype.addDefsToImage=function(){this.defs&&this.markerImage.insertBefore(this.defs,this.markerImage.firstChild)},e.prototype.initOverlay=function(){this.overlayContainer=document.createElement("div"),this.overlayContainer.style.position="absolute",this.overlayContainer.style.left="0px",this.overlayContainer.style.top="0px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.overlayContainer.style.display="flex",this.markerImageHolder.appendChild(this.overlayContainer)},e.prototype.positionMarkerImage=function(){this.markerImageHolder.style.top=this.top/this.zoomLevel+"px",this.markerImageHolder.style.left=this.left/this.zoomLevel+"px"},e.prototype.attachEvents=function(){this.markerImage.addEventListener("pointerdown",this.onPointerDown),this.markerImage.addEventListener("touchmove",function(t){return t.preventDefault()}),this.markerImage.addEventListener("dblclick",this.onDblClick),this.attachWindowEvents()},e.prototype.attachWindowEvents=function(){window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerOut),window.addEventListener("pointerout",this.onPointerOut),window.addEventListener("pointerleave",this.onPointerUp),window.addEventListener("resize",this.onWindowResize),window.addEventListener("keyup",this.onKeyUp)},e.prototype.detachEvents=function(){this.markerImage.removeEventListener("pointerdown",this.onPointerDown),this.markerImage.removeEventListener("dblclick",this.onDblClick),this.detachWindowEvents()},e.prototype.detachWindowEvents=function(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerOut),window.removeEventListener("pointerout",this.onPointerOut),window.removeEventListener("pointerleave",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("keyup",this.onKeyUp)},e.prototype.addLogo=function(){this.logoUI=document.createElement("div"),this.logoUI.style.display="inline-block",this.logoUI.style.margin="0px",this.logoUI.style.padding="0px",this.logoUI.style.fill="#333333";var t=document.createElement("a");t.href="https://markerjs.com/",t.target="_blank",t.innerHTML='<svg viewBox="0 0 112 96" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="#e5f20d" fill-opacity=".647" d="M0 40.386h111.96V95.62H0z"/><path d="M93.61 61.452c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.591 1.048-1.481 0-2.222-.74-2.222-2.22 0-16.617-.533-29.347-1.604-38.192-1.068-8.842-2.92-13.265-5.552-13.265-4.443 0-10.94 15.509-19.497 46.52v.124c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.592 1.048-1.48 0-2.22-.74-2.22-2.22 0-3.29.165-8.392.493-15.302.33-7.732.494-13.82.494-18.262 0-6.17-.186-10.55-.556-13.142-.37-2.591-1.172-3.887-2.406-3.887-2.796 0-6.333 5.12-10.612 15.363C38.494 34.367 34.01 46.44 29.32 60.34l-1.11 3.209a5.714 5.714 0 01-1.42 2.097c-.617.578-1.295.864-2.036.864-.987 0-1.644-.081-1.974-.247-.328-.162-.533-.656-.617-1.48-.41-4.03-.74-9.418-.987-16.165-.163-1.728-.329-4.566-.494-8.515-.822-13.901-1.562-23.3-2.221-28.196-.657-4.893-.987-7.628-.987-8.205 0-.657.33-1.44.987-2.345.659-.903 1.276-1.357 1.85-1.357 1.319 0 2.387.947 3.21 2.838.411.906.863 4.526 1.357 10.859.493 6.335.905 14.19 1.233 23.568l.617 18.88c4.527-13.983 9.216-26.673 14.068-38.068C45.65 6.686 50.093.988 54.123.988c2.715 0 4.566 1.974 5.553 5.923.987 3.949 1.481 9.667 1.481 17.152 0 3.949-.081 9.625-.247 17.029l-.123 5.676c3.373-11.762 6.725-21.634 10.057-29.615 3.331-7.979 6.685-11.97 10.056-11.97 8.475 0 12.71 18.757 12.71 56.269z" fill-rule="nonzero"/></svg>',t.title="Powered by marker.js",t.style.display="grid",t.style.alignItems="center",t.style.justifyItems="center",t.style.padding="3px",t.style.width="20px",t.style.height="20px",this.logoUI.appendChild(t),this.editorCanvas.appendChild(this.logoUI),this.logoUI.style.position="absolute",this.logoUI.style.pointerEvents="all",this.positionLogo()},e.prototype.positionLogo=function(){this.logoUI&&(this.uiStyleSettings.logoPosition!=="right"?this.logoUI.style.left=this.markerImageHolder.offsetLeft+10+"px":this.logoUI.style.left=this.markerImageHolder.offsetLeft+this.markerImageHolder.offsetWidth-this.logoUI.clientWidth-10+"px",this.logoUI.style.top=this.markerImageHolder.offsetTop+this.markerImageHolder.offsetHeight-this.logoUI.clientHeight-10+"px")},e.prototype.overrideOverflow=function(){this.scrollXState=window.scrollX,this.scrollYState=window.scrollY,this.bodyOverflowState=document.body.style.overflow,window.scroll({top:0,left:0}),document.body.style.overflow="hidden"},e.prototype.restoreOverflow=function(){document.body.style.overflow=this.bodyOverflowState,window.scroll({top:this.scrollYState,left:this.scrollXState})},e.prototype.showUI=function(){var t;switch(this.settings.displayMode==="popup"&&this.overrideOverflow(),this.coverDiv=document.createElement("div"),this.coverDiv.style.visibility=this._silentRenderMode?"hidden":"visible",this.coverDiv.className=this.styles.classNamePrefixBase+" "+this.styles.classNamePrefix,this.coverDiv.style.fontSize="16px",this.coverDiv.style.userSelect="none",this.settings.displayMode){case"inline":this.coverDiv.style.position="absolute";var r=this.settings.uiOffsetTop!==void 0?this.target.offsetTop+this.settings.uiOffsetTop:this.target.offsetTop>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0,n=this.target.offsetLeft+((t=this.settings.uiOffsetLeft)!==null&&t!==void 0?t:0);this.coverDiv.style.top=r+"px",this.coverDiv.style.left=n+"px",this.coverDiv.style.width=this.target.offsetWidth.toString()+"px",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"5";break;case"popup":this.coverDiv.style.position="fixed",this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=window.innerHeight+"px",this.coverDiv.style.backgroundColor="rgba(0, 0, 0, 0.75)",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"1000",this.coverDiv.style.display="flex"}this.targetRoot.appendChild(this.coverDiv),this.uiDiv=document.createElement("div"),this.uiDiv.style.display="flex",this.uiDiv.style.flexDirection="column",this.uiDiv.style.flexGrow="2",this.uiDiv.style.margin=this.settings.displayMode==="popup"?this.settings.popupMargin+"px":"0px",this.settings.displayMode==="popup"&&(this.uiDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px"),this.uiDiv.style.border="0px",this.coverDiv.appendChild(this.uiDiv),this.toolbar=new Sy(this.uiDiv,this.settings.displayMode,this._availableMarkerTypes,this.uiStyleSettings,this.styles),this.toolbar.addButtonClickListener(this.toolbarButtonClicked),this.toolbar.show(this._silentRenderMode||this.uiStyleSettings.hideToolbar?"hidden":"visible"),this.contentDiv=document.createElement("div"),this.contentDiv.style.display="flex",this.contentDiv.style.flexDirection="row",this.contentDiv.style.flexGrow="2",this.contentDiv.style.flexShrink="1",this.settings.displayMode==="popup"&&(this.contentDiv.style.backgroundColor=this.uiStyleSettings.canvasBackgroundColor,this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.uiStyleSettings.toolbarHeight+"px",this.contentDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px)"),this.contentDiv.style.overflow="auto",this.uiDiv.appendChild(this.contentDiv),this.editorCanvas=document.createElement("div"),this.editorCanvas.style.flexGrow="2",this.editorCanvas.style.flexShrink="1",this.editorCanvas.style.position="relative",this.editorCanvas.style.overflow="hidden",this.editorCanvas.style.display="flex",this.settings.displayMode==="popup"&&(this.editorCanvas.style.alignItems="center",this.editorCanvas.style.justifyContent="center"),this.editorCanvas.style.pointerEvents="none",this.editorCanvas.style.transformOrigin="left top",this.editorCanvas.style.transform="scale("+this.zoomLevel+")",this.contentDiv.appendChild(this.editorCanvas),this.editingTarget=this.target instanceof HTMLImageElement?document.createElement("img"):document.createElement("canvas"),this.settings.displayMode==="inline"&&this.settings.uiOffsetTop===void 0&&this.target.offsetTop<this.styles.settings.toolbarHeight&&(this.editingTarget.style.marginTop=this.target.offsetTop-this.styles.settings.toolbarHeight+"px"),this.editorCanvas.appendChild(this.editingTarget),this.toolbox=new wy(this.uiDiv,this.settings.displayMode,this.uiStyleSettings,this.styles),this.toolbox.show(this._silentRenderMode||this.uiStyleSettings.hideToolbox?"hidden":"visible")},e.prototype.closeUI=function(){this.settings.displayMode==="popup"&&this.restoreOverflow(),this.targetRoot.removeChild(this.coverDiv),this.coverDiv.remove(),this.coverDiv=null},e.prototype.removeMarker=function(t){this.markerImage.removeChild(t.container),this.markers.indexOf(t)>-1&&this.markers.splice(this.markers.indexOf(t),1),t.dispose()},e.prototype.switchToSelectMode=function(){this.mode="select",this.hideNotesEditor(),this._currentMarker!==void 0&&(this._currentMarker.state!=="new"?this._currentMarker.select():(this.removeMarker(this._currentMarker),this.setCurrentMarker(),this.markerImage.style.cursor="default"),this.addUndoStep())},e.prototype.toolbarButtonClicked=function(t,r){if(t==="marker"&&r!==void 0)this.createNewMarker(r);else if(t==="action")switch(r){case"select":this.switchToSelectMode(),this.switchToSelectMode();break;case"delete":this.deleteSelectedMarker();break;case"clear":this.clear();break;case"undo":this.undo();break;case"redo":this.redo();break;case"zoom":this.stepZoom();break;case"zoom-out":this.zoomLevel=1;break;case"notes":this.notesArea===void 0?(this.switchToSelectMode(),this.zoomLevel=1,this.showNotesEditor()):this.switchToSelectMode();break;case"close":this.close();break;case"render":this.switchToSelectMode(),this.startRenderAndClose()}},e.prototype.deleteSelectedMarker=function(){var t=this;if(this._currentMarker!==void 0){var r=!1;if(this.eventListeners.markerbeforedelete.forEach(function(i){var s=new mr(t,t._currentMarker,!0);i(s),s.defaultPrevented&&(r=!0)}),!r){var n=this._currentMarker;this._currentMarker.dispose(),this.markerImage.removeChild(this._currentMarker.container),this.markers.splice(this.markers.indexOf(this._currentMarker),1),this.setCurrentMarker(),this.addUndoStep(),this.eventListeners.markerdelete.forEach(function(i){return i(new mr(t,n))})}}},e.prototype.clear=function(){var t=this,r=!1;if(this.markers.length>0&&(this.eventListeners.markerbeforedelete.forEach(function(o){var a=new mr(t,void 0,!0);o(a),a.defaultPrevented&&(r=!0)}),!r)){this.setCurrentMarker();for(var n=function(o){var a=i.markers[o];i.setCurrentMarker(i.markers[o]),i._currentMarker.dispose(),i.markerImage.removeChild(i._currentMarker.container),i.markers.splice(i.markers.indexOf(i._currentMarker),1),i.eventListeners.markerdelete.forEach(function(l){return l(new mr(t,a))})},i=this,s=this.markers.length-1;s>=0;s--)n(s);this.addUndoStep()}},Object.defineProperty(e.prototype,"isNotesAreaOpen",{get:function(){return this.notesArea!==void 0},enumerable:!1,configurable:!0}),e.prototype.showNotesEditor=function(){var t;this._currentMarker!==void 0&&(this.overlayContainer.innerHTML="",this.notesArea=document.createElement("textarea"),this.notesArea.className=this.uiStyleSettings.notesAreaStyleClassName,this.notesArea.style.pointerEvents="auto",this.notesArea.style.alignSelf="stretch",this.notesArea.style.width="100%",this.notesArea.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.notesArea.value=(t=this._currentMarker.notes)!==null&&t!==void 0?t:"",this.overlayContainer.appendChild(this.notesArea))},e.prototype.hideNotesEditor=function(){this.isNotesAreaOpen&&(this._currentMarker!==void 0&&(this._currentMarker.notes=this.notesArea.value.trim()!==""?this.notesArea.value:void 0),this.overlayContainer.removeChild(this.notesArea),this.notesArea=void 0)},e.prototype.selectLastMarker=function(){this.markers.length>0?this.setCurrentMarker(this.markers[this.markers.length-1]):this.setCurrentMarker()},e.prototype.addUndoStep=function(){var t=this;if(this._currentMarker===void 0||this._currentMarker.state!=="edit"){var r=this.getState(),n=this.undoRedoManager.getLastUndoStep();if(!n||n.width===r.width&&n.height===r.height){var i=this.undoRedoManager.undoStepCount;this.undoRedoManager.addUndoStep(r),i<this.undoRedoManager.undoStepCount&&this.eventListeners.statechange.forEach(function(s){return s(new Xe(t))})}else this.undoRedoManager.replaceLastUndoStep(r)}},e.prototype.undo=function(){this.switchToSelectMode(),this.addUndoStep(),this.undoStep()},e.prototype.undoStep=function(){var t=this,r=this.undoRedoManager.undo();r!==void 0&&(this.restoreState(r),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(n){return n(new Xe(t))}))},e.prototype.redo=function(){this.switchToSelectMode(),this.redoStep()},e.prototype.redoStep=function(){var t=this,r=this.undoRedoManager.redo();r!==void 0&&(this.restoreState(r),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(n){return n(new Xe(t))}))},e.prototype.stepZoom=function(){var t=this.zoomSteps.indexOf(this.zoomLevel);this.zoomLevel=t<this.zoomSteps.length-1?this.zoomSteps[t+1]:this.zoomSteps[0]},e.prototype.panTo=function(t){this.contentDiv.scrollBy({left:this.prevPanPoint.x-t.x,top:this.prevPanPoint.y-t.y}),this.prevPanPoint=t},e.prototype.startRenderAndClose=function(){return Ef(this,void 0,void 0,function(){var t,r,n=this;return kf(this,function(i){switch(i.label){case 0:return[4,this.render()];case 1:return t=i.sent(),r=this.getState(),this.eventListeners.render.forEach(function(s){return s(new Ay(n,t,r))}),this.close(!0),[2]}})})},e.prototype.getState=function(t){t===!0&&this.setCurrentMarker();var r={width:this.imageWidth,height:this.imageHeight,markers:[]};return this.markers.forEach(function(n){return r.markers.push(n.getState())}),r},e.prototype.restoreState=function(t){var r=this;for(this.markers.splice(0);this.markerImage.lastChild;)this.markerImage.removeChild(this.markerImage.lastChild);t.markers.forEach(function(n){var i=r._availableMarkerTypes.find(function(o){return o.typeName===n.typeName});if(i!==void 0){var s=r.addNewMarker(i);s.restoreState(n),r.addMarkerEvents(s),r.markers.push(s)}}),t.width&&t.height&&(t.width!==this.imageWidth||t.height!==this.imageHeight)&&this.scaleMarkers(this.imageWidth/t.width,this.imageHeight/t.height),this.eventListeners.restorestate.forEach(function(n){return n(new Xe(r))})},e.prototype.addNewMarker=function(t){var r=Z.createGroup();return this.markerImage.appendChild(r),new t(r,this.overlayContainer,this.settings)},e.prototype.createNewMarker=function(t){var r,n=this;(r=typeof t=="string"?this._availableMarkerTypes.find(function(i){return i.typeName===t}):t)&&(this.setCurrentMarker(),this.addUndoStep(),this._currentMarker=this.addNewMarker(r),this.addMarkerEvents(this._currentMarker),this.markerImage.style.cursor="crosshair",this.toolbar.setActiveMarkerButton(r.typeName),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this.eventListeners.markercreating.forEach(function(i){return i(new mr(n,n._currentMarker))}))},e.prototype.addMarkerEvents=function(t){t.onMarkerCreated=this.markerCreated,t.onColorChanged=this.colorChanged,t.onFillColorChanged=this.fillColorChanged,t.onStateChanged=this.markerStateChanged},e.prototype.markerCreated=function(t){var r=this;this.mode="select",this.markerImage.style.cursor="default",this.markers.push(t),this.setCurrentMarker(t),t instanceof ui&&this.settings.newFreehandMarkerOnPointerUp?this.createNewMarker(ui):this.toolbar.setSelectMode(),this.addUndoStep(),this.eventListeners.markercreate.forEach(function(n){return n(new mr(r,t))})},e.prototype.colorChanged=function(t){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultColor=t,this.settings.defaultStrokeColor=t)},e.prototype.fillColorChanged=function(t){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultFillColor=t)},e.prototype.markerStateChanged=function(t){var r=this;this.eventListeners.markerchange.forEach(function(n){return n(new mr(r,t))})},e.prototype.setCurrentMarker=function(t){var r=this;this._currentMarker!==t&&this._currentMarker!==void 0&&(this._currentMarker.deselect(),this.toolbar.setCurrentMarker(),this.toolbox.setPanelButtons([]),this._isResizing||this.eventListeners.markerdeselect.forEach(function(n){return n(new mr(r,r._currentMarker))})),this._currentMarker=t,this._currentMarker===void 0||this._currentMarker.isSelected||(this._currentMarker.state!=="new"&&this._currentMarker.select(),this.toolbar.setCurrentMarker(this._currentMarker),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this._isResizing||this.eventListeners.markerselect.forEach(function(n){return n(new mr(r,r._currentMarker))}))},e.prototype.onPointerDown=function(t){if(this._isFocused||this.focus(),this.touchPoints++,this.touchPoints===1||t.pointerType!=="touch")if(this._currentMarker===void 0||this._currentMarker.state!=="new"&&this._currentMarker.state!=="creating"){if(this.mode==="select"){var r=this.markers.find(function(n){return n.ownsTarget(t.target)});r!==void 0?(this.setCurrentMarker(r),this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(t.clientX,t.clientY),t.target)):(this.setCurrentMarker(),this.isDragging=!0,this.prevPanPoint={x:t.clientX,y:t.clientY})}}else this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(t.clientX,t.clientY))},e.prototype.onDblClick=function(t){if(this._isFocused||this.focus(),this.mode==="select"){var r=this.markers.find(function(n){return n.ownsTarget(t.target)});r!==void 0&&r!==this._currentMarker&&this.setCurrentMarker(r),this._currentMarker!==void 0?this._currentMarker.dblClick(this.clientToLocalCoordinates(t.clientX,t.clientY),t.target):this.setCurrentMarker()}},e.prototype.onPointerMove=function(t){this.touchPoints!==1&&t.pointerType==="touch"||(this._currentMarker!==void 0||this.isDragging)&&(this._currentMarker!==void 0&&this._currentMarker.state==="edit"||t.preventDefault(),this._currentMarker!==void 0?this._currentMarker.manipulate(this.clientToLocalCoordinates(t.clientX,t.clientY)):this.zoomLevel>1&&this.panTo({x:t.clientX,y:t.clientY}))},e.prototype.onPointerUp=function(t){this.touchPoints>0&&this.touchPoints--,this.touchPoints===0&&this.isDragging&&this._currentMarker!==void 0&&this._currentMarker.pointerUp(this.clientToLocalCoordinates(t.clientX,t.clientY)),this.isDragging=!1,this.addUndoStep()},e.prototype.onPointerOut=function(){this.touchPoints>0&&this.touchPoints--},e.prototype.onKeyUp=function(t){this._currentMarker===void 0||this.notesArea!==void 0||t.key!=="Delete"&&t.key!=="Backspace"||this.deleteSelectedMarker()},e.prototype.clientToLocalCoordinates=function(t,r){var n=this.markerImage.getBoundingClientRect(),i=n.width/this.imageWidth/this.zoomLevel,s=n.height/this.imageHeight/this.zoomLevel;return{x:(t-n.left)/this.zoomLevel/i,y:(r-n.top)/this.zoomLevel/s}},e.prototype.onWindowResize=function(){this.positionUI()},e.prototype.positionUI=function(){switch(this.setTopLeft(),this.settings.displayMode){case"inline":var t=this.target.getClientRects(),r=t.length>0&&t.item(0)&&t.item(0).y>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0;this.coverDiv.style.top=r+"px",this.coverDiv.style.left=this.target.offsetLeft.toString()+"px";break;case"popup":this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=this.windowHeight+"px",this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.styles.settings.toolbarHeight+"px"}this.positionMarkerImage(),this.positionLogo()},e.prototype.addLicenseKey=function(t){Mf.addKey(t)},e.prototype.addEventListener=function(t,r){this.eventListeners.addEventListener(t,r)},e.prototype.removeEventListener=function(t,r){this.eventListeners.removeEventListener(t,r)},e.prototype.renderState=function(t){this._silentRenderMode=!0,this.settings.displayMode="inline",this.isOpen||this.show(),this.restoreState(t),this.startRenderAndClose(),this._silentRenderMode=!1},Object.defineProperty(e.prototype,"isFocused",{get:function(){return this._isFocused},enumerable:!1,configurable:!0}),e.prototype.focus=function(){var t=this;this._isFocused||(this.attachWindowEvents(),this._isFocused=!0,this._previousCurrentMarker!==void 0&&this.setCurrentMarker(this._previousCurrentMarker),this.eventListeners.focus.forEach(function(r){return r(new Xe(t))}))},e.prototype.blur=function(){var t=this;this._isFocused&&(this.detachWindowEvents(),this._isFocused=!1,this._previousCurrentMarker=this._currentMarker,this.setCurrentMarker(),this.eventListeners.blur.forEach(function(r){return r(new Xe(t))}))},e.instanceCounter=0,e}();function Iy(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(n){return n.split(" ").map(function(i){return i?""+e+i:""}).join(" ")}).join(" ")}function Ly(e,t){return t.replace(/([^}{]*){/gm,function(r,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function Cr(e,t){return function(r){r&&(e[t]=r)}}function qd(e,t,r){return function(n){n&&(e[t][r]=n)}}function Df(e,t){return function(r){var n=r.prototype;e.forEach(function(i){t(n,i)})}}function Fy(e,t){return t===void 0&&(t={}),function(r,n){e.forEach(function(i){var s=t[i]||i;s in r||(r[s]=function(){for(var o,a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var u=(o=this[n])[i].apply(o,a);return u===this[n]?this:u})})}}var zy="function",Ny="object",Gy="string",Wy="number",Ou="undefined",Kd=typeof window!==Ou,Hy=typeof document!==Ou&&document,Vy=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],qt=1e-7,_s={cm:function(e){return e*96/2.54},mm:function(e){return e*96/254},in:function(e){return e*96},pt:function(e){return e*96/72},pc:function(e){return e*96/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function jy(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function go(e,t,r,n){return(e*n+t*r)/(r+n)}function ns(e){return typeof e===Ou}function er(e){return e&&typeof e===Ny}function Jt(e){return Array.isArray(e)}function Me(e){return typeof e===Gy}function Xn(e){return typeof e===Wy}function Iu(e){return typeof e===zy}function $y(e,t){var r=e===""||e==" ",n=t===""||t==" ";return n&&r||e===t}function Jd(e,t,r,n,i){var s=Lu(e,t,r);return s?r:Xy(e,t,r+1,n,i)}function Lu(e,t,r){if(!e.ignore)return null;var n=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(n)}function Xy(e,t,r,n,i){for(var s=function(u){var c=t[u].trim();if(c===e.close&&!Lu(e,t,u))return{value:u};var f=u,h=Te(i,function(d){var p=d.open;return p===c});if(h&&(f=Jd(h,t,u,n,i)),f===-1)return o=u,"break";u=f,o=u},o,a=r;a<n;++a){var l=s(a);if(a=o,typeof l=="object")return l.value;if(l==="break")break}return-1}function Fu(e,t){var r=Me(t)?{separator:t}:t,n=r.separator,i=n===void 0?",":n,s=r.isSeparateFirst,o=r.isSeparateOnlyOpenClose,a=r.isSeparateOpenClose,l=a===void 0?o:a,u=r.openCloseCharacters,c=u===void 0?Vy:u,f=c.map(function(w){var x=w.open,E=w.close;return x===E?x:x+"|"+E}).join("|"),h="(\\s*"+i+"\\s*|"+f+"|\\s+)",d=new RegExp(h,"g"),p=e.split(d).filter(function(w){return w&&w!=="undefined"}),v=p.length,g=[],m=[];function b(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var C=function(w){var x=p[w].trim(),E=w,k=Te(c,function(P){var O=P.open;return O===x}),B=Te(c,function(P){var O=P.close;return O===x});if(k){if(E=Jd(k,p,w,v,c),E!==-1&&l)return b()&&s||(g.push(p.slice(w,E+1).join("")),w=E,s)?(S=w,"break"):(S=w,"continue")}else if(B&&!Lu(B,p,w)){var T=jy(c);return T.splice(c.indexOf(B),1),{value:Fu(e,{separator:i,isSeparateFirst:s,isSeparateOnlyOpenClose:o,isSeparateOpenClose:l,openCloseCharacters:T})}}else if($y(x,i)&&!o)return b(),s?(S=w,"break"):(S=w,"continue");E===-1&&(E=v-1),m.push(p.slice(w,E+1).join("")),w=E,S=w},S,_=0;_<v;++_){var y=C(_);if(_=S,typeof y=="object")return y.value;if(y==="break")break}return m.length&&g.push(m.join("")),g}function $r(e){return Fu(e,"")}function ln(e){return Fu(e,",")}function Zd(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function is(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2],i=t[3];return{prefix:r,unit:i,value:parseFloat(n)}}function Uy(e){return e.replace(/[\s-_]+([^\s-_])/g,function(t,r){return r.toUpperCase()})}function Ys(e,t){return e.replace(/([a-z])([A-Z])/g,function(r,n,i){return""+n+t+i.toLowerCase()})}function $i(){return Date.now?Date.now():new Date().getTime()}function _r(e,t,r){r===void 0&&(r=-1);for(var n=e.length,i=0;i<n;++i)if(t(e[i],i,e))return i;return r}function Te(e,t,r){var n=_r(e,t);return n>-1?e[n]:r}var Qd=function(){var e=$i(),t=Kd&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(r){var n=$i(),i=setTimeout(function(){r(n-e)},1e3/60);return i}}(),Yy=function(){var e=Kd&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}}();function Er(e){return Object.keys(e)}function qy(e){var t=Er(e);return t.map(function(r){return e[r]})}function Rt(e,t){var r=is(e),n=r.value,i=r.unit;if(er(t)){var s=t[i];if(s){if(Iu(s))return s(n);if(_s[i])return _s[i](n,s)}}else if(i==="%")return n*t/100;return _s[i]?_s[i](n):n}function Tl(e,t,r){return Math.max(t,Math.min(e,r))}function Rf(e,t,r,n){return n===void 0&&(n=e[0]/e[1]),[[xt(t[0],qt),xt(t[0]/n,qt)],[xt(t[1]*n,qt),xt(t[1],qt)]].filter(function(i){return i.every(function(s,o){var a=t[o],l=xt(a,qt);return r?s<=a||s<=l:s>=a||s>=l})})[0]||e}function tp(e,t,r,n){if(!n)return e.map(function(d,p){return Tl(d,t[p],r[p])});var i=e[0],s=e[1],o=n===!0?i/s:n,a=Rf(e,t,!1,o),l=a[0],u=a[1],c=Rf(e,r,!0,o),f=c[0],h=c[1];return i<l||s<u?(i=l,s=u):(i>f||s>h)&&(i=f,s=h),[i,s]}function Ky(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return r}function Pl(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return t?r/t:0}function Xt(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function Jy(e){return[0,1].map(function(t){return Pl(e.map(function(r){return r[t]}))})}function Af(e){var t=Jy(e),r=Xt(t,e[0]),n=Xt(t,e[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function Sr(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function xt(e,t){if(!t)return e;var r=1/t;return Math.round(e/t)/r}function Bf(e,t){return e.forEach(function(r,n){e[n]=xt(e[n],t)}),e}function Zy(e){for(var t=[],r=0;r<e;++r)t.push(r);return t}function ep(e){return e.reduce(function(t,r){return t.concat(r)},[])}function rp(e,t){e.indexOf(t)===-1&&e.push(t)}function te(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function np(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function ip(e,t){if(e.classList)e.classList.remove(t);else{var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function ie(e,t,r,n){e.addEventListener(t,r,n)}function Zt(e,t,r,n){e.removeEventListener(t,r,n)}function ni(e){return(e==null?void 0:e.ownerDocument)||Hy}function zu(e){return ni(e).documentElement}function Yr(e){return ni(e).body}function Hr(e){var t;return((t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function sp(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}function ii(e){return er(e)&&e.nodeName&&e.nodeType&&"ownerDocument"in e}var Qy=function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(r){return this.values[this.keys.indexOf(r)]},t.set=function(r,n){var i=this.keys,s=this.values,o=i.indexOf(r),a=o===-1?i.length:o;i[a]=r,s[a]=n},e}(),t1=function(){function e(){this.object={}}var t=e.prototype;return t.get=function(r){return this.object[r]},t.set=function(r,n){this.object[r]=n},e}(),e1=typeof Map=="function",r1=function(){function e(){}var t=e.prototype;return t.connect=function(r,n){this.prev=r,this.next=n,r&&(r.next=this),n&&(n.prev=this)},t.disconnect=function(){var r=this.prev,n=this.next;r&&(r.next=n),n&&(n.prev=r)},t.getIndex=function(){for(var r=this,n=-1;r;)r=r.prev,++n;return n},e}();function n1(e,t){var r=[],n=[];return e.forEach(function(i){var s=i[0],o=i[1],a=new r1;r[s]=a,n[o]=a}),r.forEach(function(i,s){i.connect(r[s-1])}),e.filter(function(i,s){return!t[s]}).map(function(i,s){var o=i[0],a=i[1];if(o===a)return[0,0];var l=r[o],u=n[a-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,r[0]);var f=l.getIndex();return[c,f]})}var i1=function(){function e(r,n,i,s,o,a,l,u){this.prevList=r,this.list=n,this.added=i,this.removed=s,this.changed=o,this.maintained=a,this.changedBeforeAdded=l,this.fixed=u}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var r=n1(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=r.filter(function(s,o){var a=s[0],l=s[1],u=n[o],c=u[0],f=u[1];if(a!==l)return i.push([c,f]),!0}),this.cachePureChanged=i},e}();function ss(e,t,r){var n=e1?Map:r?t1:Qy,i=r||function(b){return b},s=[],o=[],a=[],l=e.map(i),u=t.map(i),c=new n,f=new n,h=[],d=[],p={},v=[],g=0,m=0;return l.forEach(function(b,C){c.set(b,C)}),u.forEach(function(b,C){f.set(b,C)}),l.forEach(function(b,C){var S=f.get(b);typeof S>"u"?(++m,o.push(C)):p[S]=m}),u.forEach(function(b,C){var S=c.get(b);typeof S>"u"?(s.push(C),++g):(a.push([S,C]),m=p[C]||0,h.push([S-m,C-g]),d.push(C===S),S!==C&&v.push([S,C]))}),o.reverse(),new i1(e,t,s,o,v,a,h,d)}var s1=function(){function e(r,n){r===void 0&&(r=[]),this.findKeyCallback=n,this.list=[].slice.call(r)}var t=e.prototype;return t.update=function(r){var n=[].slice.call(r),i=ss(this.list,n,this.findKeyCallback);return this.list=n,i},e}(),Dl=function(e,t){return Dl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Dl(e,t)};function os(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Dl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ur=function(){return ur=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ur.apply(this,arguments)};function op(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Of(e,t,r){for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function If(e){var t=0;return e.map(function(r){return r==null?"$compat".concat(++t):"".concat(r)})}function ap(e){var t=[];return e.forEach(function(r){t=t.concat(Jt(r)?ap(r):r)}),t}function Xa(e,t){if(!t)return e;for(var r in t)ns(e[r])&&(e[r]=t[r]);return e}function mo(e,t){if(e===t)return!1;for(var r in e)if(!(r in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function Lf(e){var t=e.className,r=op(e,["className"]);return t!=null&&(r.class=t),delete r.style,delete r.children,r}function Ff(e){var t={},r={};for(var n in e)n.indexOf("on")===0?r[n]=e[n]:t[n]=e[n];return[t,r]}function ga(e){if(!e)return null;var t=e.b;return ii(t)?t:ga(e.c)}function lp(e){var t=e.parentNode;t&&t.removeChild(e)}function up(e){e.forEach(function(t){t()})}function o1(){return this.constructor(this.props,this.context)}var Nu=0,ma=function(){function e(r,n,i,s,o,a,l){l===void 0&&(l={}),this.t=r,this.d=n,this.k=i,this.i=s,this.c=o,this.ref=a,this.ps=l,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var t=e.prototype;return t.s=function(){return!0},t.u=function(r,n,i,s,o){var a=this,l=a.d,u=qy(n).filter(function(p){return p.$_req}),c=ap(u.map(function(p){return p.$_subs})),f=Te(c,function(p){return p.d===l});if(a.b&&!Me(i)&&!o&&!a.s(i.props,s)&&!f){var h=c.reduce(function(p,v){var g=v.d;return p[0]?p[0].d===g&&p.push(v):g>l&&p.push(v),p},[]);return h.forEach(function(p){as(p,p._ps,[p.o],r,n,!0)}),!1}a.o=i,a.ss(s);var d=a.ps;return Me(i)||(a.ps=i.props,a.ref=i.ref),Gu(this),a.r(r,n,a.b?d:{},s),!0},t.md=function(){this.rr()},t.ss=function(){},t.ud=function(){this.rr()},t.rr=function(){var r=this,n=r.ref,i=r.fr;n&&n(i?i.current:r.b)},e}();function cp(){return Object.__CROACT_CURRENT_INSTNACE__}function a1(){return Nu}function l1(e){Nu=e}function Gu(e){return Object.__CROACT_CURRENT_INSTNACE__=e,Nu=0,e}var Wu=function(){function e(r,n){r===void 0&&(r={}),this.props=r,this.context=n,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var t=e.prototype;return t.render=function(){return null},t.shouldComponentUpdate=function(r,n){return this.props!==r||this.state!==n},t.setState=function(r,n,i){var s=this;s.$_timer||(s.$_state={}),clearTimeout(s.$_timer),s.$_timer=0,s.$_state=ur(ur({},s.$_state),r),i?s.$_setState(n,i):s.$_timer=window.setTimeout(function(){s.$_timer=0,s.$_setState(n,i)})},t.forceUpdate=function(r){this.setState({},r,!0)},t.componentDidMount=function(){},t.componentDidUpdate=function(r,n){},t.componentWillUnmount=function(){},t.$_setState=function(r,n){var i=[],s=this.$_p,o=as(s.c,[s],[s.o],i,s._cs,ur(ur({},this.state),this.$_state),n);o&&(r&&i.push(r),up(i),Gu(null))},e}(),fp=function(e){os(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}var r=t.prototype;return r.shouldComponentUpdate=function(n,i){return mo(this.props,n)||mo(this.state,i)},t}(Wu);function hp(e){var t=function(r){t.current=r};return t.current=e,t}function u1(e){return e._fr=!0,e}function c1(e,t,r,n){var i,s;return!((i=e==null?void 0:e.prototype)===null||i===void 0)&&i.render?s=new e(t,r):(s=new Wu(t,r),s.constructor=e,e._fr?(n.fr=hp(),s.render=function(){return this.constructor(this.props,n.fr)}):s.render=o1),s.$_p=n,s}var f1=function(e){os(t,e);function t(n,i,s,o,a,l,u){u===void 0&&(u={});var c=e.call(this,n,i,s,o,a,l,Xa(u,n.defaultProps))||this;return c.typ="comp",c._usefs=[],c._uefs=[],c._defs=[],c}var r=t.prototype;return r.s=function(n,i){var s=this.b;return s.shouldComponentUpdate(Xa(n,this.t.defaultProps),i||s.state)!==!1},r.r=function(n,i,s){var o,a,l=this,u=l.t;l.ps=Xa(l.ps,l.t.defaultProps);var c=l.ps,f=!l.b,h=u.contextType,d=l.b,p=h==null?void 0:h.get(l);l._cs=i,f?(d=c1(u,c,p,l),l.b=d):(d.props=c,d.context=p);var v=d.state;l._usefs=[],l._uefs=[];var g=d.render();((a=(o=g==null?void 0:g.props)===null||o===void 0?void 0:o.children)===null||a===void 0?void 0:a.length)===0&&(g.props.children=l.ps.children);var m=ur(ur({},i),d.$_cs);as(l,l._ps,g?[g]:[],n,m),f?l._uefs.push(function(){h==null||h.register(l),d.componentDidMount()}):l._uefs.push(function(){d.componentDidUpdate(s,v)}),n.push(function(){l._usefs.forEach(function(b){b()}),f?l.md():l.ud(),l._defs=l._uefs.map(function(b){return b()})})},r.ss=function(n){var i=this.b;!i||!n||(i.state=n)},r.un=function(){var n,i=this;i._ps.forEach(function(o){o.un()});var s=i.t;(n=s.contextType)===null||n===void 0||n.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},t}(ma);function h1(e,t,r){var n=Hu(Lf(e),Lf(t)),i=n.added,s=n.removed,o=n.changed;for(var a in i)r.setAttribute(a,i[a]);for(var l in o)r.setAttribute(l,o[l][1]);for(var u in s)r.removeAttribute(u)}function d1(e,t,r){var n=Hu(e,t),i=n.added,s=n.removed;for(var o in s)r.e(o,!0);for(var a in i)r.e(a)}function Hu(e,t){var r=Er(e),n=Er(t),i=ss(r,n,function(l){return l}),s={},o={},a={};return i.added.forEach(function(l){var u=n[l];s[u]=t[u]}),i.removed.forEach(function(l){var u=r[l];o[u]=e[u]}),i.maintained.forEach(function(l){var u=l[0],c=r[u],f=[e[c],t[c]];e[c]!==t[c]&&(a[c]=f)}),{added:s,removed:o,changed:a}}function p1(e,t,r){var n=r.style,i=Hu(e,t),s=i.added,o=i.removed,a=i.changed;for(var l in s){var u=Ys(l,"-");n.setProperty(u,s[l])}for(var l in a){var c=Ys(l,"-");n.setProperty(c,a[l][1])}for(var l in o){var f=Ys(l,"-");n.removeProperty(f)}}function v1(e){return e.replace(/^on/g,"").toLowerCase()}var g1=function(e){os(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.typ="elem",n._es={},n._svg=!1,n}var r=t.prototype;return r.e=function(n,i){var s=this,o=s._es,a=s.b,l=v1(n);i?(Zt(a,l,o[n]),delete o[n]):(o[n]=function(u){var c,f;(f=(c=s.ps)[n])===null||f===void 0||f.call(c,u)},ie(a,l,o[n]))},r.s=function(n){return mo(this.ps,n)},r.r=function(n,i,s){var o,a=this,l=!a.b,u=a.ps;if(l){var c=ga(a.c),f=!1;a._svg||a.t==="svg"?f=!0:f=c&&c.ownerSVGElement,a._svg=f;var h=(o=a._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],d=a.t;if(h)a._hyd=[].slice.call(h.children||[]);else{var p=ni(c);f?h=p.createElementNS("http://www.w3.org/2000/svg",d):h=p.createElement(d)}a.b=h}as(a,a._ps,u.children,n,i);var v=a.b,g=Ff(s),m=g[0],b=g[1],C=Ff(u),S=C[0],_=C[1];return h1(m,S,v),d1(b,_,a),p1(s.style||{},u.style||{},v),n.push(function(){l?a.md():a.ud()}),!0},r.un=function(){var n=this,i=n._es,s=n.b;for(var o in i)Zt(s,o,i[o]);n._ps.forEach(function(a){a.un()}),n._es={},n._sel||lp(s)},t}(ma);function Xi(e){if(!e||ii(e))return e;var t=e.$_p._ps;return t.length?Xi(t[0].b):null}function dp(e){if(e){if(e.b&&ii(e.b))return e;var t=e._ps;return t.length?dp(t[0]):null}}function Qe(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=t||{},s=i.key,o=i.ref,a=op(i,["key","ref"]);return{type:e,key:s,ref:o,props:ur(ur({},a),{children:ep(r).filter(function(l){return l!=null&&l!==!1})})}}var pp=function(e){os(t,e);function t(n,i){i===void 0&&(i=0);var s=e.call(this,"container",i,"container",0,null)||this;return s.typ="container",s.b=n,s}var r=t.prototype;return r.r=function(){return!0},r.un=function(){},t}(ma),m1=function(e){os(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.typ="text",n}var r=t.prototype;return r.r=function(n){var i,s=this,o=!s.b;if(o){var a=ga(s.c),l=(i=s._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];s.b=l||ni(a).createTextNode(s.t.replace("text_",""))}return n.push(function(){o?s.md():s.ud()}),!0},r.un=function(){lp(this.b)},t}(ma);function y1(e,t,r){var n=r.map(function(l){return Me(l)?null:l.key}),i=If(t.map(function(l){return l.k})),s=If(n),o=ss(i,s,function(l){return l});o.removed.forEach(function(l){t.splice(l,1)[0].un()}),o.ordered.forEach(function(l){var u=l[0],c=l[1],f=t.splice(u,1)[0];t.splice(c,0,f);var h=Xi(f.b),d=Xi(t[c+1]&&t[c+1].b);h&&h.parentNode.insertBefore(h,d)}),o.added.forEach(function(l){t.splice(l,0,zf(r[l],n[l],l,e))});var a=o.maintained.filter(function(l){l[0];var u=l[1],c=r[u],f=t[u],h=Me(c)?"text_".concat(c):c.type;return h!==f.t?(f.un(),t.splice(u,1,zf(c,n[u],u,e)),!0):(f.i=u,!1)});return Of(Of([],o.added,!0),a.map(function(l){l[0];var u=l[1];return u}))}function b1(e,t){for(var r=e._ps,n=r.length,i=t.i+1;i<n;++i){var s=Xi(r[i].b);if(s)return s}return null}function zf(e,t,r,n){var i=n.d+1;if(Me(e)||Xn(e))return new m1("text_".concat(e),i,t,r,n,null,{});var s=e.type,o=typeof s=="string"?g1:f1;return new o(s,i,t,r,n,e.ref,e.props)}function as(e,t,r,n,i,s,o){var a=y1(e,t,r),l=e._hyd,u=t.filter(function(f,h){return f._hyd=l,f.u(n,i,r[h],s,o)});e.typ==="container"&&e._sel&&t.forEach(function(f){var h=dp(f);h&&(h._sel=!0)}),e._hyd=null;var c=ga(e);return c&&a.reverse().forEach(function(f){var h=t[f],d=Xi(h.b);if(d&&c!==d&&!d.parentNode){var p=b1(e,h);c.insertBefore(d,p)}}),u.length>0}function x1(e,t,r,n){r===void 0&&(r=t.__CROACT__),n===void 0&&(n={});var i=!!r;r||(r=new pp(t));var s=[];return as(r,r._ps,e?[e]:[],s,n,void 0,void 0),up(s),Gu(null),i||(t.__CROACT__=r),r}function Nf(e,t,r){return!r&&e&&(r=new pp(t.parentElement),r._hyd=[t],r._sel=!0),x1(e,t,r),r}function vp(e){var t=cp(),r=t._hs||(t._hs=[]),n=a1(),i=r[n];if(l1(n+1),i){if(!mo(i.deps,e.deps))return i.updated=!1,i;r[n]=e}else r.push(e);return e.value=e.func(),e.updated=!0,e}function C1(e,t){var r=vp({func:e,deps:t});return r.value}function S1(e){return C1(function(){return hp(e)},[])}function gp(e,t,r){var n=cp(),i=vp({func:function(){return e},deps:t}),s=r?n._usefs:n._uefs;i.updated?s.push(function(){return i.effect&&i.effect(),i.effect=e(),i.effect}):s.push(function(){return i.effect})}function w1(e,t,r){gp(function(){e==null||e(t())},r,!0)}function Vu(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return!0;return!1}function mp(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return e[n];return null}function yp(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function ju(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function _1(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!!(t&&t.length)}function E1(e,t){var r=ju("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return r?r[3]:""}function Rl(e){return e.replace(/_/g,".")}function hi(e,t){var r=null,n="-1";return Vu(e,function(i){var s=ju("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!s||i.brand?!1:(r=i,n=s[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=E1(i.versionTest.toLowerCase(),t)||n),n=Rl(n),!0)}),{preset:r,version:n}}function Es(e,t){var r={brand:"",version:"-1"};return Vu(e,function(n){var i=bp(t,n);return i?(r.brand=n.id,r.version=n.versionAlias||i.version,r.version!=="-1"):!1}),r}function bp(e,t){return mp(e,function(r){var n=r.brand;return ju(""+t.test,n.toLowerCase())})}var xp=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Cp=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Al=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Sp=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],wp=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function _p(e){return!!hi(Sp,e).preset}function k1(e){var t=yp(e),r=!!/mobi/g.exec(t),n={name:"unknown",version:"-1",majorVersion:-1,webview:_p(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},s=hi(xp,t),o=s.preset,a=s.version,l=hi(wp,t),u=l.preset,c=l.version,f=hi(Cp,t);if(n.chromium=!!f.preset,n.chromiumVersion=f.version,!n.chromium){var h=hi(Al,t);n.webkit=!!h.preset,n.webkitVersion=h.version}return u&&(i.name=u.id,i.version=c,i.majorVersion=parseInt(c,10)),o&&(n.name=o.id,n.version=a,n.webview&&i.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:r,isHints:!1}}function M1(e){var t=navigator.userAgentData,r=(t.uaList||t.brands).slice(),n=t.mobile||!1,i=r[0],s=(t.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Es(Sp,r).brand||_p(yp())},a={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&Vu(Al,function(h){return bp(r,h)});var l=Es(Cp,r);if(o.chromium=!!l.brand,o.chromiumVersion=l.version,!o.chromium){var u=Es(Al,r);o.webkit=!!u.brand,o.webkitVersion=u.version}var c=mp(wp,function(h){return new RegExp(""+h.test,"g").exec(s)});a.name=c?c.id:"";{var f=Es(xp,r);o.name=f.brand||o.name,o.version=f.brand&&e?e.uaFullVersion:f.version}return o.webkit&&(a.name=n?"ios":"mac"),a.name==="ios"&&o.webview&&(o.version="-1"),a.version=Rl(a.version),o.version=Rl(o.version),a.majorVersion=parseInt(a.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:a,isMobile:n,isHints:!0}}function T1(e){return _1()?M1():k1(e)}function P1(e,t,r,n,i,s){for(var o=0;o<i;++o){var a=r+o*i,l=n+o*i;e[a]+=e[l]*s,t[a]+=t[l]*s}}function D1(e,t,r,n,i){for(var s=0;s<i;++s){var o=r+s*i,a=n+s*i,l=e[o],u=t[o];e[o]=e[a],e[a]=l,t[o]=t[a],t[a]=u}}function R1(e,t,r,n,i){for(var s=0;s<n;++s){var o=r+s*n;e[o]/=i,t[o]/=i}}function Ep(e,t,r){for(var n=e.slice(),i=0;i<r;++i)n[i*r+t-1]=0,n[(t-1)*r+i]=0;return n[(t-1)*(r+1)]=1,n}function pr(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=e.slice(),n=zt(t),i=0;i<t;++i){var s=t*i+i;if(!xt(r[s],qt)){for(var o=i+1;o<t;++o)if(r[t*i+o]){D1(r,n,i,o,t);break}}if(!xt(r[s],qt))return[];R1(r,n,i,t,r[s]);for(var o=0;o<t;++o){var a=o,l=o+i*t,u=r[l];!xt(u,qt)||i===o||P1(r,n,a,i,t,-u)}}return n}function A1(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=0;n<t;++n)for(var i=0;i<t;++i)r[i*t+n]=e[t*n+i];return r}function kp(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=e[t*t-1],i=0;i<t-1;++i)r[i]=e[t*(t-1)+i]/n;return r[t-1]=0,r}function B1(e,t){for(var r=zt(t),n=0;n<t-1;++n)r[t*(t-1)+n]=e[n]||0;return r}function hn(e,t){for(var r=e.slice(),n=e.length;n<t-1;++n)r[n]=0;return r[t-1]=1,r}function rr(e,t,r){if(t===void 0&&(t=Math.sqrt(e.length)),t===r)return e;for(var n=zt(r),i=Math.min(t,r),s=0;s<i-1;++s){for(var o=0;o<i-1;++o)n[s*r+o]=e[s*t+o];n[(s+1)*r-1]=e[(s+1)*t-1],n[(r-1)*r+s]=e[(t-1)*t+s]}return n[r*r-1]=e[t*t-1],n}function yo(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=zt(e);return t.forEach(function(i){n=Bt(n,i,e)}),n}function Bt(e,t,r){r===void 0&&(r=Math.sqrt(e.length));var n=[],i=e.length/r,s=t.length/i;if(i){if(!s)return e}else return t;for(var o=0;o<r;++o)for(var a=0;a<s;++a){n[a*r+o]=0;for(var l=0;l<i;++l)n[a*r+o]+=e[l*r+o]*t[a*i+l]}return n}function Mt(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]+t[i];return n}function vt(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]-t[i];return n}function O1(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function Mp(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function de(e,t,r){r===void 0&&(r=t.length);var n=Bt(e,t,r),i=n[r-1];return n.map(function(s){return s/i})}function I1(e,t){return Bt(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function L1(e,t){return Bt(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function F1(e,t){return Bt(e,us(t,4))}function ks(e,t){var r=t[0],n=r===void 0?1:r,i=t[1],s=i===void 0?1:i,o=t[2],a=o===void 0?1:o;return Bt(e,[n,0,0,0,0,s,0,0,0,0,a,0,0,0,0,1],4)}function ls(e,t){return de(us(t,3),hn(e,3))}function Ua(e,t){var r=t[0],n=r===void 0?0:r,i=t[1],s=i===void 0?0:i,o=t[2],a=o===void 0?0:o;return Bt(e,[1,0,0,0,0,1,0,0,0,0,1,0,n,s,a,1],4)}function Gf(e,t){return Bt(e,t,4)}function us(e,t){var r=Math.cos(e),n=Math.sin(e),i=zt(t);return i[0]=r,i[1]=n,i[t]=-n,i[t+1]=r,i}function zt(e){for(var t=e*e,r=[],n=0;n<t;++n)r[n]=n%(e+1)?0:1;return r}function $u(e,t){for(var r=zt(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[(t+1)*i]=e[i];return r}function dn(e,t){for(var r=zt(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[t*(t-1)+i]=e[i];return r}function Xu(e,t,r,n,i,s,o,a){var l=e[0],u=e[1],c=t[0],f=t[1],h=r[0],d=r[1],p=n[0],v=n[1],g=i[0],m=i[1],b=s[0],C=s[1],S=o[0],_=o[1],y=a[0],w=a[1],x=[l,0,c,0,h,0,p,0,u,0,f,0,d,0,v,0,1,0,1,0,1,0,1,0,0,l,0,c,0,h,0,p,0,u,0,f,0,d,0,v,0,1,0,1,0,1,0,1,-g*l,-m*l,-b*c,-C*c,-S*h,-_*h,-y*p,-w*p,-g*u,-m*u,-b*f,-C*f,-S*d,-_*d,-y*v,-w*v],E=pr(x,8);if(!E.length)return[];var k=Bt(E,[g,m,b,C,S,_,y,w],8);return k[8]=1,rr(A1(k),3,4)}var Ri=function(){return Ri=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ri.apply(this,arguments)};function z1(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ui(e,t){return t===void 0&&(t=0),En(Un(e,t))}function N1(e,t){var r=de(e,[t[0],t[1]||0,t[2]||0,1],4),n=r[3]||1;return[r[0]/n,r[1]/n,r[2]/n]}function En(e){var t=z1();return e.forEach(function(r){var n=r.matrixFunction,i=r.functionValue;n&&(t=n(t,i))}),t}function Un(e,t){t===void 0&&(t=0);var r=Jt(e)?e:$r(e);return r.map(function(n){var i=Zd(n),s=i.prefix,o=i.value,a=null,l=s,u="";if(s==="translate"||s==="translateX"||s==="translate3d"){var c=er(t)?Ri(Ri({},t),{"o%":t["%"]}):{"%":t,"o%":t},f=ln(o).map(function(P,O){return O===0&&"x%"in c?c["%"]=t["x%"]:O===1&&"y%"in c?c["%"]=t["y%"]:c["%"]=t["o%"],Rt(P,c)}),h=f[0],d=f[1],p=d===void 0?0:d,v=f[2],g=v===void 0?0:v;a=Ua,u=[h,p,g]}else if(s==="translateY"){var m=er(t)?Ri({"%":t["y%"]},t):{"%":t},p=Rt(o,m);a=Ua,u=[0,p,0]}else if(s==="translateZ"){var g=parseFloat(o);a=Ua,u=[0,0,g]}else if(s==="scale"||s==="scale3d"){var b=ln(o).map(function(P){return parseFloat(P)}),C=b[0],S=b[1],_=S===void 0?C:S,y=b[2],w=y===void 0?1:y;a=ks,u=[C,_,w]}else if(s==="scaleX"){var C=parseFloat(o);a=ks,u=[C,1,1]}else if(s==="scaleY"){var _=parseFloat(o);a=ks,u=[1,_,1]}else if(s==="scaleZ"){var w=parseFloat(o);a=ks,u=[1,1,w]}else if(s==="rotate"||s==="rotateZ"||s==="rotateX"||s==="rotateY"){var x=is(o),E=x.unit,k=x.value,B=E==="rad"?k:k*Math.PI/180;s==="rotate"||s==="rotateZ"?(l="rotateZ",a=F1):s==="rotateX"?a=I1:s==="rotateY"&&(a=L1),u=B}else if(s==="matrix3d")a=Gf,u=ln(o).map(function(P){return parseFloat(P)});else if(s==="matrix"){var T=ln(o).map(function(P){return parseFloat(P)});a=Gf,u=[T[0],T[1],0,0,T[2],T[3],0,0,0,0,1,0,T[4],T[5],0,1]}else l="";return{name:s,functionName:l,value:o,matrixFunction:a,functionValue:u}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Bl=function(e,t){return Bl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Bl(e,t)};function G1(e,t){Bl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Tp=typeof Map=="function"?void 0:function(){var e=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++e)}}(),Pp=function(e){G1(t,e);function t(r){return r===void 0&&(r=[]),e.call(this,r,Tp)||this}return t}(s1);function W1(e,t){return ss(e,t,Tp)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ol=function(){return Ol=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ol.apply(this,arguments)};function H1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}var ya=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(r,n){if(er(r))for(var i in r)this.on(i,r[i]);else this._addEvent(r,n,{});return this},t.off=function(r,n){if(!r)this._events={};else if(er(r))for(var i in r)this.off(i);else if(!n)this._events[r]=[];else{var s=this._events[r];if(s){var o=_r(s,function(a){return a.listener===n});o>-1&&s.splice(o,1)}}return this},t.once=function(r,n){var i=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(s){i._addEvent(r,s,{once:!0})})},t.emit=function(r,n){var i=this;n===void 0&&(n={});var s=this._events[r];if(!r||!s)return!0;var o=!1;return n.eventType=r,n.stop=function(){o=!0},n.currentTarget=this,H1(s).forEach(function(a){a.listener(n),a.once&&i.off(r,a.listener)}),!o},t.trigger=function(r,n){return n===void 0&&(n={}),this.emit(r,n)},t._addEvent=function(r,n,i){var s=this._events;s[r]=s[r]||[];var o=s[r];o.push(Ol({listener:n},i))},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Il=function(e,t){return Il=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Il(e,t)};function V1(e,t){Il(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Pn=function(){return Pn=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Pn.apply(this,arguments)};function j1(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function Wf(e,t){return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}function Ms(e){if(e){if(Me(e))return document.querySelector(e)}else return null;if(Iu(e))return e();if(e instanceof Element)return e;if("current"in e)return e.current;if("value"in e)return e.value}var $1=function(e){V1(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var i=n._currentOptions;n._lock||!i||n.emit("scrollDrag",{next:function(s){n.checkScroll({container:i.container,inputEvent:s})}})},n}var r=t.prototype;return r.dragStart=function(n,i){var s=Ms(i.container);if(!s){this._flag=!1;return}var o=0,a=0,l=0,u=0;if(s===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=s.getBoundingClientRect();o=c.top,a=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:a,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},r.drag=function(n,i){if(clearTimeout(this._timer),!!this._flag){var s=n.clientX,o=n.clientY,a=i.threshold,l=a===void 0?0:a,u=this,c=u._startRect,f=u._startPos;this._currentOptions=i;var h=[0,0];return c.top>o-l?(f[1]>c.top||o<f[1])&&(h[1]=-1):c.top+c.height<o+l&&(f[1]<c.top+c.height||o>f[1])&&(h[1]=1),c.left>s-l?(f[0]>c.left||s<f[0])&&(h[0]=-1):c.left+c.width<s+l&&(f[0]<c.left+c.width||s>f[0])&&(h[0]=1),!h[0]&&!h[1]?!1:this._continueDrag(Pn(Pn({},i),{direction:h,inputEvent:n,isDrag:!0}))}},r.checkScroll=function(n){var i=this;if(this._isWait)return!1;var s=n.prevScrollPos,o=s===void 0?this._prevScrollPos:s,a=n.direction,l=n.throttleTime,u=l===void 0?0:l,c=n.inputEvent,f=n.isDrag,h=this._getScrollPosition(a||[0,0],n),d=h[0]-o[0],p=h[1]-o[1],v=a||[d?Math.abs(d)/d:0,p?Math.abs(p)/p:0];return this._prevScrollPos=h,this._lock=!1,!d&&!p?!1:(this.emit("move",{offsetX:v[0]?d:0,offsetY:v[1]?p:0,inputEvent:c}),u&&f&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},u)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(n,i){var s=i.container,o=i.getScrollPosition,a=o===void 0?j1:o;return a({container:Ms(s),direction:n})},r._continueDrag=function(n){var i=this,s,o=n.container,a=n.direction,l=n.throttleTime,u=n.useScroll,c=n.isDrag,f=n.inputEvent;if(!(!this._flag||c&&this._isWait)){var h=$i(),d=Math.max(l+this._prevTime-h,0);if(d>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},d),!1;this._prevTime=h;var p=this._getScrollPosition(a,n);this._prevScrollPos=p,c&&(this._isWait=!0),u||(this._lock=!0);var v={container:Ms(o),direction:a,inputEvent:f};return(s=n.requestScroll)===null||s===void 0||s.call(n,v),this.emit("scroll",v),this._isWait=!1,u||this.checkScroll(Pn(Pn({},n),{prevScrollPos:p,direction:a,inputEvent:f}))}},r._registerScrollEvent=function(n){this._unregisterScrollEvent();var i=n.checkScrollEvent;if(i){var s=i===!0?Wf:i,o=Ms(n.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=Wf(window,this._onScroll):this._unregister=s(o,this._onScroll)}},r._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},t}(ya);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function X1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function we(e){return xt(e,qt)}function U1(e,t){return e.every(function(r,n){return we(r-t[n])===0})}function Y1(e,t){return!we(e[0]-t[0])&&!we(e[1]-t[1])}function Dp(e){return e.length<3?0:Math.abs(Ky(e.map(function(t,r){var n=e[r+1]||e[0];return t[0]*n[1]-n[0]*t[1]})))/2}function Hf(e,t){var r=t.width,n=t.height,i=t.left,s=t.top,o=pn(e),a=o.minX,l=o.minY,u=o.maxX,c=o.maxY,f=r/(u-a),h=n/(c-l);return e.map(function(d){return[i+(d[0]-a)*f,s+(d[1]-l)*h]})}function pn(e){var t=e.map(function(n){return n[0]}),r=e.map(function(n){return n[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,r)}}function Ll(e,t,r){var n=e[0],i=e[1],s=pn(t),o=s.minX,a=s.maxX,l=[[o,i],[a,i]],u=bo(l[0],l[1]),c=Fl(t),f=[];if(c.forEach(function(p){var v=bo(p[0],p[1]),g=p[0];if(U1(u,v))f.push({pos:e,line:p,type:"line"});else{var m=Rp(Uu(u,v),[l,p]);m.forEach(function(b){p.some(function(C){return Y1(C,b)})?f.push({pos:b,line:p,type:"point"}):we(g[1]-i)!==0&&f.push({pos:b,line:p,type:"intersection"})})}}),Te(f,function(p){return p[0]===n}))return!0;var h=0,d={};return f.forEach(function(p){var v=p.pos,g=p.type,m=p.line;if(!(v[0]>n))if(g==="intersection")++h;else{if(g==="line")return;if(g==="point"){var b=Te(m,function(_){return _[1]!==i}),C=d[v[0]],S=b[1]>i?1:-1;C?C!==S&&++h:d[v[0]]=S}}}),h%2===1}function bo(e,t){var r=e[0],n=e[1],i=t[0],s=t[1],o=i-r,a=s-n;Math.abs(o)<qt&&(o=0),Math.abs(a)<qt&&(a=0);var l=0,u=0,c=0;return o?a?(l=-a/o,u=1,c=-l*r-n):(u=1,c=-n):a&&(l=-1,c=r),[l,u,c]}function Uu(e,t){var r=e[0],n=e[1],i=e[2],s=t[0],o=t[1],a=t[2],l=r===0&&s===0,u=n===0&&o===0,c=[];if(l&&u)return[];if(l){var f=-i/n,h=-a/o;return f!==h?[]:[[-1/0,f],[1/0,f]]}else if(u){var d=-i/r,p=-a/s;return d!==p?[]:[[d,-1/0],[d,1/0]]}else if(r===0){var v=-i/n,g=-(o*v+a)/s;c=[[g,v]]}else if(s===0){var v=-a/o,g=-(n*v+i)/r;c=[[g,v]]}else if(n===0){var g=-i/r,v=-(s*g+a)/o;c=[[g,v]]}else if(o===0){var g=-a/s,v=-(r*g+i)/n;c=[[g,v]]}else{var g=(n*a-o*i)/(o*r-n*s),v=-(r*g+i)/n;c=[[g,v]]}return c.map(function(m){return[m[0],m[1]]})}function Rp(e,t){var r=t.map(function(f){return[0,1].map(function(h){return[Math.min(f[0][h],f[1][h]),Math.max(f[0][h],f[1][h])]})}),n=[];if(e.length===2){var i=e[0],s=i[0],o=i[1];if(we(s-e[1][0])){if(!we(o-e[1][1])){var u=Math.max.apply(Math,r.map(function(f){return f[0][0]})),c=Math.min.apply(Math,r.map(function(f){return f[0][1]}));if(we(u-c)>0)return[];n=[[u,o],[c,o]]}}else{var a=Math.max.apply(Math,r.map(function(f){return f[1][0]})),l=Math.min.apply(Math,r.map(function(f){return f[1][1]}));if(we(a-l)>0)return[];n=[[s,a],[s,l]]}}return n.length||(n=e.filter(function(f){var h=f[0],d=f[1];return r.every(function(p){return 0<=we(h-p[0][0])&&0<=we(p[0][1]-h)&&0<=we(d-p[1][0])&&0<=we(p[1][1]-d)})})),n.map(function(f){return[we(f[0]),we(f[1])]})}function Fl(e){return X1(e.slice(1),[e[0]]).map(function(t,r){return[e[r],t]})}function q1(e,t){var r=e.slice(),n=t.slice();Af(r)===-1&&r.reverse(),Af(n)===-1&&n.reverse();var i=Fl(r),s=Fl(n),o=i.map(function(c){return bo(c[0],c[1])}),a=s.map(function(c){return bo(c[0],c[1])}),l=[];o.forEach(function(c,f){var h=i[f],d=[];a.forEach(function(p,v){var g=Uu(c,p),m=Rp(g,[h,s[v]]);d.push.apply(d,m.map(function(b){return{index1:f,index2:v,pos:b,type:"intersection"}}))}),d.sort(function(p,v){return Sr(h[0],p.pos)-Sr(h[0],v.pos)}),l.push.apply(l,d),Ll(h[1],n)&&l.push({index1:f,index2:-1,pos:h[1],type:"inside"})}),s.forEach(function(c,f){if(Ll(c[1],r)){var h=!1,d=_r(l,function(p){var v=p.index2;return v===f?(h=!0,!1):!!h});d===-1&&(h=!1,d=_r(l,function(p){var v=p.index1,g=p.index2;return v===-1&&g+1===f?(h=!0,!1):!!h})),d===-1?l.push({index1:-1,index2:f,pos:c[1],type:"inside"}):l.splice(d,0,{index1:-1,index2:f,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var f=c.pos,h=f[0]+"x"+f[1];return u[h]?!1:(u[h]=!0,!0)})}function K1(e,t){var r=q1(e,t);return r.map(function(n){var i=n.pos;return i})}function J1(e,t){var r=K1(e,t);return Dp(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zl=function(e,t){return zl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},zl(e,t)};function Z1(e,t){zl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Yt=function(){return Yt=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Yt.apply(this,arguments)};function Q1(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function Ya(e){return Q1([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180}function tb(e){return e.touches&&e.touches.length>=2}function Ts(e){return e?e.touches?rb(e.touches):[Ap(e)]:[]}function eb(e){return e&&(e.type.indexOf("mouse")>-1||"button"in e)}function Vf(e,t,r){var n=r.length,i=Ai(e,n),s=i.clientX,o=i.clientY,a=i.originalClientX,l=i.originalClientY,u=Ai(t,n),c=u.clientX,f=u.clientY,h=Ai(r,n),d=h.clientX,p=h.clientY,v=s-c,g=o-f,m=s-d,b=o-p;return{clientX:a,clientY:l,deltaX:v,deltaY:g,distX:m,distY:b}}function qa(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function rb(e){for(var t=Math.min(e.length,2),r=[],n=0;n<t;++n)r.push(Ap(e[n]));return r}function Ap(e){return{clientX:e.clientX,clientY:e.clientY}}function Ai(e,t){t===void 0&&(t=e.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(e.length,t),i=0;i<n;++i){var s=e[i];r.originalClientX+="originalClientX"in s?s.originalClientX:s.clientX,r.originalClientY+="originalClientY"in s?s.originalClientY:s.clientY,r.clientX+=s.clientX,r.clientY+=s.clientY}return t?{clientX:r.clientX/t,clientY:r.clientY/t,originalClientX:r.originalClientX/t,originalClientY:r.originalClientY/t}:r}var Ka=function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),Ya(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),Ya(t)-Ya(this.startClients)},e.prototype.getPosition=function(t,r){t===void 0&&(t=this.prevClients);var n=Vf(t||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,s=n.deltaY;return this.movement+=Math.sqrt(i*i+s*s),this.prevClients=t,n},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var r=this.prevClients,n=this.startClients,i=Math.min(this.length,r.length),s=[],o=0;o<i;++o)s[o]=Vf([t[o]],[r[o]],[n[o]]);return s},e.prototype.getMovement=function(t){var r=this.movement;if(!t)return r;var n=Ai(t,this.length),i=Ai(this.prevClients,this.length),s=n.clientX-i.clientX,o=n.clientY-i.clientY;return Math.sqrt(s*s+o*o)+r},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),qa(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),qa(t)/qa(this.startClients)},e.prototype.move=function(t,r){this.startClients.forEach(function(n){n.clientX-=t,n.clientY-=r}),this.prevClients.forEach(function(n){n.clientX-=t,n.clientY-=r})},e}(),jf=["textarea","input"],nb=function(e){Z1(t,e);function t(r,n){n===void 0&&(n={});var i=e.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(h,d){if(d===void 0&&(d=!0),!(!i.flag&&h.cancelable===!1)){var p=h.type.indexOf("drag")>=-1;if(!(i.flag&&p)){i._isDragAPI=!0;var v=i.options,g=v.container,m=v.pinchOutside,b=v.preventWheelClick,C=v.preventRightClick,S=v.preventDefault,_=v.checkInput,y=v.dragFocusedInput,w=v.preventClickEventOnDragStart,x=v.preventClickEventOnDrag,E=v.preventClickEventByCondition,k=i._useTouch,B=!i.flag;if(i._isSecondaryButton=h.which===3||h.button===2,b&&(h.which===2||h.button===1)||C&&(h.which===3||h.button===2))return i.stop(),!1;if(B){var T=i._window.document.activeElement,P=h.target;if(P){var O=P.tagName.toLowerCase(),L=jf.indexOf(O)>-1,W=P.isContentEditable;if(L||W){if(_||!y&&T===P)return!1;if(T&&(T===P||W&&T.isContentEditable&&T.contains(P)))if(y)P.blur();else return!1}else if((S||h.type==="touchstart")&&T){var H=T.tagName.toLowerCase();(T.isContentEditable||jf.indexOf(H)>-1)&&T.blur()}(w||x||E)&&ie(i._window,"click",i._onClick,!0)}i.clientStores=[new Ka(Ts(h))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=d,i._dragFlag=!0,i._prevInputEvent=h,i.data={},i.doubleFlag=$i()-i.prevTime<200,i._isMouseEvent=eb(h),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var z=i._preventMouseEvent||i.emit("dragStart",Yt(Yt({data:i.data,datas:i.data,inputEvent:h,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:d,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){h.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));z===!1&&i.stop(),i._isMouseEvent&&i.flag&&S&&h.preventDefault()}if(!i.flag)return!1;var Y=0;if(B?(i._attchDragEvent(),k&&m&&(Y=setTimeout(function(){ie(g,"touchstart",i.onDragStart,{passive:!1})}))):k&&m&&Zt(g,"touchstart",i.onDragStart),i.flag&&tb(h)){if(clearTimeout(Y),B&&h.touches.length!==h.changedTouches.length)return;i.pinchFlag||i.onPinchStart(h)}}}},i.onDrag=function(h,d){if(i.flag){var p=i.options.preventDefault;!i._isMouseEvent&&p&&h.preventDefault(),i._prevInputEvent=h;var v=Ts(h),g=i.moveClients(v,h,!1);if(i._dragFlag){if(i.pinchFlag||g.deltaX||g.deltaY){var m=i._preventMouseEvent||i.emit("drag",Yt(Yt({},g),{isScroll:!!d,inputEvent:h}));if(m===!1){i.stop();return}}i.pinchFlag&&i.onPinch(h,v)}i.getCurrentStore().getPosition(v,!0)}},i.onDragEnd=function(h){if(i.flag){var d=i.options,p=d.pinchOutside,v=d.container,g=d.preventClickEventOnDrag,m=d.preventClickEventOnDragStart,b=d.preventClickEventByCondition,C=i.isDrag;(g||m||b)&&requestAnimationFrame(function(){i._allowClickEvent()}),!b&&!m&&g&&!C&&i._allowClickEvent(),i._useTouch&&p&&Zt(v,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(h);var S=h!=null&&h.touches?Ts(h):[],_=S.length;_===0||!i.options.keepDragging?i.flag=!1:i._addStore(new Ka(S));var y=i._getPosition(),w=$i(),x=!C&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=C||x?0:w,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Yt({data:i.data,datas:i.data,isDouble:x,isDrag:C,isClick:!C,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:h,isTrusted:i._isTrusted},y)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Zt(i._window,"click",i._onClick,!0)},i._onClick=function(h){i._allowClickEvent(),i._allowMouseEvent();var d=i.options.preventClickEventByCondition;d!=null&&d(h)||(h.stopPropagation(),h.preventDefault())},i._onContextMenu=function(h){var d=i.options;d.preventRightClick?i.onDragEnd(h):h.preventDefault()},i._passCallback=function(){};var s=[].concat(r),o=s[0];i._window=sp(o)?o:Hr(o),i.options=Yt({checkInput:!1,container:o&&!("document"in o)?Hr(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var a=i.options,l=a.container,u=a.events,c=a.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=s,i._useDrag&&s.forEach(function(h){ie(h,"dragstart",i.onDragStart)}),i._useMouse&&(s.forEach(function(h){ie(h,"mousedown",i.onDragStart),ie(h,"mousemove",i._passCallback)}),ie(l,"contextmenu",i._onContextMenu)),c&&ie(Hr(),"blur",i.onBlur),i._useTouch){var f={passive:!1};s.forEach(function(h){ie(h,"touchstart",i.onDragStart,f),ie(h,"touchmove",i._passCallback,f)})}return i}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(n,i){return n+i.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(r,n,i,s){s===void 0&&(s=!0),this.flag&&(this.clientStores[0].move(r,n),s&&this.onDrag(i,!0))},t.prototype.move=function(r,n){var i=r[0],s=r[1],o=this.getCurrentStore(),a=o.prevClients;return this.moveClients(a.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+i,clientY:c+s,originalClientX:u,originalClientY:c}}),n,!0)},t.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},t.prototype.setEventData=function(r){var n=this.data;for(var i in r)n[i]=r[i];return this},t.prototype.setEventDatas=function(r){return this.setEventData(r)},t.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),Yt(Yt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var r=this,n=this.targets,i=this.options.container;this.off(),Zt(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(s){Zt(s,"dragstart",r.onDragStart)}),this._useMouse&&(n.forEach(function(s){Zt(s,"mousedown",r.onDragStart)}),Zt(i,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(s){Zt(s,"touchstart",r.onDragStart)}),Zt(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(r){var n=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var s=new Ka(Ts(r));this.pinchFlag=!0,this._addStore(s);var o=this.emit("pinchStart",Yt(Yt({data:this.data,datas:this.data,angle:s.getAngle(),touches:this.getCurrentStore().getPositions()},s.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(r,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Yt(Yt({data:this.data,datas:this.data,movement:this.getMovement(n),angle:i.getAngle(n),rotation:i.getRotation(n),touches:i.getPositions(n),scale:i.getScale(n),distance:i.getDistance(n)},i.getPosition(n)),{inputEvent:r,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(r){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Yt(Yt({data:this.data,datas:this.data,isPinch:n,touches:i.getPositions()},i.getPosition()),{inputEvent:r}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(r,n,i){var s=this._getPosition(r,i),o=this.isDrag;(s.deltaX||s.deltaY)&&(this.isDrag=!0);var a=!1;return!o&&this.isDrag&&(a=!0),Yt(Yt({data:this.data,datas:this.data},s),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:a})},t.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},t.prototype._getPosition=function(r,n){var i=this.getCurrentStore(),s=i.getPosition(r,n),o=this.clientStores.slice(1).reduce(function(u,c){var f=c.getPosition();return u.distX+=f.distX,u.distY+=f.distY,u},s),a=o.distX,l=o.distY;return Yt(Yt({},s),{distX:a,distY:l})},t.prototype._attchDragEvent=function(){var r=this._window,n=this.options.container,i={passive:!1};this._isDragAPI&&(ie(n,"dragover",this.onDrag,i),ie(r,"dragend",this.onDragEnd)),this._useMouse&&(ie(n,"mousemove",this.onDrag),ie(r,"mouseup",this.onDragEnd)),this._useTouch&&(ie(n,"touchmove",this.onDrag,i),ie(r,"touchend",this.onDragEnd,i),ie(r,"touchcancel",this.onDragEnd,i))},t.prototype._dettachDragEvent=function(){var r=this._window,n=this.options.container;this._isDragAPI&&(Zt(n,"dragover",this.onDrag),Zt(r,"dragend",this.onDragEnd)),this._useMouse&&(Zt(n,"mousemove",this.onDrag),Zt(r,"mouseup",this.onDragEnd)),this._useTouch&&(Zt(n,"touchstart",this.onDragStart),Zt(n,"touchmove",this.onDrag),Zt(r,"touchend",this.onDragEnd),Zt(r,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t}(ya);function ib(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}var sb=ib;function ob(e){return sb(e).toString(36)}function ab(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function lb(e,t,r){return r.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,i){var s=i.trim();return(s?ln(s):[""]).map(function(o){var a=o.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(e))):a?".".concat(e," ").concat(a):".".concat(e)}).join(", ")+" {"})}function ub(e,t,r,n,i){var s=ni(n),o=s.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",e),o.setAttribute("data-styled-count","1"),r.nonce&&o.setAttribute("nonce",r.nonce),o.innerHTML=lb(e,t,r),(i||s.head||s.body).appendChild(o),o}function cb(e){var t="rCS"+ob(e);return{className:t,inject:function(r,n){n===void 0&&(n={});var i=ab(r),s=(i||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!s)s=ub(t,e,n,r,i);else{var o=parseFloat(s.getAttribute("data-styled-count"))||0;s.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var a,l=parseFloat(s.getAttribute("data-styled-count"))||0;l<=1?(s.remove?s.remove():(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=null):s.setAttribute("data-styled-count","".concat(l-1))}}}}}var Nl=function(){return Nl=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Nl.apply(this,arguments)};function fb(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Bp(e,t){var r=cb(t),n=r.className;return u1(function(i,s){var o=i.className,a=o===void 0?"":o;i.cspNonce;var l=fb(i,["className","cspNonce"]),u=S1();return w1(s,function(){return u.current},[]),gp(function(){var c=r.inject(u.current,{nonce:i.cspNonce});return function(){c.destroy()}},[]),Qe(e,Nl({ref:u,"data-styled-id":n,className:"".concat(a," ").concat(n)},l))})}var Gl=function(e,t){return Gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Gl(e,t)};function cs(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Gl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var R=function(){return R=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},R.apply(this,arguments)};function hb(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function db(e,t,r,n){var i=arguments.length,s=i<3?t:n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function pb(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Q(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function fs(e,t){return R({events:[],props:[],name:e},t)}var vb=["n","w","s","e"],Yu=["n","w","s","e","nw","ne","sw","se"];function gb(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*e,'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function mb(e){var t=gb(1,e),r=Math.round(e/45)*45%180,n="ns-resize";return r===135?n="nwse-resize":r===45?n="nesw-resize":r===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(t,"') 16 16, ").concat(n,";")}var si=T1(),Op=si.browser.webkit,Ip=Op&&function(){var e=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1}(),Lp=si.browser.name,Fp=parseInt(si.browser.version,10),yb=Lp==="chrome",bb=si.browser.chromium,xb=parseInt(si.browser.chromiumVersion,10)||0,Cb=yb&&Fp>=109||bb&&xb>=109,Sb=Lp==="firefox",wb=parseInt(si.browser.webkitVersion,10)>=612||Fp>=15,qu="moveable-",_b=Yu.map(function(e){var t="",r="",n="center",i="center",s="calc(var(--moveable-control-padding, 20) * -1px)";return e.indexOf("n")>-1&&(t="top: ".concat(s,";"),i="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",i="top"),e.indexOf("w")>-1&&(r="left: ".concat(s,";"),n="right"),e.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(r).concat(t,`
        transform-origin: `).concat(n," ").concat(i,`;
    }`)}).join(`
`),Eb=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(_b,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
`).concat(mb(e),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Ip?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),kb=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Wl=1e-4,Ce=1e-7,Ps=1e-9,Hl=Math.pow(10,10),$f=-Hl,Mb={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Ku={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},zp={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Np=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function hs(e,t,r,n,i,s){var o,a;s===void 0&&(s="draggable");var l=(a=(o=t.gestos[s])===null||o===void 0?void 0:o.move(r,e.inputEvent))!==null&&a!==void 0?a:{},u=l.originalDatas||l.datas,c=u[s]||(u[s]={});return R(R({},l),{isPinch:!!n,parentEvent:!0,datas:c,originalDatas:e.originalDatas})}var Yn=function(){function e(t){var r;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[t]={},r)}return e.prototype.dragStart=function(t,r){this.isDrag=!1,this.isFlag=!1;var n=r.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),R(R({},this.move(t,r.inputEvent)),{type:"dragstart"})},e.prototype.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},e.prototype.move=function(t,r){var n,i,s=!1;if(!this.isFlag)this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],i=t[1],this.isFlag=!0;else{var o=this.isDrag;n=this.prevX+t[0],i=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!o&&this.isDrag&&(s=!0)}return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:r,isFirstDrag:s,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e}();function Nn(e,t,r,n){var i=e.length===16,s=i?4:3,o=xn(e,r,n,s),a=A(o,4),l=A(a[0],2),u=l[0],c=l[1],f=A(a[1],2),h=f[0],d=f[1],p=A(a[2],2),v=p[0],g=p[1],m=A(a[3],2),b=m[0],C=m[1],S=A(Vt(e,t,s),2),_=S[0],y=S[1],w=Math.min(u,h,v,b),x=Math.min(c,d,g,C),E=Math.max(u,h,v,b),k=Math.max(c,d,g,C);u=u-w||0,h=h-w||0,v=v-w||0,b=b-w||0,c=c-x||0,d=d-x||0,g=g-x||0,C=C-x||0,_=_-w||0,y=y-x||0;var B=e[0],T=e[s+1],P=ye(B*T);return{left:w,top:x,right:E,bottom:k,origin:[_,y],pos1:[u,c],pos2:[h,d],pos3:[v,g],pos4:[b,C],direction:P}}function Gp(e,t){var r=t.clientX,n=t.clientY,i=t.datas,s=e.state,o=s.moveableClientRect,a=s.rootMatrix,l=s.is3d,u=s.pos1,c=o.left,f=o.top,h=l?4:3,d=A(vt(Jn(a,[r-c,n-f],h),u),2),p=d[0],v=d[1],g=A(gr({datas:i,distX:p,distY:v}),2),m=g[0],b=g[1];return[m,b]}function bn(e,t){var r=t.datas,n=e.state,i=n.allMatrix,s=n.beforeMatrix,o=n.is3d,a=n.left,l=n.top,u=n.origin,c=n.offsetMatrix,f=n.targetMatrix,h=n.transformOrigin,d=o?4:3;r.is3d=o,r.matrix=i,r.targetMatrix=f,r.beforeMatrix=s,r.offsetMatrix=c,r.transformOrigin=h,r.inverseMatrix=pr(i,d),r.inverseBeforeMatrix=pr(s,d),r.absoluteOrigin=hn(Mt([a,l],u),d),r.startDragBeforeDist=de(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=de(r.inverseMatrix,r.absoluteOrigin,d)}function Tb(e){return Nn(e.datas.beforeTransform,[50,50],100,100).direction}function ba(e,t,r){var n=t.datas,i=t.originalDatas.beforeRenderable,s=n.transformIndex,o=i.nextTransforms,a=o.length,l=i.nextTransformAppendedIndexes,u=-1;s===-1?(r==="translate"?u=0:r==="rotate"&&(u=_r(o,function(d){return d.match(/scale\(/g)})),u===-1&&(u=o.length),n.transformIndex=u):Te(l,function(d){return d.index===s&&d.functionName===r})?u=s:u=s+l.filter(function(d){return d.index<s}).length;var c=tC(o,e.state,u),f=c.targetFunction,h=r==="rotate"?"rotateZ":r;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,f.functionName===h?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):a>u&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=Q(Q([],A(l),!1),[{functionName:r,index:u,isAppend:!0}],!1))}function xa(e,t,r){return"".concat(e.beforeFunctionTexts.join(" ")," ").concat(e.isAppendTransform?r:t," ").concat(e.afterFunctionTexts.join(" "))}function Pb(e){var t=e.datas,r=e.distX,n=e.distY,i=A(Hp({datas:t,distX:r,distY:n}),2),s=i[0],o=i[1],a=Wp(t,B1([s,o],4));return de(a,hn([0,0,0],4),4)}function Wp(e,t,r){var n=e.beforeTransform,i=e.afterTransform,s=e.beforeTransform2,o=e.afterTransform2,a=e.targetAllTransform,l=r?Bt(a,t,4):Bt(t,a,4),u=Bt(pr(r?s:n,4),l,4),c=Bt(u,pr(r?o:i,4),4);return c}function Hp(e){var t=e.datas,r=e.distX,n=e.distY,i=t.inverseBeforeMatrix,s=t.is3d,o=t.startDragBeforeDist,a=t.absoluteOrigin,l=s?4:3;return vt(de(i,Mt(a,[r,n]),l),o)}function gr(e,t){var r=e.datas,n=e.distX,i=e.distY,s=r.inverseBeforeMatrix,o=r.inverseMatrix,a=r.is3d,l=r.startDragBeforeDist,u=r.startDragDist,c=r.absoluteOrigin,f=a?4:3;return vt(de(t?s:o,Mt(c,[n,i]),f),t?l:u)}function Db(e,t){var r=e.datas,n=e.distX,i=e.distY;r.beforeMatrix;var s=r.matrix,o=r.is3d;r.startDragBeforeDist;var a=r.startDragDist,l=r.absoluteOrigin,u=o?4:3;return vt(de(s,Mt(a,[n,i]),u),l)}function Rb(e,t,r,n,i,s){return n===void 0&&(n=t),i===void 0&&(i=r),s===void 0&&(s=[0,0]),e?e.map(function(o,a){var l=is(o),u=l.value,c=l.unit,f=a?i:n,h=a?r:t;if(o==="%"||isNaN(u)){var d=f?s[a]/f:0;return h*d}else if(c!=="%")return u;return h*u/100}):s}function Vp(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function Ab(e,t){return Vp(t).map(function(r){return e[r]})}function Ja(e,t){var r=(t+1)/2;return[go(e[0][0],e[1][0],r,1-r),go(e[0][1],e[1][1],r,1-r)]}function ee(e,t){var r=Ja([e[0],e[1]],t[0]),n=Ja([e[2],e[3]],t[0]);return Ja([r,n],t[1])}function Bb(e,t,r,n,i,s){var o=xn(t,r,n,i),a=ee(o,s),l=e[0]-a[0],u=e[1]-a[1];return[l,u]}function ds(e,t,r,n){return Bt(e,Oi(t,n,r),n)}function Ob(e,t,r,n){var i=e.transformOrigin,s=e.offsetMatrix,o=e.is3d,a=o?4:3,l;if(Me(r)){var u=t.beforeTransform,c=t.afterTransform;n?l=rr(Ui(r),4,a):l=rr(Bt(Bt(u,Ui([r]),4),c,4),4,a)}else l=r;return ds(s,l,i,a)}function Ib(e,t){var r=e.transformOrigin,n=e.offsetMatrix,i=e.is3d,s=e.targetMatrix,o=e.targetAllTransform,a=i?4:3;return ds(n,Bt(o||s,$u(t,a),a),r,a)}function Ca(e,t){var r=oi(t);return{setTransform:function(n,i){i===void 0&&(i=-1),r.startTransforms=Jt(n)?n:$r(n),Vl(e,t,i)},setTransformIndex:function(n){Vl(e,t,n)}}}function Sa(e,t,r){var n=oi(t),i=n.startTransforms;Vl(e,t,_r(i,function(s){return s.indexOf("".concat(r,"("))===0}))}function Vl(e,t,r){var n=oi(t),i=t.datas;if(i.transformIndex=r,r!==-1){var s=n.startTransforms[r];if(s){var o=e.state,a=Un([s],{"x%":function(l){return l/100*o.offsetWidth},"y%":function(l){return l/100*o.offsetHeight}});i.startValue=a[0].functionValue}}}function Ju(e,t){var r=oi(e);r.nextTransforms=$r(t)}function oi(e){return e.originalDatas.beforeRenderable}function xo(e){var t=e.originalDatas.beforeRenderable;return t.nextTransforms}function Ds(e){return(xo(e)||[]).join(" ")}function Rs(e){return oi(e).nextStyle}function jp(e,t,r,n,i){Ju(i,t);var s=me.drag(e,hs(i,e.state,r,n)),o=s?s.transform:t;return R(R({transform:t,drag:s},xe({transform:o},i)),{afterTransform:o})}function Zu(e,t,r,n,i,s){var o=Ob(e.state,i,t,s),a=zb(e,r,n,o);return a}function $p(e,t,r,n,i,s,o){var a=Zu(e,t,r,i,s,o),l=e.state,u=l.left,c=l.top,f=e.props.groupable,h=f?u:0,d=f?c:0,p=vt(n,a);return vt(p,[h,d])}function Lb(e,t,r,n,i,s,o){var a=$p(e,t,r,n,i,s,o);return a}function Fb(e,t,r){return[t?-1+e[0]/(t/2):0,r?-1+e[1]/(r/2):0]}function zb(e,t,r,n){n===void 0&&(n=e.state.allMatrix);var i=e.state,s=i.width,o=i.height,a=i.is3d,l=a?4:3,u=[s/2*(1+t[0])+r[0],o/2*(1+t[1])+r[1]];return Vt(n,u,l)}function Nb(e,t,r){var n=r.fixedDirection,i=r.fixedPosition,s=r.fixedOffset;return $p(e,"rotate(".concat(t,"deg)"),n,i,s,r)}function Gb(e,t,r,n,i,s){var o=e.props.groupable,a=e.state,l=a.transformOrigin,u=a.offsetMatrix,c=a.is3d,f=a.width,h=a.height,d=a.left,p=a.top,v=s.fixedDirection,g=s.nextTargetMatrix||a.targetMatrix,m=c?4:3,b=Rb(i,t,r,f,h,l),C=o?d:0,S=o?p:0,_=ds(u,g,b,m),y=Bb(n,_,t,r,m,v);return vt(y,[C,S])}function Wb(e,t){return ee(We(e.state),t)}function Hb(e,t){var r=e.targetGesto,n=e.controlGesto,i;return r!=null&&r.isFlag()&&(i=r.getEventData()[t]),!i&&(n!=null&&n.isFlag())&&(i=n.getEventData()[t]),i||{}}function Vb(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function jb(e){var t=e("scale"),r=e("rotate"),n=e("translate"),i=[];return n&&n!=="0px"&&n!=="none"&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&i.push("rotate(".concat(r,")")),t&&t!=="1"&&t!=="none"&&i.push("scale(".concat(t.split(/\s+/).join(","),")")),i}function Xp(e,t,r){for(var n=e,i=[],s=zu(e)||Yr(e),o=!r&&e===t||e===s,a=o,l=!1,u=3,c,f,h,d=!1,p=qi(t,t,!0).offsetParent,v=1;n&&!a;){a=o;var g=Pe(n),m=g("position"),b=gv(n),C=m==="fixed",S=jb(g),_=O1(Wx(b)),y=void 0,w=!1,x=!1,E=0,k=0,B=0,T=0,P={hasTransform:!1,fixedContainer:null};C&&(d=!0,P=Xx(n),p=P.fixedContainer);var O=_.length;!l&&(O===16||S.length)&&(l=!0,u=4,ql(i),h&&(h=rr(h,3,4))),l&&O===9&&(_=rr(_,3,4));var L=$x(n,e),W=L.tagName,H=L.hasOffset,z=L.isSVG,Y=L.origin,J=L.targetOrigin,G=L.offset,tt=A(G,2),ot=tt[0],et=tt[1];W==="svg"&&!n.ownerSVGElement&&h&&(i.push({type:"target",target:n,matrix:Ux(n,u)}),i.push({type:"offset",target:n,matrix:zt(u)}));var st=parseFloat(g("zoom"))||1;if(C)y=P.fixedContainer,w=!0;else{var K=qi(n,t,!1,!0,g),at=K.offsetZoom;if(y=K.offsetParent,w=K.isEnd,x=K.isStatic,v*=at,(K.isCustomElement||at!==1)&&x)ot-=y.offsetLeft,et-=y.offsetTop;else if(Sb||Cb){var ft=K.parentSlotElement;if(ft){for(var mt=y,wt=0,nt=0;mt&&Vb(mt);)wt+=mt.offsetLeft,nt+=mt.offsetTop,mt=mt.offsetParent;ot-=wt,et-=nt}}}if(Op&&!wb&&H&&!z&&x&&(m==="relative"||m==="static")&&(ot-=y.offsetLeft,et-=y.offsetTop,o=o||w),C)H&&P.hasTransform&&(B=y.clientLeft,T=y.clientTop);else if(H&&p!==y&&(E=y.clientLeft,k=y.clientTop),H&&y===s){var ht=mv(n,!1);ot+=ht[0],et+=ht[1]}if(i.push({type:"target",target:n,matrix:Oi(_,u,Y)}),S.length&&(i.push({type:"offset",target:n,matrix:zt(u)}),i.push({type:"target",target:n,matrix:Oi(Ui(S),u,Y)})),H){var M=n===e,D=M?0:n.scrollLeft,I=M?0:n.scrollTop;i.push({type:"offset",target:n,matrix:dn([ot-D+E-B,et-I+k-T],u)})}else i.push({type:"offset",target:n,origin:Y});if(st!==1&&i.push({type:"zoom",target:n,matrix:Oi($u([st,st],u),u,[0,0])}),h||(h=_),c||(c=Y),f||(f=J),a||C)break;n=y,o=w,(!r||n===s)&&(a=o)}return h||(h=zt(u)),c||(c=[0,0]),f||(f=[0,0]),{zoom:v,offsetContainer:p,matrixes:i,targetMatrix:h,transformOrigin:c,targetOrigin:f,is3d:l,hasFixed:d}}var en=null,rn=null,Dn=null;function qn(e){e?(window.Map&&(en=new Map,rn=new Map),Dn=[]):(en=null,Dn=null,rn=null)}function $b(e){var t=rn==null?void 0:rn.get(e);if(t)return t;var r=Ii(e,!0);return rn&&rn.set(e,r),r}function Xb(e,t){if(Dn){var r=Te(Dn,function(i){return i[0][0]==e&&i[0][1]==t});if(r)return r[1]}var n=Xp(e,t,!0);return Dn&&Dn.push([[e,t],n]),n}function Pe(e){var t=en==null?void 0:en.get(e);if(!t){var r=Hr(e).getComputedStyle(e);if(!en)return function(s){return r[s]};t={style:r,cached:{}},en.set(e,t)}var n=t.cached,i=t.style;return function(s){return s in n||(n[s]=i[s]),n[s]}}function tr(e,t,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var s=i.childDatas;return e.moveables.map(function(o,a){return s[a]=s[a]||{},s[a][t]=s[a][t]||{},R(R({},r),{isRequestChild:!0,datas:s[a][t],originalDatas:s[a]})})}function Za(e,t,r,n,i,s,o){var a=!!r.match(/Start$/g),l=!!r.match(/End$/g),u=i.isPinch,c=i.datas,f=tr(e,t.name,i),h=e.moveables,d=[],p=f.map(function(v,g){var m=h[g],b=m.state,C=b.gestos,S=v;if(a)S=new Yn(o).dragStart(n,v),d.push(S);else{if(C[o]||(C[o]=c.childGestos[g]),!C[o])return;S=hs(v,b,n,u,s,o),d.push(S)}var _=t[r](m,R(R({},S),{parentFlag:!0}));return l&&(C[o]=null),_});return a&&(c.childGestos=h.map(function(v){return v.state.gestos[o]})),{eventParams:p,childEvents:d}}function wr(e,t,r,n,i,s){i===void 0&&(i=function(c,f){return f});var o=!!r.match(/End$/g),a=tr(e,t.name,n),l=e.moveables,u=a.map(function(c,f){var h=l[f],d=c;d=i(h,c);var p=t[r](h,R(R({},d),{parentFlag:!0}));return p&&s&&s(h,c,p,f),o&&(h.state.gestos={}),p});return u}function Co(e,t,r,n){var i=r.fixedDirection,s=r.fixedPosition,o=n.datas.startPositions||We(t.state),a=ee(o,i),l=A(de(us(-e.rotation/180*Math.PI,3),[a[0]-s[0],a[1]-s[1],1],3),2),u=l[0],c=l[1];return n.datas.originalX=u,n.datas.originalY=c,n}function Up(e,t,r,n){var i=e.getState(),s=i.renderPoses,o=i.rotation,a=i.direction,l=vn(e.props,t).zoom,u=Bi(o/Math.PI*180),c={},f=e.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var h=f.renderDirectionMap;r.forEach(function(p){var v=p.dir;c[v]=!0});var d=ye(a);return r.map(function(p){var v=p.data,g=p.classNames,m=p.dir,b=Ku[m];if(!b||!c[m])return null;h[m]=!0;var C=(xt(u,15)+d*zp[m]+720)%180,S={};return Er(v).forEach(function(_){S["data-".concat(_)]=v[_]}),n.createElement("div",R({className:pt.apply(void 0,Q(["control","direction",m,t],A(g),!1)),"data-rotation":C,"data-direction":m},S,{key:"direction-".concat(m),style:Eo.apply(void 0,Q([o,l],A(b.map(function(_){return s[_]})),!1))}))})}function Yp(e,t,r,n){var i=vn(e.props,r),s=i.renderDirections,o=s===void 0?t:s,a=i.displayAroundControls;if(!o)return[];var l=o===!0?Yu:o;return Q(Q([],A(a?Zp(e,n,r,l):[]),!1),A(Up(e,r,l.map(function(u){return{data:{},classNames:[],dir:u}}),n)),!1)}function Yi(e,t,r,n,i,s){for(var o=[],a=6;a<arguments.length;a++)o[a-6]=arguments[a];var l=Xt(r,n),u=t?xt(l/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(s),className:pt.apply(void 0,Q(["line","direction",t?"edge":"",t],A(o),!1)),"data-rotation":u,"data-line-key":s,"data-direction":t,style:pi(r,n,i,l)})}function qp(e,t,r,n,i){var s=r===!0?vb:r;return s.map(function(o,a){var l=A(Ku[o],2),u=l[0],c=l[1];if(c!=null)return Yi(e,o,n[u],n[c],i,"".concat(t,"Edge").concat(a),t)}).filter(Boolean)}function Kp(e){return function(t,r){var n=vn(t.props,e).edge;return n&&(n===!0||n.length)?Q(Q([],A(qp(r,e,n,t.getState().renderPoses,t.props.zoom)),!1),A(Ub(t,e,r)),!1):Jp(t,e,r)}}function Jp(e,t,r){return Yp(e,Yu,t,r)}function Ub(e,t,r){return Yp(e,["nw","ne","sw","se"],t,r)}function Zp(e,t,r,n){var i=e.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var s=e.getState(),o=s.renderPoses,a=s.rotation,l=s.direction,u=i.renderDirectionMap,c=e.props.zoom,f=ye(l),h=a/Math.PI*180;return(n||Er(u)).map(function(d){var p=Ku[d];if(!p)return null;var v=(xt(h,15)+f*zp[d]+720)%180,g=["around-control"];return r&&g.push("direction",r),t.createElement("div",{className:pt.apply(void 0,Q([],A(g),!1)),"data-rotation":v,"data-direction":d,key:"direction-around-".concat(d),style:Eo.apply(void 0,Q([a,c],A(p.map(function(m){return o[m]})),!1))})})}function Qu(e,t,r){var n=e||{},i=n.position,s=i===void 0?"client":i,o=n.left,a=o===void 0?-1/0:o,l=n.top,u=l===void 0?-1/0:l,c=n.right,f=c===void 0?1/0:c,h=n.bottom,d=h===void 0?1/0:h,p={position:s,left:a,top:u,right:f,bottom:d};return{vertical:Xf(p,t,!0),horizontal:Xf(p,r,!1)}}function wa(e,t){var r=e.state,n=r.containerClientRect,i=n.clientHeight,s=n.clientWidth,o=n.clientLeft,a=n.clientTop,l=r.snapOffset,u=l.left,c=l.top,f=l.right,h=l.bottom,d=t||e.props.bounds||{},p=d.position||"client",v=p==="css",g=d.left,m=g===void 0?-1/0:g,b=d.top,C=b===void 0?-1/0:b,S=d.right,_=S===void 0?v?-1/0:1/0:S,y=d.bottom,w=y===void 0?v?-1/0:1/0:y;return v&&(_=s+f-u-_,w=i+h-c-w),{left:m+u-o,right:_+u-o,top:C+c-a,bottom:w+c-a}}function Yb(e,t,r){var n=wa(e),i=n.left,s=n.top,o=n.right,a=n.bottom,l=A(r,2),u=l[0],c=l[1],f=A(vt(r,t),2),h=f[0],d=f[1];U(h)<Ce&&(h=0),U(d)<Ce&&(d=0);var p=d>0,v=h>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(h===0&&d===0)return{vertical:g,horizontal:m};if(h===0)p?a<c&&(m.pos=a,m.offset=c-a):s>c&&(m.pos=s,m.offset=c-s);else if(d===0)v?o<u&&(g.pos=o,g.offset=u-o):i>u&&(g.pos=i,g.offset=u-i);else{var b=d/h,C=r[1]-b*u,S=0,_=0,y=!1;v&&o<=u?(S=b*o+C,_=o,y=!0):!v&&u<=i&&(S=b*i+C,_=i,y=!0),y&&(S<s||S>a)&&(y=!1),y||(p&&a<=c?(S=a,_=(S-C)/b,y=!0):!p&&c<=s&&(S=s,_=(S-C)/b,y=!0)),y&&(g.isBound=!0,g.pos=_,g.offset=u-_,m.isBound=!0,m.pos=S,m.offset=c-S)}return{vertical:g,horizontal:m}}function Xf(e,t,r){var n=e[r?"left":"top"],i=e[r?"right":"bottom"],s=Math.min.apply(Math,Q([],A(t),!1)),o=Math.max.apply(Math,Q([],A(t),!1)),a=[];return n+1>s&&a.push({direction:"start",isBound:!0,offset:s-n,pos:n}),i-1<o&&a.push({direction:"end",isBound:!0,offset:o-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(l,u){return U(u.offset)-U(l.offset)})}function Uf(e,t,r){var n=r?e.map(function(i){return ls(i,r)}):e;return n.some(function(i){return i[0]<t.left&&U(i[0]-t.left)>.1||i[0]>t.right&&U(i[0]-t.right)>.1||i[1]<t.top&&U(i[1]-t.top)>.1||i[1]>t.bottom&&U(i[1]-t.bottom)>.1})}function qb(e,t,r){var n=Ge(e),i=Math.sqrt(n*n-t*t)||0;return[i,-i].sort(function(s,o){return U(s-e[r?0:1])-U(o-e[r?0:1])}).map(function(s){return Xt([0,0],r?[s,t]:[t,s])})}function Kb(e,t,r,n,i){if(!e.props.bounds)return[];var s=i*Math.PI/180,o=wa(e),a=o.left,l=o.top,u=o.right,c=o.bottom,f=a-n[0],h=u-n[0],d=l-n[1],p=c-n[1],v={left:f,top:d,right:h,bottom:p};if(!Uf(r,v,0))return[];var g=[];return[[f,0],[h,0],[d,1],[p,1]].forEach(function(m){var b=A(m,2),C=b[0],S=b[1];r.forEach(function(_){var y=Xt([0,0],_);g.push.apply(g,Q([],A(qb(_,C,S).map(function(w){return s+w-y}).filter(function(w){return!Uf(t,v,w)}).map(function(w){return xt(w*180/Math.PI,Ce)})),!1))})}),g}var Jb=["left","right","center"],Zb=["top","bottom","middle"],Yf={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Xr={start:"left",end:"right",center:"center"},Ur={start:"top",end:"bottom",center:"middle"};function Rn(){return{left:!1,top:!1,right:!1,bottom:!1}}function ai(e,t){var r=e.props,n=r.snappable,i=r.bounds,s=r.innerBounds,o=r.verticalGuidelines,a=r.horizontalGuidelines,l=r.snapGridWidth,u=r.snapGridHeight,c=e.state,f=c.guidelines,h=c.enableSnap;return!n||!h||t&&n!==!0&&n.indexOf(t)<0?!1:!!(l||u||i||s||f&&f.length||o&&o.length||a&&a.length)}function tc(e){return e===!1?{}:e===!0||!e?{left:!0,right:!0,top:!0,bottom:!0}:e}function Qb(e,t){var r=tc(e),n={};for(var i in r)i in t&&r[i]&&(n[i]=t[i]);return n}function ec(e,t){var r=Qb(e,t),n=Zb.filter(function(s){return s in r}),i=Jb.filter(function(s){return s in r});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(s){return r[s]}),vertical:i.map(function(s){return r[s]})}}function tx(e,t,r){var n=Vt(e,[t.clientLeft,t.clientTop],r);return[t.left+n[0],t.top+n[1]]}function ex(e){var t=A(e,2),r=t[0],n=t[1],i=n[0]-r[0],s=n[1]-r[1];Math.abs(i)<qt&&(i=0),Math.abs(s)<qt&&(s=0);var o=0,a=0,l=0;return i?s?(o=-s/i,a=1,l=o*r[0]-r[1]):(a=1,l=-r[1]):(o=-1,l=r[0]),[o,a,l].map(function(u){return xt(u,qt)})}var Qp="snapRotationThreshold",tv="snapRotationDegrees",ev="snapHorizontalThreshold",rv="snapVerticalThreshold";function _a(e,t,r,n,i,s,o){var a;n===void 0&&(n=[]),i===void 0&&(i=[]);var l=e.props,u=((a=e.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],c=uh(o,l[ev],5),f=uh(s,l[rv],5);return nv(e.state.guidelines,t,r,n,i,c,f,u)}function nv(e,t,r,n,i,s,o,a){return{vertical:Kf(e,"vertical",t,o*a[0],n),horizontal:Kf(e,"horizontal",r,s*a[1],i)}}function rx(e,t,r){var n=A(r,2),i=n[0],s=n[1],o=A(t,2),a=o[0],l=o[1],u=A(vt(r,t),2),c=u[0],f=u[1],h=f>0,d=c>0;c=ko(c),f=ko(f);var p={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(c===0&&f===0)return{vertical:p,horizontal:v};var g=_a(e,c?[i]:[],f?[s]:[],[],[],void 0,void 0),m=g.vertical,b=g.horizontal;m.posInfos.filter(function(W){var H=W.pos;return d?H>=a:H<=a}),b.posInfos.filter(function(W){var H=W.pos;return h?H>=l:H<=l}),m.isSnap=m.posInfos.length>0,b.isSnap=b.posInfos.length>0;var C=jl(m),S=C.isSnap,_=C.guideline,y=jl(b),w=y.isSnap,x=y.guideline,E=w?x.pos[1]:0,k=S?_.pos[0]:0;if(c===0)w&&(v.isSnap=!0,v.pos=x.pos[1],v.offset=s-v.pos);else if(f===0)S&&(p.isSnap=!0,p.pos=k,p.offset=i-k);else{var B=f/c,T=r[1]-B*i,P=0,O=0,L=!1;S?(O=k,P=B*O+T,L=!0):w&&(P=E,O=(P-T)/B,L=!0),L&&(p.isSnap=!0,p.pos=O,p.offset=i-O,v.isSnap=!0,v.pos=P,v.offset=s-P)}return{vertical:p,horizontal:v}}function zr(e){var t="";return e===-1||e==="top"||e==="left"?t="start":e===0||e==="center"||e==="middle"?t="center":(e===1||e==="right"||e==="bottom")&&(t="end"),t}function qf(e,t,r,n){var i=ec(e.props.snapDirections,t),s=_a(e,i.vertical,i.horizontal,i.verticalNames.map(function(l){return zr(l)}),i.horizontalNames.map(function(l){return zr(l)}),r,n),o=zr(i.horizontalNames[s.horizontal.index]),a=zr(i.verticalNames[s.vertical.index]);return{vertical:R(R({},s.vertical),{direction:a}),horizontal:R(R({},s.horizontal),{direction:o})}}function jl(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=e.posInfos[0],n=r.guidelineInfos[0],i=n.offset,s=n.dist,o=n.guideline;return{isSnap:t,offset:i,dist:s,pos:r.pos,guideline:o}}function Kf(e,t,r,n,i){var s,o;if(i===void 0&&(i=[]),!e||!e.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=t==="vertical",l=a?0:1,u=r.map(function(f,h){var d=i[h]||"",p=e.map(function(v){var g=v.pos,m=f-g[l];return{offset:m,dist:U(m),guideline:v,direction:d}}).filter(function(v){var g=v.guideline,m=v.dist,b=g.type;return!(b!==t||m>n)}).sort(function(v,g){return v.dist-g.dist});return{pos:f,index:h,guidelineInfos:p,direction:d}}).filter(function(f){return f.guidelineInfos.length>0}).sort(function(f,h){return f.guidelineInfos[0].dist-h.guidelineInfos[0].dist}),c=u.length>0;return{isSnap:c,index:c?u[0].index:-1,direction:(o=(s=u[0])===null||s===void 0?void 0:s.direction)!==null&&o!==void 0?o:"",posInfos:u}}function nx(e,t,r,n,i){var s=[];r[0]&&r[1]?s=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(h,d,p){var v=p[d+1]||p[0];s.push(h),s.push([(h[0]+v[0])/2,(h[1]+v[1])/2])}):e.props.keepRatio?s.push([-1,-1],[-1,1],[1,-1],[1,1],r):(s.push.apply(s,Q([],A(Ab([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),s.length>1&&s.push([(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]));var o=s.map(function(h){return ee(t,h)}),a=o.map(function(h){return h[0]}),l=o.map(function(h){return h[1]}),u=_a(e,a,l,s.map(function(h){return zr(h[0])}),s.map(function(h){return zr(h[1])}),n,i),c=zr(s.map(function(h){return h[0]})[u.vertical.index]),f=zr(s.map(function(h){return h[1]})[u.horizontal.index]);return{vertical:R(R({},u.vertical),{direction:c}),horizontal:R(R({},u.horizontal),{direction:f})}}function iv(e,t){var r=U(e.offset),n=U(t.offset);return e.isBound&&t.isBound?n-r:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?n-r:e.isSnap?-1:t.isSnap||r<Ce?1:n<Ce?-1:r-n}function So(e,t){return e.slice().sort(function(r,n){var i=r.sign[t],s=n.sign[t],o=r.offset[t],a=n.offset[t];if(i){if(!s)return-1}else return 1;return iv({isBound:r.isBound,isSnap:r.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:a})})[0]}function ix(e,t,r){var n=[];if(r)U(t[0])!==1||U(t[1])!==1?n.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):n.push([t,[e[0],-e[1]]],[t,[-e[0],e[1]]]),n.push([t,e]);else if(e[0]&&e[1]||!e[0]&&!e[1]){var i=e[0]?e:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(a){var l=[o*i[0],a*i[1]];t[0]===l[0]&&t[1]===l[1]||n.push([t,l])})})}else if(e[0]){var s=U(t[0])===1?[1]:[1,-1];s.forEach(function(o){n.push([[t[0],-1],[o*e[0],-1]],[[t[0],0],[o*e[0],0]],[[t[0],1],[o*e[0],1]])})}else if(e[1]){var s=U(t[1])===1?[1]:[1,-1];s.forEach(function(a){n.push([[-1,t[1]],[-1,a*e[1]]],[[0,t[1]],[0,a*e[1]]],[[1,t[1]],[1,a*e[1]]])})}return n}function sv(e,t){var r=Pl([t[0][0],t[1][0]]),n=Pl([t[0][1],t[1][1]]);return{vertical:r<=e[0],horizontal:n<=e[1]}}function rc(e,t){var r=A(t,2),n=r[0],i=r[1],s=i[0]-n[0],o=i[1]-n[1];U(s)<Ce&&(s=0),U(o)<Ce&&(o=0);var a,l;if(!s)a=n[0],l=e[0];else if(!o)a=n[1],l=e[1];else{var u=o/s;a=u*(e[0]-n[0])+n[1],l=e[1]}return a-l}function ov(e,t,r,n){return n===void 0&&(n=Ce),e.every(function(i){var s=rc(i,t),o=s<=0;return o===r||U(s)<=n})}function Jf(e,t,r,n,i){return i===void 0&&(i=0),n&&t-i<=e||!n&&e<=r+i?{isBound:!0,offset:n?t-e:r-e}:{isBound:!1,offset:0}}function sx(e,t){var r=t.line,n=t.centerSign,i=t.verticalSign,s=t.horizontalSign,o=t.lineConstants,a=e.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=a.left,u=a.top,c=a.width,f=a.height,h=[[l,u],[l,u+f]],d=[[l,u],[l+c,u]],p=[[l+c,u],[l+c,u+f]],v=[[l,u+f],[l+c,u+f]];if(ov([[l,u],[l+c,u],[l,u+f],[l+c,u+f]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Nr(r,o,d,i),m=Nr(r,o,v,i),b=Nr(r,o,h,s),C=Nr(r,o,p,s),S=g.isBound&&m.isBound,_=g.isBound||m.isBound,y=b.isBound&&C.isBound,w=b.isBound||C.isBound,x=Kn(g.offset,m.offset),E=Kn(b.offset,C.offset),k=[0,0],B=!1,T=!1;return U(E)<U(x)?(k=[x,0],B=_,T=S):(k=[0,E],B=w,T=y),{isAllBound:T,isVerticalBound:_,isHorizontalBound:w,isBound:B,offset:k}}function Nr(e,t,r,n,i,s){var o=A(t,2),a=o[0],l=o[1],u=e[0],c=r[0],f=r[1],h=ko(f[1]-c[1]),d=ko(f[0]-c[0]),p=l,v=a,g=-a/l;if(d){if(!h){if(s&&!p)return{isBound:!1,offset:0};if(v){var S=(c[1]-u[1])/g+u[0];return Jf(S,c[0],f[0],n,i)}else{var b=c[1]-u[1],C=U(b)<=(i||0);return{isBound:C,offset:C?b:0}}}}else{if(s&&!v)return{isBound:!1,offset:0};if(p){var m=g*(c[0]-u[0])+u[1];return Jf(m,c[1],f[1],n,i)}else{var b=c[0]-u[0],C=U(b)<=(i||0);return{isBound:C,offset:C?b:0}}}return{isBound:!1,offset:0}}function av(e,t,r){return t.map(function(n){var i=sx(e,n),s=i.isBound,o=i.offset,a=i.isVerticalBound,l=i.isHorizontalBound,u=n.multiple,c=gr({datas:r,distX:o[0],distY:o[1]}).map(function(f,h){return f*(u[h]?2/u[h]:0)});return{sign:u,isBound:s,isVerticalBound:a,isHorizontalBound:l,isSnap:!1,offset:c}})}function ox(e,t,r){var n,i=nc(e,t,[0,0],!1).map(function(h){return R(R({},h),{multiple:h.multiple.map(function(d){return U(d)*2})})}),s=av(e,i,r),o=So(s,0),a=So(s,1),l=0,u=0,c=o.isVerticalBound||a.isVerticalBound,f=o.isHorizontalBound||a.isHorizontalBound;return(c||f)&&(n=A(Db({datas:r,distX:-o.offset[0],distY:-a.offset[1]}),2),l=n[0],u=n[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:f,offset:u}}}function ax(e,t){var r=[],n=e[0],i=e[1];return n&&i?r.push([[0,i*2],e,[-n,i]],[[n*2,0],e,[n,-i]]):n?(r.push([[n*2,0],[n,1],[n,-1]]),t&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(r.push([[0,i*2],[1,i],[-1,i]]),t&&r.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function nc(e,t,r,n){var i=e.state,s=i.allMatrix,o=i.is3d,a=xn(s,100,100,o?4:3),l=ee(a,[0,0]);return ax(r,n).map(function(u){var c=A(u,3),f=c[0],h=c[1],d=c[2],p=[ee(a,h),ee(a,d)],v=ex(p),g=sv(l,p),m=g.vertical,b=g.horizontal,C=rc(l,p)<=0;return{multiple:f,centerSign:C,verticalSign:m,horizontalSign:b,lineConstants:v,line:[ee(t,h),ee(t,d)]}})}function Zf(e,t,r,n){var i=n?e.map(function(s){return ls(s,n)}):e;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(s){var o=rc(r,s)<=0;return!ov(t,s,o)})}function lx(e){var t=A(e,2),r=t[0],n=t[1],i=n[0]-r[0],s=n[1]-r[1];if(!i)return U(r[0]);if(!s)return U(r[1]);var o=s/i;return U((-o*r[0]+r[1])/Math.sqrt(Math.pow(o,2)+1))}function ux(e){var t=A(e,2),r=t[0],n=t[1],i=n[0]-r[0],s=n[1]-r[1];if(!i)return[r[0],0];if(!s)return[0,r[1]];var o=s/i,a=-o*r[0]+r[1];return[-a/(o+1/o),a/(o*o+1)]}function cx(e,t,r,n,i){var s=e.props.innerBounds,o=i*Math.PI/180;if(!s)return[];var a=s.left,l=s.top,u=s.width,c=s.height,f=a-n[0],h=a+u-n[0],d=l-n[1],p=l+c-n[1],v=[[f,d],[h,d],[f,p],[h,p]],g=ee(r,[0,0]);if(!Zf(r,v,g,0))return[];var m=[],b=v.map(function(C){return[Ge(C),Xt([0,0],C)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(C){var S=Xt([0,0],ux(C)),_=lx(C);m.push.apply(m,Q([],A(b.filter(function(y){var w=A(y,1),x=w[0];return x&&_<=x}).map(function(y){var w=A(y,2),x=w[0],E=w[1],k=Math.acos(x?_/x:0),B=E+k,T=E-k;return[o+B-S,o+T-S]}).reduce(function(y,w){return y.push.apply(y,Q([],A(w),!1)),y},[]).filter(function(y){return!Zf(t,v,g,y)}).map(function(y){return xt(y*180/Math.PI,Ce)})),!1))}),m}function fx(e){var t=e.props.innerBounds,r=Rn();if(!t)return{boundMap:r,vertical:[],horizontal:[]};var n=e.getRect(),i=n.pos1,s=n.pos2,o=n.pos3,a=n.pos4,l=[i,s,o,a],u=ee(l,[0,0]),c=t.left,f=t.top,h=t.width,d=t.height,p=[[c,f],[c,f+d]],v=[[c,f],[c+h,f]],g=[[c+h,f],[c+h,f+d]],m=[[c,f+d],[c+h,f+d]],b=nc(e,l,[0,0],!1),C=[],S=[];return b.forEach(function(_){var y=_.line,w=_.lineConstants,x=sv(u,y),E=x.horizontal,k=x.vertical,B=Nr(y,w,v,k,1,!0),T=Nr(y,w,m,k,1,!0),P=Nr(y,w,p,E,1,!0),O=Nr(y,w,g,E,1,!0);B.isBound&&!r.top&&(C.push(f),r.top=!0),T.isBound&&!r.bottom&&(C.push(f+d),r.bottom=!0),P.isBound&&!r.left&&(S.push(c),r.left=!0),O.isBound&&!r.right&&(S.push(c+h),r.right=!0)}),{boundMap:r,horizontal:C,vertical:S}}function hx(e,t,r,n){var i=t[0]-e[0],s=t[1]-e[1];if(U(i)<qt&&(i=0),U(s)<qt&&(s=0),!i)return n?[0,0]:[0,r];if(!s)return n?[r,0]:[0,0];var o=s/i,a=e[1]-o*e[0];if(n){var l=o*(t[0]+r)+a;return[r,l-t[1]]}else{var u=(t[1]+r-a)/o;return[u-t[0],r]}}function $l(e,t,r,n,i){var s=hx(e,t,r,n);if(!s)return{isOutside:!1,offset:[0,0]};var o=Sr(e,t),a=Sr(s,e),l=Sr(s,t),u=a>o||l>o,c=A(gr({datas:i,distX:s[0],distY:s[1]}),2),f=c[0],h=c[1];return{offset:[f,h],isOutside:u}}function wo(e,t){return e.isBound?e.offset:t.isSnap?jl(t).offset:0}function dx(e,t,r,n,i){var s=A(t,2),o=s[0],a=s[1],l=A(r,2),u=l[0],c=l[1],f=A(n,2),h=f[0],d=f[1],p=A(i,2),v=p[0],g=p[1],m=-v,b=-g;if(e&&o&&a){m=0,b=0;var C=[];if(u&&c?C.push([0,g],[v,0]):u?C.push([v,0]):c?C.push([0,g]):h&&d?C.push([0,g],[v,0]):h?C.push([v,0]):d&&C.push([0,g]),C.length){C.sort(function(w,x){return Ge(vt([o,a],w))-Ge(vt([o,a],x))});var S=C[0];if(S[0]&&U(o)>qt)m=-S[0],b=a*U(o+m)/U(o)-a;else if(S[1]&&U(a)>qt){var _=a;b=-S[1],m=o*U(a+b)/U(_)-o}if(e&&c&&u)if(U(m)>qt&&U(m)<U(v)){var y=U(v)/U(m);m*=y,b*=y}else if(U(b)>qt&&U(b)<U(g)){var y=U(g)/U(b);m*=y,b*=y}else m=Kn(-v,m),b=Kn(-g,b)}}else m=o||u?-v:0,b=a||c?-g:0;return[m,b]}function px(e,t,r,n,i,s){if(!ai(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=oc(s.absolutePoses,[t,r]),a=Ne(o),l=a.left,u=a.right,c=a.top,f=a.bottom,h={horizontal:o.map(function(O){return O[1]}),vertical:o.map(function(O){return O[0]})},d=tc(e.props.snapDirections),p=ec(d,{left:l,right:u,top:c,bottom:f,center:(l+u)/2,middle:(c+f)/2}),v=Ea(e,i,p,h),g=v.vertical,m=v.horizontal,b=ox(e,o,s),C=b.vertical,S=b.horizontal,_=g.isSnap,y=m.isSnap,w=g.isBound||C.isBound,x=m.isBound||S.isBound,E=Kn(g.offset,C.offset),k=Kn(m.offset,S.offset),B=A(dx(n,[t,r],[w,x],[_,y],[E,k]),2),T=B[0],P=B[1];return[{isBound:w,isSnap:_,offset:T},{isBound:x,isSnap:y,offset:P}]}function Ea(e,t,r,n){n===void 0&&(n=r);var i=Qu(wa(e),n.vertical,n.horizontal),s=i.horizontal,o=i.vertical,a=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:_a(e,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),l=a.horizontal,u=a.vertical,c=wo(s[0],l),f=wo(o[0],u),h=U(c),d=U(f);return{horizontal:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:h,bounds:s,snap:l},vertical:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:d,bounds:o,snap:u}}}function Qf(e,t,r,n,i,s,o){o===void 0&&(o=[1,1]);var a=Qu(t,r,n),l=a.horizontal,u=a.vertical,c=nv(e,r,n,[],[],i,s,o),f=c.horizontal,h=c.vertical,d=wo(l[0],f),p=wo(u[0],h),v=U(d),g=U(p);return{horizontal:{isBound:l[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:d,dist:v,bounds:l,snap:f},vertical:{isBound:u[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:p,dist:g,bounds:u,snap:h}}}function vx(e,t,r,n){var i=Xt(e,t)/Math.PI*180,s=r.vertical,o=s.isBound,a=s.isSnap,l=s.dist,u=r.horizontal,c=u.isBound,f=u.isSnap,h=u.dist,d=i%180,p=d<3||d>177,v=d>87&&d<93;return h<l&&(o||a&&!v&&(!n||!p))?"vertical":c||f&&!p&&(!n||!v)?"horizontal":""}function gx(e,t,r,n,i,s){return r.map(function(o){var a=A(o,2),l=a[0],u=a[1],c=ee(t,l),f=ee(t,u),h=n?mx(e,c,f,i):Ea(e,i,{vertical:[f[0]],horizontal:[f[1]]}),d=h.horizontal,p=d.offset,v=d.isBound,g=d.isSnap,m=h.vertical,b=m.offset,C=m.isBound,S=m.isSnap,_=vt(u,l);if(!b&&!p)return{isBound:C||v,isSnap:S||g,sign:_,offset:[0,0]};var y=vx(c,f,h,n);if(!y)return{sign:_,isBound:!1,isSnap:!1,offset:[0,0]};var w=y==="vertical",x=[0,0];return!n&&U(u[0])===1&&U(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?x=gr({datas:s,distX:-b,distY:-p}):x=$l(c,f,-(w?b:p),w,s).offset,x=x.map(function(E,k){return E*(_[k]?2/_[k]:0)}),{sign:_,isBound:w?C:v,isSnap:w?S:g,offset:x}})}function th(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function mx(e,t,r,n){var i=Yb(e,t,r),s=i.horizontal,o=i.vertical,a=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:rx(e,t,r),l=a.horizontal,u=a.vertical,c=th(s,l),f=th(o,u),h=U(c),d=U(f);return{horizontal:{isBound:s.isBound,isSnap:l.isSnap,offset:c,dist:h},vertical:{isBound:o.isBound,isSnap:u.isSnap,offset:f,dist:d}}}function yx(e,t,r,n,i){var s=[-r[0],-r[1]],o=e.state,a=o.width,l=o.height,u=e.props.bounds,c=1/0,f=1/0;if(u){var h=[[r[0],-r[1]],[-r[0],r[1]]],d=u.left,p=d===void 0?-1/0:d,v=u.top,g=v===void 0?-1/0:v,m=u.right,b=m===void 0?1/0:m,C=u.bottom,S=C===void 0?1/0:C;h.forEach(function(_){var y=_[0]!==s[0],w=_[1]!==s[1],x=ee(t,_),E=Xt(n,x)*360/Math.PI;if(w){var k=x.slice();(U(E-360)<2||U(E-180)<2)&&(k[1]=n[1]);var B=$l(n,k,(n[1]<x[1]?S:g)-x[1],!1,i),T=A(B.offset,2),P=T[1],O=B.isOutside;isNaN(P)||(f=l+(O?1:-1)*U(P))}if(y){var k=x.slice();(U(E-90)<2||U(E-270)<2)&&(k[0]=n[0]);var L=$l(n,k,(n[0]<x[0]?b:p)-x[0],!0,i),W=A(L.offset,1),H=W[0],z=L.isOutside;isNaN(H)||(c=a+(z?1:-1)*U(H))}})}return{maxWidth:c,maxHeight:f}}var me={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var r=e.props,n=r.hideThrottleDragRotateLine,i=r.throttleDragRotate,s=r.zoom,o=e.getState(),a=o.dragInfo,l=o.beforeOrigin;if(n||!i||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var c=Ge(u),f=Xt(u,[0,0]);return[t.createElement("div",{className:pt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(f,"rad) scaleY(").concat(s,")")}})]},dragStart:function(e,t){var r=t.datas,n=t.parentEvent,i=t.parentGesto,s=e.state,o=s.gestos,a=s.style;if(o.draggable)return!1;o.draggable=i||e.targetGesto,r.datas={},r.left=parseFloat(a.left||"")||0,r.top=parseFloat(a.top||"")||0,r.bottom=parseFloat(a.bottom||"")||0,r.right=parseFloat(a.right||"")||0,r.startValue=[0,0],bn(e,t),Sa(e,t,"translate"),Fx(e,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=Ct(e,t,R({set:function(c){r.startValue=c}},Ca(e,t))),u=n||ct(e,"onDragStart",l);return u!==!1?(r.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(o.draggable=null,r.isPinch=!1),r.isDrag?l:!1},drag:function(e,t){if(t){ba(e,t,"translate");var r=t.datas,n=t.parentEvent,i=t.parentFlag,s=t.isPinch,o=t.deltaOffset,a=t.useSnap,l=t.isRequest,u=t.isGroup,c=t.parentThrottleDrag,f=t.distX,h=t.distY,d=r.isDrag,p=r.prevDist,v=r.prevBeforeDist,g=r.startValue;if(d){o&&(f+=o[0],h+=o[1]);var m=e.props,b=m.parentMoveable,C=u?0:m.throttleDrag||c||0,S=n?0:m.throttleDragRotate||0,_=0,y=!1,w=!1,x=!1,E=!1;if(!n&&S>0&&(f||h)){var k=m.startDragRotate||0,B=xt(k+Xt([0,0],[f,h])*180/Math.PI,S)-k,T=h*Math.abs(Math.cos((B-90)/180*Math.PI)),P=f*Math.abs(Math.cos(B/180*Math.PI)),O=Ge([P,T]);_=B*Math.PI/180,f=O*Math.cos(_),h=O*Math.sin(_)}if(!s&&!n&&!i){var L=A(px(e,f,h,S,!a&&l||o,r),2),W=L[0],H=L[1];y=W.isSnap,w=W.isBound,x=H.isSnap,E=H.isBound;var z=W.offset,Y=H.offset;f+=z,h+=Y}var J=Mt(Hp({datas:r,distX:f,distY:h}),g),G=Mt(Pb({datas:r,distX:f,distY:h}),g);Bf(G,Ce),Bf(J,Ce),S||(!y&&!w&&(G[0]=xt(G[0],C),J[0]=xt(J[0],C)),!x&&!E&&(G[1]=xt(G[1],C),J[1]=xt(J[1],C)));var tt=vt(J,g),ot=vt(G,g),et=vt(ot,p),st=vt(tt,v);r.prevDist=ot,r.prevBeforeDist=tt,r.passDelta=et,r.passDist=ot;var K=r.left+tt[0],at=r.top+tt[1],ft=r.right-tt[0],mt=r.bottom-tt[1],wt=xa(r,"translate(".concat(G[0],"px, ").concat(G[1],"px)"),"translate(".concat(ot[0],"px, ").concat(ot[1],"px)"));if(Ju(t,wt),e.state.dragInfo.dist=n?[0,0]:ot,!(!n&&!b&&et.every(function(I){return!I})&&st.some(function(I){return!I}))){var nt=e.state,ht=nt.width,M=nt.height,D=Ct(e,t,R({transform:wt,dist:ot,delta:et,translate:G,beforeDist:tt,beforeDelta:st,beforeTranslate:J,left:K,top:at,right:ft,bottom:mt,width:ht,height:M,isPinch:s},xe({transform:wt},t)));return!n&&ct(e,"onDrag",D),D}}}},dragAfter:function(e,t){var r=t.datas,n=r.deltaOffset;return n[0]||n[1]?(r.deltaOffset=[0,0],this.drag(e,R(R({},t),{deltaOffset:n}))):!1},dragEnd:function(e,t){var r=t.parentEvent,n=t.datas;if(e.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var i=Be(e,t,{});return!r&&ct(e,"onDragEnd",i),i}},dragGroupStart:function(e,t){var r,n,i=t.datas,s=t.clientX,o=t.clientY,a=this.dragStart(e,t);if(!a)return!1;var l=Za(e,this,"dragStart",[s||0,o||0],t,!1,"draggable"),u=l.childEvents,c=l.eventParams,f=R(R({},a),{targets:e.props.targets,events:c}),h=ct(e,"onDragGroupStart",f);i.isDrag=h!==!1;var d=(n=(r=u[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&n!==void 0?n:[0,0];return i.throttleOffset=[d[0]%1,d[1]%1],i.isDrag?a:!1},dragGroup:function(e,t){var r=t.datas;if(r.isDrag){var n=this.drag(e,R(R({},t),{parentThrottleDrag:e.props.throttleDrag})),i=t.datas.passDelta,s=Za(e,this,"drag",i,t,!1,"draggable").eventParams;if(n){var o=R({targets:e.props.targets,events:s},n);return ct(e,"onDragGroup",o),o}}},dragGroupEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isDrag){this.dragEnd(e,t);var i=Za(e,this,"dragEnd",[0,0],t,!1,"draggable").eventParams;return ct(e,"onDragGroupEnd",Be(e,t,{targets:e.props.targets,events:i})),r}},request:function(e){var t={},r=e.getRect(),n=0,i=0,s=!1;return{isControl:!1,requestStart:function(o){return s=o.useSnap,{datas:t,useSnap:s}},request:function(o){return"x"in o?n=o.x-r.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?i=o.y-r.top:"deltaY"in o&&(i+=o.deltaY),{datas:t,distX:n,distY:i,useSnap:s}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:s}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}};function lv(e,t){var r=ee(e,t),n=[0,0];return{fixedPosition:r,fixedDirection:t,fixedOffset:n}}function bx(e,t){var r=e.allMatrix,n=e.is3d,i=e.width,s=e.height,o=n?4:3,a=[i/2*(1+t[0]),s/2*(1+t[1])],l=Vt(r,a,o),u=[0,0];return{fixedPosition:l,fixedDirection:t,fixedOffset:u}}function uv(e,t){var r=e.allMatrix,n=e.is3d,i=e.width,s=e.height,o=n?4:3,a=Fb(t,i,s),l=Vt(r,t,o),u=[i?0:t[0],s?0:t[1]];return{fixedPosition:l,fixedDirection:a,fixedOffset:u}}var eh=uc("resizable"),Xl={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:Kp("resizable"),dragControlCondition:eh,viewClassName:lc("resizable"),dragControlStart:function(e,t){var r,n=t.inputEvent,i=t.isPinch,s=t.isGroup,o=t.parentDirection,a=t.parentGesto,l=t.datas,u=t.parentFixedDirection,c=t.parentEvent,f=Sv(o,i,n,l),h=e.state,d=h.target,p=h.width,v=h.height,g=h.gestos;if(!f||!d||g.resizable)return!1;g.resizable=a||e.controlGesto,!i&&bn(e,t),l.datas={},l.direction=f,l.startOffsetWidth=p,l.startOffsetHeight=v,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=h.inlineCSSWidth||h.cssWidth,l.startHeight=h.inlineCSSHeight||h.cssHeight,l.maxSize=[1/0,1/0],s||(l.minSize=[h.minOffsetWidth,h.minOffsetHeight],l.maxSize=[h.maxOffsetWidth,h.maxOffsetHeight]);var m=e.props.transformOrigin||"% %";l.transformOrigin=m&&Me(m)?m.split(" "):m,l.startOffsetMatrix=h.offsetMatrix,l.startTransformOrigin=h.transformOrigin,l.isWidth=(r=t==null?void 0:t.parentIsWidth)!==null&&r!==void 0?r:!f[0]&&!f[1]||f[0]||!f[1];function b(E){l.ratio=E&&isFinite(E)?E:0}l.startPositions=We(e.state);function C(E){var k=lv(l.startPositions,E);l.fixedDirection=k.fixedDirection,l.fixedPosition=k.fixedPosition,l.fixedOffset=k.fixedOffset}function S(E){var k=uv(e.state,E);l.fixedDirection=k.fixedDirection,l.fixedPosition=k.fixedPosition,l.fixedOffset=k.fixedOffset}function _(E){l.minSize=[Rt("".concat(E[0]),0)||0,Rt("".concat(E[1]),0)||0]}function y(E){var k=[E[0]||1/0,E[1]||1/0];(!Xn(k[0])||isFinite(k[0]))&&(k[0]=Rt("".concat(k[0]),0)||1/0),(!Xn(k[1])||isFinite(k[1]))&&(k[1]=Rt("".concat(k[1]),0)||1/0),l.maxSize=k}b(p/v),C(u||[-f[0],-f[1]]),l.setFixedDirection=C,l.setFixedPosition=S,l.setMin=_,l.setMax=y;var w=Ct(e,t,{direction:f,startRatio:l.ratio,set:function(E){var k=A(E,2),B=k[0],T=k[1];l.startWidth=B,l.startHeight=T},setMin:_,setMax:y,setRatio:b,setFixedDirection:C,setFixedPosition:S,setOrigin:function(E){l.transformOrigin=E},dragStart:me.dragStart(e,new Yn().dragStart([0,0],t))}),x=c||ct(e,"onResizeStart",w);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,x!==!1&&(l.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:f}),l.isResize?w:!1},dragControl:function(e,t){var r,n=t.datas,i=t.parentFlag,s=t.isPinch,o=t.parentKeepRatio,a=t.dragClient,l=t.parentDist,u=t.useSnap,c=t.isRequest,f=t.isGroup,h=t.parentEvent,d=t.resolveMatrix,p=n.isResize,v=n.transformOrigin,g=n.startWidth,m=n.startHeight,b=n.prevWidth,C=n.prevHeight,S=n.minSize,_=n.maxSize,y=n.ratio,w=n.startOffsetWidth,x=n.startOffsetHeight,E=n.isWidth;if(!p)return;if(d){var k=e.state.is3d,B=n.startOffsetMatrix,T=n.startTransformOrigin,P=k?4:3,O=Ui(xo(t)),L=Math.sqrt(O.length);P!==L&&(O=rr(O,L,P));var W=ds(B,O,T,P),H=xn(W,w,x,P);n.startPositions=H,n.nextTargetMatrix=O,n.nextAllMatrix=W}var z=vn(e.props,"resizable"),Y=z.resizeFormat,J=z.throttleResize,G=J===void 0?i?0:1:J,tt=z.parentMoveable,ot=z.keepRatioFinally,et=n.direction,st=et,K=0,at=0;!et[0]&&!et[1]&&(st=[1,1]);var ft=y&&(o??z.keepRatio)||!1;function mt(){var ut=n.fixedDirection,lt=Tv(st,ft,n,t);K=lt.distWidth,at=lt.distHeight;var gt=st[0]-ut[0]||ft?Math.max(w+K,Ce):w,bt=st[1]-ut[1]||ft?Math.max(x+at,Ce):x;return ft&&w&&x&&(E?bt=gt/y:gt=bt*y),[gt,bt]}var wt=A(mt(),2),nt=wt[0],ht=wt[1];h||(n.setFixedDirection(n.fixedDirection),ct(e,"onBeforeResize",Ct(e,t,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(ut){var lt;return n.setFixedDirection(ut),lt=A(mt(),2),nt=lt[0],ht=lt[1],[nt,ht]},setFixedPosition:function(ut){var lt;return n.setFixedPosition(ut),lt=A(mt(),2),nt=lt[0],ht=lt[1],[nt,ht]},boundingWidth:nt,boundingHeight:ht,setSize:function(ut){var lt;lt=A(ut,2),nt=lt[0],ht=lt[1]}},!0)));var M=a;a||(!i&&s?M=Wb(e,[0,0]):M=n.fixedPosition);var D=[0,0];s||(D=Ix(e,nt,ht,et,M,!u&&c,n)),l&&(!l[0]&&(D[0]=0),!l[1]&&(D[1]=0));function I(){var ut;Y&&(ut=A(Y([nt,ht]),2),nt=ut[0],ht=ut[1]),nt=xt(nt,G),ht=xt(ht,G)}if(ft){st[0]&&st[1]&&D[0]&&D[1]&&(U(D[0])>U(D[1])?D[1]=0:D[0]=0);var F=!D[0]&&!D[1];F&&I(),st[0]&&!st[1]||D[0]&&!D[1]||F&&E?(nt+=D[0],ht=nt/y):(!st[0]&&st[1]||!D[0]&&D[1]||F&&!E)&&(ht+=D[1],nt=ht*y)}else nt+=D[0],ht+=D[1],nt=Math.max(0,nt),ht=Math.max(0,ht);r=A(tp([nt,ht],S,_,ft?y:!1),2),nt=r[0],ht=r[1],I(),ft&&(f||ot)&&(E?ht=nt/y:nt=ht*y),K=nt-w,at=ht-x;var N=[K-b,at-C];n.prevWidth=K,n.prevHeight=at;var $=Gb(e,nt,ht,M,v,n);if(!(!tt&&N.every(function(ut){return!ut})&&$.every(function(ut){return!ut}))){var j=me.drag(e,hs(t,e.state,$,!!s,!1,"draggable")),V=j.transform,q=g+K,X=m+at,rt=Ct(e,t,R({width:q,height:X,offsetWidth:Math.round(nt),offsetHeight:Math.round(ht),startRatio:y,boundingWidth:nt,boundingHeight:ht,direction:et,dist:[K,at],delta:N,isPinch:!!s,drag:j},_v({style:{width:"".concat(q,"px"),height:"".concat(X,"px")},transform:V},j,t)));return!h&&ct(e,"onResize",rt),rt}},dragControlAfter:function(e,t){var r=t.datas,n=r.isResize,i=r.startOffsetWidth,s=r.startOffsetHeight,o=r.prevWidth,a=r.prevHeight;if(!(!n||e.props.checkResizableError===!1)){var l=e.state,u=l.width,c=l.height,f=u-(i+o),h=c-(s+a),d=U(f)>3,p=U(h)>3;if(d&&(r.startWidth+=f,r.startOffsetWidth+=f,r.prevWidth+=f),p&&(r.startHeight+=h,r.startOffsetHeight+=h,r.prevHeight+=h),d||p)return this.dragControl(e,t)}},dragControlEnd:function(e,t){var r=t.datas,n=t.parentEvent;if(r.isResize){r.isResize=!1;var i=Be(e,t,{});return!n&&ct(e,"onResizeEnd",i),i}},dragGroupControlCondition:eh,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,R(R({},t),{isGroup:!0}));if(!n)return!1;var i=tr(e,"resizable",t),s=r.startOffsetWidth,o=r.startOffsetHeight;function a(){var d=r.minSize;i.forEach(function(p){var v=p.datas,g=v.minSize,m=v.startOffsetWidth,b=v.startOffsetHeight,C=s*(m?g[0]/m:0),S=o*(b?g[1]/b:0);d[0]=Math.max(d[0],C),d[1]=Math.max(d[1],S)})}function l(){var d=r.maxSize;i.forEach(function(p){var v=p.datas,g=v.maxSize,m=v.startOffsetWidth,b=v.startOffsetHeight,C=s*(m?g[0]/m:0),S=o*(b?g[1]/b:0);d[0]=Math.min(d[0],C),d[1]=Math.min(d[1],S)})}var u=wr(e,this,"dragControlStart",t,function(d,p){return Co(e,d,r,p)});a(),l();var c=function(d){n.setFixedDirection(d),u.forEach(function(p,v){p.setFixedDirection(d),Co(e,p.moveable,r,i[v])})};r.setFixedDirection=c;var f=R(R({},n),{targets:e.props.targets,events:u.map(function(d){return R(R({},d),{setMin:function(p){d.setMin(p),a()},setMax:function(p){d.setMax(p),l()}})}),setFixedDirection:c,setMin:function(d){n.setMin(d),a()},setMax:function(d){n.setMax(d),l()}}),h=ct(e,"onResizeGroupStart",f);return r.isResize=h!==!1,r.isResize?n:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isResize){var n=vn(e.props,"resizable");Ma(e,"onBeforeResize",function(d){ct(e,"onBeforeResizeGroup",Ct(e,t,R(R({},d),{targets:n.targets}),!0))});var i=this.dragControl(e,R(R({},t),{isGroup:!0}));if(i){var s=i.boundingWidth,o=i.boundingHeight,a=i.dist,l=n.keepRatio,u=[s/(s-a[0]),o/(o-a[1])],c=r.fixedPosition,f=wr(e,this,"dragControl",t,function(d,p){var v=A(de(us(e.rotation/180*Math.PI,3),[p.datas.originalX*u[0],p.datas.originalY*u[1],1],3),2),g=v[0],m=v[1];return R(R({},p),{parentDist:null,parentScale:u,dragClient:Mt(c,[g,m]),parentKeepRatio:l})}),h=R({targets:n.targets,events:f},i);return ct(e,"onResizeGroup",h),h}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isResize){this.dragControlEnd(e,t);var i=wr(e,this,"dragControlEnd",t),s=Be(e,t,{targets:e.props.targets,events:i});return ct(e,"onResizeGroupEnd",s),r}},request:function(e){var t={},r=0,n=0,i=!1,s=e.getRect();return{isControl:!0,requestStart:function(o){var a;return i=o.useSnap,{datas:t,parentDirection:o.direction||[1,1],parentIsWidth:(a=o==null?void 0:o.horizontal)!==null&&a!==void 0?a:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?r=o.offsetWidth-s.offsetWidth:"deltaWidth"in o&&(r+=o.deltaWidth),"offsetHeight"in o?n=o.offsetHeight-s.offsetHeight:"deltaHeight"in o&&(n+=o.deltaHeight),{datas:t,parentDist:[r,n],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}},unset:function(e){e.state.gestos.resizable=null}};function Qa(e,t,r,n,i){var s=e.props.groupable,o=e.state,a=o.is3d?4:3,l=t.origin,u=Vt(e.state.rootMatrix,vt([l[0],l[1]],s?[0,0]:[o.left,o.top]),a),c=Mt([i.left,i.top],u);t.startAbsoluteOrigin=c,t.prevDeg=Xt(c,[r,n])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=Sr(c,[r,n])}function qs(e,t,r){var n=r.defaultDeg,i=r.prevDeg,s=i%360,o=Math.floor(i/360);s<0&&(s+=360),s>e&&s>270&&e<90?++o:s<e&&s<90&&e>270&&--o;var a=t*(o*360+e-n);return r.prevDeg=n+a,a}function tl(e,t,r,n){return qs(Xt(n.startAbsoluteOrigin,[e,t])/Math.PI*180,r,n)}function el(e,t,r,n,i,s){var o=e.props.throttleRotate,a=o===void 0?0:o,l=r.prevSnapDeg,u=0,c=!1;if(s){var f=Ox(e,t,n,i+n);c=f.isSnap,u=i+f.dist}c||(u=xt(i+n,a));var h=u-i;return r.prevSnapDeg=h,[h-l,h,u]}function cv(e,t,r){var n=A(t,4),i=n[0],s=n[1],o=n[2],a=n[3];if(e==="none")return[];if(Jt(e))return e.map(function(g){return cv(g,[i,s,o,a],r)[0]});var l=A((e||"top").split("-"),2),u=l[0],c=l[1],f=[i,s];u==="left"?f=[o,i]:u==="right"?f=[s,a]:u==="bottom"&&(f=[a,o]);var h=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],d=xv(f,r);if(c){var p=c==="top"||c==="left",v=u==="bottom"||u==="left";h=f[p&&!v||!p&&v?0:1]}return[[h,d]]}function Ul(e,t){if(t.isRequest)return t.requestAble==="rotatable";var r=t.inputEvent.target;if(te(r,pt("rotation-control"))||e.props.rotateAroundControls&&te(r,pt("around-control"))||te(r,pt("control"))&&te(r,pt("rotatable")))return!0;var n=e.props.rotationTarget;return n?cc(n,!0).some(function(i){return i?r===i||r.contains(i):!1}):!1}var xx=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Cx={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[xx],viewClassName:function(e){return e.isDragging("rotatable")?pt("view-rotation-dragging"):""},render:function(e,t){var r=vn(e.props,"rotatable"),n=r.rotatable,i=r.rotationPosition,s=r.zoom,o=r.renderDirections,a=r.rotateAroundControls,l=r.resolveAblesWithRotatable,u=e.getState(),c=u.renderPoses,f=u.direction;if(!n)return null;var h=cv(i,c,f),d=[];if(h.forEach(function(m,b){var C=A(m,2),S=C[0],_=C[1];d.push(t.createElement("div",{key:"rotation".concat(b),className:pt("rotation"),style:{transform:"translate(-50%) translate(".concat(S[0],"px, ").concat(S[1],"px) rotate(").concat(_,"rad)")}},t.createElement("div",{className:pt("line rotation-line"),style:{transform:"scaleX(".concat(s,")")}}),t.createElement("div",{className:pt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(s,")")}})))}),o){var p=Er(l||{}),v={};p.forEach(function(m){l[m].forEach(function(b){v[b]=m})});var g=[];Jt(o)&&(g=o.map(function(m){var b=v[m];return{data:b?{resolve:b}:{},classNames:b?["move"]:[],dir:m}})),d.push.apply(d,Q([],A(Up(e,"rotatable",g,t)),!1))}return a&&d.push.apply(d,Q([],A(Zp(e,t)),!1)),d},dragControlCondition:Ul,dragControlStart:function(e,t){var r,n,i=t.datas,s=t.clientX,o=t.clientY,a=t.parentRotate,l=t.parentFlag,u=t.isPinch,c=t.isRequest,f=e.state,h=f.target,d=f.left,p=f.top,v=f.direction,g=f.beforeDirection,m=f.targetTransform,b=f.moveableClientRect,C=f.offsetMatrix,S=f.targetMatrix,_=f.allMatrix,y=f.width,w=f.height;if(!c&&!h)return!1;var x=e.getRect();i.rect=x,i.transform=m,i.left=d,i.top=p;var E=function(st){var K=uv(e.state,st);i.fixedDirection=K.fixedDirection,i.fixedOffset=K.fixedOffset,i.fixedPosition=K.fixedPosition,G&&G.setFixedPosition(st)},k=function(st){var K=bx(e.state,st);i.fixedDirection=K.fixedDirection,i.fixedOffset=K.fixedOffset,i.fixedPosition=K.fixedPosition,G&&G.setFixedDirection(st)},B=s,T=o;if(c||u||l){var P=a||0;i.beforeInfo={origin:x.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},i.afterInfo=R(R({},i.beforeInfo),{origin:x.origin}),i.absoluteInfo=R(R({},i.beforeInfo),{origin:x.origin,startValue:P})}else{var O=(n=t.inputEvent)===null||n===void 0?void 0:n.target;if(O){var L=O.getAttribute("data-direction")||"",W=Mb[L];if(W){i.isControl=!0,i.isAroundControl=te(O,pt("around-control")),i.controlDirection=W;var H=O.getAttribute("data-resolve");H&&(i.resolveAble=H);var z=Kx(f.rootMatrix,f.renderPoses,b);r=A(ee(z,W),2),B=r[0],T=r[1]}}i.beforeInfo={origin:x.beforeOrigin},i.afterInfo={origin:x.origin},i.absoluteInfo={origin:x.origin,startValue:x.rotation};var Y=E;E=function(st){var K=f.is3d?4:3,at=A(Mt(kp(S,K),st),2),ft=at[0],mt=at[1],wt=de(C,hn([ft,mt],K)),nt=de(_,hn([st[0],st[1]],K));Y(st);var ht=f.posDelta;i.beforeInfo.origin=vt(wt,ht),i.afterInfo.origin=vt(nt,ht),i.absoluteInfo.origin=vt(nt,ht),Qa(e,i.beforeInfo,B,T,b),Qa(e,i.afterInfo,B,T,b),Qa(e,i.absoluteInfo,B,T,b)},k=function(st){var K=ee([[0,0],[y,0],[0,w],[y,w]],st);E(K)}}i.startClientX=B,i.startClientY=T,i.direction=v,i.beforeDirection=g,i.startValue=0,i.datas={},Sa(e,t,"rotate");var J=!1,G=!1;if(i.isControl&&i.resolveAble){var tt=i.resolveAble;tt==="resizable"&&(G=Xl.dragControlStart(e,R(R({},new Yn("resizable").dragStart([0,0],t)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}G||(J=me.dragStart(e,new Yn().dragStart([0,0],t))),E(Jx(e));var ot=Ct(e,t,R(R({set:function(st){i.startValue=st*Math.PI/180},setFixedDirection:k,setFixedPosition:E},Ca(e,t)),{dragStart:J,resizeStart:G})),et=ct(e,"onRotateStart",ot);return i.isRotate=et!==!1,f.snapRenderInfo={request:t.isRequest},i.isRotate?ot:!1},dragControl:function(e,t){var r,n,i,s=t.datas,o=t.clientDistX,a=t.clientDistY,l=t.parentRotate,u=t.parentFlag,c=t.isPinch,f=t.groupDelta,h=t.resolveMatrix,d=s.beforeDirection,p=s.beforeInfo,v=s.afterInfo,g=s.absoluteInfo,m=s.isRotate,b=s.startValue,C=s.rect,S=s.startClientX,_=s.startClientY;if(m){ba(e,t,"rotate");var y=Tb(t),w=d*y,x=e.props.parentMoveable,E=0,k,B,T=0,P,O,L=0,W,H,z=180/Math.PI*b,Y=g.startValue,J=!1,G=S+o,tt=_+a;if(!u&&"parentDist"in t){var ot=t.parentDist;k=ot,P=ot,W=ot}else c||u?(k=qs(l,d,p),P=qs(l,w,v),W=qs(l,w,g)):(k=tl(G,tt,d,p),P=tl(G,tt,w,v),W=tl(G,tt,w,g),J=!0);if(B=z+k,O=z+P,H=Y+W,ct(e,"onBeforeRotate",Ct(e,t,{beforeRotation:B,rotation:O,absoluteRotation:H,setRotation:function(M){P=M-z,k=P,W=P}},!0)),r=A(el(e,C,p,k,z,J),3),E=r[0],k=r[1],B=r[2],n=A(el(e,C,v,P,z,J),3),T=n[0],P=n[1],O=n[2],i=A(el(e,C,g,W,Y,J),3),L=i[0],W=i[1],H=i[2],!(!L&&!T&&!E&&!x&&!h)){var et=xa(s,"rotate(".concat(O,"deg)"),"rotate(".concat(P,"deg)"));h&&(s.fixedPosition=Zu(e,s.targetAllTransform,s.fixedDirection,s.fixedOffset,s));var st=Nb(e,P,s),K=vt(Mt(f||[0,0],st),s.prevInverseDist||[0,0]);s.prevInverseDist=st,s.requestValue=null;var at=jp(e,et,K,c,t),ft=at,mt=Sr([G,tt],g.startAbsoluteOrigin)-g.startDist,wt=void 0;if(s.resolveAble==="resizable"){var nt=Xl.dragControl(e,R(R({},hs(t,e.state,[t.deltaX,t.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:mt}));nt&&(wt=nt,ft=_v(ft,nt,t))}var ht=Ct(e,t,R(R({delta:T,dist:P,rotate:O,rotation:O,beforeDist:k,beforeDelta:E,beforeRotate:B,beforeRotation:B,absoluteDist:W,absoluteDelta:L,absoluteRotate:H,absoluteRotation:H,isPinch:!!c,resize:wt},at),ft));return ct(e,"onRotate",ht),ht}}},dragControlEnd:function(e,t){var r=t.datas;if(r.isRotate){r.isRotate=!1;var n=Be(e,t,{});return ct(e,"onRotateEnd",n),n}},dragGroupControlCondition:Ul,dragGroupControlStart:function(e,t){var r=t.datas,n=e.state,i=n.left,s=n.top,o=n.beforeOrigin,a=this.dragControlStart(e,t);if(!a)return!1;a.set(r.beforeDirection*e.rotation);var l=wr(e,this,"dragControlStart",t,function(f,h){var d=f.state,p=d.left,v=d.top,g=d.beforeOrigin,m=Mt(vt([p,v],[i,s]),vt(g,o));return h.datas.startGroupClient=m,h.datas.groupClient=m,R(R({},h),{parentRotate:0})}),u=R(R({},a),{targets:e.props.targets,events:l}),c=ct(e,"onRotateGroupStart",u);return r.isRotate=c!==!1,r.isRotate?a:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isRotate){Ma(e,"onBeforeRotate",function(u){ct(e,"onBeforeRotateGroup",Ct(e,t,R(R({},u),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var i=r.beforeDirection,s=n.beforeDist,o=s/180*Math.PI,a=wr(e,this,"dragControl",t,function(u,c){var f=c.datas.startGroupClient,h=A(c.datas.groupClient,2),d=h[0],p=h[1],v=A(ls(f,o*i),2),g=v[0],m=v[1],b=[g-d,m-p];return c.datas.groupClient=[g,m],R(R({},c),{parentRotate:s,groupDelta:b})});e.rotation=i*n.beforeRotation;var l=R({targets:e.props.targets,events:a,set:function(u){e.rotation=u},setGroupRotation:function(u){e.rotation=u}},n);return ct(e,"onRotateGroup",l),l}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isRotate){this.dragControlEnd(e,t);var i=wr(e,this,"dragControlEnd",t),s=Be(e,t,{targets:e.props.targets,events:i});return ct(e,"onRotateGroupEnd",s),r}},request:function(e){var t={},r=0,n=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(i){return"deltaRotate"in i?r+=i.deltaRotate:"rotate"in i&&(r=i.rotate-n),{datas:t,parentDist:r}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Sx(e,t){var r,n=e.direction,i=e.classNames,s=e.size,o=e.pos,a=e.zoom,l=e.key,u=n==="horizontal",c=u?"Y":"X";return t.createElement("div",{key:l,className:i.join(" "),style:(r={},r[u?"width":"height"]="".concat(s),r.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(a,")"),r)})}function ic(e,t){return Sx(R(R({},e),{classNames:Q([pt("line","guideline",e.direction)],A(e.classNames),!1).filter(function(r){return r}),size:e.size||"".concat(e.sizeValue,"px"),pos:e.pos||e.posValue.map(function(r){return"".concat(xt(r,.1),"px")})}),t)}function rh(e,t,r,n,i,s,o,a){var l=e.props.zoom;return r.map(function(u,c){var f=u.type,h=u.pos,d=[0,0];return d[o]=n,d[o?0:1]=-i+h,ic({key:"".concat(t,"TargetGuideline").concat(c),classNames:[pt("target","bold",f)],posValue:d,sizeValue:s,zoom:l,direction:t},a)})}function nh(e,t,r,n,i,s){var o=e.props,a=o.zoom,l=o.isDisplayInnerSnapDigit,u=t==="horizontal"?Xr:Ur,c=i[u.start],f=i[u.end];return r.filter(function(h){var d=h.hide,p=h.elementRect;if(d)return!1;if(l&&p){var v=p.rect;if(v[u.start]<=c&&f<=v[u.end])return!1}return!0}).map(function(h,d){var p=h.pos,v=h.size,g=h.element,m=h.className,b=[-n[0]+p[0],-n[1]+p[1]];return ic({key:"".concat(t,"-default-guideline-").concat(d),classNames:g?[pt("bold"),m]:[pt("normal"),m],direction:t,posValue:b,sizeValue:v,zoom:a},s)})}function di(e,t,r,n,i,s,o,a){var l,u=e.props,c=u.snapDigit,f=c===void 0?0:c,h=u.isDisplaySnapDigit,d=h===void 0?!0:h,p=u.snapDistFormat,v=p===void 0?function(_,y){return _}:p,g=u.zoom,m=t==="horizontal"?"X":"Y",b=t==="vertical"?"height":"width",C=Math.abs(i),S=d?parseFloat(C.toFixed(f)):0;return a.createElement("div",{key:"".concat(t,"-").concat(r,"-guideline-").concat(n),className:pt("guideline-group",t),style:(l={left:"".concat(s[0],"px"),top:"".concat(s[1],"px")},l[b]="".concat(C,"px"),l)},ic({direction:t,classNames:[pt(r),o],size:"100%",posValue:[0,0],sizeValue:C,zoom:g},a),a.createElement("div",{className:pt("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},S>0?v(S,t):""))}function wx(e,t,r,n){var i=e==="vertical"?0:1,s=e==="vertical"?1:0,o=i?Xr:Ur,a=r[o.start],l=r[o.end];return Ev(t,function(u){return u.pos[i]}).map(function(u){var c=[],f=[],h=[];return u.forEach(function(d){var p,v,g=d.element,m=d.elementRect.rect;if(m[o.end]<a)c.push(d);else if(l<m[o.start])f.push(d);else if(m[o.start]<=a&&l<=m[o.end]&&n){var b=d.pos,C={element:g,rect:R(R({},m),(p={},p[o.end]=m[o.start],p))},S={element:g,rect:R(R({},m),(v={},v[o.start]=m[o.end],v))},_=[0,0],y=[0,0];_[i]=b[i],_[s]=b[s],y[i]=b[i],y[s]=b[s]+d.size,c.push({type:e,pos:_,size:0,elementRect:C,direction:"",elementDirection:"end"}),f.push({type:e,pos:y,size:0,elementRect:S,direction:"",elementDirection:"start"})}}),c.sort(function(d,p){return p.pos[s]-d.pos[s]}),f.sort(function(d,p){return d.pos[s]-p.pos[s]}),{total:u,start:c,end:f,inner:h}})}function _x(e,t,r,n,i){var s=e.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(a){var l=t.filter(function(g){return g.type===a}),u=a==="vertical"?1:0,c=u?0:1,f=wx(a,l,n,s),h=u?Ur:Xr,d=u?Xr:Ur,p=n[h.start],v=n[h.end];f.forEach(function(g){var m=g.total,b=g.start,C=g.end,S=g.inner,_=r[c]+m[0].pos[c]-n[d.start],y=n;b.forEach(function(w){var x=w.elementRect.rect,E=y[h.start]-x[h.end];if(E>0){var k=[0,0];k[u]=r[u]+y[h.start]-p-E,k[c]=_,o.push(di(e,a,"dashed",o.length,E,k,w.className,i))}y=x}),y=n,C.forEach(function(w){var x=w.elementRect.rect,E=x[h.start]-y[h.end];if(E>0){var k=[0,0];k[u]=r[u]+y[h.end]-p,k[c]=_,o.push(di(e,a,"dashed",o.length,E,k,w.className,i))}y=x}),S.forEach(function(w){var x=w.elementRect.rect,E=p-x[h.start],k=x[h.end]-v,B=[0,0],T=[0,0];B[u]=r[u]-E,B[c]=_,T[u]=r[u]+v-p,T[c]=_,o.push(di(e,a,"dashed",o.length,E,B,w.className,i)),o.push(di(e,a,"dashed",o.length,k,T,w.className,i))})})}),o}function Ex(e,t,r,n,i){var s=[];return["horizontal","vertical"].forEach(function(o){var a=t.filter(function(g){return g.type===o}).slice(0,1),l=o==="vertical"?0:1,u=l?0:1,c=l?Ur:Xr,f=l?Xr:Ur,h=n[c.start],d=n[c.end],p=n[f.start],v=n[f.end];a.forEach(function(g){var m=g.gap,b=g.gapRects,C=Math.max.apply(Math,Q([p],A(b.map(function(y){var w=y.rect;return w[f.start]})),!1)),S=Math.min.apply(Math,Q([v],A(b.map(function(y){var w=y.rect;return w[f.end]})),!1)),_=(C+S)/2;C===S||_===(p+v)/2||b.forEach(function(y){var w=y.rect,x=y.className,E=[r[0],r[1]];if(w[c.end]<h)E[l]+=w[c.end]-h;else if(d<w[c.start])E[l]+=w[c.start]-h-m;else return;E[u]+=_-p,s.push(di(e,l?"vertical":"horizontal","gap",s.length,m,E,x,i))})})}),s}function Yl(e){var t,r,n=e.state,i=n.containerClientRect,s=n.hasFixed,o=i.overflow,a=i.scrollHeight,l=i.scrollWidth,u=i.clientHeight,c=i.clientWidth,f=i.clientLeft,h=i.clientTop,d=e.props,p=d.snapGap,v=p===void 0?!0:p,g=d.verticalGuidelines,m=d.horizontalGuidelines,b=d.snapThreshold,C=b===void 0?5:b,S=d.maxSnapElementGuidelineDistance,_=S===void 0?1/0:S,y=d.isDisplayGridGuidelines,w=Ne(We(e.state)),x=w.top,E=w.left,k=w.bottom,B=w.right,T={top:x,left:E,bottom:k,right:B,center:(E+B)/2,middle:(x+k)/2},P=Px(e),O=Q([],A(P),!1),L=((r=(t=n.snapThresholdInfo)===null||t===void 0?void 0:t.multiples)!==null&&r!==void 0?r:[1,1]).map(function(Y){return Y*C});v&&O.push.apply(O,Q([],A(kx(e,T,L)),!1));var W=R({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(O.push.apply(O,Q([],A(Tx(e,o?l:c,o?a:u,f,h,W,y)),!1)),s){var H=i.left,z=i.top;W.left+=H,W.top+=z,W.right+=H,W.bottom+=z}return O.push.apply(O,Q([],A(hv(m||!1,g||!1,o?l:c,o?a:u,f,h,W)),!1)),O=O.filter(function(Y){var J=Y.element,G=Y.elementRect,tt=Y.type;if(!J||!G)return!0;var ot=G.rect;return fv(T,ot,tt,_)}),O}function kx(e,t,r){var n=e.props,i=n.maxSnapElementGuidelineDistance,s=i===void 0?1/0:i,o=n.maxSnapElementGapDistance,a=o===void 0?1/0:o,l=e.state.elementRects,u=[];return[["vertical",Xr,Ur],["horizontal",Ur,Xr]].forEach(function(c){var f=A(c,3),h=f[0],d=f[1],p=f[2],v=t[d.start],g=t[d.end],m=t[d.center],b=t[p.start],C=t[p.end],S={left:r[0],top:r[1]};function _(x){var E=x.rect,k=S[d.start];return E[d.end]<v+k?v-E[d.end]:g-k<E[d.start]?E[d.start]-g:-1}var y=l.filter(function(x){var E=x.rect;return E[p.start]>C||E[p.end]<b?!1:_(x)>0}).sort(function(x,E){return _(x)-_(E)}),w=[];y.forEach(function(x){y.forEach(function(E){if(x!==E){var k=x.rect,B=E.rect,T=k[p.start],P=k[p.end],O=B[p.start],L=B[p.end];T>L||O>P||w.push([x,E])}})}),w.forEach(function(x){var E=A(x,2),k=E[0],B=E[1],T=k.rect,P=B.rect,O=T[d.start],L=T[d.end],W=P[d.start],H=P[d.end],z=S[d.start],Y=0,J=0,G=!1,tt=!1,ot=!1;if(L<=v&&g<=W){if(tt=!0,Y=(W-L-(g-v))/2,J=L+Y+(g-v)/2,U(J-m)>z)return}else if(L<W&&H<v+z){if(G=!0,Y=W-L,J=H+Y,U(J-v)>z)return}else if(L<W&&g-z<O){if(ot=!0,Y=W-L,J=O-Y,U(J-g)>z)return}else return;Y&&fv(t,P,h,s)&&(Y>a||u.push({type:h,pos:h==="vertical"?[J,0]:[0,J],element:B.element,size:0,className:B.className,isStart:G,isCenter:tt,isEnd:ot,gap:Y,hide:!0,gapRects:[k,B],direction:"",elementDirection:""}))})}),u}function Mx(e,t,r,n){var i,s,o=e.props,a=e.state,l=o.snapGridAll,u=o.snapGridWidth,c=u===void 0?0:u,f=o.snapGridHeight,h=f===void 0?0:f,d=a.snapRenderInfo,p=d&&(((i=d.direction)===null||i===void 0?void 0:i[0])||((s=d.direction)===null||s===void 0?void 0:s[1])),v=e.moveables;if(l&&v&&p&&(c||h)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=e.getRect(),m=g.children,b=d.direction;if(m){var C=b.map(function(_,y){var w=y===0?{snapSize:c,posName:"left",sizeName:"width",clientOffset:n.left-t}:{snapSize:h,posName:"top",sizeName:"height",clientOffset:n.top-r},x=w.snapSize,E=w.posName,k=w.sizeName,B=w.clientOffset;if(!x)return{dir:_,multiple:1,snapSize:x,snapOffset:0};var T=g[k],P=g[E],O=ep(m.map(function(G){return[G[E]-P,G[k],T-G[k]-G[E]+P]})).filter(function(G){return G}).sort(function(G,tt){return G-tt}),L=O[0],W=O.map(function(G){return xt(G/L,.1)*x}),H=1,z=xt(T/L,.1);for(H=1;H<=10&&!W.every(function(G){return G*H%1===0});++H);var Y=(-_+1)/2,J=go(P-B,P-B+T,Y,1-Y);return{multiple:z*H,dir:_,snapSize:x,snapOffset:Math.round(J/x)}}),S=C.map(function(_){return _.multiple||1});a.snapThresholdInfo.multiples=S,a.snapThresholdInfo.offset=C.map(function(_){return _.snapOffset}),C.forEach(function(_,y){_.snapSize})}}else a.snapThresholdInfo=null}function Tx(e,t,r,n,i,s,o){n===void 0&&(n=0),i===void 0&&(i=0);var a=e.props,l=e.state,u=a.snapGridWidth,c=u===void 0?0:u,f=a.snapGridHeight,h=f===void 0?0:f,d=[],p=s.left,v=s.top,g=[0,0];Mx(e,n,i,s);var m=l.snapThresholdInfo,b=c,C=h;if(m&&(c*=m.multiples[0]||1,h*=m.multiples[1]||1,g=m.offset),h){for(var S=function(y){d.push({type:"horizontal",pos:[p,xt(g[1]*C+y-i+v,.1)],className:pt("grid-guideline"),size:t,hide:!o,direction:"",grid:!0})},_=0;_<=r*2;_+=h)S(_);for(var _=-h;_>=-r;_-=h)S(_)}if(c){for(var S=function(w){d.push({type:"vertical",pos:[xt(g[0]*b+w-n+p,.1),v],className:pt("grid-guideline"),size:r,hide:!o,direction:"",grid:!0})},_=0;_<=t*2;_+=c)S(_);for(var _=-c;_>=-t;_-=c)S(_)}return d}function fv(e,t,r,n){return r==="horizontal"?U(e.right-t.left)<=n||U(e.left-t.right)<=n||e.left<=t.right&&t.left<=e.right:r==="vertical"?U(e.bottom-t.top)<=n||U(e.top-t.bottom)<=n||e.top<=t.bottom&&t.top<=e.bottom:!0}function Px(e){var t=e.state,r=e.props.elementGuidelines,n=r===void 0?[]:r;if(!n.length)return t.elementRects=[],[];var i=(t.elementRects||[]).filter(function(h){return!h.refresh}),s=n.map(function(h){return er(h)&&"element"in h?R(R({},h),{element:dr(h.element,!0)}):{element:dr(h,!0)}}).filter(function(h){return h.element}),o=W1(i.map(function(h){return h.element}),s.map(function(h){return h.element})),a=o.maintained,l=o.added,u=[];a.forEach(function(h){var d=A(h,2),p=d[0],v=d[1];u[v]=i[p]}),Dx(e,l.map(function(h){return s[h]})).map(function(h,d){u[l[d]]=h}),t.elementRects=u;var c=tc(e.props.elementSnapDirections),f=[];return u.forEach(function(h){var d=h.element,p=h.top,v=p===void 0?c.top:p,g=h.left,m=g===void 0?c.left:g,b=h.right,C=b===void 0?c.right:b,S=h.bottom,_=S===void 0?c.bottom:S,y=h.center,w=y===void 0?c.center:y,x=h.middle,E=x===void 0?c.middle:x,k=h.className,B=h.rect,T=ec({top:v,right:C,left:m,bottom:_,center:w,middle:E},B),P=T.horizontal,O=T.vertical,L=T.horizontalNames,W=T.verticalNames,H=B.top,z=B.left,Y=B.right-z,J=B.bottom-H,G=[Y,J];O.forEach(function(tt,ot){f.push({type:"vertical",element:d,pos:[xt(tt,.1),H],size:J,sizes:G,className:k,elementRect:h,elementDirection:Yf[W[ot]]||W[ot],direction:""})}),P.forEach(function(tt,ot){f.push({type:"horizontal",element:d,pos:[z,xt(tt,.1)],size:Y,sizes:G,className:k,elementRect:h,elementDirection:Yf[L[ot]]||L[ot],direction:""})})}),f}function ih(e,t){return e?e.map(function(r){var n=er(r)?r:{pos:r},i=n.pos;return Xn(i)?n:R(R({},n),{pos:Rt(i,t)})}):[]}function hv(e,t,r,n,i,s,o){i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var a=[],l=o.left,u=o.top,c=o.bottom,f=o.right,h=r+f-l,d=n+c-u;return ih(e,d).forEach(function(p){a.push({type:"horizontal",pos:[l,xt(p.pos-s+u,.1)],size:h,className:p.className,direction:""})}),ih(t,h).forEach(function(p){a.push({type:"vertical",pos:[xt(p.pos-i+l,.1),u],size:d,className:p.className,direction:""})}),a}function Dx(e,t){if(!t.length)return[];var r=e.props.groupable,n=e.state,i=n.containerClientRect,s=n.rootMatrix,o=n.is3d,a=n.offsetDelta,l=o?4:3,u=A(tx(s,i,l),2),c=u[0],f=u[1],h=r?0:a[0],d=r?0:a[1];return t.map(function(p){var v=p.element.getBoundingClientRect(),g=v.left-c-h,m=v.top-f-d,b=m+v.height,C=g+v.width,S=A(Jn(s,[g,m],l),2),_=S[0],y=S[1],w=A(Jn(s,[C,b],l),2),x=w[0],E=w[1];return R(R({},p),{rect:{left:_,right:x,top:y,bottom:E,center:(_+x)/2,middle:(y+E)/2}})})}function As(e){var t=e.state,r=t.container,n=e.props.snapContainer||r;if(t.snapContainer===n&&t.guidelines&&t.guidelines.length)return!1;var i=t.containerClientRect,s={left:0,top:0,bottom:0,right:0};if(r!==n){var o=dr(n,!0);if(o){var a=Ii(o),l=ch(t,[a.left-i.left,a.top-i.top]),u=ch(t,[a.right-i.right,a.bottom-i.bottom]);s.left=xt(l[0],1e-5),s.top=xt(l[1],1e-5),s.right=xt(u[0],1e-5),s.bottom=xt(u[1],1e-5)}}return t.snapContainer=n,t.snapOffset=s,t.guidelines=Yl(e),t.enableSnap=!0,!0}function dv(e,t,r,n,i,s){var o=xn(e,t,r,s?4:3),a=ee(o,n);return oc(o,vt(i,a))}function sh(e){return e?e/U(e):0}function Rx(e,t,r,n,i,s){var o=s.fixedDirection,a=ix(r,o,n),l=nc(e,t,r,n),u=Q(Q([],A(gx(e,t,a,n,i,s)),!1),A(av(e,l,s)),!1),c=So(u,0),f=So(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function Ax(e,t,r,n,i,s,o,a,l){var u=ee(t,o),c=Ea(e,a,{vertical:[u[0]],horizontal:[u[1]]}),f=c.horizontal.offset,h=c.vertical.offset;if(xt(h,Wl)||xt(f,Wl)){var d=A(gr({datas:l,distX:-h,distY:-f}),2),p=d[0],v=d[1],g=Math.min(i||1/0,r+o[0]*p),m=Math.min(s||1/0,n+o[1]*v);return[g-r,m-n]}return[0,0]}function pv(e,t,r,n,i,s,o,a){for(var l=We(e.state),u=e.props.keepRatio,c=0,f=0,h=0;h<2;++h){var d=t(c,f),p=Rx(e,d,i,u,o,a),v=p.width,g=p.height,m=v.isBound,b=g.isBound,C=v.offset,S=g.offset;if(h===1&&(m||(C=0),b||(S=0)),h===0&&o&&!m&&!b)return[0,0];if(u){var _=U(C)*(r?1/r:1),y=U(S)*(n?1/n:1),w=m&&b?_<y:b||!m&&_<y;w?C=r*S/n:S=n*C/r}c+=C,f+=S}if(!u&&i[0]&&i[1]){var x=yx(e,l,i,s,a),E=x.maxWidth,k=x.maxHeight,B=A(Ax(e,t(c,f).map(function(O){return O.map(function(L){return xt(L,Wl)})}),r+c,n+f,E,k,i,o,a),2),C=B[0],S=B[1];c+=C,f+=S}return[c,f]}function Bi(e){return e<0&&(e=e%360+360),e%=360,e}function Bx(e,t){t=Bi(t);var r=Math.floor(e/360),n=r*360+360-t,i=r*360+t;return U(e-n)<U(e-i)?n:i}function rl(e,t){e=Bi(e),t=Bi(t);var r=Bi(e-t);return Math.min(r,360-r)}function Ox(e,t,r,n){var i,s=e.props,o=(i=s[Qp])!==null&&i!==void 0?i:5,a=s[tv];if(ai(e,"rotatable")){var l=t.pos1,u=t.pos2,c=t.pos3,f=t.pos4,h=t.origin,d=r*Math.PI/180,p=[l,u,c,f].map(function(S){return vt(S,h)}),v=p.map(function(S){return ls(S,d)}),g=Q(Q([],A(Kb(e,p,v,h,r)),!1),A(cx(e,p,v,h,r)),!1);g.sort(function(S,_){return U(S-r)-U(_-r)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:r}}if(a!=null&&a.length&&o){var b=a.slice().sort(function(S,_){return rl(S,n)-rl(_,n)}),C=b[0];if(rl(C,n)<=o)return{isSnap:!0,dist:r+Bx(n,C)-n}}return{isSnap:!1,dist:r}}function Ix(e,t,r,n,i,s,o){if(!ai(e,"resizable"))return[0,0];var a=o.fixedDirection,l=o.nextAllMatrix,u=e.state,c=u.allMatrix,f=u.is3d;return pv(e,function(h,d){return dv(l||c,t+h,r+d,a,i,f)},t,r,n,i,s,o)}function Lx(e,t,r,n,i){if(!ai(e,"scalable"))return[0,0];var s=i.startOffsetWidth,o=i.startOffsetHeight,a=i.fixedPosition,l=i.fixedDirection,u=i.is3d,c=pv(e,function(f,h){return dv(Ib(i,Mt(t,[f/s,h/o])),s,o,l,a,u)},s,o,r,a,n,i);return[c[0]/s,c[1]/o]}function Fx(e,t){t.absolutePoses=We(e.state)}function oh(e){var t=[];return e.forEach(function(r){r.guidelineInfos.forEach(function(n){var i=n.guideline;Te(t,function(s){return s.guideline===i})||(i.direction="",t.push({guideline:i,posInfo:r}))})}),t.map(function(r){var n=r.guideline,i=r.posInfo;return R(R({},n),{direction:i.direction})})}function ah(e,t,r,n,i,s){var o=Qu(wa(e,s),t,r),a=o.vertical,l=o.horizontal,u=Rn();a.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.left=!0),p.direction==="end"&&(u.right=!0),n.push({type:"bounds",pos:p.pos}))}),l.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.top=!0),p.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:p.pos}))});var c=fx(e),f=c.boundMap,h=c.vertical,d=c.horizontal;return h.forEach(function(p){_r(n,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),d.forEach(function(p){_r(i,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||i.push({type:"bounds",pos:p})}),{boundMap:u,innerBoundMap:f}}var zx=uc("",["resizable","scalable"]),Nx={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",Qp,tv,ev,rv,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(e,t){var r=e.state,n=r.top,i=r.left,s=r.pos1,o=r.pos2,a=r.pos3,l=r.pos4,u=r.snapRenderInfo,c=e.props.snapRenderThreshold,f=c===void 0?1:c;if(!u||!u.render||!ai(e,""))return Bn(e,"boundMap",Rn(),function(et){return JSON.stringify(et)}),Bn(e,"innerBoundMap",Rn(),function(et){return JSON.stringify(et)}),[];r.guidelines=Yl(e);var h=Math.min(s[0],o[0],a[0],l[0]),d=Math.min(s[1],o[1],a[1],l[1]),p=u.externalPoses||[],v=We(e.state),g=[],m=[],b=[],C=[],S=[],_=Ne(v),y=_.width,w=_.height,x=_.top,E=_.left,k=_.bottom,B=_.right,T={left:E,right:B,top:x,bottom:k,center:(E+B)/2,middle:(x+k)/2},P=p.length>0,O=P?Ne(p):{};if(!u.request){if(u.direction&&S.push(nx(e,v,u.direction,f,f)),u.snap){var L=Ne(v);u.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),S.push(qf(e,L,f,f))}P&&(u.center&&(O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2),S.push(qf(e,O,f,f))),S.forEach(function(et){var st=et.vertical.posInfos,K=et.horizontal.posInfos;g.push.apply(g,Q([],A(st.filter(function(at){var ft=at.guidelineInfos;return ft.some(function(mt){var wt=mt.guideline;return!wt.hide})}).map(function(at){return{type:"snap",pos:at.pos}})),!1)),m.push.apply(m,Q([],A(K.filter(function(at){var ft=at.guidelineInfos;return ft.some(function(mt){var wt=mt.guideline;return!wt.hide})}).map(function(at){return{type:"snap",pos:at.pos}})),!1)),b.push.apply(b,Q([],A(oh(st)),!1)),C.push.apply(C,Q([],A(oh(K)),!1))})}var W=ah(e,[E,B],[x,k],g,m),H=W.boundMap,z=W.innerBoundMap;P&&ah(e,[O.left,O.right],[O.top,O.bottom],g,m,u.externalBounds);var Y=Q(Q([],A(b),!1),A(C),!1),J=Y.filter(function(et){return et.element&&!et.gapRects}),G=Y.filter(function(et){return et.gapRects}).sort(function(et,st){return et.gap-st.gap});ct(e,"onSnap",{guidelines:Y.filter(function(et){var st=et.element;return!st}),elements:J,gaps:G},!0);var tt=Bn(e,"boundMap",H,function(et){return JSON.stringify(et)},Rn()),ot=Bn(e,"innerBoundMap",z,function(et){return JSON.stringify(et)},Rn());return(H===tt||z===ot)&&ct(e,"onBound",{bounds:H,innerBounds:z},!0),Q(Q(Q(Q(Q(Q([],A(_x(e,J,[h,d],T,t)),!1),A(Ex(e,G,[h,d],T,t)),!1),A(nh(e,"horizontal",C,[i,n],T,t)),!1),A(nh(e,"vertical",b,[i,n],T,t)),!1),A(rh(e,"horizontal",m,h,n,y,0,t)),!1),A(rh(e,"vertical",g,d,i,w,1,t)),!1)},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},As(e)},drag:function(e){var t=e.state;As(e)||(t.guidelines=Yl(e)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){if(zx(e,t)||Ul(e,t))return!0;if(!t.isRequest&&t.inputEvent)return te(t.inputEvent.target,pt("snap-control"))},dragControlStart:function(e){e.state.snapRenderInfo=null,As(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,As(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function Gx(e,t){return[e[0]*t[0],e[1]*t[1]]}function pt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Iy.apply(void 0,Q([qu],A(e),!1))}function vv(e){e()}function Wx(e){return!e||e==="none"?[1,0,0,1,0,0]:er(e)?e:Ui(e)}function Oi(e,t,r){return yo(t,dn(r,t),e,dn(r.map(function(n){return-n}),t))}function Hx(e,t,r){if(t==="%"){var n=sc(e.ownerSVGElement);return n[r?"width":"height"]/100}return 1}function Vx(e){var t=jx(ac(e,":before"));return t.map(function(r,n){var i=is(r),s=i.value,o=i.unit;return s*Hx(e,o,n===0)})}function _o(e){return e?e.split(" "):["0","0"]}function jx(e){return _o(e.transformOrigin)}function gv(e){var t=Pe(e),r=t("transform");if(r&&r!=="none")return r;if("transform"in e){var n=e.transform,i=n.baseVal;if(!i)return"";var s=i.length;if(!s)return"";for(var o=[],a=function(u){var c=i[u].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return c[f]}).join(", "),")"))},l=0;l<s;++l)a(l);return o.join(" ")}return""}function qi(e,t,r,n,i){var s,o,a=zu(e)||Yr(e),l=!1,u,c;if(!e||r)u=e;else{var f=(s=e==null?void 0:e.assignedSlot)===null||s===void 0?void 0:s.parentElement,h=e.parentElement;f?(l=!0,c=h,u=f):u=h}for(var d=!1,p=e===t||u===t,v="relative",g=1,m=parseFloat(i==null?void 0:i("zoom"))||1,b=i==null?void 0:i("position");u&&u!==a;){t===u&&(p=!0);var C=Pe(u),S=u.tagName.toLowerCase(),_=gv(u),y=C("willChange"),w=parseFloat(C("zoom"))||1;if(v=C("position"),n&&w!==1){g=w;break}if(!r&&n&&m!==1&&b&&b!=="absolute"||S==="svg"||S==="foreignobject"||v!=="static"||_&&_!=="none"||y==="transform")break;var x=(o=e==null?void 0:e.assignedSlot)===null||o===void 0?void 0:o.parentNode,E=u.parentNode;x&&(l=!0,c=E);var k=E;if(k&&k.nodeType===11){u=k.host,d=!0,v=Pe(u)("position");break}u=k,v="relative"}return{offsetZoom:g,hasSlot:l,parentSlotElement:c,isCustomElement:d,isStatic:v==="static",isEnd:p||!u||u===a,offsetParent:u||a}}function $x(e,t){var r,n=e.tagName.toLowerCase(),i=e.offsetLeft,s=e.offsetTop,o=Pe(e),a=ns(i),l=!a,u,c;return!l&&(n!=="svg"||e.ownerSVGElement)?(u=Ip?Vx(e):_o(o("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice(),l=!0,n==="svg"?(i=0,s=0):(r=A(Yx(e,u,e===t&&t.tagName.toLowerCase()==="g"),4),i=r[0],s=r[1],u[0]=r[2],u[1]=r[3])):(u=_o(o("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice()),{tagName:n,isSVG:a,hasOffset:l,offset:[i||0,s||0],origin:u,targetOrigin:c}}function mv(e,t){var r=Pe(e),n=Pe(Yr(e)),i=n("position");if(!t&&(!i||i==="static"))return[0,0];var s=parseInt(n("marginLeft"),10),o=parseInt(n("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(o=0),(r("left")!=="auto"||r("right")!=="auto")&&(s=0)),[s,o]}function ql(e){e.forEach(function(t){var r=t.matrix;r&&(t.matrix=rr(r,3,4))})}function Xx(e){for(var t=e.parentElement,r=!1,n=Yr(e);t;){var i=ac(t).transform;if(i&&i!=="none"){r=!0;break}if(t===n)break;t=t.parentElement}return{fixedContainer:t||n,hasTransform:r}}function ka(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat(Mp(e,!t).join(","),")")}function sc(e){var t=e.clientWidth,r=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:r};var n=e.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||t,height:i.height||r,clientWidth:t,clientHeight:r}}function Ux(e,t){var r,n=sc(e),i=n.width,s=n.height,o=n.clientWidth,a=n.clientHeight,l=o/i,u=a/s,c=e.preserveAspectRatio.baseVal,f=c.align,h=c.meetOrSlice,d=[0,0],p=[l,u],v=[0,0];if(f!==1){var g=(f-2)%3,m=Math.floor((f-2)/3);d[0]=i*g/2,d[1]=s*m/2;var b=h===2?Math.max(u,l):Math.min(l,u);p[0]=b,p[1]=b,v[0]=(o-i)/2*g,v[1]=(a-s)/2*m}var C=$u(p,t);return r=A(v,2),C[t*(t-1)]=r[0],C[t*(t-1)+1]=r[1],Oi(C,t,d)}function Yx(e,t,r){var n=e.tagName.toLowerCase();if(!e.getBBox||!r&&n==="g")return[0,0,0,0];var i=Pe(e),s=i("transform-box")==="fill-box",o=e.getBBox(),a=sc(e.ownerSVGElement),l=o.x,u=o.y;n==="foreignobject"&&!l&&!u&&(l=parseFloat(e.getAttribute("x"))||0,u=parseFloat(e.getAttribute("y"))||0);var c=l-a.x,f=u-a.y,h=s?t[0]:t[0]-c,d=s?t[1]:t[1]-f;return[c,f,h,d]}function Vt(e,t,r){return de(e,hn(t,r),r)}function xn(e,t,r,n){return[[0,0],[t,0],[0,r],[t,r]].map(function(i){return Vt(e,i,n)})}function Ne(e){var t=e.map(function(u){return u[0]}),r=e.map(function(u){return u[1]}),n=Math.min.apply(Math,Q([],A(t),!1)),i=Math.min.apply(Math,Q([],A(r),!1)),s=Math.max.apply(Math,Q([],A(t),!1)),o=Math.max.apply(Math,Q([],A(r),!1)),a=s-n,l=o-i;return{left:n,top:i,right:s,bottom:o,width:a,height:l}}function lh(e,t,r,n){var i=xn(e,t,r,n);return Ne(i)}function qx(e,t,r,n,i){var s,o=e.target,a=e.origin,l=t.matrix,u=bv(o),c=u.offsetWidth,f=u.offsetHeight,h=r.getBoundingClientRect(),d=[0,0];r===Yr(r)&&(d=mv(o,!0));for(var p=o.getBoundingClientRect(),v=p.left-h.left+r.scrollLeft-(r.clientLeft||0)+d[0],g=p.top-h.top+r.scrollTop-(r.clientTop||0)+d[1],m=p.width,b=p.height,C=yo(n,i,l),S=lh(C,c,f,n),_=S.left,y=S.top,w=S.width,x=S.height,E=Vt(C,a,n),k=vt(E,[_,y]),B=[v+k[0]*m/w,g+k[1]*b/x],T=[0,0],P=0;++P<10;){var O=pr(i,n);s=A(vt(Vt(O,B,n),Vt(O,E,n)),2),T[0]=s[0],T[1]=s[1];var L=yo(n,i,dn(T,n),l),W=lh(L,c,f,n),H=W.left,z=W.top,Y=H-v,J=z-g;if(U(Y)<2&&U(J)<2)break;B[0]-=Y,B[1]-=J}return T.map(function(G){return Math.round(G)})}function Kx(e,t,r){var n=e.length===16,i=n?4:3,s=t.map(function(l){return Vt(e,l,i)}),o=r.left,a=r.top;return s.map(function(l){return[l[0]+o,l[1]+a]})}function Ge(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function yv(e,t){return Ge([t[0]-e[0],t[1]-e[1]])}function pi(e,t,r,n){r===void 0&&(r=1),n===void 0&&(n=Xt(e,t));var i=yv(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function Eo(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,s=r.reduce(function(a,l){return a+l[0]},0)/i,o=r.reduce(function(a,l){return a+l[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(s,"px, ").concat(o,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function vn(e,t){var r=e[t];return er(r)?R(R({},e),r):e}function bv(e){var t=e&&!ns(e.offsetWidth),r=0,n=0,i=0,s=0,o=0,a=0,l=0,u=0,c=0,f=0,h=0,d=0,p=1/0,v=1/0,g=1/0,m=1/0,b=0,C=0,S=!1;if(e)if(!t&&e.ownerSVGElement){var _=e.getBBox();S=!0,r=_.width,n=_.height,o=r,a=n,l=r,u=n,i=r,s=n}else{var y=Pe(e),w=e.style,x=y("boxSizing")==="border-box",E=parseFloat(y("borderLeftWidth"))||0,k=parseFloat(y("borderRightWidth"))||0,B=parseFloat(y("borderTopWidth"))||0,T=parseFloat(y("borderBottomWidth"))||0,P=parseFloat(y("paddingLeft"))||0,O=parseFloat(y("paddingRight"))||0,L=parseFloat(y("paddingTop"))||0,W=parseFloat(y("paddingBottom"))||0,H=P+O,z=L+W,Y=E+k,J=B+T,G=H+Y,tt=z+J,ot=y("position"),et=0,st=0;if("clientLeft"in e){var K=null;if(ot==="absolute"){var at=qi(e,Yr(e));K=at.offsetParent}else K=e.parentElement;if(K){var ft=Pe(K);et=parseFloat(ft("width")),st=parseFloat(ft("height"))}}c=Math.max(H,Rt(y("minWidth"),et)||0),f=Math.max(z,Rt(y("minHeight"),st)||0),p=Rt(y("maxWidth"),et),v=Rt(y("maxHeight"),st),isNaN(p)&&(p=1/0),isNaN(v)&&(v=1/0),b=Rt(w.width,0)||0,C=Rt(w.height,0)||0,o=parseFloat(y("width"))||0,a=parseFloat(y("height"))||0,l=U(o-b)<1?Tl(c,b||o,p):o,u=U(a-C)<1?Tl(f,C||a,v):a,r=l,n=u,i=l,s=u,x?(g=p,m=v,h=c,d=f,l=r-G,u=n-tt):(g=p+G,m=v+tt,h=c+G,d=f+tt,r=l+G,n=u+tt),i=l+H,s=u+z}return{svg:S,offsetWidth:r,offsetHeight:n,clientWidth:i,clientHeight:s,contentWidth:l,contentHeight:u,inlineCSSWidth:b,inlineCSSHeight:C,cssWidth:o,cssHeight:a,minWidth:c,minHeight:f,maxWidth:p,maxHeight:v,minOffsetWidth:h,minOffsetHeight:d,maxOffsetWidth:g,maxOffsetHeight:m}}function xv(e,t){return Xt(t>0?e[0]:e[1],t>0?e[1]:e[0])}function Bs(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Cv(e,t){var r=e===Yr(e)||e===zu(e),n={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(t.height,n.clientHeight),n.scrollHeight=Math.max(t.height,n.scrollHeight)),n.overflow=Pe(e)("overflow")!=="visible",R(R({},t),n)}function nl(e,t,r,n){var i=e.left,s=e.right,o=e.top,a=e.bottom,l=t.top,u=t.left,c={left:u+i,top:l+o,right:u+s,bottom:l+a,width:s-i,height:a-o};return r&&n?Cv(r,c):c}function Ii(e,t){var r=0,n=0,i=0,s=0;if(e){var o=e.getBoundingClientRect();r=o.left,n=o.top,i=o.width,s=o.height}var a={left:r,top:n,width:i,height:s,right:r+i,bottom:n+s};return e&&t?Cv(e,a):a}function Jx(e){var t=e.props,r=t.groupable,n=t.svgOrigin,i=e.getState(),s=i.offsetWidth,o=i.offsetHeight,a=i.svg,l=i.transformOrigin;return!r&&a&&n?fc(n,s,o):l}function Sv(e,t,r,n){var i;if(e)i=e;else if(t)i=[0,0];else{var s=r.target;i=wv(s,n)}return i}function wv(e,t){if(e){var r=e.getAttribute("data-rotation")||"",n=e.getAttribute("data-direction");if(t.deg=r,!!n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function oc(e,t){return[Mt(t,e[0]),Mt(t,e[1]),Mt(t,e[2]),Mt(t,e[3])]}function We(e){var t=e.left,r=e.top,n=e.pos1,i=e.pos2,s=e.pos3,o=e.pos4;return oc([n,i,s,o],[t,r])}function Kl(e,t){e[t?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(e)})}function An(e,t){var r=t?"controlGesto":"targetGesto",n=e[r];(n==null?void 0:n.isIdle())===!1&&Kl(e,t),n==null||n.unset(),e[r]=null}function xe(e,t){if(t){var r=oi(t);r.nextStyle=R(R({},r.nextStyle),e)}return{style:e,cssText:Er(e).map(function(n){return"".concat(Ys(n,"-"),": ").concat(e[n],";")}).join("")}}function _v(e,t,r){var n=t.afterTransform||t.transform;return R(R({},xe(R(R(R({},e.style),t.style),{transform:n}),r)),{afterTransform:n,transform:e.transform})}function Ct(e,t,r,n){var i=t.datas;i.datas||(i.datas={});var s=R(R({},r),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:i.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=t.stop)===null||o===void 0||o.call(t)}});return i.isStartEvent?n||(i.lastEvent=s):i.isStartEvent=!0,s}function Be(e,t,r){var n=t.datas,i="isDrag"in r?r.isDrag:t.isDrag;return n.datas||(n.datas={}),R(R({isDrag:i},r),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:n.lastEvent,isDouble:t.isDouble,datas:n.datas,isFirstDrag:!!t.isFirstDrag})}function Ma(e,t,r){e._emitter.on(t,r)}function ct(e,t,r,n,i){return e.triggerEvent(t,r,n,i)}function ac(e,t){return Hr(e).getComputedStyle(e,t)}function Os(e,t,r){var n={},i={};return e.filter(function(s){var o=s.name;if(n[o]||!t.some(function(a){return s[a]}))return!1;if(!r&&s.ableGroup){if(i[s.ableGroup])return!1;i[s.ableGroup]=!0}return n[o]=!0,!0})}function Jl(e,t){return e===t||e==null&&t==null}function uh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length-1,n=0;n<r;++n){var i=e[n];if(!ns(i))return i}return e[r]}function Ev(e,t){var r=[],n=[];return e.forEach(function(i,s){var o=t(i,s,e),a=n.indexOf(o),l=r[a]||[];a===-1&&(n.push(o),r.push(l)),l.push(i)}),r}function Zx(e,t){var r=[],n={};return e.forEach(function(i,s){var o=t(i,s,e),a=n[o];a||(a=[],n[o]=a,r.push(a)),a.push(i)}),r}function kv(e){return e.reduce(function(t,r){return t.concat(r)},[])}function Kn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(r,n){return U(n)-U(r)}),e[0]}function Jn(e,t,r){return de(pr(e,r),hn(t,r),r)}function Qx(e,t){var r,n=e.is3d,i=e.rootMatrix,s=n?4:3;return r=A(Jn(i,[t.distX,t.distY],s),2),t.distX=r[0],t.distY=r[1],t}function Le(e,t,r,n){if(!r[0]&&!r[1])return t;var i=Vt(e,[sh(r[0]||1),0],n),s=Vt(e,[0,sh(r[1]||1)],n),o=Vt(e,[r[0]/Ge(i),r[1]/Ge(s)],n);return Mt(t,o)}function Ye(e,t,r){return r?"".concat(e/t*100,"%"):"".concat(e,"px")}function ko(e){return U(e)<=Ce?0:e}function lc(e){return function(t){if(!t.isDragging(e))return"";var r=Hb(t,e),n=r.deg;return n?pt("view-control-rotation".concat(n)):""}}function uc(e,t){return t===void 0&&(t=[e]),function(r,n){if(n.isRequest)return t.some(function(s){return n.requestAble===s})?n.parentDirection:!1;var i=n.inputEvent.target;return te(i,pt("direction"))&&(!e||te(i,pt(e)))}}function tC(e,t,r){var n,i=Un(e,{"x%":function(_){return _/100*t.offsetWidth},"y%":function(_){return _/100*t.offsetHeight}}),s=e.slice(0,r<0?void 0:r),o=e.slice(0,r<0?void 0:r+1),a=e[r]||"",l=r<0?[]:e.slice(r),u=r<0?[]:e.slice(r+1),c=i.slice(0,r<0?void 0:r),f=i.slice(0,r<0?void 0:r+1),h=(n=i[r])!==null&&n!==void 0?n:Un([""])[0],d=r<0?[]:i.slice(r),p=r<0?[]:i.slice(r+1),v=h?[h]:[],g=En(c),m=En(f),b=En(d),C=En(p),S=Bt(g,b,4);return{transforms:e,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:En(v),afterFunctionMatrix:b,afterFunctionMatrix2:C,allFunctionMatrix:S,beforeFunctions:c,beforeFunctions2:f,targetFunction:v[0],afterFunctions:d,afterFunctions2:p,beforeFunctionTexts:s,beforeFunctionTexts2:o,targetFunctionText:a,afterFunctionTexts:l,afterFunctionTexts2:u}}function eC(e){return!e||!er(e)||ii(e)?!1:Jt(e)||"length"in e}function dr(e,t){return e?ii(e)?e:Me(e)?t?document.querySelector(e):e:Iu(e)?e():sp(e)?e:"current"in e?e.current:e:null}function cc(e,t){if(!e)return[];var r=eC(e)?[].slice.call(e):[e];return r.reduce(function(n,i){return Me(i)&&t?Q(Q([],A(n),!1),A([].slice.call(document.querySelectorAll(i))),!1):(Jt(i)?n.push(cc(i,t)):n.push(dr(i,t)),n)},[])}function rC(e,t,r){var n=Xt(e,t)/Math.PI*180;return n=r>=0?n:180-n,n=n>=0?n:360+n,n}function ch(e,t){var r=e.rootMatrix,n=e.is3d,i=n?4:3,s=pr(r,i);return n||(s=rr(s,3,4)),s[12]=0,s[13]=0,s[14]=0,N1(s,t)}function Mv(e,t,r,n,i){var s=A(e,2),o=s[0],a=s[1],l=0,u=0;if(i&&o&&a){var c=Xt([0,0],t),f=Xt([0,0],n),h=Ge(t),d=Math.cos(c-f)*h;if(!n[0])u=d,l=u*r;else if(!n[1])l=d,u=l/r;else{var p=n[0]*o,v=n[1]*a,g=Math.atan2(p+t[0],v+t[1]),m=Math.atan2(p,v);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var b=0;U(g-m)<Math.PI/2||U(g-m)>Math.PI/2*3||(m+=Math.PI),b=g-m,b>Math.PI*2?b-=Math.PI*2:b>Math.PI?b=2*Math.PI-b:b<-Math.PI&&(b=-2*Math.PI-b);var C=Ge([p+t[0],v+t[1]])*Math.cos(b);l=C*Math.sin(m)-p,u=C*Math.cos(m)-v,n[0]<0&&(l*=-1),n[1]<0&&(u*=-1)}}else l=n[0]*t[0],u=n[1]*t[1];return[l,u]}function Tv(e,t,r,n){var i,s=r.ratio,o=r.startOffsetWidth,a=r.startOffsetHeight,l=0,u=0,c=n.distX,f=n.distY,h=n.pinchScale,d=n.parentDistance,p=n.parentDist,v=n.parentScale,g=r.fixedDirection,m=[0,1].map(function(w){return U(e[w]-g[w])}),b=[0,1].map(function(w){var x=m[w];return x!==0&&(x=2/x),x});if(p)l=p[0],u=p[1],t&&(l?u||(u=l/s):l=u*s);else if(Xn(h))l=(h-1)*o,u=(h-1)*a;else if(v)l=(v[0]-1)*o,u=(v[1]-1)*a;else if(d){var C=o*m[0],S=a*m[1],_=Ge([C,S]);l=d/_*C*b[0],u=d/_*S*b[1]}else{var y=gr({datas:r,distX:c,distY:f});y=b.map(function(w,x){return y[x]*w}),i=A(Mv([o,a],y,s,e,t),2),l=i[0],u=i[1]}return{distWidth:l,distHeight:u}}function Zl(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var r=A(e.split(" "),2),n=r[0],i=r[1],s=Zl(n||""),o=Zl(i||""),a=R(R({},s),o),l={x:"50%",y:"50%"};return a.x&&(l.x=a.x),a.y&&(l.y=a.y),a.value&&(a.x&&!a.y&&(l.y=a.value),!a.x&&a.y&&(l.x=a.value)),l}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function fc(e,t,r){var n=Zl(e,!0),i=n.x,s=n.y;return[Rt(i,t)||0,Rt(s,r)||0]}function nC(e,t,r){var n=e.map(function(s){return vt(s,t)}),i=n.map(function(s){return ls(s,r)});return{prev:n,next:i,result:i.map(function(s){return Mt(s,t)})}}function Pv(e,t){return e.length===t.length&&e.every(function(r,n){var i=t[n],s=Jt(r),o=Jt(i);return s&&o?Pv(r,i):!s&&!o?r===i:!1})}function Bn(e,t,r,n,i){var s=e._store,o=s[t];if(!(t in s))if(i!=null)s[t]=i,o=i;else return s[t]=r,r;return o===r||n(o)===n(r)?o:(s[t]=r,r)}function ye(e){return e>=0?1:-1}function U(e){return Math.abs(e)}function il(e,t){return Zy(e).map(function(r){return t(r)})}function Dv(e){return Xn(e)?{top:e,left:e,right:e,bottom:e}:{left:e.left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}}var iC=fs("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(e,t){var r=t.datas,n=t.targets,i=t.angle,s=t.originalDatas,o=e.props,a=o.pinchable,l=o.ables;if(!a)return!1;var u="onPinch".concat(n?"Group":"","Start"),c="drag".concat(n?"Group":"","ControlStart"),f=(a===!0?e.controlAbles:l.filter(function(v){return a.indexOf(v.name)>-1})).filter(function(v){return v.canPinch&&v[c]}),h=Ct(e,t,{});n&&(h.targets=n);var d=ct(e,u,h);r.isPinch=d!==!1,r.ables=f;var p=r.isPinch;return p?(f.forEach(function(v){if(s[v.name]=s[v.name]||{},!!v[c]){var g=R(R({},t),{datas:s[v.name],parentRotate:i,isPinch:!0});v[c](e,g)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},p):!1},pinch:function(e,t){var r=t.datas,n=t.scale,i=t.distance,s=t.originalDatas,o=t.inputEvent,a=t.targets,l=t.angle;if(r.isPinch){var u=i*(1-1/n),c=Ct(e,t,{});a&&(c.targets=a);var f="onPinch".concat(a?"Group":"");ct(e,f,c);var h=r.ables,d="drag".concat(a?"Group":"","Control");return h.forEach(function(p){p[d]&&p[d](e,R(R({},t),{datas:s[p.name],inputEvent:o,resolveMatrix:!0,pinchScale:n,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,s=t.targets,o=t.originalDatas;if(r.isPinch){var a="onPinch".concat(s?"Group":"","End"),l=Be(e,t,{isDrag:n});s&&(l.targets=s),ct(e,a,l);var u=r.ables,c="drag".concat(s?"Group":"","ControlEnd");return u.forEach(function(f){f[c]&&f[c](e,R(R({},t),{isDrag:n,datas:o[f.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(e,t){return this.pinchStart(e,R(R({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,R(R({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,R(R({},t),{targets:e.props.targets}))}}),fh=uc("scalable"),sC={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:Kp("scalable"),dragControlCondition:fh,viewClassName:lc("scalable"),dragControlStart:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,s=t.parentDirection,o=Sv(s,n,i,r),a=e.state,l=a.width,u=a.height,c=a.targetTransform,f=a.target,h=a.pos1,d=a.pos2,p=a.pos4;if(!o||!f)return!1;n||bn(e,t),r.datas={},r.transform=c,r.prevDist=[1,1],r.direction=o,r.startOffsetWidth=l,r.startOffsetHeight=u,r.startValue=[1,1];var v=!o[0]&&!o[1]||o[0]||!o[1];Sa(e,t,"scale"),r.isWidth=v;function g(y){r.ratio=y&&isFinite(y)?y:0}r.startPositions=We(e.state);function m(y){var w=lv(r.startPositions,y);r.fixedDirection=w.fixedDirection,r.fixedPosition=w.fixedPosition,r.fixedOffset=w.fixedOffset}r.setFixedDirection=m,g(Sr(h,d)/Sr(d,p)),m([-o[0],-o[1]]);var b=function(y){r.minScaleSize=y},C=function(y){r.maxScaleSize=y};b([-1/0,-1/0]),C([1/0,1/0]);var S=Ct(e,t,R(R({direction:o,set:function(y){r.startValue=y},setRatio:g,setFixedDirection:m,setMinScaleSize:b,setMaxScaleSize:C},Ca(e,t)),{dragStart:me.dragStart(e,new Yn().dragStart([0,0],t))})),_=ct(e,"onScaleStart",S);return r.startFixedDirection=r.fixedDirection,_!==!1&&(r.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:o}),r.isScale?S:!1},dragControl:function(e,t){ba(e,t,"scale");var r=t.datas,n=t.parentKeepRatio,i=t.parentFlag,s=t.isPinch,o=t.dragClient,a=t.isRequest,l=t.useSnap,u=t.resolveMatrix,c=r.prevDist,f=r.direction,h=r.startOffsetWidth,d=r.startOffsetHeight,p=r.isScale,v=r.startValue,g=r.isWidth,m=r.ratio;if(!p)return!1;var b=e.props,C=b.throttleScale,S=b.parentMoveable,_=f;!f[0]&&!f[1]&&(_=[1,1]);var y=m&&(n??b.keepRatio)||!1,w=e.state,x=[v[0],v[1]];function E(){var nt=Tv(_,y,r,t),ht=nt.distWidth,M=nt.distHeight,D=h?(h+ht)/h:1,I=d?(d+M)/d:1;v[0]||(x[0]=ht/h),v[1]||(x[1]=M/d);var F=(_[0]||y?D:1)*x[0],N=(_[1]||y?I:1)*x[1];return F===0&&(F=ye(c[0])*Ps),N===0&&(N=ye(c[1])*Ps),[F,N]}var k=E();if(!s&&e.props.groupable){var B=w.snapRenderInfo||{},T=B.direction;Jt(T)&&(T[0]||T[1])&&(w.snapRenderInfo={direction:f,request:t.isRequest})}ct(e,"onBeforeScale",Ct(e,t,{scale:k,setFixedDirection:function(nt){return r.setFixedDirection(nt),k=E(),k},startFixedDirection:r.startFixedDirection,setScale:function(nt){k=nt}},!0));var P=[k[0]/x[0],k[1]/x[1]],O=o,L=[0,0],W=ye(P[0]*P[1]),H=!o&&!i&&s;if(H||u?O=Zu(e,r.targetAllTransform,[0,0],[0,0],r):o||(O=r.fixedPosition),s||(L=Lx(e,P,f,!l&&a,r)),y){_[0]&&_[1]&&L[0]&&L[1]&&(Math.abs(L[0]*h)>Math.abs(L[1]*d)?L[1]=0:L[0]=0);var z=!L[0]&&!L[1];if(z&&(g?P[0]=xt(P[0]*x[0],C)/x[0]:P[1]=xt(P[1]*x[1],C)/x[1]),_[0]&&!_[1]||L[0]&&!L[1]||z&&g){P[0]+=L[0];var Y=h*P[0]*x[0]/m;P[1]=ye(W*P[0])*U(Y/d/x[1])}else if(!_[0]&&_[1]||!L[0]&&L[1]||z&&!g){P[1]+=L[1];var J=d*P[1]*x[1]*m;P[0]=ye(W*P[1])*U(J/h/x[0])}}else P[0]+=L[0],P[1]+=L[1],L[0]||(P[0]=xt(P[0]*x[0],C)/x[0]),L[1]||(P[1]=xt(P[1]*x[1],C)/x[1]);P[0]===0&&(P[0]=ye(c[0])*Ps),P[1]===0&&(P[1]=ye(c[1])*Ps),k=Gx(P,[x[0],x[1]]);var G=[h,d],tt=[h*k[0],d*k[1]];tt=tp(tt,r.minScaleSize,r.maxScaleSize,y?m:!1),k=il(2,function(nt){return G[nt]?tt[nt]/G[nt]:tt[nt]}),P=il(2,function(nt){return k[nt]/x[nt]});var ot=il(2,function(nt){return c[nt]?P[nt]/c[nt]:P[nt]}),et="scale(".concat(P.join(", "),")"),st="scale(".concat(k.join(", "),")"),K=xa(r,st,et),at=!v[0]||!v[1],ft=Lb(e,at?st:et,r.fixedDirection,O,r.fixedOffset,r,at),mt=H?ft:vt(ft,r.prevInverseDist||[0,0]);if(r.prevDist=P,r.prevInverseDist=ft,k[0]===c[0]&&k[1]===c[1]&&mt.every(function(nt){return!nt})&&!S&&!H)return!1;var wt=Ct(e,t,R({offsetWidth:h,offsetHeight:d,direction:f,scale:k,dist:P,delta:ot,isPinch:!!s},jp(e,K,mt,s,t)));return ct(e,"onScale",wt),wt},dragControlEnd:function(e,t){var r=t.datas;if(!r.isScale)return!1;r.isScale=!1;var n=Be(e,t,{});return ct(e,"onScaleEnd",n),n},dragGroupControlCondition:fh,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,t);if(!n)return!1;var i=tr(e,"resizable",t);r.moveableScale=e.scale;var s=wr(e,this,"dragControlStart",t,function(u,c){return Co(e,u,r,c)}),o=function(u){n.setFixedDirection(u),s.forEach(function(c,f){c.setFixedDirection(u),Co(e,c.moveable,r,i[f])})};r.setFixedDirection=o;var a=R(R({},n),{targets:e.props.targets,events:s,setFixedDirection:o}),l=ct(e,"onScaleGroupStart",a);return r.isScale=l!==!1,r.isScale?a:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isScale){Ma(e,"onBeforeScale",function(c){ct(e,"onBeforeScaleGroup",Ct(e,t,R(R({},c),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var i=n.dist,s=r.moveableScale;e.scale=[i[0]*s[0],i[1]*s[1]];var o=e.props.keepRatio,a=r.fixedPosition,l=wr(e,this,"dragControl",t,function(c,f){var h=A(de(us(e.rotation/180*Math.PI,3),[f.datas.originalX*i[0],f.datas.originalY*i[1],1],3),2),d=h[0],p=h[1];return R(R({},f),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:Mt(a,[d,p])})}),u=R({targets:e.props.targets,events:l},n);return ct(e,"onScaleGroup",u),u}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isScale){this.dragControlEnd(e,t);var i=wr(e,this,"dragControlEnd",t),s=Be(e,t,{targets:e.props.targets,events:i});return ct(e,"onScaleGroupEnd",s),r}},request:function(){var e={},t=0,r=0,n=!1;return{isControl:!0,requestStart:function(i){return n=i.useSnap,{datas:e,parentDirection:i.direction||[1,1],useSnap:n}},request:function(i){return t+=i.deltaWidth,r+=i.deltaHeight,{datas:e,parentDist:[t,r],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:n}}}}};function Ar(e,t){return e.map(function(r,n){return go(r,t[n],1,2)})}function hh(e,t,r){var n=Xt(e,t),i=Xt(e,r),s=i-n;return s>=0?s:s+2*Math.PI}function oC(e,t){var r=hh(e[0],e[1],e[2]),n=hh(t[0],t[1],t[2]),i=Math.PI;return!(r>=i&&n<=i||r<=i&&n>=i)}var aC={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:lc("warpable"),render:function(e,t){var r=e.props,n=r.resizable,i=r.scalable,s=r.warpable,o=r.zoom;if(n||i||!s)return[];var a=e.state,l=a.pos1,u=a.pos2,c=a.pos3,f=a.pos4,h=Ar(l,u),d=Ar(u,l),p=Ar(l,c),v=Ar(c,l),g=Ar(c,f),m=Ar(f,c),b=Ar(u,f),C=Ar(f,u);return Q([t.createElement("div",{className:pt("line"),key:"middeLine1",style:pi(h,g,o)}),t.createElement("div",{className:pt("line"),key:"middeLine2",style:pi(d,m,o)}),t.createElement("div",{className:pt("line"),key:"middeLine3",style:pi(p,b,o)}),t.createElement("div",{className:pt("line"),key:"middeLine4",style:pi(v,C,o)})],A(Jp(e,"warpable",t)),!1)},dragControlCondition:function(e,t){if(t.isRequest)return!1;var r=t.inputEvent.target;return te(r,pt("direction"))&&te(r,pt("warpable"))},dragControlStart:function(e,t){var r=t.datas,n=t.inputEvent,i=e.props.target,s=n.target,o=wv(s,r);if(!o||!i)return!1;var a=e.state,l=a.transformOrigin,u=a.is3d,c=a.targetTransform,f=a.targetMatrix,h=a.width,d=a.height,p=a.left,v=a.top;r.datas={},r.targetTransform=c,r.warpTargetMatrix=u?f:rr(f,3,4),r.targetInverseMatrix=Ep(pr(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=p,r.top=v,r.poses=[[0,0],[h,0],[0,d],[h,d]].map(function(b){return vt(b,l)}),r.nextPoses=r.poses.map(function(b){var C=A(b,2),S=C[0],_=C[1];return de(r.warpTargetMatrix,[S,_,0,1],4)}),r.startValue=zt(4),r.prevMatrix=zt(4),r.absolutePoses=We(a),r.posIndexes=Vp(o),bn(e,t),Sa(e,t,"matrix3d"),a.snapRenderInfo={request:t.isRequest,direction:o};var g=Ct(e,t,R({set:function(b){r.startValue=b}},Ca(e,t))),m=ct(e,"onWarpStart",g);return m!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(e,t){var r=t.datas,n=t.isRequest,i=t.distX,s=t.distY,o=r.targetInverseMatrix,a=r.prevMatrix,l=r.isWarp,u=r.startValue,c=r.poses,f=r.posIndexes,h=r.absolutePoses;if(!l)return!1;if(ba(e,t,"matrix3d"),ai(e,"warpable")){var d=f.map(function(E){return h[E]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=Ea(e,n,{horizontal:d.map(function(E){return E[1]+s}),vertical:d.map(function(E){return E[0]+i})}),v=p.horizontal,g=p.vertical;s-=v.offset,i-=g.offset}var m=gr({datas:r,distX:i,distY:s},!0),b=r.nextPoses.slice();if(f.forEach(function(E){b[E]=Mt(b[E],m)}),!kb.every(function(E){return oC(E.map(function(k){return c[k]}),E.map(function(k){return b[k]}))}))return!1;var C=Xu(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!C.length)return!1;var S=Bt(o,C,4),_=Wp(r,S,!0),y=Bt(pr(a,4),_,4);r.prevMatrix=_;var w=Bt(u,_,4),x=xa(r,"matrix3d(".concat(w.join(", "),")"),"matrix3d(".concat(_.join(", "),")"));return Ju(t,x),ct(e,"onWarp",Ct(e,t,R({delta:y,matrix:w,dist:_,multiply:Bt,transform:x},xe({transform:x},t)))),!0},dragControlEnd:function(e,t){var r=t.datas,n=t.isDrag;return r.isWarp?(r.isWarp=!1,ct(e,"onWarpEnd",Be(e,t,{})),n):!1}},lC=pt("area-pieces"),Is=pt("area-piece"),Rv=pt("avoid"),uC=pt("view-dragging");function sl(e){var t=e.areaElement;if(t){var r=e.state,n=r.width,i=r.height;ip(t,Rv),t.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function dh(e){return e.createElement("div",{key:"area_pieces",className:lC},e.createElement("div",{className:Is}),e.createElement("div",{className:Is}),e.createElement("div",{className:Is}),e.createElement("div",{className:Is}))}var Av={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(e,t){var r=e.props,n=r.target,i=r.dragArea,s=r.groupable,o=r.passDragArea,a=e.getState(),l=a.width,u=a.height,c=a.renderPoses,f=o?pt("area","pass"):pt("area");if(s)return[t.createElement("div",{key:"area",ref:Cr(e,"areaElement"),className:f}),dh(t)];if(!n||!i)return[];var h=Xu([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),d=h.length?ka(h,!0):"none";return[t.createElement("div",{key:"area",ref:Cr(e,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:d}}),dh(t)]},dragStart:function(e,t){var r=t.datas,n=t.clientX,i=t.clientY,s=t.inputEvent;if(!s)return!1;r.isDragArea=!1;var o=e.areaElement,a=e.state,l=a.moveableClientRect,u=a.renderPoses,c=a.rootMatrix,f=a.is3d,h=l.left,d=l.top,p=Ne(u),v=p.left,g=p.top,m=p.width,b=p.height,C=f?4:3,S=A(Jn(c,[n-h,i-d],C),2),_=S[0],y=S[1];_-=v,y-=g;var w=[{left:v,top:g,width:m,height:y-10},{left:v,top:g,width:_-10,height:b},{left:v,top:g+y+10,width:m,height:b-y-10},{left:v+_+10,top:g,width:m-_-10,height:b}],x=[].slice.call(o.nextElementSibling.children);w.forEach(function(E,k){x[k].style.cssText="left: ".concat(E.left,"px;top: ").concat(E.top,"px; width: ").concat(E.width,"px; height: ").concat(E.height,"px;")}),np(o,Rv),a.disableNativeEvent=!0},drag:function(e,t){var r=t.datas,n=t.inputEvent;if(this.enableNativeEvent(e),!n)return!1;r.isDragArea||(r.isDragArea=!0,sl(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var r=t.inputEvent,n=t.datas;if(!r)return!1;n.isDragArea||sl(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){sl(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&Qd(function(){t.disableNativeEvent=!1})}},cC=fs("origin",{props:["origin","svgOrigin"],render:function(e,t){var r=e.props,n=r.zoom,i=r.svgOrigin,s=r.groupable,o=e.getState(),a=o.beforeOrigin,l=o.rotation,u=o.svg,c=o.allMatrix,f=o.is3d,h=o.left,d=o.top,p=o.offsetWidth,v=o.offsetHeight,g;if(!s&&u&&i){var m=A(fc(i,p,v),2),b=m[0],C=m[1],S=f?4:3,_=Vt(c,[b,C],S);g=Eo(l,n,vt(_,[h,d]))}else g=Eo(l,n,a);return[t.createElement("div",{className:pt("control","origin"),style:g,key:"beforeOrigin"})]}});function fC(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var hC={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(e,t){var r=e.props,n=r.scrollContainer,i=n===void 0?e.getContainer():n,s=r.scrollOptions,o=new $1,a=dr(i,!0);t.datas.dragScroll=o,e.state.dragScroll=o;var l=t.isControl?"controlGesto":"targetGesto",u=t.targets;o.on("scroll",function(c){var f=c.container,h=c.direction,d=Ct(e,t,{scrollContainer:f,direction:h}),p=u?"onScrollGroup":"onScroll";u&&(d.targets=u),ct(e,p,d)}).on("move",function(c){var f=c.offsetX,h=c.offsetY,d=c.inputEvent;e[l].scrollBy(f,h,d.inputEvent,!1)}).on("scrollDrag",function(c){var f=c.next;f(e[l].getCurrentEvent())}),o.dragStart(t,R({container:a},s))},checkScroll:function(e,t){var r=t.datas.dragScroll;if(r){var n=e.props,i=n.scrollContainer,s=i===void 0?e.getContainer():i,o=n.scrollThreshold,a=o===void 0?0:o,l=n.scrollThrottleTime,u=l===void 0?0:l,c=n.getScrollPosition,f=c===void 0?fC:c,h=n.scrollOptions;return r.drag(t,R({container:s,threshold:a,throttleTime:u,getScrollPosition:function(d){return f({scrollContainer:d.container,direction:d.direction})}},h)),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,R(R({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,R(R({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,R(R({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,R(R({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,R(R({},t),{targets:e.props.targets,isControl:!0}))},dragGroupControl:function(e,t){return this.drag(e,R(R({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,R(R({},t),{targets:e.props.targets}))},unset:function(e){var t,r=e.state;(t=r.dragScroll)===null||t===void 0||t.dragEnd(),r.dragScroll=null}},Bv={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},dC=fs("padding",{props:["padding"],render:function(e,t){var r=e.props;if(r.dragArea)return[];var n=Dv(r.padding||{}),i=n.left,s=n.top,o=n.right,a=n.bottom,l=e.getState(),u=l.renderPoses,c=l.pos1,f=l.pos2,h=l.pos3,d=l.pos4,p=[c,f,h,d],v=[];return i>0&&v.push([0,2]),s>0&&v.push([0,1]),o>0&&v.push([1,3]),a>0&&v.push([2,3]),v.map(function(g,m){var b=A(g,2),C=b[0],S=b[1],_=p[C],y=p[S],w=u[C],x=u[S],E=Xu([0,0],[100,0],[0,100],[100,100],_,y,w,x);if(E.length)return t.createElement("div",{key:"padding".concat(m),className:pt("padding"),style:{transform:ka(E,!0)}})})}}),ph=["nw","ne","se","sw"];function Ls(e,t){var r=e[0]+e[1],n=r>t?t/r:1;return e[0]*=n,e[1]=t-e[1]*n,e}var pC=[1,2,5,6],vC=[0,3,4,7],nn=[1,-1,-1,1],sn=[1,1,-1,-1];function hc(e,t,r,n,i,s,o,a){i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=r),a===void 0&&(a=n);var l=[],u=!1,c=e.filter(function(h){return!h.virtual}),f=c.map(function(h){var d=h.horizontal,p=h.vertical,v=h.pos;if(p&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,p===1?v[1]-s:a-v[1]);return l.push(Ye(g,n,t)),g}else{var g=Math.max(0,d===1?v[0]-i:o-v[0]);return l.push(Ye(g,r,t)),g}});return{radiusPoses:c,styles:l,raws:f}}function Ov(e){for(var t=[0,0],r=[0,0],n=e.length,i=0;i<n;++i){var s=e[i];s.sub&&(s.horizontal&&(t[1]===0&&(t[0]=i),t[1]=i-t[0]+1,r[0]=i+1),s.vertical&&(r[1]===0&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:t,verticalRange:r}}function Iv(e,t,r,n,i,s,o){var a,l,u,c;s===void 0&&(s=[0,0]),o===void 0&&(o=!1);var f=e.indexOf("/"),h=(f>-1?e.slice(0,f):e).length,d=e.slice(0,h),p=e.slice(h+1),v=d.length,g=p.length,m=g>0,b=A(d,4),C=b[0],S=C===void 0?"0px":C,_=b[1],y=_===void 0?S:_,w=b[2],x=w===void 0?S:w,E=b[3],k=E===void 0?y:E,B=A(p,4),T=B[0],P=T===void 0?S:T,O=B[1],L=O===void 0?m?P:y:O,W=B[2],H=W===void 0?m?P:x:W,z=B[3],Y=z===void 0?m?L:k:z,J=[S,y,x,k].map(function(K){return Rt(K,t)}),G=[P,L,H,Y].map(function(K){return Rt(K,r)}),tt=J.slice(),ot=G.slice();a=A(Ls([tt[0],tt[1]],t),2),tt[0]=a[0],tt[1]=a[1],l=A(Ls([tt[3],tt[2]],t),2),tt[3]=l[0],tt[2]=l[1],u=A(Ls([ot[0],ot[3]],r),2),ot[0]=u[0],ot[3]=u[1],c=A(Ls([ot[1],ot[2]],r),2),ot[1]=c[0],ot[2]=c[1];var et=o?tt:tt.slice(0,Math.max(s[0],v)),st=o?ot:ot.slice(0,Math.max(s[1],g));return Q(Q([],A(et.map(function(K,at){var ft=ph[at];return{virtual:at>=v,horizontal:nn[at],vertical:0,pos:[n+K,i+(sn[at]===-1?r:0)],sub:!0,raw:J[at],direction:ft}})),!1),A(st.map(function(K,at){var ft=ph[at];return{virtual:at>=g,horizontal:0,vertical:sn[at],pos:[n+(nn[at]===-1?t:0),i+K],sub:!0,raw:G[at],direction:ft}})),!1)}function gC(e,t,r,n,i){i===void 0&&(i=t.length);var s=Ov(e.slice(n)),o=s.horizontalRange,a=s.verticalRange,l=r-n,u=0;if(l===0)u=i;else if(l>0&&l<o[1])u=o[1]-l;else if(l>=a[0])u=a[0]+a[1]-l;else return;e.splice(r,u),t.splice(r,u)}function mC(e,t,r,n,i,s,o,a,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var f=Ov(e.slice(r)),h=f.horizontalRange,d=f.verticalRange;if(n>-1)for(var p=nn[n]===1?s-u:a-s,v=h[1];v<=n;++v){var g=sn[v]===1?c:l,m=0;if(n===v?m=s:v===0?m=u+p:nn[v]===-1&&(m=a-(t[r][0]-u)),e.splice(r+v,0,{horizontal:nn[v],vertical:0,pos:[m,g]}),t.splice(r+v,0,[m,g]),v===0)break}else if(i>-1){var b=sn[i]===1?o-c:l-o;if(h[1]===0&&d[1]===0){var C=[u+b,c];e.push({horizontal:nn[0],vertical:0,pos:C}),t.push(C)}for(var S=d[0],v=d[1];v<=i;++v){var m=nn[v]===1?u:a,g=0;if(i===v?g=o:v===0?g=c+b:sn[v]===1?g=t[r+S][1]:sn[v]===-1&&(g=l-(t[r+S][1]-c)),e.push({horizontal:0,vertical:sn[v],pos:[m,g]}),t.push([m,g]),v===0)break}}}function yC(e,t){t===void 0&&(t=e.map(function(i){return i.raw}));var r=e.map(function(i,s){return i.horizontal?t[s]:null}).filter(function(i){return i!=null}),n=e.map(function(i,s){return i.vertical?t[s]:null}).filter(function(i){return i!=null});return{horizontals:r,verticals:n}}var bC=[[0,-1,"n"],[1,0,"e"]],xC=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function dc(e,t,r){var n=e.props.clipRelative,i=e.state,s=i.width,o=i.height,a=t,l=a.type,u=a.poses,c=l==="rect",f=l==="circle";if(l==="polygon")return r.map(function(y){return"".concat(Ye(y[0],s,n)," ").concat(Ye(y[1],o,n))});if(c||l==="inset"){var h=r[1][1],d=r[3][0],p=r[7][0],v=r[5][1];if(c)return[h,d,v,p].map(function(y){return"".concat(y,"px")});var g=[h,s-d,o-v,p].map(function(y,w){return Ye(y,w%2?s:o,n)});if(r.length>8){var m=A(vt(r[4],r[0]),2),b=m[0],C=m[1];g.push.apply(g,Q(["round"],A(hc(u.slice(8).map(function(y,w){return R(R({},y),{pos:r[w]})}),n,b,C,p,h,d,v).styles),!1))}return g}else if(f||l==="ellipse"){var S=r[0],_=Ye(U(r[1][1]-S[1]),f?Math.sqrt((s*s+o*o)/2):o,n),g=f?[_]:[Ye(U(r[2][0]-S[0]),s,n),_];return g.push("at",Ye(S[0],s,n),Ye(S[1],o,n)),g}}function Mo(e,t,r,n){var i=[n,(n+t)/2,t],s=[e,(e+r)/2,r];return xC.map(function(o){var a=A(o,3),l=a[0],u=a[1],c=a[2],f=i[l+1],h=s[u+1];return{vertical:U(u),horizontal:U(l),direction:c,pos:[f,h]}})}function Lv(e){var t=[1/0,-1/0],r=[1/0,-1/0];return e.forEach(function(n){var i=n.pos;t[0]=Math.min(t[0],i[0]),t[1]=Math.max(t[1],i[0]),r[0]=Math.min(r[0],i[1]),r[1]=Math.max(r[1],i[1])}),[U(t[1]-t[0]),U(r[1]-r[0])]}function vh(e,t,r,n,i){var s,o,a,l,u,c,f,h,d;if(e){var p=i;if(!p){var v=Pe(e),g=v("clipPath");p=g!=="none"?g:v("clip")}if(!((!p||p==="none"||p==="auto")&&(p=n,!p))){var m=Zd(p),b=m.prefix,C=b===void 0?p:b,S=m.value,_=S===void 0?"":S,y=C==="circle",w=" ";if(C==="polygon"){var x=ln(_||"0% 0%, 100% 0%, 100% 100%, 0% 100%");w=",";var E=x.map(function(q){var X=A(q.split(" "),2),rt=X[0],ut=X[1];return{vertical:1,horizontal:1,pos:[Rt(rt,t),Rt(ut,r)]}}),k=pn(E.map(function(q){return q.pos}));return{type:C,clipText:p,poses:E,splitter:w,left:k.minX,right:k.maxX,top:k.minY,bottom:k.maxY}}else if(y||C==="ellipse"){var B="",T="",P=0,O=0,x=$r(_);if(y){var L="";s=A(x,4),o=s[0],L=o===void 0?"50%":o,a=s[2],B=a===void 0?"50%":a,l=s[3],T=l===void 0?"50%":l,P=Rt(L,Math.sqrt((t*t+r*r)/2)),O=P}else{var W="",H="";u=A(x,5),c=u[0],W=c===void 0?"50%":c,f=u[1],H=f===void 0?"50%":f,h=u[3],B=h===void 0?"50%":h,d=u[4],T=d===void 0?"50%":d,P=Rt(W,t),O=Rt(H,r)}var z=[Rt(B,t),Rt(T,r)],E=Q([{vertical:1,horizontal:1,pos:z,direction:"nesw"}],A(bC.slice(0,y?1:2).map(function(rt){return{vertical:U(rt[1]),horizontal:rt[0],direction:rt[2],sub:!0,pos:[z[0]+rt[0]*P,z[1]+rt[1]*O]}})),!1);return{type:C,clipText:p,radiusX:P,radiusY:O,left:z[0]-P,top:z[1]-O,right:z[0]+P,bottom:z[1]+O,poses:E,splitter:w}}else if(C==="inset"){var x=$r(_||"0 0 0 0"),Y=x.indexOf("round"),J=(Y>-1?x.slice(0,Y):x).length,G=x.slice(J+1),tt=A(x.slice(0,J),4),ot=tt[0],et=tt[1],st=et===void 0?ot:et,K=tt[2],at=K===void 0?ot:K,ft=tt[3],mt=ft===void 0?st:ft,wt=A([ot,at].map(function(rt){return Rt(rt,r)}),2),nt=wt[0],ht=wt[1],M=A([mt,st].map(function(rt){return Rt(rt,t)}),2),D=M[0],I=M[1],F=t-I,N=r-ht,$=Iv(G,F-D,N-nt,D,nt),E=Q(Q([],A(Mo(nt,F,N,D)),!1),A($),!1);return{type:"inset",clipText:p,poses:E,top:nt,left:D,right:F,bottom:N,radius:G,splitter:w}}else if(C==="rect"){var x=ln(_||"0px, ".concat(t,"px, ").concat(r,"px, 0px"));w=",";var j=A(x.map(function(gt){var bt=is(gt).value;return bt}),4),V=j[0],I=j[1],ht=j[2],D=j[3],E=Mo(V,I,ht,D);return{type:"rect",clipText:p,poses:E,top:V,right:I,bottom:ht,left:D,values:x,splitter:w}}}}}function CC(e,t,r,n,i){var s=e[t],o=s.direction,a=s.sub,l=e.map(function(){return[0,0]}),u=o?o.split(""):[];if(n&&t<8){var c=u.filter(function(P){return P==="w"||P==="e"}),f=u.filter(function(P){return P==="n"||P==="s"}),h=c[0],d=f[0];l[t]=r;var p=A(Lv(e),2),v=p[0],g=p[1],m=v&&g?v/g:0;if(m&&i){var b=(t+4)%8,C=e[b].pos,S=[0,0];o.indexOf("w")>-1?S[0]=-1:o.indexOf("e")>-1&&(S[0]=1),o.indexOf("n")>-1?S[1]=-1:o.indexOf("s")>-1&&(S[1]=1);var _=Mv([v,g],r,m,S,!0),y=v+_[0],w=g+_[1],x=C[1],E=C[1],k=C[0],B=C[0];S[0]===-1?k=B-y:S[0]===1?B=k+y:(k=k-y/2,B=B+y/2),S[1]===-1?x=E-w:(S[1]===1||(x=E-w/2),E=x+w);var T=Mo(x,B,E,k);e.forEach(function(P,O){l[O][0]=T[O].pos[0]-P.pos[0],l[O][1]=T[O].pos[1]-P.pos[1]})}else e.forEach(function(P,O){var L=P.direction;L&&(L.indexOf(h)>-1&&(l[O][0]=r[0]),L.indexOf(d)>-1&&(l[O][1]=r[1]))}),h&&(l[1][0]=r[0]/2,l[5][0]=r[0]/2),d&&(l[3][1]=r[1]/2,l[7][1]=r[1]/2)}else o&&!a?u.forEach(function(P){var O=P==="n"||P==="s";e.forEach(function(L,W){var H=L.direction,z=L.horizontal,Y=L.vertical;!H||H.indexOf(P)===-1||(l[W]=[O||!z?0:r[0],!O||!Y?0:r[1]])})}):l[t]=r;return l}function SC(e,t){var r=A(Gp(e,t),2),n=r[0],i=r[1],s=t.datas,o=s.clipPath,a=s.clipIndex,l=o,u=l.type,c=l.poses,f=l.splitter,h=c.map(function(b){return b.pos});if(u==="polygon")h.splice(a,0,[n,i]);else if(u==="inset"){var d=pC.indexOf(a),p=vC.indexOf(a),v=c.length;if(mC(c,h,8,d,p,n,i,h[4][0],h[4][1],h[0][0],h[0][1]),v===c.length)return}else return;var g=dc(e,o,h),m="".concat(u,"(").concat(g.join(f),")");ct(e,"onClip",Ct(e,t,R({clipEventType:"added",clipType:u,poses:h,clipStyles:g,clipStyle:m,distX:0,distY:0},xe({clipPath:m},t))))}function wC(e,t){var r=t.datas,n=r.clipPath,i=r.clipIndex,s=n,o=s.type,a=s.poses,l=s.splitter,u=a.map(function(d){return d.pos}),c=u.length;if(o==="polygon")a.splice(i,1),u.splice(i,1);else if(o==="inset"){if(i<8||(gC(a,u,i,8,c),c===a.length))return}else return;var f=dc(e,n,u),h="".concat(o,"(").concat(f.join(l),")");ct(e,"onClip",Ct(e,t,R({clipEventType:"removed",clipType:o,poses:u,clipStyles:f,clipStyle:h,distX:0,distY:0},xe({clipPath:h},t))))}var _C={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(e,t){var r=e.props,n=r.customClipPath,i=r.defaultClipPath,s=r.clipArea,o=r.zoom,a=r.groupable,l=e.getState(),u=l.target,c=l.width,f=l.height,h=l.allMatrix,d=l.is3d,p=l.left,v=l.top,g=l.pos1,m=l.pos2,b=l.pos3,C=l.pos4,S=l.clipPathState,_=l.snapBoundInfos,y=l.rotation;if(!u||a)return[];var w=vh(u,c,f,i||"inset",S||n);if(!w)return[];var x=d?4:3,E=w.type,k=w.poses,B=k.map(function(I){var F=Vt(h,I.pos,x);return[F[0]-p,F[1]-v]}),T=[],P=[],O=E==="rect",L=E==="inset",W=E==="polygon";if(O||L||W){var H=L?B.slice(0,8):B;P=H.map(function(I,F){var N=F===0?H[H.length-1]:H[F-1],$=Xt(N,I),j=yv(N,I);return t.createElement("div",{key:"clipLine".concat(F),className:pt("line","clip-line","snap-control"),"data-clip-index":F,style:{width:"".concat(j,"px"),transform:"translate(".concat(N[0],"px, ").concat(N[1],"px) rotate(").concat($,"rad) scaleY(").concat(o,")")}})})}if(T=B.map(function(I,F){return t.createElement("div",{key:"clipControl".concat(F),className:pt("control","clip-control","snap-control"),"data-clip-index":F,style:{transform:"translate(".concat(I[0],"px, ").concat(I[1],"px) rotate(").concat(y,"rad) scale(").concat(o,")")}})}),L&&T.push.apply(T,Q([],A(B.slice(8).map(function(I,F){return t.createElement("div",{key:"clipRadiusControl".concat(F),className:pt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+F,style:{transform:"translate(".concat(I[0],"px, ").concat(I[1],"px) rotate(").concat(y,"rad) scale(").concat(o,")")}})})),!1)),E==="circle"||E==="ellipse"){var z=w.left,Y=w.top,J=w.radiusX,G=w.radiusY,tt=A(vt(Vt(h,[z,Y],x),Vt(h,[0,0],x)),2),ot=tt[0],et=tt[1],st="none";if(!s){for(var K=Math.max(10,J/5,G/5),at=[],ft=0;ft<=K;++ft){var mt=Math.PI*2/K*ft;at.push([J+(J-o)*Math.cos(mt),G+(G-o)*Math.sin(mt)])}at.push([J,-2]),at.push([-2,-2]),at.push([-2,G*2+2]),at.push([J*2+2,G*2+2]),at.push([J*2+2,-2]),at.push([J,-2]),st="polygon(".concat(at.map(function(I){return"".concat(I[0],"px ").concat(I[1],"px")}).join(", "),")")}T.push(t.createElement("div",{key:"clipEllipse",className:pt("clip-ellipse","snap-control"),style:{width:"".concat(J*2,"px"),height:"".concat(G*2,"px"),clipPath:st,transform:"translate(".concat(-p+ot,"px, ").concat(-v+et,"px) ").concat(ka(h))}}))}if(s){var wt=Ne(Q([g,m,b,C],A(B),!1)),nt=wt.width,ht=wt.height,M=wt.left,D=wt.top;if(W||O||L){var at=L?B.slice(0,8):B;T.push(t.createElement("div",{key:"clipArea",className:pt("clip-area","snap-control"),style:{width:"".concat(nt,"px"),height:"".concat(ht,"px"),transform:"translate(".concat(M,"px, ").concat(D,"px)"),clipPath:"polygon(".concat(at.map(function(F){return"".concat(F[0]-M,"px ").concat(F[1]-D,"px")}).join(", "),")")}}))}}return _&&["vertical","horizontal"].forEach(function(I){var F=_[I],N=I==="horizontal";F.isSnap&&P.push.apply(P,Q([],A(F.snap.posInfos.map(function($,j){var V=$.pos,q=vt(Vt(h,N?[0,V]:[V,0],x),[p,v]),X=vt(Vt(h,N?[c,V]:[V,f],x),[p,v]);return Yi(t,"",q,X,o,"clip".concat(I,"snap").concat(j),"guideline")})),!1)),F.isBound&&P.push.apply(P,Q([],A(F.bounds.map(function($,j){var V=$.pos,q=vt(Vt(h,N?[0,V]:[V,0],x),[p,v]),X=vt(Vt(h,N?[c,V]:[V,f],x),[p,v]);return Yi(t,"",q,X,o,"clip".concat(I,"bounds").concat(j),"guideline","bounds","bold")})),!1))}),Q(Q([],A(T),!1),A(P),!1)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var r=e.props,n=r.dragWithClip,i=n===void 0?!0:n;return i?!1:this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,R(R({},t),{isDragTarget:!0}))},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var r=e.state,n=e.props,i=n.defaultClipPath,s=n.customClipPath,o=r.target,a=r.width,l=r.height,u=t.inputEvent?t.inputEvent.target:null,c=u&&u.getAttribute("class")||"",f=t.datas,h=vh(o,a,l,i||"inset",s);if(!h)return!1;var d=h.clipText,p=h.type,v=h.poses,g=ct(e,"onClipStart",Ct(e,t,{clipType:p,clipStyle:d,poses:v.map(function(m){return m.pos})}));return g===!1?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,f.clipPath=h,f.isClipStart=!0,r.clipPathState=d,bn(e,t),!0)},dragControl:function(e,t){var r,n,i,s=t.datas,o=t.originalDatas,a=t.isDragTarget;if(!s.isClipStart)return!1;var l=s,u=l.isControl,c=l.isLine,f=l.isArea,h=l.clipIndex,d=l.clipPath;if(!d)return!1;var p=vn(e.props,"clippable"),v=p.keepRatio,g=0,m=0,b=o.draggable,C=gr(t);a&&b?(r=A(b.prevBeforeDist,2),g=r[0],m=r[1]):(n=A(C,2),g=n[0],m=n[1]);var S=[g,m],_=e.state,y=_.width,w=_.height,x=!f&&!u&&!c,E=d.type,k=d.poses,B=d.splitter,T=k.map(function(It){return It.pos});x&&(g=-g,m=-m);var P=!u||k[h].direction==="nesw",O=E==="inset"||E==="rect",L=k.map(function(){return[0,0]});if(u&&!P){var W=k[h],H=W.horizontal,z=W.vertical,Y=[g*U(H),m*U(z)];L=CC(k,h,Y,O,v)}else P&&(L=T.map(function(){return[g,m]}));var J=T.map(function(It,ve){return Mt(It,L[ve])}),G=Q([],A(J),!1);_.snapBoundInfos=null;var tt=d.type==="circle",ot=d.type==="ellipse";if(tt||ot){var et=Ne(J),st=U(et.bottom-et.top),K=U(ot?et.right-et.left:st),at=J[0][1]+st,ft=J[0][0]-K,mt=J[0][0]+K;tt&&(G.push([mt,et.bottom]),L.push([1,0])),G.push([et.left,at]),L.push([0,1]),G.push([ft,et.bottom]),L.push([1,0])}var wt=hv((p.clipHorizontalGuidelines||[]).map(function(It){return Rt("".concat(It),w)}),(p.clipVerticalGuidelines||[]).map(function(It){return Rt("".concat(It),y)}),y,w),nt=[],ht=[];if(tt||ot)nt=[G[4][0],G[2][0]],ht=[G[1][1],G[3][1]];else if(O){var M=[G[0],G[2],G[4],G[6]],D=[L[0],L[2],L[4],L[6]];nt=M.filter(function(It,ve){return D[ve][0]}).map(function(It){return It[0]}),ht=M.filter(function(It,ve){return D[ve][1]}).map(function(It){return It[1]})}else nt=G.filter(function(It,ve){return L[ve][0]}).map(function(It){return It[0]}),ht=G.filter(function(It,ve){return L[ve][1]}).map(function(It){return It[1]});var I=[0,0],F=Qf(wt,p.clipTargetBounds&&{left:0,top:0,right:y,bottom:w},nt,ht,5,5),N=F.horizontal,$=F.vertical,j=N.offset,V=$.offset;if(N.isBound&&(I[1]+=j),$.isBound&&(I[0]+=V),(ot||tt)&&L[0][0]===0&&L[0][1]===0){var et=Ne(J),q=et.bottom-et.top,X=ot?et.right-et.left:q,rt=$.isBound?U(V):$.snapIndex===0?-V:V,ut=N.isBound?U(j):N.snapIndex===0?-j:j;X-=rt,q-=ut,tt&&(q=iv($,N)>0?q:X,X=q);var lt=G[0];G[1][1]=lt[1]-q,G[2][0]=lt[0]+X,G[3][1]=lt[1]+q,G[4][0]=lt[0]-X}else if(O&&v&&u){var gt=A(Lv(k),2),bt=gt[0],Pt=gt[1],Ot=bt&&Pt?bt/Pt:0,Ut=k[h],le=Ut.direction||"",nr=G[1][1],at=G[5][1],ft=G[7][0],mt=G[3][0];U(j)<=U(V)?j=ye(j)*U(V)/Ot:V=ye(V)*U(j)*Ot,le.indexOf("w")>-1?ft-=V:le.indexOf("e")>-1?mt-=V:(ft+=V/2,mt-=V/2),le.indexOf("n")>-1?nr-=j:le.indexOf("s")>-1?at-=j:(nr+=j/2,at-=j/2);var ps=Mo(nr,mt,at,ft);G.forEach(function(Ac,Dg){var Aa;Aa=A(ps[Dg].pos,2),Ac[0]=Aa[0],Ac[1]=Aa[1]})}else G.forEach(function(It,ve){var Rc=L[ve];Rc[0]&&(It[0]-=V),Rc[1]&&(It[1]-=j)});var Tr=dc(e,d,J),Cn="".concat(E,"(").concat(Tr.join(B),")");if(_.clipPathState=Cn,tt||ot)nt=[G[4][0],G[2][0]],ht=[G[1][1],G[3][1]];else if(O){var M=[G[0],G[2],G[4],G[6]];nt=M.map(function(ve){return ve[0]}),ht=M.map(function(ve){return ve[1]})}else nt=G.map(function(It){return It[0]}),ht=G.map(function(It){return It[1]});if(_.snapBoundInfos=Qf(wt,p.clipTargetBounds&&{left:0,top:0,right:y,bottom:w},nt,ht,1,1),b){var pe=_.is3d,Oe=_.allMatrix,vs=pe?4:3,Ra=I;a&&(Ra=[S[0]+I[0]-C[0],S[1]+I[1]-C[1]]),b.deltaOffset=Bt(Oe,[Ra[0],Ra[1],0,0],vs)}return ct(e,"onClip",Ct(e,t,R({clipEventType:"changed",clipType:E,poses:J,clipStyle:Cn,clipStyles:Tr,distX:g,distY:m},xe((i={},i[E==="rect"?"clip":"clipPath"]=Cn,i),t)))),!0},dragControlEnd:function(e,t){this.unset(e);var r=t.isDrag,n=t.datas,i=t.isDouble,s=n.isLine,o=n.isClipStart,a=n.isControl;return o?(ct(e,"onClipEnd",Be(e,t,{})),i&&(a?wC(e,t):s&&SC(e,t)),i||r):!1},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},EC={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(e,t){return t.isRequest?t.requestAble==="originDraggable":te(t.inputEvent.target,pt("origin"))},dragControlStart:function(e,t){var r=t.datas;bn(e,t);var n=Ct(e,t,{dragStart:me.dragStart(e,new Yn().dragStart([0,0],t))}),i=ct(e,"onDragOriginStart",n);return r.startOrigin=e.state.transformOrigin,r.startTargetOrigin=e.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,i===!1?(r.isDragOrigin=!1,!1):n},dragControl:function(e,t){var r=t.datas,n=t.isPinch,i=t.isRequest;if(!r.isDragOrigin)return!1;var s=A(gr(t),2),o=s[0],a=s[1],l=e.state,u=l.width,c=l.height,f=l.offsetMatrix,h=l.targetMatrix,d=l.is3d,p=e.props.originRelative,v=p===void 0?!0:p,g=d?4:3,m=[o,a];if(i){var b=t.distOrigin;(b[0]||b[1])&&(m=b)}var C=Mt(r.startOrigin,m),S=Mt(r.startTargetOrigin,m),_=vt(m,r.prevOrigin),y=ds(f,h,C,g),w=e.getRect(),x=Ne(xn(y,u,c,g)),E=[w.left-x.left,w.top-x.top];r.prevOrigin=m;var k=[Ye(S[0],u,v),Ye(S[1],c,v)].join(" "),B=me.drag(e,hs(t,e.state,E,!!n)),T=Ct(e,t,R(R({width:u,height:c,origin:C,dist:m,delta:_,transformOrigin:k,drag:B},xe({transformOrigin:k,transform:B.transform},t)),{afterTransform:B.transform}));return ct(e,"onDragOrigin",T),T},dragControlEnd:function(e,t){var r=t.datas;return r.isDragOrigin?(ct(e,"onDragOriginEnd",Be(e,t,{})),!0):!1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);return!!r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);return r?(e.transformOrigin=r.transformOrigin,!0):!1},request:function(e){var t={},r=e.getRect(),n=0,i=0,s=r.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(a){return"deltaOrigin"in a?(o[0]+=a.deltaOrigin[0],o[1]+=a.deltaOrigin[1]):"origin"in a?(o[0]=a.origin[0]-s[0],o[1]=a.origin[1]-s[1]):("x"in a?n=a.x-r.left:"deltaX"in a&&(n+=a.deltaX),"y"in a?i=a.y-r.top:"deltaY"in a&&(i+=a.deltaY)),{datas:t,distX:n,distY:i,distOrigin:o}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function kC(e,t,r,n){var i=e.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,s=e.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,o=-1;if(t===0&&(i===0?o=0:i===1&&(o=1)),t===2&&(i<=2?o=2:i<=3&&(o=3)),t===3&&(s===0?o=4:s<4&&(o=7)),t===1&&(s<=1?o=5:s<=2&&(o=6)),!(o===-1||!e[o].virtual)){var a=e[o];MC(e,o),o<4?a.pos[0]=r:a.pos[1]=n}}function MC(e,t){t<4?e.slice(0,t+1).forEach(function(r){r.virtual=!1}):(e[0].virtual&&(e[0].virtual=!1),e.slice(4,t+1).forEach(function(r){r.virtual=!1}))}function TC(e,t){t<4?e.slice(t,4).forEach(function(r){r.virtual=!0}):e.slice(t).forEach(function(r){r.virtual=!0})}function gh(e,t,r,n,i){n===void 0&&(n=[0,0]);var s=[];return!e||e==="0px"?s=[]:s=$r(e),Iv(s,t,r,0,0,n,i)}function mh(e,t,r,n,i){var s=e.state,o=s.width,a=s.height,l=hc(i,e.props.roundRelative,o,a),u=l.raws,c=l.styles,f=l.radiusPoses,h=yC(f,u),d=h.horizontals,p=h.verticals,v=c.join(" ");s.borderRadiusState=v;var g=Ct(e,t,R({horizontals:d,verticals:p,borderRadius:v,width:o,height:a,delta:n,dist:r},xe({borderRadius:v},t)));return ct(e,"onRound",g),g}function yh(e){var t,r,n=e.getState().style,i=n.borderRadius||"";if(!i&&e.props.groupable){var s=e.moveables[0],o=e.getTargets()[0];o&&((s==null?void 0:s.props.target)===o?(i=(r=(t=e.moveables[0])===null||t===void 0?void 0:t.state.style.borderRadius)!==null&&r!==void 0?r:"",n.borderRadius=i):(i=ac(o).borderRadius,n.borderRadius=i))}return i}var PC={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(e){var t=e.props.roundClickable;return t===!0||t==="line"?pt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(e,t){var r=e.getState(),n=r.target,i=r.width,s=r.height,o=r.allMatrix,a=r.is3d,l=r.left,u=r.top,c=r.borderRadiusState,f=e.props,h=f.minRoundControls,d=h===void 0?[0,0]:h,p=f.maxRoundControls,v=p===void 0?[4,4]:p,g=f.zoom,m=f.roundPadding,b=m===void 0?0:m,C=f.isDisplayShadowRoundControls,S=f.groupable;if(!n)return null;var _=c||yh(e),y=a?4:3,w=gh(_,i,s,d,!0);if(!w)return null;var x=0,E=0,k=S?[0,0]:[l,u];return w.map(function(B,T){var P=B.horizontal,O=B.vertical,L=B.direction||"",W=Q([],A(B.pos),!1);E+=Math.abs(P),x+=Math.abs(O),P&&L.indexOf("n")>-1&&(W[1]-=b),O&&L.indexOf("w")>-1&&(W[0]-=b),P&&L.indexOf("s")>-1&&(W[1]+=b),O&&L.indexOf("e")>-1&&(W[0]+=b);var H=vt(Vt(o,W,y),k),z=C&&C!=="horizontal",Y=B.vertical?x<=v[1]&&(z||!B.virtual):E<=v[0]&&(C||!B.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(T),className:pt("control","border-radius",B.vertical?"vertical":"",B.virtual?"virtual":""),"data-radius-index":T,style:{display:Y?"block":"none",transform:"translate(".concat(H[0],"px, ").concat(H[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var r=t.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragControlStart:function(e,t){var r=t.inputEvent,n=t.datas,i=r.target,s=i.getAttribute("class")||"",o=s.indexOf("border-radius")>-1,a=s.indexOf("moveable-line")>-1&&s.indexOf("moveable-direction")>-1,l=o?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(a){var c=i.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!o&&!a)return!1;var f=Ct(e,t,{}),h=ct(e,"onRoundStart",f);if(h===!1)return!1;n.lineIndex=u,n.controlIndex=l,n.isControl=o,n.isLine=a,bn(e,t);var d=e.props,p=d.roundRelative,v=d.minRoundControls,g=v===void 0?[0,0]:v,m=e.state,b=m.width,C=m.height;n.isRound=!0,n.prevDist=[0,0];var S=yh(e),_=gh(S||"",b,C,g,!0)||[];return n.controlPoses=_,m.borderRadiusState=hc(_,p,b,C).styles.join(" "),f},dragControl:function(e,t){var r=t.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var i=r.controlIndex,s=A(gr(t),2),o=s[0],a=s[1],l=[o,a],u=vt(l,r.prevDist),c=e.props.maxRoundControls,f=c===void 0?[4,4]:c,h=e.state,d=h.width,p=h.height,v=n[i],g=v.vertical,m=v.horizontal,b=n.map(function(S){var _=S.horizontal,y=S.vertical,w=[_*m*l[0],y*g*l[1]];if(_){if(f[0]===1)return w;if(f[0]<4&&_!==m)return w}else{if(f[1]===0)return w[1]=y*m*l[0]/d*p,w;if(g){if(f[1]===1)return w;if(f[1]<4&&y!==g)return w}}return[0,0]});b[i]=l;var C=n.map(function(S,_){return R(R({},S),{pos:Mt(S.pos,b[_])})});return i<4?C.slice(0,i+1).forEach(function(S){S.virtual=!1}):C.slice(4,i+1).forEach(function(S){S.virtual=!1}),r.prevDist=[o,a],mh(e,t,l,u,C)},dragControlEnd:function(e,t){var r=e.state;r.borderRadiusState="";var n=t.datas,i=t.isDouble;if(!n.isRound)return!1;var s=n.isControl,o=n.controlIndex,a=n.isLine,l=n.lineIndex,u=n.controlPoses,c=u.filter(function(m){var b=m.virtual;return b}).length,f=e.props.roundClickable,h=f===void 0?!0:f;if(i&&h){if(s&&(h===!0||h==="control"))TC(u,o);else if(a&&(h===!0||h==="line")){var d=A(Gp(e,t),2),p=d[0],v=d[1];kC(u,l,p,v)}c!==u.filter(function(m){var b=m.virtual;return b}).length&&mh(e,t,[0,0],[0,0],u)}var g=Be(e,t,{});return ct(e,"onRoundEnd",g),r.borderRadiusState="",g},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);if(!r)return!1;var n=e.moveables,i=e.props.targets,s=tr(e,"roundable",t),o=R({targets:e.props.targets,events:s.map(function(a,l){return R(R({},a),{target:i[l],moveable:n[l],currentTarget:n[l]})})},r);return ct(e,"onRoundGroupStart",o),r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);if(!r)return!1;var n=e.moveables,i=e.props.targets,s=tr(e,"roundable",t),o=R({targets:e.props.targets,events:s.map(function(a,l){return R(R(R({},a),{target:i[l],moveable:n[l],currentTarget:n[l]}),xe({borderRadius:r.borderRadius},a))})},r);return ct(e,"onRoundGroup",o),o},dragGroupControlEnd:function(e,t){var r=e.moveables,n=e.props.targets,i=tr(e,"roundable",t);Ma(e,"onRound",function(a){var l=R({targets:e.props.targets,events:i.map(function(u,c){return R(R(R({},u),{target:n[c],moveable:r[c],currentTarget:r[c]}),xe({borderRadius:a.borderRadius},u))})},a);ct(e,"onRoundGroup",l)});var s=this.dragControlEnd(e,t);if(!s)return!1;var o=R({targets:e.props.targets,events:i.map(function(a,l){var u;return R(R({},a),{target:n[l],moveable:r[l],currentTarget:r[l],lastEvent:(u=a.datas)===null||u===void 0?void 0:u.lastEvent})})},s);return ct(e,"onRoundGroupEnd",o),o},unset:function(e){e.state.borderRadiusState=""}};function DC(e,t){var r=t?4:3,n=zt(r),i="matrix".concat(t?"3d":"","(").concat(n.join(","),")");return e===i||e==="matrix(1,0,0,1,0,0)"}var Fv={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(e,t){var r=e.state,n=r.is3d,i=r.targetMatrix,s=r.inlineTransform,o=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Mp(i,!0),")"),a=!s||s==="none"?o:s;t.datas.startTransforms=DC(a,n)?[]:$r(a)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return Ct(e,t,{setTransform:function(r){t.datas.startTransforms=Jt(r)?r:$r(r)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return Ct(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),ct(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){t.datas.startTransforms||this.setTransform(e,t),this.resetStyle(t),ct(e,"onBeforeRender",Ct(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t.datas.startTransforms||(this.setTransform(e,t),this.resetStyle(t)),ct(e,"onBeforeRenderEnd",Ct(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var r=this;this.dragStart(e,t);var n=tr(e,"beforeRenderable",t),i=e.moveables,s=n.map(function(o,a){var l=i[a];return r.setTransform(l,o),r.resetStyle(o),r.fillDragStartParams(l,o)});ct(e,"onBeforeRenderGroupStart",Ct(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:s}))},dragGroup:function(e,t){var r=this;this.drag(e,t);var n=tr(e,"beforeRenderable",t),i=e.moveables,s=n.map(function(o,a){var l=i[a];return r.resetStyle(o),r.fillDragParams(l,o)});ct(e,"onBeforeRenderGroup",Ct(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:s}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),ct(e,"onBeforeRenderGroupEnd",Ct(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},zv={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(e,t){ct(e,"onRenderStart",Ct(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){ct(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){return this.drag(e,t)},dragEnd:function(e,t){ct(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){ct(e,"onRenderGroupStart",Ct(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var r=this,n=tr(e,"beforeRenderable",t),i=e.moveables,s=n.map(function(o,a){var l=i[a];return r.fillDragParams(l,o)});ct(e,"onRenderGroup",Ct(e,t,R(R({isPinch:!!t.isPinch,targets:e.props.targets,transform:Ds(t),transformObject:{}},xe(Rs(t))),{events:s})))},dragGroupEnd:function(e,t){var r=this,n=tr(e,"beforeRenderable",t),i=e.moveables,s=n.map(function(o,a){var l=i[a];return r.fillDragEndParams(l,o)});ct(e,"onRenderGroupEnd",Ct(e,t,R({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:s,transformObject:{},transform:Ds(t)},xe(Rs(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){var r={};return Un(xo(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),Ct(e,t,R({isPinch:!!t.isPinch,transformObject:r,transform:Ds(t)},xe(Rs(t))))},fillDragEndParams:function(e,t){var r={};return Un(xo(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),Ct(e,t,R({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:r,transform:Ds(t)},xe(Rs(t))))}};function Li(e,t,r,n,i,s,o){s.clientDistX=s.distX,s.clientDistY=s.distY;var a=i==="Start",l=i==="End",u=i==="After",c=e.state.target,f=s.isRequest,h=n.indexOf("Control")>-1;if(!c||a&&h&&!f&&e.areaElement===s.inputEvent.target)return!1;var d=Q([],A(t),!1);if(f){var p=s.requestAble;d.some(function(T){return T.name===p})||d.push.apply(d,Q([],A(e.props.ables.filter(function(T){return T.name===p})),!1))}if(!d.length||d.every(function(T){return T.dragRelation}))return!1;var v=s.inputEvent,g;l&&v&&(g=document.elementFromPoint(s.clientX,s.clientY)||v.target);var m=!1,b=function(){var T;m=!0,(T=s.stop)===null||T===void 0||T.call(s)},C=a&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());C&&e.updateRect(i,!0,!1);var S=s.datas,_=h?"controlGesto":"targetGesto",y=e[_],w=function(T,P,O){if(!(P in T)||y!==e[_])return!1;var L=T.name,W=S[L]||(S[L]={});if(a&&(W.isEventStart=!O||!T[O]||T[O](e,s)),!W.isEventStart)return!1;var H=T[P](e,R(R({},s),{stop:b,datas:W,originalDatas:S,inputTarget:g}));return e._emitter.off(),a&&H===!1&&(W.isEventStart=!1),H};C&&d.forEach(function(T){T.unset&&T.unset(e)}),w(Fv,"drag".concat(n).concat(i));var x=0,E=0;r.forEach(function(T){if(m)return!1;var P="".concat(T).concat(n).concat(i),O="".concat(T).concat(n,"Condition");i===""&&!f&&Qx(e.state,s);var L=d.filter(function(z){return z[P]});L=L.filter(function(z,Y){return z.name&&L.indexOf(z)===Y});var W=L.filter(function(z){return w(z,P,O)}),H=W.length;m&&++x,H&&++E,!m&&a&&L.length&&!H&&(x+=L.filter(function(z){var Y=z.name,J=S[Y];return J.isEventStart?z.dragRelation!=="strong":!1}).length?1:0)}),(!u||E)&&w(zv,"drag".concat(n).concat(i));var k=y!==e[_]||x===r.length;if((l||m||k)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(T){T.state.gestos={}}),d.forEach(function(T){T.unset&&T.unset(e)})),a&&!k&&!f&&E&&e.props.preventDefault&&(s==null||s.preventDefault()),e.isUnmounted||k)return!1;if(!a&&E&&!o||l){var B=e.props.flushSync||vv;B(function(){e.updateRect(l?i:"",!0,!1),e.forceUpdate()})}return!a&&!l&&!u&&E&&!o&&Li(e,t,r,n,i+"After",s),!0}function pc(e,t){return function(r,n){var i;n===void 0&&(n=r.inputEvent.target);var s=n,o=e.areaElement,a=e._dragTarget;return!a||!t&&(!((i=e.controlGesto)===null||i===void 0)&&i.isFlag())?!1:s===a||a.contains(s)||s===o||!e.isMoveableElement(s)&&!e.controlBox.contains(s)||te(s,"moveable-area")||te(s,"moveable-padding")||te(s,"moveable-edgeDraggable")}}function Nv(e,t,r){var n=e.controlBox,i=[],s=e.props,o=s.dragArea,a=e.state.target,l=s.dragTarget;i.push(n),(!o||l)&&i.push(t),!o&&l&&a&&t!==a&&s.dragTargetSelf&&i.push(a);var u=pc(e);return Wv(e,i,"targetAbles",r,{dragStart:u,pinchStart:u})}function Gv(e,t){var r=e.controlBox,n=[];n.push(r);var i=pc(e,!0),s=function(o,a){if(a===void 0&&(a=o.inputEvent.target),a===r)return!0;var l=i(o,a);return!l};return Wv(e,n,"controlAbles",t,{dragStart:s,pinchStart:s})}function Wv(e,t,r,n,i){i===void 0&&(i={});var s=r==="targetAbles",o=e.props,a=o.pinchOutside,l=o.pinchThreshold,u=o.preventClickEventOnDrag,c=o.preventClickDefault,f=o.checkInput,h=o.dragFocusedInput,d=o.preventDefault,p=d===void 0?!0:d,v=o.preventRightClick,g=v===void 0?!0:v,m=o.preventWheelClick,b=m===void 0?!0:m,C=o.dragContainer,S=dr(C,!0),_={preventDefault:p,preventRightClick:g,preventWheelClick:b,container:S||Hr(e.getControlBoxElement()),pinchThreshold:l,pinchOutside:a,preventClickEventOnDrag:s?u:!1,preventClickEventOnDragStart:s?c:!1,preventClickEventByCondition:s?null:function(x){return e.controlBox.contains(x.target)},checkInput:s?f:!1,dragFocusedInput:h},y=new nb(t,_),w=n==="Control";return["drag","pinch"].forEach(function(x){["Start","","End"].forEach(function(E){y.on("".concat(x).concat(E),function(k){var B,T=k.eventType,P=x==="drag"&&k.isPinch;if(i[T]&&!i[T](k)){k.stop();return}if(!P){var O=x==="drag"?[x]:["drag",x],L=Q([],A(e[r]),!1),W=Li(e,L,O,n,E,k);W?(e.props.stopPropagation||E==="Start"&&w)&&((B=k==null?void 0:k.inputEvent)===null||B===void 0||B.stopPropagation()):k.stop()}})})}),y}var RC=function(){function e(t,r,n){var i=this;this.target=t,this.moveable=r,this.eventName=n,this.ables=[],this._onEvent=function(s){var o=i.eventName,a=i.moveable;a.state.disableNativeEvent||i.ables.forEach(function(l){l[o](a,{inputEvent:s})})},t.addEventListener(n.toLowerCase(),this._onEvent)}return e.prototype.setAbles=function(t){this.ables=t},e.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e}();function AC(e,t,r,n){var i;r===void 0&&(r=t);var s=Xp(e,t),o=s.matrixes,a=s.is3d,l=s.targetMatrix,u=s.transformOrigin,c=s.targetOrigin,f=s.offsetContainer,h=s.hasFixed,d=s.zoom,p=Xb(f,r),v=p.matrixes,g=p.is3d,m=p.offsetContainer,b=p.zoom,C=n,S=4,_=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,y=l,w=zt(S),x=zt(S),E=zt(S),k=zt(S),B=o.length,T=v.map(function(Y){return R(R({},Y),{matrix:Y.matrix?Q([],A(Y.matrix),!1):void 0})}).reverse();o.reverse(),!a&&C&&(y=rr(y,3,4),ql(o)),!g&&C&&ql(T),T.forEach(function(Y){x=Bt(x,Y.matrix,S)});var P=r||Yr(e),O=((i=T[0])===null||i===void 0?void 0:i.target)||qi(P,P,!0).offsetParent,L=T.slice(1).reduce(function(Y,J){return Bt(Y,J.matrix,S)},zt(S));o.forEach(function(Y,J){if(B-2===J&&(E=w.slice()),B-1===J&&(k=w.slice()),!Y.matrix){var G=o[J+1],tt=qx(Y,G,O,S,Bt(L,w,S));Y.matrix=dn(tt,S)}w=Bt(w,Y.matrix,S)});var W=!_&&a;y||(y=zt(W?4:3));var H=ka(_&&y.length===16?rr(y,4,3):y,W),z=x;return x=Ep(x,S,S),{hasZoom:d!==1||b!==1,hasFixed:h,matrixes:o,rootMatrix:x,originalRootMatrix:z,beforeMatrix:E,offsetMatrix:k,allMatrix:w,targetMatrix:y,targetTransform:H,inlineTransform:e.style.transform,transformOrigin:u,targetOrigin:c,is3d:C,offsetContainer:f,offsetRootContainer:m}}function BC(e,t,r,n){r===void 0&&(r=t);var i=0,s=0,o=0,a={},l=bv(e);if(e&&(i=l.offsetWidth,s=l.offsetHeight),e){var u=AC(e,t,r,n),c=Nn(u.allMatrix,u.transformOrigin,i,s);a=R(R({},u),c);var f=Nn(u.allMatrix,[50,50],100,100);o=xv([f.pos1,f.pos2],f.direction)}var h=4;return R(R(R({hasZoom:!1,width:i,height:s,rotation:o},l),{originalRootMatrix:zt(h),rootMatrix:zt(h),beforeMatrix:zt(h),offsetMatrix:zt(h),allMatrix:zt(h),targetMatrix:zt(h),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function Ql(e,t,r,n,i,s){s===void 0&&(s=[]);var o=1,a=[0,0],l=Bs(),u=Bs(),c=Bs(),f=Bs(),h=[0,0],d={},p=BC(t,r,i,!0);if(t){var v=Pe(t);s.forEach(function(T){d[T]=v(T)});var g=p.is3d?4:3,m=Nn(p.offsetMatrix,Mt(p.transformOrigin,kp(p.targetMatrix,g)),p.width,p.height);o=m.direction,a=Mt(m.origin,[m.left-p.left,m.top-p.top]),f=Ii(p.offsetRootContainer);var b=qi(n,n,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var C=Nn(Bt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),S=Nn(p.originalRootMatrix,_o(Pe(b)("transformOrigin")).map(function(T){return parseFloat(T)}),b.offsetWidth,b.offsetHeight);if(l=nl(C,f),c=nl(S,f,b,!0),e){var _=C.left,y=C.top;u=nl({left:_,top:y,bottom:y,right:y},f)}}else{l=Ii(t),c=$b(b),e&&(u=Ii(e));var w=c.left,x=c.top,E=c.clientLeft,k=c.clientTop,B=[l.left-w,l.top-x];h=vt(Jn(p.rootMatrix,B,4),[E+p.left,k+p.top])}}return R({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:f,beforeDirection:o,beforeOrigin:a,originalBeforeOrigin:a,target:t,style:d,offsetDelta:h},p)}function bh(e){var t=e.pos1,r=e.pos2,n=e.pos3,i=e.pos4;if(!t||!r||!n||!i)return null;var s=pn([t,r,n,i]),o=[s.minX,s.minY],a=vt(e.origin,o);return t=vt(t,o),r=vt(r,o),n=vt(n,o),i=vt(i,o),R(R({},e),{left:e.left,top:e.top,posDelta:o,pos1:t,pos2:r,pos3:n,pos4:i,origin:a,beforeOrigin:a,isPersisted:!0})}var Zn=function(e){cs(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state=R({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Ql(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new ya,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var n=r.props.parentMoveable;if(n){n.checkUpdateRect();return}Yy(r._observerId),r._observerId=Qd(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},r}return t.prototype.render=function(){var r=this.props,n=this.getState(),i=r.parentPosition,s=r.className,o=r.target,a=r.zoom,l=r.cspNonce,u=r.translateZ,c=r.cssStyled,f=r.groupable,h=r.linePadding,d=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=A(i||[0,0],2),v=p[0],g=p[1],m=n.left,b=n.top,C=n.target,S=n.direction,_=n.hasFixed,y=n.offsetDelta,w=r.targets,x=this.isDragging(),E={};this.getEnabledAbles().forEach(function(L){E["data-able-".concat(L.name.toLowerCase())]=!0});var k=this._getAbleClassName(),B=w&&w.length&&(C||f)||o||!this._hasFirstTarget&&this.state.isPersisted,T=this.controlBox||this.props.firstRenderState||this.props.persistData,P=[m-v,b-g];!f&&r.useAccuratePosition&&(P[0]+=y[0],P[1]+=y[1]);var O={position:_?"fixed":"absolute",display:B?"block":"none",visibility:T?"visible":"hidden",transform:"translate3d(".concat(P[0],"px, ").concat(P[1],"px, ").concat(u,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return h&&(O["--moveable-line-padding"]=h),d&&(O["--moveable-control-padding"]=d),Qe(c,R({cspNonce:l,ref:Cr(this,"controlBox"),className:"".concat(pt("control-box",S===-1?"reverse":"",x?"dragging":"")," ").concat(k," ").concat(s)},E,{onClick:this._onPreventClick,style:O}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,n=r.parentMoveable,i=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},t.prototype.componentWillUnmount=function(){var r,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),An(this,!1),An(this,!0);var s=this.events;for(var o in s){var a=s[o];a&&a.destroy()}},t.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},t.prototype.getAble=function(r){var n=this.props.ables||[];return Te(n,function(i){return i.name===r})},t.prototype.getContainer=function(){var r=this.props,n=r.parentMoveable,i=r.wrapperMoveable,s=r.container;return s||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(r){var n;return r&&(((n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"class"))||"").indexOf(qu)>-1},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=this.targetGesto,s=this.controlGesto;return i&&pc(this)({inputEvent:r},n)?i.isFlag()||i.triggerDragStart(r):s&&this.isMoveableElement(n)&&(s.isFlag()||s.triggerDragStart(r)),this},t.prototype.hitTest=function(r){var n=this.state,i=n.target,s=n.pos1,o=n.pos2,a=n.pos3,l=n.pos4,u=n.targetClientRect;if(!i)return 0;var c;if(ii(r)){var f=r.getBoundingClientRect();c={left:f.left,top:f.top,width:f.width,height:f.height}}else c=R({width:0,height:0},r);var h=c.left,d=c.top,p=c.width,v=c.height,g=Hf([s,o,l,a],u),m=J1(g,[[h,d],[h+p,d],[h+p,d+v],[h,d+v]]),b=Dp(g);return!m||!b?0:Math.min(100,m/b*100)},t.prototype.isInside=function(r,n){var i=this.state,s=i.target,o=i.pos1,a=i.pos2,l=i.pos3,u=i.pos4,c=i.targetClientRect;return s?Ll([r,n],Hf([o,a,u,l],c)):!1},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0);var s=this.props,o=!s.parentPosition&&!s.wrapperMoveable;o&&qn(!0);var a=s.parentMoveable,l=this.state,u=l.target||s.target,c=this.getContainer(),f=a?a._rootContainer:this._rootContainer,h=Ql(this.controlBox,u,c,c,f||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&s.persistData){var d=bh(s.persistData);for(var p in d)h[p]=d[p]}o&&qn(),this.updateState(h,a?!1:i)},t.prototype.isDragging=function(r){var n,i,s=this.targetGesto,o=this.controlGesto;if(s!=null&&s.isFlag()){if(!r)return!0;var a=s.getEventData();return!!(!((n=a[r])===null||n===void 0)&&n.isEventStart)}if(o!=null&&o.isFlag()){if(!r)return!0;var a=o.getEventData();return!!(!((i=a[r])===null||i===void 0)&&i.isEventStart)}return!1},t.prototype.updateTarget=function(r){this.updateRect(r,!0)},t.prototype.getRect=function(){var r=this.state,n=We(this.state),i=A(n,4),s=i[0],o=i[1],a=i[2],l=i[3],u=Ne(n),c=r.width,f=r.height,h=u.width,d=u.height,p=u.left,v=u.top,g=[r.left,r.top],m=Mt(g,r.origin),b=Mt(g,r.beforeOrigin),C=r.transformOrigin;return{width:h,height:d,left:p,top:v,pos1:s,pos2:o,pos3:a,pos4:l,offsetWidth:c,offsetHeight:f,beforeOrigin:b,origin:m,transformOrigin:C,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(r){if(!r||r==="target"){var n=this.targetGesto;(n==null?void 0:n.isIdle())===!1&&Kl(this,!1),n==null||n.stop()}if(!r||r==="control"){var n=this.controlGesto;(n==null?void 0:n.isIdle())===!1&&Kl(this,!0),n==null||n.stop()}},t.prototype.getRotation=function(){var r=this.state,n=r.pos1,i=r.pos2,s=r.direction;return rC(n,i,s)},t.prototype.request=function(r,n,i){n===void 0&&(n={});var s=this,o=s.props,a=o.parentMoveable||o.wrapperMoveable||s,l=a.props.ables,u=o.groupable,c=Te(l,function(m){return m.name===r});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var f=c.request(s),h=i||n.isInstant,d=f.isControl?"controlAbles":"targetAbles",p="".concat(u?"Group":"").concat(f.isControl?"Control":""),v=Q([],A(a[d]),!1),g={request:function(m){return Li(s,v,["drag"],p,"",R(R({},f.request(m)),{requestAble:r,isRequest:!0}),h),g},requestEnd:function(){return Li(s,v,["drag"],p,"End",R(R({},f.requestEnd()),{requestAble:r,isRequest:!0}),h),g}};return Li(s,v,["drag"],p,"Start",R(R({},f.requestStart(n)),{requestAble:r,isRequest:!0}),h),h?g.request(n).requestEnd():g},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var r=this.getState(),n=this.props,i=n.padding,s=r.originalBeforeOrigin,o=r.transformOrigin,a=r.allMatrix,l=r.is3d,u=r.pos1,c=r.pos2,f=r.pos3,h=r.pos4,d=r.left,p=r.top,v=r.isPersisted,g=n.zoom||1;if(!i&&g<=1){r.renderPoses=[u,c,f,h],r.renderLines=[[u,c],[c,h],[h,f],[f,u]];return}var m=Dv(i||{}),b=m.left,C=m.top,S=m.bottom,_=m.right,y=l?4:3,w=[];v?w=o:this.controlBox&&n.groupable?w=s:w=Mt(s,[d,p]);var x=yo(y,dn(w.map(function(O){return-O}),y),a,dn(o,y)),E=Le(x,u,[-b,-C],y),k=Le(x,c,[_,-C],y),B=Le(x,f,[-b,S],y),T=Le(x,h,[_,S],y);if(r.renderPoses=[E,k,B,T],r.renderLines=[[E,k],[k,T],[T,B],[B,E]],g){var P=g/2;r.renderLines=[[Le(x,u,[-b-P,-C],y),Le(x,c,[_+P,-C],y)],[Le(x,c,[_,-C-P],y),Le(x,h,[_,S+P],y)],[Le(x,h,[_+P,S],y),Le(x,f,[-b-P,S],y)],[Le(x,f,[-b,S+P],y),Le(x,u,[-b,-C-P],y)]]}},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,n=r.target,i=r.container,s=r.parentMoveable,o=this.state,a=o.target,l=o.container;if(!(!a&&!n)){this.updateAbles();var u=!Jl(a,n),c=u||!Jl(l,i);if(c){var f=i||this.controlBox;f&&this.unsetAbles(),this.updateState({target:n,container:i}),!s&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(r,n){var i=this.props;if(this._emitter.trigger(r,n),i.parentMoveable&&n.isRequest&&!n.isRequestChild)return i.parentMoveable.triggerEvent(r,n,!0);var s=i[r];return s&&s(n)},t.prototype.useCSS=function(r,n){var i=this.props.customStyledMap,s=r+n;return i[s]||(i[s]=Bp(r,n)),i[s]},t.prototype.getState=function(){var r,n=this.props;(n.target||!((r=n.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,s=n.persistData,o=n.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&s){var a=bh(s);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(r)})},t.prototype.updateAbles=function(r,n){r===void 0&&(r=this.props.ables),n===void 0&&(n="");var i=this.props,s=i.triggerAblesSimultaneously,o=this.getEnabledAbles(r),a="drag".concat(n,"Start"),l="pinch".concat(n,"Start"),u="drag".concat(n,"ControlStart"),c=Os(o,[a,l],s),f=Os(o,[u],s);this.enabledAbles=o,this.targetAbles=c,this.controlAbles=f},t.prototype.updateState=function(r,n){if(n){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var s in r)i[s]=r[s]}},t.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var n=this.props;return r.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},t.prototype.renderAbles=function(){var r=this,n=this.props,i=n.triggerAblesSimultaneously,s={createElement:Qe};return this.renderState={},Zx(kv(Os(this.getEnabledAbles(),["render"],i).map(function(o){var a=o.render;return a(r,s)||[]})).filter(function(o){return o}),function(o){var a=o.key;return a}).map(function(o){return o[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var s,o,a=(o=(s=i.requestStyle)===null||s===void 0?void 0:s.call(i))!==null&&o!==void 0?o:[];return Q(Q([],A(n),!1),A(a),!1)},Q([],A(this.props.requestStyles||[]),!1));return r},t.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},t.prototype._updateEvents=function(){var r=this.targetAbles.length,n=this.controlAbles.length,i=this._dragTarget,s=!r&&this.targetGesto||this._isTargetChanged(!0);s&&(An(this,!1),this.updateState({gestos:{}})),n||An(this,!0),i&&r&&!this.targetGesto&&(this.targetGesto=Nv(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=Gv(this,"Control"))},t.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=dr(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var r=this.props,n=r,i=n.zoom,s=n.hideDefaultLines,o=n.hideChildMoveableDefaultLines,a=n.parentMoveable;if(s||a&&o)return[];var l=this.getState(),u={createElement:Qe};return l.renderLines.map(function(c,f){return Yi(u,"",c[0],c[1],i,"render-line-".concat(f))})},t.prototype._isTargetChanged=function(r){var n=this.props,i=n.dragTarget||n.target,s=this._prevOriginalDragTarget,o=this._prevDragArea,a=n.dragArea,l=!a&&s!==i,u=(r||a)&&o!==a;return l||u||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var r=this,n=this.props,i=n.dragArea?this.areaElement:this.state.target,s=this.events,o=Er(s);if(this._isTargetChanged())for(var a in s){var l=s[a];l&&l.destroy(),s[a]=null}if(i){var u=this.enabledAbles;o.forEach(function(c){var f=Os(u,[c]),h=f.length>0,d=s[c];if(!h){d&&(d.destroy(),s[c]=null);return}d||(d=new RC(i,r,c),s[c]=d),d.setAbles(f)})}},t.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=dr(r,!0))},t.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=dr(r,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(Q(Q([],A(this._getAbleViewClassNames()),!1),[this.isDragging()?uC:""],!1))},t.prototype._changeAbleViewClassNames=function(r){var n=this._viewContainer,i=Ev(r.filter(Boolean),function(u){return u}).map(function(u){var c=A(u,1),f=c[0];return f}),s=this._viewClassNames,o=ss(s,i),a=o.removed,l=o.added;a.forEach(function(u){ip(n,s[u])}),l.forEach(function(u){np(n,i[u])}),this._viewClassNames=i},t.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(r){var n=this;r===void 0&&(r="");var i=this.getEnabledAbles(),s=this.targetGesto,o=this.controlGesto,a=s!=null&&s.isFlag()?s.getEventData():{},l=o!=null&&o.isFlag()?o.getEventData():{};return i.map(function(u){var c,f,h,d=u.name,p=((c=u.className)===null||c===void 0?void 0:c.call(u,n))||"";return(!((f=a[d])===null||f===void 0)&&f.isEventStart||!((h=l[d])===null||h===void 0)&&h.isEventStart)&&(p+=" ".concat(pt("".concat(d).concat(r,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(r){var n,i=this.props,s=i.target,o=Hr(this.getControlBoxElement());if(!o.ResizeObserver||!s||!i.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===s&&this._reiszeObserver)){var a=new o.ResizeObserver(this.checkUpdateRect);a.observe(s,{box:"border-box"}),this._reiszeObserver=a}},t.prototype._updateMutationObserver=function(r){var n=this,i,s=this.props,o=s.target,a=Hr(this.getControlBoxElement());if(!a.MutationObserver||!o||!s.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(r.target===o&&this._mutationObserver)){var l=new a.MutationObserver(function(u){var c,f;try{for(var h=pb(u),d=h.next();!d.done;d=h.next()){var p=d.value;p.type==="attributes"&&p.attributeName==="style"&&n.checkUpdateRect()}}catch(v){c={error:v}}finally{try{d&&!d.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}});l.observe(o,{attributes:!0}),this._mutationObserver=l}},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:vv,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t}(fp),vc={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(e,t){var r,n=e.props,i=n.targets||[],s=e.getState(),o=s.left,a=s.top,l=s.isPersisted,u=n.zoom||1,c=e.renderGroupRects,f=((r=n.persistData)===null||r===void 0?void 0:r.children)||[];l?i=f.map(function(){return null}):f=[];var h=Bn(e,"parentPosition",[o,a],function(p){return p.join(",")}),d=Bn(e,"requestStyles",e.getRequestChildStyles(),function(p){return p.join(",")});return e.moveables=e.moveables.slice(0,i.length),Q(Q([],A(i.map(function(p,v){return t.createElement(Zn,{key:"moveable"+v,ref:qd(e,"moveables",v),target:p,origin:!1,requestStyles:d,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:[o,a],persistData:f[v],zoom:u})})),!1),A(kv(c.map(function(p,v){var g=p.pos1,m=p.pos2,b=p.pos3,C=p.pos4,S=[g,m,b,C];return[[0,1],[1,3],[3,2],[2,0]].map(function(_,y){var w=A(_,2),x=w[0],E=w[1];return Yi(t,"",vt(S[x],h),vt(S[E],h),u,"group-rect-".concat(v,"-").concat(y))})}))),!1)}},OC=fs("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var r=e.props.target,n=t.inputEvent,i=t.inputTarget,s=e.isMoveableElement(i),o=!s&&e.controlBox.contains(i);if(!(!n||!i||t.isDrag||e.isMoveableElement(i)||o)){var a=r.contains(i);ct(e,"onClick",Ct(e,t,{isDouble:t.isDouble,inputTarget:i,isTarget:r===i,moveableTarget:e.props.target,containsTarget:a}))}},dragGroupEnd:function(e,t){var r=t.inputEvent,n=t.inputTarget;if(!(!r||!n||t.isDrag||e.isMoveableElement(n)||t.datas.inputTarget===n)){var i=e.props.targets,s=i.indexOf(n),o=s>-1,a=!1;s===-1&&(s=_r(i,function(l){return l.contains(n)}),a=s>-1),ct(e,"onClickGroup",Ct(e,t,{isDouble:t.isDouble,targets:i,inputTarget:n,targetIndex:s,isTarget:o,containsTarget:a,moveableTarget:i[s]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}});function Sn(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),R(R({},e),{datas:t})}var IC=fs("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(e,t){var r=e.props,n=r.edgeDraggable;return n?qp(t,"edgeDraggable",n,e.getState().renderPoses,r.zoom):[]},dragCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&te(i,pt("direction"))&&te(i,pt("edge"))&&te(i,pt("edgeDraggable"))},dragStart:function(e,t){return me.dragStart(e,Sn(t))},drag:function(e,t){return me.drag(e,Sn(t))},dragEnd:function(e,t){return me.dragEnd(e,Sn(t))},dragGroupCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&te(i,pt("direction"))&&te(i,pt("line"))},dragGroupStart:function(e,t){return me.dragGroupStart(e,Sn(t))},dragGroup:function(e,t){return me.dragGroup(e,Sn(t))},dragGroupEnd:function(e,t){return me.dragGroupEnd(e,Sn(t))},unset:function(e){return me.unset(e)}}),Hv={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},gc=[Fv,Bv,Nx,iC,me,IC,Xl,sC,aC,Cx,hC,dC,cC,EC,_C,PC,vc,Hv,OC,Av,zv],LC=gc.reduce(function(e,t){return(t.events||[]).forEach(function(r){rp(e,r)}),e},[]),FC=gc.reduce(function(e,t){return(t.props||[]).forEach(function(r){rp(e,r)}),e},[]);function xh(e,t){var r=A(e,3),n=r[0],i=r[1],s=r[2];return(n*t[0]+i*t[1]+s)/Math.sqrt(n*n+i*i)}function Fs(e,t){var r=A(e,2),n=r[0],i=r[1];return-n*t[0]-i*t[1]}function Ch(e,t){return Math.max.apply(Math,Q([],A(e.map(function(r){var n=A(r,4),i=n[0],s=n[1],o=n[2],a=n[3];return Math.max(i[t],s[t],o[t],a[t])})),!1))}function Sh(e,t){return Math.min.apply(Math,Q([],A(e.map(function(r){var n=A(r,4),i=n[0],s=n[1],o=n[2],a=n[3];return Math.min(i[t],s[t],o[t],a[t])})),!1))}function zC(e,t){var r,n,i,s=[0,0],o=[0,0],a=[0,0],l=[0,0],u=0,c=0;if(!e.length)return{pos1:s,pos2:o,pos3:a,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:t};var f=xt(t,Ce);if(f%90){var h=f/180*Math.PI,d=Math.tan(h),p=-1/d,v=[Hl,$f],g=[[0,0],[0,0]],m=[Hl,$f],b=[[0,0],[0,0]];e.forEach(function(ot){ot.forEach(function(et){var st=xh([-d,1,0],et),K=xh([-p,1,0],et);v[0]>st&&(g[0]=et,v[0]=st),v[1]<st&&(g[1]=et,v[1]=st),m[0]>K&&(b[0]=et,m[0]=K),m[1]<K&&(b[1]=et,m[1]=K)})});var C=A(g,2),S=C[0],_=C[1],y=A(b,2),w=y[0],x=y[1],E=[-d,1,Fs([-d,1],S)],k=[-d,1,Fs([-d,1],_)],B=[-p,1,Fs([-p,1],w)],T=[-p,1,Fs([-p,1],x)];r=A([[E,B],[E,T],[k,B],[k,T]].map(function(ot){var et=A(ot,2),st=et[0],K=et[1];return Uu(st,K)[0]}),4),s=r[0],o=r[1],a=r[2],l=r[3],u=m[1]-m[0],c=v[1]-v[0]}else{var P=Sh(e,0),O=Sh(e,1),L=Ch(e,0),W=Ch(e,1);if(s=[P,O],o=[L,O],a=[P,W],l=[L,W],u=L-P,c=W-O,f%180){var H=[a,s,l,o];n=A(H,4),s=n[0],o=n[1],a=n[2],l=n[3],u=W-O,c=L-P}}if(f%360>180){var H=[l,a,o,s];i=A(H,4),s=i[0],o=i[1],a=i[2],l=i[3]}var z=pn([s,o,a,l]),Y=z.minX,J=z.minY,G=z.maxX,tt=z.maxY;return{pos1:s,pos2:o,pos3:a,pos4:l,width:u,height:c,minX:Y,minY:J,maxX:G,maxY:tt,rotation:t}}function Vv(e,t){var r=t.map(function(n){if(Jt(n)){var i=Vv(e,n),s=i.length;return s>1?i:s===1?i[0]:null}else{var o=Te(e,function(a){var l=a.manager;return l.props.target===n});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return r.length===1&&Jt(r[0])?r[0]:r}var NC=function(e){cs(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.differ=new Pp,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){var s;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;qn(!0),this.moveables.forEach(function(ft){ft.updateRect(r,!1,!1)});var a=this.props,l=this.moveables,u=o.target||a.target,c=l.map(function(ft){return{finded:!1,manager:ft}}),f=this.props.targetGroups||[],h=Vv(c,f),d=a.useDefaultGroupRotate;h.push.apply(h,Q([],A(c.filter(function(ft){var mt=ft.finded;return!mt}).map(function(ft){var mt=ft.manager;return mt})),!1));var p=[],v=!n||r!==""&&a.updateGroup,g=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(s=a.persistData)===null||s===void 0?void 0:s.rotation;m!=null&&(g=m)}function b(ft,mt,wt){var nt=ft.map(function($){if(Jt($)){var j=b($,mt),V=[j.pos1,j.pos2,j.pos3,j.pos4];return p.push(j),{poses:V,rotation:j.rotation}}else return{poses:We($.state),rotation:$.getRotation()}}),ht=nt.map(function($){var j=$.rotation;return j}),M=0,D=ht[0],I=ht.every(function($){return Math.abs(D-$)<.1});v?M=!d&&I?D:g:M=!d&&!wt&&I?D:mt;var F=nt.map(function($){var j=$.poses;return j}),N=zC(F,M);return N}var C=b(h,this.rotation,!0);v&&(this.rotation=C.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=p;var S=this.transformOrigin,_=this.rotation,y=this.scale,w=C.width,x=C.height,E=C.minX,k=C.minY,B=nC([[0,0],[w,0],[0,x],[w,x]],fc(S,w,x),this.rotation/180*Math.PI),T=pn(B.result),P=T.minX,O=T.minY,L=" rotate(".concat(_,"deg)")+" scale(".concat(ye(y[0]),", ").concat(ye(y[1]),")"),W="translate(".concat(-P,"px, ").concat(-O,"px)").concat(L);this.controlBox.style.transform="translate3d(".concat(E,"px, ").concat(k,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(S,";")+"width:".concat(w,"px;height:").concat(x,"px;")+"transform: ".concat(W),o.width=w,o.height=x;var H=this.getContainer(),z=Ql(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||H,[]),Y=[z.left,z.top],J=A(We(z),4),G=J[0],tt=J[1],ot=J[2],et=J[3],st=pn([G,tt,ot,et]),K=[st.minX,st.minY],at=ye(y[0]*y[1]);z.pos1=vt(G,K),z.pos2=vt(tt,K),z.pos3=vt(ot,K),z.pos4=vt(et,K),z.left=E-z.left+K[0],z.top=k-z.top+K[1],z.origin=vt(Mt(Y,z.origin),K),z.beforeOrigin=vt(Mt(Y,z.beforeOrigin),K),z.originalBeforeOrigin=Mt(Y,z.originalBeforeOrigin),z.transformOrigin=vt(Mt(Y,z.transformOrigin),K),u.style.transform="translate(".concat(-P-K[0],"px, ").concat(-O-K[1],"px)")+L,qn(),this.updateState(R(R({},z),{posDelta:K,direction:at,beforeDirection:at}),i)},t.prototype.getRect=function(){return R(R({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.triggerEvent=function(r,n,i){if(i||r.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,r,n);this._emitter.trigger(r,n)},t.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var s,o,a=(o=(s=i.requestChildStyle)===null||s===void 0?void 0:s.call(i))!==null&&o!==void 0?o:[];return Q(Q([],A(n),!1),A(a),!1)},[]);return r},t.prototype.getMoveables=function(){return Q([],A(this.moveables),!1)},t.prototype.updateAbles=function(){e.prototype.updateAbles.call(this,Q(Q([],A(this.props.ables),!1),[vc],!1),"Group")},t.prototype._updateTargets=function(){e.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=dr(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var r=this.state,n=this.props,i=this._prevDragTarget,s=n.dragTarget||this.areaElement,o=n.targets,a=this.differ.update(o),l=a.added,u=a.changed,c=a.removed,f=l.length||c.length;(f||this._prevOriginalDragTarget!==this._originalDragTarget)&&(An(this,!1),An(this,!0),this.updateState({gestos:{}})),i!==s&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=Nv(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Gv(this,"GroupControl")));var h=!Jl(r.container,n.container);h&&(r.container=n.container),(h||f||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||u.length||o.length&&!Pv(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},t.prototype._updateObserver=function(){},t.defaultProps=R(R({},Zn.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(Zn),GC=function(e){cs(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.moveables=[],r}return t.prototype.render=function(){var r=this,n,i=this.props,s=i.cspNonce,o=i.cssStyled,a=i.persistData,l=i.targets||[],u=l.length,c=this.isUnmounted||!u,f=(n=a==null?void 0:a.children)!==null&&n!==void 0?n:[];return c&&!u&&f.length?l=f.map(function(){return null}):c||(f=[]),Qe(o,{cspNonce:s,ref:Cr(this,"controlBox"),className:pt("control-box")},l.map(function(h,d){var p,v,g=(v=(p=i.individualGroupableProps)===null||p===void 0?void 0:p.call(i,h,d))!==null&&v!==void 0?v:{};return Qe(Zn,R({key:"moveable"+d,ref:qd(r,"moveables",d)},i,g,{target:h,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[d]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0),qn(!0),this.moveables.forEach(function(s){s.updateRect(r,n,i)}),qn()},t.prototype.getRect=function(){return R(R({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.request=function(r,n,i){n===void 0&&(n={});var s=this.moveables.map(function(l){return l.request(r,R(R({},n),{isInstant:!1}),!1)}),o=i||n.isInstant,a={request:function(l){return s.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return s.forEach(function(l){return l.requestEnd()}),this}};return o?a.request(n).requestEnd():a},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=n,s=Te(this.moveables,function(o){var a=o.getTargets()[0],l=o.getControlBoxElement(),u=o.getDragElement();return!a||!u?!1:u===i||u.contains(i)||u!==a&&a===i||a.contains(i)||l===i||l.contains(i)});return s&&s.dragStart(r,n),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return Q([],A(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t}(Zn);function jv(e,t){var r=[];return e.forEach(function(n){if(n){if(Me(n)){t[n]&&r.push.apply(r,Q([],A(t[n]),!1));return}Jt(n)?r.push.apply(r,Q([],A(jv(n,t)),!1)):r.push(n)}}),r}function $v(e,t){var r=[];return e.forEach(function(n){if(n){if(Me(n)){t[n]&&r.push.apply(r,Q([],A(t[n]),!1));return}Jt(n)?r.push($v(n,t)):r.push(n)}}),r}function Xv(e,t){return e.length!==t.length||e.some(function(r,n){var i=t[n];return!r&&!i?!1:r!=i?Jt(r)&&Jt(i)?Xv(r,i):!0:!1})}var WC=function(e){cs(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new Pp,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return t.makeStyled=function(){var r={},n=this.getTotalAbles();n.forEach(function(s){var o=s.css;o&&o.forEach(function(a){r[a]=!0})});var i=Er(r).join(`
`);this.defaultStyled=Bp("div",Ly(qu,Eb+i))},t.getTotalAbles=function(){return Q([Bv,vc,Hv,Av],A(this.defaultAbles),!1)},t.prototype.render=function(){var r,n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,s=i.ables,o=i.props,a=hb(i,["ables","props"]),l=A(this._updateRefs(!0),2),u=l[0],c=l[1],f=jv(u,c),h=f.length>1,d=n.getTotalAbles(),p=Q(Q([],A(d),!1),A(s||[]),!1),v=R(R(R({},a),o||{}),{ables:p,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=f;var g=null,m=this.moveable,b=a.persistData;if(b!=null&&b.children&&(h=!0),a.individualGroupable)return Qe(GC,R({key:"individual-group",ref:Cr(this,"moveable")},v,{target:null,targets:f}));if(h){var C=$v(u,c);if(m&&!m.props.groupable&&!m.props.individualGroupable){var S=m.props.target;S&&f.indexOf(S)>-1&&(g=R({},m.state))}return Qe(NC,R({key:"group",ref:Cr(this,"moveable")},v,(r=a.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:f,targetGroups:C,firstRenderState:g}))}else{var _=f[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var y=m.moveables||[],w=Te(y,function(x){return x.props.target===_});w&&(g=R({},w.state))}return Qe(Zn,R({key:"single",ref:Cr(this,"moveable")},v,{target:_,firstRenderState:g}))}},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var r,n;return(n=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&n!==void 0?n:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var r=this,n;return this._onChangeTargets=function(){r._onChangeTargets=null,n()},new Promise(function(i){n=i})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(r){var n=this.refTargets,i=cc(this.props.target||this.props.targets),s=typeof document<"u",o=Xv(n,i),a=this.selectorMap,l={};return this.refTargets.forEach(function u(c){if(Me(c)){var f=a[c];f?l[c]=a[c]:s&&(o=!0,l[c]=[].slice.call(document.querySelectorAll(c)))}else Jt(c)&&c.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=l,[i,l,!r&&o]},t.prototype._checkChangeTargets=function(){var r,n,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var s=this._differ.update(this._elementTargets),o=s.added,a=s.removed,l=o.length||a.length;l&&((n=(r=this.props).onChangeTargets)===null||n===void 0||n.call(r,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=A(this._updateRefs(),3),c=u[0],f=u[1],h=u[2];this.refTargets=c,this.selectorMap=f,h&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,db([Fy(Np)],t.prototype,"moveable",void 0),t}(fp),HC=function(e){cs(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultAbles=gc,t}(WC),tu=function(e,t){return tu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},tu(e,t)};function mc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tu(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ki=function(){return Ki=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ki.apply(this,arguments)};function VC(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}var jC=function(e){mc(t,e);function t(n){var i=e.call(this,n)||this;return i.state={},i.state=i.props,i}var r=t.prototype;return r.render=function(){return Qe(HC,Ki({ref:Cr(this,"moveable")},this.state))},t}(Wu),To=FC,Uv=Np,Yv=LC,$C=function(e){mc(t,e);function t(n,i){i===void 0&&(i={});var s=e.call(this)||this;s.containerProvider=null,s.selfElement=null,s._warp=!1;var o=Ki({},i),a={};Yv.forEach(function(c){a[Uy("on ".concat(c))]=function(f){return s.trigger(c,f)}});var l;i.warpSelf?(delete i.warpSelf,s._warp=!0,l=n):(l=ni(n).createElement("div"),n.appendChild(l)),s.containerProvider=Nf(Qe(jC,Ki({ref:Cr(s,"innerMoveable")},o,a)),l),s.selfElement=l;var u=o.target;return Jt(u)&&u.length>1&&s.updateRect(),s}var r=t.prototype;return r.setState=function(n,i){this.innerMoveable.setState(n,i)},r.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},r.dragStart=function(n,i){i===void 0&&(i=n.target);var s=this.innerMoveable;s.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n,i)},r.destroy=function(){var n,i=this.selfElement;Nf(null,i,this.containerProvider),this._warp||(n=i==null?void 0:i.parentElement)===null||n===void 0||n.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},t=VC([Df(Uv,function(n,i){n[i]||(n[i]=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var a=this.getMoveable();if(!(!a||!a[i]))return a[i].apply(a,s)})}),Df(To,function(n,i){Object.defineProperty(n,i,{get:function(){return this.getMoveable().props[i]},set:function(s){var o;this.setState((o={},o[i]=s,o))},enumerable:!0,configurable:!0})})],t),t}(ya),XC=function(e){mc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}($C);const qv={};Uv.forEach(e=>{qv[e]=function(...t){return this.$_moveable[e](...t)}});const Kv={};To.forEach(e=>{Kv[e]=function(t){this.$_moveable[e]=t}});const UC=L0({name:"moveable",methods:qv,props:To,watch:Kv,mounted(){const e={},t=this.$props;To.forEach(s=>{const o=t[s];ns(o)||(e[s]=t[s])});const n=this.$refs.moveableElement,i=new XC(n,{...e,warpSelf:!0});Yv.forEach(s=>{i.on(s,o=>{this.$emit(s,{...o})})}),this.$_moveable=i},beforeUnmount(){this.$_moveable.destroy()}}),YC=UC,qC=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},KC={ref:"moveableElement"};function JC(e,t,r,n,i,s){return Dt(),At("div",KC,null,512)}const ZC=qC(YC,[["render",JC]]),wh="/StickerEditor/assets/out11-DOU5pnUw.jpg",Ta=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},QC=e=>(la("data-v-b5fb32d5"),e=e(),ua(),e),tS={class:"flex flex-col"},eS={class:"bg-Surface w-[52vw] h-auto flex items-center justify-center rounded-xl p-10 relative"},rS={class:"relative"},nS=["src"],iS=["data-id","onMousedown"],sS=["src"],oS=["onClick"],aS={class:"mt-5 flex items-center justify-center gap-5"},lS=QC(()=>it("label",{for:"file-upload",class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh] content-center text-center hover:cursor-pointer"}," Import ",-1)),uS=["href"],cS=1,fS=0,hS={__name:"Editor",setup(e,{expose:t}){let r=jt(null),n=jt(null),i=null;const s=fr("selectedImage"),o=fr("savedImages"),a=fr("images"),l=jt([]),u=jt(null),c=Gd(()=>l.value.length>0),f=async()=>{try{const y=await C();r.value.src=y,n.value.href=y,m()}catch(y){console.error("Merge failed",y)}},h=y=>{const w=r.value.getBoundingClientRect(),k={id:Date.now(),src:y,style:{position:"absolute",leftPercent:50,topPercent:50,widthPercent:150/w.width*100,heightPercent:150/w.height*100,transform:"translate(-50%, -50%) rotate(0deg) scale(1, 1)"}};l.value.push(k),dd(()=>{u.value=k.id})},d=({target:y,clientX:w,clientY:x})=>{const E=l.value.find(k=>k.id===parseInt(y.dataset.id));if(E&&r.value){const k=r.value.getBoundingClientRect(),B=y.getBoundingClientRect();let T=w-k.left,P=x-k.top;T=Math.max(B.width/2,Math.min(T,k.width-B.width/2)),P=Math.max(B.height/2,Math.min(P,k.height-B.height/2)),E.style.leftPercent=T/k.width*100,E.style.topPercent=P/k.height*100}},p=({target:y,width:w,height:x})=>{const E=l.value.find(k=>k.id===parseInt(y.dataset.id));if(E&&r.value){const k=r.value.getBoundingClientRect(),B=w/k.width*100,T=x/k.height*100;E.style.widthPercent=B,E.style.heightPercent=T}},v=y=>{y.target.style.transform=y.drag.transform;const w=l.value.find(x=>x.id===parseInt(y.target.dataset.id));w&&(w.style.transform=y.drag.transform)},g=y=>{l.value=l.value.filter(w=>w.id!==y),u.value===y&&(u.value=null)},m=()=>{l.value=[],u.value=null},b=y=>{u.value=y},C=()=>new Promise((y,w)=>{const x=document.createElement("canvas"),E=x.getContext("2d"),k=new Image;k.onload=()=>{x.width=k.width,x.height=k.height,E.drawImage(k,0,0),console.log("Canvas size:",{width:x.width,height:x.height}),console.log("Original image size:",{width:k.width,height:k.height});const B=l.value.map(T=>new Promise(P=>{const O=new Image;O.onload=()=>P(O),O.onerror=()=>P(null),O.src=T.src}));Promise.all(B).then(T=>{T.forEach((P,O)=>{if(P){const L=l.value[O],W=L.style.leftPercent,H=L.style.topPercent,z=L.style.widthPercent,Y=L.style.heightPercent;console.log(`Sticker ${O+1} size before merge:`,{widthPercent:z,heightPercent:Y});const J=W/100*x.width,G=H/100*x.height,tt=z/100*x.width,ot=Y/100*x.height;let et=0,st=1,K=1;const at=L.style.transform.match(/rotate\(([-\d.]+)deg\) scale\(([-\d.]+),\s*([-\d.]+)\)/);at&&(et=parseFloat(at[1]),st=parseFloat(at[2]),K=parseFloat(at[3])),console.log(`Sticker ${O+1} scale factors:`,{scaleX:st,scaleY:K}),E.save(),E.translate(J,G),E.rotate(et*Math.PI/180);const ft=tt*st,mt=ot*K;console.log(`Sticker ${O+1} size after merge:`,{finalWidth:ft,finalHeight:mt}),E.drawImage(P,-ft/2,-mt/2,ft,mt),E.restore()}}),y(x.toDataURL("image/png"))})},k.onerror=w,k.src=r.value.src}),S=async()=>{try{const y=await C();m();const w=new Oy(r.value);w.availableMarkerTypes=w.ALL_MARKER_TYPES,w.uiStyleSettings.redoButtonVisible=!0,w.uiStyleSettings.zoomButtonVisible=!0,w.uiStyleSettings.zoomOutButtonVisible=!0,w.uiStyleSettings.clearButtonVisible=!0,w.settings.displayMode="popup",w.settings.defaultColor=["#000000"],w.settings.defaultFontFamilies=["Poetsen One","Indie Flower","Dela Gothic One","DynaPuff","Pixelify Sans","Gluten","Teko"],w.addRenderEventListener(x=>{o.value.push(x),r.value.src=x,n.value.href=x}),r.value.src=y,n.value.href=y,w.show()}catch(y){console.error("Merge failed",y)}},_=y=>{const w=y.target.files[0],x=new FileReader;x.onload=()=>{i=x.result,r.value.src=i,n.value.href=i,a.value.push({src:i,alt:w.name}),emit("newImage",i)},w&&x.readAsDataURL(w)};return ku(()=>{const y=document.createElement("canvas"),w=y.getContext("2d"),x=new Image;x.src=wh,x.onload=()=>{y.width=x.width,y.height=x.height,w.drawImage(x,0,0),i=y.toDataURL("image/png"),n.value.href=i}}),ki(l,y=>{console.log(`Total stickers on canvas: ${y.length}`)},{deep:!0}),ki(s,y=>{y&&(r.value.src=y,n.value.href=y)}),t({addSticker:h}),(y,w)=>(Dt(),At("div",tS,[it("div",eS,[it("div",rS,[it("img",{class:"w-auto max-w-[48vw] h-auto min-h-[60vh] max-h-[75vh] object-fill rounded-xl",ref_key:"imgRef",ref:r,src:oe(s)||oe(wh),alt:"Test img"},null,8,nS),(Dt(!0),At(be,null,ho(l.value,x=>(Dt(),At("div",{key:x.id,style:na({position:"absolute",left:`${x.style.leftPercent}%`,top:`${x.style.topPercent}%`,width:`${x.style.widthPercent}%`,height:`${x.style.heightPercent}%`,transform:x.style.transform}),"data-id":x.id,class:"sticker",onMousedown:E=>b(x.id)},[it("img",{src:x.src,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,sS),it("button",{onClick:E=>g(x.id),class:"delete-btn"}," X ",8,oS)],44,iS))),128)),u.value?(Dt(),Ld(oe(ZC),{key:0,class:"moveable",target:`.sticker[data-id='${u.value}']`,draggable:!0,rotatable:!0,resizable:!0,origin:!1,keepRatio:!0,throttleDrag:cS,throttleResize:fS,renderDirections:["nw","ne","sw","se"],rotationPosition:"top",onDrag:d,onResize:p,onRotate:v},null,8,["target"])):hr("",!0)])]),it("div",aS,[c.value?(Dt(),At("button",{key:0,class:"bg-Secondary",onClick:f},"Confirm")):hr("",!0),c.value?(Dt(),At("button",{key:1,class:"bg-Secondary",onClick:m},"Cancel")):hr("",!0),lS,it("input",{id:"file-upload",type:"file",onChange:_,accept:"image/*",class:"hidden"},null,32),it("button",{class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh]",onClick:S}," Edit "),it("a",{class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh] flex items-center justify-center",ref_key:"downloadButton",ref:n,href:oe(i),download:"image.png"}," Download ",8,uS)])]))}},dS=Ta(hS,[["__scopeId","data-v-b5fb32d5"]]),Jv=e=>(la("data-v-0181cb39"),e=e(),ua(),e),pS={class:"relative flex"},vS={class:"whitespace-nowrap overflow-hidden"},gS=Jv(()=>it("label",null,"STICKER",-1)),mS={class:"bg-transparent mt-3 max-h-[95vh] w-auto overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},yS=["src","alt","onClick"],bS=Jv(()=>it("svg",{class:"icon-svg",width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[it("path",{d:"M14 8L10 12L14 16",stroke:"#200E32","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),xS=[bS],CS={__name:"Sticker",props:{showCloseButton:{type:Boolean,default:!0}},emits:["close"],setup(e,{emit:t}){let r=jt([{src:oy,alt:"add on 1"},{src:ay,alt:"add on 2"},{src:xf,alt:"add on 3"},{src:Cf,alt:"add on 4"},{src:Sf,alt:"add on 5"},{src:wf,alt:"add on 6"},{src:_f,alt:"add on 7"},{src:xf,alt:"add on 3"},{src:Cf,alt:"add on 4"},{src:Sf,alt:"add on 5"},{src:wf,alt:"add on 6"},{src:_f,alt:"add on 7"}]);const n=fr("handleStickerSelected"),i=u=>{n(u)},s=e,o=t,a=jt(!1);function l(){a.value=!0,setTimeout(()=>{o("close")},300)}return(u,c)=>(Dt(),At("div",pS,[it("div",{class:$t(["transition-all duration-300 ease-in-out","mx-auto",a.value?"w-0":"w-[20vw]",s.showCloseButton?"bg-Secondary h-screen":"bg-Background my-4 rounded-xl shadow-[0_-1px_40px_-15px] shadow-slate-800/50 h-[95vh]"])},[it("div",vS,[gS,it("div",mS,[(Dt(!0),At(be,null,ho(oe(r),(f,h)=>(Dt(),At("div",{key:h,class:"object-fill flex justify-center items-center"},[it("img",{class:"rounded-xl max-w-[8vw] cursor-pointer hover:opacity-60 transition-opacity duration-200",src:f.src,alt:f.alt,onClick:d=>i(f.src)},null,8,yS)]))),128))])])],2),s.showCloseButton?(Dt(),At("div",{key:0,class:$t(["absolute top-4 transition-all duration-300 ease-in-out",a.value?"right-[calc(100%-3vw)]":"right-0"])},[it("button",{class:"cursor-pointer p-1 bg-Background rounded-l-xl hover:bg-Main",onClick:l},xS)],2)):hr("",!0)]))}},SS=Ta(CS,[["__scopeId","data-v-0181cb39"]]),Zv=e=>(la("data-v-e9cc5d8a"),e=e(),ua(),e),wS={class:"relative flex"},_S=Zv(()=>it("div",{class:"whitespace-nowrap overflow-hidden"},[it("label",{for:"name"},"Image")],-1)),ES=[_S],kS=Zv(()=>it("svg",{class:"icon-svg",width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[it("path",{d:"M14 8L10 12L14 16",stroke:"#200E32","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),MS=[kS],TS={__name:"Image",props:{showCloseButton:{type:Boolean,default:!0}},emits:["close"],setup(e,{emit:t}){const r=e,n=t,i=jt(!1);function s(){i.value=!0,setTimeout(()=>{n("close")},300)}return(o,a)=>(Dt(),At("div",wS,[it("div",{class:$t(["transition-all duration-300 ease-in-out","mx-auto",i.value?"w-0":"w-[20vw]",r.showCloseButton?"bg-Secondary h-screen":"bg-Background my-4 rounded-xl shadow-[0_-1px_40px_-15px] shadow-slate-800/50 h-[95vh]"])},ES,2),r.showCloseButton?(Dt(),At("div",{key:0,class:$t(["absolute top-4 transition-all duration-300 ease-in-out",i.value?"right-[calc(100%-3vw)]":"right-0"])},[it("button",{class:"cursor-pointer p-1 bg-Background rounded-l-xl hover:bg-Main",onClick:s},MS)],2)):hr("",!0)]))}},PS=Ta(TS,[["__scopeId","data-v-e9cc5d8a"]]),Qv=e=>(la("data-v-be7a67c1"),e=e(),ua(),e),DS={class:"relative flex"},RS=Qv(()=>it("div",{class:"whitespace-nowrap overflow-hidden"},[it("label",{for:"name"},"Saved")],-1)),AS=[RS],BS=Qv(()=>it("svg",{class:"icon-svg",width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[it("path",{d:"M14 8L10 12L14 16",stroke:"#200E32","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),OS=[BS],IS={__name:"Saved",props:{showCloseButton:{type:Boolean,default:!0}},emits:["close"],setup(e,{emit:t}){const r=e,n=t,i=jt(!1);function s(){i.value=!0,setTimeout(()=>{n("close")},300)}return(o,a)=>(Dt(),At("div",DS,[it("div",{class:$t(["transition-all duration-300 ease-in-out","mx-auto",i.value?"w-0":"w-[20vw]",r.showCloseButton?"bg-Secondary h-screen":"bg-Background my-4 rounded-xl shadow-[0_-1px_40px_-15px] shadow-slate-800/50 h-[95vh]"])},AS,2),r.showCloseButton?(Dt(),At("div",{key:0,class:$t(["absolute top-4 transition-all duration-300 ease-in-out",i.value?"right-[calc(100%-3vw)]":"right-0"])},[it("button",{class:"cursor-pointer p-1 bg-Background rounded-l-xl hover:bg-Main",onClick:s},OS)],2)):hr("",!0)]))}},LS=Ta(IS,[["__scopeId","data-v-be7a67c1"]]),FS={class:"w-full h-screen flex-col justify-center items-center pt-10 space-y-1"},zS={class:"text-center flex flex-col justify-center items-center"},NS=vm('<svg width="2vw" height="4vh" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 16C9.85038 16.6303 10.8846 17 12 17C13.1154 17 14.1496 16.6303 15 16" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path><ellipse cx="15" cy="10.5" rx="1" ry="1.5" fill="#1C274C"></ellipse><ellipse cx="9" cy="10.5" rx="1" ry="1.5" fill="#1C274C"></ellipse><path d="M15 22H12C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8M15 22C18.866 22 22 18.866 22 15M15 22C15 20.1387 15 19.2081 15.2447 18.4549C15.7393 16.9327 16.9327 15.7393 18.4549 15.2447C19.2081 15 20.1387 15 22 15M22 12V15" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path></svg>',1),GS=[NS],WS={class:"text-center flex flex-col justify-center items-center"},HS=it("svg",{width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[it("circle",{cx:"16",cy:"8",r:"2",stroke:"#1C274C","stroke-width":"1.5"}),it("path",{d:"M5 13.307L5.81051 12.5542C6.73658 11.6941 8.18321 11.7424 9.04988 12.6623L11.6974 15.4727C12.2356 16.0439 13.1166 16.1209 13.7457 15.6516C14.6522 14.9753 15.9144 15.0522 16.7322 15.8334L19 18",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),it("path",{d:"M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})],-1),VS=[HS],jS={class:"text-center flex flex-col justify-center items-center"},$S=it("svg",{width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[it("path",{d:"M9.5 14.4L10.9286 16L14.5 12",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),it("path",{d:"M2 11.9997C2 7.28562 2 4.9286 3.46447 3.46413C4.70529 2.22331 6.58687 2.03382 10 2.00488M22 11.9997C22 7.28562 22 4.9286 20.5355 3.46413C19.2947 2.22331 17.4131 2.03382 14 2.00488",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),it("path",{d:"M10 22C7.19974 22 5.79961 22 4.73005 21.455C3.78924 20.9757 3.02433 20.2108 2.54497 19.27C2 18.2004 2 16.8003 2 14C2 11.1997 2 9.79961 2.54497 8.73005C3.02433 7.78924 3.78924 7.02433 4.73005 6.54497C5.79961 6 7.19974 6 10 6H14C16.8003 6 18.2004 6 19.27 6.54497C20.2108 7.02433 20.9757 7.78924 21.455 8.73005C22 9.79961 22 11.1997 22 14C22 16.8003 22 18.2004 21.455 19.27C20.9757 20.2108 20.2108 20.9757 19.27 21.455C18.2004 22 16.8003 22 14 22",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})],-1),XS=[$S],US={class:"text-center flex flex-col justify-center items-center"},YS=it("svg",{width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[it("path",{d:"M12 17V11",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),it("circle",{cx:"1",cy:"1",r:"1",transform:"matrix(1 0 0 -1 11 9)",fill:"#1C274C"}),it("path",{d:"M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})],-1),qS=[YS],KS={key:0,class:"absolute left-[5vw] top-0"},JS={key:0,class:"absolute left-[5vw] top-0"},ZS={key:0,class:"absolute left-[5vw] top-0"},QS={__name:"AsideNav",setup(e){const t=jt(!1),r=jt(!1),n=jt(!1),i=jt(null),s=jt("bg-Background");function o(f){f==="sticker"?(t.value=!t.value,r.value=!1,n.value=!1):f==="image"?(t.value=!1,r.value=!r.value,n.value=!1):f==="saved"&&(t.value=!1,r.value=!1,n.value=!n.value),c()}function a(f){!t.value&&!r.value&&!n.value&&(i.value=f)}function l(){i.value=null}function u(f){f==="sticker"?t.value=!1:f==="image"?r.value=!1:f==="saved"&&(n.value=!1),c()}function c(){s.value=(t.value||r.value||n.value,"bg-Background")}return(f,h)=>(Dt(),At("div",{class:$t([s.value,"h-screen w-[5vw] flex flex-row fixed"])},[it("ul",FS,[it("li",zS,[it("div",{class:$t([t.value?"bg-Secondary":"bg-transparent","group flex flex-col justify-center items-center pt-2 pb-1 cursor-pointer relative w-full transition-all duration-300 ease-in-out"]),onClick:h[0]||(h[0]=d=>o("sticker")),onMouseenter:h[1]||(h[1]=d=>a("sticker")),onMouseleave:l},[it("button",{class:$t(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",i.value==="sticker"&&!t.value?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent",t.value?"bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":""])},GS,2),it("span",{class:$t(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":i.value==="sticker"||t.value,"opacity-0":i.value!=="sticker"&&!t.value}])}," Sticker ",2)],34)]),it("li",WS,[it("div",{class:$t([r.value?"bg-Secondary":"bg-transparent","group flex flex-col justify-center items-center pt-2 pb-1 cursor-pointer relative w-full transition-all duration-300 ease-in-out"]),onClick:h[2]||(h[2]=d=>o("image")),onMouseenter:h[3]||(h[3]=d=>a("image")),onMouseleave:l},[it("button",{class:$t(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",i.value==="image"&&!r.value?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent",r.value?"bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":""])},VS,2),it("span",{class:$t(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":i.value==="image"||r.value,"opacity-0":i.value!=="image"&&!r.value}])}," Image ",2)],34)]),it("li",jS,[it("div",{class:$t([n.value?"bg-Secondary":"bg-transparent","group flex flex-col justify-center items-center pt-2 pb-1 cursor-pointer relative w-full transition-all duration-300 ease-in-out"]),onClick:h[4]||(h[4]=d=>o("saved")),onMouseenter:h[5]||(h[5]=d=>a("saved")),onMouseleave:l},[it("button",{class:$t(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",i.value==="saved"&&!n.value?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent",n.value?"bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":""])},XS,2),it("span",{class:$t(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":i.value==="saved"||n.value,"opacity-0":i.value!=="saved"&&!n.value}])}," Saved ",2)],34)]),it("li",US,[it("div",{class:"group flex flex-col justify-center items-center pt-2 pb-1 cursor-pointer relative w-full",onClick:h[6]||(h[6]=d=>o("info")),onMouseenter:h[7]||(h[7]=d=>a("info")),onMouseleave:l},[it("button",{class:$t(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",i.value==="info"?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent hover:bg-Tertiary hover:rounded-xl"])},qS,2),it("span",{class:$t(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":i.value==="info","opacity-0":i.value!=="info"}])}," Info ",2)],32)])]),Ft(Di,{name:"slide-fade"},{default:Vs(()=>[t.value||i.value==="sticker"&&!t.value&&!r.value&&!n.value?(Dt(),At("div",KS,[Ft(SS,{showCloseButton:t.value,onClose:h[8]||(h[8]=()=>u("sticker"))},null,8,["showCloseButton"])])):hr("",!0)]),_:1}),Ft(Di,{name:"slide-fade"},{default:Vs(()=>[r.value||i.value==="image"&&!t.value&&!r.value&&!n.value?(Dt(),At("div",JS,[Ft(PS,{showCloseButton:r.value,onClose:h[9]||(h[9]=()=>u("image"))},null,8,["showCloseButton"])])):hr("",!0)]),_:1}),Ft(Di,{name:"slide-fade"},{default:Vs(()=>[n.value||i.value==="saved"&&!t.value&&!r.value&&!n.value?(Dt(),At("div",ZS,[Ft(LS,{showCloseButton:n.value,onClose:h[10]||(h[10]=()=>u("saved"))},null,8,["showCloseButton"])])):hr("",!0)]),_:1})],2))}},tw="/StickerEditor/assets/add21-BGbuhfVT.jpg",ew="/StickerEditor/assets/out3-DDp8jPL9.png",rw="/StickerEditor/assets/out4-CcsAHtZO.png",nw="/StickerEditor/assets/out5-f7Ma6H0z.png",iw="/StickerEditor/assets/out6-DvOdD5OY.png",sw="/StickerEditor/assets/out7-Bh2lHIfN.png",ow="/StickerEditor/assets/out8-CHEbLBCF.png",aw="/StickerEditor/assets/out9-YMO4_2Fq.png",lw="/StickerEditor/assets/out10-BOWi-BKK.png",uw="/StickerEditor/assets/out11-DOU5pnUw.jpg",cw={class:"bg-Background h-screen"},fw={class:""},hw={class:"row-span-1 flex items-center justify-center min-h-screen absolute left-1/4 right-1/4"},dw={class:"row-span-1 h-screen flex justify-end absolute right-0"},pw={__name:"ImageEditor",setup(e){let t=jt([{src:tw,alt:"add on 1"},{src:ew,alt:"add on 2"},{src:nw,alt:"add on 3"},{src:rw,alt:"add on 4"},{src:iw,alt:"add on 5"},{src:sw,alt:"add on 6"},{src:ow,alt:"add on 7"},{src:aw,alt:"add on 8"},{src:lw,alt:"add on 9"},{src:uw,alt:"add on 10"}]),r=jt(!1),n=jt(null);const i=jt([]),s=jt(null),o=l=>{t.value.unshift({src:l,alt:"New Image"})};return wn("handleStickerSelected",l=>{s.value&&s.value.addSticker(l)}),wn("images",t),wn("selectedImage",n),wn("typeButton",r),wn("savedImages",i),(l,u)=>(Dt(),At("section",cw,[it("aside",fw,[Ft(QS)]),it("main",hw,[Ft(dS,{ref_key:"editorRef",ref:s,"selected-image":oe(n),onNewImage:o},null,8,["selected-image"])]),it("aside",dw,[Ft(by,{onSelectImage:u[0]||(u[0]=c=>he(n)?n.value=c:n=c)})])]))}},kn="4.32.2";let _h=!1,Fi,tg,eg,eu,rg,ng,ig,sg,og;function vw(e,t={auto:!1}){if(_h)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(Fi)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${Fi}'\``);_h=t.auto,Fi=e.kind,tg=e.fetch,eg=e.FormData,eu=e.File,rg=e.ReadableStream,ng=e.getMultipartRequestOptions,ig=e.getDefaultAgent,sg=e.fileFromPath,og=e.isFsReadStream}class gw{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function mw({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,n,i,s;try{r=fetch,n=Request,i=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:r,Request:n,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(o,a)=>({...a,body:new gw(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}Fi||vw(mw(),{auto:!0});class Et extends Error{}class ae extends Et{constructor(t,r,n,i){super(`${ae.makeMessage(t,r,n)}`),this.status=t,this.headers=i;const s=r;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(t,r,n){const i=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,r,n,i){if(!t)return new Pa({cause:nu(r)});const s=r==null?void 0:r.error;return t===400?new ag(t,s,n,i):t===401?new lg(t,s,n,i):t===403?new ug(t,s,n,i):t===404?new cg(t,s,n,i):t===409?new fg(t,s,n,i):t===422?new hg(t,s,n,i):t===429?new dg(t,s,n,i):t>=500?new pg(t,s,n,i):new ae(t,s,n,i)}}class Ae extends ae{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class Pa extends ae{constructor({message:t,cause:r}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}}class yc extends Pa{constructor({message:t}={}){super({message:t??"Request timed out."})}}class ag extends ae{constructor(){super(...arguments),this.status=400}}class lg extends ae{constructor(){super(...arguments),this.status=401}}class ug extends ae{constructor(){super(...arguments),this.status=403}}class cg extends ae{constructor(){super(...arguments),this.status=404}}class fg extends ae{constructor(){super(...arguments),this.status=409}}class hg extends ae{constructor(){super(...arguments),this.status=422}}class dg extends ae{constructor(){super(...arguments),this.status=429}}class pg extends ae{}class cr{constructor(t,r){this.iterator=t,this.controller=r}static fromSSEResponse(t,r){let n=!1;async function*i(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let s=!1;try{for await(const o of yw(t,r))if(!s){if(o.data.startsWith("[DONE]")){s=!0;continue}if(o.event===null){let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(a&&a.error)throw new ae(void 0,a.error,void 0,void 0);yield a}else{let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(o.event=="error")throw new ae(void 0,a.error,a.message,void 0);yield{event:o.event,data:a}}}s=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{s||r.abort()}}return new cr(i,r)}static fromReadableStream(t,r){let n=!1;async function*i(){const o=new gn,a=vg(t);for await(const l of a)for(const u of o.decode(l))yield u;for(const l of o.flush())yield l}async function*s(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const a of i())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{o||r.abort()}}return new cr(s,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],r=[],n=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=n.next();t.push(o),r.push(o)}return s.shift()}});return[new cr(()=>i(t),this.controller),new cr(()=>i(r),this.controller)]}toReadableStream(){const t=this;let r;const n=new TextEncoder;return new rg({async start(){r=t[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:o}=await r.next();if(o)return i.close();const a=n.encode(JSON.stringify(s)+`
`);i.enqueue(a)}catch(s){i.error(s)}},async cancel(){var i;await((i=r.return)==null?void 0:i.call(r))}})}}async function*yw(e,t){if(!e.body)throw t.abort(),new Et("Attempted to iterate over a response with no body");const r=new Cw,n=new gn,i=vg(e.body);for await(const s of bw(i))for(const o of n.decode(s)){const a=r.decode(o);a&&(yield a)}for(const s of n.flush()){const o=r.decode(s);o&&(yield o)}}async function*bw(e){let t=new Uint8Array;for await(const r of e){if(r==null)continue;const n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r;let i=new Uint8Array(t.length+n.length);i.set(t),i.set(n,t.length),t=i;let s;for(;(s=xw(t))!==-1;)yield t.slice(0,s),t=t.slice(s)}t.length>0&&(yield t)}function xw(e){for(let n=0;n<e.length-2;n++){if(e[n]===10&&e[n+1]===10||e[n]===13&&e[n+1]===13)return n+2;if(e[n]===13&&e[n+1]===10&&n+3<e.length&&e[n+2]===13&&e[n+3]===10)return n+4}return-1}class Cw{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[r,n,i]=Sw(t,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}}class gn{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let r=this.decodeText(t);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];const n=gn.NEWLINE_CHARS.has(r[r.length-1]||"");let i=r.split(gn.NEWLINE_REGEXP);return n&&i.pop(),i.length===1&&!n?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),n||(this.buffer=[i.pop()||""]),i)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new Et(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new Et(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new Et("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}gn.NEWLINE_CHARS=new Set([`
`,"\r"]);gn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Sw(e,t){const r=e.indexOf(t);return r!==-1?[e.substring(0,r),t,e.substring(r+t.length)]:[e,"",""]}function vg(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const r=await t.read();return r!=null&&r.done&&t.releaseLock(),r}catch(r){throw t.releaseLock(),r}},async return(){const r=t.cancel();return t.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const gg=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",mg=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&yg(e),yg=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",ww=e=>mg(e)||gg(e)||og(e);async function bg(e,t,r){var i;if(e=await e,r??(r=mg(e)?{lastModified:e.lastModified,type:e.type}:{}),gg(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new eu([s],t,r)}const n=await _w(e);if(t||(t=kw(e)??"unknown_file"),!r.type){const s=(i=n[0])==null?void 0:i.type;typeof s=="string"&&(r={...r,type:s})}return new eu(n,t,r)}async function _w(e){var r;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(yg(e))t.push(await e.arrayBuffer());else if(Mw(e))for await(const n of e)t.push(n);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(r=e==null?void 0:e.constructor)==null?void 0:r.name}; props: ${Ew(e)}`);return t}function Ew(e){return`[${Object.getOwnPropertyNames(e).map(r=>`"${r}"`).join(", ")}]`}function kw(e){var t;return ol(e.name)||ol(e.filename)||((t=ol(e.path))==null?void 0:t.split(/[\\/]/).pop())}const ol=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},Mw=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",Eh=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",Ji=async e=>{const t=await Tw(e.body);return ng(t,e)},Tw=async e=>{const t=new eg;return await Promise.all(Object.entries(e||{}).map(([r,n])=>ru(t,r,n))),t},ru=async(e,t,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")e.append(t,String(r));else if(ww(r)){const n=await bg(r);e.append(t,n)}else if(Array.isArray(r))await Promise.all(r.map(n=>ru(e,t+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,i])=>ru(e,`${t}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var Gn={},Pw=function(e,t,r,n,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r},Dw=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},zs;async function xg(e){const{response:t}=e;if(e.options.stream)return Wn("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):cr.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const r=t.headers.get("content-type");if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.includes("application/vnd.api+json"))){const s=await t.json();return Wn("response",t.status,t.url,t.headers,s),s}const i=await t.text();return Wn("response",t.status,t.url,t.headers,i),i}class Da extends Promise{constructor(t,r=xg){super(n=>{n(null)}),this.responsePromise=t,this.parseResponse=r}_thenUnwrap(t){return new Da(this.responsePromise,async r=>t(await this.parseResponse(r)))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,r){return this.parse().then(t,r)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class Rw{constructor({baseURL:t,maxRetries:r=2,timeout:n=6e5,httpAgent:i,fetch:s}){this.baseURL=t,this.maxRetries=al("maxRetries",r),this.timeout=al("timeout",n),this.httpAgent=i,this.fetch=s??tg}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Fw(),...this.authHeaders(t)}}validateHeaders(t,r){}defaultIdempotencyKey(){return`stainless-node-retry-${Ww()}`}get(t,r){return this.methodRequest("get",t,r)}post(t,r){return this.methodRequest("post",t,r)}patch(t,r){return this.methodRequest("patch",t,r)}put(t,r){return this.methodRequest("put",t,r)}delete(t,r){return this.methodRequest("delete",t,r)}methodRequest(t,r,n){return this.request(Promise.resolve(n).then(i=>({method:t,path:r,...i})))}getAPIList(t,r,n){return this.requestAPIList(r,{method:"get",path:t,...n})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}return null}buildRequest(t){var p;const{method:r,path:n,query:i,headers:s={}}=t,o=Eh(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,a=this.calculateContentLength(o),l=this.buildURL(n,i);"timeout"in t&&al("timeout",t.timeout);const u=t.timeout??this.timeout,c=t.httpAgent??this.httpAgent??ig(l),f=u+1e3;typeof((p=c==null?void 0:c.options)==null?void 0:p.timeout)=="number"&&f>(c.options.timeout??0)&&(c.options.timeout=f),this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const h=this.buildHeaders({options:t,headers:s,contentLength:a});return{req:{method:r,...o&&{body:o},headers:h,...c&&{agent:c},signal:t.signal??null},url:l,timeout:u}}buildHeaders({options:t,headers:r,contentLength:n}){const i={};n&&(i["content-length"]=n);const s=this.defaultHeaders(t);return Ph(i,s),Ph(i,r),Eh(t.body)&&Fi!=="node"&&delete i["content-type"],this.validateHeaders(i,r),i}async prepareOptions(t){}async prepareRequest(t,{url:r,options:n}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(r=>[...r])):{...t}:{}}makeStatusError(t,r,n,i){return ae.generate(t,r,n,i)}request(t,r=null){return new Da(this.makeRequest(t,r))}async makeRequest(t,r){var c,f;const n=await t;r==null&&(r=n.maxRetries??this.maxRetries),await this.prepareOptions(n);const{req:i,url:s,timeout:o}=this.buildRequest(n);if(await this.prepareRequest(i,{url:s,options:n}),Wn("request",s,n,i.headers),(c=n.signal)!=null&&c.aborted)throw new Ae;const a=new AbortController,l=await this.fetchWithTimeout(s,i,o,a).catch(nu);if(l instanceof Error){if((f=n.signal)!=null&&f.aborted)throw new Ae;if(r)return this.retryRequest(n,r);throw l.name==="AbortError"?new yc:new Pa({cause:l})}const u=Bw(l.headers);if(!l.ok){if(r&&this.shouldRetry(l)){const m=`retrying, ${r} attempts remaining`;return Wn(`response (error; ${m})`,l.status,s,u),this.retryRequest(n,r,u)}const h=await l.text().catch(m=>nu(m).message),d=zw(h),p=d?void 0:h;throw Wn(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,l.status,s,u,p),this.makeStatusError(l.status,d,p,u)}return{response:l,options:n,controller:a}}requestAPIList(t,r){const n=this.makeRequest(r,null);return new Aw(this,n,t)}buildURL(t,r){const n=Gw(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),i=this.defaultQuery();return Sg(i)||(r={...i,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(t){return Object.entries(t).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new Et(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,r,n,i){const{signal:s,...o}=r||{};s&&s.addEventListener("abort",()=>i.abort());const a=setTimeout(()=>i.abort(),n);return this.getRequestClient().fetch.call(void 0,t,{signal:i.signal,...o}).finally(()=>{clearTimeout(a)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const r=t.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,r,n){let i;const s=n==null?void 0:n["retry-after-ms"];if(s){const a=parseFloat(s);Number.isNaN(a)||(i=a)}const o=n==null?void 0:n["retry-after"];if(o&&!i){const a=parseFloat(o);Number.isNaN(a)?i=Date.parse(o)-Date.now():i=a*1e3}if(!(i&&0<=i&&i<60*1e3)){const a=t.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(r,a)}return await bc(i),this.makeRequest(t,r-1)}calculateDefaultRetryTimeoutMillis(t,r){const s=r-t,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${kn}`}}class Cg{constructor(t,r,n,i){zs.set(this,void 0),Pw(this,zs,t),this.options=i,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new Et("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in t&&typeof r.query=="object")r.query={...r.query,...t.params};else if("url"in t){const n=[...Object.entries(r.query||{}),...t.url.searchParams.entries()];for(const[i,s]of n)t.url.searchParams.set(i,s);r.query=void 0,r.path=t.url.toString()}return await Dw(this,zs,"f").requestAPIList(this.constructor,r)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(zs=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const r of t.getPaginatedItems())yield r}}class Aw extends Da{constructor(t,r,n){super(r,async i=>new n(t,i.response,await xg(i),i.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const r of t)yield r}}const Bw=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,r){const n=r.toString();return t[n.toLowerCase()]||t[n]}}),Ow={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},vr=e=>typeof e=="object"&&e!==null&&!Sg(e)&&Object.keys(e).every(t=>wg(Ow,t)),Iw=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kn,"X-Stainless-OS":Mh(Deno.build.os),"X-Stainless-Arch":kh(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kn,"X-Stainless-OS":Mh(process.platform),"X-Stainless-Arch":kh(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=Lw();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Lw(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const n=r.exec(navigator.userAgent);if(n){const i=n[1]||0,s=n[2]||0,o=n[3]||0;return{browser:t,version:`${i}.${s}.${o}`}}}return null}const kh=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Mh=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Th;const Fw=()=>Th??(Th=Iw()),zw=e=>{try{return JSON.parse(e)}catch{return}},Nw=new RegExp("^(?:[a-z]+:)?//","i"),Gw=e=>Nw.test(e),bc=e=>new Promise(t=>setTimeout(t,e)),al=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Et(`${e} must be an integer`);if(t<0)throw new Et(`${e} must be a positive integer`);return t},nu=e=>e instanceof Error?e:new Error(e),ll=e=>{var t,r,n,i;if(typeof process<"u")return((t=Gn==null?void 0:Gn[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(i=(n=(r=Deno.env)==null?void 0:r.get)==null?void 0:n.call(r,e))==null?void 0:i.trim()};function Sg(e){if(!e)return!0;for(const t in e)return!1;return!0}function wg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ph(e,t){for(const r in t){if(!wg(t,r))continue;const n=r.toLowerCase();if(!n)continue;const i=t[r];i===null?delete e[n]:i!==void 0&&(e[n]=i)}}function Wn(e,...t){typeof process<"u"&&(Gn==null?void 0:Gn.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const Ww=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),Hw=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Dh(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class xc extends Cg{constructor(t,r,n,i){super(t,r,n,i),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Mr extends Cg{constructor(t,r,n,i){super(t,r,n,i),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const r=Object.fromEntries(t.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var n;const t=this.getPaginatedItems();if(!t.length)return null;const r=(n=t[t.length-1])==null?void 0:n.id;return r?{params:{after:r}}:null}}class Wt{constructor(t){this._client=t}}let Po=class extends Wt{create(t,r){return this._client.post("/chat/completions",{body:t,...r,stream:t.stream??!1})}};Po||(Po={});let Do=class extends Wt{constructor(){super(...arguments),this.completions=new Po(this._client)}};(function(e){e.Completions=Po})(Do||(Do={}));class Ro extends Wt{create(t,r){return this._client.post("/audio/speech",{body:t,...r,__binaryResponse:!0})}}Ro||(Ro={});class Ao extends Wt{create(t,r){return this._client.post("/audio/transcriptions",Ji({body:t,...r}))}}Ao||(Ao={});class Bo extends Wt{create(t,r){return this._client.post("/audio/translations",Ji({body:t,...r}))}}Bo||(Bo={});class Oo extends Wt{constructor(){super(...arguments),this.transcriptions=new Ao(this._client),this.translations=new Bo(this._client),this.speech=new Ro(this._client)}}(function(e){e.Transcriptions=Ao,e.Translations=Bo,e.Speech=Ro})(Oo||(Oo={}));let Io=class extends Wt{create(t,r,n){return this._client.post(`/assistants/${t}/files`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(t,r,n){return this._client.get(`/assistants/${t}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,r={},n){return vr(r)?this.list(t,{},r):this._client.getAPIList(`/assistants/${t}/files`,Cc,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}del(t,r,n){return this._client.delete(`/assistants/${t}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}};class Cc extends Mr{}(function(e){e.AssistantFilesPage=Cc})(Io||(Io={}));class Lo extends Wt{constructor(){super(...arguments),this.files=new Io(this._client)}create(t,r){return this._client.post("/assistants",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(t,r){return this._client.get(`/assistants/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(t,r,n){return this._client.post(`/assistants/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t={},r){return vr(t)?this.list({},t):this._client.getAPIList("/assistants",Sc,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(t,r){return this._client.delete(`/assistants/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}class Sc extends Mr{}(function(e){e.AssistantsPage=Sc,e.Files=Io,e.AssistantFilesPage=Cc})(Lo||(Lo={}));function Rh(e){return typeof e.parse=="function"}const Hn=e=>(e==null?void 0:e.role)==="assistant",_g=e=>(e==null?void 0:e.role)==="function",Eg=e=>(e==null?void 0:e.role)==="tool";var He=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},_t=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},ue,Ks,Js,vi,gi,Zs,mi,yr,yi,Qs,to,Mn,iu,Fo,su,ou,au,lu,kg,uu;const Ah=10;class Mg{constructor(){ue.add(this),this.controller=new AbortController,Ks.set(this,void 0),Js.set(this,()=>{}),vi.set(this,()=>{}),gi.set(this,void 0),Zs.set(this,()=>{}),mi.set(this,()=>{}),yr.set(this,{}),this._chatCompletions=[],this.messages=[],yi.set(this,!1),Qs.set(this,!1),to.set(this,!1),Mn.set(this,!1),lu.set(this,t=>{if(He(this,Qs,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Ae),t instanceof Ae)return He(this,to,!0,"f"),this._emit("abort",t);if(t instanceof Et)return this._emit("error",t);if(t instanceof Error){const r=new Et(t.message);return r.cause=t,this._emit("error",r)}return this._emit("error",new Et(String(t)))}),He(this,Ks,new Promise((t,r)=>{He(this,Js,t,"f"),He(this,vi,r,"f")}),"f"),He(this,gi,new Promise((t,r)=>{He(this,Zs,t,"f"),He(this,mi,r,"f")}),"f"),_t(this,Ks,"f").catch(()=>{}),_t(this,gi,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},_t(this,lu,"f"))},0)}_addChatCompletion(t){var n;this._chatCompletions.push(t),this._emit("chatCompletion",t);const r=(n=t.choices[0])==null?void 0:n.message;return r&&this._addMessage(r),t}_addMessage(t,r=!0){if("content"in t||(t.content=null),this.messages.push(t),r){if(this._emit("message",t),(_g(t)||Eg(t))&&t.content)this._emit("functionCallResult",t.content);else if(Hn(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(Hn(t)&&t.tool_calls)for(const n of t.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}_connected(){this.ended||(_t(this,Js,"f").call(this),this._emit("connect"))}get ended(){return _t(this,yi,"f")}get errored(){return _t(this,Qs,"f")}get aborted(){return _t(this,to,"f")}abort(){this.controller.abort()}on(t,r){return(_t(this,yr,"f")[t]||(_t(this,yr,"f")[t]=[])).push({listener:r}),this}off(t,r){const n=_t(this,yr,"f")[t];if(!n)return this;const i=n.findIndex(s=>s.listener===r);return i>=0&&n.splice(i,1),this}once(t,r){return(_t(this,yr,"f")[t]||(_t(this,yr,"f")[t]=[])).push({listener:r,once:!0}),this}emitted(t){return new Promise((r,n)=>{He(this,Mn,!0,"f"),t!=="error"&&this.once("error",n),this.once(t,r)})}async done(){He(this,Mn,!0,"f"),await _t(this,gi,"f")}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new Et("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),_t(this,ue,"m",iu).call(this)}async finalMessage(){return await this.done(),_t(this,ue,"m",Fo).call(this)}async finalFunctionCall(){return await this.done(),_t(this,ue,"m",su).call(this)}async finalFunctionCallResult(){return await this.done(),_t(this,ue,"m",ou).call(this)}async totalUsage(){return await this.done(),_t(this,ue,"m",au).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(t,...r){if(_t(this,yi,"f"))return;t==="end"&&(He(this,yi,!0,"f"),_t(this,Zs,"f").call(this));const n=_t(this,yr,"f")[t];if(n&&(_t(this,yr,"f")[t]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...r))),t==="abort"){const i=r[0];!_t(this,Mn,"f")&&!(n!=null&&n.length)&&Promise.reject(i),_t(this,vi,"f").call(this,i),_t(this,mi,"f").call(this,i),this._emit("end");return}if(t==="error"){const i=r[0];!_t(this,Mn,"f")&&!(n!=null&&n.length)&&Promise.reject(i),_t(this,vi,"f").call(this,i),_t(this,mi,"f").call(this,i),this._emit("end")}}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const r=_t(this,ue,"m",Fo).call(this);r&&this._emit("finalMessage",r);const n=_t(this,ue,"m",iu).call(this);n&&this._emit("finalContent",n);const i=_t(this,ue,"m",su).call(this);i&&this._emit("finalFunctionCall",i);const s=_t(this,ue,"m",ou).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",_t(this,ue,"m",au).call(this))}async _createChatCompletion(t,r,n){const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),_t(this,ue,"m",kg).call(this,r);const s=await t.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(t,r,n){for(const i of r.messages)this._addMessage(i,!1);return await this._createChatCompletion(t,r,n)}async _runFunctions(t,r,n){var h;const i="function",{function_call:s="auto",stream:o,...a}=r,l=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:u=Ah}=n||{},c={};for(const d of r.functions)c[d.name||d.function.name]=d;const f=r.functions.map(d=>({name:d.name||d.function.name,parameters:d.parameters,description:d.description}));for(const d of r.messages)this._addMessage(d,!1);for(let d=0;d<u;++d){const v=(h=(await this._createChatCompletion(t,{...a,function_call:s,functions:f,messages:[...this.messages]},n)).choices[0])==null?void 0:h.message;if(!v)throw new Et("missing message in ChatCompletion response");if(!v.function_call)return;const{name:g,arguments:m}=v.function_call,b=c[g];if(b){if(l&&l!==g){const y=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:g,content:y});continue}}else{const y=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${f.map(w=>JSON.stringify(w.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:g,content:y});continue}let C;try{C=Rh(b)?await b.parse(m):m}catch(y){this._addMessage({role:i,name:g,content:y instanceof Error?y.message:String(y)});continue}const S=await b.function(C,this),_=_t(this,ue,"m",uu).call(this,S);if(this._addMessage({role:i,name:g,content:_}),l)return}}async _runTools(t,r,n){var h,d;const i="tool",{tool_choice:s="auto",stream:o,...a}=r,l=typeof s!="string"&&((h=s==null?void 0:s.function)==null?void 0:h.name),{maxChatCompletions:u=Ah}=n||{},c={};for(const p of r.tools)p.type==="function"&&(c[p.function.name||p.function.function.name]=p.function);const f="tools"in r?r.tools.map(p=>p.type==="function"?{type:"function",function:{name:p.function.name||p.function.function.name,parameters:p.function.parameters,description:p.function.description}}:p):void 0;for(const p of r.messages)this._addMessage(p,!1);for(let p=0;p<u;++p){const g=(d=(await this._createChatCompletion(t,{...a,tool_choice:s,tools:f,messages:[...this.messages]},n)).choices[0])==null?void 0:d.message;if(!g)throw new Et("missing message in ChatCompletion response");if(!g.tool_calls)return;for(const m of g.tool_calls){if(m.type!=="function")continue;const b=m.id,{name:C,arguments:S}=m.function,_=c[C];if(_){if(l&&l!==C){const E=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:b,content:E});continue}}else{const E=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${f.map(k=>JSON.stringify(k.function.name)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:b,content:E});continue}let y;try{y=Rh(_)?await _.parse(S):S}catch(E){const k=E instanceof Error?E.message:String(E);this._addMessage({role:i,tool_call_id:b,content:k});continue}const w=await _.function(y,this),x=_t(this,ue,"m",uu).call(this,w);if(this._addMessage({role:i,tool_call_id:b,content:x}),l)return}}}}Ks=new WeakMap,Js=new WeakMap,vi=new WeakMap,gi=new WeakMap,Zs=new WeakMap,mi=new WeakMap,yr=new WeakMap,yi=new WeakMap,Qs=new WeakMap,to=new WeakMap,Mn=new WeakMap,lu=new WeakMap,ue=new WeakSet,iu=function(){return _t(this,ue,"m",Fo).call(this).content??null},Fo=function(){let t=this.messages.length;for(;t-- >0;){const r=this.messages[t];if(Hn(r))return{...r,content:r.content??null}}throw new Et("stream ended without producing a ChatCompletionMessage with role=assistant")},su=function(){var t,r;for(let n=this.messages.length-1;n>=0;n--){const i=this.messages[n];if(Hn(i)&&(i!=null&&i.function_call))return i.function_call;if(Hn(i)&&((t=i==null?void 0:i.tool_calls)!=null&&t.length))return(r=i.tool_calls.at(-1))==null?void 0:r.function}},ou=function(){for(let t=this.messages.length-1;t>=0;t--){const r=this.messages[t];if(_g(r)&&r.content!=null||Eg(r)&&r.content!=null&&this.messages.some(n=>{var i;return n.role==="assistant"&&((i=n.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===r.tool_call_id))}))return r.content}},au=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(t.completion_tokens+=r.completion_tokens,t.prompt_tokens+=r.prompt_tokens,t.total_tokens+=r.total_tokens);return t},kg=function(t){if(t.n!=null&&t.n>1)throw new Et("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},uu=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Zi extends Mg{static runFunctions(t,r,n){const i=new Zi,s={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(t,r,s)),i}static runTools(t,r,n){const i=new Zi,s={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,r,s)),i}_addMessage(t){super._addMessage(t),Hn(t)&&t.content&&this._emit("content",t.content)}}var Ve=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},ul=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},sr,Br,cl,fl,Ns,Bh;class Qi extends Mg{constructor(){super(...arguments),sr.add(this),Br.set(this,void 0)}get currentChatCompletionSnapshot(){return Ve(this,Br,"f")}static fromReadableStream(t){const r=new Qi;return r._run(()=>r._fromReadableStream(t)),r}static createChatCompletion(t,r,n){const i=new Qi;return i._run(()=>i._runChatCompletion(t,{...r,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(t,r,n){var o;const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ve(this,sr,"m",cl).call(this);const s=await t.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const a of s)Ve(this,sr,"m",fl).call(this,a);if((o=s.controller.signal)!=null&&o.aborted)throw new Ae;return this._addChatCompletion(Ve(this,sr,"m",Ns).call(this))}async _fromReadableStream(t,r){var o;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Ve(this,sr,"m",cl).call(this),this._connected();const i=cr.fromReadableStream(t,this.controller);let s;for await(const a of i)s&&s!==a.id&&this._addChatCompletion(Ve(this,sr,"m",Ns).call(this)),Ve(this,sr,"m",fl).call(this,a),s=a.id;if((o=i.controller.signal)!=null&&o.aborted)throw new Ae;return this._addChatCompletion(Ve(this,sr,"m",Ns).call(this))}[(Br=new WeakMap,sr=new WeakSet,cl=function(){this.ended||ul(this,Br,void 0,"f")},fl=function(r){var o,a,l;if(this.ended)return;const n=Ve(this,sr,"m",Bh).call(this,r);this._emit("chunk",r,n);const i=(a=(o=r.choices[0])==null?void 0:o.delta)==null?void 0:a.content,s=(l=n.choices[0])==null?void 0:l.message;i!=null&&(s==null?void 0:s.role)==="assistant"&&(s!=null&&s.content)&&this._emit("content",i,s.content)},Ns=function(){if(this.ended)throw new Et("stream has ended, this shouldn't happen");const r=Ve(this,Br,"f");if(!r)throw new Et("request ended without sending any chunks");return ul(this,Br,void 0,"f"),Vw(r)},Bh=function(r){var n,i,s;let o=Ve(this,Br,"f");const{choices:a,...l}=r;o?Object.assign(o,l):o=ul(this,Br,{...l,choices:[]},"f");for(const{delta:u,finish_reason:c,index:f,logprobs:h=null,...d}of r.choices){let p=o.choices[f];if(p||(p=o.choices[f]={finish_reason:c,index:f,message:{},logprobs:h,...d}),h)if(!p.logprobs)p.logprobs=Object.assign({},h);else{const{content:S,..._}=h;Object.assign(p.logprobs,_),S&&((n=p.logprobs).content??(n.content=[]),p.logprobs.content.push(...S))}if(c&&(p.finish_reason=c),Object.assign(p,d),!u)continue;const{content:v,function_call:g,role:m,tool_calls:b,...C}=u;if(Object.assign(p.message,C),v&&(p.message.content=(p.message.content||"")+v),m&&(p.message.role=m),g&&(p.message.function_call?(g.name&&(p.message.function_call.name=g.name),g.arguments&&((i=p.message.function_call).arguments??(i.arguments=""),p.message.function_call.arguments+=g.arguments)):p.message.function_call=g),b){p.message.tool_calls||(p.message.tool_calls=[]);for(const{index:S,id:_,type:y,function:w,...x}of b){const E=(s=p.message.tool_calls)[S]??(s[S]={});Object.assign(E,x),_&&(E.id=_),y&&(E.type=y),w&&(E.function??(E.function={arguments:""})),w!=null&&w.name&&(E.function.name=w.name),w!=null&&w.arguments&&(E.function.arguments+=w.arguments)}}}return o},Symbol.asyncIterator)](){const t=[],r=[];let n=!1;return this.on("chunk",i=>{const s=r.shift();s?s.resolve(i):t.push(i)}),this.on("end",()=>{n=!0;for(const i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{n=!0;for(const s of r)s.reject(i);r.length=0}),this.on("error",i=>{n=!0;for(const s of r)s.reject(i);r.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,o)=>r.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new cr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Vw(e){const{id:t,choices:r,created:n,model:i,system_fingerprint:s,...o}=e;return{...o,id:t,choices:r.map(({message:a,finish_reason:l,index:u,logprobs:c,...f})=>{if(!l)throw new Et(`missing finish_reason for choice ${u}`);const{content:h=null,function_call:d,tool_calls:p,...v}=a,g=a.role;if(!g)throw new Et(`missing role for choice ${u}`);if(d){const{arguments:m,name:b}=d;if(m==null)throw new Et(`missing function_call.arguments for choice ${u}`);if(!b)throw new Et(`missing function_call.name for choice ${u}`);return{...f,message:{content:h,function_call:{arguments:m,name:b},role:g},finish_reason:l,index:u,logprobs:c}}return p?{...f,index:u,finish_reason:l,logprobs:c,message:{...v,role:g,content:h,tool_calls:p.map((m,b)=>{const{function:C,type:S,id:_,...y}=m,{arguments:w,name:x,...E}=C||{};if(_==null)throw new Et(`missing choices[${u}].tool_calls[${b}].id
${Gs(e)}`);if(S==null)throw new Et(`missing choices[${u}].tool_calls[${b}].type
${Gs(e)}`);if(x==null)throw new Et(`missing choices[${u}].tool_calls[${b}].function.name
${Gs(e)}`);if(w==null)throw new Et(`missing choices[${u}].tool_calls[${b}].function.arguments
${Gs(e)}`);return{...y,id:_,type:S,function:{...E,name:x,arguments:w}}})}}:{...f,message:{...v,content:h,role:g},finish_reason:l,index:u,logprobs:c}}),created:n,model:i,object:"chat.completion",...s?{system_fingerprint:s}:{}}}function Gs(e){return JSON.stringify(e)}class Vn extends Qi{static fromReadableStream(t){const r=new Vn;return r._run(()=>r._fromReadableStream(t)),r}static runFunctions(t,r,n){const i=new Vn,s={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(t,r,s)),i}static runTools(t,r,n){const i=new Vn,s={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,r,s)),i}}let Tg=class extends Wt{runFunctions(t,r){return t.stream?Vn.runFunctions(this._client.chat.completions,t,r):Zi.runFunctions(this._client.chat.completions,t,r)}runTools(t,r){return t.stream?Vn.runTools(this._client.chat.completions,t,r):Zi.runTools(this._client.chat.completions,t,r)}stream(t,r){return Qi.createChatCompletion(this._client.chat.completions,t,r)}};class zo extends Wt{constructor(){super(...arguments),this.completions=new Tg(this._client)}}(function(e){e.Completions=Tg})(zo||(zo={}));var je=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},Ht=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},eo,ro,bi,xi,no,Ci,br,Si,io,so,Tn,cu;class jw{constructor(){this.controller=new AbortController,eo.set(this,void 0),ro.set(this,()=>{}),bi.set(this,()=>{}),xi.set(this,void 0),no.set(this,()=>{}),Ci.set(this,()=>{}),br.set(this,{}),Si.set(this,!1),io.set(this,!1),so.set(this,!1),Tn.set(this,!1),cu.set(this,t=>{if(je(this,io,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Ae),t instanceof Ae)return je(this,so,!0,"f"),this._emit("abort",t);if(t instanceof Et)return this._emit("error",t);if(t instanceof Error){const r=new Et(t.message);return r.cause=t,this._emit("error",r)}return this._emit("error",new Et(String(t)))}),je(this,eo,new Promise((t,r)=>{je(this,ro,t,"f"),je(this,bi,r,"f")}),"f"),je(this,xi,new Promise((t,r)=>{je(this,no,t,"f"),je(this,Ci,r,"f")}),"f"),Ht(this,eo,"f").catch(()=>{}),Ht(this,xi,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emit("end")},Ht(this,cu,"f"))},0)}_addRun(t){return t}_connected(){this.ended||(Ht(this,ro,"f").call(this),this._emit("connect"))}get ended(){return Ht(this,Si,"f")}get errored(){return Ht(this,io,"f")}get aborted(){return Ht(this,so,"f")}abort(){this.controller.abort()}on(t,r){return(Ht(this,br,"f")[t]||(Ht(this,br,"f")[t]=[])).push({listener:r}),this}off(t,r){const n=Ht(this,br,"f")[t];if(!n)return this;const i=n.findIndex(s=>s.listener===r);return i>=0&&n.splice(i,1),this}once(t,r){return(Ht(this,br,"f")[t]||(Ht(this,br,"f")[t]=[])).push({listener:r,once:!0}),this}emitted(t){return new Promise((r,n)=>{je(this,Tn,!0,"f"),t!=="error"&&this.once("error",n),this.once(t,r)})}async done(){je(this,Tn,!0,"f"),await Ht(this,xi,"f")}_emit(t,...r){if(Ht(this,Si,"f"))return;t==="end"&&(je(this,Si,!0,"f"),Ht(this,no,"f").call(this));const n=Ht(this,br,"f")[t];if(n&&(Ht(this,br,"f")[t]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...r))),t==="abort"){const i=r[0];!Ht(this,Tn,"f")&&!(n!=null&&n.length)&&Promise.reject(i),Ht(this,bi,"f").call(this,i),Ht(this,Ci,"f").call(this,i),this._emit("end");return}if(t==="error"){const i=r[0];!Ht(this,Tn,"f")&&!(n!=null&&n.length)&&Promise.reject(i),Ht(this,bi,"f").call(this,i),Ht(this,Ci,"f").call(this,i),this._emit("end")}}async _threadAssistantStream(t,r,n){return await this._createThreadAssistantStream(r,t,n)}async _runAssistantStream(t,r,n,i){return await this._createAssistantStream(r,t,n,i)}async _runToolAssistantStream(t,r,n,i,s){return await this._createToolAssistantStream(n,t,r,i,s)}async _createThreadAssistantStream(t,r,n){const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s=await t.createAndRun({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addRun(s)}async _createToolAssistantStream(t,r,n,i,s){const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a=await t.submitToolOutputs(r,n,{...i,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addRun(a)}async _createAssistantStream(t,r,n,i){const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o=await t.create(r,{...n,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addRun(o)}}eo=new WeakMap,ro=new WeakMap,bi=new WeakMap,xi=new WeakMap,no=new WeakMap,Ci=new WeakMap,br=new WeakMap,Si=new WeakMap,io=new WeakMap,so=new WeakMap,Tn=new WeakMap,cu=new WeakMap;var dt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},De=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},se,fu,or,oo,Ue,un,On,on,No,Re,ao,lo,zi,wi,_i,Oh,Ih,Lh,Fh,zh,Nh,Gh;class Je extends jw{constructor(){super(...arguments),se.add(this),fu.set(this,[]),or.set(this,{}),oo.set(this,{}),Ue.set(this,void 0),un.set(this,void 0),On.set(this,void 0),on.set(this,void 0),No.set(this,void 0),Re.set(this,void 0),ao.set(this,void 0),lo.set(this,void 0),zi.set(this,void 0)}[(fu=new WeakMap,or=new WeakMap,oo=new WeakMap,Ue=new WeakMap,un=new WeakMap,On=new WeakMap,on=new WeakMap,No=new WeakMap,Re=new WeakMap,ao=new WeakMap,lo=new WeakMap,zi=new WeakMap,se=new WeakSet,Symbol.asyncIterator)](){const t=[],r=[];let n=!1;return this.on("event",i=>{const s=r.shift();s?s.resolve(i):t.push(i)}),this.on("end",()=>{n=!0;for(const i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{n=!0;for(const s of r)s.reject(i);r.length=0}),this.on("error",i=>{n=!0;for(const s of r)s.reject(i);r.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,o)=>r.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const r=new Je;return r._run(()=>r._fromReadableStream(t)),r}async _fromReadableStream(t,r){var s;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=cr.fromReadableStream(t,this.controller);for await(const o of i)dt(this,se,"m",wi).call(this,o);if((s=i.controller.signal)!=null&&s.aborted)throw new Ae;return this._addRun(dt(this,se,"m",_i).call(this))}toReadableStream(){return new cr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,r,n,i,s){const o=new Je;return o._run(()=>o._runToolAssistantStream(t,r,n,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(t,r,n,i,s){var u;const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...i,stream:!0},l=await t.submitToolOutputs(r,n,a,{...s,signal:this.controller.signal});this._connected();for await(const c of l)dt(this,se,"m",wi).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new Ae;return this._addRun(dt(this,se,"m",_i).call(this))}static createThreadAssistantStream(t,r,n){const i=new Je;return i._run(()=>i._threadAssistantStream(t,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(t,r,n,i){const s=new Je;return s._run(()=>s._runAssistantStream(t,r,n,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return dt(this,ao,"f")}currentRun(){return dt(this,lo,"f")}currentMessageSnapshot(){return dt(this,Ue,"f")}currentRunStepSnapshot(){return dt(this,zi,"f")}async finalRunSteps(){return await this.done(),Object.values(dt(this,or,"f"))}async finalMessages(){return await this.done(),Object.values(dt(this,oo,"f"))}async finalRun(){if(await this.done(),!dt(this,un,"f"))throw Error("Final run was not received.");return dt(this,un,"f")}async _createThreadAssistantStream(t,r,n){var a;const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},o=await t.createAndRun(s,{...n,signal:this.controller.signal});this._connected();for await(const l of o)dt(this,se,"m",wi).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new Ae;return this._addRun(dt(this,se,"m",_i).call(this))}async _createAssistantStream(t,r,n,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},a=await t.create(r,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)dt(this,se,"m",wi).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new Ae;return this._addRun(dt(this,se,"m",_i).call(this))}static accumulateDelta(t,r){for(const[n,i]of Object.entries(r)){if(!t.hasOwnProperty(n)){t[n]=i;continue}let s=t[n];if(s==null){t[n]=i;continue}if(n==="index"||n==="type"){t[n]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(Dh(s)&&Dh(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}}else throw Error(`Unhandled record type: ${n}, deltaValue: ${i}, accValue: ${s}`);t[n]=s}return t}}wi=function(t){if(!this.ended)switch(De(this,ao,t,"f"),dt(this,se,"m",Lh).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":dt(this,se,"m",Gh).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":dt(this,se,"m",Ih).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":dt(this,se,"m",Oh).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_i=function(){if(this.ended)throw new Et("stream has ended, this shouldn't happen");if(!dt(this,un,"f"))throw Error("Final run has not been received");return dt(this,un,"f")},Oh=function(t){const[r,n]=dt(this,se,"m",zh).call(this,t,dt(this,Ue,"f"));De(this,Ue,r,"f"),dt(this,oo,"f")[r.id]=r;for(const i of n){const s=r.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,r),t.data.delta.content)for(const i of t.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=r.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=dt(this,On,"f")){if(dt(this,on,"f"))switch(dt(this,on,"f").type){case"text":this._emit("textDone",dt(this,on,"f").text,dt(this,Ue,"f"));break;case"image_file":this._emit("imageFileDone",dt(this,on,"f").image_file,dt(this,Ue,"f"));break}De(this,On,i.index,"f")}De(this,on,r.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(dt(this,On,"f")!==void 0){const i=t.data.content[dt(this,On,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,dt(this,Ue,"f"));break;case"text":this._emit("textDone",i.text,dt(this,Ue,"f"));break}}dt(this,Ue,"f")&&this._emit("messageDone",t.data),De(this,Ue,void 0,"f")}},Ih=function(t){const r=dt(this,se,"m",Fh).call(this,t);switch(De(this,zi,r,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const n=t.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const s of n.step_details.tool_calls)s.index==dt(this,No,"f")?this._emit("toolCallDelta",s,r.step_details.tool_calls[s.index]):(dt(this,Re,"f")&&this._emit("toolCallDone",dt(this,Re,"f")),De(this,No,s.index,"f"),De(this,Re,r.step_details.tool_calls[s.index],"f"),dt(this,Re,"f")&&this._emit("toolCallCreated",dt(this,Re,"f")));this._emit("runStepDelta",t.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":De(this,zi,void 0,"f"),t.data.step_details.type=="tool_calls"&&dt(this,Re,"f")&&(this._emit("toolCallDone",dt(this,Re,"f")),De(this,Re,void 0,"f")),this._emit("runStepDone",t.data,r);break}},Lh=function(t){dt(this,fu,"f").push(t),this._emit("event",t)},Fh=function(t){switch(t.event){case"thread.run.step.created":return dt(this,or,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let r=dt(this,or,"f")[t.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let n=t.data;if(n.delta){const i=Je.accumulateDelta(r,n.delta);dt(this,or,"f")[t.data.id]=i}return dt(this,or,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":dt(this,or,"f")[t.data.id]=t.data;break}if(dt(this,or,"f")[t.data.id])return dt(this,or,"f")[t.data.id];throw new Error("No snapshot available")},zh=function(t,r){let n=[];switch(t.event){case"thread.message.created":return[t.data,n];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=t.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in r.content){let o=r.content[s.index];r.content[s.index]=dt(this,se,"m",Nh).call(this,s,o)}else r.content[s.index]=s,n.push(s);return[r,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Nh=function(t,r){return Je.accumulateDelta(r,t)},Gh=function(t){switch(De(this,lo,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":De(this,un,t.data,"f"),dt(this,Re,"f")&&(this._emit("toolCallDone",dt(this,Re,"f")),De(this,Re,void 0,"f"));break}};let Go=class extends Wt{retrieve(t,r,n,i){return this._client.get(`/threads/${t}/messages/${r}/files/${n}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,r,n={},i){return vr(n)?this.list(t,r,{},n):this._client.getAPIList(`/threads/${t}/messages/${r}/files`,wc,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}};class wc extends Mr{}(function(e){e.MessageFilesPage=wc})(Go||(Go={}));class Wo extends Wt{constructor(){super(...arguments),this.files=new Go(this._client)}create(t,r,n){return this._client.post(`/threads/${t}/messages`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(t,r,n){return this._client.get(`/threads/${t}/messages/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(t,r,n,i){return this._client.post(`/threads/${t}/messages/${r}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,r={},n){return vr(r)?this.list(t,{},r):this._client.getAPIList(`/threads/${t}/messages`,_c,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}class _c extends Mr{}(function(e){e.MessagesPage=_c,e.Files=Go,e.MessageFilesPage=wc})(Wo||(Wo={}));class Ho extends Wt{retrieve(t,r,n,i){return this._client.get(`/threads/${t}/runs/${r}/steps/${n}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,r,n={},i){return vr(n)?this.list(t,r,{},n):this._client.getAPIList(`/threads/${t}/runs/${r}/steps`,Ec,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class Ec extends Mr{}(function(e){e.RunStepsPage=Ec})(Ho||(Ho={}));class Vo extends Wt{constructor(){super(...arguments),this.steps=new Ho(this._client)}create(t,r,n){return this._client.post(`/threads/${t}/runs`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers},stream:r.stream??!1})}retrieve(t,r,n){return this._client.get(`/threads/${t}/runs/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(t,r,n,i){return this._client.post(`/threads/${t}/runs/${r}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,r={},n){return vr(r)?this.list(t,{},r):this._client.getAPIList(`/threads/${t}/runs`,kc,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}cancel(t,r,n){return this._client.post(`/threads/${t}/runs/${r}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}async createAndPoll(t,r,n){const i=await this.create(t,r,n);return await this.poll(t,i.id,n)}createAndStream(t,r,n){return Je.createAssistantStream(t,this._client.beta.threads.runs,r,n)}async poll(t,r,n){const i={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(t,r,{...n,headers:{...n==null?void 0:n.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(n!=null&&n.pollIntervalMs)a=n.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(a=u)}}await bc(a);break;case"requires_action":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(t,r,n){return Je.createAssistantStream(t,this._client.beta.threads.runs,r,n)}submitToolOutputs(t,r,n,i){return this._client.post(`/threads/${t}/runs/${r}/submit_tool_outputs`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(t,r,n,i){const s=await this.submitToolOutputs(t,r,n,i);return await this.poll(t,s.id,i)}submitToolOutputsStream(t,r,n,i){return Je.createToolAssistantStream(t,r,this._client.beta.threads.runs,n,i)}}class kc extends Mr{}(function(e){e.RunsPage=kc,e.Steps=Ho,e.RunStepsPage=Ec})(Vo||(Vo={}));class jo extends Wt{constructor(){super(...arguments),this.runs=new Vo(this._client),this.messages=new Wo(this._client)}create(t={},r){return vr(t)?this.create({},t):this._client.post("/threads",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(t,r){return this._client.get(`/threads/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(t,r,n){return this._client.post(`/threads/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}del(t,r){return this._client.delete(`/threads/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}createAndRun(t,r){return this._client.post("/threads/runs",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers},stream:t.stream??!1})}async createAndRunPoll(t,r){const n=await this.createAndRun(t,r);return await this.runs.poll(n.thread_id,n.id,r)}createAndRunStream(t,r){return Je.createThreadAssistantStream(t,this._client.beta.threads,r)}}(function(e){e.Runs=Vo,e.RunsPage=kc,e.Messages=Wo,e.MessagesPage=_c})(jo||(jo={}));class $o extends Wt{constructor(){super(...arguments),this.chat=new zo(this._client),this.assistants=new Lo(this._client),this.threads=new jo(this._client)}}(function(e){e.Chat=zo,e.Assistants=Lo,e.AssistantsPage=Sc,e.Threads=jo})($o||($o={}));class Xo extends Wt{create(t,r){return this._client.post("/completions",{body:t,...r,stream:t.stream??!1})}}Xo||(Xo={});class Uo extends Wt{create(t,r){return this._client.post("/embeddings",{body:t,...r})}}Uo||(Uo={});class Yo extends Wt{create(t,r){return this._client.post("/files",Ji({body:t,...r}))}retrieve(t,r){return this._client.get(`/files/${t}`,r)}list(t={},r){return vr(t)?this.list({},t):this._client.getAPIList("/files",Mc,{query:t,...r})}del(t,r){return this._client.delete(`/files/${t}`,r)}content(t,r){return this._client.get(`/files/${t}/content`,{...r,__binaryResponse:!0})}retrieveContent(t,r){return this._client.get(`/files/${t}/content`,{...r,headers:{Accept:"application/json",...r==null?void 0:r.headers}})}async waitForProcessing(t,{pollInterval:r=5e3,maxWait:n=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(t);for(;!o.status||!i.has(o.status);)if(await bc(r),o=await this.retrieve(t),Date.now()-s>n)throw new yc({message:`Giving up on waiting for file ${t} to finish processing after ${n} milliseconds.`});return o}}class Mc extends xc{}(function(e){e.FileObjectsPage=Mc})(Yo||(Yo={}));class qo extends Wt{create(t,r){return this._client.post("/fine_tuning/jobs",{body:t,...r})}retrieve(t,r){return this._client.get(`/fine_tuning/jobs/${t}`,r)}list(t={},r){return vr(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",Tc,{query:t,...r})}cancel(t,r){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,r)}listEvents(t,r={},n){return vr(r)?this.listEvents(t,{},r):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,Pc,{query:r,...n})}}class Tc extends Mr{}class Pc extends Mr{}(function(e){e.FineTuningJobsPage=Tc,e.FineTuningJobEventsPage=Pc})(qo||(qo={}));class Ko extends Wt{constructor(){super(...arguments),this.jobs=new qo(this._client)}}(function(e){e.Jobs=qo,e.FineTuningJobsPage=Tc,e.FineTuningJobEventsPage=Pc})(Ko||(Ko={}));class Jo extends Wt{createVariation(t,r){return this._client.post("/images/variations",Ji({body:t,...r}))}edit(t,r){return this._client.post("/images/edits",Ji({body:t,...r}))}generate(t,r){return this._client.post("/images/generations",{body:t,...r})}}Jo||(Jo={});class Zo extends Wt{retrieve(t,r){return this._client.get(`/models/${t}`,r)}list(t){return this._client.getAPIList("/models",Dc,t)}del(t,r){return this._client.delete(`/models/${t}`,r)}}class Dc extends xc{}(function(e){e.ModelsPage=Dc})(Zo||(Zo={}));class Qo extends Wt{create(t,r){return this._client.post("/moderations",{body:t,...r})}}Qo||(Qo={});var Pg;class ne extends Rw{constructor({baseURL:t=ll("OPENAI_BASE_URL"),apiKey:r=ll("OPENAI_API_KEY"),organization:n=ll("OPENAI_ORG_ID")??null,...i}={}){if(r===void 0)throw new Et("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:r,organization:n,...i,baseURL:t||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&Hw())throw new Et(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new Xo(this),this.chat=new Do(this),this.embeddings=new Uo(this),this.files=new Yo(this),this.images=new Jo(this),this.audio=new Oo(this),this.moderations=new Qo(this),this.models=new Zo(this),this.fineTuning=new Ko(this),this.beta=new $o(this),this._options=s,this.apiKey=r,this.organization=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}Pg=ne;ne.OpenAI=Pg;ne.OpenAIError=Et;ne.APIError=ae;ne.APIConnectionError=Pa;ne.APIConnectionTimeoutError=yc;ne.APIUserAbortError=Ae;ne.NotFoundError=cg;ne.ConflictError=fg;ne.RateLimitError=dg;ne.BadRequestError=ag;ne.AuthenticationError=lg;ne.InternalServerError=pg;ne.PermissionDeniedError=ug;ne.UnprocessableEntityError=hg;(function(e){e.toFile=bg,e.fileFromPath=sg,e.Page=xc,e.CursorPage=Mr,e.Completions=Xo,e.Chat=Do,e.Embeddings=Uo,e.Files=Yo,e.FileObjectsPage=Mc,e.Images=Jo,e.Audio=Oo,e.Moderations=Qo,e.Models=Zo,e.ModelsPage=Dc,e.FineTuning=Ko,e.Beta=$o})(ne||(ne={}));const $w="/StickerEditor/assets/Loading-Blt9h-Iq.gif",Xw={class:"px-20 py-10"},Uw=it("p",{class:"text-xl font-bold"},"Prompt",-1),Yw=["disabled"],qw={key:0,class:"flex items-center justify-center mt-5"},Kw=["src"],Jw=["src"],Zw={__name:"Generate",setup(e){const t=new ne({organization:void 0,apiKey:void 0,dangerouslyAllowBrowser:!0});let r=jt(null),n=jt(""),i=jt(""),s=jt(!1);const o=async()=>{if(!s.value)try{s.value=!0,r.value=await t.images.generate({model:"dall-e-3",prompt:n.value,n:1,size:"1024x1024"}),i.value=r.value.data[0].url,console.log(i.value)}catch(a){console.error("Error generating image:",a)}finally{s.value=!1}};return(a,l)=>(Dt(),At("main",Xw,[Uw,A0(it("textarea",{"onUpdate:modelValue":l[0]||(l[0]=u=>he(n)?n.value=u:n=u),class:"border-2 border-black px-5 py-2 w-[600px] h-[200px]",maxlength:"1000",placeholder:"Enter your prompt (max 1000 words)"},null,512),[[ty,oe(n)]]),it("button",{onClick:o,disabled:oe(s),class:"border-2 border-black px-5 py-2 bg-black text-white font-bold",type:"button"},Oc(oe(s)?"Loading...":"Generate"),9,Yw),it("p",null,"Image-url: "+Oc(oe(i)),1),oe(s)?(Dt(),At("div",qw,[it("img",{src:oe($w),alt:"Loading..."},null,8,Kw)])):oe(i)?(Dt(),At("img",{key:1,class:"w-[1024px] h-[1024px] border border-black mt-5",src:oe(i),alt:"Generated Image"},null,8,Jw)):hr("",!0)]))}},Qw={class:"m-0 p-0 box-border min-w-[1440px] min-h-screen overflow-hidden mx-auto"},t_={__name:"App",setup(e){return(t,r)=>(Dt(),At(be,null,[it("main",Qw,[Ft(pw)]),Ft(Zw,{class:"hidden"})],64))}};ny(t_).mount("#app");
