(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fa(t,e){const r=new Set(t.split(","));return i=>r.has(i)}const zt={},si=[],_e=()=>{},Cd=()=>!1,Co=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ha=t=>t.startsWith("onUpdate:"),Jt=Object.assign,da=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Sd=Object.prototype.hasOwnProperty,kt=(t,e)=>Sd.call(t,e),mt=Array.isArray,ai=t=>So(t)==="[object Map]",lc=t=>So(t)==="[object Set]",wt=t=>typeof t=="function",Ut=t=>typeof t=="string",Ci=t=>typeof t=="symbol",Lt=t=>t!==null&&typeof t=="object",uc=t=>(Lt(t)||wt(t))&&wt(t.then)&&wt(t.catch),cc=Object.prototype.toString,So=t=>cc.call(t),wd=t=>So(t).slice(8,-1),fc=t=>So(t)==="[object Object]",pa=t=>Ut(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,zi=fa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wo=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},_d=/-(\w)/g,hi=wo(t=>t.replace(_d,(e,r)=>r?r.toUpperCase():"")),kd=/\B([A-Z])/g,Si=wo(t=>t.replace(kd,"-$1").toLowerCase()),hc=wo(t=>t.charAt(0).toUpperCase()+t.slice(1)),Uo=wo(t=>t?`on${hc(t)}`:""),xr=(t,e)=>!Object.is(t,e),qo=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},ro=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},Ed=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Md=t=>{const e=Ut(t)?Number(t):NaN;return isNaN(e)?t:e};let Sl;const dc=()=>Sl||(Sl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function sn(t){if(mt(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],n=Ut(i)?Bd(i):sn(i);if(n)for(const o in n)e[o]=n[o]}return e}else if(Ut(t)||Lt(t))return t}const Dd=/;(?![^(]*\))/g,Td=/:([^]+)/,Pd=/\/\*[^]*?\*\//g;function Bd(t){const e={};return t.replace(Pd,"").split(Dd).forEach(r=>{if(r){const i=r.split(Td);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Yt(t){let e="";if(Ut(t))e=t;else if(mt(t))for(let r=0;r<t.length;r++){const i=Yt(t[r]);i&&(e+=i+" ")}else if(Lt(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Id="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Od=fa(Id);function pc(t){return!!t||t===""}const Un=t=>Ut(t)?t:t==null?"":mt(t)||Lt(t)&&(t.toString===cc||!wt(t.toString))?JSON.stringify(t,vc,2):String(t),vc=(t,e)=>e&&e.__v_isRef?vc(t,e.value):ai(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,n],o)=>(r[Ko(i,o)+" =>"]=n,r),{})}:lc(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Ko(r))}:Ci(e)?Ko(e):Lt(e)&&!mt(e)&&!fc(e)?String(e):e,Ko=(t,e="")=>{var r;return Ci(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Te;class Rd{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Te,!e&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=Te;try{return Te=this,e()}finally{Te=r}}}on(){Te=this}off(){Te=this.parent}stop(e){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function Ad(t,e=Te){e&&e.active&&e.effects.push(t)}function Ld(){return Te}let Nr;class va{constructor(e,r,i,n){this.fn=e,this.trigger=r,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Ad(this,n)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Yr();for(let e=0;e<this._depsLength;e++){const r=this.deps[e];if(r.computed&&(zd(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Xr()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=gr,r=Nr;try{return gr=!0,Nr=this,this._runnings++,wl(this),this.fn()}finally{_l(this),this._runnings--,Nr=r,gr=e}}stop(){var e;this.active&&(wl(this),_l(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function zd(t){return t.value}function wl(t){t._trackId++,t._depsLength=0}function _l(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)gc(t.deps[e],t);t.deps.length=t._depsLength}}function gc(t,e){const r=t.get(e);r!==void 0&&e._trackId!==r&&(t.delete(e),t.size===0&&t.cleanup())}let gr=!0,Ss=0;const mc=[];function Yr(){mc.push(gr),gr=!1}function Xr(){const t=mc.pop();gr=t===void 0?!0:t}function ga(){Ss++}function ma(){for(Ss--;!Ss&&ws.length;)ws.shift()()}function yc(t,e,r){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const i=t.deps[t._depsLength];i!==e?(i&&gc(i,t),t.deps[t._depsLength++]=e):t._depsLength++}}const ws=[];function bc(t,e,r){ga();for(const i of t.keys()){let n;i._dirtyLevel<e&&(n??(n=t.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(n??(n=t.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&ws.push(i.scheduler)))}ma()}const xc=(t,e)=>{const r=new Map;return r.cleanup=t,r.computed=e,r},_s=new WeakMap,Gr=Symbol(""),ks=Symbol("");function ve(t,e,r){if(gr&&Nr){let i=_s.get(t);i||_s.set(t,i=new Map);let n=i.get(r);n||i.set(r,n=xc(()=>i.delete(r))),yc(Nr,n)}}function Ke(t,e,r,i,n,o){const s=_s.get(t);if(!s)return;let a=[];if(e==="clear")a=[...s.values()];else if(r==="length"&&mt(t)){const l=Number(i);s.forEach((u,c)=>{(c==="length"||!Ci(c)&&c>=l)&&a.push(u)})}else switch(r!==void 0&&a.push(s.get(r)),e){case"add":mt(t)?pa(r)&&a.push(s.get("length")):(a.push(s.get(Gr)),ai(t)&&a.push(s.get(ks)));break;case"delete":mt(t)||(a.push(s.get(Gr)),ai(t)&&a.push(s.get(ks)));break;case"set":ai(t)&&a.push(s.get(Gr));break}ga();for(const l of a)l&&bc(l,4);ma()}const Nd=fa("__proto__,__v_isRef,__isVue"),Cc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ci)),kl=Gd();function Gd(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const i=Mt(this);for(let o=0,s=this.length;o<s;o++)ve(i,"get",o+"");const n=i[e](...r);return n===-1||n===!1?i[e](...r.map(Mt)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Yr(),ga();const i=Mt(this)[e].apply(this,r);return ma(),Xr(),i}}),t}function Fd(t){const e=Mt(this);return ve(e,"has",t),e.hasOwnProperty(t)}class Sc{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,i){const n=this._isReadonly,o=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return o;if(r==="__v_raw")return i===(n?o?Qd:Ec:o?kc:_c).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const s=mt(e);if(!n){if(s&&kt(kl,r))return Reflect.get(kl,r,i);if(r==="hasOwnProperty")return Fd}const a=Reflect.get(e,r,i);return(Ci(r)?Cc.has(r):Nd(r))||(n||ve(e,"get",r),o)?a:ge(a)?s&&pa(r)?a:a.value:Lt(a)?n?Mc(a):ko(a):a}}class wc extends Sc{constructor(e=!1){super(!1,e)}set(e,r,i,n){let o=e[r];if(!this._isShallow){const l=di(o);if(!io(i)&&!di(i)&&(o=Mt(o),i=Mt(i)),!mt(e)&&ge(o)&&!ge(i))return l?!1:(o.value=i,!0)}const s=mt(e)&&pa(r)?Number(r)<e.length:kt(e,r),a=Reflect.set(e,r,i,n);return e===Mt(n)&&(s?xr(i,o)&&Ke(e,"set",r,i):Ke(e,"add",r,i)),a}deleteProperty(e,r){const i=kt(e,r);e[r];const n=Reflect.deleteProperty(e,r);return n&&i&&Ke(e,"delete",r,void 0),n}has(e,r){const i=Reflect.has(e,r);return(!Ci(r)||!Cc.has(r))&&ve(e,"has",r),i}ownKeys(e){return ve(e,"iterate",mt(e)?"length":Gr),Reflect.ownKeys(e)}}class Hd extends Sc{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const Wd=new wc,Vd=new Hd,jd=new wc(!0),ya=t=>t,_o=t=>Reflect.getPrototypeOf(t);function En(t,e,r=!1,i=!1){t=t.__v_raw;const n=Mt(t),o=Mt(e);r||(xr(e,o)&&ve(n,"get",e),ve(n,"get",o));const{has:s}=_o(n),a=i?ya:r?Ca:Xi;if(s.call(n,e))return a(t.get(e));if(s.call(n,o))return a(t.get(o));t!==n&&t.get(e)}function Mn(t,e=!1){const r=this.__v_raw,i=Mt(r),n=Mt(t);return e||(xr(t,n)&&ve(i,"has",t),ve(i,"has",n)),t===n?r.has(t):r.has(t)||r.has(n)}function Dn(t,e=!1){return t=t.__v_raw,!e&&ve(Mt(t),"iterate",Gr),Reflect.get(t,"size",t)}function El(t){t=Mt(t);const e=Mt(this);return _o(e).has.call(e,t)||(e.add(t),Ke(e,"add",t,t)),this}function Ml(t,e){e=Mt(e);const r=Mt(this),{has:i,get:n}=_o(r);let o=i.call(r,t);o||(t=Mt(t),o=i.call(r,t));const s=n.call(r,t);return r.set(t,e),o?xr(e,s)&&Ke(r,"set",t,e):Ke(r,"add",t,e),this}function Dl(t){const e=Mt(this),{has:r,get:i}=_o(e);let n=r.call(e,t);n||(t=Mt(t),n=r.call(e,t)),i&&i.call(e,t);const o=e.delete(t);return n&&Ke(e,"delete",t,void 0),o}function Tl(){const t=Mt(this),e=t.size!==0,r=t.clear();return e&&Ke(t,"clear",void 0,void 0),r}function Tn(t,e){return function(i,n){const o=this,s=o.__v_raw,a=Mt(s),l=e?ya:t?Ca:Xi;return!t&&ve(a,"iterate",Gr),s.forEach((u,c)=>i.call(n,l(u),l(c),o))}}function Pn(t,e,r){return function(...i){const n=this.__v_raw,o=Mt(n),s=ai(o),a=t==="entries"||t===Symbol.iterator&&s,l=t==="keys"&&s,u=n[t](...i),c=r?ya:e?Ca:Xi;return!e&&ve(o,"iterate",l?ks:Gr),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:a?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function nr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function $d(){const t={get(o){return En(this,o)},get size(){return Dn(this)},has:Mn,add:El,set:Ml,delete:Dl,clear:Tl,forEach:Tn(!1,!1)},e={get(o){return En(this,o,!1,!0)},get size(){return Dn(this)},has:Mn,add:El,set:Ml,delete:Dl,clear:Tl,forEach:Tn(!1,!0)},r={get(o){return En(this,o,!0)},get size(){return Dn(this,!0)},has(o){return Mn.call(this,o,!0)},add:nr("add"),set:nr("set"),delete:nr("delete"),clear:nr("clear"),forEach:Tn(!0,!1)},i={get(o){return En(this,o,!0,!0)},get size(){return Dn(this,!0)},has(o){return Mn.call(this,o,!0)},add:nr("add"),set:nr("set"),delete:nr("delete"),clear:nr("clear"),forEach:Tn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=Pn(o,!1,!1),r[o]=Pn(o,!0,!1),e[o]=Pn(o,!1,!0),i[o]=Pn(o,!0,!0)}),[t,r,e,i]}const[Yd,Xd,Ud,qd]=$d();function ba(t,e){const r=e?t?qd:Ud:t?Xd:Yd;return(i,n,o)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(kt(r,n)&&n in i?r:i,n,o)}const Kd={get:ba(!1,!1)},Zd={get:ba(!1,!0)},Jd={get:ba(!0,!1)},_c=new WeakMap,kc=new WeakMap,Ec=new WeakMap,Qd=new WeakMap;function tp(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ep(t){return t.__v_skip||!Object.isExtensible(t)?0:tp(wd(t))}function ko(t){return di(t)?t:xa(t,!1,Wd,Kd,_c)}function rp(t){return xa(t,!1,jd,Zd,kc)}function Mc(t){return xa(t,!0,Vd,Jd,Ec)}function xa(t,e,r,i,n){if(!Lt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=n.get(t);if(o)return o;const s=ep(t);if(s===0)return t;const a=new Proxy(t,s===2?i:r);return n.set(t,a),a}function li(t){return di(t)?li(t.__v_raw):!!(t&&t.__v_isReactive)}function di(t){return!!(t&&t.__v_isReadonly)}function io(t){return!!(t&&t.__v_isShallow)}function Dc(t){return li(t)||di(t)}function Mt(t){const e=t&&t.__v_raw;return e?Mt(e):t}function Tc(t){return Object.isExtensible(t)&&ro(t,"__v_skip",!0),t}const Xi=t=>Lt(t)?ko(t):t,Ca=t=>Lt(t)?Mc(t):t;class Pc{constructor(e,r,i,n){this.getter=e,this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new va(()=>e(this._value),()=>qn(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const e=Mt(this);return(!e._cacheable||e.effect.dirty)&&xr(e._value,e._value=e.effect.run())&&qn(e,4),Bc(e),e.effect._dirtyLevel>=2&&qn(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function ip(t,e,r=!1){let i,n;const o=wt(t);return o?(i=t,n=_e):(i=t.get,n=t.set),new Pc(i,n,o||!n,r)}function Bc(t){var e;gr&&Nr&&(t=Mt(t),yc(Nr,(e=t.dep)!=null?e:t.dep=xc(()=>t.dep=void 0,t instanceof Pc?t:void 0)))}function qn(t,e=4,r){t=Mt(t);const i=t.dep;i&&bc(i,e)}function ge(t){return!!(t&&t.__v_isRef===!0)}function Ot(t){return np(t,!1)}function np(t,e){return ge(t)?t:new op(t,e)}class op{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:Mt(e),this._value=r?e:Xi(e)}get value(){return Bc(this),this._value}set value(e){const r=this.__v_isShallow||io(e)||di(e);e=r?e:Mt(e),xr(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:Xi(e),qn(this,4))}}function dr(t){return ge(t)?t.value:t}const sp={get:(t,e,r)=>dr(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const n=t[e];return ge(n)&&!ge(r)?(n.value=r,!0):Reflect.set(t,e,r,i)}};function Ic(t){return li(t)?t:new Proxy(t,sp)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mr(t,e,r,i){try{return i?t(...i):t()}catch(n){Eo(n,e,r)}}function ke(t,e,r,i){if(wt(t)){const o=mr(t,e,r,i);return o&&uc(o)&&o.catch(s=>{Eo(s,e,r)}),o}const n=[];for(let o=0;o<t.length;o++)n.push(ke(t[o],e,r,i));return n}function Eo(t,e,r,i=!0){const n=e?e.vnode:null;if(e){let o=e.parent;const s=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,s,a)===!1)return}o=o.parent}const l=e.appContext.config.errorHandler;if(l){mr(l,null,10,[t,s,a]);return}}ap(t,r,n,i)}function ap(t,e,r,i=!0){console.error(t)}let Ui=!1,Es=!1;const ee=[];let je=0;const ui=[];let ur=null,Br=0;const Oc=Promise.resolve();let Sa=null;function Rc(t){const e=Sa||Oc;return t?e.then(this?t.bind(this):t):e}function lp(t){let e=je+1,r=ee.length;for(;e<r;){const i=e+r>>>1,n=ee[i],o=qi(n);o<t||o===t&&n.pre?e=i+1:r=i}return e}function wa(t){(!ee.length||!ee.includes(t,Ui&&t.allowRecurse?je+1:je))&&(t.id==null?ee.push(t):ee.splice(lp(t.id),0,t),Ac())}function Ac(){!Ui&&!Es&&(Es=!0,Sa=Oc.then(zc))}function up(t){const e=ee.indexOf(t);e>je&&ee.splice(e,1)}function cp(t){mt(t)?ui.push(...t):(!ur||!ur.includes(t,t.allowRecurse?Br+1:Br))&&ui.push(t),Ac()}function Pl(t,e,r=Ui?je+1:0){for(;r<ee.length;r++){const i=ee[r];if(i&&i.pre){if(t&&i.id!==t.uid)continue;ee.splice(r,1),r--,i()}}}function Lc(t){if(ui.length){const e=[...new Set(ui)].sort((r,i)=>qi(r)-qi(i));if(ui.length=0,ur){ur.push(...e);return}for(ur=e,Br=0;Br<ur.length;Br++)ur[Br]();ur=null,Br=0}}const qi=t=>t.id==null?1/0:t.id,fp=(t,e)=>{const r=qi(t)-qi(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function zc(t){Es=!1,Ui=!0,ee.sort(fp);try{for(je=0;je<ee.length;je++){const e=ee[je];e&&e.active!==!1&&mr(e,null,14)}}finally{je=0,ee.length=0,Lc(),Ui=!1,Sa=null,(ee.length||ui.length)&&zc()}}function hp(t,e,...r){if(t.isUnmounted)return;const i=t.vnode.props||zt;let n=r;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in i){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:h}=i[c]||zt;h&&(n=r.map(d=>Ut(d)?d.trim():d)),f&&(n=r.map(Ed))}let a,l=i[a=Uo(e)]||i[a=Uo(hi(e))];!l&&o&&(l=i[a=Uo(Si(e))]),l&&ke(l,t,6,n);const u=i[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ke(u,t,6,n)}}function Nc(t,e,r=!1){const i=e.emitsCache,n=i.get(t);if(n!==void 0)return n;const o=t.emits;let s={},a=!1;if(!wt(t)){const l=u=>{const c=Nc(u,e,!0);c&&(a=!0,Jt(s,c))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(Lt(t)&&i.set(t,null),null):(mt(o)?o.forEach(l=>s[l]=null):Jt(s,o),Lt(t)&&i.set(t,s),s)}function Mo(t,e){return!t||!Co(e)?!1:(e=e.slice(2).replace(/Once$/,""),kt(t,e[0].toLowerCase()+e.slice(1))||kt(t,Si(e))||kt(t,e))}let Oe=null,Do=null;function no(t){const e=Oe;return Oe=t,Do=t&&t.type.__scopeId||null,e}function _a(t){Do=t}function ka(){Do=null}function Fr(t,e=Oe,r){if(!e||t._n)return t;const i=(...n)=>{i._d&&Hl(-1);const o=no(e);let s;try{s=t(...n)}finally{no(o),i._d&&Hl(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function Zo(t){const{type:e,vnode:r,proxy:i,withProxy:n,props:o,propsOptions:[s],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=t;let g,m;const y=no(t);try{if(r.shapeFlag&4){const C=n||i,w=C;g=Ve(c.call(w,C,f,o,d,h,p)),m=l}else{const C=e;g=Ve(C.length>1?C(o,{attrs:l,slots:a,emit:u}):C(o,null)),m=e.props?l:dp(l)}}catch(C){Fi.length=0,Eo(C,t,1),g=Rt(Ae)}let x=g;if(m&&v!==!1){const C=Object.keys(m),{shapeFlag:w}=x;C.length&&w&7&&(s&&C.some(ha)&&(m=pp(m,s)),x=Cr(x,m))}return r.dirs&&(x=Cr(x),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&(x.transition=r.transition),g=x,no(y),g}const dp=t=>{let e;for(const r in t)(r==="class"||r==="style"||Co(r))&&((e||(e={}))[r]=t[r]);return e},pp=(t,e)=>{const r={};for(const i in t)(!ha(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function vp(t,e,r){const{props:i,children:n,component:o}=t,{props:s,children:a,patchFlag:l}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?Bl(i,s,u):!!s;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(s[h]!==i[h]&&!Mo(u,h))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===s?!1:i?s?Bl(i,s,u):!0:!!s;return!1}function Bl(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const o=i[n];if(e[o]!==t[o]&&!Mo(r,o))return!0}return!1}function gp({vnode:t,parent:e},r){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=r,e=e.parent;else break}}const mp=Symbol.for("v-ndc"),yp=t=>t.__isSuspense;function bp(t,e){e&&e.pendingBranch?mt(t)?e.effects.push(...t):e.effects.push(t):cp(t)}const xp=Symbol.for("v-scx"),Cp=()=>be(xp),Bn={};function ci(t,e,r){return Gc(t,e,r)}function Gc(t,e,{immediate:r,deep:i,flush:n,once:o,onTrack:s,onTrigger:a}=zt){if(e&&o){const b=e;e=(..._)=>{b(..._),w()}}const l=re,u=b=>i===!0?b:ti(b,i===!1?1:void 0);let c,f=!1,h=!1;if(ge(t)?(c=()=>t.value,f=io(t)):li(t)?(c=()=>u(t),f=!0):mt(t)?(h=!0,f=t.some(b=>li(b)||io(b)),c=()=>t.map(b=>{if(ge(b))return b.value;if(li(b))return u(b);if(wt(b))return mr(b,l,2)})):wt(t)?e?c=()=>mr(t,l,2):c=()=>(d&&d(),ke(t,l,3,[p])):c=_e,e&&i){const b=c;c=()=>ti(b())}let d,p=b=>{d=x.onStop=()=>{mr(b,l,4),d=x.onStop=void 0}},v;if(Oo)if(p=_e,e?r&&ke(e,l,3,[c(),h?[]:void 0,p]):c(),n==="sync"){const b=Cp();v=b.__watcherHandles||(b.__watcherHandles=[])}else return _e;let g=h?new Array(t.length).fill(Bn):Bn;const m=()=>{if(!(!x.active||!x.dirty))if(e){const b=x.run();(i||f||(h?b.some((_,S)=>xr(_,g[S])):xr(b,g)))&&(d&&d(),ke(e,l,3,[b,g===Bn?void 0:h&&g[0]===Bn?[]:g,p]),g=b)}else x.run()};m.allowRecurse=!!e;let y;n==="sync"?y=m:n==="post"?y=()=>he(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),y=()=>wa(m));const x=new va(c,_e,y),C=Ld(),w=()=>{x.stop(),C&&da(C.effects,x)};return e?r?m():g=x.run():n==="post"?he(x.run.bind(x),l&&l.suspense):x.run(),v&&v.push(w),w}function Sp(t,e,r){const i=this.proxy,n=Ut(t)?t.includes(".")?Fc(i,t):()=>i[t]:t.bind(i,i);let o;wt(e)?o=e:(o=e.handler,r=e);const s=ln(this),a=Gc(n,o.bind(i),r);return s(),a}function Fc(t,e){const r=e.split(".");return()=>{let i=t;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function ti(t,e,r=0,i){if(!Lt(t)||t.__v_skip)return t;if(e&&e>0){if(r>=e)return t;r++}if(i=i||new Set,i.has(t))return t;if(i.add(t),ge(t))ti(t.value,e,r,i);else if(mt(t))for(let n=0;n<t.length;n++)ti(t[n],e,r,i);else if(lc(t)||ai(t))t.forEach(n=>{ti(n,e,r,i)});else if(fc(t))for(const n in t)ti(t[n],e,r,i);return t}function Mr(t,e,r,i){const n=t.dirs,o=e&&e.dirs;for(let s=0;s<n.length;s++){const a=n[s];o&&(a.oldValue=o[s].value);let l=a.dir[i];l&&(Yr(),ke(l,r,8,[t.el,a,t,e]),Xr())}}const cr=Symbol("_leaveCb"),In=Symbol("_enterCb");function wp(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return an(()=>{t.isMounted=!0}),$c(()=>{t.isUnmounting=!0}),t}const Se=[Function,Array],Hc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Se,onEnter:Se,onAfterEnter:Se,onEnterCancelled:Se,onBeforeLeave:Se,onLeave:Se,onAfterLeave:Se,onLeaveCancelled:Se,onBeforeAppear:Se,onAppear:Se,onAfterAppear:Se,onAppearCancelled:Se},_p={name:"BaseTransition",props:Hc,setup(t,{slots:e}){const r=uv(),i=wp();return()=>{const n=e.default&&Vc(e.default(),!0);if(!n||!n.length)return;let o=n[0];if(n.length>1){for(const h of n)if(h.type!==Ae){o=h;break}}const s=Mt(t),{mode:a}=s;if(i.isLeaving)return Jo(o);const l=Il(o);if(!l)return Jo(o);const u=Ms(l,s,i,r);Ds(l,u);const c=r.subTree,f=c&&Il(c);if(f&&f.type!==Ae&&!Ir(l,f)){const h=Ms(f,s,i,r);if(Ds(f,h),a==="out-in")return i.isLeaving=!0,h.afterLeave=()=>{i.isLeaving=!1,r.update.active!==!1&&(r.effect.dirty=!0,r.update())},Jo(o);a==="in-out"&&l.type!==Ae&&(h.delayLeave=(d,p,v)=>{const g=Wc(i,f);g[String(f.key)]=f,d[cr]=()=>{p(),d[cr]=void 0,delete u.delayedLeave},u.delayedLeave=v})}return o}}},kp=_p;function Wc(t,e){const{leavingVNodes:r}=t;let i=r.get(e.type);return i||(i=Object.create(null),r.set(e.type,i)),i}function Ms(t,e,r,i){const{appear:n,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:v,onAppear:g,onAfterAppear:m,onAppearCancelled:y}=e,x=String(t.key),C=Wc(r,t),w=(S,M)=>{S&&ke(S,i,9,M)},b=(S,M)=>{const T=M[1];w(S,M),mt(S)?S.every(B=>B.length<=1)&&T():S.length<=1&&T()},_={mode:o,persisted:s,beforeEnter(S){let M=a;if(!r.isMounted)if(n)M=v||a;else return;S[cr]&&S[cr](!0);const T=C[x];T&&Ir(t,T)&&T.el[cr]&&T.el[cr](),w(M,[S])},enter(S){let M=l,T=u,B=c;if(!r.isMounted)if(n)M=g||l,T=m||u,B=y||c;else return;let k=!1;const E=S[In]=R=>{k||(k=!0,R?w(B,[S]):w(T,[S]),_.delayedLeave&&_.delayedLeave(),S[In]=void 0)};M?b(M,[S,E]):E()},leave(S,M){const T=String(t.key);if(S[In]&&S[In](!0),r.isUnmounting)return M();w(f,[S]);let B=!1;const k=S[cr]=E=>{B||(B=!0,M(),E?w(p,[S]):w(d,[S]),S[cr]=void 0,C[T]===t&&delete C[T])};C[T]=t,h?b(h,[S,k]):k()},clone(S){return Ms(S,e,r,i)}};return _}function Jo(t){if(To(t))return t=Cr(t),t.children=null,t}function Il(t){return To(t)?t.children?t.children[0]:void 0:t}function Ds(t,e){t.shapeFlag&6&&t.component?Ds(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Vc(t,e=!1,r){let i=[],n=0;for(let o=0;o<t.length;o++){let s=t[o];const a=r==null?s.key:String(r)+String(s.key!=null?s.key:o);s.type===Qt?(s.patchFlag&128&&n++,i=i.concat(Vc(s.children,e,a))):(e||s.type!==Ae)&&i.push(a!=null?Cr(s,{key:a}):s)}if(n>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function Ep(t,e){return wt(t)?Jt({name:t.name},e,{setup:t}):t}const Kn=t=>!!t.type.__asyncLoader,To=t=>t.type.__isKeepAlive;function Mp(t,e){jc(t,"a",e)}function Dp(t,e){jc(t,"da",e)}function jc(t,e,r=re){const i=t.__wdc||(t.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Po(e,i,r),r){let n=r.parent;for(;n&&n.parent;)To(n.parent.vnode)&&Tp(i,e,r,n),n=n.parent}}function Tp(t,e,r,i){const n=Po(e,t,i,!0);Yc(()=>{da(i[e],n)},r)}function Po(t,e,r=re,i=!1){if(r){const n=r[t]||(r[t]=[]),o=e.__weh||(e.__weh=(...s)=>{if(r.isUnmounted)return;Yr();const a=ln(r),l=ke(e,r,t,s);return a(),Xr(),l});return i?n.unshift(o):n.push(o),o}}const rr=t=>(e,r=re)=>(!Oo||t==="sp")&&Po(t,(...i)=>e(...i),r),Pp=rr("bm"),an=rr("m"),Bp=rr("bu"),Ip=rr("u"),$c=rr("bum"),Yc=rr("um"),Op=rr("sp"),Rp=rr("rtg"),Ap=rr("rtc");function Lp(t,e=re){Po("ec",t,e)}function Hr(t,e,r,i){let n;const o=r;if(mt(t)||Ut(t)){n=new Array(t.length);for(let s=0,a=t.length;s<a;s++)n[s]=e(t[s],s,void 0,o)}else if(typeof t=="number"){n=new Array(t);for(let s=0;s<t;s++)n[s]=e(s+1,s,void 0,o)}else if(Lt(t))if(t[Symbol.iterator])n=Array.from(t,(s,a)=>e(s,a,void 0,o));else{const s=Object.keys(t);n=new Array(s.length);for(let a=0,l=s.length;a<l;a++){const u=s[a];n[a]=e(t[u],u,a,o)}}else n=[];return n}const Ts=t=>t?af(t)?Ta(t)||t.proxy:Ts(t.parent):null,Ni=Jt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ts(t.parent),$root:t=>Ts(t.root),$emit:t=>t.emit,$options:t=>Ea(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,wa(t.update)}),$nextTick:t=>t.n||(t.n=Rc.bind(t.proxy)),$watch:t=>Sp.bind(t)}),Qo=(t,e)=>t!==zt&&!t.__isScriptSetup&&kt(t,e),zp={get({_:t},e){const{ctx:r,setupState:i,data:n,props:o,accessCache:s,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const d=s[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return n[e];case 4:return r[e];case 3:return o[e]}else{if(Qo(i,e))return s[e]=1,i[e];if(n!==zt&&kt(n,e))return s[e]=2,n[e];if((u=t.propsOptions[0])&&kt(u,e))return s[e]=3,o[e];if(r!==zt&&kt(r,e))return s[e]=4,r[e];Ps&&(s[e]=0)}}const c=Ni[e];let f,h;if(c)return e==="$attrs"&&ve(t,"get",e),c(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(r!==zt&&kt(r,e))return s[e]=4,r[e];if(h=l.config.globalProperties,kt(h,e))return h[e]},set({_:t},e,r){const{data:i,setupState:n,ctx:o}=t;return Qo(n,e)?(n[e]=r,!0):i!==zt&&kt(i,e)?(i[e]=r,!0):kt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:n,propsOptions:o}},s){let a;return!!r[s]||t!==zt&&kt(t,s)||Qo(e,s)||(a=o[0])&&kt(a,s)||kt(i,s)||kt(Ni,s)||kt(n.config.globalProperties,s)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:kt(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function Ol(t){return mt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Ps=!0;function Np(t){const e=Ea(t),r=t.proxy,i=t.ctx;Ps=!1,e.beforeCreate&&Rl(e.beforeCreate,t,"bc");const{data:n,computed:o,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:y,destroyed:x,unmounted:C,render:w,renderTracked:b,renderTriggered:_,errorCaptured:S,serverPrefetch:M,expose:T,inheritAttrs:B,components:k,directives:E,filters:R}=e;if(u&&Gp(u,i,null),s)for(const F in s){const z=s[F];wt(z)&&(i[F]=z.bind(r))}if(n){const F=n.call(r,r);Lt(F)&&(t.data=ko(F))}if(Ps=!0,o)for(const F in o){const z=o[F],U=wt(z)?z.bind(r,r):wt(z.get)?z.get.bind(r,r):_e,q=!wt(z)&&wt(z.set)?z.set.bind(r):_e,H=Pa({get:U,set:q});Object.defineProperty(i,F,{enumerable:!0,configurable:!0,get:()=>H.value,set:et=>H.value=et})}if(a)for(const F in a)Xc(a[F],i,r,F);if(l){const F=wt(l)?l.call(r):l;Reflect.ownKeys(F).forEach(z=>{lr(z,F[z])})}c&&Rl(c,t,"c");function G(F,z){mt(z)?z.forEach(U=>F(U.bind(r))):z&&F(z.bind(r))}if(G(Pp,f),G(an,h),G(Bp,d),G(Ip,p),G(Mp,v),G(Dp,g),G(Lp,S),G(Ap,b),G(Rp,_),G($c,y),G(Yc,C),G(Op,M),mt(T))if(T.length){const F=t.exposed||(t.exposed={});T.forEach(z=>{Object.defineProperty(F,z,{get:()=>r[z],set:U=>r[z]=U})})}else t.exposed||(t.exposed={});w&&t.render===_e&&(t.render=w),B!=null&&(t.inheritAttrs=B),k&&(t.components=k),E&&(t.directives=E)}function Gp(t,e,r=_e){mt(t)&&(t=Bs(t));for(const i in t){const n=t[i];let o;Lt(n)?"default"in n?o=be(n.from||i,n.default,!0):o=be(n.from||i):o=be(n),ge(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[i]=o}}function Rl(t,e,r){ke(mt(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function Xc(t,e,r,i){const n=i.includes(".")?Fc(r,i):()=>r[i];if(Ut(t)){const o=e[t];wt(o)&&ci(n,o)}else if(wt(t))ci(n,t.bind(r));else if(Lt(t))if(mt(t))t.forEach(o=>Xc(o,e,r,i));else{const o=wt(t.handler)?t.handler.bind(r):e[t.handler];wt(o)&&ci(n,o,t)}}function Ea(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:n,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let l;return a?l=a:!n.length&&!r&&!i?l=e:(l={},n.length&&n.forEach(u=>oo(l,u,s,!0)),oo(l,e,s)),Lt(e)&&o.set(e,l),l}function oo(t,e,r,i=!1){const{mixins:n,extends:o}=e;o&&oo(t,o,r,!0),n&&n.forEach(s=>oo(t,s,r,!0));for(const s in e)if(!(i&&s==="expose")){const a=Fp[s]||r&&r[s];t[s]=a?a(t[s],e[s]):e[s]}return t}const Fp={data:Al,props:Ll,emits:Ll,methods:Ii,computed:Ii,beforeCreate:ae,created:ae,beforeMount:ae,mounted:ae,beforeUpdate:ae,updated:ae,beforeDestroy:ae,beforeUnmount:ae,destroyed:ae,unmounted:ae,activated:ae,deactivated:ae,errorCaptured:ae,serverPrefetch:ae,components:Ii,directives:Ii,watch:Wp,provide:Al,inject:Hp};function Al(t,e){return e?t?function(){return Jt(wt(t)?t.call(this,this):t,wt(e)?e.call(this,this):e)}:e:t}function Hp(t,e){return Ii(Bs(t),Bs(e))}function Bs(t){if(mt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function ae(t,e){return t?[...new Set([].concat(t,e))]:e}function Ii(t,e){return t?Jt(Object.create(null),t,e):e}function Ll(t,e){return t?mt(t)&&mt(e)?[...new Set([...t,...e])]:Jt(Object.create(null),Ol(t),Ol(e??{})):e}function Wp(t,e){if(!t)return e;if(!e)return t;const r=Jt(Object.create(null),t);for(const i in e)r[i]=ae(t[i],e[i]);return r}function Uc(){return{app:null,config:{isNativeTag:Cd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Vp=0;function jp(t,e){return function(i,n=null){wt(i)||(i=Jt({},i)),n!=null&&!Lt(n)&&(n=null);const o=Uc(),s=new WeakSet;let a=!1;const l=o.app={_uid:Vp++,_component:i,_props:n,_container:null,_context:o,_instance:null,version:gv,get config(){return o.config},set config(u){},use(u,...c){return s.has(u)||(u&&wt(u.install)?(s.add(u),u.install(l,...c)):wt(u)&&(s.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!a){const h=Rt(i,n);return h.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),c&&e?e(h,u):t(h,u,f),a=!0,l._container=u,u.__vue_app__=l,Ta(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l},runWithContext(u){const c=Gi;Gi=l;try{return u()}finally{Gi=c}}};return l}}let Gi=null;function lr(t,e){if(re){let r=re.provides;const i=re.parent&&re.parent.provides;i===r&&(r=re.provides=Object.create(i)),r[t]=e}}function be(t,e,r=!1){const i=re||Oe;if(i||Gi){const n=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Gi._context.provides;if(n&&t in n)return n[t];if(arguments.length>1)return r&&wt(e)?e.call(i&&i.proxy):e}}function $p(t,e,r,i=!1){const n={},o={};ro(o,Io,1),t.propsDefaults=Object.create(null),qc(t,e,n,o);for(const s in t.propsOptions[0])s in n||(n[s]=void 0);r?t.props=i?n:rp(n):t.type.props?t.props=n:t.props=o,t.attrs=o}function Yp(t,e,r,i){const{props:n,attrs:o,vnode:{patchFlag:s}}=t,a=Mt(n),[l]=t.propsOptions;let u=!1;if((i||s>0)&&!(s&16)){if(s&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(Mo(t.emitsOptions,h))continue;const d=e[h];if(l)if(kt(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=hi(h);n[p]=Is(l,a,p,d,t,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{qc(t,e,n,o)&&(u=!0);let c;for(const f in a)(!e||!kt(e,f)&&((c=Si(f))===f||!kt(e,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(n[f]=Is(l,a,f,void 0,t,!0)):delete n[f]);if(o!==a)for(const f in o)(!e||!kt(e,f))&&(delete o[f],u=!0)}u&&Ke(t,"set","$attrs")}function qc(t,e,r,i){const[n,o]=t.propsOptions;let s=!1,a;if(e)for(let l in e){if(zi(l))continue;const u=e[l];let c;n&&kt(n,c=hi(l))?!o||!o.includes(c)?r[c]=u:(a||(a={}))[c]=u:Mo(t.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,s=!0)}if(o){const l=Mt(r),u=a||zt;for(let c=0;c<o.length;c++){const f=o[c];r[f]=Is(n,l,f,u[f],t,!kt(u,f))}}return s}function Is(t,e,r,i,n,o){const s=t[r];if(s!=null){const a=kt(s,"default");if(a&&i===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&wt(l)){const{propsDefaults:u}=n;if(r in u)i=u[r];else{const c=ln(n);i=u[r]=l.call(null,e),c()}}else i=l}s[0]&&(o&&!a?i=!1:s[1]&&(i===""||i===Si(r))&&(i=!0))}return i}function Kc(t,e,r=!1){const i=e.propsCache,n=i.get(t);if(n)return n;const o=t.props,s={},a=[];let l=!1;if(!wt(t)){const c=f=>{l=!0;const[h,d]=Kc(f,e,!0);Jt(s,h),d&&a.push(...d)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!o&&!l)return Lt(t)&&i.set(t,si),si;if(mt(o))for(let c=0;c<o.length;c++){const f=hi(o[c]);zl(f)&&(s[f]=zt)}else if(o)for(const c in o){const f=hi(c);if(zl(f)){const h=o[c],d=s[f]=mt(h)||wt(h)?{type:h}:Jt({},h);if(d){const p=Fl(Boolean,d.type),v=Fl(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||kt(d,"default"))&&a.push(f)}}}const u=[s,a];return Lt(t)&&i.set(t,u),u}function zl(t){return t[0]!=="$"&&!zi(t)}function Nl(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Gl(t,e){return Nl(t)===Nl(e)}function Fl(t,e){return mt(e)?e.findIndex(r=>Gl(r,t)):wt(e)&&Gl(e,t)?0:-1}const Zc=t=>t[0]==="_"||t==="$stable",Ma=t=>mt(t)?t.map(Ve):[Ve(t)],Xp=(t,e,r)=>{if(e._n)return e;const i=Fr((...n)=>Ma(e(...n)),r);return i._c=!1,i},Jc=(t,e,r)=>{const i=t._ctx;for(const n in t){if(Zc(n))continue;const o=t[n];if(wt(o))e[n]=Xp(n,o,i);else if(o!=null){const s=Ma(o);e[n]=()=>s}}},Qc=(t,e)=>{const r=Ma(e);t.slots.default=()=>r},Up=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=Mt(e),ro(e,"_",r)):Jc(e,t.slots={})}else t.slots={},e&&Qc(t,e);ro(t.slots,Io,1)},qp=(t,e,r)=>{const{vnode:i,slots:n}=t;let o=!0,s=zt;if(i.shapeFlag&32){const a=e._;a?r&&a===1?o=!1:(Jt(n,e),!r&&a===1&&delete n._):(o=!e.$stable,Jc(e,n)),s=e}else e&&(Qc(t,e),s={default:1});if(o)for(const a in n)!Zc(a)&&s[a]==null&&delete n[a]};function Os(t,e,r,i,n=!1){if(mt(t)){t.forEach((h,d)=>Os(h,e&&(mt(e)?e[d]:e),r,i,n));return}if(Kn(i)&&!n)return;const o=i.shapeFlag&4?Ta(i.component)||i.component.proxy:i.el,s=n?null:o,{i:a,r:l}=t,u=e&&e.r,c=a.refs===zt?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(Ut(u)?(c[u]=null,kt(f,u)&&(f[u]=null)):ge(u)&&(u.value=null)),wt(l))mr(l,a,12,[s,c]);else{const h=Ut(l),d=ge(l);if(h||d){const p=()=>{if(t.f){const v=h?kt(f,l)?f[l]:c[l]:l.value;n?mt(v)&&da(v,o):mt(v)?v.includes(o)||v.push(o):h?(c[l]=[o],kt(f,l)&&(f[l]=c[l])):(l.value=[o],t.k&&(c[t.k]=l.value))}else h?(c[l]=s,kt(f,l)&&(f[l]=s)):d&&(l.value=s,t.k&&(c[t.k]=s))};s?(p.id=-1,he(p,r)):p()}}}const he=bp;function Kp(t){return Zp(t)}function Zp(t,e){const r=dc();r.__VUE__=!0;const{insert:i,remove:n,patchProp:o,createElement:s,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=_e,insertStaticContent:p}=t,v=(D,P,L,N=null,W=null,$=null,j=void 0,V=null,K=!!P.dynamicChildren)=>{if(D===P)return;D&&!Ir(D,P)&&(N=lt(D),et(D,W,$,!0),D=null),P.patchFlag===-2&&(K=!1,P.dynamicChildren=null);const{type:Y,ref:nt,shapeFlag:ut}=P;switch(Y){case Bo:g(D,P,L,N);break;case Ae:m(D,P,L,N);break;case Zn:D==null&&y(P,L,N,j);break;case Qt:k(D,P,L,N,W,$,j,V,K);break;default:ut&1?w(D,P,L,N,W,$,j,V,K):ut&6?E(D,P,L,N,W,$,j,V,K):(ut&64||ut&128)&&Y.process(D,P,L,N,W,$,j,V,K,xt)}nt!=null&&W&&Os(nt,D&&D.ref,$,P||D,!P)},g=(D,P,L,N)=>{if(D==null)i(P.el=a(P.children),L,N);else{const W=P.el=D.el;P.children!==D.children&&u(W,P.children)}},m=(D,P,L,N)=>{D==null?i(P.el=l(P.children||""),L,N):P.el=D.el},y=(D,P,L,N)=>{[D.el,D.anchor]=p(D.children,P,L,N,D.el,D.anchor)},x=({el:D,anchor:P},L,N)=>{let W;for(;D&&D!==P;)W=h(D),i(D,L,N),D=W;i(P,L,N)},C=({el:D,anchor:P})=>{let L;for(;D&&D!==P;)L=h(D),n(D),D=L;n(P)},w=(D,P,L,N,W,$,j,V,K)=>{P.type==="svg"?j="svg":P.type==="math"&&(j="mathml"),D==null?b(P,L,N,W,$,j,V,K):M(D,P,W,$,j,V,K)},b=(D,P,L,N,W,$,j,V)=>{let K,Y;const{props:nt,shapeFlag:ut,transition:at,dirs:vt}=D;if(K=D.el=s(D.type,$,nt&&nt.is,nt),ut&8?c(K,D.children):ut&16&&S(D.children,K,null,N,W,ts(D,$),j,V),vt&&Mr(D,null,N,"created"),_(K,D,D.scopeId,j,N),nt){for(const Dt in nt)Dt!=="value"&&!zi(Dt)&&o(K,Dt,null,nt[Dt],$,D.children,N,W,Q);"value"in nt&&o(K,"value",null,nt.value,$),(Y=nt.onVnodeBeforeMount)&&We(Y,N,D)}vt&&Mr(D,null,N,"beforeMount");const yt=Jp(W,at);yt&&at.beforeEnter(K),i(K,P,L),((Y=nt&&nt.onVnodeMounted)||yt||vt)&&he(()=>{Y&&We(Y,N,D),yt&&at.enter(K),vt&&Mr(D,null,N,"mounted")},W)},_=(D,P,L,N,W)=>{if(L&&d(D,L),N)for(let $=0;$<N.length;$++)d(D,N[$]);if(W){let $=W.subTree;if(P===$){const j=W.vnode;_(D,j,j.scopeId,j.slotScopeIds,W.parent)}}},S=(D,P,L,N,W,$,j,V,K=0)=>{for(let Y=K;Y<D.length;Y++){const nt=D[Y]=V?fr(D[Y]):Ve(D[Y]);v(null,nt,P,L,N,W,$,j,V)}},M=(D,P,L,N,W,$,j)=>{const V=P.el=D.el;let{patchFlag:K,dynamicChildren:Y,dirs:nt}=P;K|=D.patchFlag&16;const ut=D.props||zt,at=P.props||zt;let vt;if(L&&Dr(L,!1),(vt=at.onVnodeBeforeUpdate)&&We(vt,L,P,D),nt&&Mr(P,D,L,"beforeUpdate"),L&&Dr(L,!0),Y?T(D.dynamicChildren,Y,V,L,N,ts(P,W),$):j||z(D,P,V,null,L,N,ts(P,W),$,!1),K>0){if(K&16)B(V,P,ut,at,L,N,W);else if(K&2&&ut.class!==at.class&&o(V,"class",null,at.class,W),K&4&&o(V,"style",ut.style,at.style,W),K&8){const yt=P.dynamicProps;for(let Dt=0;Dt<yt.length;Dt++){const Bt=yt[Dt],Vt=ut[Bt],te=at[Bt];(te!==Vt||Bt==="value")&&o(V,Bt,Vt,te,W,D.children,L,N,Q)}}K&1&&D.children!==P.children&&c(V,P.children)}else!j&&Y==null&&B(V,P,ut,at,L,N,W);((vt=at.onVnodeUpdated)||nt)&&he(()=>{vt&&We(vt,L,P,D),nt&&Mr(P,D,L,"updated")},N)},T=(D,P,L,N,W,$,j)=>{for(let V=0;V<P.length;V++){const K=D[V],Y=P[V],nt=K.el&&(K.type===Qt||!Ir(K,Y)||K.shapeFlag&70)?f(K.el):L;v(K,Y,nt,null,N,W,$,j,!0)}},B=(D,P,L,N,W,$,j)=>{if(L!==N){if(L!==zt)for(const V in L)!zi(V)&&!(V in N)&&o(D,V,L[V],null,j,P.children,W,$,Q);for(const V in N){if(zi(V))continue;const K=N[V],Y=L[V];K!==Y&&V!=="value"&&o(D,V,Y,K,j,P.children,W,$,Q)}"value"in N&&o(D,"value",L.value,N.value,j)}},k=(D,P,L,N,W,$,j,V,K)=>{const Y=P.el=D?D.el:a(""),nt=P.anchor=D?D.anchor:a("");let{patchFlag:ut,dynamicChildren:at,slotScopeIds:vt}=P;vt&&(V=V?V.concat(vt):vt),D==null?(i(Y,L,N),i(nt,L,N),S(P.children||[],L,nt,W,$,j,V,K)):ut>0&&ut&64&&at&&D.dynamicChildren?(T(D.dynamicChildren,at,L,W,$,j,V),(P.key!=null||W&&P===W.subTree)&&tf(D,P,!0)):z(D,P,L,nt,W,$,j,V,K)},E=(D,P,L,N,W,$,j,V,K)=>{P.slotScopeIds=V,D==null?P.shapeFlag&512?W.ctx.activate(P,L,N,j,K):R(P,L,N,W,$,j,K):A(D,P,K)},R=(D,P,L,N,W,$,j)=>{const V=D.component=lv(D,N,W);if(To(D)&&(V.ctx.renderer=xt),cv(V),V.asyncDep){if(W&&W.registerDep(V,G),!D.el){const K=V.subTree=Rt(Ae);m(null,K,P,L)}}else G(V,D,P,L,W,$,j)},A=(D,P,L)=>{const N=P.component=D.component;if(vp(D,P,L))if(N.asyncDep&&!N.asyncResolved){F(N,P,L);return}else N.next=P,up(N.update),N.effect.dirty=!0,N.update();else P.el=D.el,N.vnode=P},G=(D,P,L,N,W,$,j)=>{const V=()=>{if(D.isMounted){let{next:nt,bu:ut,u:at,parent:vt,vnode:yt}=D;{const He=ef(D);if(He){nt&&(nt.el=yt.el,F(D,nt,j)),He.asyncDep.then(()=>{D.isUnmounted||V()});return}}let Dt=nt,Bt;Dr(D,!1),nt?(nt.el=yt.el,F(D,nt,j)):nt=yt,ut&&qo(ut),(Bt=nt.props&&nt.props.onVnodeBeforeUpdate)&&We(Bt,vt,nt,yt),Dr(D,!0);const Vt=Zo(D),te=D.subTree;D.subTree=Vt,v(te,Vt,f(te.el),lt(te),D,W,$),nt.el=Vt.el,Dt===null&&gp(D,Vt.el),at&&he(at,W),(Bt=nt.props&&nt.props.onVnodeUpdated)&&he(()=>We(Bt,vt,nt,yt),W)}else{let nt;const{el:ut,props:at}=P,{bm:vt,m:yt,parent:Dt}=D,Bt=Kn(P);if(Dr(D,!1),vt&&qo(vt),!Bt&&(nt=at&&at.onVnodeBeforeMount)&&We(nt,Dt,P),Dr(D,!0),ut&&ft){const Vt=()=>{D.subTree=Zo(D),ft(ut,D.subTree,D,W,null)};Bt?P.type.__asyncLoader().then(()=>!D.isUnmounted&&Vt()):Vt()}else{const Vt=D.subTree=Zo(D);v(null,Vt,L,N,D,W,$),P.el=Vt.el}if(yt&&he(yt,W),!Bt&&(nt=at&&at.onVnodeMounted)){const Vt=P;he(()=>We(nt,Dt,Vt),W)}(P.shapeFlag&256||Dt&&Kn(Dt.vnode)&&Dt.vnode.shapeFlag&256)&&D.a&&he(D.a,W),D.isMounted=!0,P=L=N=null}},K=D.effect=new va(V,_e,()=>wa(Y),D.scope),Y=D.update=()=>{K.dirty&&K.run()};Y.id=D.uid,Dr(D,!0),Y()},F=(D,P,L)=>{P.component=D;const N=D.vnode.props;D.vnode=P,D.next=null,Yp(D,P.props,N,L),qp(D,P.children,L),Yr(),Pl(D),Xr()},z=(D,P,L,N,W,$,j,V,K=!1)=>{const Y=D&&D.children,nt=D?D.shapeFlag:0,ut=P.children,{patchFlag:at,shapeFlag:vt}=P;if(at>0){if(at&128){q(Y,ut,L,N,W,$,j,V,K);return}else if(at&256){U(Y,ut,L,N,W,$,j,V,K);return}}vt&8?(nt&16&&Q(Y,W,$),ut!==Y&&c(L,ut)):nt&16?vt&16?q(Y,ut,L,N,W,$,j,V,K):Q(Y,W,$,!0):(nt&8&&c(L,""),vt&16&&S(ut,L,N,W,$,j,V,K))},U=(D,P,L,N,W,$,j,V,K)=>{D=D||si,P=P||si;const Y=D.length,nt=P.length,ut=Math.min(Y,nt);let at;for(at=0;at<ut;at++){const vt=P[at]=K?fr(P[at]):Ve(P[at]);v(D[at],vt,L,null,W,$,j,V,K)}Y>nt?Q(D,W,$,!0,!1,ut):S(P,L,N,W,$,j,V,K,ut)},q=(D,P,L,N,W,$,j,V,K)=>{let Y=0;const nt=P.length;let ut=D.length-1,at=nt-1;for(;Y<=ut&&Y<=at;){const vt=D[Y],yt=P[Y]=K?fr(P[Y]):Ve(P[Y]);if(Ir(vt,yt))v(vt,yt,L,null,W,$,j,V,K);else break;Y++}for(;Y<=ut&&Y<=at;){const vt=D[ut],yt=P[at]=K?fr(P[at]):Ve(P[at]);if(Ir(vt,yt))v(vt,yt,L,null,W,$,j,V,K);else break;ut--,at--}if(Y>ut){if(Y<=at){const vt=at+1,yt=vt<nt?P[vt].el:N;for(;Y<=at;)v(null,P[Y]=K?fr(P[Y]):Ve(P[Y]),L,yt,W,$,j,V,K),Y++}}else if(Y>at)for(;Y<=ut;)et(D[Y],W,$,!0),Y++;else{const vt=Y,yt=Y,Dt=new Map;for(Y=yt;Y<=at;Y++){const oe=P[Y]=K?fr(P[Y]):Ve(P[Y]);oe.key!=null&&Dt.set(oe.key,Y)}let Bt,Vt=0;const te=at-yt+1;let He=!1,_n=0;const ir=new Array(te);for(Y=0;Y<te;Y++)ir[Y]=0;for(Y=vt;Y<=ut;Y++){const oe=D[Y];if(Vt>=te){et(oe,W,$,!0);continue}let Ce;if(oe.key!=null)Ce=Dt.get(oe.key);else for(Bt=yt;Bt<=at;Bt++)if(ir[Bt-yt]===0&&Ir(oe,P[Bt])){Ce=Bt;break}Ce===void 0?et(oe,W,$,!0):(ir[Ce-yt]=Y+1,Ce>=_n?_n=Ce:He=!0,v(oe,P[Ce],L,null,W,$,j,V,K),Vt++)}const Zr=He?Qp(ir):si;for(Bt=Zr.length-1,Y=te-1;Y>=0;Y--){const oe=yt+Y,Ce=P[oe],kn=oe+1<nt?P[oe+1].el:N;ir[Y]===0?v(null,Ce,L,kn,W,$,j,V,K):He&&(Bt<0||Y!==Zr[Bt]?H(Ce,L,kn,2):Bt--)}}},H=(D,P,L,N,W=null)=>{const{el:$,type:j,transition:V,children:K,shapeFlag:Y}=D;if(Y&6){H(D.component.subTree,P,L,N);return}if(Y&128){D.suspense.move(P,L,N);return}if(Y&64){j.move(D,P,L,xt);return}if(j===Qt){i($,P,L);for(let ut=0;ut<K.length;ut++)H(K[ut],P,L,N);i(D.anchor,P,L);return}if(j===Zn){x(D,P,L);return}if(N!==2&&Y&1&&V)if(N===0)V.beforeEnter($),i($,P,L),he(()=>V.enter($),W);else{const{leave:ut,delayLeave:at,afterLeave:vt}=V,yt=()=>i($,P,L),Dt=()=>{ut($,()=>{yt(),vt&&vt()})};at?at($,yt,Dt):Dt()}else i($,P,L)},et=(D,P,L,N=!1,W=!1)=>{const{type:$,props:j,ref:V,children:K,dynamicChildren:Y,shapeFlag:nt,patchFlag:ut,dirs:at}=D;if(V!=null&&Os(V,null,L,D,!0),nt&256){P.ctx.deactivate(D);return}const vt=nt&1&&at,yt=!Kn(D);let Dt;if(yt&&(Dt=j&&j.onVnodeBeforeUnmount)&&We(Dt,P,D),nt&6)st(D.component,L,N);else{if(nt&128){D.suspense.unmount(L,N);return}vt&&Mr(D,null,P,"beforeUnmount"),nt&64?D.type.remove(D,P,L,W,xt,N):Y&&($!==Qt||ut>0&&ut&64)?Q(Y,P,L,!1,!0):($===Qt&&ut&384||!W&&nt&16)&&Q(K,P,L),N&&ot(D)}(yt&&(Dt=j&&j.onVnodeUnmounted)||vt)&&he(()=>{Dt&&We(Dt,P,D),vt&&Mr(D,null,P,"unmounted")},L)},ot=D=>{const{type:P,el:L,anchor:N,transition:W}=D;if(P===Qt){it(L,N);return}if(P===Zn){C(D);return}const $=()=>{n(L),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(D.shapeFlag&1&&W&&!W.persisted){const{leave:j,delayLeave:V}=W,K=()=>j(L,$);V?V(D.el,$,K):K()}else $()},it=(D,P)=>{let L;for(;D!==P;)L=h(D),n(D),D=L;n(P)},st=(D,P,L)=>{const{bum:N,scope:W,update:$,subTree:j,um:V}=D;N&&qo(N),W.stop(),$&&($.active=!1,et(j,D,P,L)),V&&he(V,P),he(()=>{D.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},Q=(D,P,L,N=!1,W=!1,$=0)=>{for(let j=$;j<D.length;j++)et(D[j],P,L,N,W)},lt=D=>D.shapeFlag&6?lt(D.component.subTree):D.shapeFlag&128?D.suspense.next():h(D.anchor||D.el);let ht=!1;const gt=(D,P,L)=>{D==null?P._vnode&&et(P._vnode,null,null,!0):v(P._vnode||null,D,P,null,null,null,L),ht||(ht=!0,Pl(),Lc(),ht=!1),P._vnode=D},xt={p:v,um:et,m:H,r:ot,mt:R,mc:S,pc:z,pbc:T,n:lt,o:t};let rt,ft;return{render:gt,hydrate:rt,createApp:jp(gt,rt)}}function ts({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Dr({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function Jp(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function tf(t,e,r=!1){const i=t.children,n=e.children;if(mt(i)&&mt(n))for(let o=0;o<i.length;o++){const s=i[o];let a=n[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[o]=fr(n[o]),a.el=s.el),r||tf(s,a)),a.type===Bo&&(a.el=s.el)}}function Qp(t){const e=t.slice(),r=[0];let i,n,o,s,a;const l=t.length;for(i=0;i<l;i++){const u=t[i];if(u!==0){if(n=r[r.length-1],t[n]<u){e[i]=n,r.push(i);continue}for(o=0,s=r.length-1;o<s;)a=o+s>>1,t[r[a]]<u?o=a+1:s=a;u<t[r[o]]&&(o>0&&(e[i]=r[o-1]),r[o]=i)}}for(o=r.length,s=r[o-1];o-- >0;)r[o]=s,s=e[s];return r}function ef(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ef(e)}const tv=t=>t.__isTeleport,Qt=Symbol.for("v-fgt"),Bo=Symbol.for("v-txt"),Ae=Symbol.for("v-cmt"),Zn=Symbol.for("v-stc"),Fi=[];let Re=null;function St(t=!1){Fi.push(Re=t?null:[])}function ev(){Fi.pop(),Re=Fi[Fi.length-1]||null}let Ki=1;function Hl(t){Ki+=t}function rf(t){return t.dynamicChildren=Ki>0?Re||si:null,ev(),Ki>0&&Re&&Re.push(t),t}function _t(t,e,r,i,n,o){return rf(Z(t,e,r,i,n,o,!0))}function nf(t,e,r,i,n){return rf(Rt(t,e,r,i,n,!0))}function Rs(t){return t?t.__v_isVNode===!0:!1}function Ir(t,e){return t.type===e.type&&t.key===e.key}const Io="__vInternal",of=({key:t})=>t??null,Jn=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Ut(t)||ge(t)||wt(t)?{i:Oe,r:t,k:e,f:!!r}:t:null);function Z(t,e=null,r=null,i=0,n=null,o=t===Qt?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&of(e),ref:e&&Jn(e),scopeId:Do,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Oe};return a?(Da(l,r),o&128&&t.normalize(l)):r&&(l.shapeFlag|=Ut(r)?8:16),Ki>0&&!s&&Re&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Re.push(l),l}const Rt=rv;function rv(t,e=null,r=null,i=0,n=null,o=!1){if((!t||t===mp)&&(t=Ae),Rs(t)){const a=Cr(t,e,!0);return r&&Da(a,r),Ki>0&&!o&&Re&&(a.shapeFlag&6?Re[Re.indexOf(t)]=a:Re.push(a)),a.patchFlag|=-2,a}if(pv(t)&&(t=t.__vccOpts),e){e=iv(e);let{class:a,style:l}=e;a&&!Ut(a)&&(e.class=Yt(a)),Lt(l)&&(Dc(l)&&!mt(l)&&(l=Jt({},l)),e.style=sn(l))}const s=Ut(t)?1:yp(t)?128:tv(t)?64:Lt(t)?4:wt(t)?2:0;return Z(t,e,r,i,n,s,o,!0)}function iv(t){return t?Dc(t)||Io in t?Jt({},t):t:null}function Cr(t,e,r=!1){const{props:i,ref:n,patchFlag:o,children:s}=t,a=e?ov(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&of(a),ref:e&&e.ref?r&&n?mt(n)?n.concat(Jn(e)):[n,Jn(e)]:Jn(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Qt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Cr(t.ssContent),ssFallback:t.ssFallback&&Cr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function nv(t=" ",e=0){return Rt(Bo,null,t,e)}function sf(t,e){const r=Rt(Zn,null,t);return r.staticCount=e,r}function Le(t="",e=!1){return e?(St(),nf(Ae,null,t)):Rt(Ae,null,t)}function Ve(t){return t==null||typeof t=="boolean"?Rt(Ae):mt(t)?Rt(Qt,null,t.slice()):typeof t=="object"?fr(t):Rt(Bo,null,String(t))}function fr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Cr(t)}function Da(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(mt(e))r=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),Da(t,n()),n._c&&(n._d=!0));return}else{r=32;const n=e._;!n&&!(Io in e)?e._ctx=Oe:n===3&&Oe&&(Oe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else wt(e)?(e={default:e,_ctx:Oe},r=32):(e=String(e),i&64?(r=16,e=[nv(e)]):r=8);t.children=e,t.shapeFlag|=r}function ov(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Yt([e.class,i.class]));else if(n==="style")e.style=sn([e.style,i.style]);else if(Co(n)){const o=e[n],s=i[n];s&&o!==s&&!(mt(o)&&o.includes(s))&&(e[n]=o?[].concat(o,s):s)}else n!==""&&(e[n]=i[n])}return e}function We(t,e,r,i=null){ke(t,e,7,[r,i])}const sv=Uc();let av=0;function lv(t,e,r){const i=t.type,n=(e?e.appContext:t.appContext)||sv,o={uid:av++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Rd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Kc(i,n),emitsOptions:Nc(i,n),emit:null,emitted:null,propsDefaults:zt,inheritAttrs:i.inheritAttrs,ctx:zt,data:zt,props:zt,attrs:zt,slots:zt,refs:zt,setupState:zt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=hp.bind(null,o),t.ce&&t.ce(o),o}let re=null;const uv=()=>re||Oe;let so,As;{const t=dc(),e=(r,i)=>{let n;return(n=t[r])||(n=t[r]=[]),n.push(i),o=>{n.length>1?n.forEach(s=>s(o)):n[0](o)}};so=e("__VUE_INSTANCE_SETTERS__",r=>re=r),As=e("__VUE_SSR_SETTERS__",r=>Oo=r)}const ln=t=>{const e=re;return so(t),t.scope.on(),()=>{t.scope.off(),so(e)}},Wl=()=>{re&&re.scope.off(),so(null)};function af(t){return t.vnode.shapeFlag&4}let Oo=!1;function cv(t,e=!1){e&&As(e);const{props:r,children:i}=t.vnode,n=af(t);$p(t,r,n,e),Up(t,i);const o=n?fv(t,e):void 0;return e&&As(!1),o}function fv(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=Tc(new Proxy(t.ctx,zp));const{setup:i}=r;if(i){const n=t.setupContext=i.length>1?dv(t):null,o=ln(t);Yr();const s=mr(i,t,0,[t.props,n]);if(Xr(),o(),uc(s)){if(s.then(Wl,Wl),e)return s.then(a=>{Vl(t,a,e)}).catch(a=>{Eo(a,t,0)});t.asyncDep=s}else Vl(t,s,e)}else lf(t,e)}function Vl(t,e,r){wt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Lt(e)&&(t.setupState=Ic(e)),lf(t,r)}let jl;function lf(t,e,r){const i=t.type;if(!t.render){if(!e&&jl&&!i.render){const n=i.template||Ea(t).template;if(n){const{isCustomElement:o,compilerOptions:s}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,u=Jt(Jt({isCustomElement:o,delimiters:a},s),l);i.render=jl(n,u)}}t.render=i.render||_e}{const n=ln(t);Yr();try{Np(t)}finally{Xr(),n()}}}function hv(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return ve(t,"get","$attrs"),e[r]}}))}function dv(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return hv(t)},slots:t.slots,emit:t.emit,expose:e}}function Ta(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Ic(Tc(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Ni)return Ni[r](t)},has(e,r){return r in e||r in Ni}}))}function pv(t){return wt(t)&&"__vccOpts"in t}const Pa=(t,e)=>ip(t,e,Oo);function vv(t,e,r){const i=arguments.length;return i===2?Lt(e)&&!mt(e)?Rs(e)?Rt(t,null,[e]):Rt(t,e):Rt(t,null,e):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&Rs(r)&&(r=[r]),Rt(t,e,r))}const gv="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const mv="http://www.w3.org/2000/svg",yv="http://www.w3.org/1998/Math/MathML",hr=typeof document<"u"?document:null,$l=hr&&hr.createElement("template"),bv={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const n=e==="svg"?hr.createElementNS(mv,t):e==="mathml"?hr.createElementNS(yv,t):hr.createElement(t,r?{is:r}:void 0);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>hr.createTextNode(t),createComment:t=>hr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>hr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,i,n,o){const s=r?r.previousSibling:e.lastChild;if(n&&(n===o||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),r),!(n===o||!(n=n.nextSibling)););else{$l.innerHTML=i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t;const a=$l.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,r)}return[s?s.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},or="transition",Pi="animation",Zi=Symbol("_vtc"),yr=(t,{slots:e})=>vv(kp,xv(t),e);yr.displayName="Transition";const uf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};yr.props=Jt({},Hc,uf);const Tr=(t,e=[])=>{mt(t)?t.forEach(r=>r(...e)):t&&t(...e)},Yl=t=>t?mt(t)?t.some(e=>e.length>1):t.length>1:!1;function xv(t){const e={};for(const k in t)k in uf||(e[k]=t[k]);if(t.css===!1)return e;const{name:r="v",type:i,duration:n,enterFromClass:o=`${r}-enter-from`,enterActiveClass:s=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=o,appearActiveClass:u=s,appearToClass:c=a,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:d=`${r}-leave-to`}=t,p=Cv(n),v=p&&p[0],g=p&&p[1],{onBeforeEnter:m,onEnter:y,onEnterCancelled:x,onLeave:C,onLeaveCancelled:w,onBeforeAppear:b=m,onAppear:_=y,onAppearCancelled:S=x}=e,M=(k,E,R)=>{Pr(k,E?c:a),Pr(k,E?u:s),R&&R()},T=(k,E)=>{k._isLeaving=!1,Pr(k,f),Pr(k,d),Pr(k,h),E&&E()},B=k=>(E,R)=>{const A=k?_:y,G=()=>M(E,k,R);Tr(A,[E,G]),Xl(()=>{Pr(E,k?l:o),sr(E,k?c:a),Yl(A)||Ul(E,i,v,G)})};return Jt(e,{onBeforeEnter(k){Tr(m,[k]),sr(k,o),sr(k,s)},onBeforeAppear(k){Tr(b,[k]),sr(k,l),sr(k,u)},onEnter:B(!1),onAppear:B(!0),onLeave(k,E){k._isLeaving=!0;const R=()=>T(k,E);sr(k,f),_v(),sr(k,h),Xl(()=>{k._isLeaving&&(Pr(k,f),sr(k,d),Yl(C)||Ul(k,i,g,R))}),Tr(C,[k,R])},onEnterCancelled(k){M(k,!1),Tr(x,[k])},onAppearCancelled(k){M(k,!0),Tr(S,[k])},onLeaveCancelled(k){T(k),Tr(w,[k])}})}function Cv(t){if(t==null)return null;if(Lt(t))return[es(t.enter),es(t.leave)];{const e=es(t);return[e,e]}}function es(t){return Md(t)}function sr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[Zi]||(t[Zi]=new Set)).add(e)}function Pr(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const r=t[Zi];r&&(r.delete(e),r.size||(t[Zi]=void 0))}function Xl(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Sv=0;function Ul(t,e,r,i){const n=t._endId=++Sv,o=()=>{n===t._endId&&i()};if(r)return setTimeout(o,r);const{type:s,timeout:a,propCount:l}=wv(t,e);if(!s)return i();const u=s+"end";let c=0;const f=()=>{t.removeEventListener(u,h),o()},h=d=>{d.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},a+1),t.addEventListener(u,h)}function wv(t,e){const r=window.getComputedStyle(t),i=p=>(r[p]||"").split(", "),n=i(`${or}Delay`),o=i(`${or}Duration`),s=ql(n,o),a=i(`${Pi}Delay`),l=i(`${Pi}Duration`),u=ql(a,l);let c=null,f=0,h=0;e===or?s>0&&(c=or,f=s,h=o.length):e===Pi?u>0&&(c=Pi,f=u,h=l.length):(f=Math.max(s,u),c=f>0?s>u?or:Pi:null,h=c?c===or?o.length:l.length:0);const d=c===or&&/\b(transform|all)(,|$)/.test(i(`${or}Property`).toString());return{type:c,timeout:f,propCount:h,hasTransform:d}}function ql(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,i)=>Kl(r)+Kl(t[i])))}function Kl(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function _v(){return document.body.offsetHeight}function kv(t,e,r){const i=t[Zi];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Zl=Symbol("_vod"),Ev=Symbol("_vsh"),Mv=Symbol(""),Dv=/(^|;)\s*display\s*:/;function Tv(t,e,r){const i=t.style,n=Ut(r);let o=!1;if(r&&!n){if(e)if(Ut(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();r[a]==null&&Qn(i,a,"")}else for(const s in e)r[s]==null&&Qn(i,s,"");for(const s in r)s==="display"&&(o=!0),Qn(i,s,r[s])}else if(n){if(e!==r){const s=i[Mv];s&&(r+=";"+s),i.cssText=r,o=Dv.test(r)}}else e&&t.removeAttribute("style");Zl in t&&(t[Zl]=o?i.display:"",t[Ev]&&(i.display="none"))}const Jl=/\s*!important$/;function Qn(t,e,r){if(mt(r))r.forEach(i=>Qn(t,e,i));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=Pv(t,e);Jl.test(r)?t.setProperty(Si(i),r.replace(Jl,""),"important"):t[i]=r}}const Ql=["Webkit","Moz","ms"],rs={};function Pv(t,e){const r=rs[e];if(r)return r;let i=hi(e);if(i!=="filter"&&i in t)return rs[e]=i;i=hc(i);for(let n=0;n<Ql.length;n++){const o=Ql[n]+i;if(o in t)return rs[e]=o}return e}const tu="http://www.w3.org/1999/xlink";function Bv(t,e,r,i,n){if(i&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(tu,e.slice(6,e.length)):t.setAttributeNS(tu,e,r);else{const o=Od(e);r==null||o&&!pc(r)?t.removeAttribute(e):t.setAttribute(e,o?"":r)}}function Iv(t,e,r,i,n,o,s){if(e==="innerHTML"||e==="textContent"){i&&s(i,n,o),t[e]=r??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const u=a==="OPTION"?t.getAttribute("value")||"":t.value,c=r??"";(u!==c||!("_value"in t))&&(t.value=c),r==null&&t.removeAttribute(e),t._value=r;return}let l=!1;if(r===""||r==null){const u=typeof t[e];u==="boolean"?r=pc(r):r==null&&u==="string"?(r="",l=!0):u==="number"&&(r=0,l=!0)}try{t[e]=r}catch{}l&&t.removeAttribute(e)}function Ov(t,e,r,i){t.addEventListener(e,r,i)}function Rv(t,e,r,i){t.removeEventListener(e,r,i)}const eu=Symbol("_vei");function Av(t,e,r,i,n=null){const o=t[eu]||(t[eu]={}),s=o[e];if(i&&s)s.value=i;else{const[a,l]=Lv(e);if(i){const u=o[e]=Gv(i,n);Ov(t,a,u,l)}else s&&(Rv(t,a,s,l),o[e]=void 0)}}const ru=/(?:Once|Passive|Capture)$/;function Lv(t){let e;if(ru.test(t)){e={};let i;for(;i=t.match(ru);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Si(t.slice(2)),e]}let is=0;const zv=Promise.resolve(),Nv=()=>is||(zv.then(()=>is=0),is=Date.now());function Gv(t,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;ke(Fv(i,r.value),e,5,[i])};return r.value=t,r.attached=Nv(),r}function Fv(t,e){if(mt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const iu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Hv=(t,e,r,i,n,o,s,a,l)=>{const u=n==="svg";e==="class"?kv(t,i,u):e==="style"?Tv(t,r,i):Co(e)?ha(e)||Av(t,e,r,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Wv(t,e,i,u))?Iv(t,e,i,o,s,a,l):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Bv(t,e,i,u))};function Wv(t,e,r,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&iu(e)&&wt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return iu(e)&&Ut(r)?!1:e in t}const Vv=Jt({patchProp:Hv},bv);let nu;function jv(){return nu||(nu=Kp(Vv))}const $v=(...t)=>{const e=jv().createApp(...t),{mount:r}=e;return e.mount=i=>{const n=Xv(i);if(!n)return;const o=e._component;!wt(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.innerHTML="";const s=r(n,!1,Yv(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),s},e};function Yv(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Xv(t){return Ut(t)?document.querySelector(t):t}const Uv="/StickerEditor/assets/1-DOU5pnUw.jpg",qv=Object.freeze(Object.defineProperty({__proto__:null,default:Uv},Symbol.toStringTag,{value:"Module"})),Kv="/StickerEditor/assets/10-YMO4_2Fq.png",Zv=Object.freeze(Object.defineProperty({__proto__:null,default:Kv},Symbol.toStringTag,{value:"Module"})),Jv="/StickerEditor/assets/2-BOWi-BKK.png",Qv=Object.freeze(Object.defineProperty({__proto__:null,default:Jv},Symbol.toStringTag,{value:"Module"})),tg="/StickerEditor/assets/3-BGbuhfVT.jpg",eg=Object.freeze(Object.defineProperty({__proto__:null,default:tg},Symbol.toStringTag,{value:"Module"})),rg="/StickerEditor/assets/4-DDp8jPL9.png",ig=Object.freeze(Object.defineProperty({__proto__:null,default:rg},Symbol.toStringTag,{value:"Module"})),ng="/StickerEditor/assets/5-CcsAHtZO.png",og=Object.freeze(Object.defineProperty({__proto__:null,default:ng},Symbol.toStringTag,{value:"Module"})),sg="/StickerEditor/assets/6-f7Ma6H0z.png",ag=Object.freeze(Object.defineProperty({__proto__:null,default:sg},Symbol.toStringTag,{value:"Module"})),lg="/StickerEditor/assets/7-DvOdD5OY.png",ug=Object.freeze(Object.defineProperty({__proto__:null,default:lg},Symbol.toStringTag,{value:"Module"})),cg="/StickerEditor/assets/8-Bh2lHIfN.png",fg=Object.freeze(Object.defineProperty({__proto__:null,default:cg},Symbol.toStringTag,{value:"Module"})),hg="/StickerEditor/assets/9-CHEbLBCF.png",dg=Object.freeze(Object.defineProperty({__proto__:null,default:hg},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cf=function(t,e){return(cf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])})(t,e)};function Nt(t,e){function r(){this.constructor=t}cf(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function ou(t,e,r,i){return new(r||(r=Promise))(function(n,o){function s(u){try{l(i.next(u))}catch(c){o(c)}}function a(u){try{l(i.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?n(u.value):(c=u.value,c instanceof r?c:new r(function(f){f(c)})).then(s,a)}l((i=i.apply(t,[])).next())})}function su(t,e){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&c[0]?i.return:c[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,c[1])).done)return n;switch(i=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,i=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(n=s.trys,!((n=n.length>0&&n[n.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){s.label=c[1];break}if(c[0]===6&&s.label<n[1]){s.label=n[1],n=c;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(c);break}n[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(f){c=[6,f],i=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function Ji(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}var J=function(){function t(){}return t.createDefs=function(){return document.createElementNS("http://www.w3.org/2000/svg","defs")},t.setAttributes=function(e,r){for(var i=0,n=r;i<n.length;i++){var o=n[i],s=o[0],a=o[1];e.setAttribute(s,a)}},t.createRect=function(e,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.setAttribute("width",e.toString()),n.setAttribute("height",r.toString()),i&&t.setAttributes(n,i),n},t.createLine=function(e,r,i,n,o){var s=document.createElementNS("http://www.w3.org/2000/svg","line");return s.setAttribute("x1",e.toString()),s.setAttribute("y1",r.toString()),s.setAttribute("x2",i.toString()),s.setAttribute("y2",n.toString()),o&&t.setAttributes(s,o),s},t.createPolygon=function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","polygon");return i.setAttribute("points",e),r&&t.setAttributes(i,r),i},t.createCircle=function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",(e/2).toString()),i.setAttribute("cy",(e/2).toString()),i.setAttribute("r",e.toString()),r&&t.setAttributes(i,r),i},t.createEllipse=function(e,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return n.setAttribute("cx",(e/2).toString()),n.setAttribute("cy",(r/2).toString()),n.setAttribute("rx",(e/2).toString()),n.setAttribute("ry",(r/2).toString()),i&&t.setAttributes(n,i),n},t.createGroup=function(e){var r=document.createElementNS("http://www.w3.org/2000/svg","g");return e&&t.setAttributes(r,e),r},t.createTransform=function(){return document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGTransform()},t.createMarker=function(e,r,i,n,o,s,a){var l=document.createElementNS("http://www.w3.org/2000/svg","marker");return t.setAttributes(l,[["id",e],["orient",r],["markerWidth",i.toString()],["markerHeight",n.toString()],["refX",o.toString()],["refY",s.toString()]]),l.appendChild(a),l},t.createText=function(e){var r=document.createElementNS("http://www.w3.org/2000/svg","text");return r.setAttribute("x","0"),r.setAttribute("y","0"),e&&t.setAttributes(r,e),r},t.createTSpan=function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","tspan");return i.textContent=e,r&&t.setAttributes(i,r),i},t.createImage=function(e){var r=document.createElementNS("http://www.w3.org/2000/svg","image");return e&&t.setAttributes(r,e),r},t.createPoint=function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGPoint();return i.x=e,i.y=r,i},t.createPath=function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",e),r&&t.setAttributes(i,r),i},t}(),au=function(){function t(){}return t.addKey=function(e){t.key=e},Object.defineProperty(t,"isLicensed",{get:function(){return!!t.key&&new RegExp(/^MJS2-[A-Z][0-9]{3}-[A-Z][0-9]{3}-[0-9]{4}$/,"i").test(t.key)},enumerable:!1,configurable:!0}),t}(),pg=function(){function t(){this.naturalSize=!1,this.imageType="image/png",this.markersOnly=!1}return t.prototype.rasterize=function(e,r,i){var n=this;return new Promise(function(o){var s=i!==void 0?i:document.createElement("canvas");e===null&&(n.markersOnly=!0,n.naturalSize=!1);var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("width",r.width.baseVal.valueAsString),a.setAttribute("height",r.height.baseVal.valueAsString),a.setAttribute("viewBox","0 0 "+r.viewBox.baseVal.width.toString()+" "+r.viewBox.baseVal.height.toString()),a.innerHTML=r.innerHTML,n.naturalSize===!0?(a.width.baseVal.value=e.naturalWidth,a.height.baseVal.value=e.naturalHeight):n.width!==void 0&&n.height!==void 0&&(a.width.baseVal.value=n.width,a.height.baseVal.value=n.height),s.width=a.width.baseVal.value,s.height=a.height.baseVal.value;var l=a.outerHTML,u=s.getContext("2d");n.markersOnly!==!0&&u.drawImage(e,0,0,s.width,s.height);var c=window.URL,f=new Image(s.width,s.height);f.setAttribute("crossOrigin","anonymous");var h=new Blob([l],{type:"image/svg+xml"}),d=c.createObjectURL(h);f.onload=function(){u.drawImage(f,0,0),c.revokeObjectURL(d);var p=s.toDataURL(n.imageType,n.imageQuality);o(p)},f.src=d})},t}(),lu=function(){},vg=function(){function t(e){this._classNamePrefixBase="__markerjs2_",this.classes=[],this.rules=[],this.settings=this.defaultSettings,this._classNamePrefix=this._classNamePrefixBase+"_"+e+"_"}return Object.defineProperty(t.prototype,"classNamePrefixBase",{get:function(){return this._classNamePrefixBase},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classNamePrefix",{get:function(){return this._classNamePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultSettings",{get:function(){return{canvasBackgroundColor:"#ffffff",toolbarBackgroundColor:"#111111",toolbarBackgroundHoverColor:"#333333",toolbarColor:"#eeeeee",toolbarHeight:40,toolboxColor:"#eeeeee",toolboxAccentColor:"#3080c3",undoButtonVisible:!0,redoButtonVisible:!1,zoomButtonVisible:!1,zoomOutButtonVisible:!1,clearButtonVisible:!1,resultButtonBlockVisible:!0,logoPosition:"left"}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fadeInAnimationClassName",{get:function(){return this.classNamePrefix+"fade_in"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fadeOutAnimationClassName",{get:function(){return this.classNamePrefix+"fade_out"},enumerable:!1,configurable:!0}),t.prototype.addClass=function(e){return this.styleSheet===void 0&&this.addStyleSheet(),e.name=""+this.classNamePrefix+e.localName,this.classes.push(e),this.styleSheet.sheet.insertRule("."+e.name+" {"+e.style+"}",this.styleSheet.sheet.cssRules.length),e},t.prototype.addRule=function(e){this.styleSheet===void 0&&this.addStyleSheet(),this.rules.push(e),this.styleSheet.sheet.insertRule(e.selector+" {"+e.style+"}",this.styleSheet.sheet.cssRules.length)},t.prototype.addStyleSheet=function(){var e;this.styleSheet=document.createElement("style"),((e=this.styleSheetRoot)!==null&&e!==void 0?e:document.head).appendChild(this.styleSheet),this.addRule(new Ie("."+this.classNamePrefix+" h3","font-family: sans-serif")),this.addRule(new Ie("@keyframes "+this.classNamePrefix+"_fade_in_animation_frames",`
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
    `)),this.addRule(new Ie("@keyframes "+this.classNamePrefix+"_fade_out_animation_frames",`
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
    `)),this.addClass(new qt("fade_in",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_in_animation_frames;
    `)),this.addClass(new qt("fade_out",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_out_animation_frames;
    `))},t.prototype.removeStyleSheet=function(){var e;this.styleSheet&&(((e=this.styleSheetRoot)!==null&&e!==void 0?e:document.head).removeChild(this.styleSheet),this.styleSheet=void 0)},t}(),Ie=function(t,e){this.selector=t,this.style=e},qt=function(t,e){this.localName=t,this.style=e},gg=function(){function t(e,r,i,n,o){this.buttons=[],this.markerButtons=[],this.buttonClickListeners=[],this.markerjsContainer=e,this.displayMode=r,this.markerItems=i,this.uiStyleSettings=n,this.styles=o,this.addStyles(),this.adjustLayout=this.adjustLayout.bind(this),this.overflowButtonClicked=this.overflowButtonClicked.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this)}return t.prototype.show=function(e){var r=this;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=e,this.uiContainer.className=this.toolbarStyleClass.name+" "+this.styles.fadeInAnimationClassName+" "+(this.uiStyleSettings.toolbarStyleColorsClassName?this.uiStyleSettings.toolbarStyleColorsClassName:this.toolbarStyleColorsClass.name);var i=document.createElement("div");i.className=this.toolbarBlockStyleClass.name,i.style.whiteSpace="nowrap",this.uiContainer.appendChild(i),this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M10.07 14.27a.997.997 0 011.33.48l2.3 4.99 1.8-.85-2.31-4.98c-.24-.5-.02-1.1.48-1.33l.28-.08 2.3-.45L8 5.12V15.9l1.82-1.47.25-.16m3.57 7.7a.99.99 0 01-1.33-.47l-2.18-4.74-2.51 2.02c-.17.14-.38.22-.62.22a1 1 0 01-1-1V3a1 1 0 011-1c.24 0 .47.09.64.23l.01-.01 11.49 9.64a1.001 1.001 0 01-.44 1.75l-3.16.62 2.2 4.73c.26.5.02 1.09-.48 1.32l-3.62 1.69z"/></svg>',"select","Select mode"),this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M9 3v1H4v2h1v13a2 2 0 002 2h10a2 2 0 002-2V6h1V4h-5V3H9M7 6h10v13H7V6m2 2v9h2V8H9m4 0v9h2V8h-2z"/></svg>',"delete","Delete marker"),this.uiStyleSettings.clearButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M19.36 2.72l1.42 1.42-5.72 5.71c1.07 1.54 1.22 3.39.32 4.59L9.06 8.12c1.2-.9 3.05-.75 4.59.32l5.71-5.72M5.93 17.57c-2.01-2.01-3.24-4.41-3.58-6.65l4.88-2.09 7.44 7.44-2.09 4.88c-2.24-.34-4.64-1.57-6.65-3.58z"/></svg>',"clear","Delete all markers"),this.uiStyleSettings.undoButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M12.5 8c-2.65 0-5.05 1-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>',"undo","Undo"),this.uiStyleSettings.redoButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 017.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/></svg>',"redo","Redo"),this.uiStyleSettings.zoomButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M15.5 14l5 5-1.5 1.5-5-5v-.79l-.27-.28A6.471 6.471 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3 6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.57 4.23l.28.27h.79m-6 0C12 14 14 12 14 9.5S12 5 9.5 5 5 7 5 9.5 7 14 9.5 14m2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"/></svg>',"zoom","Zoom in"),this.uiStyleSettings.zoomButtonVisible&&this.uiStyleSettings.zoomOutButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 009.5 3 6.5 6.5 0 003 9.5 6.5 6.5 0 009.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.5-1.5-5-5m-6 0C7 14 5 12 5 9.5S7 5 9.5 5 14 7 14 9.5 12 14 9.5 14M7 9h5v1H7V9z"/></svg>',"zoom-out","Zoom out"),this.uiStyleSettings.notesButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M18.13 12l1.26-1.26c.44-.44 1-.68 1.61-.74V9l-6-6H5c-1.11 0-2 .89-2 2v14a2 2 0 002 2h6v-1.87l.13-.13H5V5h7v7h6.13M14 4.5l5.5 5.5H14V4.5m5.13 9.33l2.04 2.04L15.04 22H13v-2.04l6.13-6.13m3.72.36l-.98.98-2.04-2.04.98-.98c.19-.2.52-.2.72 0l1.32 1.32c.2.2.2.53 0 .72z"/></svg>',"notes","Notes"),this.markerButtonBlock=document.createElement("div"),this.markerButtonBlock.className=this.toolbarBlockStyleClass.name,this.markerButtonBlock.style.flexGrow="2",this.markerButtonBlock.style.textAlign="center",this.uiContainer.appendChild(this.markerButtonBlock),this.markerButtonOverflowBlock=document.createElement("div"),this.markerButtonOverflowBlock.className=this.toolbarOverflowBlockStyleClass.name+" "+(this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName?this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName:this.toolbarOverflowBlockStyleColorsClass.name),this.markerButtonOverflowBlock.style.display="none",this.uiContainer.appendChild(this.markerButtonOverflowBlock),this.markerItems&&(this.markerItems.forEach(function(o){var s=document.createElement("div");s.className=""+r.toolbarButtonStyleClass.name,s.setAttribute("data-type-name",o.typeName),s.setAttribute("aria-label",o.title),s.setAttribute("title",o.title),s.innerHTML=o.icon,s.addEventListener("click",function(){r.markerToolbarButtonClicked(s,o)}),r.buttons.push(s),r.markerButtons.push(s)}),this.overflowButton=document.createElement("div"),this.overflowButton.className=this.toolbarButtonStyleClass.name+" "+(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name),this.overflowButton.innerHTML='<svg viewBox="0 0 24 24"><path d="M12 16a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2z"/></svg>',this.overflowButton.addEventListener("click",this.overflowButtonClicked),this.markerButtonBlock.appendChild(this.overflowButton));var n=document.createElement("div");n.className=this.toolbarBlockStyleClass.name,n.style.whiteSpace="nowrap",n.style.display=this.uiStyleSettings.resultButtonBlockVisible!==!1?"":"none",this.uiContainer.appendChild(n),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M9 20.42l-6.21-6.21 2.83-2.83L9 14.77l9.88-9.89 2.83 2.83L9 20.42z"/></svg>',"render","Save and close"),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M20 6.91L17.09 4 12 9.09 6.91 4 4 6.91 9.09 12 4 17.09 6.91 20 12 14.91 17.09 20 20 17.09 14.91 12 20 6.91z"/></svg>',"close","Close"),this.markerjsContainer.appendChild(this.uiContainer),this.setSelectMode(),this.setCurrentMarker(),this.adjustLayout()},t.prototype.addButtonClickListener=function(e){this.buttonClickListeners.push(e)},t.prototype.removeButtonClickListener=function(e){this.buttonClickListeners.indexOf(e)>-1&&this.buttonClickListeners.splice(this.buttonClickListeners.indexOf(e),1)},t.prototype.setSelectMode=function(){this.resetButtonStyles(),this.setActiveButton(this.buttons[0])},t.prototype.adjustLayout=function(){if(this.markerButtons&&this.markerButtons.length>0){var e=Math.floor(this.markerButtonBlock.clientWidth/this.uiStyleSettings.toolbarHeight)-1;this.markerButtonBlock.innerHTML="",this.markerButtonOverflowBlock.innerHTML="";for(var r=0;r<this.markerButtons.length;r++)r<e||r===e&&this.markerButtons.length-1===e?this.markerButtonBlock.appendChild(this.markerButtons[r]):(r===e&&this.markerButtonBlock.appendChild(this.overflowButton),this.markerButtonOverflowBlock.appendChild(this.markerButtons[r]))}},t.prototype.overflowButtonClicked=function(){this.markerButtonOverflowBlock.style.display!=="none"?(this.markerButtonOverflowBlock.className=this.markerButtonOverflowBlock.className.replace(this.styles.fadeInAnimationClassName,""),this.markerButtonOverflowBlock.style.display="none"):(this.markerButtonOverflowBlock.className+=" "+this.styles.fadeInAnimationClassName,this.markerButtonOverflowBlock.style.top=this.uiContainer.offsetTop+this.overflowButton.offsetHeight+"px",this.markerButtonOverflowBlock.style.right=this.uiContainer.offsetWidth-this.overflowButton.offsetLeft-this.overflowButton.offsetWidth+2*this.uiContainer.offsetLeft+"px",this.markerButtonOverflowBlock.style.display="inline-block")},t.prototype.resetButtonStyles=function(){var e=this;this.buttons.forEach(function(r){r.className=r.className.replace(e.uiStyleSettings.toolbarButtonStyleColorsClassName?e.uiStyleSettings.toolbarButtonStyleColorsClassName:e.toolbarButtonStyleColorsClass.name,"").trim(),r.className=r.className.replace(e.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?e.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:e.toolbarActiveButtonStyleColorsClass.name,"").trim(),r.className+=" "+(e.uiStyleSettings.toolbarButtonStyleColorsClassName?e.uiStyleSettings.toolbarButtonStyleColorsClassName:e.toolbarButtonStyleColorsClass.name)})},t.prototype.addActionButton=function(e,r,i,n){var o=this,s=document.createElement("div");switch(s.className=""+this.toolbarButtonStyleClass.name,s.innerHTML=r,s.setAttribute("role","button"),s.setAttribute("data-action",i),s.title=n,s.setAttribute("aria-label",n),s.addEventListener("click",function(){o.actionToolbarButtonClicked(s,i)}),i){case"select":s.style.fill=this.uiStyleSettings.selectButtonColor;break;case"delete":case"clear":s.style.fill=this.uiStyleSettings.deleteButtonColor;break;case"undo":case"redo":s.style.fill=this.uiStyleSettings.selectButtonColor;break;case"render":s.style.fill=this.uiStyleSettings.okButtonColor;break;case"close":s.style.fill=this.uiStyleSettings.closeButtonColor}e.appendChild(s),this.buttons.push(s)},t.prototype.addStyles=function(){this.toolbarStyleClass=this.styles.addClass(new qt("toolbar",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: row;
      justify-content: space-between;      
      height: `+this.uiStyleSettings.toolbarHeight+`px;
      box-sizing: content-box;
      `+(this.displayMode==="inline"?"border-top-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-top-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolbarStyleColorsClass=this.styles.addClass(new qt("toolbar_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      box-shadow: 0px 3px rgba(33, 33, 33, 0.1);
    `)),this.toolbarBlockStyleClass=this.styles.addClass(new qt("toolbar-block",`
        display: inline-block;
        box-sizing: content-box;
    `)),this.toolbarOverflowBlockStyleClass=this.styles.addClass(new qt("toolbar-overflow-block",`
        position: absolute;
        top: `+this.uiStyleSettings.toolbarHeight+`px;
        max-width: `+2*this.uiStyleSettings.toolbarHeight+`px;
        z-index: 10;
        box-sizing: content-box;
      `)),this.toolbarOverflowBlockStyleColorsClass=this.styles.addClass(new qt("toolbar-overflow-block_colors",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      `));var e=this.uiStyleSettings.toolbarHeight/4;this.toolbarButtonStyleClass=this.styles.addClass(new qt("toolbar_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*e)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*e)+`px;
      padding: `+e+`px;
      box-sizing: content-box;
    `)),this.toolbarButtonStyleColorsClass=this.styles.addClass(new qt("toolbar_button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolbarActiveButtonStyleColorsClass=this.styles.addClass(new qt("toolbar_active_button",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new Ie("."+this.toolbarButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new Ie("."+this.toolbarButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `))},t.prototype.markerToolbarButtonClicked=function(e,r){this.setActiveButton(e),this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(i){return i("marker",r)}),this.markerButtonOverflowBlock.style.display="none"},t.prototype.actionToolbarButtonClicked=function(e,r){this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(i){return i("action",r)}),this.markerButtonOverflowBlock.style.display="none",this.setActiveButton(this.buttons[0])},t.prototype.setActiveButton=function(e){this.resetButtonStyles(),e.className=e.className.replace(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name,"").trim(),e.className+=" "+(this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:this.toolbarActiveButtonStyleColorsClass.name)},t.prototype.setActiveMarkerButton=function(e){var r=this.markerButtons.find(function(i){return i.getAttribute("data-type-name")===e});r&&this.setActiveButton(r)},t.prototype.setCurrentMarker=function(e){var r=this;this.currentMarker=e,this.buttons.filter(function(i){return/delete|notes/.test(i.getAttribute("data-action"))}).forEach(function(i){r.currentMarker===void 0?(i.style.fillOpacity="0.4",i.style.pointerEvents="none"):(i.style.fillOpacity="1",i.style.pointerEvents="all")})},t}(),mg=function(){function t(e,r,i,n){this.panels=[],this.panelButtons=[],this.markerjsContainer=e,this.displayMode=r,this.uiStyleSettings=i,this.styles=n,this.panelButtonClick=this.panelButtonClick.bind(this),this.addStyles()}return t.prototype.addStyles=function(){var e;this.toolboxStyleClass=this.styles.addClass(new qt("toolbox",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      font-family: sans-serif;
      `+(this.displayMode==="popup"?"height:"+2.5*this.uiStyleSettings.toolbarHeight+"px;":"")+`
      box-sizing: content-box;
      `+(this.displayMode==="popup"?"background-color: "+this.uiStyleSettings.canvasBackgroundColor+";":"")+`
      `+(this.displayMode==="inline"?"border-bottom-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-bottom-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolboxStyleColorsClass=this.styles.addClass(new qt("toolbox_colors",`
      color: `+this.uiStyleSettings.toolboxColor+`;
    `));var r=this.uiStyleSettings.toolbarHeight/4;this.toolboxButtonRowStyleClass=this.styles.addClass(new qt("toolbox-button-row",`
      display: flex;
      cursor: default;
      box-sizing: content-box;
    `)),this.toolboxButtonRowStyleColorsClass=this.styles.addClass(new qt("toolbox-button-row_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
    `)),this.toolboxPanelRowStyleClass=this.styles.addClass(new qt("toolbox-panel-row",`
      display: flex;
      `+(this.displayMode==="inline"?"position: absolute;":"")+`
      `+(this.displayMode==="inline"?"bottom: "+this.uiStyleSettings.toolbarHeight+"px;":"")+`
      cursor: default;
      height: `+1.5*this.uiStyleSettings.toolbarHeight+`px;
      `+(this.displayMode==="inline"?"width: 100%;":"")+`
      box-sizing: content-box;
    `)),this.toolboxPanelRowStyleColorsClass=this.styles.addClass(new qt("toolbox-panel-row_colors",`
      background-color: `+((e=this.uiStyleSettings.toolboxBackgroundColor)!==null&&e!==void 0?e:this.uiStyleSettings.toolbarBackgroundHoverColor)+`;
    `)),this.toolboxButtonStyleClass=this.styles.addClass(new qt("toolbox_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*r)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*r)+`px;
      padding: `+r+`px;
      box-sizing: content-box;
    `)),this.toolboxButtonStyleColorsClass=this.styles.addClass(new qt("toolbox-button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolboxActiveButtonStyleColorsClass=this.styles.addClass(new qt("toolbox-active-button_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`;
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.styles.addRule(new Ie("."+this.toolboxButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new Ie("."+this.toolboxButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new Ie("."+this.toolboxPanelRowStyleClass.name+" > div",`
        scrollbar-width: thin;
        `)),this.styles.addRule(new Ie("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar",`
      height: 10px;
      width: 10px;
    `)),this.styles.addRule(new Ie("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-track",`
        background-color: transparent;
        `)),this.styles.addRule(new Ie("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-thumb",`
        background-color: #444;
        border-radius: 20px;
        border: 2px solid #aaa;
        `))},t.prototype.show=function(e){var r;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=e,this.uiContainer.className=this.toolboxStyleClass.name+" "+((r=this.uiStyleSettings.toolboxStyleColorsClassName)!==null&&r!==void 0?r:this.toolboxStyleColorsClass.name),this.markerjsContainer.appendChild(this.uiContainer)},t.prototype.setPanelButtons=function(e){var r,i,n=this;this.panels=e,this.uiContainer!==void 0&&(this.uiContainer.innerHTML="",this.panelRow=document.createElement("div"),this.panelRow.className=this.toolboxPanelRowStyleClass.name+" "+((r=this.uiStyleSettings.toolboxPanelRowStyleColorsClassName)!==null&&r!==void 0?r:this.toolboxPanelRowStyleColorsClass.name),this.uiContainer.appendChild(this.panelRow),this.buttonRow=document.createElement("div"),this.buttonRow.className=this.toolboxButtonRowStyleClass.name+" "+((i=this.uiStyleSettings.toolboxButtonRowStyleColorsClassName)!==null&&i!==void 0?i:this.toolboxButtonRowStyleColorsClass.name)+" ",this.uiContainer.appendChild(this.buttonRow),this.panelButtons.splice(0),this.panels.forEach(function(o){var s;o.uiStyleSettings=n.uiStyleSettings;var a=document.createElement("div");a.className=n.toolboxButtonStyleClass.name+" "+((s=n.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&s!==void 0?s:n.toolboxButtonStyleColorsClass.name),a.innerHTML=o.icon,a.title=o.title,a.setAttribute("role","button"),a.setAttribute("aria-label",o.title),o.id&&a.setAttribute("data-action",o.id),a.addEventListener("click",function(){n.panelButtonClick(o)}),n.panelButtons.push(a),n.buttonRow.appendChild(a)}),this.displayMode==="inline"?this.panelRow.style.display="none":this.panelRow.style.visibility="hidden")},t.prototype.panelButtonClick=function(e){var r=this,i=-1;if(e!==this.activePanel){i=this.panels.indexOf(e),this.panelRow.innerHTML="";var n=e.getUi();n.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.panelRow.appendChild(n),this.panelRow.style.display="flex",this.panelRow.style.visibility="visible",this.panelRow.className=this.panelRow.className.replace(this.styles.fadeOutAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeInAnimationClassName,this.activePanel=e}else this.activePanel=void 0,this.panelRow.className=this.panelRow.className.replace(this.styles.fadeInAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeOutAnimationClassName,setTimeout(function(){r.displayMode==="inline"?r.panelRow.style.display="none":r.panelRow.style.visibility="hidden"},200);this.panelButtons.forEach(function(o,s){var a,l;o.className=r.toolboxButtonStyleClass.name+" "+(s===i?""+((a=r.uiStyleSettings.toolboxActiveButtonStyleColorsClassName)!==null&&a!==void 0?a:r.toolboxActiveButtonStyleColorsClass.name):""+((l=r.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&l!==void 0?l:r.toolboxButtonStyleColorsClass.name))})},t}(),wi=function(){function t(e,r,i){this.title=e,this.icon=r,this._id=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t}(),pe=function(t){function e(r,i,n,o,s){var a=t.call(this,r,o||'<svg viewBox="0 0 24 24"><path d="M17.5 12a1.5 1.5 0 01-1.5-1.5A1.5 1.5 0 0117.5 9a1.5 1.5 0 011.5 1.5 1.5 1.5 0 01-1.5 1.5m-3-4A1.5 1.5 0 0113 6.5 1.5 1.5 0 0114.5 5 1.5 1.5 0 0116 6.5 1.5 1.5 0 0114.5 8m-5 0A1.5 1.5 0 018 6.5 1.5 1.5 0 019.5 5 1.5 1.5 0 0111 6.5 1.5 1.5 0 019.5 8m-3 4A1.5 1.5 0 015 10.5 1.5 1.5 0 016.5 9 1.5 1.5 0 018 10.5 1.5 1.5 0 016.5 12M12 3a9 9 0 00-9 9 9 9 0 009 9 1.5 1.5 0 001.5-1.5c0-.39-.15-.74-.39-1-.23-.27-.38-.62-.38-1a1.5 1.5 0 011.5-1.5H16a5 5 0 005-5c0-4.42-4.03-8-9-8z"/></svg>',s||"color-picker-panel")||this;return a.colors=[],a.addTransparent=!1,a.colorBoxes=[],a.colors=i,a.currentColor=n,a.setCurrentColor=a.setCurrentColor.bind(a),a.getColorBox=a.getColorBox.bind(a),a}return Nt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.overflow="hidden",i.style.overflowX="scroll",i.style.whiteSpace="nowrap",this.colors.forEach(function(n){var o=r.getColorBox(n);i.appendChild(o),r.colorBoxes.push(o)}),i},e.prototype.getColorBox=function(r){var i=this,n=this.uiStyleSettings.toolbarHeight/4,o=this.uiStyleSettings.toolbarHeight-n,s=document.createElement("div");s.style.display="inline-block",s.style.boxSizing="content-box",s.style.width=o-2+"px",s.style.height=o-2+"px",s.style.padding="1px",s.style.marginRight="2px",s.style.marginBottom="2px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.borderRadius=(o+2)/2+"px",s.style.borderColor=r===this.currentColor?this.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){i.setCurrentColor(r,s)});var a=document.createElement("div");return a.style.display="inline-block",a.style.width=o-2+"px",a.style.height=o-2+"px",a.style.backgroundColor=r,a.style.borderRadius=o/2+"px",r==="transparent"&&(a.style.fill=this.uiStyleSettings.toolboxAccentColor,a.innerHTML=`<svg viewBox="0 0 24 24">
        <path d="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z" />
      </svg>`),s.appendChild(a),s},e.prototype.setCurrentColor=function(r,i){var n=this;this.currentColor=r,this.colorBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onColorChanged&&this.onColorChanged(r)},e}(wi),ff=function(){function t(e,r,i){this._state="new",this._isSelected=!1,this._container=e,this._overlayContainer=r,this.globalSettings=i,this.stateChanged=this.stateChanged.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this)}return Object.defineProperty(t.prototype,"typeName",{get:function(){return Object.getPrototypeOf(this).constructor.typeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"overlayContainer",{get:function(){return this._overlayContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.ownsTarget=function(e){return!1},Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._isSelected},enumerable:!1,configurable:!0}),t.prototype.select=function(){this.container.style.cursor="move",this._isSelected=!0,this.manipulationStartState=this.getState()},t.prototype.deselect=function(){this.container.style.cursor="default",this._isSelected=!1,this.stateChanged()},t.prototype.pointerDown=function(e,r){},t.prototype.dblClick=function(e,r){},t.prototype.manipulate=function(e){},t.prototype.pointerUp=function(e){this.stateChanged()},t.prototype.dispose=function(){},t.prototype.addMarkerVisualToContainer=function(e){this.container.childNodes.length>0?this.container.insertBefore(e,this.container.childNodes[0]):this.container.appendChild(e)},t.prototype.getState=function(){return{typeName:t.typeName,state:this.state,notes:this.notes}},t.prototype.restoreState=function(e){this._state=e.state,this.notes=e.notes},t.prototype.scale=function(e,r){},t.prototype.colorChanged=function(e){this.onColorChanged&&this.onColorChanged(e),this.stateChanged()},t.prototype.fillColorChanged=function(e){this.onFillColorChanged&&this.onFillColorChanged(e),this.stateChanged()},t.prototype.stateChanged=function(){if(this.onStateChanged&&this.state!=="creating"&&this.state!=="new"){var e=this.getState();this.manipulationStartState!==void 0&&(this.manipulationStartState.state="select"),e.state="select",JSON.stringify(this.manipulationStartState)!=JSON.stringify(e)&&this.onStateChanged(this)}},t.typeName="MarkerBase",t}(),yg=function(){function t(){this.findGripByVisual=this.findGripByVisual.bind(this)}return t.prototype.findGripByVisual=function(e){return this.topLeft.ownsTarget(e)?this.topLeft:this.topCenter.ownsTarget(e)?this.topCenter:this.topRight.ownsTarget(e)?this.topRight:this.centerLeft.ownsTarget(e)?this.centerLeft:this.centerRight.ownsTarget(e)?this.centerRight:this.bottomLeft.ownsTarget(e)?this.bottomLeft:this.bottomCenter.ownsTarget(e)?this.bottomCenter:this.bottomRight.ownsTarget(e)?this.bottomRight:void 0},t}(),Ba=function(){function t(){this.GRIP_SIZE=10,this.visual=J.createGroup(),this.visual.appendChild(J.createCircle(1.5*this.GRIP_SIZE,[["fill","transparent"]])),this.visual.appendChild(J.createCircle(this.GRIP_SIZE,[["fill","#cccccc"],["fill-opacity","0.7"],["stroke","#333333"],["stroke-width","2"],["stroke-opacity","0.7"]]))}return t.prototype.ownsTarget=function(e){return e===this.visual||e===this.visual.childNodes[0]||e===this.visual.childNodes[1]},t}(),On=function(){function t(){}return t.toITransformMatrix=function(e){return{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}},t.toSVGMatrix=function(e,r){return e.a=r.a,e.b=r.b,e.c=r.c,e.d=r.d,e.e=r.e,e.f=r.f,e},t}(),un=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.left=0,o.top=0,o.width=0,o.height=0,o.defaultSize={x:50,y:20},o.offsetX=0,o.offsetY=0,o.rotationAngle=0,o.CB_DISTANCE=10,o._suppressMarkerCreateEvent=!1,o.container.transform.baseVal.appendItem(J.createTransform()),o.setupControlBox(),o}return Nt(e,t),Object.defineProperty(e.prototype,"centerX",{get:function(){return this.left+this.width/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this.top+this.height/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visual",{get:function(){return this._visual},set:function(r){this._visual=r;var i=J.createTransform();this._visual.transform.baseVal.appendItem(i)},enumerable:!1,configurable:!0}),e.prototype.ownsTarget=function(r){return!!t.prototype.ownsTarget.call(this,r)||!!(this.controlGrips.findGripByVisual(r)!==void 0||this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(r))},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.left=r.x,this.top=r.y),this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.manipulationStartWidth=this.width,this.manipulationStartHeight=this.height;var n=this.unrotatePoint(r);if(this.manipulationStartX=n.x,this.manipulationStartY=n.y,this.offsetX=n.x-this.left,this.offsetY=n.y-this.top,this.state!=="new")if(this.select(),this.activeGrip=this.controlGrips.findGripByVisual(i),this.activeGrip!==void 0)this._state="resize";else if(this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(i)){this.activeGrip=this.rotatorGrip;var o=this.rotatePoint({x:this.centerX,y:this.centerY});this.left=o.x-this.width/2,this.top=o.y-this.height/2,this.moveVisual({x:this.left,y:this.top});var s=this.container.transform.baseVal.getItem(0);s.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(s,0),this.adjustControlBox(),this._state="rotate"}else this._state="move"},e.prototype.pointerUp=function(r){var i=this.state;t.prototype.pointerUp.call(this,r),this.state==="creating"&&this.width<10&&this.height<10?(this.width=this.defaultSize.x,this.height=this.defaultSize.y):this.manipulate(r),this._state="select",i==="creating"&&this.onMarkerCreated&&this._suppressMarkerCreateEvent===!1&&this.onMarkerCreated(this)},e.prototype.moveVisual=function(r){this.visual.style.transform="translate("+r.x+"px, "+r.y+"px)"},e.prototype.manipulate=function(r){var i=this.unrotatePoint(r);this.state==="creating"?this.resize(r):this.state==="move"?(this.left=this.manipulationStartLeft+(i.x-this.manipulationStartLeft)-this.offsetX,this.top=this.manipulationStartTop+(i.y-this.manipulationStartTop)-this.offsetY,this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()):this.state==="resize"?this.resize(i):this.state==="rotate"&&this.rotate(r)},e.prototype.resize=function(r){var i=this.manipulationStartLeft,n=this.manipulationStartWidth,o=this.manipulationStartTop,s=this.manipulationStartHeight;switch(this.activeGrip){case this.controlGrips.bottomLeft:case this.controlGrips.centerLeft:case this.controlGrips.topLeft:i=this.manipulationStartLeft+r.x-this.manipulationStartX,n=this.manipulationStartWidth+this.manipulationStartLeft-i;break;case this.controlGrips.bottomRight:case this.controlGrips.centerRight:case this.controlGrips.topRight:case void 0:n=this.manipulationStartWidth+r.x-this.manipulationStartX}switch(this.activeGrip){case this.controlGrips.topCenter:case this.controlGrips.topLeft:case this.controlGrips.topRight:o=this.manipulationStartTop+r.y-this.manipulationStartY,s=this.manipulationStartHeight+this.manipulationStartTop-o;break;case this.controlGrips.bottomCenter:case this.controlGrips.bottomLeft:case this.controlGrips.bottomRight:case void 0:s=this.manipulationStartHeight+r.y-this.manipulationStartY}n>=0?(this.left=i,this.width=n):(this.left=i+n,this.width=-n),s>=0?(this.top=o,this.height=s):(this.top=o+s,this.height=-s),this.setSize()},e.prototype.setSize=function(){this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()},e.prototype.rotate=function(r){if(Math.abs(r.x-this.centerX)>.1){var i=Math.sign(r.x-this.centerX);this.rotationAngle=180*Math.atan((r.y-this.centerY)/(r.x-this.centerX))/Math.PI+90*i,this.applyRotation()}},e.prototype.applyRotation=function(){var r=this.container.transform.baseVal.getItem(0);r.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(r,0)},e.prototype.rotatePoint=function(r){if(this.rotationAngle===0)return r;var i=this.container.getCTM(),n=J.createPoint(r.x,r.y);return{x:(n=n.matrixTransform(i)).x,y:n.y}},e.prototype.unrotatePoint=function(r){if(this.rotationAngle===0)return r;var i=this.container.getCTM();i=i.inverse();var n=J.createPoint(r.x,r.y);return{x:(n=n.matrixTransform(i)).x,y:n.y}},e.prototype.select=function(){t.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},e.prototype.deselect=function(){t.prototype.deselect.call(this),this.controlBox.style.display="none"},e.prototype.setupControlBox=function(){this.controlBox=J.createGroup();var r=J.createTransform();r.setTranslate(-this.CB_DISTANCE/2,-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.appendItem(r),this.container.appendChild(this.controlBox),this.controlRect=J.createRect(this.width+this.CB_DISTANCE,this.height+this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"],["fill","transparent"],["pointer-events","none"]]),this.controlBox.appendChild(this.controlRect),this.globalSettings.disableRotation!==!0&&(this.rotatorGripLine=J.createLine((this.width+2*this.CB_DISTANCE)/2,this.top-this.CB_DISTANCE,(this.width+2*this.CB_DISTANCE)/2,this.top-3*this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.appendChild(this.rotatorGripLine)),this.controlGrips=new yg,this.addControlGrips(),this.controlBox.style.display="none"},e.prototype.adjustControlBox=function(){var r=this.controlBox.transform.baseVal.getItem(0);r.setTranslate(this.left-this.CB_DISTANCE/2,this.top-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.replaceItem(r,0),this.controlRect.setAttribute("width",(this.width+this.CB_DISTANCE).toString()),this.controlRect.setAttribute("height",(this.height+this.CB_DISTANCE).toString()),this.rotatorGripLine!==void 0&&(this.rotatorGripLine.setAttribute("x1",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y1",(-this.CB_DISTANCE/2).toString()),this.rotatorGripLine.setAttribute("x2",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y2",(3*-this.CB_DISTANCE).toString())),this.positionGrips()},e.prototype.addControlGrips=function(){this.controlGrips.topLeft=this.createGrip(),this.controlGrips.topCenter=this.createGrip(),this.controlGrips.topRight=this.createGrip(),this.controlGrips.centerLeft=this.createGrip(),this.controlGrips.centerRight=this.createGrip(),this.controlGrips.bottomLeft=this.createGrip(),this.controlGrips.bottomCenter=this.createGrip(),this.controlGrips.bottomRight=this.createGrip(),this.globalSettings.disableRotation!==!0&&(this.rotatorGrip=this.createGrip()),this.positionGrips()},e.prototype.createGrip=function(){var r=new Ba;return r.visual.transform.baseVal.appendItem(J.createTransform()),this.controlBox.appendChild(r.visual),r},e.prototype.positionGrips=function(){var r=this.controlGrips.topLeft.GRIP_SIZE,i=-r/2,n=i,o=(this.width+this.CB_DISTANCE)/2-r/2,s=(this.height+this.CB_DISTANCE)/2-r/2,a=this.height+this.CB_DISTANCE-r/2,l=this.width+this.CB_DISTANCE-r/2;this.positionGrip(this.controlGrips.topLeft.visual,i,n),this.positionGrip(this.controlGrips.topCenter.visual,o,n),this.positionGrip(this.controlGrips.topRight.visual,l,n),this.positionGrip(this.controlGrips.centerLeft.visual,i,s),this.positionGrip(this.controlGrips.centerRight.visual,l,s),this.positionGrip(this.controlGrips.bottomLeft.visual,i,a),this.positionGrip(this.controlGrips.bottomCenter.visual,o,a),this.positionGrip(this.controlGrips.bottomRight.visual,l,a),this.rotatorGrip!==void 0&&this.positionGrip(this.rotatorGrip.visual,o,n-3*this.CB_DISTANCE)},e.prototype.positionGrip=function(r,i,n){var o=r.transform.baseVal.getItem(0);o.setTranslate(i,n),r.transform.baseVal.replaceItem(o,0)},e.prototype.hideControlBox=function(){this.controlBox.style.display="none"},e.prototype.showControlBox=function(){this.controlBox.style.display=""},e.prototype.getState=function(){return Object.assign({left:this.left,top:this.top,width:this.width,height:this.height,rotationAngle:this.rotationAngle,visualTransformMatrix:On.toITransformMatrix(this.visual.transform.baseVal.getItem(0).matrix),containerTransformMatrix:On.toITransformMatrix(this.container.transform.baseVal.getItem(0).matrix)},t.prototype.getState.call(this))},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r);var i=r;this.left=i.left,this.top=i.top,this.width=i.width,this.height=i.height,this.rotationAngle=i.rotationAngle,this.visual.transform.baseVal.getItem(0).setMatrix(On.toSVGMatrix(this.visual.transform.baseVal.getItem(0).matrix,i.visualTransformMatrix)),this.container.transform.baseVal.getItem(0).setMatrix(On.toSVGMatrix(this.container.transform.baseVal.getItem(0).matrix,i.containerTransformMatrix))},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i);var n=this.rotatePoint({x:this.left,y:this.top}),o=this.unrotatePoint({x:n.x*r,y:n.y*i});this.left=o.x,this.top=o.y,this.width=this.width*r,this.height=this.height*i,this.adjustControlBox()},e}(ff),hf=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.fillColor="transparent",o.strokeColor="transparent",o.strokeWidth=0,o.strokeDasharray="",o.opacity=1,o.setStrokeColor=o.setStrokeColor.bind(o),o.setFillColor=o.setFillColor.bind(o),o.setStrokeWidth=o.setStrokeWidth.bind(o),o.setStrokeDasharray=o.setStrokeDasharray.bind(o),o.createVisual=o.createVisual.bind(o),o}return Nt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual)},e.prototype.createVisual=function(){this.visual=J.createRect(1,1,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},e.prototype.manipulate=function(r){t.prototype.manipulate.call(this,r)},e.prototype.resize=function(r){t.prototype.resize.call(this,r),this.setSize()},e.prototype.setSize=function(){t.prototype.setSize.call(this),J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]])},e.prototype.pointerUp=function(r){t.prototype.pointerUp.call(this,r),this.setSize()},e.prototype.setStrokeColor=function(r){this.strokeColor=r,this.visual&&J.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},e.prototype.setFillColor=function(r){this.fillColor=r,this.visual&&J.setAttributes(this.visual,[["fill",this.fillColor]]),this.stateChanged()},e.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.visual&&J.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},e.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.visual&&J.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},e.prototype.getState=function(){return Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},t.prototype.getState.call(this))},e.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.opacity=i.opacity,this.createVisual(),t.prototype.restoreState.call(this,r),this.setSize()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.setSize()},e.title="Rectangle marker",e}(un),_i=function(t){function e(r,i,n,o,s){var a=t.call(this,r,o||'<svg viewBox="0 0 24 24"><path d="M3 17h18v-2H3v2m0 3h18v-1H3v1m0-7h18v-3H3v3m0-9v4h18V4H3z"/></svg>',s||"line-width-panel")||this;return a.widths=[],a.widthBoxes=[],a.widths=i,a.currentWidth=n,a.setCurrentWidth=a.setCurrentWidth.bind(a),a}return Nt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",this.widths.forEach(function(n){var o=document.createElement("div");o.style.display="flex",o.style.flexGrow="2",o.style.alignItems="center",o.style.justifyContent="space-between",o.style.padding="5px",o.style.borderWidth="2px",o.style.borderStyle="solid",o.style.borderColor=n===r.currentWidth?r.uiStyleSettings.toolboxAccentColor:"transparent",o.addEventListener("click",function(){r.setCurrentWidth(n,o)}),i.appendChild(o);var s=document.createElement("div");s.innerText=n.toString(),s.style.marginRight="5px",o.appendChild(s);var a=document.createElement("div");a.style.minHeight="20px",a.style.flexGrow="2",a.style.display="flex",a.style.alignItems="center";var l=document.createElement("hr");l.style.minWidth="20px",l.style.border="0px",l.style.borderTop=n+"px solid "+r.uiStyleSettings.toolboxColor,l.style.flexGrow="2",a.appendChild(l),o.appendChild(a),r.widthBoxes.push(o)}),i},e.prototype.setCurrentWidth=function(r,i){var n=this;this.currentWidth=r,this.widthBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onWidthChanged&&this.onWidthChanged(this.currentWidth)},e}(wi),cn=function(t){function e(r,i,n,o,s){var a=t.call(this,r,o||'<svg viewBox="0 0 24 24"><path d="M3 16h5v-2H3v2m6.5 0h5v-2h-5v2m6.5 0h5v-2h-5v2M3 20h2v-2H3v2m4 0h2v-2H7v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2M3 12h8v-2H3v2m10 0h8v-2h-8v2M3 4v4h18V4H3z"/></svg>',s||"line-style-panel")||this;return a.styles=[],a.styleBoxes=[],a.styles=i,a.currentStyle=n,a.setCurrentStyle=a.setCurrentStyle.bind(a),a}return Nt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",this.styles.forEach(function(n){var o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="space-between",o.style.padding="5px",o.style.borderWidth="2px",o.style.borderStyle="solid",o.style.overflow="hidden",o.style.maxWidth=100/r.styles.length-5+"%",o.style.borderColor=n===r.currentStyle?r.uiStyleSettings.toolboxAccentColor:"transparent",o.addEventListener("click",function(){r.setCurrentStyle(n,o)}),i.appendChild(o);var s=document.createElement("div");s.style.minHeight="20px",s.style.flexGrow="2",s.style.overflow="hidden";var a=`<svg width="100" height="20">
      <line x1="0" y1="10" x2="100" y2="10" stroke="`+r.uiStyleSettings.toolboxColor+'" stroke-width="3" '+(n!==""?'stroke-dasharray="'+n+'"':"")+` />
  </svg>`;s.innerHTML=a,o.appendChild(s),r.styleBoxes.push(o)}),i},e.prototype.setCurrentStyle=function(r,i){var n=this;this.currentStyle=r,this.styleBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onStyleChanged&&this.onStyleChanged(this.currentStyle)},e}(wi),ns=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.strokeColor=n.defaultColor,o.strokeWidth=n.defaultStrokeWidth,o.strokeDasharray=n.defaultStrokeDasharray,o.strokePanel=new pe("Line color",n.defaultColorSet,n.defaultColor),o.strokePanel.onColorChanged=o.setStrokeColor,o.strokeWidthPanel=new _i("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.strokeWidthPanel.onWidthChanged=o.setStrokeWidth,o.strokeStylePanel=new cn("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),o.strokeStylePanel.onStyleChanged=o.setStrokeDasharray,o}return Nt(e,t),Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=t.prototype.getState.call(this);return r.typeName=e.typeName,r},e.typeName="FrameMarker",e.title="Frame marker",e.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4m14 11H6V8h12v9z"/></svg>',e}(hf),bg=function(){this.defaultColorSet=["#EF4444","#10B981","#2563EB","#FFFF00","#7C3AED","#F472B6","#000000","#FFFFFF"],this.defaultColor=this.defaultColorSet[0],this.defaultFillColor=this.defaultColorSet[0],this.defaultStrokeColor=this.defaultColorSet[7],this.defaultHighlightColor=this.defaultColorSet[3],this.defaultStrokeWidth=3,this.defaultStrokeDasharray="",this.defaultHighlightOpacity=.5,this.defaultFontFamily="Helvetica, Arial, sans-serif",this.defaultStrokeWidths=[1,2,3,5,10],this.defaultStrokeDasharrays=["","3","12 3","9 6 3 6"],this.defaultOpacitySteps=[.1,.25,.5,.75,1],this.displayMode="inline",this.defaultFontFamilies=['Times, "Times New Roman", serif',"Helvetica, Arial, sans-serif",'Courier, "Courier New", monospace',"cursive","fantasy"],this.popupMargin=30,this.newFreehandMarkerOnPointerUp=!1,this.defaultColorsFollowCurrentColors=!1,this.freehandPixelRatio=1,this.disableRotation=!1,this.defaultCaptionFontSize="1rem",this.defaultCaptionText="Text",this.wrapText=!1,this.defaultText="Your text here"},df=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.x1=0,o.y1=0,o.x2=0,o.y2=0,o.defaultLength=50,o.manipulationStartX=0,o.manipulationStartY=0,o.manipulationStartX1=0,o.manipulationStartY1=0,o.manipulationStartX2=0,o.manipulationStartY2=0,o.setupControlBox(),o}return Nt(e,t),e.prototype.ownsTarget=function(r){return!!t.prototype.ownsTarget.call(this,r)||!(!this.grip1.ownsTarget(r)&&!this.grip2.ownsTarget(r))},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.manipulationStartX=r.x,this.manipulationStartY=r.y,this.state==="new"&&(this.x1=r.x,this.y1=r.y,this.x2=r.x,this.y2=r.y),this.manipulationStartX1=this.x1,this.manipulationStartY1=this.y1,this.manipulationStartX2=this.x2,this.manipulationStartY2=this.y2,this.state!=="new"&&(this.select(),this.grip1.ownsTarget(i)?this.activeGrip=this.grip1:this.grip2.ownsTarget(i)?this.activeGrip=this.grip2:this.activeGrip=void 0,this.activeGrip?this._state="resize":this._state="move")},e.prototype.pointerUp=function(r){var i=this.state;t.prototype.pointerUp.call(this,r),this.state==="creating"&&Math.abs(this.x1-this.x2)<10&&Math.abs(this.y1-this.y2)<10?(this.x2=this.x1+this.defaultLength,this.adjustVisual(),this.adjustControlBox()):this.manipulate(r),this._state="select",i==="creating"&&this.onMarkerCreated&&this.onMarkerCreated(this)},e.prototype.adjustVisual=function(){},e.prototype.manipulate=function(r){this.state==="creating"?this.resize(r):this.state==="move"?(this.x1=this.manipulationStartX1+r.x-this.manipulationStartX,this.y1=this.manipulationStartY1+r.y-this.manipulationStartY,this.x2=this.manipulationStartX2+r.x-this.manipulationStartX,this.y2=this.manipulationStartY2+r.y-this.manipulationStartY,this.adjustVisual(),this.adjustControlBox()):this.state==="resize"&&this.resize(r)},e.prototype.resize=function(r){switch(this.activeGrip){case this.grip1:this.x1=r.x,this.y1=r.y;break;case this.grip2:case void 0:this.x2=r.x,this.y2=r.y}this.adjustVisual(),this.adjustControlBox()},e.prototype.select=function(){t.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},e.prototype.deselect=function(){t.prototype.deselect.call(this),this.controlBox.style.display="none"},e.prototype.setupControlBox=function(){this.controlBox=J.createGroup(),this.container.appendChild(this.controlBox),this.addControlGrips(),this.controlBox.style.display="none"},e.prototype.adjustControlBox=function(){this.positionGrips()},e.prototype.addControlGrips=function(){this.grip1=this.createGrip(),this.grip2=this.createGrip(),this.positionGrips()},e.prototype.createGrip=function(){var r=new Ba;return r.visual.transform.baseVal.appendItem(J.createTransform()),this.controlBox.appendChild(r.visual),r},e.prototype.positionGrips=function(){var r=this.grip1.GRIP_SIZE;this.positionGrip(this.grip1.visual,this.x1-r/2,this.y1-r/2),this.positionGrip(this.grip2.visual,this.x2-r/2,this.y2-r/2)},e.prototype.positionGrip=function(r,i,n){var o=r.transform.baseVal.getItem(0);o.setTranslate(i,n),r.transform.baseVal.replaceItem(o,0)},e.prototype.getState=function(){return Object.assign({x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2},t.prototype.getState.call(this))},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r);var i=r;this.x1=i.x1,this.y1=i.y1,this.x2=i.x2,this.y2=i.y2},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.x1=this.x1*r,this.y1=this.y1*i,this.x2=this.x2*r,this.y2=this.y2*i,this.adjustVisual(),this.adjustControlBox()},e}(ff),Ia=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.strokeColor="transparent",o.strokeWidth=0,o.strokeDasharray="",o.setStrokeColor=o.setStrokeColor.bind(o),o.setStrokeWidth=o.setStrokeWidth.bind(o),o.setStrokeDasharray=o.setStrokeDasharray.bind(o),o.strokeColor=n.defaultColor,o.strokeWidth=n.defaultStrokeWidth,o.strokeDasharray=n.defaultStrokeDasharray,o.strokePanel=new pe("Line color",n.defaultColorSet,n.defaultColor),o.strokePanel.onColorChanged=o.setStrokeColor,o.strokeWidthPanel=new _i("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.strokeWidthPanel.onWidthChanged=o.setStrokeWidth,o.strokeStylePanel=new cn("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),o.strokeStylePanel.onStyleChanged=o.setStrokeDasharray,o}return Nt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.selectorLine&&r!==this.visibleLine)},e.prototype.createVisual=function(){this.visual=J.createGroup(),this.selectorLine=J.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()]]),this.visibleLine=J.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.visual.appendChild(this.selectorLine),this.visual.appendChild(this.visibleLine),this.addMarkerVisualToContainer(this.visual)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.adjustVisual(),this._state="creating")},e.prototype.adjustVisual=function(){this.selectorLine&&this.visibleLine&&(this.selectorLine.setAttribute("x1",this.x1.toString()),this.selectorLine.setAttribute("y1",this.y1.toString()),this.selectorLine.setAttribute("x2",this.x2.toString()),this.selectorLine.setAttribute("y2",this.y2.toString()),this.visibleLine.setAttribute("x1",this.x1.toString()),this.visibleLine.setAttribute("y1",this.y1.toString()),this.visibleLine.setAttribute("x2",this.x2.toString()),this.visibleLine.setAttribute("y2",this.y2.toString()),J.setAttributes(this.visibleLine,[["stroke",this.strokeColor]]),J.setAttributes(this.visibleLine,[["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.visibleLine,[["stroke-dasharray",this.strokeDasharray.toString()]]))},e.prototype.setStrokeColor=function(r){this.strokeColor=r,this.adjustVisual(),this.colorChanged(r)},e.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.adjustVisual()},e.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.adjustVisual(),this.stateChanged()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r);var i=r;this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.createVisual(),this.adjustVisual()},e.typeName="LineMarker",e.title="Line marker",e.icon='<svg viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>',e}(df),Oa=function(t){function e(r,i,n,o,s){var a=t.call(this,r,o||'<svg viewBox="0 0 24 24"><path d="M17 8h3v12h1v1h-4v-1h1v-3h-4l-1.5 3H14v1h-4v-1h1l6-12m1 1l-3.5 7H18V9M5 3h5c1.11 0 2 .89 2 2v11H9v-5H6v5H3V5c0-1.11.89-2 2-2m1 2v4h3V5H6z"/></svg>',s||"font-family-panel")||this;return a.fonts=[],a.fontBoxes=[],a.fonts=i,a.currentFont=n,a.setCurrentFont=a.setCurrentFont.bind(a),a}return Nt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.overflow="hidden",i.style.flexGrow="2",this.fonts.forEach(function(n){var o=document.createElement("div");o.style.display="inline-block",o.style.alignItems="center",o.style.justifyContent="space-between",o.style.padding="5px",o.style.borderWidth="2px",o.style.borderStyle="solid",o.style.overflow="hidden",o.style.maxWidth=100/r.fonts.length-5+"%",o.style.borderColor=n===r.currentFont?r.uiStyleSettings.toolboxAccentColor:"transparent",o.addEventListener("click",function(){r.setCurrentFont(n,o)}),i.appendChild(o);var s=document.createElement("div");s.style.display="flex",s.style.minHeight="20px",s.style.flexGrow="2",s.style.fontFamily=n,s.style.overflow="hidden";var a=document.createElement("div");a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",a.innerHTML="The quick brown fox jumps over the lazy dog",s.appendChild(a),o.appendChild(s),r.fontBoxes.push(o)}),i},e.prototype.setCurrentFont=function(r,i){var n=this;this.currentFont=r,this.fontBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onFontChanged&&this.onFontChanged(this.currentFont)},e}(wi),Oi=function(t){function e(r,i,n){var o,s=t.call(this,r,i,n)||this;return s.color="transparent",s.padding=5,s.DEFAULT_TEXT="your text here",s.isMoved=!1,s.color=n.defaultColor,s.fontFamily=n.defaultFontFamily,s.text=(o=n.defaultText)!==null&&o!==void 0?o:s.DEFAULT_TEXT,s.defaultSize={x:100,y:30},s.setColor=s.setColor.bind(s),s.setFont=s.setFont.bind(s),s.renderText=s.renderText.bind(s),s.sizeText=s.sizeText.bind(s),s.textEditDivClicked=s.textEditDivClicked.bind(s),s.showTextEditor=s.showTextEditor.bind(s),s.setSize=s.setSize.bind(s),s.positionTextEditor=s.positionTextEditor.bind(s),s.wrapText=s.wrapText.bind(s),s.colorPanel=new pe("Color",n.defaultColorSet,n.defaultColor),s.colorPanel.onColorChanged=s.setColor,s.fontFamilyPanel=new Oa("Font",n.defaultFontFamilies,n.defaultFontFamily),s.fontFamilyPanel.onFontChanged=s.setFont,s}return Nt(e,t),e.prototype.ownsTarget=function(r){if(t.prototype.ownsTarget.call(this,r)||r===this.visual||r===this.textElement||r===this.bgRectangle)return!0;var i=!1;return this.textElement.childNodes.forEach(function(n){n===r&&(i=!0)}),i},e.prototype.createVisual=function(){this.visual=J.createGroup(),this.bgRectangle=J.createRect(1,1,[["fill","transparent"]]),this.visual.appendChild(this.bgRectangle),this.textElement=J.createText([["fill",this.color],["font-family",this.fontFamily],["font-size","16px"],["x","0"],["y","0"]]),this.textElement.transform.baseVal.appendItem(J.createTransform()),this.textElement.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.textElement),this.addMarkerVisualToContainer(this.visual),this.renderText()},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.isMoved=!1,this.pointerDownPoint=r,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},e.prototype.wrapText=function(){function r(u){var c=u[0].length;return u.forEach(function(f){f.length>c&&(c=f.length)}),.35*c/u.length}if(this.text!==""){for(var i=this.text.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/),n=1*this.width/this.height,o=new(Array.bind.apply(Array,Ji([void 0],i))),s=r(o),a=Number.MAX_VALUE,l=function(){var u=o[0];o.forEach(function(c){c.length>u.length&&(u=c)}),(a=u.lastIndexOf(" ",a-1))>0?(o=[],i.forEach(function(c){for(var f=c;f.length>a;){var h=f.lastIndexOf(" ",a);h<0&&(h=f.indexOf(" ")),h>0?(o.push(f.substring(0,h)),f=f.substring(h).trim()):(o.push(f),f="")}o.push(f)}),s=r(o)):s=-1};s>n;)l();return o.join(`\r
`)}return this.text},e.prototype.renderText=function(){var r=this;if(this.textElement){for(;this.textElement.lastChild;)this.textElement.removeChild(this.textElement.lastChild);(this.globalSettings.wrapText?this.wrapText():this.text).split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/).forEach(function(i){r.textElement.appendChild(J.createTSpan(i.trim()===""?" ":i.trim(),[["x","0"],["dy","1.2em"]]))}),setTimeout(this.sizeText,10)}},e.prototype.getTextScale=function(){var r=this.textElement.getBBox(),i=1;if(r.width>0&&r.height>0){var n=(1*this.width-this.width*this.padding*2/100)/r.width,o=(1*this.height-this.height*this.padding*2/100)/r.height;i=Math.min(n,o)}return i},e.prototype.getTextPosition=function(r){var i=window.getComputedStyle(this.textElement).direction==="rtl"?1:-1,n=this.textElement.getBBox(),o=0,s=0;return n.width>0&&n.height>0&&(o=(this.width+i*n.width*r)/2,s=this.height/2-n.height*r/2),{x:o,y:s}},e.prototype.sizeText=function(){var r=this.textElement.getBBox(),i=this.getTextScale(),n=this.getTextPosition(i);n.y-=r.y*i,navigator.userAgent.indexOf("Edge/")>-1?this.textElement.style.transform="translate("+n.x+"px, "+n.y+"px) scale("+i+", "+i+")":(this.textElement.transform.baseVal.getItem(0).setTranslate(n.x,n.y),this.textElement.transform.baseVal.getItem(1).setScale(i,i))},e.prototype.manipulate=function(r){t.prototype.manipulate.call(this,r),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(r.x-this.pointerDownPoint.x)>5||Math.abs(r.y-this.pointerDownPoint.y)>5)},e.prototype.resize=function(r){t.prototype.resize.call(this,r),this.isMoved=!0,this.setSize(),this.globalSettings.wrapText?this.renderText():this.sizeText()},e.prototype.setSize=function(){t.prototype.setSize.call(this),this.visual&&this.bgRectangle&&(J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.bgRectangle,[["width",this.width.toString()],["height",this.height.toString()]]))},e.prototype.pointerUp=function(r){var i=this.state;i==="creating"&&(this._suppressMarkerCreateEvent=!0),t.prototype.pointerUp.call(this,r),this.setSize(),(i==="creating"||!this.isMoved&&Date.now()-this.pointerDownTimestamp>500)&&this.showTextEditor(),this.pointerDownPoint=void 0},e.prototype.showTextEditor=function(){var r=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditor=document.createElement("div"),this.textEditor.style.position="absolute",this.textEditor.style.fontFamily=this.fontFamily,this.textEditor.style.lineHeight="1em",this.textEditor.innerText=this.text,this.textEditor.contentEditable="true",this.textEditor.style.color=this.color,this.textEditor.style.whiteSpace="pre",this.positionTextEditor(),this.textEditor.addEventListener("pointerup",function(i){i.stopPropagation()}),this.globalSettings.wrapText||this.textEditor.addEventListener("input",function(){for(var i=Number.parseFloat(r.textEditor.style.fontSize);r.textEditor.clientWidth>=Number.parseInt(r.textEditor.style.maxWidth)&&i>.9;)i-=.1,r.textEditor.style.fontSize=Math.max(i,.9)+"em"}),this.textEditor.addEventListener("keyup",function(i){i.cancelBubble=!0}),this.textEditor.addEventListener("paste",function(i){if(i.clipboardData){var n=i.clipboardData.getData("text"),o=window.getSelection();if(!o.rangeCount)return!1;o.deleteFromDocument(),o.getRangeAt(0).insertNode(document.createTextNode(n)),i.preventDefault()}}),this.textEditDiv.addEventListener("pointerup",function(){r.textEditDivClicked(r.textEditor.innerText)}),this.textEditDiv.appendChild(this.textEditor),this.overlayContainer.appendChild(this.textEditDiv),this.hideVisual(),this.textEditor.focus(),document.execCommand("selectAll")},e.prototype.positionTextEditor=function(){if(this.state==="edit")if(this.textEditor===void 0)this.showTextEditor();else if(this.globalSettings.wrapText)this.textEditor.style.left=this.left+this.padding+"px",this.textEditor.style.top=this.top+this.padding+"px",this.textEditor.style.width=this.width-2*this.padding+"px",this.textEditor.style.height=this.height-2*this.padding+"px",this.textEditor.style.maxHeight=this.textEditor.style.height,this.textEditor.style.whiteSpace="wrap";else{this.textElement.style.display="";var r=this.getTextScale(),i=this.rotatePoint({x:this.left+this.width/2,y:this.top+this.height/2}),n=this.textElement.getBBox(),o={x:n.width*r,y:n.height*r};i.x-=o.x/2,i.y-=o.y/2,this.textEditor.style.top=i.y+"px",this.textEditor.style.left=i.x+"px",this.textEditor.style.maxWidth=this.overlayContainer.offsetWidth-i.x+"px",this.textEditor.style.fontSize=Math.max(16*r,12)+"px",this.textElement.style.display="none"}},e.prototype.textEditDivClicked=function(r){this.text=r.trim(),this.overlayContainer.innerHTML="",this.renderText(),this.showVisual(),this._suppressMarkerCreateEvent&&(this._suppressMarkerCreateEvent=!1,this.onMarkerCreated&&this.onMarkerCreated(this)),this.stateChanged()},e.prototype.select=function(){t.prototype.select.call(this),this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText)},e.prototype.deselect=function(){this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText),t.prototype.deselect.call(this)},e.prototype.dblClick=function(r,i){t.prototype.dblClick.call(this,r,i),this.showTextEditor()},e.prototype.setColor=function(r){this.textElement&&J.setAttributes(this.textElement,[["fill",r]]),this.color=r,this.textEditor&&(this.textEditor.style.color=this.color),this.colorChanged(r)},e.prototype.setFont=function(r){this.textElement&&J.setAttributes(this.textElement,[["font-family",r]]),this.fontFamily=r,this.textEditor&&(this.textEditor.style.fontFamily=this.fontFamily),this.renderText(),this.stateChanged()},e.prototype.hideVisual=function(){this.textElement.style.display="none",this.hideControlBox()},e.prototype.showVisual=function(){this.state==="edit"&&(this._state="select"),this.textElement.style.display="",this.showControlBox()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({color:this.color,fontFamily:this.fontFamily,padding:this.padding,text:this.text,wrapText:this.globalSettings.wrapText},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){var i=r;this.color=i.color,this.fontFamily=i.fontFamily,this.padding=i.padding,this.text=i.text,this.createVisual(),t.prototype.restoreState.call(this,r),this.setSize(),this.globalSettings.wrapText&&this.renderText()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.setSize(),this.sizeText(),this.positionTextEditor()},e.typeName="TextMarker",e.title="Text marker",e.icon='<svg viewBox="0 0 24 24"><path d="M9.6 14L12 7.7l2.4 6.3M11 5L5.5 19h2.2l1.1-3H15l1.1 3h2.2L13 5h-2z"/></svg>',e}(un),Bi=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.color="transparent",o.lineWidth=3,o.drawing=!1,o.pixelRatio=1,o.color=n.defaultColor,o.lineWidth=n.defaultStrokeWidth,o.pixelRatio=n.freehandPixelRatio,o.setColor=o.setColor.bind(o),o.addCanvas=o.addCanvas.bind(o),o.finishCreation=o.finishCreation.bind(o),o.setLineWidth=o.setLineWidth.bind(o),o.colorPanel=new pe("Color",n.defaultColorSet,n.defaultColor),o.colorPanel.onColorChanged=o.setColor,o.lineWidthPanel=new _i("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.lineWidthPanel.onWidthChanged=o.setLineWidth,o}return Nt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.drawingImage)},e.prototype.createVisual=function(){this.visual=J.createGroup(),this.drawingImage=J.createImage(),this.visual.appendChild(this.drawingImage);var r=J.createTransform();this.visual.transform.baseVal.appendItem(r),this.addMarkerVisualToContainer(this.visual)},e.prototype.pointerDown=function(r,i){this.state==="new"&&(this.addCanvas(),this.createVisual(),this._state="creating"),this.state==="creating"?(this.canvasContext.strokeStyle=this.color,this.canvasContext.lineWidth=this.lineWidth,this.canvasContext.beginPath(),this.canvasContext.moveTo(r.x,r.y),this.drawing=!0):t.prototype.pointerDown.call(this,r,i)},e.prototype.manipulate=function(r){this.state==="creating"?this.drawing&&(this.canvasContext.lineTo(r.x,r.y),this.canvasContext.stroke()):t.prototype.manipulate.call(this,r)},e.prototype.resize=function(r){t.prototype.resize.call(this,r),J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]])},e.prototype.pointerUp=function(r){this._state==="creating"?this.drawing&&(this.canvasContext.closePath(),this.drawing=!1,this.globalSettings.newFreehandMarkerOnPointerUp&&this.finishCreation()):t.prototype.pointerUp.call(this,r)},e.prototype.addCanvas=function(){this.overlayContainer.innerHTML="",this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.overlayContainer.clientWidth*this.pixelRatio,this.canvasElement.height=this.overlayContainer.clientHeight*this.pixelRatio,this.canvasContext=this.canvasElement.getContext("2d"),this.canvasContext.scale(this.pixelRatio,this.pixelRatio),this.overlayContainer.appendChild(this.canvasElement)},e.prototype.select=function(){this.state==="creating"&&this.finishCreation(),t.prototype.select.call(this)},e.prototype.deselect=function(){this.state==="creating"&&this.finishCreation(),t.prototype.deselect.call(this)},e.prototype.finishCreation=function(){for(var r=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),i=[this.canvasElement.width+1,this.canvasElement.height+1,-1,-1],n=i[0],o=i[1],s=i[2],a=i[3],l=!1,u=0;u<this.canvasElement.height;u++)for(var c=0;c<this.canvasElement.width;c++)r.data[u*this.canvasElement.width*4+4*c+3]>0&&(l=!0,u<o&&(o=u),c<n&&(n=c),u>a&&(a=u),c>s&&(s=c));if(l){this.left=n/this.pixelRatio,this.top=o/this.pixelRatio,this.width=(s-n)/this.pixelRatio,this.height=(a-o)/this.pixelRatio;var f=document.createElement("canvas");f.width=s-n,f.height=a-o,f.getContext("2d").putImageData(this.canvasContext.getImageData(n,o,s-n,a-o),0,0),this.drawingImgUrl=f.toDataURL("image/png"),this.setDrawingImage(),this._state="select",this.onMarkerCreated&&this.onMarkerCreated(this)}this.overlayContainer.innerHTML=""},e.prototype.setDrawingImage=function(){J.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.drawingImage,[["href",this.drawingImgUrl]]),this.moveVisual({x:this.left,y:this.top})},e.prototype.setColor=function(r){this.color=r,this.colorChanged(r)},e.prototype.setLineWidth=function(r){this.lineWidth=r},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return this.state==="new"||this.state==="creating"?[this.colorPanel,this.lineWidthPanel]:[]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({drawingImgUrl:this.drawingImgUrl},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){this.createVisual(),t.prototype.restoreState.call(this,r),this.drawingImgUrl=r.drawingImgUrl,this.setDrawingImage()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.setDrawingImage()},e.typeName="FreehandMarker",e.title="Freehand marker",e.icon='<svg viewBox="0 0 24 24"><path d="M9.75 20.85c1.78-.7 1.39-2.63.49-3.85-.89-1.25-2.12-2.11-3.36-2.94A9.817 9.817 0 014.54 12c-.28-.33-.85-.94-.27-1.06.59-.12 1.61.46 2.13.68.91.38 1.81.82 2.65 1.34l1.01-1.7C8.5 10.23 6.5 9.32 4.64 9.05c-1.06-.16-2.18.06-2.54 1.21-.32.99.19 1.99.77 2.77 1.37 1.83 3.5 2.71 5.09 4.29.34.33.75.72.95 1.18.21.44.16.47-.31.47-1.24 0-2.79-.97-3.8-1.61l-1.01 1.7c1.53.94 4.09 2.41 5.96 1.79m11.09-15.6c.22-.22.22-.58 0-.79l-1.3-1.3a.562.562 0 00-.78 0l-1.02 1.02 2.08 2.08M11 10.92V13h2.08l6.15-6.15-2.08-2.08L11 10.92z"/></svg>',e}(un),xg=function(t){function e(r,i,n,o){var s=t.call(this,r,n||'<svg viewBox="0 0 24 24"><path d="M8 14v4l-6-6 6-6v4h8V6l6 6-6 6v-4H8z"/></svg>',o||"arrow-type-panel")||this;return s.typeBoxes=[],s.currentType=i,s.setCurrentType=s.setCurrentType.bind(s),s}return Nt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2";for(var n=function(a){var l="both";switch(a){case 0:l="both";break;case 1:l="start";break;case 2:l="end";break;case 3:l="none"}var u=document.createElement("div");if(u.style.display="flex",u.style.flexGrow="2",u.style.alignItems="center",u.style.justifyContent="space-between",u.style.padding="5px",u.style.borderWidth="2px",u.style.borderStyle="solid",u.style.borderColor=l===o.currentType?o.uiStyleSettings.toolboxAccentColor:"transparent",u.addEventListener("click",function(){r.setCurrentType(l,u)}),i.appendChild(u),l==="both"||l==="start"){var c=document.createElement("div");c.style.display="flex",c.style.alignItems="center",c.style.minHeight="20px",c.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,5 10,0 10,10" fill="`+(o.uiStyleSettings!==void 0?o.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,c.style.marginLeft="5px",u.appendChild(c)}var f=document.createElement("div");f.style.display="flex",f.style.alignItems="center",f.style.minHeight="20px",f.style.flexGrow="2";var h=document.createElement("hr");if(h.style.minWidth="20px",h.style.border="0px",h.style.borderTop="3px solid "+(o.uiStyleSettings!==void 0?o.uiStyleSettings.toolboxColor:"#eeeeee"),h.style.flexGrow="2",f.appendChild(h),u.appendChild(f),l==="both"||l==="end"){var d=document.createElement("div");d.style.display="flex",d.style.alignItems="center",d.style.minHeight="20px",d.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,0 10,5 0,10" fill="`+(o.uiStyleSettings!==void 0?o.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,d.style.marginRight="5px",u.appendChild(d)}o.typeBoxes.push(u)},o=this,s=0;s<4;s++)n(s);return i},e.prototype.setCurrentType=function(r,i){var n=this;this.currentType=r,this.typeBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings!==void 0?n.uiStyleSettings.toolboxAccentColor:"#3080c3":"transparent"}),this.onArrowTypeChanged&&this.onArrowTypeChanged(this.currentType)},e}(wi),os=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.arrowType="end",o.arrowBaseHeight=10,o.arrowBaseWidth=10,o.getArrowPoints=o.getArrowPoints.bind(o),o.setArrowType=o.setArrowType.bind(o),o.arrowTypePanel=new xg("Arrow type","end"),o.arrowTypePanel.onArrowTypeChanged=o.setArrowType,o}return Nt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.arrow1&&r!==this.arrow2)},e.prototype.getArrowPoints=function(r,i){var n=this.arrowBaseWidth+2*this.strokeWidth,o=this.arrowBaseHeight+2*this.strokeWidth;return r-n/2+","+(i+o/2)+" "+r+","+(i-o/2)+" "+(r+n/2)+","+(i+o/2)},e.prototype.createTips=function(){this.arrow1=J.createPolygon(this.getArrowPoints(this.x1,this.y1),[["fill",this.strokeColor]]),this.arrow1.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.arrow1),this.arrow2=J.createPolygon(this.getArrowPoints(this.x2,this.y2),[["fill",this.strokeColor]]),this.arrow2.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.arrow2)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="creating"&&this.createTips()},e.prototype.adjustVisual=function(){if(t.prototype.adjustVisual.call(this),this.arrow1&&this.arrow2){this.arrow1.style.display=this.arrowType==="both"||this.arrowType==="start"?"":"none",this.arrow2.style.display=this.arrowType==="both"||this.arrowType==="end"?"":"none",J.setAttributes(this.arrow1,[["points",this.getArrowPoints(this.x1,this.y1)],["fill",this.strokeColor]]),J.setAttributes(this.arrow2,[["points",this.getArrowPoints(this.x2,this.y2)],["fill",this.strokeColor]]);var r=0;Math.abs(this.x1-this.x2)>.1&&(r=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2));var i=this.arrow1.transform.baseVal.getItem(0);i.setRotate(r,this.x1,this.y1),this.arrow1.transform.baseVal.replaceItem(i,0);var n=this.arrow2.transform.baseVal.getItem(0);n.setRotate(r+180,this.x2,this.y2),this.arrow2.transform.baseVal.replaceItem(n,0)}},e.prototype.setArrowType=function(r){this.arrowType=r,this.adjustVisual(),this.stateChanged()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel,this.arrowTypePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({arrowType:this.arrowType},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r);var i=r;this.arrowType=i.arrowType,this.createTips(),this.adjustVisual()},e.typeName="ArrowMarker",e.title="Arrow marker",e.icon='<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 7 15.59V9H5v10h10v-2H8.41L19 6.41z"/></svg>',e}(Ia),pf=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.fillColor=n.defaultFillColor,o.strokeWidth=0,o.fillPanel=new pe("Color",n.defaultColorSet,n.defaultFillColor),o.fillPanel.onColorChanged=o.setFillColor,o}return Nt(e,t),Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.fillPanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=t.prototype.getState.call(this);return r.typeName=e.typeName,r},e.typeName="CoverMarker",e.title="Cover marker",e.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4z"/></svg>',e}(hf),vf=function(t){function e(r,i,n,o,s){var a=t.call(this,r,o||'<svg viewBox="0 0 24 24"><path d="M17.66 8L12 2.35 6.34 8A8.02 8.02 0 004 13.64c0 2 .78 4.11 2.34 5.67a7.99 7.99 0 0011.32 0c1.56-1.56 2.34-3.67 2.34-5.67S19.22 9.56 17.66 8M6 14c0-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 18 12 18 14H6z"/></svg>',s||"opacity-panel")||this;return a.opacities=[],a.opacityBoxes=[],a.opacities=i,a.currentOpacity=n,a.setCurrentOpacity=a.setCurrentOpacity.bind(a),a}return Nt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",i.style.justifyContent="space-between",this.opacities.forEach(function(n){var o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.padding="5px",o.style.borderWidth="2px",o.style.borderStyle="solid",o.style.borderColor=n===r.currentOpacity?r.uiStyleSettings.toolboxAccentColor:"transparent",o.addEventListener("click",function(){r.setCurrentOpacity(n,o)}),i.appendChild(o);var s=document.createElement("div");s.innerText=100*n+"%",o.appendChild(s),r.opacityBoxes.push(o)}),i},e.prototype.setCurrentOpacity=function(r,i){var n=this;this.currentOpacity=r,this.opacityBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onOpacityChanged&&this.onOpacityChanged(this.currentOpacity)},e}(wi),ss=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.setOpacity=o.setOpacity.bind(o),o.fillColor=n.defaultHighlightColor,o.strokeWidth=0,o.opacity=n.defaultHighlightOpacity,o.fillPanel=new pe("Color",n.defaultColorSet,o.fillColor),o.fillPanel.onColorChanged=o.setFillColor,o.opacityPanel=new vf("Opacity",n.defaultOpacitySteps,o.opacity),o.opacityPanel.onOpacityChanged=o.setOpacity,o}return Nt(e,t),e.prototype.setOpacity=function(r){this.opacity=r,this.visual&&J.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.fillPanel,this.opacityPanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=t.prototype.getState.call(this);return r.typeName=e.typeName,r},e.typeName="HighlightMarker",e.title="Highlight marker",e.icon='<svg viewBox="0 0 24 24"><path d="M18.5 1.15c-.53 0-1.04.19-1.43.58l-5.81 5.82 5.65 5.65 5.82-5.81c.77-.78.77-2.04 0-2.83l-2.84-2.83c-.39-.39-.89-.58-1.39-.58M10.3 8.5l-5.96 5.96c-.78.78-.78 2.04.02 2.85C3.14 18.54 1.9 19.77.67 21h5.66l.86-.86c.78.76 2.03.75 2.81-.02l5.95-5.96"/></svg>',e}(pf),gf='<svg viewBox="0 0 24 24"><path d="M9.62 12L12 5.67 14.37 12M11 3L5.5 17h2.25l1.12-3h6.25l1.13 3h2.25L13 3h-2z"/></svg>',Ra='<svg viewBox="0 0 24 24"><path d="M19 11.5s-2 2.17-2 3.5a2 2 0 002 2 2 2 0 002-2c0-1.33-2-3.5-2-3.5M5.21 10L10 5.21 14.79 10m1.77-1.06L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.56-.59 1.53 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.59.59-1.56 0-2.12z"/></svg>',uu=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.bgColor="transparent",o.tipPosition={x:0,y:0},o.tipBase1Position={x:0,y:0},o.tipBase2Position={x:0,y:0},o.tipMoving=!1,o.color=n.defaultStrokeColor,o.bgColor=n.defaultFillColor,o.fontFamily=n.defaultFontFamily,o.defaultSize={x:100,y:30},o.setBgColor=o.setBgColor.bind(o),o.getTipPoints=o.getTipPoints.bind(o),o.positionTip=o.positionTip.bind(o),o.setTipPoints=o.setTipPoints.bind(o),o.colorPanel=new pe("Text color",n.defaultColorSet,o.color,gf,"text-color-panel"),o.colorPanel.onColorChanged=o.setColor,o.bgColorPanel=new pe("Fill color",n.defaultColorSet,o.bgColor,Ra,"fill-color-panel"),o.bgColorPanel.onColorChanged=o.setBgColor,o.fontFamilyPanel=new Oa("Font",n.defaultFontFamilies,n.defaultFontFamily),o.fontFamilyPanel.onFontChanged=o.setFont,o.tipGrip=new Ba,o.tipGrip.visual.transform.baseVal.appendItem(J.createTransform()),o.controlBox.appendChild(o.tipGrip.visual),o}return Nt(e,t),e.prototype.ownsTarget=function(r){return t.prototype.ownsTarget.call(this,r)||this.tipGrip.ownsTarget(r)||this.tip===r},e.prototype.createTip=function(){J.setAttributes(this.bgRectangle,[["fill",this.bgColor],["rx","10px"]]),this.tip=J.createPolygon(this.getTipPoints(),[["fill",this.bgColor]]),this.visual.appendChild(this.tip)},e.prototype.pointerDown=function(r,i){this.state==="new"&&t.prototype.pointerDown.call(this,r,i),this.state==="creating"?this.createTip():this.tipGrip.ownsTarget(i)?(this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.tipMoving=!0):t.prototype.pointerDown.call(this,r,i)},e.prototype.pointerUp=function(r){if(this.tipMoving)this.tipMoving=!1,this.isMoved=!0,t.prototype.pointerUp.call(this,r);else{var i=this.state==="creating";t.prototype.pointerUp.call(this,r),this.setTipPoints(i),this.positionTip()}},e.prototype.manipulate=function(r){if(this.tipMoving){var i=this.unrotatePoint(r);this.tipPosition={x:i.x-this.manipulationStartLeft,y:i.y-this.manipulationStartTop},this.positionTip()}else t.prototype.manipulate.call(this,r)},e.prototype.setBgColor=function(r){this.bgRectangle&&this.tip&&(J.setAttributes(this.bgRectangle,[["fill",r]]),J.setAttributes(this.tip,[["fill",r]])),this.bgColor=r,this.fillColorChanged(r)},e.prototype.getTipPoints=function(){return this.setTipPoints(this.state==="creating"),this.tipBase1Position.x+","+this.tipBase1Position.y+" "+this.tipBase2Position.x+","+this.tipBase2Position.y+" "+this.tipPosition.x+","+this.tipPosition.y},e.prototype.setTipPoints=function(r){r===void 0&&(r=!1);var i=Math.min(this.height/2,15),n=this.height/5;r&&(this.tipPosition={x:i+n/2,y:this.height+20});var o=Math.atan(this.height/2/(this.width/2));this.tipPosition.x<this.width/2&&this.tipPosition.y<this.height/2?o<Math.atan((this.height/2-this.tipPosition.y)/(this.width/2-this.tipPosition.x))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:i,y:0},this.tipBase2Position={x:i+n,y:0}):(this.tipBase1Position={x:0,y:i},this.tipBase2Position={x:0,y:i+n}):this.tipPosition.x>=this.width/2&&this.tipPosition.y<this.height/2?o<Math.atan((this.height/2-this.tipPosition.y)/(this.tipPosition.x-this.width/2))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-i-n,y:0},this.tipBase2Position={x:this.width-i,y:0}):(this.tipBase1Position={x:this.width,y:i},this.tipBase2Position={x:this.width,y:i+n}):this.tipPosition.x>=this.width/2&&this.tipPosition.y>=this.height/2?o<Math.atan((this.tipPosition.y-this.height/2)/(this.tipPosition.x-this.width/2))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-i-n,y:this.height},this.tipBase2Position={x:this.width-i,y:this.height}):(this.tipBase1Position={x:this.width,y:this.height-i-n},this.tipBase2Position={x:this.width,y:this.height-i}):o<Math.atan((this.tipPosition.y-this.height/2)/(this.width/2-this.tipPosition.x))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:i,y:this.height},this.tipBase2Position={x:i+n,y:this.height}):(this.tipBase1Position={x:0,y:this.height-i},this.tipBase2Position={x:0,y:this.height-i-n})},e.prototype.resize=function(r){t.prototype.resize.call(this,r),this.positionTip()},e.prototype.positionTip=function(){J.setAttributes(this.tip,[["points",this.getTipPoints()]]);var r=this.tipGrip.visual.transform.baseVal.getItem(0);r.setTranslate(this.tipPosition.x,this.tipPosition.y),this.tipGrip.visual.transform.baseVal.replaceItem(r,0)},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.bgColorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),e.prototype.select=function(){this.positionTip(),t.prototype.select.call(this)},e.prototype.getState=function(){var r=Object.assign({bgColor:this.bgColor,tipPosition:this.tipPosition},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){var i=r;this.bgColor=i.bgColor,this.tipPosition=i.tipPosition,t.prototype.restoreState.call(this,r),this.createTip(),this.setTipPoints()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.tipPosition={x:this.tipPosition.x*r,y:this.tipPosition.y*i},this.positionTip()},e.typeName="CalloutMarker",e.title="Callout marker",e.icon='<svg viewBox="0 0 24 24"><path d="M4 2h16a2 2 0 012 2v12a2 2 0 01-2 2h-4l-4 4-4-4H4a2 2 0 01-2-2V4a2 2 0 012-2m0 2v12h4.83L12 19.17 15.17 16H20V4H4m2 3h12v2H6V7m0 4h10v2H6v-2z"/></svg>',e}(Oi),Ls=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.fillColor="transparent",o.strokeColor="transparent",o.strokeWidth=0,o.strokeDasharray="",o.opacity=1,o.strokeColor=n.defaultColor,o.strokeWidth=n.defaultStrokeWidth,o.strokeDasharray=n.defaultStrokeDasharray,o.fillColor=n.defaultFillColor,o.setStrokeColor=o.setStrokeColor.bind(o),o.setFillColor=o.setFillColor.bind(o),o.setStrokeWidth=o.setStrokeWidth.bind(o),o.setStrokeDasharray=o.setStrokeDasharray.bind(o),o.setOpacity=o.setOpacity.bind(o),o.createVisual=o.createVisual.bind(o),o.strokePanel=new pe("Line color",Ji(n.defaultColorSet,["transparent"]),n.defaultColor,void 0,"stroke-color-panel"),o.strokePanel.onColorChanged=o.setStrokeColor,o.fillPanel=new pe("Fill color",Ji(n.defaultColorSet,["transparent"]),o.fillColor,Ra,"fill-color-panel"),o.fillPanel.onColorChanged=o.setFillColor,o.strokeWidthPanel=new _i("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.strokeWidthPanel.onWidthChanged=o.setStrokeWidth,o.strokeStylePanel=new cn("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),o.strokeStylePanel.onStyleChanged=o.setStrokeDasharray,o.opacityPanel=new vf("Opacity",n.defaultOpacitySteps,o.opacity),o.opacityPanel.onOpacityChanged=o.setOpacity,o}return Nt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual)},e.prototype.createVisual=function(){this.visual=J.createEllipse(this.width/2,this.height/2,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},e.prototype.manipulate=function(r){t.prototype.manipulate.call(this,r)},e.prototype.resize=function(r){t.prototype.resize.call(this,r),this.setSize()},e.prototype.setSize=function(){t.prototype.setSize.call(this),J.setAttributes(this.visual,[["cx",(this.width/2).toString()],["cy",(this.height/2).toString()],["rx",(this.width/2).toString()],["ry",(this.height/2).toString()]])},e.prototype.pointerUp=function(r){t.prototype.pointerUp.call(this,r),this.setSize()},e.prototype.setStrokeColor=function(r){this.strokeColor=r,this.visual&&J.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},e.prototype.setFillColor=function(r){this.fillColor=r,this.visual&&J.setAttributes(this.visual,[["fill",this.fillColor]]),this.fillColorChanged(r),this.stateChanged()},e.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.visual&&J.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},e.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.visual&&J.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},e.prototype.setOpacity=function(r){this.opacity=r,this.visual&&J.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.opacityPanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.opacity=i.opacity,this.createVisual(),t.prototype.restoreState.call(this,r),this.setSize()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.setSize()},e.typeName="EllipseMarker",e.title="Ellipse marker",e.icon='<svg viewBox="0 0 24 24"><path d="M12 4C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',e}(un),Cg=function(t){function e(r,i,n){return t.call(this,r,i,n)||this}return Nt(e,t),Object.defineProperty(e.prototype,"tipLength",{get:function(){return 10+3*this.strokeWidth},enumerable:!1,configurable:!0}),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.tip1&&r!==this.tip2)},e.prototype.createTips=function(){this.tip1=J.createLine(this.x1-this.tipLength/2,this.y1,this.x1+this.tipLength/2,this.y1,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip1.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.tip1),this.tip2=J.createLine(this.x2-this.tipLength/2,this.y2,this.x2+this.tipLength/2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip2.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.tip2)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="creating"&&this.createTips()},e.prototype.adjustVisual=function(){if(t.prototype.adjustVisual.call(this),this.tip1&&this.tip2&&(J.setAttributes(this.tip1,[["x1",(this.x1-this.tipLength/2).toString()],["y1",this.y1.toString()],["x2",(this.x1+this.tipLength/2).toString()],["y2",this.y1.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.tip2,[["x1",(this.x2-this.tipLength/2).toString()],["y1",this.y2.toString()],["x2",(this.x2+this.tipLength/2).toString()],["y2",this.y2.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),Math.abs(this.x1-this.x2)>.1)){var r=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2),i=this.tip1.transform.baseVal.getItem(0);i.setRotate(r,this.x1,this.y1),this.tip1.transform.baseVal.replaceItem(i,0);var n=this.tip2.transform.baseVal.getItem(0);n.setRotate(r+180,this.x2,this.y2),this.tip2.transform.baseVal.replaceItem(n,0)}},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=t.prototype.getState.call(this);return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r),this.createTips(),this.adjustVisual()},e.typeName="MeasurementMarker",e.title="Measurement marker",e.icon='<svg viewBox="0 0 24 24"><path d="M1.39 18.36l1.77-1.76L4.58 18l1.06-1.05-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.42 1.41L10.59 12l-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.41 1.41 1.07-1.06-1.42-1.41 1.42-1.42L18 6.7l1.07-1.06-2.47-2.48 1.76-1.77 4.25 4.25L5.64 22.61l-4.25-4.25z"/></svg>',e}(Ia),Sg=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.strokePanel.colors=n.defaultColorSet,o.fillColor="transparent",o}return Nt(e,t),Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=t.prototype.getState.call(this);return r.typeName=e.typeName,r},e.typeName="EllipseFrameMarker",e.title="Ellipse frame marker",e.icon='<svg viewBox="0 0 24 24"><path d="M12 6c4.41 0 8 2.69 8 6s-3.59 6-8 6-8-2.69-8-6 3.59-6 8-6m0-2C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',e}(Ls),wg=function(){function t(){this.undoStack=[],this.redoStack=[]}return Object.defineProperty(t.prototype,"isUndoPossible",{get:function(){return this.undoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRedoPossible",{get:function(){return this.redoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"undoStepCount",{get:function(){return this.undoStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"redoStepCount",{get:function(){return this.redoStack.length},enumerable:!1,configurable:!0}),t.prototype.addUndoStep=function(e){this.undoStack.length!==0&&JSON.stringify(this.undoStack[this.undoStack.length-1])===JSON.stringify(e)||(this.undoStack.push(e),JSON.stringify(this.lastRedoStep)!==JSON.stringify(e)&&this.redoStack.splice(0,this.redoStack.length))},t.prototype.replaceLastUndoStep=function(e){this.undoStack.length>0&&(this.undoStack[this.undoStack.length-1]=e)},t.prototype.getLastUndoStep=function(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0},t.prototype.undo=function(){if(this.undoStack.length>1){var e=this.undoStack.pop();return e!==void 0&&this.redoStack.push(e),this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0}},t.prototype.redo=function(){return this.lastRedoStep=this.redoStack.pop(),this.lastRedoStep},t}(),_g=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.strokeColor="transparent",o.strokeWidth=0,o.strokeDasharray="",o.curveX=0,o.curveY=0,o.manipulationStartCurveX=0,o.manipulationStartCurveY=0,o.setStrokeColor=o.setStrokeColor.bind(o),o.setStrokeWidth=o.setStrokeWidth.bind(o),o.setStrokeDasharray=o.setStrokeDasharray.bind(o),o.positionGrips=o.positionGrips.bind(o),o.addControlGrips=o.addControlGrips.bind(o),o.adjustVisual=o.adjustVisual.bind(o),o.setupControlBox=o.setupControlBox.bind(o),o.resize=o.resize.bind(o),o.strokeColor=n.defaultColor,o.strokeWidth=n.defaultStrokeWidth,o.strokeDasharray=n.defaultStrokeDasharray,o.strokePanel=new pe("Line color",n.defaultColorSet,n.defaultColor),o.strokePanel.onColorChanged=o.setStrokeColor,o.strokeWidthPanel=new _i("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.strokeWidthPanel.onWidthChanged=o.setStrokeWidth,o.strokeStylePanel=new cn("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),o.strokeStylePanel.onStyleChanged=o.setStrokeDasharray,o}return Nt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.selectorCurve&&r!==this.visibleCurve&&!this.curveGrip.ownsTarget(r))},e.prototype.getPathD=function(){return"M "+this.x1+" "+this.y1+" Q "+this.curveX+" "+this.curveY+", "+this.x2+" "+this.y2},e.prototype.createVisual=function(){this.visual=J.createGroup(),this.selectorCurve=J.createPath(this.getPathD(),[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()],["fill","transparent"]]),this.visibleCurve=J.createPath(this.getPathD(),[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["fill","transparent"]]),this.visual.appendChild(this.selectorCurve),this.visual.appendChild(this.visibleCurve),this.addMarkerVisualToContainer(this.visual)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.manipulationStartCurveX=this.curveX,this.manipulationStartCurveY=this.curveY,this.state==="new"&&(this.curveX=r.x,this.curveY=r.y),this.state==="new"?(this.createVisual(),this.adjustVisual(),this._state="creating"):this.curveGrip.ownsTarget(i)&&(this.activeGrip=this.curveGrip,this._state="resize")},e.prototype.adjustVisual=function(){this.selectorCurve&&this.visibleCurve&&(this.selectorCurve.setAttribute("d",this.getPathD()),this.visibleCurve.setAttribute("d",this.getPathD()),J.setAttributes(this.visibleCurve,[["stroke",this.strokeColor]]),J.setAttributes(this.visibleCurve,[["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.visibleCurve,[["stroke-dasharray",this.strokeDasharray.toString()]]))},e.prototype.setupControlBox=function(){t.prototype.setupControlBox.call(this),this.curveControlLine1=J.createLine(this.x1,this.y1,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.curveControlLine2=J.createLine(this.x2,this.y2,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.insertBefore(this.curveControlLine1,this.controlBox.firstChild),this.controlBox.insertBefore(this.curveControlLine2,this.controlBox.firstChild)},e.prototype.addControlGrips=function(){this.curveGrip=this.createGrip(),this.curveX=0,this.curveY=0,t.prototype.addControlGrips.call(this)},e.prototype.positionGrips=function(){t.prototype.positionGrips.call(this);var r=this.curveGrip.GRIP_SIZE;this.positionGrip(this.curveGrip.visual,this.curveX-r/2,this.curveY-r/2),this.curveControlLine1&&this.curveControlLine2&&(this.curveControlLine1.setAttribute("x1",this.x1.toString()),this.curveControlLine1.setAttribute("y1",this.y1.toString()),this.curveControlLine1.setAttribute("x2",this.curveX.toString()),this.curveControlLine1.setAttribute("y2",this.curveY.toString()),this.curveControlLine2.setAttribute("x1",this.x2.toString()),this.curveControlLine2.setAttribute("y1",this.y2.toString()),this.curveControlLine2.setAttribute("x2",this.curveX.toString()),this.curveControlLine2.setAttribute("y2",this.curveY.toString()))},e.prototype.manipulate=function(r){this.state==="move"&&(this.curveX=this.manipulationStartCurveX+r.x-this.manipulationStartX,this.curveY=this.manipulationStartCurveY+r.y-this.manipulationStartY),t.prototype.manipulate.call(this,r)},e.prototype.resize=function(r){this.activeGrip===this.curveGrip&&(this.curveX=r.x,this.curveY=r.y),t.prototype.resize.call(this,r),this.state==="creating"&&(this.curveX=this.x1+(this.x2-this.x1)/2,this.curveY=this.y1+(this.y2-this.y1)/2)},e.prototype.setStrokeColor=function(r){this.strokeColor=r,this.adjustVisual(),this.colorChanged(r)},e.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.adjustVisual()},e.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.adjustVisual()},e.prototype.scale=function(r,i){this.curveX=this.curveX*r,this.curveY=this.curveY*i,t.prototype.scale.call(this,r,i)},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,curveX:this.curveX,curveY:this.curveY},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r);var i=r;this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.curveX=i.curveX,this.curveY=i.curveY,this.createVisual(),this.adjustVisual()},e.typeName="CurveMarker",e.title="Curve marker",e.icon='<svg viewBox="0 0 24 24"><path d="M18.5 2A1.5 1.5 0 0120 3.5 1.5 1.5 0 0118.5 5c-.23 0-.45-.05-.65-.15l-3.69 3.7.34.45c2.19-1.26 4.76-2 7.5-2l1 .03v2.01L22 9c-2.58 0-5 .75-7 2.04A3.96 3.96 0 0111.04 15C9.75 17 9 19.42 9 22l.04 1H7.03L7 22c0-2.74.74-5.31 2-7.5l-.45-.34-3.7 3.69c.1.2.15.42.15.65A1.5 1.5 0 013.5 20 1.5 1.5 0 012 18.5 1.5 1.5 0 013.5 17c.23 0 .45.05.65.15l3.69-3.7C7.31 12.78 7 11.92 7 11a4 4 0 014-4c.92 0 1.78.31 2.45.84l3.7-3.69c-.1-.2-.15-.42-.15-.65A1.5 1.5 0 0118.5 2M11 9a2 2 0 00-2 2 2 2 0 002 2 2 2 0 002-2 2 2 0 00-2-2z"/></svg>',e}(df),kg=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.fillColor="transparent",o.strokeColor="transparent",o.strokeWidth=0,o.strokeDasharray="",o.textColor="transparent",o.fontSize="1rem",o.isMoved=!1,o.captionText="Caption",o.PADDING=5,o.captionBoxWidth=0,o.captionBoxHeight=0,o.strokeColor=n.defaultColor,o.strokeWidth=n.defaultStrokeWidth,o.strokeDasharray=n.defaultStrokeDasharray,o.fillColor=n.defaultFillColor,o.textColor=n.defaultStrokeColor,o.fontFamily=n.defaultFontFamily,o.fontSize=n.defaultCaptionFontSize,o.captionText=n.defaultCaptionText,o.setStrokeColor=o.setStrokeColor.bind(o),o.setFillColor=o.setFillColor.bind(o),o.setStrokeWidth=o.setStrokeWidth.bind(o),o.setStrokeDasharray=o.setStrokeDasharray.bind(o),o.createVisual=o.createVisual.bind(o),o.sizeCaption=o.sizeCaption.bind(o),o.setCaptionText=o.setCaptionText.bind(o),o.showTextEditor=o.showTextEditor.bind(o),o.positionTextEditor=o.positionTextEditor.bind(o),o.finishTextEditing=o.finishTextEditing.bind(o),o.setFont=o.setFont.bind(o),o.setTextColor=o.setTextColor.bind(o),o.strokePanel=new pe("Line color",Ji(n.defaultColorSet,["transparent"]),o.strokeColor,void 0,"stroke-color-panel"),o.strokePanel.onColorChanged=o.setStrokeColor,o.fillPanel=new pe("Fill color",Ji(n.defaultColorSet,["transparent"]),o.fillColor,Ra,"fill-color-panel"),o.fillPanel.onColorChanged=o.setFillColor,o.strokeWidthPanel=new _i("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.strokeWidthPanel.onWidthChanged=o.setStrokeWidth,o.strokeStylePanel=new cn("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),o.strokeStylePanel.onStyleChanged=o.setStrokeDasharray,o.fontFamilyPanel=new Oa("Font",n.defaultFontFamilies,n.defaultFontFamily),o.fontFamilyPanel.onFontChanged=o.setFont,o.textColorPanel=new pe("Text color",n.defaultColorSet,o.textColor,gf,"text-color-panel"),o.textColorPanel.onColorChanged=o.setTextColor,o}return Nt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.frame&&r!==this.captionBg&&r!==this.captionElement)},e.prototype.createVisual=function(){this.visual=J.createGroup(),this.addMarkerVisualToContainer(this.visual),this.captionBg=J.createRect(1,1,[["fill",this.fillColor]]),this.visual.appendChild(this.captionBg),this.captionElement=J.createText([["fill",this.textColor],["font-family",this.fontFamily]]),this.captionElement.style.fontSize=this.fontSize,this.captionElement.style.textAnchor="start",this.captionElement.style.dominantBaseline="text-before-edge",this.captionElement.textContent=this.captionText,this.visual.appendChild(this.captionElement),this.frame=J.createRect(this.width,this.height,[["fill","transparent"],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray]]),this.visual.appendChild(this.frame),this.sizeCaption()},e.prototype.setCaptionText=function(r){this.captionText=r,this.captionElement.textContent=this.captionText,this.sizeCaption()},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.isMoved=!1,this.pointerDownPoint=r,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},e.prototype.manipulate=function(r){t.prototype.manipulate.call(this,r),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(r.x-this.pointerDownPoint.x)>5||Math.abs(r.y-this.pointerDownPoint.y)>5)},e.prototype.resize=function(r){t.prototype.resize.call(this,r),this.setSize()},e.prototype.sizeCaption=function(){var r=this.captionElement.getBBox();this.captionText.trim()!==""?(this.captionBoxWidth=r.width+2*this.PADDING,this.captionBoxHeight=r.height+2*this.PADDING):(this.captionBoxWidth=0,this.captionBoxHeight=0),J.setAttributes(this.captionBg,[["width",this.captionBoxWidth.toString()],["height",this.captionBoxHeight.toString()],["clip-path","path('M0,0 H"+this.width+" V"+this.height+" H"+-this.width+" Z')"]]),J.setAttributes(this.captionElement,[["x",this.PADDING.toString()],["y",this.PADDING.toString()],["clip-path","path('M0,0 H"+(this.width-this.PADDING)+" V"+this.height+" H"+(-this.width-this.PADDING)+" Z')"]])},e.prototype.showTextEditor=function(){var r=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditBox=document.createElement("input"),this.textEditBox.style.position="absolute",this.textEditBox.style.width=this.width+"px",this.captionBoxHeight>0&&(this.textEditBox.style.height=this.captionBoxHeight+"px"),this.textEditBox.style.fontSize=this.fontSize,this.textEditBox.style.fontFamily=this.fontFamily,this.textEditBox.style.backgroundColor=this.fillColor,this.textEditBox.style.color=this.textColor,this.textEditBox.style.borderWidth="0",this.textEditBox.setAttribute("value",this.captionText),this.textEditBox.select(),this.textEditDiv.appendChild(this.textEditBox),this.overlayContainer.appendChild(this.textEditDiv),this.textEditBox.addEventListener("pointerup",function(i){i.stopPropagation()}),this.textEditBox.addEventListener("keypress",function(i){i.key==="Enter"&&r.finishTextEditing(r.textEditBox.value)}),this.textEditBox.addEventListener("keyup",function(i){i.cancelBubble=!0}),this.textEditBox.addEventListener("blur",function(){r.finishTextEditing(r.textEditBox.value)}),this.textEditDiv.addEventListener("pointerup",function(){r.finishTextEditing(r.textEditBox.value)}),this.positionTextEditor(),this.textEditBox.focus()},e.prototype.positionTextEditor=function(){this.state==="edit"&&(this.textEditBox===void 0?this.showTextEditor():(this.textEditBox.style.left=this.left+"px",this.textEditBox.style.top=this.top+"px",this.textEditBox.style.transform="rotate("+this.rotationAngle+"deg)",this.textEditBox.style.transformOrigin=this.width/2+"px "+this.height/2+"px"))},e.prototype.finishTextEditing=function(r){this.setCaptionText(r.trim()),this.overlayContainer.innerHTML="",this.stateChanged()},e.prototype.setFont=function(r){this.captionElement&&J.setAttributes(this.captionElement,[["font-family",r]]),this.fontFamily=r,this.textEditBox&&(this.textEditBox.style.fontFamily=this.fontFamily),this.sizeCaption(),this.stateChanged()},e.prototype.setTextColor=function(r){this.captionElement&&J.setAttributes(this.captionElement,[["fill",r]]),this.textColor=r,this.textEditBox&&(this.textEditBox.style.color=this.textColor),this.stateChanged()},e.prototype.setSize=function(){t.prototype.setSize.call(this),J.setAttributes(this.frame,[["width",this.width.toString()],["height",this.height.toString()]]),this.sizeCaption()},e.prototype.pointerUp=function(r){t.prototype.pointerUp.call(this,r),this.setSize(),!this.isMoved&&Date.now()-this.pointerDownTimestamp>500&&this.showTextEditor(),this.pointerDownPoint=void 0},e.prototype.dblClick=function(r,i){t.prototype.dblClick.call(this,r,i),this.showTextEditor()},e.prototype.setStrokeColor=function(r){this.strokeColor=r,this.frame&&J.setAttributes(this.frame,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},e.prototype.setFillColor=function(r){this.fillColor=r,this.captionBg&&J.setAttributes(this.captionBg,[["fill",this.fillColor]]),this.fillColorChanged(r),this.stateChanged()},e.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.frame&&J.setAttributes(this.frame,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},e.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.frame&&J.setAttributes(this.frame,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.fontFamilyPanel,this.textColorPanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:1,textColor:this.textColor,fontFamily:this.fontFamily,fontSize:this.fontSize,captionText:this.captionText},t.prototype.getState.call(this));return r.typeName=this.typeName,r},e.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.textColor=i.textColor,this.fontFamily=i.fontFamily,this.captionText=i.captionText,this.fontSize=i.fontSize,this.createVisual(),t.prototype.restoreState.call(this,r),this.setSize()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.setSize()},e.typeName="CaptionFrameMarker",e.title="Caption frame marker",e.icon='<svg viewBox="0 0 24 24"><path d="M5 3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2H5m0 2h14v14H5V5m2 2v2h10V7H7z"/></svg>',e}(un),Pe=function(){function t(e,r){r===void 0&&(r=!1),this.cancelable=!1,this._defaultPrevented=!1,this.markerArea=e,this.cancelable=r}return Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this._defaultPrevented=!0},t}(),Eg=function(t){function e(r,i,n){var o=t.call(this,r,!1)||this;return o.dataUrl=i,o.state=n,o}return Nt(e,t),e}(Pe),qe=function(t){function e(r,i,n){n===void 0&&(n=!1);var o=t.call(this,r,n)||this;return o.marker=i,o}return Nt(e,t),e}(Pe),Mg=function(){function t(){this.render=[],this.beforeclose=[],this.close=[],this.show=[],this.restorestate=[],this.statechange=[],this.markerselect=[],this.markerdeselect=[],this.markercreating=[],this.markercreate=[],this.markerbeforedelete=[],this.markerdelete=[],this.markerchange=[],this.focus=[],this.blur=[]}return t.prototype.addEventListener=function(e,r){this[e].push(r)},t.prototype.removeEventListener=function(e,r){var i=this[e].indexOf(r);i>-1&&this[e].splice(i,1)},t}(),Dg=function(){function t(e){this.touchPoints=0,this._availableMarkerTypes=this.DEFAULT_MARKER_TYPES,this.mode="select",this.markers=[],this.isDragging=!1,this.renderEventListeners=[],this.closeEventListeners=[],this.settings=new bg,this._isOpen=!1,this.undoRedoManager=new wg,this.renderAtNaturalSize=!1,this.renderImageType="image/png",this.renderMarkersOnly=!1,this.zoomSteps=[1,1.5,2,4],this._zoomLevel=1,this._isResizing=!1,this.prevPanPoint={x:0,y:0},this.eventListeners=new Mg,this._silentRenderMode=!1,this._isFocused=!1,this._instanceNo=t.instanceCounter++,this.styles=new vg(this.instanceNo),this.uiStyleSettings=this.styles.settings,this.target=e,this.targetRoot=document.body,this.width=e.clientWidth,this.height=e.clientHeight,this.styles.removeStyleSheet(),this.open=this.open.bind(this),this.setTopLeft=this.setTopLeft.bind(this),this.toolbarButtonClicked=this.toolbarButtonClicked.bind(this),this.createNewMarker=this.createNewMarker.bind(this),this.addNewMarker=this.addNewMarker.bind(this),this.markerCreated=this.markerCreated.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onDblClick=this.onDblClick.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.overrideOverflow=this.overrideOverflow.bind(this),this.restoreOverflow=this.restoreOverflow.bind(this),this.close=this.close.bind(this),this.closeUI=this.closeUI.bind(this),this.addCloseEventListener=this.addCloseEventListener.bind(this),this.removeCloseEventListener=this.removeCloseEventListener.bind(this),this.addRenderEventListener=this.addRenderEventListener.bind(this),this.removeRenderEventListener=this.removeRenderEventListener.bind(this),this.clientToLocalCoordinates=this.clientToLocalCoordinates.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.deleteSelectedMarker=this.deleteSelectedMarker.bind(this),this.setWindowHeight=this.setWindowHeight.bind(this),this.removeMarker=this.removeMarker.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this),this.onPopupTargetResize=this.onPopupTargetResize.bind(this),this.showNotesEditor=this.showNotesEditor.bind(this),this.hideNotesEditor=this.hideNotesEditor.bind(this),this.stepZoom=this.stepZoom.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.markerStateChanged=this.markerStateChanged.bind(this),this.switchToSelectMode=this.switchToSelectMode.bind(this),this.addDefs=this.addDefs.bind(this),this.addDefsToImage=this.addDefsToImage.bind(this),this.addMarkerEvents=this.addMarkerEvents.bind(this)}return Object.defineProperty(t.prototype,"ALL_MARKER_TYPES",{get:function(){return[ns,Bi,os,Oi,Sg,Ls,ss,uu,Cg,pf,Ia,_g,kg]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"DEFAULT_MARKER_TYPES",{get:function(){return[ns,Bi,os,Oi,Ls,ss,uu]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BASIC_MARKER_TYPES",{get:function(){return[ns,Bi,os,Oi,ss]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableMarkerTypes",{get:function(){return this._availableMarkerTypes},set:function(e){var r=this;this._availableMarkerTypes.splice(0),e.forEach(function(i){if(typeof i=="string"){var n=r.ALL_MARKER_TYPES.find(function(o){return o.typeName===i});n!==void 0&&r._availableMarkerTypes.push(n)}else r._availableMarkerTypes.push(i)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentMarker",{get:function(){return this._currentMarker},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUndoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isUndoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRedoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isRedoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoomLevel",{get:function(){return this._zoomLevel},set:function(e){this._zoomLevel=e,this.editorCanvas&&this.contentDiv&&(this.editorCanvas.style.transform="scale("+this._zoomLevel+")",this.contentDiv.scrollTo({left:(this.editorCanvas.clientWidth*this._zoomLevel-this.contentDiv.clientWidth)/2,top:(this.editorCanvas.clientHeight*this._zoomLevel-this.contentDiv.clientHeight)/2}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instanceNo",{get:function(){return this._instanceNo},enumerable:!1,configurable:!0}),t.prototype.open=function(){this.setupResizeObserver(),this.setEditingTarget(),this.setTopLeft(),this.initMarkerCanvas(),this.initOverlay(),this.attachEvents(),this.settings.displayMode==="popup"&&this.onPopupTargetResize(),au.isLicensed||this.addLogo(),this._isOpen=!0,this._isFocused=!0},t.prototype.show=function(){var e=this;this.styles.styleSheetRoot===void 0&&lu.styleSheetRoot!==void 0&&(this.styles.styleSheetRoot=lu.styleSheetRoot),this.markers.splice(0),this.setWindowHeight(),this.showUI(),this.open(),this.eventListeners.show.forEach(function(r){return r(new Pe(e))})},t.prototype.render=function(){return ou(this,void 0,void 0,function(){var e;return su(this,function(r){switch(r.label){case 0:return this.setCurrentMarker(),(e=new pg).naturalSize=this.renderAtNaturalSize,e.imageType=this.renderImageType,e.imageQuality=this.renderImageQuality,e.markersOnly=this.renderMarkersOnly,e.width=this.renderWidth,e.height=this.renderHeight,[4,e.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 1:return r.sent(),[4,e.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 2:return[2,r.sent()]}})})},t.prototype.close=function(e){var r=this;if(e===void 0&&(e=!1),this.isOpen){var i=!1;e||this.eventListeners.beforeclose.forEach(function(n){var o=new Pe(r,!0);n(o),o.defaultPrevented&&(i=!0)}),i||(this.coverDiv&&this.closeUI(),this.targetObserver&&(this.targetObserver.unobserve(this.target),this.targetObserver.unobserve(this.editorCanvas)),this.settings.displayMode==="popup"&&window.removeEventListener("resize",this.setWindowHeight),this.eventListeners.close.forEach(function(n){return n(new Pe(r))}),this.detachEvents(),this._isOpen=!1)}},t.prototype.addMarkersToToolbar=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];(e=this._availableMarkerTypes).push.apply(e,r)},t.prototype.addRenderEventListener=function(e){this.addEventListener("render",function(r){e(r.dataUrl,r.state)})},t.prototype.removeRenderEventListener=function(e){},t.prototype.addCloseEventListener=function(e){this.addEventListener("close",function(){e()})},t.prototype.removeCloseEventListener=function(e){},t.prototype.setupResizeObserver=function(){var e=this;this.settings.displayMode==="inline"?window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){e.resize(e.target.clientWidth,e.target.clientHeight)}),this.targetObserver.observe(this.target)):this.settings.displayMode==="popup"&&(window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){return e.onPopupTargetResize()}),this.targetObserver.observe(this.editorCanvas)),window.addEventListener("resize",this.setWindowHeight))},t.prototype.onPopupTargetResize=function(){var e=1*this.target.clientWidth/this.target.clientHeight,r=this.editorCanvas.clientWidth/e>this.editorCanvas.clientHeight?this.editorCanvas.clientHeight*e:this.editorCanvas.clientWidth,i=r<this.editorCanvas.clientWidth?this.editorCanvas.clientHeight:this.editorCanvas.clientWidth/e;this.resize(r,i)},t.prototype.setWindowHeight=function(){this.windowHeight=window.innerHeight},t.prototype.resize=function(e,r){this._isResizing=!0;var i=e/this.imageWidth,n=r/this.imageHeight;this.imageWidth=Math.round(e),this.imageHeight=Math.round(r),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px",this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.settings.displayMode!=="popup"?this.coverDiv.style.width=this.imageWidth.toString()+"px":(this.setTopLeft(),this.positionMarkerImage()),this.toolbar!==void 0&&this.toolbar.adjustLayout(),this.positionLogo(),this.scaleMarkers(i,n),this._isResizing=!1},t.prototype.scaleMarkers=function(e,r){var i,n=this;this._currentMarker&&this._currentMarker instanceof Oi?this._currentMarker.scale(e,r):(i=this._currentMarker,this.setCurrentMarker()),this.markers.forEach(function(o){o!==n._currentMarker&&o.scale(e,r)}),i!==void 0&&this.setCurrentMarker(i)},t.prototype.setEditingTarget=function(){this.imageWidth=Math.round(this.target.clientWidth),this.imageHeight=Math.round(this.target.clientHeight),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px"},t.prototype.setTopLeft=function(){var e=this.editingTarget.getBoundingClientRect(),r=this.editorCanvas.getBoundingClientRect();this.left=e.left-r.left,this.top=e.top-r.top},t.prototype.initMarkerCanvas=function(){this.markerImageHolder=document.createElement("div"),this.markerImageHolder.style.setProperty("touch-action","pinch-zoom"),this.markerImage=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.markerImage.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImage.style.pointerEvents="auto",this.markerImageHolder.style.position="absolute",this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.markerImageHolder.style.transformOrigin="top left",this.positionMarkerImage(),this.markerImageHolder.appendChild(this.markerImage),this.editorCanvas.appendChild(this.markerImageHolder)},t.prototype.addDefs=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];this.defs=J.createDefs(),this.addDefsToImage(),(e=this.defs).append.apply(e,r)},t.prototype.addDefsToImage=function(){this.defs&&this.markerImage.insertBefore(this.defs,this.markerImage.firstChild)},t.prototype.initOverlay=function(){this.overlayContainer=document.createElement("div"),this.overlayContainer.style.position="absolute",this.overlayContainer.style.left="0px",this.overlayContainer.style.top="0px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.overlayContainer.style.display="flex",this.markerImageHolder.appendChild(this.overlayContainer)},t.prototype.positionMarkerImage=function(){this.markerImageHolder.style.top=this.top/this.zoomLevel+"px",this.markerImageHolder.style.left=this.left/this.zoomLevel+"px"},t.prototype.attachEvents=function(){this.markerImage.addEventListener("pointerdown",this.onPointerDown),this.markerImage.addEventListener("touchmove",function(e){return e.preventDefault()}),this.markerImage.addEventListener("dblclick",this.onDblClick),this.attachWindowEvents()},t.prototype.attachWindowEvents=function(){window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerOut),window.addEventListener("pointerout",this.onPointerOut),window.addEventListener("pointerleave",this.onPointerUp),window.addEventListener("resize",this.onWindowResize),window.addEventListener("keyup",this.onKeyUp)},t.prototype.detachEvents=function(){this.markerImage.removeEventListener("pointerdown",this.onPointerDown),this.markerImage.removeEventListener("dblclick",this.onDblClick),this.detachWindowEvents()},t.prototype.detachWindowEvents=function(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerOut),window.removeEventListener("pointerout",this.onPointerOut),window.removeEventListener("pointerleave",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("keyup",this.onKeyUp)},t.prototype.addLogo=function(){this.logoUI=document.createElement("div"),this.logoUI.style.display="inline-block",this.logoUI.style.margin="0px",this.logoUI.style.padding="0px",this.logoUI.style.fill="#333333";var e=document.createElement("a");e.href="https://markerjs.com/",e.target="_blank",e.innerHTML='<svg viewBox="0 0 112 96" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="#e5f20d" fill-opacity=".647" d="M0 40.386h111.96V95.62H0z"/><path d="M93.61 61.452c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.591 1.048-1.481 0-2.222-.74-2.222-2.22 0-16.617-.533-29.347-1.604-38.192-1.068-8.842-2.92-13.265-5.552-13.265-4.443 0-10.94 15.509-19.497 46.52v.124c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.592 1.048-1.48 0-2.22-.74-2.22-2.22 0-3.29.165-8.392.493-15.302.33-7.732.494-13.82.494-18.262 0-6.17-.186-10.55-.556-13.142-.37-2.591-1.172-3.887-2.406-3.887-2.796 0-6.333 5.12-10.612 15.363C38.494 34.367 34.01 46.44 29.32 60.34l-1.11 3.209a5.714 5.714 0 01-1.42 2.097c-.617.578-1.295.864-2.036.864-.987 0-1.644-.081-1.974-.247-.328-.162-.533-.656-.617-1.48-.41-4.03-.74-9.418-.987-16.165-.163-1.728-.329-4.566-.494-8.515-.822-13.901-1.562-23.3-2.221-28.196-.657-4.893-.987-7.628-.987-8.205 0-.657.33-1.44.987-2.345.659-.903 1.276-1.357 1.85-1.357 1.319 0 2.387.947 3.21 2.838.411.906.863 4.526 1.357 10.859.493 6.335.905 14.19 1.233 23.568l.617 18.88c4.527-13.983 9.216-26.673 14.068-38.068C45.65 6.686 50.093.988 54.123.988c2.715 0 4.566 1.974 5.553 5.923.987 3.949 1.481 9.667 1.481 17.152 0 3.949-.081 9.625-.247 17.029l-.123 5.676c3.373-11.762 6.725-21.634 10.057-29.615 3.331-7.979 6.685-11.97 10.056-11.97 8.475 0 12.71 18.757 12.71 56.269z" fill-rule="nonzero"/></svg>',e.title="Powered by marker.js",e.style.display="grid",e.style.alignItems="center",e.style.justifyItems="center",e.style.padding="3px",e.style.width="20px",e.style.height="20px",this.logoUI.appendChild(e),this.editorCanvas.appendChild(this.logoUI),this.logoUI.style.position="absolute",this.logoUI.style.pointerEvents="all",this.positionLogo()},t.prototype.positionLogo=function(){this.logoUI&&(this.uiStyleSettings.logoPosition!=="right"?this.logoUI.style.left=this.markerImageHolder.offsetLeft+10+"px":this.logoUI.style.left=this.markerImageHolder.offsetLeft+this.markerImageHolder.offsetWidth-this.logoUI.clientWidth-10+"px",this.logoUI.style.top=this.markerImageHolder.offsetTop+this.markerImageHolder.offsetHeight-this.logoUI.clientHeight-10+"px")},t.prototype.overrideOverflow=function(){this.scrollXState=window.scrollX,this.scrollYState=window.scrollY,this.bodyOverflowState=document.body.style.overflow,window.scroll({top:0,left:0}),document.body.style.overflow="hidden"},t.prototype.restoreOverflow=function(){document.body.style.overflow=this.bodyOverflowState,window.scroll({top:this.scrollYState,left:this.scrollXState})},t.prototype.showUI=function(){var e;switch(this.settings.displayMode==="popup"&&this.overrideOverflow(),this.coverDiv=document.createElement("div"),this.coverDiv.style.visibility=this._silentRenderMode?"hidden":"visible",this.coverDiv.className=this.styles.classNamePrefixBase+" "+this.styles.classNamePrefix,this.coverDiv.style.fontSize="16px",this.coverDiv.style.userSelect="none",this.settings.displayMode){case"inline":this.coverDiv.style.position="absolute";var r=this.settings.uiOffsetTop!==void 0?this.target.offsetTop+this.settings.uiOffsetTop:this.target.offsetTop>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0,i=this.target.offsetLeft+((e=this.settings.uiOffsetLeft)!==null&&e!==void 0?e:0);this.coverDiv.style.top=r+"px",this.coverDiv.style.left=i+"px",this.coverDiv.style.width=this.target.offsetWidth.toString()+"px",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"5";break;case"popup":this.coverDiv.style.position="fixed",this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=window.innerHeight+"px",this.coverDiv.style.backgroundColor="rgba(0, 0, 0, 0.75)",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"1000",this.coverDiv.style.display="flex"}this.targetRoot.appendChild(this.coverDiv),this.uiDiv=document.createElement("div"),this.uiDiv.style.display="flex",this.uiDiv.style.flexDirection="column",this.uiDiv.style.flexGrow="2",this.uiDiv.style.margin=this.settings.displayMode==="popup"?this.settings.popupMargin+"px":"0px",this.settings.displayMode==="popup"&&(this.uiDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px"),this.uiDiv.style.border="0px",this.coverDiv.appendChild(this.uiDiv),this.toolbar=new gg(this.uiDiv,this.settings.displayMode,this._availableMarkerTypes,this.uiStyleSettings,this.styles),this.toolbar.addButtonClickListener(this.toolbarButtonClicked),this.toolbar.show(this._silentRenderMode||this.uiStyleSettings.hideToolbar?"hidden":"visible"),this.contentDiv=document.createElement("div"),this.contentDiv.style.display="flex",this.contentDiv.style.flexDirection="row",this.contentDiv.style.flexGrow="2",this.contentDiv.style.flexShrink="1",this.settings.displayMode==="popup"&&(this.contentDiv.style.backgroundColor=this.uiStyleSettings.canvasBackgroundColor,this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.uiStyleSettings.toolbarHeight+"px",this.contentDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px)"),this.contentDiv.style.overflow="auto",this.uiDiv.appendChild(this.contentDiv),this.editorCanvas=document.createElement("div"),this.editorCanvas.style.flexGrow="2",this.editorCanvas.style.flexShrink="1",this.editorCanvas.style.position="relative",this.editorCanvas.style.overflow="hidden",this.editorCanvas.style.display="flex",this.settings.displayMode==="popup"&&(this.editorCanvas.style.alignItems="center",this.editorCanvas.style.justifyContent="center"),this.editorCanvas.style.pointerEvents="none",this.editorCanvas.style.transformOrigin="left top",this.editorCanvas.style.transform="scale("+this.zoomLevel+")",this.contentDiv.appendChild(this.editorCanvas),this.editingTarget=this.target instanceof HTMLImageElement?document.createElement("img"):document.createElement("canvas"),this.settings.displayMode==="inline"&&this.settings.uiOffsetTop===void 0&&this.target.offsetTop<this.styles.settings.toolbarHeight&&(this.editingTarget.style.marginTop=this.target.offsetTop-this.styles.settings.toolbarHeight+"px"),this.editorCanvas.appendChild(this.editingTarget),this.toolbox=new mg(this.uiDiv,this.settings.displayMode,this.uiStyleSettings,this.styles),this.toolbox.show(this._silentRenderMode||this.uiStyleSettings.hideToolbox?"hidden":"visible")},t.prototype.closeUI=function(){this.settings.displayMode==="popup"&&this.restoreOverflow(),this.targetRoot.removeChild(this.coverDiv),this.coverDiv.remove(),this.coverDiv=null},t.prototype.removeMarker=function(e){this.markerImage.removeChild(e.container),this.markers.indexOf(e)>-1&&this.markers.splice(this.markers.indexOf(e),1),e.dispose()},t.prototype.switchToSelectMode=function(){this.mode="select",this.hideNotesEditor(),this._currentMarker!==void 0&&(this._currentMarker.state!=="new"?this._currentMarker.select():(this.removeMarker(this._currentMarker),this.setCurrentMarker(),this.markerImage.style.cursor="default"),this.addUndoStep())},t.prototype.toolbarButtonClicked=function(e,r){if(e==="marker"&&r!==void 0)this.createNewMarker(r);else if(e==="action")switch(r){case"select":this.switchToSelectMode(),this.switchToSelectMode();break;case"delete":this.deleteSelectedMarker();break;case"clear":this.clear();break;case"undo":this.undo();break;case"redo":this.redo();break;case"zoom":this.stepZoom();break;case"zoom-out":this.zoomLevel=1;break;case"notes":this.notesArea===void 0?(this.switchToSelectMode(),this.zoomLevel=1,this.showNotesEditor()):this.switchToSelectMode();break;case"close":this.close();break;case"render":this.switchToSelectMode(),this.startRenderAndClose()}},t.prototype.deleteSelectedMarker=function(){var e=this;if(this._currentMarker!==void 0){var r=!1;if(this.eventListeners.markerbeforedelete.forEach(function(n){var o=new qe(e,e._currentMarker,!0);n(o),o.defaultPrevented&&(r=!0)}),!r){var i=this._currentMarker;this._currentMarker.dispose(),this.markerImage.removeChild(this._currentMarker.container),this.markers.splice(this.markers.indexOf(this._currentMarker),1),this.setCurrentMarker(),this.addUndoStep(),this.eventListeners.markerdelete.forEach(function(n){return n(new qe(e,i))})}}},t.prototype.clear=function(){var e=this,r=!1;if(this.markers.length>0&&(this.eventListeners.markerbeforedelete.forEach(function(s){var a=new qe(e,void 0,!0);s(a),a.defaultPrevented&&(r=!0)}),!r)){this.setCurrentMarker();for(var i=function(s){var a=n.markers[s];n.setCurrentMarker(n.markers[s]),n._currentMarker.dispose(),n.markerImage.removeChild(n._currentMarker.container),n.markers.splice(n.markers.indexOf(n._currentMarker),1),n.eventListeners.markerdelete.forEach(function(l){return l(new qe(e,a))})},n=this,o=this.markers.length-1;o>=0;o--)i(o);this.addUndoStep()}},Object.defineProperty(t.prototype,"isNotesAreaOpen",{get:function(){return this.notesArea!==void 0},enumerable:!1,configurable:!0}),t.prototype.showNotesEditor=function(){var e;this._currentMarker!==void 0&&(this.overlayContainer.innerHTML="",this.notesArea=document.createElement("textarea"),this.notesArea.className=this.uiStyleSettings.notesAreaStyleClassName,this.notesArea.style.pointerEvents="auto",this.notesArea.style.alignSelf="stretch",this.notesArea.style.width="100%",this.notesArea.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.notesArea.value=(e=this._currentMarker.notes)!==null&&e!==void 0?e:"",this.overlayContainer.appendChild(this.notesArea))},t.prototype.hideNotesEditor=function(){this.isNotesAreaOpen&&(this._currentMarker!==void 0&&(this._currentMarker.notes=this.notesArea.value.trim()!==""?this.notesArea.value:void 0),this.overlayContainer.removeChild(this.notesArea),this.notesArea=void 0)},t.prototype.selectLastMarker=function(){this.markers.length>0?this.setCurrentMarker(this.markers[this.markers.length-1]):this.setCurrentMarker()},t.prototype.addUndoStep=function(){var e=this;if(this._currentMarker===void 0||this._currentMarker.state!=="edit"){var r=this.getState(),i=this.undoRedoManager.getLastUndoStep();if(!i||i.width===r.width&&i.height===r.height){var n=this.undoRedoManager.undoStepCount;this.undoRedoManager.addUndoStep(r),n<this.undoRedoManager.undoStepCount&&this.eventListeners.statechange.forEach(function(o){return o(new Pe(e))})}else this.undoRedoManager.replaceLastUndoStep(r)}},t.prototype.undo=function(){this.switchToSelectMode(),this.addUndoStep(),this.undoStep()},t.prototype.undoStep=function(){var e=this,r=this.undoRedoManager.undo();r!==void 0&&(this.restoreState(r),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(i){return i(new Pe(e))}))},t.prototype.redo=function(){this.switchToSelectMode(),this.redoStep()},t.prototype.redoStep=function(){var e=this,r=this.undoRedoManager.redo();r!==void 0&&(this.restoreState(r),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(i){return i(new Pe(e))}))},t.prototype.stepZoom=function(){var e=this.zoomSteps.indexOf(this.zoomLevel);this.zoomLevel=e<this.zoomSteps.length-1?this.zoomSteps[e+1]:this.zoomSteps[0]},t.prototype.panTo=function(e){this.contentDiv.scrollBy({left:this.prevPanPoint.x-e.x,top:this.prevPanPoint.y-e.y}),this.prevPanPoint=e},t.prototype.startRenderAndClose=function(){return ou(this,void 0,void 0,function(){var e,r,i=this;return su(this,function(n){switch(n.label){case 0:return[4,this.render()];case 1:return e=n.sent(),r=this.getState(),this.eventListeners.render.forEach(function(o){return o(new Eg(i,e,r))}),this.close(!0),[2]}})})},t.prototype.getState=function(e){e===!0&&this.setCurrentMarker();var r={width:this.imageWidth,height:this.imageHeight,markers:[]};return this.markers.forEach(function(i){return r.markers.push(i.getState())}),r},t.prototype.restoreState=function(e){var r=this;for(this.markers.splice(0);this.markerImage.lastChild;)this.markerImage.removeChild(this.markerImage.lastChild);e.markers.forEach(function(i){var n=r._availableMarkerTypes.find(function(s){return s.typeName===i.typeName});if(n!==void 0){var o=r.addNewMarker(n);o.restoreState(i),r.addMarkerEvents(o),r.markers.push(o)}}),e.width&&e.height&&(e.width!==this.imageWidth||e.height!==this.imageHeight)&&this.scaleMarkers(this.imageWidth/e.width,this.imageHeight/e.height),this.eventListeners.restorestate.forEach(function(i){return i(new Pe(r))})},t.prototype.addNewMarker=function(e){var r=J.createGroup();return this.markerImage.appendChild(r),new e(r,this.overlayContainer,this.settings)},t.prototype.createNewMarker=function(e){var r,i=this;(r=typeof e=="string"?this._availableMarkerTypes.find(function(n){return n.typeName===e}):e)&&(this.setCurrentMarker(),this.addUndoStep(),this._currentMarker=this.addNewMarker(r),this.addMarkerEvents(this._currentMarker),this.markerImage.style.cursor="crosshair",this.toolbar.setActiveMarkerButton(r.typeName),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this.eventListeners.markercreating.forEach(function(n){return n(new qe(i,i._currentMarker))}))},t.prototype.addMarkerEvents=function(e){e.onMarkerCreated=this.markerCreated,e.onColorChanged=this.colorChanged,e.onFillColorChanged=this.fillColorChanged,e.onStateChanged=this.markerStateChanged},t.prototype.markerCreated=function(e){var r=this;this.mode="select",this.markerImage.style.cursor="default",this.markers.push(e),this.setCurrentMarker(e),e instanceof Bi&&this.settings.newFreehandMarkerOnPointerUp?this.createNewMarker(Bi):this.toolbar.setSelectMode(),this.addUndoStep(),this.eventListeners.markercreate.forEach(function(i){return i(new qe(r,e))})},t.prototype.colorChanged=function(e){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultColor=e,this.settings.defaultStrokeColor=e)},t.prototype.fillColorChanged=function(e){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultFillColor=e)},t.prototype.markerStateChanged=function(e){var r=this;this.eventListeners.markerchange.forEach(function(i){return i(new qe(r,e))})},t.prototype.setCurrentMarker=function(e){var r=this;this._currentMarker!==e&&this._currentMarker!==void 0&&(this._currentMarker.deselect(),this.toolbar.setCurrentMarker(),this.toolbox.setPanelButtons([]),this._isResizing||this.eventListeners.markerdeselect.forEach(function(i){return i(new qe(r,r._currentMarker))})),this._currentMarker=e,this._currentMarker===void 0||this._currentMarker.isSelected||(this._currentMarker.state!=="new"&&this._currentMarker.select(),this.toolbar.setCurrentMarker(this._currentMarker),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this._isResizing||this.eventListeners.markerselect.forEach(function(i){return i(new qe(r,r._currentMarker))}))},t.prototype.onPointerDown=function(e){if(this._isFocused||this.focus(),this.touchPoints++,this.touchPoints===1||e.pointerType!=="touch")if(this._currentMarker===void 0||this._currentMarker.state!=="new"&&this._currentMarker.state!=="creating"){if(this.mode==="select"){var r=this.markers.find(function(i){return i.ownsTarget(e.target)});r!==void 0?(this.setCurrentMarker(r),this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(e.clientX,e.clientY),e.target)):(this.setCurrentMarker(),this.isDragging=!0,this.prevPanPoint={x:e.clientX,y:e.clientY})}}else this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(e.clientX,e.clientY))},t.prototype.onDblClick=function(e){if(this._isFocused||this.focus(),this.mode==="select"){var r=this.markers.find(function(i){return i.ownsTarget(e.target)});r!==void 0&&r!==this._currentMarker&&this.setCurrentMarker(r),this._currentMarker!==void 0?this._currentMarker.dblClick(this.clientToLocalCoordinates(e.clientX,e.clientY),e.target):this.setCurrentMarker()}},t.prototype.onPointerMove=function(e){this.touchPoints!==1&&e.pointerType==="touch"||(this._currentMarker!==void 0||this.isDragging)&&(this._currentMarker!==void 0&&this._currentMarker.state==="edit"||e.preventDefault(),this._currentMarker!==void 0?this._currentMarker.manipulate(this.clientToLocalCoordinates(e.clientX,e.clientY)):this.zoomLevel>1&&this.panTo({x:e.clientX,y:e.clientY}))},t.prototype.onPointerUp=function(e){this.touchPoints>0&&this.touchPoints--,this.touchPoints===0&&this.isDragging&&this._currentMarker!==void 0&&this._currentMarker.pointerUp(this.clientToLocalCoordinates(e.clientX,e.clientY)),this.isDragging=!1,this.addUndoStep()},t.prototype.onPointerOut=function(){this.touchPoints>0&&this.touchPoints--},t.prototype.onKeyUp=function(e){this._currentMarker===void 0||this.notesArea!==void 0||e.key!=="Delete"&&e.key!=="Backspace"||this.deleteSelectedMarker()},t.prototype.clientToLocalCoordinates=function(e,r){var i=this.markerImage.getBoundingClientRect(),n=i.width/this.imageWidth/this.zoomLevel,o=i.height/this.imageHeight/this.zoomLevel;return{x:(e-i.left)/this.zoomLevel/n,y:(r-i.top)/this.zoomLevel/o}},t.prototype.onWindowResize=function(){this.positionUI()},t.prototype.positionUI=function(){switch(this.setTopLeft(),this.settings.displayMode){case"inline":var e=this.target.getClientRects(),r=e.length>0&&e.item(0)&&e.item(0).y>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0;this.coverDiv.style.top=r+"px",this.coverDiv.style.left=this.target.offsetLeft.toString()+"px";break;case"popup":this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=this.windowHeight+"px",this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.styles.settings.toolbarHeight+"px"}this.positionMarkerImage(),this.positionLogo()},t.prototype.addLicenseKey=function(e){au.addKey(e)},t.prototype.addEventListener=function(e,r){this.eventListeners.addEventListener(e,r)},t.prototype.removeEventListener=function(e,r){this.eventListeners.removeEventListener(e,r)},t.prototype.renderState=function(e){this._silentRenderMode=!0,this.settings.displayMode="inline",this.isOpen||this.show(),this.restoreState(e),this.startRenderAndClose(),this._silentRenderMode=!1},Object.defineProperty(t.prototype,"isFocused",{get:function(){return this._isFocused},enumerable:!1,configurable:!0}),t.prototype.focus=function(){var e=this;this._isFocused||(this.attachWindowEvents(),this._isFocused=!0,this._previousCurrentMarker!==void 0&&this.setCurrentMarker(this._previousCurrentMarker),this.eventListeners.focus.forEach(function(r){return r(new Pe(e))}))},t.prototype.blur=function(){var e=this;this._isFocused&&(this.detachWindowEvents(),this._isFocused=!1,this._previousCurrentMarker=this._currentMarker,this.setCurrentMarker(),this.eventListeners.blur.forEach(function(r){return r(new Pe(e))}))},t.instanceCounter=0,t}();function Tg(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.map(function(i){return i.split(" ").map(function(n){return n?""+t+n:""}).join(" ")}).join(" ")}function Pg(t,e){return e.replace(/([^}{]*){/gm,function(r,i){return i.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function Ze(t,e){return function(r){r&&(t[e]=r)}}function mf(t,e,r){return function(i){i&&(t[e][r]=i)}}function cu(t,e){return function(r){var i=r.prototype;t.forEach(function(n){e(i,n)})}}function Bg(t,e){return e===void 0&&(e={}),function(r,i){t.forEach(function(n){var o=e[n]||n;o in r||(r[o]=function(){for(var s,a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var u=(s=this[i])[n].apply(s,a);return u===this[i]?this:u})})}}var Ig="function",Og="object",Rg="string",Ag="number",Aa="undefined",yf=typeof window!==Aa,Lg=typeof document!==Aa&&document,zg=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Xt=1e-7,Rn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ng(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}function ao(t,e,r,i){return(t*i+e*r)/(r+i)}function fn(t){return typeof t===Aa}function Ge(t){return t&&typeof t===Og}function Ht(t){return Array.isArray(t)}function ie(t){return typeof t===Rg}function pi(t){return typeof t===Ag}function La(t){return typeof t===Ig}function Gg(t,e){var r=t===""||t==" ",i=e===""||e==" ";return i&&r||t===e}function bf(t,e,r,i,n){var o=za(t,e,r);return o?r:Fg(t,e,r+1,i,n)}function za(t,e,r){if(!t.ignore)return null;var i=e.slice(Math.max(r-3,0),r+3).join("");return new RegExp(t.ignore).exec(i)}function Fg(t,e,r,i,n){for(var o=function(u){var c=e[u].trim();if(c===t.close&&!za(t,e,u))return{value:u};var f=u,h=me(n,function(d){var p=d.open;return p===c});if(h&&(f=bf(h,e,u,i,n)),f===-1)return s=u,"break";u=f,s=u},s,a=r;a<i;++a){var l=o(a);if(a=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Na(t,e){var r=ie(e)?{separator:e}:e,i=r.separator,n=i===void 0?",":i,o=r.isSeparateFirst,s=r.isSeparateOnlyOpenClose,a=r.isSeparateOpenClose,l=a===void 0?s:a,u=r.openCloseCharacters,c=u===void 0?zg:u,f=c.map(function(_){var S=_.open,M=_.close;return S===M?S:S+"|"+M}).join("|"),h="(\\s*"+n+"\\s*|"+f+"|\\s+)",d=new RegExp(h,"g"),p=t.split(d).filter(function(_){return _&&_!=="undefined"}),v=p.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var x=function(_){var S=p[_].trim(),M=_,T=me(c,function(E){var R=E.open;return R===S}),B=me(c,function(E){var R=E.close;return R===S});if(T){if(M=bf(T,p,_,v,c),M!==-1&&l)return y()&&o||(g.push(p.slice(_,M+1).join("")),_=M,o)?(C=_,"break"):(C=_,"continue")}else if(B&&!za(B,p,_)){var k=Ng(c);return k.splice(c.indexOf(B),1),{value:Na(t,{separator:n,isSeparateFirst:o,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:k})}}else if(Gg(S,n)&&!s)return y(),o?(C=_,"break"):(C=_,"continue");M===-1&&(M=v-1),m.push(p.slice(_,M+1).join("")),_=M,C=_},C,w=0;w<v;++w){var b=x(w);if(w=C,typeof b=="object")return b.value;if(b==="break")break}return m.length&&g.push(m.join("")),g}function Sr(t){return Na(t,"")}function zr(t){return Na(t,",")}function xf(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function hn(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var r=e[1],i=e[2],n=e[3];return{prefix:r,unit:n,value:parseFloat(i)}}function Hg(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,r){return r.toUpperCase()})}function to(t,e){return t.replace(/([a-z])([A-Z])/g,function(r,i,n){return""+i+e+n.toLowerCase()})}function Qi(){return Date.now?Date.now():new Date().getTime()}function tr(t,e,r){r===void 0&&(r=-1);for(var i=t.length,n=0;n<i;++n)if(e(t[n],n,t))return n;return r}function me(t,e,r){var i=tr(t,e);return i>-1?t[i]:r}var Cf=function(){var t=Qi(),e=yf&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(r){var i=Qi(),n=setTimeout(function(){r(i-t)},1e3/60);return n}}(),Wg=function(){var t=yf&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function er(t){return Object.keys(t)}function Vg(t){var e=er(t);return e.map(function(r){return t[r]})}function Tt(t,e){var r=hn(t),i=r.value,n=r.unit;if(Ge(e)){var o=e[n];if(o){if(La(o))return o(i);if(Rn[n])return Rn[n](i,o)}}else if(n==="%")return i*e/100;return Rn[n]?Rn[n](i):i}function zs(t,e,r){return Math.max(e,Math.min(t,r))}function fu(t,e,r,i){return i===void 0&&(i=t[0]/t[1]),[[bt(e[0],Xt),bt(e[0]/i,Xt)],[bt(e[1]*i,Xt),bt(e[1],Xt)]].filter(function(n){return n.every(function(o,s){var a=e[s],l=bt(a,Xt);return r?o<=a||o<=l:o>=a||o>=l})})[0]||t}function Sf(t,e,r,i){if(!i)return t.map(function(d,p){return zs(d,e[p],r[p])});var n=t[0],o=t[1],s=i===!0?n/o:i,a=fu(t,e,!1,s),l=a[0],u=a[1],c=fu(t,r,!0,s),f=c[0],h=c[1];return n<l||o<u?(n=l,o=u):(n>f||o>h)&&(n=f,o=h),[n,o]}function jg(t){for(var e=t.length,r=0,i=e-1;i>=0;--i)r+=t[i];return r}function Ns(t){for(var e=t.length,r=0,i=e-1;i>=0;--i)r+=t[i];return e?r/e:0}function Wt(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=Math.atan2(i,r);return n>=0?n:n+Math.PI*2}function $g(t){return[0,1].map(function(e){return Ns(t.map(function(r){return r[e]}))})}function hu(t){var e=$g(t),r=Wt(e,t[0]),i=Wt(e,t[1]);return r<i&&i-r<Math.PI||r>i&&i-r<-Math.PI?1:-1}function Je(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function bt(t,e){if(!e)return t;var r=1/e;return Math.round(t/e)/r}function du(t,e){return t.forEach(function(r,i){t[i]=bt(t[i],e)}),t}function Yg(t){for(var e=[],r=0;r<t;++r)e.push(r);return e}function wf(t){return t.reduce(function(e,r){return e.concat(r)},[])}function _f(t,e){t.indexOf(e)===-1&&t.push(e)}function Kt(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function kf(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Ef(t,e){if(t.classList)t.classList.remove(e);else{var r=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(r," ")}}function $t(t,e,r,i){t.addEventListener(e,r,i)}function Ft(t,e,r,i){t.removeEventListener(e,r,i)}function ki(t){return(t==null?void 0:t.ownerDocument)||Lg}function Ga(t){return ki(t).documentElement}function kr(t){return ki(t).body}function br(t){var e;return((e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function Mf(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Ei(t){return Ge(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var Xg=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(r){return this.values[this.keys.indexOf(r)]},e.set=function(r,i){var n=this.keys,o=this.values,s=n.indexOf(r),a=s===-1?n.length:s;n[a]=r,o[a]=i},t}(),Ug=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(r){return this.object[r]},e.set=function(r,i){this.object[r]=i},t}(),qg=typeof Map=="function",Kg=function(){function t(){}var e=t.prototype;return e.connect=function(r,i){this.prev=r,this.next=i,r&&(r.next=this),i&&(i.prev=this)},e.disconnect=function(){var r=this.prev,i=this.next;r&&(r.next=i),i&&(i.prev=r)},e.getIndex=function(){for(var r=this,i=-1;r;)r=r.prev,++i;return i},t}();function Zg(t,e){var r=[],i=[];return t.forEach(function(n){var o=n[0],s=n[1],a=new Kg;r[o]=a,i[s]=a}),r.forEach(function(n,o){n.connect(r[o-1])}),t.filter(function(n,o){return!e[o]}).map(function(n,o){var s=n[0],a=n[1];if(s===a)return[0,0];var l=r[s],u=i[a-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,r[0]);var f=l.getIndex();return[c,f]})}var Jg=function(){function t(r,i,n,o,s,a,l,u){this.prevList=r,this.list=i,this.added=n,this.removed=o,this.changed=s,this.maintained=a,this.changedBeforeAdded=l,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var r=Zg(this.changedBeforeAdded,this.fixed),i=this.changed,n=[];this.cacheOrdered=r.filter(function(o,s){var a=o[0],l=o[1],u=i[s],c=u[0],f=u[1];if(a!==l)return n.push([c,f]),!0}),this.cachePureChanged=n},t}();function dn(t,e,r){var i=qg?Map:r?Ug:Xg,n=r||function(y){return y},o=[],s=[],a=[],l=t.map(n),u=e.map(n),c=new i,f=new i,h=[],d=[],p={},v=[],g=0,m=0;return l.forEach(function(y,x){c.set(y,x)}),u.forEach(function(y,x){f.set(y,x)}),l.forEach(function(y,x){var C=f.get(y);typeof C>"u"?(++m,s.push(x)):p[C]=m}),u.forEach(function(y,x){var C=c.get(y);typeof C>"u"?(o.push(x),++g):(a.push([C,x]),m=p[x]||0,h.push([C-m,x-g]),d.push(x===C),C!==x&&v.push([C,x]))}),s.reverse(),new Jg(t,e,o,s,v,a,h,d)}var Qg=function(){function t(r,i){r===void 0&&(r=[]),this.findKeyCallback=i,this.list=[].slice.call(r)}var e=t.prototype;return e.update=function(r){var i=[].slice.call(r),n=dn(this.list,i,this.findKeyCallback);return this.list=i,n},t}(),Gs=function(t,e){return Gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},Gs(t,e)};function pn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gs(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var $e=function(){return $e=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},$e.apply(this,arguments)};function Df(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function pu(t,e,r){for(var i=0,n=e.length,o;i<n;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function vu(t){var e=0;return t.map(function(r){return r==null?"$compat".concat(++e):"".concat(r)})}function Tf(t){var e=[];return t.forEach(function(r){e=e.concat(Ht(r)?Tf(r):r)}),e}function as(t,e){if(!e)return t;for(var r in e)fn(t[r])&&(t[r]=e[r]);return t}function lo(t,e){if(t===e)return!1;for(var r in t)if(!(r in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1}function gu(t){var e=t.className,r=Df(t,["className"]);return e!=null&&(r.class=e),delete r.style,delete r.children,r}function mu(t){var e={},r={};for(var i in t)i.indexOf("on")===0?r[i]=t[i]:e[i]=t[i];return[e,r]}function Ro(t){if(!t)return null;var e=t.b;return Ei(e)?e:Ro(t.c)}function Pf(t){var e=t.parentNode;e&&e.removeChild(t)}function Bf(t){t.forEach(function(e){e()})}function t0(){return this.constructor(this.props,this.context)}var Fa=0,Ao=function(){function t(r,i,n,o,s,a,l){l===void 0&&(l={}),this.t=r,this.d=i,this.k=n,this.i=o,this.c=s,this.ref=a,this.ps=l,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(r,i,n,o,s){var a=this,l=a.d,u=Vg(i).filter(function(p){return p.$_req}),c=Tf(u.map(function(p){return p.$_subs})),f=me(c,function(p){return p.d===l});if(a.b&&!ie(n)&&!s&&!a.s(n.props,o)&&!f){var h=c.reduce(function(p,v){var g=v.d;return p[0]?p[0].d===g&&p.push(v):g>l&&p.push(v),p},[]);return h.forEach(function(p){vn(p,p._ps,[p.o],r,i,!0)}),!1}a.o=n,a.ss(o);var d=a.ps;return ie(n)||(a.ps=n.props,a.ref=n.ref),Ha(this),a.r(r,i,a.b?d:{},o),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var r=this,i=r.ref,n=r.fr;i&&i(n?n.current:r.b)},t}();function If(){return Object.__CROACT_CURRENT_INSTNACE__}function e0(){return Fa}function r0(t){Fa=t}function Ha(t){return Object.__CROACT_CURRENT_INSTNACE__=t,Fa=0,t}var Wa=function(){function t(r,i){r===void 0&&(r={}),this.props=r,this.context=i,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(r,i){return this.props!==r||this.state!==i},e.setState=function(r,i,n){var o=this;o.$_timer||(o.$_state={}),clearTimeout(o.$_timer),o.$_timer=0,o.$_state=$e($e({},o.$_state),r),n?o.$_setState(i,n):o.$_timer=window.setTimeout(function(){o.$_timer=0,o.$_setState(i,n)})},e.forceUpdate=function(r){this.setState({},r,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(r,i){},e.componentWillUnmount=function(){},e.$_setState=function(r,i){var n=[],o=this.$_p,s=vn(o.c,[o],[o.o],n,o._cs,$e($e({},this.state),this.$_state),i);s&&(r&&n.push(r),Bf(n),Ha(null))},t}(),Of=function(t){pn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var r=e.prototype;return r.shouldComponentUpdate=function(i,n){return lo(this.props,i)||lo(this.state,n)},e}(Wa);function Rf(t){var e=function(r){e.current=r};return e.current=t,e}function i0(t){return t._fr=!0,t}function n0(t,e,r,i){var n,o;return!((n=t==null?void 0:t.prototype)===null||n===void 0)&&n.render?o=new t(e,r):(o=new Wa(e,r),o.constructor=t,t._fr?(i.fr=Rf(),o.render=function(){return this.constructor(this.props,i.fr)}):o.render=t0),o.$_p=i,o}var o0=function(t){pn(e,t);function e(i,n,o,s,a,l,u){u===void 0&&(u={});var c=t.call(this,i,n,o,s,a,l,as(u,i.defaultProps))||this;return c.typ="comp",c._usefs=[],c._uefs=[],c._defs=[],c}var r=e.prototype;return r.s=function(i,n){var o=this.b;return o.shouldComponentUpdate(as(i,this.t.defaultProps),n||o.state)!==!1},r.r=function(i,n,o){var s,a,l=this,u=l.t;l.ps=as(l.ps,l.t.defaultProps);var c=l.ps,f=!l.b,h=u.contextType,d=l.b,p=h==null?void 0:h.get(l);l._cs=n,f?(d=n0(u,c,p,l),l.b=d):(d.props=c,d.context=p);var v=d.state;l._usefs=[],l._uefs=[];var g=d.render();((a=(s=g==null?void 0:g.props)===null||s===void 0?void 0:s.children)===null||a===void 0?void 0:a.length)===0&&(g.props.children=l.ps.children);var m=$e($e({},n),d.$_cs);vn(l,l._ps,g?[g]:[],i,m),f?l._uefs.push(function(){h==null||h.register(l),d.componentDidMount()}):l._uefs.push(function(){d.componentDidUpdate(o,v)}),i.push(function(){l._usefs.forEach(function(y){y()}),f?l.md():l.ud(),l._defs=l._uefs.map(function(y){return y()})})},r.ss=function(i){var n=this.b;!n||!i||(n.state=i)},r.un=function(){var i,n=this;n._ps.forEach(function(s){s.un()});var o=n.t;(i=o.contextType)===null||i===void 0||i.unregister(n),clearTimeout(n.b.$_timer),n._defs.forEach(function(s){s&&s()}),n.b.componentWillUnmount()},e}(Ao);function s0(t,e,r){var i=Va(gu(t),gu(e)),n=i.added,o=i.removed,s=i.changed;for(var a in n)r.setAttribute(a,n[a]);for(var l in s)r.setAttribute(l,s[l][1]);for(var u in o)r.removeAttribute(u)}function a0(t,e,r){var i=Va(t,e),n=i.added,o=i.removed;for(var s in o)r.e(s,!0);for(var a in n)r.e(a)}function Va(t,e){var r=er(t),i=er(e),n=dn(r,i,function(l){return l}),o={},s={},a={};return n.added.forEach(function(l){var u=i[l];o[u]=e[u]}),n.removed.forEach(function(l){var u=r[l];s[u]=t[u]}),n.maintained.forEach(function(l){var u=l[0],c=r[u],f=[t[c],e[c]];t[c]!==e[c]&&(a[c]=f)}),{added:o,removed:s,changed:a}}function l0(t,e,r){var i=r.style,n=Va(t,e),o=n.added,s=n.removed,a=n.changed;for(var l in o){var u=to(l,"-");i.setProperty(u,o[l])}for(var l in a){var c=to(l,"-");i.setProperty(c,a[l][1])}for(var l in s){var f=to(l,"-");i.removeProperty(f)}}function u0(t){return t.replace(/^on/g,"").toLowerCase()}var c0=function(t){pn(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.typ="elem",i._es={},i._svg=!1,i}var r=e.prototype;return r.e=function(i,n){var o=this,s=o._es,a=o.b,l=u0(i);n?(Ft(a,l,s[i]),delete s[i]):(s[i]=function(u){var c,f;(f=(c=o.ps)[i])===null||f===void 0||f.call(c,u)},$t(a,l,s[i]))},r.s=function(i){return lo(this.ps,i)},r.r=function(i,n,o){var s,a=this,l=!a.b,u=a.ps;if(l){var c=Ro(a.c),f=!1;a._svg||a.t==="svg"?f=!0:f=c&&c.ownerSVGElement,a._svg=f;var h=(s=a._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],d=a.t;if(h)a._hyd=[].slice.call(h.children||[]);else{var p=ki(c);f?h=p.createElementNS("http://www.w3.org/2000/svg",d):h=p.createElement(d)}a.b=h}vn(a,a._ps,u.children,i,n);var v=a.b,g=mu(o),m=g[0],y=g[1],x=mu(u),C=x[0],w=x[1];return s0(m,C,v),a0(y,w,a),l0(o.style||{},u.style||{},v),i.push(function(){l?a.md():a.ud()}),!0},r.un=function(){var i=this,n=i._es,o=i.b;for(var s in n)Ft(o,s,n[s]);i._ps.forEach(function(a){a.un()}),i._es={},i._sel||Pf(o)},e}(Ao);function tn(t){if(!t||Ei(t))return t;var e=t.$_p._ps;return e.length?tn(e[0].b):null}function Af(t){if(t){if(t.b&&Ei(t.b))return t;var e=t._ps;return e.length?Af(e[0]):null}}function ze(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=e||{},o=n.key,s=n.ref,a=Df(n,["key","ref"]);return{type:t,key:o,ref:s,props:$e($e({},a),{children:wf(r).filter(function(l){return l!=null&&l!==!1})})}}var Lf=function(t){pn(e,t);function e(i,n){n===void 0&&(n=0);var o=t.call(this,"container",n,"container",0,null)||this;return o.typ="container",o.b=i,o}var r=e.prototype;return r.r=function(){return!0},r.un=function(){},e}(Ao),f0=function(t){pn(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.typ="text",i}var r=e.prototype;return r.r=function(i){var n,o=this,s=!o.b;if(s){var a=Ro(o.c),l=(n=o._hyd)===null||n===void 0?void 0:n.splice(0,1)[0];o.b=l||ki(a).createTextNode(o.t.replace("text_",""))}return i.push(function(){s?o.md():o.ud()}),!0},r.un=function(){Pf(this.b)},e}(Ao);function h0(t,e,r){var i=r.map(function(l){return ie(l)?null:l.key}),n=vu(e.map(function(l){return l.k})),o=vu(i),s=dn(n,o,function(l){return l});s.removed.forEach(function(l){e.splice(l,1)[0].un()}),s.ordered.forEach(function(l){var u=l[0],c=l[1],f=e.splice(u,1)[0];e.splice(c,0,f);var h=tn(f.b),d=tn(e[c+1]&&e[c+1].b);h&&h.parentNode.insertBefore(h,d)}),s.added.forEach(function(l){e.splice(l,0,yu(r[l],i[l],l,t))});var a=s.maintained.filter(function(l){l[0];var u=l[1],c=r[u],f=e[u],h=ie(c)?"text_".concat(c):c.type;return h!==f.t?(f.un(),e.splice(u,1,yu(c,i[u],u,t)),!0):(f.i=u,!1)});return pu(pu([],s.added,!0),a.map(function(l){l[0];var u=l[1];return u}))}function d0(t,e){for(var r=t._ps,i=r.length,n=e.i+1;n<i;++n){var o=tn(r[n].b);if(o)return o}return null}function yu(t,e,r,i){var n=i.d+1;if(ie(t)||pi(t))return new f0("text_".concat(t),n,e,r,i,null,{});var o=t.type,s=typeof o=="string"?c0:o0;return new s(o,n,e,r,i,t.ref,t.props)}function vn(t,e,r,i,n,o,s){var a=h0(t,e,r),l=t._hyd,u=e.filter(function(f,h){return f._hyd=l,f.u(i,n,r[h],o,s)});t.typ==="container"&&t._sel&&e.forEach(function(f){var h=Af(f);h&&(h._sel=!0)}),t._hyd=null;var c=Ro(t);return c&&a.reverse().forEach(function(f){var h=e[f],d=tn(h.b);if(d&&c!==d&&!d.parentNode){var p=d0(t,h);c.insertBefore(d,p)}}),u.length>0}function p0(t,e,r,i){r===void 0&&(r=e.__CROACT__),i===void 0&&(i={});var n=!!r;r||(r=new Lf(e));var o=[];return vn(r,r._ps,t?[t]:[],o,i,void 0,void 0),Bf(o),Ha(null),n||(e.__CROACT__=r),r}function bu(t,e,r){return!r&&t&&(r=new Lf(e.parentElement),r._hyd=[e],r._sel=!0),p0(t,e,r),r}function zf(t){var e=If(),r=e._hs||(e._hs=[]),i=e0(),n=r[i];if(r0(i+1),n){if(!lo(n.deps,t.deps))return n.updated=!1,n;r[i]=t}else r.push(t);return t.value=t.func(),t.updated=!0,t}function v0(t,e){var r=zf({func:t,deps:e});return r.value}function g0(t){return v0(function(){return Rf(t)},[])}function Nf(t,e,r){var i=If(),n=zf({func:function(){return t},deps:e}),o=r?i._usefs:i._uefs;n.updated?o.push(function(){return n.effect&&n.effect(),n.effect=t(),n.effect}):o.push(function(){return n.effect})}function m0(t,e,r){Nf(function(){t==null||t(e())},r,!0)}function ja(t,e){for(var r=t.length,i=0;i<r;++i)if(e(t[i],i))return!0;return!1}function Gf(t,e){for(var r=t.length,i=0;i<r;++i)if(e(t[i],i))return t[i];return null}function Ff(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function $a(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function y0(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function b0(t,e){var r=$a("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return r?r[3]:""}function Fs(t){return t.replace(/_/g,".")}function Ri(t,e){var r=null,i="-1";return ja(t,function(n){var o=$a("("+n.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!o||n.brand?!1:(r=n,i=o[3]||"-1",n.versionAlias?i=n.versionAlias:n.versionTest&&(i=b0(n.versionTest.toLowerCase(),e)||i),i=Fs(i),!0)}),{preset:r,version:i}}function An(t,e){var r={brand:"",version:"-1"};return ja(t,function(i){var n=Hf(e,i);return n?(r.brand=i.id,r.version=i.versionAlias||n.version,r.version!=="-1"):!1}),r}function Hf(t,e){return Gf(t,function(r){var i=r.brand;return $a(""+e.test,i.toLowerCase())})}var Wf=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Vf=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Hs=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],jf=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],$f=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Yf(t){return!!Ri(jf,t).preset}function x0(t){var e=Ff(t),r=!!/mobi/g.exec(e),i={name:"unknown",version:"-1",majorVersion:-1,webview:Yf(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},n={name:"unknown",version:"-1",majorVersion:-1},o=Ri(Wf,e),s=o.preset,a=o.version,l=Ri($f,e),u=l.preset,c=l.version,f=Ri(Vf,e);if(i.chromium=!!f.preset,i.chromiumVersion=f.version,!i.chromium){var h=Ri(Hs,e);i.webkit=!!h.preset,i.webkitVersion=h.version}return u&&(n.name=u.id,n.version=c,n.majorVersion=parseInt(c,10)),s&&(i.name=s.id,i.version=a,i.webview&&n.name==="ios"&&i.name!=="safari"&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:n,isMobile:r,isHints:!1}}function C0(t){var e=navigator.userAgentData,r=(e.uaList||e.brands).slice(),i=e.mobile||!1,n=r[0],o=(e.platform||navigator.platform).toLowerCase(),s={name:n.brand,version:n.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!An(jf,r).brand||Yf(Ff())},a={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&ja(Hs,function(h){return Hf(r,h)});var l=An(Vf,r);if(s.chromium=!!l.brand,s.chromiumVersion=l.version,!s.chromium){var u=An(Hs,r);s.webkit=!!u.brand,s.webkitVersion=u.version}var c=Gf($f,function(h){return new RegExp(""+h.test,"g").exec(o)});a.name=c?c.id:"";{var f=An(Wf,r);s.name=f.brand||s.name,s.version=f.brand&&t?t.uaFullVersion:f.version}return s.webkit&&(a.name=i?"ios":"mac"),a.name==="ios"&&s.webview&&(s.version="-1"),a.version=Fs(a.version),s.version=Fs(s.version),a.majorVersion=parseInt(a.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:a,isMobile:i,isHints:!0}}function S0(t){return y0()?C0():x0(t)}function w0(t,e,r,i,n,o){for(var s=0;s<n;++s){var a=r+s*n,l=i+s*n;t[a]+=t[l]*o,e[a]+=e[l]*o}}function _0(t,e,r,i,n){for(var o=0;o<n;++o){var s=r+o*n,a=i+o*n,l=t[s],u=e[s];t[s]=t[a],t[a]=l,e[s]=e[a],e[a]=u}}function k0(t,e,r,i,n){for(var o=0;o<i;++o){var s=r+o*i;t[s]/=n,e[s]/=n}}function Xf(t,e,r){for(var i=t.slice(),n=0;n<r;++n)i[n*r+e-1]=0,i[(e-1)*r+n]=0;return i[(e-1)*(r+1)]=1,i}function Xe(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var r=t.slice(),i=At(e),n=0;n<e;++n){var o=e*n+n;if(!bt(r[o],Xt)){for(var s=n+1;s<e;++s)if(r[e*n+s]){_0(r,i,n,s,e);break}}if(!bt(r[o],Xt))return[];k0(r,i,n,e,r[o]);for(var s=0;s<e;++s){var a=s,l=s+n*e,u=r[l];!bt(u,Xt)||n===s||w0(r,i,a,n,e,-u)}}return i}function E0(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var r=[],i=0;i<e;++i)for(var n=0;n<e;++n)r[n*e+i]=t[e*i+n];return r}function Uf(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var r=[],i=t[e*e-1],n=0;n<e-1;++n)r[n]=t[e*(e-1)+n]/i;return r[e-1]=0,r}function M0(t,e){for(var r=At(e),i=0;i<e-1;++i)r[e*(e-1)+i]=t[i]||0;return r}function Wr(t,e){for(var r=t.slice(),i=t.length;i<e-1;++i)r[i]=0;return r[e-1]=1,r}function Fe(t,e,r){if(e===void 0&&(e=Math.sqrt(t.length)),e===r)return t;for(var i=At(r),n=Math.min(e,r),o=0;o<n-1;++o){for(var s=0;s<n-1;++s)i[o*r+s]=t[o*e+s];i[(o+1)*r-1]=t[(o+1)*e-1],i[(r-1)*r+o]=t[(e-1)*e+o]}return i[r*r-1]=t[e*e-1],i}function uo(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=At(t);return e.forEach(function(n){i=Pt(i,n,t)}),i}function Pt(t,e,r){r===void 0&&(r=Math.sqrt(t.length));var i=[],n=t.length/r,o=e.length/n;if(n){if(!o)return t}else return e;for(var s=0;s<r;++s)for(var a=0;a<o;++a){i[a*r+s]=0;for(var l=0;l<n;++l)i[a*r+s]+=t[l*r+s]*e[a*n+l]}return i}function Et(t,e){for(var r=Math.min(t.length,e.length),i=t.slice(),n=0;n<r;++n)i[n]=i[n]+e[n];return i}function pt(t,e){for(var r=Math.min(t.length,e.length),i=t.slice(),n=0;n<r;++n)i[n]=i[n]-e[n];return i}function D0(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function qf(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function ne(t,e,r){r===void 0&&(r=e.length);var i=Pt(t,e,r),n=i[r-1];return i.map(function(o){return o/n})}function T0(t,e){return Pt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function P0(t,e){return Pt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function B0(t,e){return Pt(t,mn(e,4))}function Ln(t,e){var r=e[0],i=r===void 0?1:r,n=e[1],o=n===void 0?1:n,s=e[2],a=s===void 0?1:s;return Pt(t,[i,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1],4)}function gn(t,e){return ne(mn(e,3),Wr(t,3))}function ls(t,e){var r=e[0],i=r===void 0?0:r,n=e[1],o=n===void 0?0:n,s=e[2],a=s===void 0?0:s;return Pt(t,[1,0,0,0,0,1,0,0,0,0,1,0,i,o,a,1],4)}function xu(t,e){return Pt(t,e,4)}function mn(t,e){var r=Math.cos(t),i=Math.sin(t),n=At(e);return n[0]=r,n[1]=i,n[e]=-i,n[e+1]=r,n}function At(t){for(var e=t*t,r=[],i=0;i<e;++i)r[i]=i%(t+1)?0:1;return r}function Ya(t,e){for(var r=At(e),i=Math.min(t.length,e-1),n=0;n<i;++n)r[(e+1)*n]=t[n];return r}function Vr(t,e){for(var r=At(e),i=Math.min(t.length,e-1),n=0;n<i;++n)r[e*(e-1)+n]=t[n];return r}function Xa(t,e,r,i,n,o,s,a){var l=t[0],u=t[1],c=e[0],f=e[1],h=r[0],d=r[1],p=i[0],v=i[1],g=n[0],m=n[1],y=o[0],x=o[1],C=s[0],w=s[1],b=a[0],_=a[1],S=[l,0,c,0,h,0,p,0,u,0,f,0,d,0,v,0,1,0,1,0,1,0,1,0,0,l,0,c,0,h,0,p,0,u,0,f,0,d,0,v,0,1,0,1,0,1,0,1,-g*l,-m*l,-y*c,-x*c,-C*h,-w*h,-b*p,-_*p,-g*u,-m*u,-y*f,-x*f,-C*d,-w*d,-b*v,-_*v],M=Xe(S,8);if(!M.length)return[];var T=Pt(M,[g,m,y,x,C,w,b,_],8);return T[8]=1,Fe(E0(T),3,4)}var Hi=function(){return Hi=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Hi.apply(this,arguments)};function I0(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function en(t,e){return e===void 0&&(e=0),Qr(vi(t,e))}function O0(t,e){var r=ne(t,[e[0],e[1]||0,e[2]||0,1],4),i=r[3]||1;return[r[0]/i,r[1]/i,r[2]/i]}function Qr(t){var e=I0();return t.forEach(function(r){var i=r.matrixFunction,n=r.functionValue;i&&(e=i(e,n))}),e}function vi(t,e){e===void 0&&(e=0);var r=Ht(t)?t:Sr(t);return r.map(function(i){var n=xf(i),o=n.prefix,s=n.value,a=null,l=o,u="";if(o==="translate"||o==="translateX"||o==="translate3d"){var c=Ge(e)?Hi(Hi({},e),{"o%":e["%"]}):{"%":e,"o%":e},f=zr(s).map(function(E,R){return R===0&&"x%"in c?c["%"]=e["x%"]:R===1&&"y%"in c?c["%"]=e["y%"]:c["%"]=e["o%"],Tt(E,c)}),h=f[0],d=f[1],p=d===void 0?0:d,v=f[2],g=v===void 0?0:v;a=ls,u=[h,p,g]}else if(o==="translateY"){var m=Ge(e)?Hi({"%":e["y%"]},e):{"%":e},p=Tt(s,m);a=ls,u=[0,p,0]}else if(o==="translateZ"){var g=parseFloat(s);a=ls,u=[0,0,g]}else if(o==="scale"||o==="scale3d"){var y=zr(s).map(function(E){return parseFloat(E)}),x=y[0],C=y[1],w=C===void 0?x:C,b=y[2],_=b===void 0?1:b;a=Ln,u=[x,w,_]}else if(o==="scaleX"){var x=parseFloat(s);a=Ln,u=[x,1,1]}else if(o==="scaleY"){var w=parseFloat(s);a=Ln,u=[1,w,1]}else if(o==="scaleZ"){var _=parseFloat(s);a=Ln,u=[1,1,_]}else if(o==="rotate"||o==="rotateZ"||o==="rotateX"||o==="rotateY"){var S=hn(s),M=S.unit,T=S.value,B=M==="rad"?T:T*Math.PI/180;o==="rotate"||o==="rotateZ"?(l="rotateZ",a=B0):o==="rotateX"?a=T0:o==="rotateY"&&(a=P0),u=B}else if(o==="matrix3d")a=xu,u=zr(s).map(function(E){return parseFloat(E)});else if(o==="matrix"){var k=zr(s).map(function(E){return parseFloat(E)});a=xu,u=[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}else l="";return{name:o,functionName:l,value:s,matrixFunction:a,functionValue:u}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ws=function(t,e){return Ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ws(t,e)};function R0(t,e){Ws(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Kf=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),Zf=function(t){R0(e,t);function e(r){return r===void 0&&(r=[]),t.call(this,r,Kf)||this}return e}(Qg);function A0(t,e){return dn(t,e,Kf)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vs=function(){return Vs=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Vs.apply(this,arguments)};function L0(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}var yn=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(r,i){if(Ge(r))for(var n in r)this.on(n,r[n]);else this._addEvent(r,i,{});return this},e.off=function(r,i){if(!r)this._events={};else if(Ge(r))for(var n in r)this.off(n);else if(!i)this._events[r]=[];else{var o=this._events[r];if(o){var s=tr(o,function(a){return a.listener===i});s>-1&&o.splice(s,1)}}return this},e.once=function(r,i){var n=this;return i&&this._addEvent(r,i,{once:!0}),new Promise(function(o){n._addEvent(r,o,{once:!0})})},e.emit=function(r,i){var n=this;i===void 0&&(i={});var o=this._events[r];if(!r||!o)return!0;var s=!1;return i.eventType=r,i.stop=function(){s=!0},i.currentTarget=this,L0(o).forEach(function(a){a.listener(i),a.once&&n.off(r,a.listener)}),!s},e.trigger=function(r,i){return i===void 0&&(i={}),this.emit(r,i)},e._addEvent=function(r,i,n){var o=this._events;o[r]=o[r]||[];var s=o[r];s.push(Vs({listener:i},n))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var js=function(t,e){return js=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},js(t,e)};function z0(t,e){js(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ei=function(){return ei=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ei.apply(this,arguments)};function N0(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function Cu(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function zn(t){if(t){if(ie(t))return document.querySelector(t)}else return null;if(La(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var G0=function(t){z0(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i._startRect=null,i._startPos=[],i._prevTime=0,i._timer=0,i._prevScrollPos=[0,0],i._isWait=!1,i._flag=!1,i._currentOptions=null,i._lock=!1,i._unregister=null,i._onScroll=function(){var n=i._currentOptions;i._lock||!n||i.emit("scrollDrag",{next:function(o){i.checkScroll({container:n.container,inputEvent:o})}})},i}var r=e.prototype;return r.dragStart=function(i,n){var o=zn(n.container);if(!o){this._flag=!1;return}var s=0,a=0,l=0,u=0;if(o===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=o.getBoundingClientRect();s=c.top,a=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[i.clientX,i.clientY],this._startRect={top:s,left:a,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],n),this._currentOptions=n,this._registerScrollEvent(n)},r.drag=function(i,n){if(clearTimeout(this._timer),!!this._flag){var o=i.clientX,s=i.clientY,a=n.threshold,l=a===void 0?0:a,u=this,c=u._startRect,f=u._startPos;this._currentOptions=n;var h=[0,0];return c.top>s-l?(f[1]>c.top||s<f[1])&&(h[1]=-1):c.top+c.height<s+l&&(f[1]<c.top+c.height||s>f[1])&&(h[1]=1),c.left>o-l?(f[0]>c.left||o<f[0])&&(h[0]=-1):c.left+c.width<o+l&&(f[0]<c.left+c.width||o>f[0])&&(h[0]=1),!h[0]&&!h[1]?!1:this._continueDrag(ei(ei({},n),{direction:h,inputEvent:i,isDrag:!0}))}},r.checkScroll=function(i){var n=this;if(this._isWait)return!1;var o=i.prevScrollPos,s=o===void 0?this._prevScrollPos:o,a=i.direction,l=i.throttleTime,u=l===void 0?0:l,c=i.inputEvent,f=i.isDrag,h=this._getScrollPosition(a||[0,0],i),d=h[0]-s[0],p=h[1]-s[1],v=a||[d?Math.abs(d)/d:0,p?Math.abs(p)/p:0];return this._prevScrollPos=h,this._lock=!1,!d&&!p?!1:(this.emit("move",{offsetX:v[0]?d:0,offsetY:v[1]?p:0,inputEvent:c}),u&&f&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){n._continueDrag(i)},u)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(i,n){var o=n.container,s=n.getScrollPosition,a=s===void 0?N0:s;return a({container:zn(o),direction:i})},r._continueDrag=function(i){var n=this,o,s=i.container,a=i.direction,l=i.throttleTime,u=i.useScroll,c=i.isDrag,f=i.inputEvent;if(!(!this._flag||c&&this._isWait)){var h=Qi(),d=Math.max(l+this._prevTime-h,0);if(d>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){n._continueDrag(i)},d),!1;this._prevTime=h;var p=this._getScrollPosition(a,i);this._prevScrollPos=p,c&&(this._isWait=!0),u||(this._lock=!0);var v={container:zn(s),direction:a,inputEvent:f};return(o=i.requestScroll)===null||o===void 0||o.call(i,v),this.emit("scroll",v),this._isWait=!1,u||this.checkScroll(ei(ei({},i),{prevScrollPos:p,direction:a,inputEvent:f}))}},r._registerScrollEvent=function(i){this._unregisterScrollEvent();var n=i.checkScrollEvent;if(n){var o=n===!0?Cu:n,s=zn(i.container);n===!0&&(s===document.body||s===document.documentElement)?this._unregister=Cu(window,this._onScroll):this._unregister=o(s,this._onScroll)}},r._unregisterScrollEvent=function(){var i;(i=this._unregister)===null||i===void 0||i.call(this),this._unregister=null},e}(yn);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function F0(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}function de(t){return bt(t,Xt)}function H0(t,e){return t.every(function(r,i){return de(r-e[i])===0})}function W0(t,e){return!de(t[0]-e[0])&&!de(t[1]-e[1])}function Jf(t){return t.length<3?0:Math.abs(jg(t.map(function(e,r){var i=t[r+1]||t[0];return e[0]*i[1]-i[0]*e[1]})))/2}function Su(t,e){var r=e.width,i=e.height,n=e.left,o=e.top,s=jr(t),a=s.minX,l=s.minY,u=s.maxX,c=s.maxY,f=r/(u-a),h=i/(c-l);return t.map(function(d){return[n+(d[0]-a)*f,o+(d[1]-l)*h]})}function jr(t){var e=t.map(function(i){return i[0]}),r=t.map(function(i){return i[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,r)}}function $s(t,e,r){var i=t[0],n=t[1],o=jr(e),s=o.minX,a=o.maxX,l=[[s,n],[a,n]],u=co(l[0],l[1]),c=Ys(e),f=[];if(c.forEach(function(p){var v=co(p[0],p[1]),g=p[0];if(H0(u,v))f.push({pos:t,line:p,type:"line"});else{var m=Qf(Ua(u,v),[l,p]);m.forEach(function(y){p.some(function(x){return W0(x,y)})?f.push({pos:y,line:p,type:"point"}):de(g[1]-n)!==0&&f.push({pos:y,line:p,type:"intersection"})})}}),me(f,function(p){return p[0]===i}))return!0;var h=0,d={};return f.forEach(function(p){var v=p.pos,g=p.type,m=p.line;if(!(v[0]>i))if(g==="intersection")++h;else{if(g==="line")return;if(g==="point"){var y=me(m,function(w){return w[1]!==n}),x=d[v[0]],C=y[1]>n?1:-1;x?x!==C&&++h:d[v[0]]=C}}}),h%2===1}function co(t,e){var r=t[0],i=t[1],n=e[0],o=e[1],s=n-r,a=o-i;Math.abs(s)<Xt&&(s=0),Math.abs(a)<Xt&&(a=0);var l=0,u=0,c=0;return s?a?(l=-a/s,u=1,c=-l*r-i):(u=1,c=-i):a&&(l=-1,c=r),[l,u,c]}function Ua(t,e){var r=t[0],i=t[1],n=t[2],o=e[0],s=e[1],a=e[2],l=r===0&&o===0,u=i===0&&s===0,c=[];if(l&&u)return[];if(l){var f=-n/i,h=-a/s;return f!==h?[]:[[-1/0,f],[1/0,f]]}else if(u){var d=-n/r,p=-a/o;return d!==p?[]:[[d,-1/0],[d,1/0]]}else if(r===0){var v=-n/i,g=-(s*v+a)/o;c=[[g,v]]}else if(o===0){var v=-a/s,g=-(i*v+n)/r;c=[[g,v]]}else if(i===0){var g=-n/r,v=-(o*g+a)/s;c=[[g,v]]}else if(s===0){var g=-a/o,v=-(r*g+n)/i;c=[[g,v]]}else{var g=(i*a-s*n)/(s*r-i*o),v=-(r*g+n)/i;c=[[g,v]]}return c.map(function(m){return[m[0],m[1]]})}function Qf(t,e){var r=e.map(function(f){return[0,1].map(function(h){return[Math.min(f[0][h],f[1][h]),Math.max(f[0][h],f[1][h])]})}),i=[];if(t.length===2){var n=t[0],o=n[0],s=n[1];if(de(o-t[1][0])){if(!de(s-t[1][1])){var u=Math.max.apply(Math,r.map(function(f){return f[0][0]})),c=Math.min.apply(Math,r.map(function(f){return f[0][1]}));if(de(u-c)>0)return[];i=[[u,s],[c,s]]}}else{var a=Math.max.apply(Math,r.map(function(f){return f[1][0]})),l=Math.min.apply(Math,r.map(function(f){return f[1][1]}));if(de(a-l)>0)return[];i=[[o,a],[o,l]]}}return i.length||(i=t.filter(function(f){var h=f[0],d=f[1];return r.every(function(p){return 0<=de(h-p[0][0])&&0<=de(p[0][1]-h)&&0<=de(d-p[1][0])&&0<=de(p[1][1]-d)})})),i.map(function(f){return[de(f[0]),de(f[1])]})}function Ys(t){return F0(t.slice(1),[t[0]]).map(function(e,r){return[t[r],e]})}function V0(t,e){var r=t.slice(),i=e.slice();hu(r)===-1&&r.reverse(),hu(i)===-1&&i.reverse();var n=Ys(r),o=Ys(i),s=n.map(function(c){return co(c[0],c[1])}),a=o.map(function(c){return co(c[0],c[1])}),l=[];s.forEach(function(c,f){var h=n[f],d=[];a.forEach(function(p,v){var g=Ua(c,p),m=Qf(g,[h,o[v]]);d.push.apply(d,m.map(function(y){return{index1:f,index2:v,pos:y,type:"intersection"}}))}),d.sort(function(p,v){return Je(h[0],p.pos)-Je(h[0],v.pos)}),l.push.apply(l,d),$s(h[1],i)&&l.push({index1:f,index2:-1,pos:h[1],type:"inside"})}),o.forEach(function(c,f){if($s(c[1],r)){var h=!1,d=tr(l,function(p){var v=p.index2;return v===f?(h=!0,!1):!!h});d===-1&&(h=!1,d=tr(l,function(p){var v=p.index1,g=p.index2;return v===-1&&g+1===f?(h=!0,!1):!!h})),d===-1?l.push({index1:-1,index2:f,pos:c[1],type:"inside"}):l.splice(d,0,{index1:-1,index2:f,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var f=c.pos,h=f[0]+"x"+f[1];return u[h]?!1:(u[h]=!0,!0)})}function j0(t,e){var r=V0(t,e);return r.map(function(i){var n=i.pos;return n})}function $0(t,e){var r=j0(t,e);return Jf(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xs=function(t,e){return Xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Xs(t,e)};function Y0(t,e){Xs(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jt=function(){return jt=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},jt.apply(this,arguments)};function X0(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=Math.atan2(i,r);return n>=0?n:n+Math.PI*2}function us(t){return X0([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function U0(t){return t.touches&&t.touches.length>=2}function Nn(t){return t?t.touches?K0(t.touches):[th(t)]:[]}function q0(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function wu(t,e,r){var i=r.length,n=Wi(t,i),o=n.clientX,s=n.clientY,a=n.originalClientX,l=n.originalClientY,u=Wi(e,i),c=u.clientX,f=u.clientY,h=Wi(r,i),d=h.clientX,p=h.clientY,v=o-c,g=s-f,m=o-d,y=s-p;return{clientX:a,clientY:l,deltaX:v,deltaY:g,distX:m,distY:y}}function cs(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function K0(t){for(var e=Math.min(t.length,2),r=[],i=0;i<e;++i)r.push(th(t[i]));return r}function th(t){return{clientX:t.clientX,clientY:t.clientY}}function Wi(t,e){e===void 0&&(e=t.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},i=Math.min(t.length,e),n=0;n<i;++n){var o=t[n];r.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,r.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,r.clientX+=o.clientX,r.clientY+=o.clientY}return e?{clientX:r.clientX/e,clientY:r.clientY/e,originalClientX:r.originalClientX/e,originalClientY:r.originalClientY/e}:r}var fs=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),us(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),us(e)-us(this.startClients)},t.prototype.getPosition=function(e,r){e===void 0&&(e=this.prevClients);var i=wu(e||this.prevClients,this.prevClients,this.startClients),n=i.deltaX,o=i.deltaY;return this.movement+=Math.sqrt(n*n+o*o),this.prevClients=e,i},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var r=this.prevClients,i=this.startClients,n=Math.min(this.length,r.length),o=[],s=0;s<n;++s)o[s]=wu([e[s]],[r[s]],[i[s]]);return o},t.prototype.getMovement=function(e){var r=this.movement;if(!e)return r;var i=Wi(e,this.length),n=Wi(this.prevClients,this.length),o=i.clientX-n.clientX,s=i.clientY-n.clientY;return Math.sqrt(o*o+s*s)+r},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),cs(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),cs(e)/cs(this.startClients)},t.prototype.move=function(e,r){this.startClients.forEach(function(i){i.clientX-=e,i.clientY-=r}),this.prevClients.forEach(function(i){i.clientX-=e,i.clientY-=r})},t}(),_u=["textarea","input"],Z0=function(t){Y0(e,t);function e(r,i){i===void 0&&(i={});var n=t.call(this)||this;n.options={},n.flag=!1,n.pinchFlag=!1,n.data={},n.isDrag=!1,n.isPinch=!1,n.clientStores=[],n.targets=[],n.prevTime=0,n.doubleFlag=!1,n._useMouse=!1,n._useTouch=!1,n._useDrag=!1,n._dragFlag=!1,n._isTrusted=!1,n._isMouseEvent=!1,n._isSecondaryButton=!1,n._preventMouseEvent=!1,n._prevInputEvent=null,n._isDragAPI=!1,n._isIdle=!0,n._preventMouseEventId=0,n._window=window,n.onDragStart=function(h,d){if(d===void 0&&(d=!0),!(!n.flag&&h.cancelable===!1)){var p=h.type.indexOf("drag")>=-1;if(!(n.flag&&p)){n._isDragAPI=!0;var v=n.options,g=v.container,m=v.pinchOutside,y=v.preventWheelClick,x=v.preventRightClick,C=v.preventDefault,w=v.checkInput,b=v.dragFocusedInput,_=v.preventClickEventOnDragStart,S=v.preventClickEventOnDrag,M=v.preventClickEventByCondition,T=n._useTouch,B=!n.flag;if(n._isSecondaryButton=h.which===3||h.button===2,y&&(h.which===2||h.button===1)||x&&(h.which===3||h.button===2))return n.stop(),!1;if(B){var k=n._window.document.activeElement,E=h.target;if(E){var R=E.tagName.toLowerCase(),A=_u.indexOf(R)>-1,G=E.isContentEditable;if(A||G){if(w||!b&&k===E)return!1;if(k&&(k===E||G&&k.isContentEditable&&k.contains(E)))if(b)E.blur();else return!1}else if((C||h.type==="touchstart")&&k){var F=k.tagName.toLowerCase();(k.isContentEditable||_u.indexOf(F)>-1)&&k.blur()}(_||S||M)&&$t(n._window,"click",n._onClick,!0)}n.clientStores=[new fs(Nn(h))],n._isIdle=!1,n.flag=!0,n.isDrag=!1,n._isTrusted=d,n._dragFlag=!0,n._prevInputEvent=h,n.data={},n.doubleFlag=Qi()-n.prevTime<200,n._isMouseEvent=q0(h),!n._isMouseEvent&&n._preventMouseEvent&&n._allowMouseEvent();var z=n._preventMouseEvent||n.emit("dragStart",jt(jt({data:n.data,datas:n.data,inputEvent:h,isMouseEvent:n._isMouseEvent,isSecondaryButton:n._isSecondaryButton,isTrusted:d,isDouble:n.doubleFlag},n.getCurrentStore().getPosition()),{preventDefault:function(){h.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));z===!1&&n.stop(),n._isMouseEvent&&n.flag&&C&&h.preventDefault()}if(!n.flag)return!1;var U=0;if(B?(n._attchDragEvent(),T&&m&&(U=setTimeout(function(){$t(g,"touchstart",n.onDragStart,{passive:!1})}))):T&&m&&Ft(g,"touchstart",n.onDragStart),n.flag&&U0(h)){if(clearTimeout(U),B&&h.touches.length!==h.changedTouches.length)return;n.pinchFlag||n.onPinchStart(h)}}}},n.onDrag=function(h,d){if(n.flag){var p=n.options.preventDefault;!n._isMouseEvent&&p&&h.preventDefault(),n._prevInputEvent=h;var v=Nn(h),g=n.moveClients(v,h,!1);if(n._dragFlag){if(n.pinchFlag||g.deltaX||g.deltaY){var m=n._preventMouseEvent||n.emit("drag",jt(jt({},g),{isScroll:!!d,inputEvent:h}));if(m===!1){n.stop();return}}n.pinchFlag&&n.onPinch(h,v)}n.getCurrentStore().getPosition(v,!0)}},n.onDragEnd=function(h){if(n.flag){var d=n.options,p=d.pinchOutside,v=d.container,g=d.preventClickEventOnDrag,m=d.preventClickEventOnDragStart,y=d.preventClickEventByCondition,x=n.isDrag;(g||m||y)&&requestAnimationFrame(function(){n._allowClickEvent()}),!y&&!m&&g&&!x&&n._allowClickEvent(),n._useTouch&&p&&Ft(v,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(h);var C=h!=null&&h.touches?Nn(h):[],w=C.length;w===0||!n.options.keepDragging?n.flag=!1:n._addStore(new fs(C));var b=n._getPosition(),_=Qi(),S=!x&&n.doubleFlag;n._prevInputEvent=null,n.prevTime=x||S?0:_,n.flag||(n._dettachDragEvent(),n._preventMouseEvent||n.emit("dragEnd",jt({data:n.data,datas:n.data,isDouble:S,isDrag:x,isClick:!x,isMouseEvent:n._isMouseEvent,isSecondaryButton:n._isSecondaryButton,inputEvent:h,isTrusted:n._isTrusted},b)),n.clientStores=[],n._isMouseEvent||(n._preventMouseEvent=!0,clearTimeout(n._preventMouseEventId),n._preventMouseEventId=setTimeout(function(){n._preventMouseEvent=!1},200)),n._isIdle=!0)}},n.onBlur=function(){n.onDragEnd()},n._allowClickEvent=function(){Ft(n._window,"click",n._onClick,!0)},n._onClick=function(h){n._allowClickEvent(),n._allowMouseEvent();var d=n.options.preventClickEventByCondition;d!=null&&d(h)||(h.stopPropagation(),h.preventDefault())},n._onContextMenu=function(h){var d=n.options;d.preventRightClick?n.onDragEnd(h):h.preventDefault()},n._passCallback=function(){};var o=[].concat(r),s=o[0];n._window=Mf(s)?s:br(s),n.options=jt({checkInput:!1,container:s&&!("document"in s)?br(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var a=n.options,l=a.container,u=a.events,c=a.checkWindowBlur;if(n._useDrag=u.indexOf("drag")>-1,n._useTouch=u.indexOf("touch")>-1,n._useMouse=u.indexOf("mouse")>-1,n.targets=o,n._useDrag&&o.forEach(function(h){$t(h,"dragstart",n.onDragStart)}),n._useMouse&&(o.forEach(function(h){$t(h,"mousedown",n.onDragStart),$t(h,"mousemove",n._passCallback)}),$t(l,"contextmenu",n._onContextMenu)),c&&$t(br(),"blur",n.onBlur),n._useTouch){var f={passive:!1};o.forEach(function(h){$t(h,"touchstart",n.onDragStart,f),$t(h,"touchmove",n._passCallback,f)})}return n}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(i,n){return i+n.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(r,i,n,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(r,i),o&&this.onDrag(n,!0))},e.prototype.move=function(r,i){var n=r[0],o=r[1],s=this.getCurrentStore(),a=s.prevClients;return this.moveClients(a.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+n,clientY:c+o,originalClientX:u,originalClientY:c}}),i,!0)},e.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},e.prototype.setEventData=function(r){var i=this.data;for(var n in r)i[n]=r[n];return this},e.prototype.setEventDatas=function(r){return this.setEventData(r)},e.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),jt(jt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var r=this,i=this.targets,n=this.options.container;this.off(),Ft(this._window,"blur",this.onBlur),this._useDrag&&i.forEach(function(o){Ft(o,"dragstart",r.onDragStart)}),this._useMouse&&(i.forEach(function(o){Ft(o,"mousedown",r.onDragStart)}),Ft(n,"contextmenu",this._onContextMenu)),this._useTouch&&(i.forEach(function(o){Ft(o,"touchstart",r.onDragStart)}),Ft(n,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(r){var i=this,n=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>n)){var o=new fs(Nn(r));this.pinchFlag=!0,this._addStore(o);var s=this.emit("pinchStart",jt(jt({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(r,i){if(!(!this.flag||!this.pinchFlag||i.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",jt(jt({data:this.data,datas:this.data,movement:this.getMovement(i),angle:n.getAngle(i),rotation:n.getRotation(i),touches:n.getPositions(i),scale:n.getScale(i),distance:n.getDistance(i)},n.getPosition(i)),{inputEvent:r,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(r){if(this.pinchFlag){var i=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",jt(jt({data:this.data,datas:this.data,isPinch:i,touches:n.getPositions()},n.getPosition()),{inputEvent:r}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(r,i,n){var o=this._getPosition(r,n),s=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!s&&this.isDrag&&(a=!0),jt(jt({data:this.data,datas:this.data},o),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:i,isTrusted:this._isTrusted,isFirstDrag:a})},e.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},e.prototype._getPosition=function(r,i){var n=this.getCurrentStore(),o=n.getPosition(r,i),s=this.clientStores.slice(1).reduce(function(u,c){var f=c.getPosition();return u.distX+=f.distX,u.distY+=f.distY,u},o),a=s.distX,l=s.distY;return jt(jt({},o),{distX:a,distY:l})},e.prototype._attchDragEvent=function(){var r=this._window,i=this.options.container,n={passive:!1};this._isDragAPI&&($t(i,"dragover",this.onDrag,n),$t(r,"dragend",this.onDragEnd)),this._useMouse&&($t(i,"mousemove",this.onDrag),$t(r,"mouseup",this.onDragEnd)),this._useTouch&&($t(i,"touchmove",this.onDrag,n),$t(r,"touchend",this.onDragEnd,n),$t(r,"touchcancel",this.onDragEnd,n))},e.prototype._dettachDragEvent=function(){var r=this._window,i=this.options.container;this._isDragAPI&&(Ft(i,"dragover",this.onDrag),Ft(r,"dragend",this.onDragEnd)),this._useMouse&&(Ft(i,"mousemove",this.onDrag),Ft(r,"mouseup",this.onDragEnd)),this._useTouch&&(Ft(i,"touchstart",this.onDragStart),Ft(i,"touchmove",this.onDrag),Ft(r,"touchend",this.onDragEnd),Ft(r,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(yn);function J0(t){for(var e=5381,r=t.length;r;)e=e*33^t.charCodeAt(--r);return e>>>0}var Q0=J0;function t1(t){return Q0(t).toString(36)}function e1(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function r1(t,e,r){return r.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(i,n){var o=n.trim();return(o?zr(o):[""]).map(function(s){var a=s.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(t))):a?".".concat(t," ").concat(a):".".concat(t)}).join(", ")+" {"})}function i1(t,e,r,i,n){var o=ki(i),s=o.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),r.nonce&&s.setAttribute("nonce",r.nonce),s.innerHTML=r1(t,e,r),(n||o.head||o.body).appendChild(s),s}function n1(t){var e="rCS"+t1(t);return{className:e,inject:function(r,i){i===void 0&&(i={});var n=e1(r),o=(n||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!o)o=i1(e,t,i,r,n);else{var s=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var a,l=parseFloat(o.getAttribute("data-styled-count"))||0;l<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(l-1))}}}}}var Us=function(){return Us=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Us.apply(this,arguments)};function o1(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function eh(t,e){var r=n1(e),i=r.className;return i0(function(n,o){var s=n.className,a=s===void 0?"":s;n.cspNonce;var l=o1(n,["className","cspNonce"]),u=g0();return m0(o,function(){return u.current},[]),Nf(function(){var c=r.inject(u.current,{nonce:n.cspNonce});return function(){c.destroy()}},[]),ze(t,Us({ref:u,"data-styled-id":i,className:"".concat(a," ").concat(i)},l))})}var qs=function(t,e){return qs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},qs(t,e)};function bn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qs(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var I=function(){return I=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},I.apply(this,arguments)};function s1(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function a1(t,e,r,i){var n=arguments.length,o=n<3?e:i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,r,o):s(e,r))||o);return n>3&&o&&Object.defineProperty(e,r,o),o}function l1(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,o=[],s;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o}function tt(t,e,r){if(arguments.length===2)for(var i=0,n=e.length,o;i<n;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function xn(t,e){return I({events:[],props:[],name:t},e)}var u1=["n","w","s","e"],qa=["n","w","s","e","nw","ne","sw","se"];function c1(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function f1(t){var e=c1(1,t),r=Math.round(t/45)*45%180,i="ns-resize";return r===135?i="nwse-resize":r===45?i="nesw-resize":r===90&&(i="ew-resize"),"cursor:".concat(i,";cursor: url('").concat(e,"') 16 16, ").concat(i,";")}var Mi=S0(),rh=Mi.browser.webkit,ih=rh&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),nh=Mi.browser.name,oh=parseInt(Mi.browser.version,10),h1=nh==="chrome",d1=Mi.browser.chromium,p1=parseInt(Mi.browser.chromiumVersion,10)||0,v1=h1&&oh>=109||d1&&p1>=109,g1=nh==="firefox",m1=parseInt(Mi.browser.webkitVersion,10)>=612||oh>=15,Ka="moveable-",y1=qa.map(function(t){var e="",r="",i="center",n="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(o,";"),n="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",n="top"),t.indexOf("w")>-1&&(r="left: ".concat(o,";"),i="right"),t.indexOf("e")>-1&&(r="left: 0px;",i="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(r).concat(e,`
        transform-origin: `).concat(i," ").concat(n,`;
    }`)}).join(`
`),b1=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(y1,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(f1(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(ih?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),x1=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Ks=1e-4,fe=1e-7,Gn=1e-9,Zs=Math.pow(10,10),ku=-Zs,C1={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Za={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},sh={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},ah=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Cn(t,e,r,i,n,o){var s,a;o===void 0&&(o="draggable");var l=(a=(s=e.gestos[o])===null||s===void 0?void 0:s.move(r,t.inputEvent))!==null&&a!==void 0?a:{},u=l.originalDatas||l.datas,c=u[o]||(u[o]={});return I(I({},l),{isPinch:!!i,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var gi=function(){function t(e){var r;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[e]={},r)}return t.prototype.dragStart=function(e,r){this.isDrag=!1,this.isFlag=!1;var i=r.originalDatas;return this.datas=i,i[this.ableName]||(i[this.ableName]={}),I(I({},this.move(e,r.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,r){return this.move([e[0]-this.prevX,e[1]-this.prevY],r)},t.prototype.move=function(e,r){var i,n,o=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],i=e[0],n=e[1],this.isFlag=!0;else{var s=this.isDrag;i=this.prevX+e[0],n=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(o=!0)}return this.prevX=i,this.prevY=n,{type:"drag",clientX:i,clientY:n,inputEvent:r,isFirstDrag:o,isDrag:this.isDrag,distX:i-this.startX,distY:n-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function fi(t,e,r,i){var n=t.length===16,o=n?4:3,s=qr(t,r,i,o),a=O(s,4),l=O(a[0],2),u=l[0],c=l[1],f=O(a[1],2),h=f[0],d=f[1],p=O(a[2],2),v=p[0],g=p[1],m=O(a[3],2),y=m[0],x=m[1],C=O(Gt(t,e,o),2),w=C[0],b=C[1],_=Math.min(u,h,v,y),S=Math.min(c,d,g,x),M=Math.max(u,h,v,y),T=Math.max(c,d,g,x);u=u-_||0,h=h-_||0,v=v-_||0,y=y-_||0,c=c-S||0,d=d-S||0,g=g-S||0,x=x-S||0,w=w-_||0,b=b-S||0;var B=t[0],k=t[o+1],E=ue(B*k);return{left:_,top:S,right:M,bottom:T,origin:[w,b],pos1:[u,c],pos2:[h,d],pos3:[v,g],pos4:[y,x],direction:E}}function lh(t,e){var r=e.clientX,i=e.clientY,n=e.datas,o=t.state,s=o.moveableClientRect,a=o.rootMatrix,l=o.is3d,u=o.pos1,c=s.left,f=s.top,h=l?4:3,d=O(pt(bi(a,[r-c,i-f],h),u),2),p=d[0],v=d[1],g=O(Ue({datas:n,distX:p,distY:v}),2),m=g[0],y=g[1];return[m,y]}function Ur(t,e){var r=e.datas,i=t.state,n=i.allMatrix,o=i.beforeMatrix,s=i.is3d,a=i.left,l=i.top,u=i.origin,c=i.offsetMatrix,f=i.targetMatrix,h=i.transformOrigin,d=s?4:3;r.is3d=s,r.matrix=n,r.targetMatrix=f,r.beforeMatrix=o,r.offsetMatrix=c,r.transformOrigin=h,r.inverseMatrix=Xe(n,d),r.inverseBeforeMatrix=Xe(o,d),r.absoluteOrigin=Wr(Et([a,l],u),d),r.startDragBeforeDist=ne(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=ne(r.inverseMatrix,r.absoluteOrigin,d)}function S1(t){return fi(t.datas.beforeTransform,[50,50],100,100).direction}function Lo(t,e,r){var i=e.datas,n=e.originalDatas.beforeRenderable,o=i.transformIndex,s=n.nextTransforms,a=s.length,l=n.nextTransformAppendedIndexes,u=-1;o===-1?(r==="translate"?u=0:r==="rotate"&&(u=tr(s,function(d){return d.match(/scale\(/g)})),u===-1&&(u=s.length),i.transformIndex=u):me(l,function(d){return d.index===o&&d.functionName===r})?u=o:u=o+l.filter(function(d){return d.index<o}).length;var c=Um(s,t.state,u),f=c.targetFunction,h=r==="rotate"?"rotateZ":r;i.beforeFunctionTexts=c.beforeFunctionTexts,i.afterFunctionTexts=c.afterFunctionTexts,i.beforeTransform=c.beforeFunctionMatrix,i.beforeTransform2=c.beforeFunctionMatrix2,i.targetTansform=c.targetFunctionMatrix,i.afterTransform=c.afterFunctionMatrix,i.afterTransform2=c.afterFunctionMatrix2,i.targetAllTransform=c.allFunctionMatrix,f.functionName===h?(i.afterFunctionTexts.splice(0,1),i.isAppendTransform=!1):a>u&&(i.isAppendTransform=!0,n.nextTransformAppendedIndexes=tt(tt([],O(l),!1),[{functionName:r,index:u,isAppend:!0}],!1))}function zo(t,e,r){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?r:e," ").concat(t.afterFunctionTexts.join(" "))}function w1(t){var e=t.datas,r=t.distX,i=t.distY,n=O(ch({datas:e,distX:r,distY:i}),2),o=n[0],s=n[1],a=uh(e,M0([o,s],4));return ne(a,Wr([0,0,0],4),4)}function uh(t,e,r){var i=t.beforeTransform,n=t.afterTransform,o=t.beforeTransform2,s=t.afterTransform2,a=t.targetAllTransform,l=r?Pt(a,e,4):Pt(e,a,4),u=Pt(Xe(r?o:i,4),l,4),c=Pt(u,Xe(r?s:n,4),4);return c}function ch(t){var e=t.datas,r=t.distX,i=t.distY,n=e.inverseBeforeMatrix,o=e.is3d,s=e.startDragBeforeDist,a=e.absoluteOrigin,l=o?4:3;return pt(ne(n,Et(a,[r,i]),l),s)}function Ue(t,e){var r=t.datas,i=t.distX,n=t.distY,o=r.inverseBeforeMatrix,s=r.inverseMatrix,a=r.is3d,l=r.startDragBeforeDist,u=r.startDragDist,c=r.absoluteOrigin,f=a?4:3;return pt(ne(e?o:s,Et(c,[i,n]),f),e?l:u)}function _1(t,e){var r=t.datas,i=t.distX,n=t.distY;r.beforeMatrix;var o=r.matrix,s=r.is3d;r.startDragBeforeDist;var a=r.startDragDist,l=r.absoluteOrigin,u=s?4:3;return pt(ne(o,Et(a,[i,n]),u),l)}function k1(t,e,r,i,n,o){return i===void 0&&(i=e),n===void 0&&(n=r),o===void 0&&(o=[0,0]),t?t.map(function(s,a){var l=hn(s),u=l.value,c=l.unit,f=a?n:i,h=a?r:e;if(s==="%"||isNaN(u)){var d=f?o[a]/f:0;return h*d}else if(c!=="%")return u;return h*u/100}):o}function fh(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function E1(t,e){return fh(e).map(function(r){return t[r]})}function hs(t,e){var r=(e+1)/2;return[ao(t[0][0],t[1][0],r,1-r),ao(t[0][1],t[1][1],r,1-r)]}function Zt(t,e){var r=hs([t[0],t[1]],e[0]),i=hs([t[2],t[3]],e[0]);return hs([r,i],e[1])}function M1(t,e,r,i,n,o){var s=qr(e,r,i,n),a=Zt(s,o),l=t[0]-a[0],u=t[1]-a[1];return[l,u]}function Sn(t,e,r,i){return Pt(t,ji(e,i,r),i)}function D1(t,e,r,i){var n=t.transformOrigin,o=t.offsetMatrix,s=t.is3d,a=s?4:3,l;if(ie(r)){var u=e.beforeTransform,c=e.afterTransform;i?l=Fe(en(r),4,a):l=Fe(Pt(Pt(u,en([r]),4),c,4),4,a)}else l=r;return Sn(o,l,n,a)}function T1(t,e){var r=t.transformOrigin,i=t.offsetMatrix,n=t.is3d,o=t.targetMatrix,s=t.targetAllTransform,a=n?4:3;return Sn(i,Pt(s||o,Ya(e,a),a),r,a)}function No(t,e){var r=Di(e);return{setTransform:function(i,n){n===void 0&&(n=-1),r.startTransforms=Ht(i)?i:Sr(i),Js(t,e,n)},setTransformIndex:function(i){Js(t,e,i)}}}function Go(t,e,r){var i=Di(e),n=i.startTransforms;Js(t,e,tr(n,function(o){return o.indexOf("".concat(r,"("))===0}))}function Js(t,e,r){var i=Di(e),n=e.datas;if(n.transformIndex=r,r!==-1){var o=i.startTransforms[r];if(o){var s=t.state,a=vi([o],{"x%":function(l){return l/100*s.offsetWidth},"y%":function(l){return l/100*s.offsetHeight}});n.startValue=a[0].functionValue}}}function Ja(t,e){var r=Di(t);r.nextTransforms=Sr(e)}function Di(t){return t.originalDatas.beforeRenderable}function fo(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Fn(t){return(fo(t)||[]).join(" ")}function Hn(t){return Di(t).nextStyle}function hh(t,e,r,i,n){Ja(n,e);var o=le.drag(t,Cn(n,t.state,r,i)),s=o?o.transform:e;return I(I({transform:e,drag:o},ce({transform:s},n)),{afterTransform:s})}function Qa(t,e,r,i,n,o){var s=D1(t.state,n,e,o),a=I1(t,r,i,s);return a}function dh(t,e,r,i,n,o,s){var a=Qa(t,e,r,n,o,s),l=t.state,u=l.left,c=l.top,f=t.props.groupable,h=f?u:0,d=f?c:0,p=pt(i,a);return pt(p,[h,d])}function P1(t,e,r,i,n,o,s){var a=dh(t,e,r,i,n,o,s);return a}function B1(t,e,r){return[e?-1+t[0]/(e/2):0,r?-1+t[1]/(r/2):0]}function I1(t,e,r,i){i===void 0&&(i=t.state.allMatrix);var n=t.state,o=n.width,s=n.height,a=n.is3d,l=a?4:3,u=[o/2*(1+e[0])+r[0],s/2*(1+e[1])+r[1]];return Gt(i,u,l)}function O1(t,e,r){var i=r.fixedDirection,n=r.fixedPosition,o=r.fixedOffset;return dh(t,"rotate(".concat(e,"deg)"),i,n,o,r)}function R1(t,e,r,i,n,o){var s=t.props.groupable,a=t.state,l=a.transformOrigin,u=a.offsetMatrix,c=a.is3d,f=a.width,h=a.height,d=a.left,p=a.top,v=o.fixedDirection,g=o.nextTargetMatrix||a.targetMatrix,m=c?4:3,y=k1(n,e,r,f,h,l),x=s?d:0,C=s?p:0,w=Sn(u,g,y,m),b=M1(i,w,e,r,m,v);return pt(b,[x,C])}function A1(t,e){return Zt(De(t.state),e)}function L1(t,e){var r=t.targetGesto,i=t.controlGesto,n;return r!=null&&r.isFlag()&&(n=r.getEventData()[e]),!n&&(i!=null&&i.isFlag())&&(n=i.getEventData()[e]),n||{}}function z1(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function N1(t){var e=t("scale"),r=t("rotate"),i=t("translate"),n=[];return i&&i!=="0px"&&i!=="none"&&n.push("translate(".concat(i.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&n.push("rotate(".concat(r,")")),e&&e!=="1"&&e!=="none"&&n.push("scale(".concat(e.split(/\s+/).join(","),")")),n}function ph(t,e,r){for(var i=t,n=[],o=Ga(t)||kr(t),s=!r&&t===e||t===o,a=s,l=!1,u=3,c,f,h,d=!1,p=nn(e,e,!0).offsetParent,v=1;i&&!a;){a=s;var g=ye(i),m=g("position"),y=Nh(i),x=m==="fixed",C=N1(g),w=D0(Am(y)),b=void 0,_=!1,S=!1,M=0,T=0,B=0,k=0,E={hasTransform:!1,fixedContainer:null};x&&(d=!0,E=Fm(i),p=E.fixedContainer);var R=w.length;!l&&(R===16||C.length)&&(l=!0,u=4,na(n),h&&(h=Fe(h,3,4))),l&&R===9&&(w=Fe(w,3,4));var A=Gm(i,t),G=A.tagName,F=A.hasOffset,z=A.isSVG,U=A.origin,q=A.targetOrigin,H=A.offset,et=O(H,2),ot=et[0],it=et[1];G==="svg"&&!i.ownerSVGElement&&h&&(n.push({type:"target",target:i,matrix:Hm(i,u)}),n.push({type:"offset",target:i,matrix:At(u)}));var st=parseFloat(g("zoom"))||1;if(x)b=E.fixedContainer,_=!0;else{var Q=nn(i,e,!1,!0,g),lt=Q.offsetZoom;if(b=Q.offsetParent,_=Q.isEnd,S=Q.isStatic,v*=lt,(Q.isCustomElement||lt!==1)&&S)ot-=b.offsetLeft,it-=b.offsetTop;else if(g1||v1){var ht=Q.parentSlotElement;if(ht){for(var gt=b,xt=0,rt=0;gt&&z1(gt);)xt+=gt.offsetLeft,rt+=gt.offsetTop,gt=gt.offsetParent;ot-=xt,it-=rt}}}if(rh&&!m1&&F&&!z&&S&&(m==="relative"||m==="static")&&(ot-=b.offsetLeft,it-=b.offsetTop,s=s||_),x)F&&E.hasTransform&&(B=b.clientLeft,k=b.clientTop);else if(F&&p!==b&&(M=b.clientLeft,T=b.clientTop),F&&b===o){var ft=Gh(i,!1);ot+=ft[0],it+=ft[1]}if(n.push({type:"target",target:i,matrix:ji(w,u,U)}),C.length&&(n.push({type:"offset",target:i,matrix:At(u)}),n.push({type:"target",target:i,matrix:ji(en(C),u,U)})),F){var D=i===t,P=D?0:i.scrollLeft,L=D?0:i.scrollTop;n.push({type:"offset",target:i,matrix:Vr([ot-P+M-B,it-L+T-k],u)})}else n.push({type:"offset",target:i,origin:U});if(st!==1&&n.push({type:"zoom",target:i,matrix:ji(Ya([st,st],u),u,[0,0])}),h||(h=w),c||(c=U),f||(f=q),a||x)break;i=b,s=_,(!r||i===o)&&(a=s)}return h||(h=At(u)),c||(c=[0,0]),f||(f=[0,0]),{zoom:v,offsetContainer:p,matrixes:n,targetMatrix:h,transformOrigin:c,targetOrigin:f,is3d:l,hasFixed:d}}var Or=null,Rr=null,ri=null;function mi(t){t?(window.Map&&(Or=new Map,Rr=new Map),ri=[]):(Or=null,ri=null,Rr=null)}function G1(t){var e=Rr==null?void 0:Rr.get(t);if(e)return e;var r=$i(t,!0);return Rr&&Rr.set(t,r),r}function F1(t,e){if(ri){var r=me(ri,function(n){return n[0][0]==t&&n[0][1]==e});if(r)return r[1]}var i=ph(t,e,!0);return ri&&ri.push([[t,e],i]),i}function ye(t){var e=Or==null?void 0:Or.get(t);if(!e){var r=br(t).getComputedStyle(t);if(!Or)return function(o){return r[o]};e={style:r,cached:{}},Or.set(t,e)}var i=e.cached,n=e.style;return function(o){return o in i||(i[o]=n[o]),i[o]}}function Ne(t,e,r){var i=r.originalDatas;i.groupable=i.groupable||{};var n=i.groupable;n.childDatas=n.childDatas||[];var o=n.childDatas;return t.moveables.map(function(s,a){return o[a]=o[a]||{},o[a][e]=o[a][e]||{},I(I({},r),{isRequestChild:!0,datas:o[a][e],originalDatas:o[a]})})}function ds(t,e,r,i,n,o,s){var a=!!r.match(/Start$/g),l=!!r.match(/End$/g),u=n.isPinch,c=n.datas,f=Ne(t,e.name,n),h=t.moveables,d=[],p=f.map(function(v,g){var m=h[g],y=m.state,x=y.gestos,C=v;if(a)C=new gi(s).dragStart(i,v),d.push(C);else{if(x[s]||(x[s]=c.childGestos[g]),!x[s])return;C=Cn(v,y,i,u,o,s),d.push(C)}var w=e[r](m,I(I({},C),{parentFlag:!0}));return l&&(x[s]=null),w});return a&&(c.childGestos=h.map(function(v){return v.state.gestos[s]})),{eventParams:p,childEvents:d}}function Qe(t,e,r,i,n,o){n===void 0&&(n=function(c,f){return f});var s=!!r.match(/End$/g),a=Ne(t,e.name,i),l=t.moveables,u=a.map(function(c,f){var h=l[f],d=c;d=n(h,c);var p=e[r](h,I(I({},d),{parentFlag:!0}));return p&&o&&o(h,c,p,f),s&&(h.state.gestos={}),p});return u}function ho(t,e,r,i){var n=r.fixedDirection,o=r.fixedPosition,s=i.datas.startPositions||De(e.state),a=Zt(s,n),l=O(ne(mn(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),u=l[0],c=l[1];return i.datas.originalX=u,i.datas.originalY=c,i}function vh(t,e,r,i){var n=t.getState(),o=n.renderPoses,s=n.rotation,a=n.direction,l=$r(t.props,e).zoom,u=Vi(s/Math.PI*180),c={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var h=f.renderDirectionMap;r.forEach(function(p){var v=p.dir;c[v]=!0});var d=ue(a);return r.map(function(p){var v=p.data,g=p.classNames,m=p.dir,y=Za[m];if(!y||!c[m])return null;h[m]=!0;var x=(bt(u,15)+d*sh[m]+720)%180,C={};return er(v).forEach(function(w){C["data-".concat(w)]=v[w]}),i.createElement("div",I({className:dt.apply(void 0,tt(["control","direction",m,e],O(g),!1)),"data-rotation":x,"data-direction":m},C,{key:"direction-".concat(m),style:mo.apply(void 0,tt([s,l],O(y.map(function(w){return o[w]})),!1))}))})}function gh(t,e,r,i){var n=$r(t.props,r),o=n.renderDirections,s=o===void 0?e:o,a=n.displayAroundControls;if(!s)return[];var l=s===!0?qa:s;return tt(tt([],O(a?xh(t,i,r,l):[]),!1),O(vh(t,r,l.map(function(u){return{data:{},classNames:[],dir:u}}),i)),!1)}function rn(t,e,r,i,n,o){for(var s=[],a=6;a<arguments.length;a++)s[a-6]=arguments[a];var l=Wt(r,i),u=e?bt(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(o),className:dt.apply(void 0,tt(["line","direction",e?"edge":"",e],O(s),!1)),"data-rotation":u,"data-line-key":o,"data-direction":e,style:Li(r,i,n,l)})}function mh(t,e,r,i,n){var o=r===!0?u1:r;return o.map(function(s,a){var l=O(Za[s],2),u=l[0],c=l[1];if(c!=null)return rn(t,s,i[u],i[c],n,"".concat(e,"Edge").concat(a),e)}).filter(Boolean)}function yh(t){return function(e,r){var i=$r(e.props,t).edge;return i&&(i===!0||i.length)?tt(tt([],O(mh(r,t,i,e.getState().renderPoses,e.props.zoom)),!1),O(H1(e,t,r)),!1):bh(e,t,r)}}function bh(t,e,r){return gh(t,qa,e,r)}function H1(t,e,r){return gh(t,["nw","ne","sw","se"],e,r)}function xh(t,e,r,i){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var o=t.getState(),s=o.renderPoses,a=o.rotation,l=o.direction,u=n.renderDirectionMap,c=t.props.zoom,f=ue(l),h=a/Math.PI*180;return(i||er(u)).map(function(d){var p=Za[d];if(!p)return null;var v=(bt(h,15)+f*sh[d]+720)%180,g=["around-control"];return r&&g.push("direction",r),e.createElement("div",{className:dt.apply(void 0,tt([],O(g),!1)),"data-rotation":v,"data-direction":d,key:"direction-around-".concat(d),style:mo.apply(void 0,tt([a,c],O(p.map(function(m){return s[m]})),!1))})})}function tl(t,e,r){var i=t||{},n=i.position,o=n===void 0?"client":n,s=i.left,a=s===void 0?-1/0:s,l=i.top,u=l===void 0?-1/0:l,c=i.right,f=c===void 0?1/0:c,h=i.bottom,d=h===void 0?1/0:h,p={position:o,left:a,top:u,right:f,bottom:d};return{vertical:Eu(p,e,!0),horizontal:Eu(p,r,!1)}}function Fo(t,e){var r=t.state,i=r.containerClientRect,n=i.clientHeight,o=i.clientWidth,s=i.clientLeft,a=i.clientTop,l=r.snapOffset,u=l.left,c=l.top,f=l.right,h=l.bottom,d=e||t.props.bounds||{},p=d.position||"client",v=p==="css",g=d.left,m=g===void 0?-1/0:g,y=d.top,x=y===void 0?-1/0:y,C=d.right,w=C===void 0?v?-1/0:1/0:C,b=d.bottom,_=b===void 0?v?-1/0:1/0:b;return v&&(w=o+f-u-w,_=n+h-c-_),{left:m+u-s,right:w+u-s,top:x+c-a,bottom:_+c-a}}function W1(t,e,r){var i=Fo(t),n=i.left,o=i.top,s=i.right,a=i.bottom,l=O(r,2),u=l[0],c=l[1],f=O(pt(r,e),2),h=f[0],d=f[1];X(h)<fe&&(h=0),X(d)<fe&&(d=0);var p=d>0,v=h>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(h===0&&d===0)return{vertical:g,horizontal:m};if(h===0)p?a<c&&(m.pos=a,m.offset=c-a):o>c&&(m.pos=o,m.offset=c-o);else if(d===0)v?s<u&&(g.pos=s,g.offset=u-s):n>u&&(g.pos=n,g.offset=u-n);else{var y=d/h,x=r[1]-y*u,C=0,w=0,b=!1;v&&s<=u?(C=y*s+x,w=s,b=!0):!v&&u<=n&&(C=y*n+x,w=n,b=!0),b&&(C<o||C>a)&&(b=!1),b||(p&&a<=c?(C=a,w=(C-x)/y,b=!0):!p&&c<=o&&(C=o,w=(C-x)/y,b=!0)),b&&(g.isBound=!0,g.pos=w,g.offset=u-w,m.isBound=!0,m.pos=C,m.offset=c-C)}return{vertical:g,horizontal:m}}function Eu(t,e,r){var i=t[r?"left":"top"],n=t[r?"right":"bottom"],o=Math.min.apply(Math,tt([],O(e),!1)),s=Math.max.apply(Math,tt([],O(e),!1)),a=[];return i+1>o&&a.push({direction:"start",isBound:!0,offset:o-i,pos:i}),n-1<s&&a.push({direction:"end",isBound:!0,offset:s-n,pos:n}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(l,u){return X(u.offset)-X(l.offset)})}function Mu(t,e,r){var i=r?t.map(function(n){return gn(n,r)}):t;return i.some(function(n){return n[0]<e.left&&X(n[0]-e.left)>.1||n[0]>e.right&&X(n[0]-e.right)>.1||n[1]<e.top&&X(n[1]-e.top)>.1||n[1]>e.bottom&&X(n[1]-e.bottom)>.1})}function V1(t,e,r){var i=Me(t),n=Math.sqrt(i*i-e*e)||0;return[n,-n].sort(function(o,s){return X(o-t[r?0:1])-X(s-t[r?0:1])}).map(function(o){return Wt([0,0],r?[o,e]:[e,o])})}function j1(t,e,r,i,n){if(!t.props.bounds)return[];var o=n*Math.PI/180,s=Fo(t),a=s.left,l=s.top,u=s.right,c=s.bottom,f=a-i[0],h=u-i[0],d=l-i[1],p=c-i[1],v={left:f,top:d,right:h,bottom:p};if(!Mu(r,v,0))return[];var g=[];return[[f,0],[h,0],[d,1],[p,1]].forEach(function(m){var y=O(m,2),x=y[0],C=y[1];r.forEach(function(w){var b=Wt([0,0],w);g.push.apply(g,tt([],O(V1(w,x,C).map(function(_){return o+_-b}).filter(function(_){return!Mu(e,v,_)}).map(function(_){return bt(_*180/Math.PI,fe)})),!1))})}),g}var $1=["left","right","center"],Y1=["top","bottom","middle"],Du={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},wr={start:"left",end:"right",center:"center"},_r={start:"top",end:"bottom",center:"middle"};function ii(){return{left:!1,top:!1,right:!1,bottom:!1}}function Ti(t,e){var r=t.props,i=r.snappable,n=r.bounds,o=r.innerBounds,s=r.verticalGuidelines,a=r.horizontalGuidelines,l=r.snapGridWidth,u=r.snapGridHeight,c=t.state,f=c.guidelines,h=c.enableSnap;return!i||!h||e&&i!==!0&&i.indexOf(e)<0?!1:!!(l||u||n||o||f&&f.length||s&&s.length||a&&a.length)}function el(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function X1(t,e){var r=el(t),i={};for(var n in r)n in e&&r[n]&&(i[n]=e[n]);return i}function rl(t,e){var r=X1(t,e),i=Y1.filter(function(o){return o in r}),n=$1.filter(function(o){return o in r});return{horizontalNames:i,verticalNames:n,horizontal:i.map(function(o){return r[o]}),vertical:n.map(function(o){return r[o]})}}function U1(t,e,r){var i=Gt(t,[e.clientLeft,e.clientTop],r);return[e.left+i[0],e.top+i[1]]}function q1(t){var e=O(t,2),r=e[0],i=e[1],n=i[0]-r[0],o=i[1]-r[1];Math.abs(n)<Xt&&(n=0),Math.abs(o)<Xt&&(o=0);var s=0,a=0,l=0;return n?o?(s=-o/n,a=1,l=s*r[0]-r[1]):(a=1,l=-r[1]):(s=-1,l=r[0]),[s,a,l].map(function(u){return bt(u,Xt)})}var Ch="snapRotationThreshold",Sh="snapRotationDegrees",wh="snapHorizontalThreshold",_h="snapVerticalThreshold";function Ho(t,e,r,i,n,o,s){var a;i===void 0&&(i=[]),n===void 0&&(n=[]);var l=t.props,u=((a=t.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],c=Vu(s,l[wh],5),f=Vu(o,l[_h],5);return kh(t.state.guidelines,e,r,i,n,c,f,u)}function kh(t,e,r,i,n,o,s,a){return{vertical:Pu(t,"vertical",e,s*a[0],i),horizontal:Pu(t,"horizontal",r,o*a[1],n)}}function K1(t,e,r){var i=O(r,2),n=i[0],o=i[1],s=O(e,2),a=s[0],l=s[1],u=O(pt(r,e),2),c=u[0],f=u[1],h=f>0,d=c>0;c=yo(c),f=yo(f);var p={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(c===0&&f===0)return{vertical:p,horizontal:v};var g=Ho(t,c?[n]:[],f?[o]:[],[],[],void 0,void 0),m=g.vertical,y=g.horizontal;m.posInfos.filter(function(G){var F=G.pos;return d?F>=a:F<=a}),y.posInfos.filter(function(G){var F=G.pos;return h?F>=l:F<=l}),m.isSnap=m.posInfos.length>0,y.isSnap=y.posInfos.length>0;var x=Qs(m),C=x.isSnap,w=x.guideline,b=Qs(y),_=b.isSnap,S=b.guideline,M=_?S.pos[1]:0,T=C?w.pos[0]:0;if(c===0)_&&(v.isSnap=!0,v.pos=S.pos[1],v.offset=o-v.pos);else if(f===0)C&&(p.isSnap=!0,p.pos=T,p.offset=n-T);else{var B=f/c,k=r[1]-B*n,E=0,R=0,A=!1;C?(R=T,E=B*R+k,A=!0):_&&(E=M,R=(E-k)/B,A=!0),A&&(p.isSnap=!0,p.pos=R,p.offset=n-R,v.isSnap=!0,v.pos=E,v.offset=o-E)}return{vertical:p,horizontal:v}}function pr(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function Tu(t,e,r,i){var n=rl(t.props.snapDirections,e),o=Ho(t,n.vertical,n.horizontal,n.verticalNames.map(function(l){return pr(l)}),n.horizontalNames.map(function(l){return pr(l)}),r,i),s=pr(n.horizontalNames[o.horizontal.index]),a=pr(n.verticalNames[o.vertical.index]);return{vertical:I(I({},o.vertical),{direction:a}),horizontal:I(I({},o.horizontal),{direction:s})}}function Qs(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],i=r.guidelineInfos[0],n=i.offset,o=i.dist,s=i.guideline;return{isSnap:e,offset:n,dist:o,pos:r.pos,guideline:s}}function Pu(t,e,r,i,n){var o,s;if(n===void 0&&(n=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=e==="vertical",l=a?0:1,u=r.map(function(f,h){var d=n[h]||"",p=t.map(function(v){var g=v.pos,m=f-g[l];return{offset:m,dist:X(m),guideline:v,direction:d}}).filter(function(v){var g=v.guideline,m=v.dist,y=g.type;return!(y!==e||m>i)}).sort(function(v,g){return v.dist-g.dist});return{pos:f,index:h,guidelineInfos:p,direction:d}}).filter(function(f){return f.guidelineInfos.length>0}).sort(function(f,h){return f.guidelineInfos[0].dist-h.guidelineInfos[0].dist}),c=u.length>0;return{isSnap:c,index:c?u[0].index:-1,direction:(s=(o=u[0])===null||o===void 0?void 0:o.direction)!==null&&s!==void 0?s:"",posInfos:u}}function Z1(t,e,r,i,n){var o=[];r[0]&&r[1]?o=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(h,d,p){var v=p[d+1]||p[0];o.push(h),o.push([(h[0]+v[0])/2,(h[1]+v[1])/2])}):t.props.keepRatio?o.push([-1,-1],[-1,1],[1,-1],[1,1],r):(o.push.apply(o,tt([],O(E1([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),o.length>1&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]));var s=o.map(function(h){return Zt(e,h)}),a=s.map(function(h){return h[0]}),l=s.map(function(h){return h[1]}),u=Ho(t,a,l,o.map(function(h){return pr(h[0])}),o.map(function(h){return pr(h[1])}),i,n),c=pr(o.map(function(h){return h[0]})[u.vertical.index]),f=pr(o.map(function(h){return h[1]})[u.horizontal.index]);return{vertical:I(I({},u.vertical),{direction:c}),horizontal:I(I({},u.horizontal),{direction:f})}}function Eh(t,e){var r=X(t.offset),i=X(e.offset);return t.isBound&&e.isBound?i-r:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?i-r:t.isSnap?-1:e.isSnap||r<fe?1:i<fe?-1:r-i}function po(t,e){return t.slice().sort(function(r,i){var n=r.sign[e],o=i.sign[e],s=r.offset[e],a=i.offset[e];if(n){if(!o)return-1}else return 1;return Eh({isBound:r.isBound,isSnap:r.isSnap,offset:s},{isBound:i.isBound,isSnap:i.isSnap,offset:a})})[0]}function J1(t,e,r){var i=[];if(r)X(e[0])!==1||X(e[1])!==1?i.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):i.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),i.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var n=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(a){var l=[s*n[0],a*n[1]];e[0]===l[0]&&e[1]===l[1]||i.push([e,l])})})}else if(t[0]){var o=X(e[0])===1?[1]:[1,-1];o.forEach(function(s){i.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var o=X(e[1])===1?[1]:[1,-1];o.forEach(function(a){i.push([[-1,e[1]],[-1,a*t[1]]],[[0,e[1]],[0,a*t[1]]],[[1,e[1]],[1,a*t[1]]])})}return i}function Mh(t,e){var r=Ns([e[0][0],e[1][0]]),i=Ns([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:i<=t[1]}}function il(t,e){var r=O(e,2),i=r[0],n=r[1],o=n[0]-i[0],s=n[1]-i[1];X(o)<fe&&(o=0),X(s)<fe&&(s=0);var a,l;if(!o)a=i[0],l=t[0];else if(!s)a=i[1],l=t[1];else{var u=s/o;a=u*(t[0]-i[0])+i[1],l=t[1]}return a-l}function Dh(t,e,r,i){return i===void 0&&(i=fe),t.every(function(n){var o=il(n,e),s=o<=0;return s===r||X(o)<=i})}function Bu(t,e,r,i,n){return n===void 0&&(n=0),i&&e-n<=t||!i&&t<=r+n?{isBound:!0,offset:i?e-t:r-t}:{isBound:!1,offset:0}}function Q1(t,e){var r=e.line,i=e.centerSign,n=e.verticalSign,o=e.horizontalSign,s=e.lineConstants,a=t.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=a.left,u=a.top,c=a.width,f=a.height,h=[[l,u],[l,u+f]],d=[[l,u],[l+c,u]],p=[[l+c,u],[l+c,u+f]],v=[[l,u+f],[l+c,u+f]];if(Dh([[l,u],[l+c,u],[l,u+f],[l+c,u+f]],r,i))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=vr(r,s,d,n),m=vr(r,s,v,n),y=vr(r,s,h,o),x=vr(r,s,p,o),C=g.isBound&&m.isBound,w=g.isBound||m.isBound,b=y.isBound&&x.isBound,_=y.isBound||x.isBound,S=yi(g.offset,m.offset),M=yi(y.offset,x.offset),T=[0,0],B=!1,k=!1;return X(M)<X(S)?(T=[S,0],B=w,k=C):(T=[0,M],B=_,k=b),{isAllBound:k,isVerticalBound:w,isHorizontalBound:_,isBound:B,offset:T}}function vr(t,e,r,i,n,o){var s=O(e,2),a=s[0],l=s[1],u=t[0],c=r[0],f=r[1],h=yo(f[1]-c[1]),d=yo(f[0]-c[0]),p=l,v=a,g=-a/l;if(d){if(!h){if(o&&!p)return{isBound:!1,offset:0};if(v){var C=(c[1]-u[1])/g+u[0];return Bu(C,c[0],f[0],i,n)}else{var y=c[1]-u[1],x=X(y)<=(n||0);return{isBound:x,offset:x?y:0}}}}else{if(o&&!v)return{isBound:!1,offset:0};if(p){var m=g*(c[0]-u[0])+u[1];return Bu(m,c[1],f[1],i,n)}else{var y=c[0]-u[0],x=X(y)<=(n||0);return{isBound:x,offset:x?y:0}}}return{isBound:!1,offset:0}}function Th(t,e,r){return e.map(function(i){var n=Q1(t,i),o=n.isBound,s=n.offset,a=n.isVerticalBound,l=n.isHorizontalBound,u=i.multiple,c=Ue({datas:r,distX:s[0],distY:s[1]}).map(function(f,h){return f*(u[h]?2/u[h]:0)});return{sign:u,isBound:o,isVerticalBound:a,isHorizontalBound:l,isSnap:!1,offset:c}})}function tm(t,e,r){var i,n=nl(t,e,[0,0],!1).map(function(h){return I(I({},h),{multiple:h.multiple.map(function(d){return X(d)*2})})}),o=Th(t,n,r),s=po(o,0),a=po(o,1),l=0,u=0,c=s.isVerticalBound||a.isVerticalBound,f=s.isHorizontalBound||a.isHorizontalBound;return(c||f)&&(i=O(_1({datas:r,distX:-s.offset[0],distY:-a.offset[1]}),2),l=i[0],u=i[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:f,offset:u}}}function em(t,e){var r=[],i=t[0],n=t[1];return i&&n?r.push([[0,n*2],t,[-i,n]],[[i*2,0],t,[i,-n]]):i?(r.push([[i*2,0],[i,1],[i,-1]]),e&&r.push([[0,-1],[i,-1],[-i,-1]],[[0,1],[i,1],[-i,1]])):n?(r.push([[0,n*2],[1,n],[-1,n]]),e&&r.push([[-1,0],[-1,n],[-1,-n]],[[1,0],[1,n],[1,-n]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function nl(t,e,r,i){var n=t.state,o=n.allMatrix,s=n.is3d,a=qr(o,100,100,s?4:3),l=Zt(a,[0,0]);return em(r,i).map(function(u){var c=O(u,3),f=c[0],h=c[1],d=c[2],p=[Zt(a,h),Zt(a,d)],v=q1(p),g=Mh(l,p),m=g.vertical,y=g.horizontal,x=il(l,p)<=0;return{multiple:f,centerSign:x,verticalSign:m,horizontalSign:y,lineConstants:v,line:[Zt(e,h),Zt(e,d)]}})}function Iu(t,e,r,i){var n=i?t.map(function(o){return gn(o,i)}):t;return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].some(function(o){var s=il(r,o)<=0;return!Dh(e,o,s)})}function rm(t){var e=O(t,2),r=e[0],i=e[1],n=i[0]-r[0],o=i[1]-r[1];if(!n)return X(r[0]);if(!o)return X(r[1]);var s=o/n;return X((-s*r[0]+r[1])/Math.sqrt(Math.pow(s,2)+1))}function im(t){var e=O(t,2),r=e[0],i=e[1],n=i[0]-r[0],o=i[1]-r[1];if(!n)return[r[0],0];if(!o)return[0,r[1]];var s=o/n,a=-s*r[0]+r[1];return[-a/(s+1/s),a/(s*s+1)]}function nm(t,e,r,i,n){var o=t.props.innerBounds,s=n*Math.PI/180;if(!o)return[];var a=o.left,l=o.top,u=o.width,c=o.height,f=a-i[0],h=a+u-i[0],d=l-i[1],p=l+c-i[1],v=[[f,d],[h,d],[f,p],[h,p]],g=Zt(r,[0,0]);if(!Iu(r,v,g,0))return[];var m=[],y=v.map(function(x){return[Me(x),Wt([0,0],x)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(x){var C=Wt([0,0],im(x)),w=rm(x);m.push.apply(m,tt([],O(y.filter(function(b){var _=O(b,1),S=_[0];return S&&w<=S}).map(function(b){var _=O(b,2),S=_[0],M=_[1],T=Math.acos(S?w/S:0),B=M+T,k=M-T;return[s+B-C,s+k-C]}).reduce(function(b,_){return b.push.apply(b,tt([],O(_),!1)),b},[]).filter(function(b){return!Iu(e,v,g,b)}).map(function(b){return bt(b*180/Math.PI,fe)})),!1))}),m}function om(t){var e=t.props.innerBounds,r=ii();if(!e)return{boundMap:r,vertical:[],horizontal:[]};var i=t.getRect(),n=i.pos1,o=i.pos2,s=i.pos3,a=i.pos4,l=[n,o,s,a],u=Zt(l,[0,0]),c=e.left,f=e.top,h=e.width,d=e.height,p=[[c,f],[c,f+d]],v=[[c,f],[c+h,f]],g=[[c+h,f],[c+h,f+d]],m=[[c,f+d],[c+h,f+d]],y=nl(t,l,[0,0],!1),x=[],C=[];return y.forEach(function(w){var b=w.line,_=w.lineConstants,S=Mh(u,b),M=S.horizontal,T=S.vertical,B=vr(b,_,v,T,1,!0),k=vr(b,_,m,T,1,!0),E=vr(b,_,p,M,1,!0),R=vr(b,_,g,M,1,!0);B.isBound&&!r.top&&(x.push(f),r.top=!0),k.isBound&&!r.bottom&&(x.push(f+d),r.bottom=!0),E.isBound&&!r.left&&(C.push(c),r.left=!0),R.isBound&&!r.right&&(C.push(c+h),r.right=!0)}),{boundMap:r,horizontal:x,vertical:C}}function sm(t,e,r,i){var n=e[0]-t[0],o=e[1]-t[1];if(X(n)<Xt&&(n=0),X(o)<Xt&&(o=0),!n)return i?[0,0]:[0,r];if(!o)return i?[r,0]:[0,0];var s=o/n,a=t[1]-s*t[0];if(i){var l=s*(e[0]+r)+a;return[r,l-e[1]]}else{var u=(e[1]+r-a)/s;return[u-e[0],r]}}function ta(t,e,r,i,n){var o=sm(t,e,r,i);if(!o)return{isOutside:!1,offset:[0,0]};var s=Je(t,e),a=Je(o,t),l=Je(o,e),u=a>s||l>s,c=O(Ue({datas:n,distX:o[0],distY:o[1]}),2),f=c[0],h=c[1];return{offset:[f,h],isOutside:u}}function vo(t,e){return t.isBound?t.offset:e.isSnap?Qs(e).offset:0}function am(t,e,r,i,n){var o=O(e,2),s=o[0],a=o[1],l=O(r,2),u=l[0],c=l[1],f=O(i,2),h=f[0],d=f[1],p=O(n,2),v=p[0],g=p[1],m=-v,y=-g;if(t&&s&&a){m=0,y=0;var x=[];if(u&&c?x.push([0,g],[v,0]):u?x.push([v,0]):c?x.push([0,g]):h&&d?x.push([0,g],[v,0]):h?x.push([v,0]):d&&x.push([0,g]),x.length){x.sort(function(_,S){return Me(pt([s,a],_))-Me(pt([s,a],S))});var C=x[0];if(C[0]&&X(s)>Xt)m=-C[0],y=a*X(s+m)/X(s)-a;else if(C[1]&&X(a)>Xt){var w=a;y=-C[1],m=s*X(a+y)/X(w)-s}if(t&&c&&u)if(X(m)>Xt&&X(m)<X(v)){var b=X(v)/X(m);m*=b,y*=b}else if(X(y)>Xt&&X(y)<X(g)){var b=X(g)/X(y);m*=b,y*=b}else m=yi(-v,m),y=yi(-g,y)}}else m=s||u?-v:0,y=a||c?-g:0;return[m,y]}function lm(t,e,r,i,n,o){if(!Ti(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=al(o.absolutePoses,[e,r]),a=Ee(s),l=a.left,u=a.right,c=a.top,f=a.bottom,h={horizontal:s.map(function(R){return R[1]}),vertical:s.map(function(R){return R[0]})},d=el(t.props.snapDirections),p=rl(d,{left:l,right:u,top:c,bottom:f,center:(l+u)/2,middle:(c+f)/2}),v=Wo(t,n,p,h),g=v.vertical,m=v.horizontal,y=tm(t,s,o),x=y.vertical,C=y.horizontal,w=g.isSnap,b=m.isSnap,_=g.isBound||x.isBound,S=m.isBound||C.isBound,M=yi(g.offset,x.offset),T=yi(m.offset,C.offset),B=O(am(i,[e,r],[_,S],[w,b],[M,T]),2),k=B[0],E=B[1];return[{isBound:_,isSnap:w,offset:k},{isBound:S,isSnap:b,offset:E}]}function Wo(t,e,r,i){i===void 0&&(i=r);var n=tl(Fo(t),i.vertical,i.horizontal),o=n.horizontal,s=n.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Ho(t,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),l=a.horizontal,u=a.vertical,c=vo(o[0],l),f=vo(s[0],u),h=X(c),d=X(f);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:h,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:d,bounds:s,snap:u}}}function Ou(t,e,r,i,n,o,s){s===void 0&&(s=[1,1]);var a=tl(e,r,i),l=a.horizontal,u=a.vertical,c=kh(t,r,i,[],[],n,o,s),f=c.horizontal,h=c.vertical,d=vo(l[0],f),p=vo(u[0],h),v=X(d),g=X(p);return{horizontal:{isBound:l[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:d,dist:v,bounds:l,snap:f},vertical:{isBound:u[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:p,dist:g,bounds:u,snap:h}}}function um(t,e,r,i){var n=Wt(t,e)/Math.PI*180,o=r.vertical,s=o.isBound,a=o.isSnap,l=o.dist,u=r.horizontal,c=u.isBound,f=u.isSnap,h=u.dist,d=n%180,p=d<3||d>177,v=d>87&&d<93;return h<l&&(s||a&&!v&&(!i||!p))?"vertical":c||f&&!p&&(!i||!v)?"horizontal":""}function cm(t,e,r,i,n,o){return r.map(function(s){var a=O(s,2),l=a[0],u=a[1],c=Zt(e,l),f=Zt(e,u),h=i?fm(t,c,f,n):Wo(t,n,{vertical:[f[0]],horizontal:[f[1]]}),d=h.horizontal,p=d.offset,v=d.isBound,g=d.isSnap,m=h.vertical,y=m.offset,x=m.isBound,C=m.isSnap,w=pt(u,l);if(!y&&!p)return{isBound:x||v,isSnap:C||g,sign:w,offset:[0,0]};var b=um(c,f,h,i);if(!b)return{sign:w,isBound:!1,isSnap:!1,offset:[0,0]};var _=b==="vertical",S=[0,0];return!i&&X(u[0])===1&&X(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?S=Ue({datas:o,distX:-y,distY:-p}):S=ta(c,f,-(_?y:p),_,o).offset,S=S.map(function(M,T){return M*(w[T]?2/w[T]:0)}),{sign:w,isBound:_?x:v,isSnap:_?C:g,offset:S}})}function Ru(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function fm(t,e,r,i){var n=W1(t,e,r),o=n.horizontal,s=n.vertical,a=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:K1(t,e,r),l=a.horizontal,u=a.vertical,c=Ru(o,l),f=Ru(s,u),h=X(c),d=X(f);return{horizontal:{isBound:o.isBound,isSnap:l.isSnap,offset:c,dist:h},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:f,dist:d}}}function hm(t,e,r,i,n){var o=[-r[0],-r[1]],s=t.state,a=s.width,l=s.height,u=t.props.bounds,c=1/0,f=1/0;if(u){var h=[[r[0],-r[1]],[-r[0],r[1]]],d=u.left,p=d===void 0?-1/0:d,v=u.top,g=v===void 0?-1/0:v,m=u.right,y=m===void 0?1/0:m,x=u.bottom,C=x===void 0?1/0:x;h.forEach(function(w){var b=w[0]!==o[0],_=w[1]!==o[1],S=Zt(e,w),M=Wt(i,S)*360/Math.PI;if(_){var T=S.slice();(X(M-360)<2||X(M-180)<2)&&(T[1]=i[1]);var B=ta(i,T,(i[1]<S[1]?C:g)-S[1],!1,n),k=O(B.offset,2),E=k[1],R=B.isOutside;isNaN(E)||(f=l+(R?1:-1)*X(E))}if(b){var T=S.slice();(X(M-90)<2||X(M-270)<2)&&(T[0]=i[0]);var A=ta(i,T,(i[0]<S[0]?y:p)-S[0],!0,n),G=O(A.offset,1),F=G[0],z=A.isOutside;isNaN(F)||(c=a+(z?1:-1)*X(F))}})}return{maxWidth:c,maxHeight:f}}var le={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var r=t.props,i=r.hideThrottleDragRotateLine,n=r.throttleDragRotate,o=r.zoom,s=t.getState(),a=s.dragInfo,l=s.beforeOrigin;if(i||!n||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var c=Me(u),f=Wt(u,[0,0]);return[e.createElement("div",{className:dt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(f,"rad) scaleY(").concat(o,")")}})]},dragStart:function(t,e){var r=e.datas,i=e.parentEvent,n=e.parentGesto,o=t.state,s=o.gestos,a=o.style;if(s.draggable)return!1;s.draggable=n||t.targetGesto,r.datas={},r.left=parseFloat(a.left||"")||0,r.top=parseFloat(a.top||"")||0,r.bottom=parseFloat(a.bottom||"")||0,r.right=parseFloat(a.right||"")||0,r.startValue=[0,0],Ur(t,e),Go(t,e,"translate"),Bm(t,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=Ct(t,e,I({set:function(c){r.startValue=c}},No(t,e))),u=i||ct(t,"onDragStart",l);return u!==!1?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,r.isPinch=!1),r.isDrag?l:!1},drag:function(t,e){if(e){Lo(t,e,"translate");var r=e.datas,i=e.parentEvent,n=e.parentFlag,o=e.isPinch,s=e.deltaOffset,a=e.useSnap,l=e.isRequest,u=e.isGroup,c=e.parentThrottleDrag,f=e.distX,h=e.distY,d=r.isDrag,p=r.prevDist,v=r.prevBeforeDist,g=r.startValue;if(d){s&&(f+=s[0],h+=s[1]);var m=t.props,y=m.parentMoveable,x=u?0:m.throttleDrag||c||0,C=i?0:m.throttleDragRotate||0,w=0,b=!1,_=!1,S=!1,M=!1;if(!i&&C>0&&(f||h)){var T=m.startDragRotate||0,B=bt(T+Wt([0,0],[f,h])*180/Math.PI,C)-T,k=h*Math.abs(Math.cos((B-90)/180*Math.PI)),E=f*Math.abs(Math.cos(B/180*Math.PI)),R=Me([E,k]);w=B*Math.PI/180,f=R*Math.cos(w),h=R*Math.sin(w)}if(!o&&!i&&!n){var A=O(lm(t,f,h,C,!a&&l||s,r),2),G=A[0],F=A[1];b=G.isSnap,_=G.isBound,S=F.isSnap,M=F.isBound;var z=G.offset,U=F.offset;f+=z,h+=U}var q=Et(ch({datas:r,distX:f,distY:h}),g),H=Et(w1({datas:r,distX:f,distY:h}),g);du(H,fe),du(q,fe),C||(!b&&!_&&(H[0]=bt(H[0],x),q[0]=bt(q[0],x)),!S&&!M&&(H[1]=bt(H[1],x),q[1]=bt(q[1],x)));var et=pt(q,g),ot=pt(H,g),it=pt(ot,p),st=pt(et,v);r.prevDist=ot,r.prevBeforeDist=et,r.passDelta=it,r.passDist=ot;var Q=r.left+et[0],lt=r.top+et[1],ht=r.right-et[0],gt=r.bottom-et[1],xt=zo(r,"translate(".concat(H[0],"px, ").concat(H[1],"px)"),"translate(".concat(ot[0],"px, ").concat(ot[1],"px)"));if(Ja(e,xt),t.state.dragInfo.dist=i?[0,0]:ot,!(!i&&!y&&it.every(function(L){return!L})&&st.some(function(L){return!L}))){var rt=t.state,ft=rt.width,D=rt.height,P=Ct(t,e,I({transform:xt,dist:ot,delta:it,translate:H,beforeDist:et,beforeDelta:st,beforeTranslate:q,left:Q,top:lt,right:ht,bottom:gt,width:ft,height:D,isPinch:o},ce({transform:xt},e)));return!i&&ct(t,"onDrag",P),P}}}},dragAfter:function(t,e){var r=e.datas,i=r.deltaOffset;return i[0]||i[1]?(r.deltaOffset=[0,0],this.drag(t,I(I({},e),{deltaOffset:i}))):!1},dragEnd:function(t,e){var r=e.parentEvent,i=e.datas;if(t.state.dragInfo=null,!!i.isDrag){i.isDrag=!1;var n=xe(t,e,{});return!r&&ct(t,"onDragEnd",n),n}},dragGroupStart:function(t,e){var r,i,n=e.datas,o=e.clientX,s=e.clientY,a=this.dragStart(t,e);if(!a)return!1;var l=ds(t,this,"dragStart",[o||0,s||0],e,!1,"draggable"),u=l.childEvents,c=l.eventParams,f=I(I({},a),{targets:t.props.targets,events:c}),h=ct(t,"onDragGroupStart",f);n.isDrag=h!==!1;var d=(i=(r=u[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&i!==void 0?i:[0,0];return n.throttleOffset=[d[0]%1,d[1]%1],n.isDrag?a:!1},dragGroup:function(t,e){var r=e.datas;if(r.isDrag){var i=this.drag(t,I(I({},e),{parentThrottleDrag:t.props.throttleDrag})),n=e.datas.passDelta,o=ds(t,this,"drag",n,e,!1,"draggable").eventParams;if(i){var s=I({targets:t.props.targets,events:o},i);return ct(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var r=e.isDrag,i=e.datas;if(i.isDrag){this.dragEnd(t,e);var n=ds(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return ct(t,"onDragGroupEnd",xe(t,e,{targets:t.props.targets,events:n})),r}},request:function(t){var e={},r=t.getRect(),i=0,n=0,o=!1;return{isControl:!1,requestStart:function(s){return o=s.useSnap,{datas:e,useSnap:o}},request:function(s){return"x"in s?i=s.x-r.left:"deltaX"in s&&(i+=s.deltaX),"y"in s?n=s.y-r.top:"deltaY"in s&&(n+=s.deltaY),{datas:e,distX:i,distY:n,useSnap:o}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:o}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function Ph(t,e){var r=Zt(t,e),i=[0,0];return{fixedPosition:r,fixedDirection:e,fixedOffset:i}}function dm(t,e){var r=t.allMatrix,i=t.is3d,n=t.width,o=t.height,s=i?4:3,a=[n/2*(1+e[0]),o/2*(1+e[1])],l=Gt(r,a,s),u=[0,0];return{fixedPosition:l,fixedDirection:e,fixedOffset:u}}function Bh(t,e){var r=t.allMatrix,i=t.is3d,n=t.width,o=t.height,s=i?4:3,a=B1(e,n,o),l=Gt(r,e,s),u=[n?0:e[0],o?0:e[1]];return{fixedPosition:l,fixedDirection:a,fixedOffset:u}}var Au=cl("resizable"),ea={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:yh("resizable"),dragControlCondition:Au,viewClassName:ul("resizable"),dragControlStart:function(t,e){var r,i=e.inputEvent,n=e.isPinch,o=e.isGroup,s=e.parentDirection,a=e.parentGesto,l=e.datas,u=e.parentFixedDirection,c=e.parentEvent,f=jh(s,n,i,l),h=t.state,d=h.target,p=h.width,v=h.height,g=h.gestos;if(!f||!d||g.resizable)return!1;g.resizable=a||t.controlGesto,!n&&Ur(t,e),l.datas={},l.direction=f,l.startOffsetWidth=p,l.startOffsetHeight=v,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=h.inlineCSSWidth||h.cssWidth,l.startHeight=h.inlineCSSHeight||h.cssHeight,l.maxSize=[1/0,1/0],o||(l.minSize=[h.minOffsetWidth,h.minOffsetHeight],l.maxSize=[h.maxOffsetWidth,h.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";l.transformOrigin=m&&ie(m)?m.split(" "):m,l.startOffsetMatrix=h.offsetMatrix,l.startTransformOrigin=h.transformOrigin,l.isWidth=(r=e==null?void 0:e.parentIsWidth)!==null&&r!==void 0?r:!f[0]&&!f[1]||f[0]||!f[1];function y(M){l.ratio=M&&isFinite(M)?M:0}l.startPositions=De(t.state);function x(M){var T=Ph(l.startPositions,M);l.fixedDirection=T.fixedDirection,l.fixedPosition=T.fixedPosition,l.fixedOffset=T.fixedOffset}function C(M){var T=Bh(t.state,M);l.fixedDirection=T.fixedDirection,l.fixedPosition=T.fixedPosition,l.fixedOffset=T.fixedOffset}function w(M){l.minSize=[Tt("".concat(M[0]),0)||0,Tt("".concat(M[1]),0)||0]}function b(M){var T=[M[0]||1/0,M[1]||1/0];(!pi(T[0])||isFinite(T[0]))&&(T[0]=Tt("".concat(T[0]),0)||1/0),(!pi(T[1])||isFinite(T[1]))&&(T[1]=Tt("".concat(T[1]),0)||1/0),l.maxSize=T}y(p/v),x(u||[-f[0],-f[1]]),l.setFixedDirection=x,l.setFixedPosition=C,l.setMin=w,l.setMax=b;var _=Ct(t,e,{direction:f,startRatio:l.ratio,set:function(M){var T=O(M,2),B=T[0],k=T[1];l.startWidth=B,l.startHeight=k},setMin:w,setMax:b,setRatio:y,setFixedDirection:x,setFixedPosition:C,setOrigin:function(M){l.transformOrigin=M},dragStart:le.dragStart(t,new gi().dragStart([0,0],e))}),S=c||ct(t,"onResizeStart",_);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,S!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:f}),l.isResize?_:!1},dragControl:function(t,e){var r,i=e.datas,n=e.parentFlag,o=e.isPinch,s=e.parentKeepRatio,a=e.dragClient,l=e.parentDist,u=e.useSnap,c=e.isRequest,f=e.isGroup,h=e.parentEvent,d=e.resolveMatrix,p=i.isResize,v=i.transformOrigin,g=i.startWidth,m=i.startHeight,y=i.prevWidth,x=i.prevHeight,C=i.minSize,w=i.maxSize,b=i.ratio,_=i.startOffsetWidth,S=i.startOffsetHeight,M=i.isWidth;if(!p)return;if(d){var T=t.state.is3d,B=i.startOffsetMatrix,k=i.startTransformOrigin,E=T?4:3,R=en(fo(e)),A=Math.sqrt(R.length);E!==A&&(R=Fe(R,A,E));var G=Sn(B,R,k,E),F=qr(G,_,S,E);i.startPositions=F,i.nextTargetMatrix=R,i.nextAllMatrix=G}var z=$r(t.props,"resizable"),U=z.resizeFormat,q=z.throttleResize,H=q===void 0?n?0:1:q,et=z.parentMoveable,ot=z.keepRatioFinally,it=i.direction,st=it,Q=0,lt=0;!it[0]&&!it[1]&&(st=[1,1]);var ht=b&&(s??z.keepRatio)||!1;function gt(){var ut=i.fixedDirection,at=Kh(st,ht,i,e);Q=at.distWidth,lt=at.distHeight;var vt=st[0]-ut[0]||ht?Math.max(_+Q,fe):_,yt=st[1]-ut[1]||ht?Math.max(S+lt,fe):S;return ht&&_&&S&&(M?yt=vt/b:vt=yt*b),[vt,yt]}var xt=O(gt(),2),rt=xt[0],ft=xt[1];h||(i.setFixedDirection(i.fixedDirection),ct(t,"onBeforeResize",Ct(t,e,{startFixedDirection:i.startFixedDirection,startFixedPosition:i.startFixedPosition,setFixedDirection:function(ut){var at;return i.setFixedDirection(ut),at=O(gt(),2),rt=at[0],ft=at[1],[rt,ft]},setFixedPosition:function(ut){var at;return i.setFixedPosition(ut),at=O(gt(),2),rt=at[0],ft=at[1],[rt,ft]},boundingWidth:rt,boundingHeight:ft,setSize:function(ut){var at;at=O(ut,2),rt=at[0],ft=at[1]}},!0)));var D=a;a||(!n&&o?D=A1(t,[0,0]):D=i.fixedPosition);var P=[0,0];o||(P=Tm(t,rt,ft,it,D,!u&&c,i)),l&&(!l[0]&&(P[0]=0),!l[1]&&(P[1]=0));function L(){var ut;U&&(ut=O(U([rt,ft]),2),rt=ut[0],ft=ut[1]),rt=bt(rt,H),ft=bt(ft,H)}if(ht){st[0]&&st[1]&&P[0]&&P[1]&&(X(P[0])>X(P[1])?P[1]=0:P[0]=0);var N=!P[0]&&!P[1];N&&L(),st[0]&&!st[1]||P[0]&&!P[1]||N&&M?(rt+=P[0],ft=rt/b):(!st[0]&&st[1]||!P[0]&&P[1]||N&&!M)&&(ft+=P[1],rt=ft*b)}else rt+=P[0],ft+=P[1],rt=Math.max(0,rt),ft=Math.max(0,ft);r=O(Sf([rt,ft],C,w,ht?b:!1),2),rt=r[0],ft=r[1],L(),ht&&(f||ot)&&(M?ft=rt/b:rt=ft*b),Q=rt-_,lt=ft-S;var W=[Q-y,lt-x];i.prevWidth=Q,i.prevHeight=lt;var $=R1(t,rt,ft,D,v,i);if(!(!et&&W.every(function(ut){return!ut})&&$.every(function(ut){return!ut}))){var j=le.drag(t,Cn(e,t.state,$,!!o,!1,"draggable")),V=j.transform,K=g+Q,Y=m+lt,nt=Ct(t,e,I({width:K,height:Y,offsetWidth:Math.round(rt),offsetHeight:Math.round(ft),startRatio:b,boundingWidth:rt,boundingHeight:ft,direction:it,dist:[Q,lt],delta:W,isPinch:!!o,drag:j},Yh({style:{width:"".concat(K,"px"),height:"".concat(Y,"px")},transform:V},j,e)));return!h&&ct(t,"onResize",nt),nt}},dragControlAfter:function(t,e){var r=e.datas,i=r.isResize,n=r.startOffsetWidth,o=r.startOffsetHeight,s=r.prevWidth,a=r.prevHeight;if(!(!i||t.props.checkResizableError===!1)){var l=t.state,u=l.width,c=l.height,f=u-(n+s),h=c-(o+a),d=X(f)>3,p=X(h)>3;if(d&&(r.startWidth+=f,r.startOffsetWidth+=f,r.prevWidth+=f),p&&(r.startHeight+=h,r.startOffsetHeight+=h,r.prevHeight+=h),d||p)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var r=e.datas,i=e.parentEvent;if(r.isResize){r.isResize=!1;var n=xe(t,e,{});return!i&&ct(t,"onResizeEnd",n),n}},dragGroupControlCondition:Au,dragGroupControlStart:function(t,e){var r=e.datas,i=this.dragControlStart(t,I(I({},e),{isGroup:!0}));if(!i)return!1;var n=Ne(t,"resizable",e),o=r.startOffsetWidth,s=r.startOffsetHeight;function a(){var d=r.minSize;n.forEach(function(p){var v=p.datas,g=v.minSize,m=v.startOffsetWidth,y=v.startOffsetHeight,x=o*(m?g[0]/m:0),C=s*(y?g[1]/y:0);d[0]=Math.max(d[0],x),d[1]=Math.max(d[1],C)})}function l(){var d=r.maxSize;n.forEach(function(p){var v=p.datas,g=v.maxSize,m=v.startOffsetWidth,y=v.startOffsetHeight,x=o*(m?g[0]/m:0),C=s*(y?g[1]/y:0);d[0]=Math.min(d[0],x),d[1]=Math.min(d[1],C)})}var u=Qe(t,this,"dragControlStart",e,function(d,p){return ho(t,d,r,p)});a(),l();var c=function(d){i.setFixedDirection(d),u.forEach(function(p,v){p.setFixedDirection(d),ho(t,p.moveable,r,n[v])})};r.setFixedDirection=c;var f=I(I({},i),{targets:t.props.targets,events:u.map(function(d){return I(I({},d),{setMin:function(p){d.setMin(p),a()},setMax:function(p){d.setMax(p),l()}})}),setFixedDirection:c,setMin:function(d){i.setMin(d),a()},setMax:function(d){i.setMax(d),l()}}),h=ct(t,"onResizeGroupStart",f);return r.isResize=h!==!1,r.isResize?i:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var i=$r(t.props,"resizable");jo(t,"onBeforeResize",function(d){ct(t,"onBeforeResizeGroup",Ct(t,e,I(I({},d),{targets:i.targets}),!0))});var n=this.dragControl(t,I(I({},e),{isGroup:!0}));if(n){var o=n.boundingWidth,s=n.boundingHeight,a=n.dist,l=i.keepRatio,u=[o/(o-a[0]),s/(s-a[1])],c=r.fixedPosition,f=Qe(t,this,"dragControl",e,function(d,p){var v=O(ne(mn(t.rotation/180*Math.PI,3),[p.datas.originalX*u[0],p.datas.originalY*u[1],1],3),2),g=v[0],m=v[1];return I(I({},p),{parentDist:null,parentScale:u,dragClient:Et(c,[g,m]),parentKeepRatio:l})}),h=I({targets:i.targets,events:f},n);return ct(t,"onResizeGroup",h),h}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,i=e.datas;if(i.isResize){this.dragControlEnd(t,e);var n=Qe(t,this,"dragControlEnd",e),o=xe(t,e,{targets:t.props.targets,events:n});return ct(t,"onResizeGroupEnd",o),r}},request:function(t){var e={},r=0,i=0,n=!1,o=t.getRect();return{isControl:!0,requestStart:function(s){var a;return n=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(a=s==null?void 0:s.horizontal)!==null&&a!==void 0?a:!0,useSnap:n}},request:function(s){return"offsetWidth"in s?r=s.offsetWidth-o.offsetWidth:"deltaWidth"in s&&(r+=s.deltaWidth),"offsetHeight"in s?i=s.offsetHeight-o.offsetHeight:"deltaHeight"in s&&(i+=s.deltaHeight),{datas:e,parentDist:[r,i],parentKeepRatio:s.keepRatio,useSnap:n}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:n}}}},unset:function(t){t.state.gestos.resizable=null}};function ps(t,e,r,i,n){var o=t.props.groupable,s=t.state,a=s.is3d?4:3,l=e.origin,u=Gt(t.state.rootMatrix,pt([l[0],l[1]],o?[0,0]:[s.left,s.top]),a),c=Et([n.left,n.top],u);e.startAbsoluteOrigin=c,e.prevDeg=Wt(c,[r,i])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Je(c,[r,i])}function eo(t,e,r){var i=r.defaultDeg,n=r.prevDeg,o=n%360,s=Math.floor(n/360);o<0&&(o+=360),o>t&&o>270&&t<90?++s:o<t&&o<90&&t>270&&--s;var a=e*(s*360+t-i);return r.prevDeg=i+a,a}function vs(t,e,r,i){return eo(Wt(i.startAbsoluteOrigin,[t,e])/Math.PI*180,r,i)}function gs(t,e,r,i,n,o){var s=t.props.throttleRotate,a=s===void 0?0:s,l=r.prevSnapDeg,u=0,c=!1;if(o){var f=Dm(t,e,i,n+i);c=f.isSnap,u=n+f.dist}c||(u=bt(n+i,a));var h=u-n;return r.prevSnapDeg=h,[h-l,h,u]}function Ih(t,e,r){var i=O(e,4),n=i[0],o=i[1],s=i[2],a=i[3];if(t==="none")return[];if(Ht(t))return t.map(function(g){return Ih(g,[n,o,s,a],r)[0]});var l=O((t||"top").split("-"),2),u=l[0],c=l[1],f=[n,o];u==="left"?f=[s,n]:u==="right"?f=[o,a]:u==="bottom"&&(f=[a,s]);var h=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],d=Wh(f,r);if(c){var p=c==="top"||c==="left",v=u==="bottom"||u==="left";h=f[p&&!v||!p&&v?0:1]}return[[h,d]]}function ra(t,e){if(e.isRequest)return e.requestAble==="rotatable";var r=e.inputEvent.target;if(Kt(r,dt("rotation-control"))||t.props.rotateAroundControls&&Kt(r,dt("around-control"))||Kt(r,dt("control"))&&Kt(r,dt("rotatable")))return!0;var i=t.props.rotationTarget;return i?fl(i,!0).some(function(n){return n?r===n||r.contains(n):!1}):!1}var pm=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,vm={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[pm],viewClassName:function(t){return t.isDragging("rotatable")?dt("view-rotation-dragging"):""},render:function(t,e){var r=$r(t.props,"rotatable"),i=r.rotatable,n=r.rotationPosition,o=r.zoom,s=r.renderDirections,a=r.rotateAroundControls,l=r.resolveAblesWithRotatable,u=t.getState(),c=u.renderPoses,f=u.direction;if(!i)return null;var h=Ih(n,c,f),d=[];if(h.forEach(function(m,y){var x=O(m,2),C=x[0],w=x[1];d.push(e.createElement("div",{key:"rotation".concat(y),className:dt("rotation"),style:{transform:"translate(-50%) translate(".concat(C[0],"px, ").concat(C[1],"px) rotate(").concat(w,"rad)")}},e.createElement("div",{className:dt("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:dt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}),s){var p=er(l||{}),v={};p.forEach(function(m){l[m].forEach(function(y){v[y]=m})});var g=[];Ht(s)&&(g=s.map(function(m){var y=v[m];return{data:y?{resolve:y}:{},classNames:y?["move"]:[],dir:m}})),d.push.apply(d,tt([],O(vh(t,"rotatable",g,e)),!1))}return a&&d.push.apply(d,tt([],O(xh(t,e)),!1)),d},dragControlCondition:ra,dragControlStart:function(t,e){var r,i,n=e.datas,o=e.clientX,s=e.clientY,a=e.parentRotate,l=e.parentFlag,u=e.isPinch,c=e.isRequest,f=t.state,h=f.target,d=f.left,p=f.top,v=f.direction,g=f.beforeDirection,m=f.targetTransform,y=f.moveableClientRect,x=f.offsetMatrix,C=f.targetMatrix,w=f.allMatrix,b=f.width,_=f.height;if(!c&&!h)return!1;var S=t.getRect();n.rect=S,n.transform=m,n.left=d,n.top=p;var M=function(st){var Q=Bh(t.state,st);n.fixedDirection=Q.fixedDirection,n.fixedOffset=Q.fixedOffset,n.fixedPosition=Q.fixedPosition,H&&H.setFixedPosition(st)},T=function(st){var Q=dm(t.state,st);n.fixedDirection=Q.fixedDirection,n.fixedOffset=Q.fixedOffset,n.fixedPosition=Q.fixedPosition,H&&H.setFixedDirection(st)},B=o,k=s;if(c||u||l){var E=a||0;n.beforeInfo={origin:S.beforeOrigin,prevDeg:E,defaultDeg:E,prevSnapDeg:0,startDist:0},n.afterInfo=I(I({},n.beforeInfo),{origin:S.origin}),n.absoluteInfo=I(I({},n.beforeInfo),{origin:S.origin,startValue:E})}else{var R=(i=e.inputEvent)===null||i===void 0?void 0:i.target;if(R){var A=R.getAttribute("data-direction")||"",G=C1[A];if(G){n.isControl=!0,n.isAroundControl=Kt(R,dt("around-control")),n.controlDirection=G;var F=R.getAttribute("data-resolve");F&&(n.resolveAble=F);var z=jm(f.rootMatrix,f.renderPoses,y);r=O(Zt(z,G),2),B=r[0],k=r[1]}}n.beforeInfo={origin:S.beforeOrigin},n.afterInfo={origin:S.origin},n.absoluteInfo={origin:S.origin,startValue:S.rotation};var U=M;M=function(st){var Q=f.is3d?4:3,lt=O(Et(Uf(C,Q),st),2),ht=lt[0],gt=lt[1],xt=ne(x,Wr([ht,gt],Q)),rt=ne(w,Wr([st[0],st[1]],Q));U(st);var ft=f.posDelta;n.beforeInfo.origin=pt(xt,ft),n.afterInfo.origin=pt(rt,ft),n.absoluteInfo.origin=pt(rt,ft),ps(t,n.beforeInfo,B,k,y),ps(t,n.afterInfo,B,k,y),ps(t,n.absoluteInfo,B,k,y)},T=function(st){var Q=Zt([[0,0],[b,0],[0,_],[b,_]],st);M(Q)}}n.startClientX=B,n.startClientY=k,n.direction=v,n.beforeDirection=g,n.startValue=0,n.datas={},Go(t,e,"rotate");var q=!1,H=!1;if(n.isControl&&n.resolveAble){var et=n.resolveAble;et==="resizable"&&(H=ea.dragControlStart(t,I(I({},new gi("resizable").dragStart([0,0],e)),{parentPosition:n.controlPosition,parentFixedPosition:n.fixedPosition})))}H||(q=le.dragStart(t,new gi().dragStart([0,0],e))),M($m(t));var ot=Ct(t,e,I(I({set:function(st){n.startValue=st*Math.PI/180},setFixedDirection:T,setFixedPosition:M},No(t,e)),{dragStart:q,resizeStart:H})),it=ct(t,"onRotateStart",ot);return n.isRotate=it!==!1,f.snapRenderInfo={request:e.isRequest},n.isRotate?ot:!1},dragControl:function(t,e){var r,i,n,o=e.datas,s=e.clientDistX,a=e.clientDistY,l=e.parentRotate,u=e.parentFlag,c=e.isPinch,f=e.groupDelta,h=e.resolveMatrix,d=o.beforeDirection,p=o.beforeInfo,v=o.afterInfo,g=o.absoluteInfo,m=o.isRotate,y=o.startValue,x=o.rect,C=o.startClientX,w=o.startClientY;if(m){Lo(t,e,"rotate");var b=S1(e),_=d*b,S=t.props.parentMoveable,M=0,T,B,k=0,E,R,A=0,G,F,z=180/Math.PI*y,U=g.startValue,q=!1,H=C+s,et=w+a;if(!u&&"parentDist"in e){var ot=e.parentDist;T=ot,E=ot,G=ot}else c||u?(T=eo(l,d,p),E=eo(l,_,v),G=eo(l,_,g)):(T=vs(H,et,d,p),E=vs(H,et,_,v),G=vs(H,et,_,g),q=!0);if(B=z+T,R=z+E,F=U+G,ct(t,"onBeforeRotate",Ct(t,e,{beforeRotation:B,rotation:R,absoluteRotation:F,setRotation:function(D){E=D-z,T=E,G=E}},!0)),r=O(gs(t,x,p,T,z,q),3),M=r[0],T=r[1],B=r[2],i=O(gs(t,x,v,E,z,q),3),k=i[0],E=i[1],R=i[2],n=O(gs(t,x,g,G,U,q),3),A=n[0],G=n[1],F=n[2],!(!A&&!k&&!M&&!S&&!h)){var it=zo(o,"rotate(".concat(R,"deg)"),"rotate(".concat(E,"deg)"));h&&(o.fixedPosition=Qa(t,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var st=O1(t,E,o),Q=pt(Et(f||[0,0],st),o.prevInverseDist||[0,0]);o.prevInverseDist=st,o.requestValue=null;var lt=hh(t,it,Q,c,e),ht=lt,gt=Je([H,et],g.startAbsoluteOrigin)-g.startDist,xt=void 0;if(o.resolveAble==="resizable"){var rt=ea.dragControl(t,I(I({},Cn(e,t.state,[e.deltaX,e.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:gt}));rt&&(xt=rt,ht=Yh(ht,rt,e))}var ft=Ct(t,e,I(I({delta:k,dist:E,rotate:R,rotation:R,beforeDist:T,beforeDelta:M,beforeRotate:B,beforeRotation:B,absoluteDist:G,absoluteDelta:A,absoluteRotate:F,absoluteRotation:F,isPinch:!!c,resize:xt},lt),ht));return ct(t,"onRotate",ft),ft}}},dragControlEnd:function(t,e){var r=e.datas;if(r.isRotate){r.isRotate=!1;var i=xe(t,e,{});return ct(t,"onRotateEnd",i),i}},dragGroupControlCondition:ra,dragGroupControlStart:function(t,e){var r=e.datas,i=t.state,n=i.left,o=i.top,s=i.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(r.beforeDirection*t.rotation);var l=Qe(t,this,"dragControlStart",e,function(f,h){var d=f.state,p=d.left,v=d.top,g=d.beforeOrigin,m=Et(pt([p,v],[n,o]),pt(g,s));return h.datas.startGroupClient=m,h.datas.groupClient=m,I(I({},h),{parentRotate:0})}),u=I(I({},a),{targets:t.props.targets,events:l}),c=ct(t,"onRotateGroupStart",u);return r.isRotate=c!==!1,r.isRotate?a:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){jo(t,"onBeforeRotate",function(u){ct(t,"onBeforeRotateGroup",Ct(t,e,I(I({},u),{targets:t.props.targets}),!0))});var i=this.dragControl(t,e);if(i){var n=r.beforeDirection,o=i.beforeDist,s=o/180*Math.PI,a=Qe(t,this,"dragControl",e,function(u,c){var f=c.datas.startGroupClient,h=O(c.datas.groupClient,2),d=h[0],p=h[1],v=O(gn(f,s*n),2),g=v[0],m=v[1],y=[g-d,m-p];return c.datas.groupClient=[g,m],I(I({},c),{parentRotate:o,groupDelta:y})});t.rotation=n*i.beforeRotation;var l=I({targets:t.props.targets,events:a,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},i);return ct(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,i=e.datas;if(i.isRotate){this.dragControlEnd(t,e);var n=Qe(t,this,"dragControlEnd",e),o=xe(t,e,{targets:t.props.targets,events:n});return ct(t,"onRotateGroupEnd",o),r}},request:function(t){var e={},r=0,i=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(n){return"deltaRotate"in n?r+=n.deltaRotate:"rotate"in n&&(r=n.rotate-i),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function gm(t,e){var r,i=t.direction,n=t.classNames,o=t.size,s=t.pos,a=t.zoom,l=t.key,u=i==="horizontal",c=u?"Y":"X";return e.createElement("div",{key:l,className:n.join(" "),style:(r={},r[u?"width":"height"]="".concat(o),r.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(a,")"),r)})}function ol(t,e){return gm(I(I({},t),{classNames:tt([dt("line","guideline",t.direction)],O(t.classNames),!1).filter(function(r){return r}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(r){return"".concat(bt(r,.1),"px")})}),e)}function Lu(t,e,r,i,n,o,s,a){var l=t.props.zoom;return r.map(function(u,c){var f=u.type,h=u.pos,d=[0,0];return d[s]=i,d[s?0:1]=-n+h,ol({key:"".concat(e,"TargetGuideline").concat(c),classNames:[dt("target","bold",f)],posValue:d,sizeValue:o,zoom:l,direction:e},a)})}function zu(t,e,r,i,n,o){var s=t.props,a=s.zoom,l=s.isDisplayInnerSnapDigit,u=e==="horizontal"?wr:_r,c=n[u.start],f=n[u.end];return r.filter(function(h){var d=h.hide,p=h.elementRect;if(d)return!1;if(l&&p){var v=p.rect;if(v[u.start]<=c&&f<=v[u.end])return!1}return!0}).map(function(h,d){var p=h.pos,v=h.size,g=h.element,m=h.className,y=[-i[0]+p[0],-i[1]+p[1]];return ol({key:"".concat(e,"-default-guideline-").concat(d),classNames:g?[dt("bold"),m]:[dt("normal"),m],direction:e,posValue:y,sizeValue:v,zoom:a},o)})}function Ai(t,e,r,i,n,o,s,a){var l,u=t.props,c=u.snapDigit,f=c===void 0?0:c,h=u.isDisplaySnapDigit,d=h===void 0?!0:h,p=u.snapDistFormat,v=p===void 0?function(w,b){return w}:p,g=u.zoom,m=e==="horizontal"?"X":"Y",y=e==="vertical"?"height":"width",x=Math.abs(n),C=d?parseFloat(x.toFixed(f)):0;return a.createElement("div",{key:"".concat(e,"-").concat(r,"-guideline-").concat(i),className:dt("guideline-group",e),style:(l={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},l[y]="".concat(x,"px"),l)},ol({direction:e,classNames:[dt(r),s],size:"100%",posValue:[0,0],sizeValue:x,zoom:g},a),a.createElement("div",{className:dt("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},C>0?v(C,e):""))}function mm(t,e,r,i){var n=t==="vertical"?0:1,o=t==="vertical"?1:0,s=n?wr:_r,a=r[s.start],l=r[s.end];return Xh(e,function(u){return u.pos[n]}).map(function(u){var c=[],f=[],h=[];return u.forEach(function(d){var p,v,g=d.element,m=d.elementRect.rect;if(m[s.end]<a)c.push(d);else if(l<m[s.start])f.push(d);else if(m[s.start]<=a&&l<=m[s.end]&&i){var y=d.pos,x={element:g,rect:I(I({},m),(p={},p[s.end]=m[s.start],p))},C={element:g,rect:I(I({},m),(v={},v[s.start]=m[s.end],v))},w=[0,0],b=[0,0];w[n]=y[n],w[o]=y[o],b[n]=y[n],b[o]=y[o]+d.size,c.push({type:t,pos:w,size:0,elementRect:x,direction:"",elementDirection:"end"}),f.push({type:t,pos:b,size:0,elementRect:C,direction:"",elementDirection:"start"})}}),c.sort(function(d,p){return p.pos[o]-d.pos[o]}),f.sort(function(d,p){return d.pos[o]-p.pos[o]}),{total:u,start:c,end:f,inner:h}})}function ym(t,e,r,i,n){var o=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(a){var l=e.filter(function(g){return g.type===a}),u=a==="vertical"?1:0,c=u?0:1,f=mm(a,l,i,o),h=u?_r:wr,d=u?wr:_r,p=i[h.start],v=i[h.end];f.forEach(function(g){var m=g.total,y=g.start,x=g.end,C=g.inner,w=r[c]+m[0].pos[c]-i[d.start],b=i;y.forEach(function(_){var S=_.elementRect.rect,M=b[h.start]-S[h.end];if(M>0){var T=[0,0];T[u]=r[u]+b[h.start]-p-M,T[c]=w,s.push(Ai(t,a,"dashed",s.length,M,T,_.className,n))}b=S}),b=i,x.forEach(function(_){var S=_.elementRect.rect,M=S[h.start]-b[h.end];if(M>0){var T=[0,0];T[u]=r[u]+b[h.end]-p,T[c]=w,s.push(Ai(t,a,"dashed",s.length,M,T,_.className,n))}b=S}),C.forEach(function(_){var S=_.elementRect.rect,M=p-S[h.start],T=S[h.end]-v,B=[0,0],k=[0,0];B[u]=r[u]-M,B[c]=w,k[u]=r[u]+v-p,k[c]=w,s.push(Ai(t,a,"dashed",s.length,M,B,_.className,n)),s.push(Ai(t,a,"dashed",s.length,T,k,_.className,n))})})}),s}function bm(t,e,r,i,n){var o=[];return["horizontal","vertical"].forEach(function(s){var a=e.filter(function(g){return g.type===s}).slice(0,1),l=s==="vertical"?0:1,u=l?0:1,c=l?_r:wr,f=l?wr:_r,h=i[c.start],d=i[c.end],p=i[f.start],v=i[f.end];a.forEach(function(g){var m=g.gap,y=g.gapRects,x=Math.max.apply(Math,tt([p],O(y.map(function(b){var _=b.rect;return _[f.start]})),!1)),C=Math.min.apply(Math,tt([v],O(y.map(function(b){var _=b.rect;return _[f.end]})),!1)),w=(x+C)/2;x===C||w===(p+v)/2||y.forEach(function(b){var _=b.rect,S=b.className,M=[r[0],r[1]];if(_[c.end]<h)M[l]+=_[c.end]-h;else if(d<_[c.start])M[l]+=_[c.start]-h-m;else return;M[u]+=w-p,o.push(Ai(t,l?"vertical":"horizontal","gap",o.length,m,M,S,n))})})}),o}function ia(t){var e,r,i=t.state,n=i.containerClientRect,o=i.hasFixed,s=n.overflow,a=n.scrollHeight,l=n.scrollWidth,u=n.clientHeight,c=n.clientWidth,f=n.clientLeft,h=n.clientTop,d=t.props,p=d.snapGap,v=p===void 0?!0:p,g=d.verticalGuidelines,m=d.horizontalGuidelines,y=d.snapThreshold,x=y===void 0?5:y,C=d.maxSnapElementGuidelineDistance,w=C===void 0?1/0:C,b=d.isDisplayGridGuidelines,_=Ee(De(t.state)),S=_.top,M=_.left,T=_.bottom,B=_.right,k={top:S,left:M,bottom:T,right:B,center:(M+B)/2,middle:(S+T)/2},E=wm(t),R=tt([],O(E),!1),A=((r=(e=i.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&r!==void 0?r:[1,1]).map(function(U){return U*x});v&&R.push.apply(R,tt([],O(xm(t,k,A)),!1));var G=I({},i.snapOffset||{left:0,top:0,bottom:0,right:0});if(R.push.apply(R,tt([],O(Sm(t,s?l:c,s?a:u,f,h,G,b)),!1)),o){var F=n.left,z=n.top;G.left+=F,G.top+=z,G.right+=F,G.bottom+=z}return R.push.apply(R,tt([],O(Rh(m||!1,g||!1,s?l:c,s?a:u,f,h,G)),!1)),R=R.filter(function(U){var q=U.element,H=U.elementRect,et=U.type;if(!q||!H)return!0;var ot=H.rect;return Oh(k,ot,et,w)}),R}function xm(t,e,r){var i=t.props,n=i.maxSnapElementGuidelineDistance,o=n===void 0?1/0:n,s=i.maxSnapElementGapDistance,a=s===void 0?1/0:s,l=t.state.elementRects,u=[];return[["vertical",wr,_r],["horizontal",_r,wr]].forEach(function(c){var f=O(c,3),h=f[0],d=f[1],p=f[2],v=e[d.start],g=e[d.end],m=e[d.center],y=e[p.start],x=e[p.end],C={left:r[0],top:r[1]};function w(S){var M=S.rect,T=C[d.start];return M[d.end]<v+T?v-M[d.end]:g-T<M[d.start]?M[d.start]-g:-1}var b=l.filter(function(S){var M=S.rect;return M[p.start]>x||M[p.end]<y?!1:w(S)>0}).sort(function(S,M){return w(S)-w(M)}),_=[];b.forEach(function(S){b.forEach(function(M){if(S!==M){var T=S.rect,B=M.rect,k=T[p.start],E=T[p.end],R=B[p.start],A=B[p.end];k>A||R>E||_.push([S,M])}})}),_.forEach(function(S){var M=O(S,2),T=M[0],B=M[1],k=T.rect,E=B.rect,R=k[d.start],A=k[d.end],G=E[d.start],F=E[d.end],z=C[d.start],U=0,q=0,H=!1,et=!1,ot=!1;if(A<=v&&g<=G){if(et=!0,U=(G-A-(g-v))/2,q=A+U+(g-v)/2,X(q-m)>z)return}else if(A<G&&F<v+z){if(H=!0,U=G-A,q=F+U,X(q-v)>z)return}else if(A<G&&g-z<R){if(ot=!0,U=G-A,q=R-U,X(q-g)>z)return}else return;U&&Oh(e,E,h,o)&&(U>a||u.push({type:h,pos:h==="vertical"?[q,0]:[0,q],element:B.element,size:0,className:B.className,isStart:H,isCenter:et,isEnd:ot,gap:U,hide:!0,gapRects:[T,B],direction:"",elementDirection:""}))})}),u}function Cm(t,e,r,i){var n,o,s=t.props,a=t.state,l=s.snapGridAll,u=s.snapGridWidth,c=u===void 0?0:u,f=s.snapGridHeight,h=f===void 0?0:f,d=a.snapRenderInfo,p=d&&(((n=d.direction)===null||n===void 0?void 0:n[0])||((o=d.direction)===null||o===void 0?void 0:o[1])),v=t.moveables;if(l&&v&&p&&(c||h)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=t.getRect(),m=g.children,y=d.direction;if(m){var x=y.map(function(w,b){var _=b===0?{snapSize:c,posName:"left",sizeName:"width",clientOffset:i.left-e}:{snapSize:h,posName:"top",sizeName:"height",clientOffset:i.top-r},S=_.snapSize,M=_.posName,T=_.sizeName,B=_.clientOffset;if(!S)return{dir:w,multiple:1,snapSize:S,snapOffset:0};var k=g[T],E=g[M],R=wf(m.map(function(H){return[H[M]-E,H[T],k-H[T]-H[M]+E]})).filter(function(H){return H}).sort(function(H,et){return H-et}),A=R[0],G=R.map(function(H){return bt(H/A,.1)*S}),F=1,z=bt(k/A,.1);for(F=1;F<=10&&!G.every(function(H){return H*F%1===0});++F);var U=(-w+1)/2,q=ao(E-B,E-B+k,U,1-U);return{multiple:z*F,dir:w,snapSize:S,snapOffset:Math.round(q/S)}}),C=x.map(function(w){return w.multiple||1});a.snapThresholdInfo.multiples=C,a.snapThresholdInfo.offset=x.map(function(w){return w.snapOffset}),x.forEach(function(w,b){w.snapSize})}}else a.snapThresholdInfo=null}function Sm(t,e,r,i,n,o,s){i===void 0&&(i=0),n===void 0&&(n=0);var a=t.props,l=t.state,u=a.snapGridWidth,c=u===void 0?0:u,f=a.snapGridHeight,h=f===void 0?0:f,d=[],p=o.left,v=o.top,g=[0,0];Cm(t,i,n,o);var m=l.snapThresholdInfo,y=c,x=h;if(m&&(c*=m.multiples[0]||1,h*=m.multiples[1]||1,g=m.offset),h){for(var C=function(b){d.push({type:"horizontal",pos:[p,bt(g[1]*x+b-n+v,.1)],className:dt("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},w=0;w<=r*2;w+=h)C(w);for(var w=-h;w>=-r;w-=h)C(w)}if(c){for(var C=function(_){d.push({type:"vertical",pos:[bt(g[0]*y+_-i+p,.1),v],className:dt("grid-guideline"),size:r,hide:!s,direction:"",grid:!0})},w=0;w<=e*2;w+=c)C(w);for(var w=-c;w>=-e;w-=c)C(w)}return d}function Oh(t,e,r,i){return r==="horizontal"?X(t.right-e.left)<=i||X(t.left-e.right)<=i||t.left<=e.right&&e.left<=t.right:r==="vertical"?X(t.bottom-e.top)<=i||X(t.top-e.bottom)<=i||t.top<=e.bottom&&e.top<=t.bottom:!0}function wm(t){var e=t.state,r=t.props.elementGuidelines,i=r===void 0?[]:r;if(!i.length)return e.elementRects=[],[];var n=(e.elementRects||[]).filter(function(h){return!h.refresh}),o=i.map(function(h){return Ge(h)&&"element"in h?I(I({},h),{element:Ye(h.element,!0)}):{element:Ye(h,!0)}}).filter(function(h){return h.element}),s=A0(n.map(function(h){return h.element}),o.map(function(h){return h.element})),a=s.maintained,l=s.added,u=[];a.forEach(function(h){var d=O(h,2),p=d[0],v=d[1];u[v]=n[p]}),_m(t,l.map(function(h){return o[h]})).map(function(h,d){u[l[d]]=h}),e.elementRects=u;var c=el(t.props.elementSnapDirections),f=[];return u.forEach(function(h){var d=h.element,p=h.top,v=p===void 0?c.top:p,g=h.left,m=g===void 0?c.left:g,y=h.right,x=y===void 0?c.right:y,C=h.bottom,w=C===void 0?c.bottom:C,b=h.center,_=b===void 0?c.center:b,S=h.middle,M=S===void 0?c.middle:S,T=h.className,B=h.rect,k=rl({top:v,right:x,left:m,bottom:w,center:_,middle:M},B),E=k.horizontal,R=k.vertical,A=k.horizontalNames,G=k.verticalNames,F=B.top,z=B.left,U=B.right-z,q=B.bottom-F,H=[U,q];R.forEach(function(et,ot){f.push({type:"vertical",element:d,pos:[bt(et,.1),F],size:q,sizes:H,className:T,elementRect:h,elementDirection:Du[G[ot]]||G[ot],direction:""})}),E.forEach(function(et,ot){f.push({type:"horizontal",element:d,pos:[z,bt(et,.1)],size:U,sizes:H,className:T,elementRect:h,elementDirection:Du[A[ot]]||A[ot],direction:""})})}),f}function Nu(t,e){return t?t.map(function(r){var i=Ge(r)?r:{pos:r},n=i.pos;return pi(n)?i:I(I({},i),{pos:Tt(n,e)})}):[]}function Rh(t,e,r,i,n,o,s){n===void 0&&(n=0),o===void 0&&(o=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var a=[],l=s.left,u=s.top,c=s.bottom,f=s.right,h=r+f-l,d=i+c-u;return Nu(t,d).forEach(function(p){a.push({type:"horizontal",pos:[l,bt(p.pos-o+u,.1)],size:h,className:p.className,direction:""})}),Nu(e,h).forEach(function(p){a.push({type:"vertical",pos:[bt(p.pos-n+l,.1),u],size:d,className:p.className,direction:""})}),a}function _m(t,e){if(!e.length)return[];var r=t.props.groupable,i=t.state,n=i.containerClientRect,o=i.rootMatrix,s=i.is3d,a=i.offsetDelta,l=s?4:3,u=O(U1(o,n,l),2),c=u[0],f=u[1],h=r?0:a[0],d=r?0:a[1];return e.map(function(p){var v=p.element.getBoundingClientRect(),g=v.left-c-h,m=v.top-f-d,y=m+v.height,x=g+v.width,C=O(bi(o,[g,m],l),2),w=C[0],b=C[1],_=O(bi(o,[x,y],l),2),S=_[0],M=_[1];return I(I({},p),{rect:{left:w,right:S,top:b,bottom:M,center:(w+S)/2,middle:(b+M)/2}})})}function Wn(t){var e=t.state,r=e.container,i=t.props.snapContainer||r;if(e.snapContainer===i&&e.guidelines&&e.guidelines.length)return!1;var n=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(r!==i){var s=Ye(i,!0);if(s){var a=$i(s),l=ju(e,[a.left-n.left,a.top-n.top]),u=ju(e,[a.right-n.right,a.bottom-n.bottom]);o.left=bt(l[0],1e-5),o.top=bt(l[1],1e-5),o.right=bt(u[0],1e-5),o.bottom=bt(u[1],1e-5)}}return e.snapContainer=i,e.snapOffset=o,e.guidelines=ia(t),e.enableSnap=!0,!0}function Ah(t,e,r,i,n,o){var s=qr(t,e,r,o?4:3),a=Zt(s,i);return al(s,pt(n,a))}function Gu(t){return t?t/X(t):0}function km(t,e,r,i,n,o){var s=o.fixedDirection,a=J1(r,s,i),l=nl(t,e,r,i),u=tt(tt([],O(cm(t,e,a,i,n,o)),!1),O(Th(t,l,o)),!1),c=po(u,0),f=po(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function Em(t,e,r,i,n,o,s,a,l){var u=Zt(e,s),c=Wo(t,a,{vertical:[u[0]],horizontal:[u[1]]}),f=c.horizontal.offset,h=c.vertical.offset;if(bt(h,Ks)||bt(f,Ks)){var d=O(Ue({datas:l,distX:-h,distY:-f}),2),p=d[0],v=d[1],g=Math.min(n||1/0,r+s[0]*p),m=Math.min(o||1/0,i+s[1]*v);return[g-r,m-i]}return[0,0]}function Lh(t,e,r,i,n,o,s,a){for(var l=De(t.state),u=t.props.keepRatio,c=0,f=0,h=0;h<2;++h){var d=e(c,f),p=km(t,d,n,u,s,a),v=p.width,g=p.height,m=v.isBound,y=g.isBound,x=v.offset,C=g.offset;if(h===1&&(m||(x=0),y||(C=0)),h===0&&s&&!m&&!y)return[0,0];if(u){var w=X(x)*(r?1/r:1),b=X(C)*(i?1/i:1),_=m&&y?w<b:y||!m&&w<b;_?x=r*C/i:C=i*x/r}c+=x,f+=C}if(!u&&n[0]&&n[1]){var S=hm(t,l,n,o,a),M=S.maxWidth,T=S.maxHeight,B=O(Em(t,e(c,f).map(function(R){return R.map(function(A){return bt(A,Ks)})}),r+c,i+f,M,T,n,s,a),2),x=B[0],C=B[1];c+=x,f+=C}return[c,f]}function Vi(t){return t<0&&(t=t%360+360),t%=360,t}function Mm(t,e){e=Vi(e);var r=Math.floor(t/360),i=r*360+360-e,n=r*360+e;return X(t-i)<X(t-n)?i:n}function ms(t,e){t=Vi(t),e=Vi(e);var r=Vi(t-e);return Math.min(r,360-r)}function Dm(t,e,r,i){var n,o=t.props,s=(n=o[Ch])!==null&&n!==void 0?n:5,a=o[Sh];if(Ti(t,"rotatable")){var l=e.pos1,u=e.pos2,c=e.pos3,f=e.pos4,h=e.origin,d=r*Math.PI/180,p=[l,u,c,f].map(function(C){return pt(C,h)}),v=p.map(function(C){return gn(C,d)}),g=tt(tt([],O(j1(t,p,v,h,r)),!1),O(nm(t,p,v,h,r)),!1);g.sort(function(C,w){return X(C-r)-X(w-r)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:r}}if(a!=null&&a.length&&s){var y=a.slice().sort(function(C,w){return ms(C,i)-ms(w,i)}),x=y[0];if(ms(x,i)<=s)return{isSnap:!0,dist:r+Mm(i,x)-i}}return{isSnap:!1,dist:r}}function Tm(t,e,r,i,n,o,s){if(!Ti(t,"resizable"))return[0,0];var a=s.fixedDirection,l=s.nextAllMatrix,u=t.state,c=u.allMatrix,f=u.is3d;return Lh(t,function(h,d){return Ah(l||c,e+h,r+d,a,n,f)},e,r,i,n,o,s)}function Pm(t,e,r,i,n){if(!Ti(t,"scalable"))return[0,0];var o=n.startOffsetWidth,s=n.startOffsetHeight,a=n.fixedPosition,l=n.fixedDirection,u=n.is3d,c=Lh(t,function(f,h){return Ah(T1(n,Et(e,[f/o,h/s])),o,s,l,a,u)},o,s,r,a,i,n);return[c[0]/o,c[1]/s]}function Bm(t,e){e.absolutePoses=De(t.state)}function Fu(t){var e=[];return t.forEach(function(r){r.guidelineInfos.forEach(function(i){var n=i.guideline;me(e,function(o){return o.guideline===n})||(n.direction="",e.push({guideline:n,posInfo:r}))})}),e.map(function(r){var i=r.guideline,n=r.posInfo;return I(I({},i),{direction:n.direction})})}function Hu(t,e,r,i,n,o){var s=tl(Fo(t,o),e,r),a=s.vertical,l=s.horizontal,u=ii();a.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.left=!0),p.direction==="end"&&(u.right=!0),i.push({type:"bounds",pos:p.pos}))}),l.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.top=!0),p.direction==="end"&&(u.bottom=!0),n.push({type:"bounds",pos:p.pos}))});var c=om(t),f=c.boundMap,h=c.vertical,d=c.horizontal;return h.forEach(function(p){tr(i,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||i.push({type:"bounds",pos:p})}),d.forEach(function(p){tr(n,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),{boundMap:u,innerBoundMap:f}}var Im=cl("",["resizable","scalable"]),Om={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",Ch,Sh,wh,_h,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var r=t.state,i=r.top,n=r.left,o=r.pos1,s=r.pos2,a=r.pos3,l=r.pos4,u=r.snapRenderInfo,c=t.props.snapRenderThreshold,f=c===void 0?1:c;if(!u||!u.render||!Ti(t,""))return oi(t,"boundMap",ii(),function(it){return JSON.stringify(it)}),oi(t,"innerBoundMap",ii(),function(it){return JSON.stringify(it)}),[];r.guidelines=ia(t);var h=Math.min(o[0],s[0],a[0],l[0]),d=Math.min(o[1],s[1],a[1],l[1]),p=u.externalPoses||[],v=De(t.state),g=[],m=[],y=[],x=[],C=[],w=Ee(v),b=w.width,_=w.height,S=w.top,M=w.left,T=w.bottom,B=w.right,k={left:M,right:B,top:S,bottom:T,center:(M+B)/2,middle:(S+T)/2},E=p.length>0,R=E?Ee(p):{};if(!u.request){if(u.direction&&C.push(Z1(t,v,u.direction,f,f)),u.snap){var A=Ee(v);u.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),C.push(Tu(t,A,f,f))}E&&(u.center&&(R.middle=(R.top+R.bottom)/2,R.center=(R.left+R.right)/2),C.push(Tu(t,R,f,f))),C.forEach(function(it){var st=it.vertical.posInfos,Q=it.horizontal.posInfos;g.push.apply(g,tt([],O(st.filter(function(lt){var ht=lt.guidelineInfos;return ht.some(function(gt){var xt=gt.guideline;return!xt.hide})}).map(function(lt){return{type:"snap",pos:lt.pos}})),!1)),m.push.apply(m,tt([],O(Q.filter(function(lt){var ht=lt.guidelineInfos;return ht.some(function(gt){var xt=gt.guideline;return!xt.hide})}).map(function(lt){return{type:"snap",pos:lt.pos}})),!1)),y.push.apply(y,tt([],O(Fu(st)),!1)),x.push.apply(x,tt([],O(Fu(Q)),!1))})}var G=Hu(t,[M,B],[S,T],g,m),F=G.boundMap,z=G.innerBoundMap;E&&Hu(t,[R.left,R.right],[R.top,R.bottom],g,m,u.externalBounds);var U=tt(tt([],O(y),!1),O(x),!1),q=U.filter(function(it){return it.element&&!it.gapRects}),H=U.filter(function(it){return it.gapRects}).sort(function(it,st){return it.gap-st.gap});ct(t,"onSnap",{guidelines:U.filter(function(it){var st=it.element;return!st}),elements:q,gaps:H},!0);var et=oi(t,"boundMap",F,function(it){return JSON.stringify(it)},ii()),ot=oi(t,"innerBoundMap",z,function(it){return JSON.stringify(it)},ii());return(F===et||z===ot)&&ct(t,"onBound",{bounds:F,innerBounds:z},!0),tt(tt(tt(tt(tt(tt([],O(ym(t,q,[h,d],k,e)),!1),O(bm(t,H,[h,d],k,e)),!1),O(zu(t,"horizontal",x,[n,i],k,e)),!1),O(zu(t,"vertical",y,[n,i],k,e)),!1),O(Lu(t,"horizontal",m,h,i,b,0,e)),!1),O(Lu(t,"vertical",g,d,n,_,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Wn(t)},drag:function(t){var e=t.state;Wn(t)||(e.guidelines=ia(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Im(t,e)||ra(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Kt(e.inputEvent.target,dt("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Wn(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Wn(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Rm(t,e){return[t[0]*e[0],t[1]*e[1]]}function dt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Tg.apply(void 0,tt([Ka],O(t),!1))}function zh(t){t()}function Am(t){return!t||t==="none"?[1,0,0,1,0,0]:Ge(t)?t:en(t)}function ji(t,e,r){return uo(e,Vr(r,e),t,Vr(r.map(function(i){return-i}),e))}function Lm(t,e,r){if(e==="%"){var i=sl(t.ownerSVGElement);return i[r?"width":"height"]/100}return 1}function zm(t){var e=Nm(ll(t,":before"));return e.map(function(r,i){var n=hn(r),o=n.value,s=n.unit;return o*Lm(t,s,i===0)})}function go(t){return t?t.split(" "):["0","0"]}function Nm(t){return go(t.transformOrigin)}function Nh(t){var e=ye(t),r=e("transform");if(r&&r!=="none")return r;if("transform"in t){var i=t.transform,n=i.baseVal;if(!n)return"";var o=n.length;if(!o)return"";for(var s=[],a=function(u){var c=n[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return c[f]}).join(", "),")"))},l=0;l<o;++l)a(l);return s.join(" ")}return""}function nn(t,e,r,i,n){var o,s,a=Ga(t)||kr(t),l=!1,u,c;if(!t||r)u=t;else{var f=(o=t==null?void 0:t.assignedSlot)===null||o===void 0?void 0:o.parentElement,h=t.parentElement;f?(l=!0,c=h,u=f):u=h}for(var d=!1,p=t===e||u===e,v="relative",g=1,m=parseFloat(n==null?void 0:n("zoom"))||1,y=n==null?void 0:n("position");u&&u!==a;){e===u&&(p=!0);var x=ye(u),C=u.tagName.toLowerCase(),w=Nh(u),b=x("willChange"),_=parseFloat(x("zoom"))||1;if(v=x("position"),i&&_!==1){g=_;break}if(!r&&i&&m!==1&&y&&y!=="absolute"||C==="svg"||C==="foreignobject"||v!=="static"||w&&w!=="none"||b==="transform")break;var S=(s=t==null?void 0:t.assignedSlot)===null||s===void 0?void 0:s.parentNode,M=u.parentNode;S&&(l=!0,c=M);var T=M;if(T&&T.nodeType===11){u=T.host,d=!0,v=ye(u)("position");break}u=T,v="relative"}return{offsetZoom:g,hasSlot:l,parentSlotElement:c,isCustomElement:d,isStatic:v==="static",isEnd:p||!u||u===a,offsetParent:u||a}}function Gm(t,e){var r,i=t.tagName.toLowerCase(),n=t.offsetLeft,o=t.offsetTop,s=ye(t),a=fn(n),l=!a,u,c;return!l&&(i!=="svg"||t.ownerSVGElement)?(u=ih?zm(t):go(s("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice(),l=!0,i==="svg"?(n=0,o=0):(r=O(Wm(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),n=r[0],o=r[1],u[0]=r[2],u[1]=r[3])):(u=go(s("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice()),{tagName:i,isSVG:a,hasOffset:l,offset:[n||0,o||0],origin:u,targetOrigin:c}}function Gh(t,e){var r=ye(t),i=ye(kr(t)),n=i("position");if(!e&&(!n||n==="static"))return[0,0];var o=parseInt(i("marginLeft"),10),s=parseInt(i("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(s=0),(r("left")!=="auto"||r("right")!=="auto")&&(o=0)),[o,s]}function na(t){t.forEach(function(e){var r=e.matrix;r&&(e.matrix=Fe(r,3,4))})}function Fm(t){for(var e=t.parentElement,r=!1,i=kr(t);e;){var n=ll(e).transform;if(n&&n!=="none"){r=!0;break}if(e===i)break;e=e.parentElement}return{fixedContainer:e||i,hasTransform:r}}function Vo(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(qf(t,!e).join(","),")")}function sl(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var i=t.viewBox,n=i&&i.baseVal||{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width||e,height:n.height||r,clientWidth:e,clientHeight:r}}function Hm(t,e){var r,i=sl(t),n=i.width,o=i.height,s=i.clientWidth,a=i.clientHeight,l=s/n,u=a/o,c=t.preserveAspectRatio.baseVal,f=c.align,h=c.meetOrSlice,d=[0,0],p=[l,u],v=[0,0];if(f!==1){var g=(f-2)%3,m=Math.floor((f-2)/3);d[0]=n*g/2,d[1]=o*m/2;var y=h===2?Math.max(u,l):Math.min(l,u);p[0]=y,p[1]=y,v[0]=(s-n)/2*g,v[1]=(a-o)/2*m}var x=Ya(p,e);return r=O(v,2),x[e*(e-1)]=r[0],x[e*(e-1)+1]=r[1],ji(x,e,d)}function Wm(t,e,r){var i=t.tagName.toLowerCase();if(!t.getBBox||!r&&i==="g")return[0,0,0,0];var n=ye(t),o=n("transform-box")==="fill-box",s=t.getBBox(),a=sl(t.ownerSVGElement),l=s.x,u=s.y;i==="foreignobject"&&!l&&!u&&(l=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var c=l-a.x,f=u-a.y,h=o?e[0]:e[0]-c,d=o?e[1]:e[1]-f;return[c,f,h,d]}function Gt(t,e,r){return ne(t,Wr(e,r),r)}function qr(t,e,r,i){return[[0,0],[e,0],[0,r],[e,r]].map(function(n){return Gt(t,n,i)})}function Ee(t){var e=t.map(function(u){return u[0]}),r=t.map(function(u){return u[1]}),i=Math.min.apply(Math,tt([],O(e),!1)),n=Math.min.apply(Math,tt([],O(r),!1)),o=Math.max.apply(Math,tt([],O(e),!1)),s=Math.max.apply(Math,tt([],O(r),!1)),a=o-i,l=s-n;return{left:i,top:n,right:o,bottom:s,width:a,height:l}}function Wu(t,e,r,i){var n=qr(t,e,r,i);return Ee(n)}function Vm(t,e,r,i,n){var o,s=t.target,a=t.origin,l=e.matrix,u=Hh(s),c=u.offsetWidth,f=u.offsetHeight,h=r.getBoundingClientRect(),d=[0,0];r===kr(r)&&(d=Gh(s,!0));for(var p=s.getBoundingClientRect(),v=p.left-h.left+r.scrollLeft-(r.clientLeft||0)+d[0],g=p.top-h.top+r.scrollTop-(r.clientTop||0)+d[1],m=p.width,y=p.height,x=uo(i,n,l),C=Wu(x,c,f,i),w=C.left,b=C.top,_=C.width,S=C.height,M=Gt(x,a,i),T=pt(M,[w,b]),B=[v+T[0]*m/_,g+T[1]*y/S],k=[0,0],E=0;++E<10;){var R=Xe(n,i);o=O(pt(Gt(R,B,i),Gt(R,M,i)),2),k[0]=o[0],k[1]=o[1];var A=uo(i,n,Vr(k,i),l),G=Wu(A,c,f,i),F=G.left,z=G.top,U=F-v,q=z-g;if(X(U)<2&&X(q)<2)break;B[0]-=U,B[1]-=q}return k.map(function(H){return Math.round(H)})}function jm(t,e,r){var i=t.length===16,n=i?4:3,o=e.map(function(l){return Gt(t,l,n)}),s=r.left,a=r.top;return o.map(function(l){return[l[0]+s,l[1]+a]})}function Me(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Fh(t,e){return Me([e[0]-t[0],e[1]-t[1]])}function Li(t,e,r,i){r===void 0&&(r=1),i===void 0&&(i=Wt(t,e));var n=Fh(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(i,"rad) scaleY(").concat(r,")"),width:"".concat(n,"px")}}function mo(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r.length,o=r.reduce(function(a,l){return a+l[0]},0)/n,s=r.reduce(function(a,l){return a+l[1]},0)/n;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function $r(t,e){var r=t[e];return Ge(r)?I(I({},t),r):t}function Hh(t){var e=t&&!fn(t.offsetWidth),r=0,i=0,n=0,o=0,s=0,a=0,l=0,u=0,c=0,f=0,h=0,d=0,p=1/0,v=1/0,g=1/0,m=1/0,y=0,x=0,C=!1;if(t)if(!e&&t.ownerSVGElement){var w=t.getBBox();C=!0,r=w.width,i=w.height,s=r,a=i,l=r,u=i,n=r,o=i}else{var b=ye(t),_=t.style,S=b("boxSizing")==="border-box",M=parseFloat(b("borderLeftWidth"))||0,T=parseFloat(b("borderRightWidth"))||0,B=parseFloat(b("borderTopWidth"))||0,k=parseFloat(b("borderBottomWidth"))||0,E=parseFloat(b("paddingLeft"))||0,R=parseFloat(b("paddingRight"))||0,A=parseFloat(b("paddingTop"))||0,G=parseFloat(b("paddingBottom"))||0,F=E+R,z=A+G,U=M+T,q=B+k,H=F+U,et=z+q,ot=b("position"),it=0,st=0;if("clientLeft"in t){var Q=null;if(ot==="absolute"){var lt=nn(t,kr(t));Q=lt.offsetParent}else Q=t.parentElement;if(Q){var ht=ye(Q);it=parseFloat(ht("width")),st=parseFloat(ht("height"))}}c=Math.max(F,Tt(b("minWidth"),it)||0),f=Math.max(z,Tt(b("minHeight"),st)||0),p=Tt(b("maxWidth"),it),v=Tt(b("maxHeight"),st),isNaN(p)&&(p=1/0),isNaN(v)&&(v=1/0),y=Tt(_.width,0)||0,x=Tt(_.height,0)||0,s=parseFloat(b("width"))||0,a=parseFloat(b("height"))||0,l=X(s-y)<1?zs(c,y||s,p):s,u=X(a-x)<1?zs(f,x||a,v):a,r=l,i=u,n=l,o=u,S?(g=p,m=v,h=c,d=f,l=r-H,u=i-et):(g=p+H,m=v+et,h=c+H,d=f+et,r=l+H,i=u+et),n=l+F,o=u+z}return{svg:C,offsetWidth:r,offsetHeight:i,clientWidth:n,clientHeight:o,contentWidth:l,contentHeight:u,inlineCSSWidth:y,inlineCSSHeight:x,cssWidth:s,cssHeight:a,minWidth:c,minHeight:f,maxWidth:p,maxHeight:v,minOffsetWidth:h,minOffsetHeight:d,maxOffsetWidth:g,maxOffsetHeight:m}}function Wh(t,e){return Wt(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Vn(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Vh(t,e){var r=t===kr(t)||t===Ga(t),i={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return r&&(i.clientHeight=Math.max(e.height,i.clientHeight),i.scrollHeight=Math.max(e.height,i.scrollHeight)),i.overflow=ye(t)("overflow")!=="visible",I(I({},e),i)}function ys(t,e,r,i){var n=t.left,o=t.right,s=t.top,a=t.bottom,l=e.top,u=e.left,c={left:u+n,top:l+s,right:u+o,bottom:l+a,width:o-n,height:a-s};return r&&i?Vh(r,c):c}function $i(t,e){var r=0,i=0,n=0,o=0;if(t){var s=t.getBoundingClientRect();r=s.left,i=s.top,n=s.width,o=s.height}var a={left:r,top:i,width:n,height:o,right:r+n,bottom:i+o};return t&&e?Vh(t,a):a}function $m(t){var e=t.props,r=e.groupable,i=e.svgOrigin,n=t.getState(),o=n.offsetWidth,s=n.offsetHeight,a=n.svg,l=n.transformOrigin;return!r&&a&&i?hl(i,o,s):l}function jh(t,e,r,i){var n;if(t)n=t;else if(e)n=[0,0];else{var o=r.target;n=$h(o,i)}return n}function $h(t,e){if(t){var r=t.getAttribute("data-rotation")||"",i=t.getAttribute("data-direction");if(e.deg=r,!!i){var n=[0,0];return i.indexOf("w")>-1&&(n[0]=-1),i.indexOf("e")>-1&&(n[0]=1),i.indexOf("n")>-1&&(n[1]=-1),i.indexOf("s")>-1&&(n[1]=1),n}}}function al(t,e){return[Et(e,t[0]),Et(e,t[1]),Et(e,t[2]),Et(e,t[3])]}function De(t){var e=t.left,r=t.top,i=t.pos1,n=t.pos2,o=t.pos3,s=t.pos4;return al([i,n,o,s],[e,r])}function oa(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(t)})}function ni(t,e){var r=e?"controlGesto":"targetGesto",i=t[r];(i==null?void 0:i.isIdle())===!1&&oa(t,e),i==null||i.unset(),t[r]=null}function ce(t,e){if(e){var r=Di(e);r.nextStyle=I(I({},r.nextStyle),t)}return{style:t,cssText:er(t).map(function(i){return"".concat(to(i,"-"),": ").concat(t[i],";")}).join("")}}function Yh(t,e,r){var i=e.afterTransform||e.transform;return I(I({},ce(I(I(I({},t.style),e.style),{transform:i}),r)),{afterTransform:i,transform:t.transform})}function Ct(t,e,r,i){var n=e.datas;n.datas||(n.datas={});var o=I(I({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:n.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){n.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return n.isStartEvent?i||(n.lastEvent=o):n.isStartEvent=!0,o}function xe(t,e,r){var i=e.datas,n="isDrag"in r?r.isDrag:e.isDrag;return i.datas||(i.datas={}),I(I({isDrag:n},r),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:i.lastEvent,isDouble:e.isDouble,datas:i.datas,isFirstDrag:!!e.isFirstDrag})}function jo(t,e,r){t._emitter.on(e,r)}function ct(t,e,r,i,n){return t.triggerEvent(e,r,i,n)}function ll(t,e){return br(t).getComputedStyle(t,e)}function jn(t,e,r){var i={},n={};return t.filter(function(o){var s=o.name;if(i[s]||!e.some(function(a){return o[a]}))return!1;if(!r&&o.ableGroup){if(n[o.ableGroup])return!1;n[o.ableGroup]=!0}return i[s]=!0,!0})}function sa(t,e){return t===e||t==null&&e==null}function Vu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,i=0;i<r;++i){var n=t[i];if(!fn(n))return n}return t[r]}function Xh(t,e){var r=[],i=[];return t.forEach(function(n,o){var s=e(n,o,t),a=i.indexOf(s),l=r[a]||[];a===-1&&(i.push(s),r.push(l)),l.push(n)}),r}function Ym(t,e){var r=[],i={};return t.forEach(function(n,o){var s=e(n,o,t),a=i[s];a||(a=[],i[s]=a,r.push(a)),a.push(n)}),r}function Uh(t){return t.reduce(function(e,r){return e.concat(r)},[])}function yi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(r,i){return X(i)-X(r)}),t[0]}function bi(t,e,r){return ne(Xe(t,r),Wr(e,r),r)}function Xm(t,e){var r,i=t.is3d,n=t.rootMatrix,o=i?4:3;return r=O(bi(n,[e.distX,e.distY],o),2),e.distX=r[0],e.distY=r[1],e}function we(t,e,r,i){if(!r[0]&&!r[1])return e;var n=Gt(t,[Gu(r[0]||1),0],i),o=Gt(t,[0,Gu(r[1]||1)],i),s=Gt(t,[r[0]/Me(n),r[1]/Me(o)],i);return Et(e,s)}function Be(t,e,r){return r?"".concat(t/e*100,"%"):"".concat(t,"px")}function yo(t){return X(t)<=fe?0:t}function ul(t){return function(e){if(!e.isDragging(t))return"";var r=L1(e,t),i=r.deg;return i?dt("view-control-rotation".concat(i)):""}}function cl(t,e){return e===void 0&&(e=[t]),function(r,i){if(i.isRequest)return e.some(function(o){return i.requestAble===o})?i.parentDirection:!1;var n=i.inputEvent.target;return Kt(n,dt("direction"))&&(!t||Kt(n,dt(t)))}}function Um(t,e,r){var i,n=vi(t,{"x%":function(w){return w/100*e.offsetWidth},"y%":function(w){return w/100*e.offsetHeight}}),o=t.slice(0,r<0?void 0:r),s=t.slice(0,r<0?void 0:r+1),a=t[r]||"",l=r<0?[]:t.slice(r),u=r<0?[]:t.slice(r+1),c=n.slice(0,r<0?void 0:r),f=n.slice(0,r<0?void 0:r+1),h=(i=n[r])!==null&&i!==void 0?i:vi([""])[0],d=r<0?[]:n.slice(r),p=r<0?[]:n.slice(r+1),v=h?[h]:[],g=Qr(c),m=Qr(f),y=Qr(d),x=Qr(p),C=Pt(g,y,4);return{transforms:t,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:Qr(v),afterFunctionMatrix:y,afterFunctionMatrix2:x,allFunctionMatrix:C,beforeFunctions:c,beforeFunctions2:f,targetFunction:v[0],afterFunctions:d,afterFunctions2:p,beforeFunctionTexts:o,beforeFunctionTexts2:s,targetFunctionText:a,afterFunctionTexts:l,afterFunctionTexts2:u}}function qm(t){return!t||!Ge(t)||Ei(t)?!1:Ht(t)||"length"in t}function Ye(t,e){return t?Ei(t)?t:ie(t)?e?document.querySelector(t):t:La(t)?t():Mf(t)?t:"current"in t?t.current:t:null}function fl(t,e){if(!t)return[];var r=qm(t)?[].slice.call(t):[t];return r.reduce(function(i,n){return ie(n)&&e?tt(tt([],O(i),!1),O([].slice.call(document.querySelectorAll(n))),!1):(Ht(n)?i.push(fl(n,e)):i.push(Ye(n,e)),i)},[])}function Km(t,e,r){var i=Wt(t,e)/Math.PI*180;return i=r>=0?i:180-i,i=i>=0?i:360+i,i}function ju(t,e){var r=t.rootMatrix,i=t.is3d,n=i?4:3,o=Xe(r,n);return i||(o=Fe(o,3,4)),o[12]=0,o[13]=0,o[14]=0,O0(o,e)}function qh(t,e,r,i,n){var o=O(t,2),s=o[0],a=o[1],l=0,u=0;if(n&&s&&a){var c=Wt([0,0],e),f=Wt([0,0],i),h=Me(e),d=Math.cos(c-f)*h;if(!i[0])u=d,l=u*r;else if(!i[1])l=d,u=l/r;else{var p=i[0]*s,v=i[1]*a,g=Math.atan2(p+e[0],v+e[1]),m=Math.atan2(p,v);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var y=0;X(g-m)<Math.PI/2||X(g-m)>Math.PI/2*3||(m+=Math.PI),y=g-m,y>Math.PI*2?y-=Math.PI*2:y>Math.PI?y=2*Math.PI-y:y<-Math.PI&&(y=-2*Math.PI-y);var x=Me([p+e[0],v+e[1]])*Math.cos(y);l=x*Math.sin(m)-p,u=x*Math.cos(m)-v,i[0]<0&&(l*=-1),i[1]<0&&(u*=-1)}}else l=i[0]*e[0],u=i[1]*e[1];return[l,u]}function Kh(t,e,r,i){var n,o=r.ratio,s=r.startOffsetWidth,a=r.startOffsetHeight,l=0,u=0,c=i.distX,f=i.distY,h=i.pinchScale,d=i.parentDistance,p=i.parentDist,v=i.parentScale,g=r.fixedDirection,m=[0,1].map(function(_){return X(t[_]-g[_])}),y=[0,1].map(function(_){var S=m[_];return S!==0&&(S=2/S),S});if(p)l=p[0],u=p[1],e&&(l?u||(u=l/o):l=u*o);else if(pi(h))l=(h-1)*s,u=(h-1)*a;else if(v)l=(v[0]-1)*s,u=(v[1]-1)*a;else if(d){var x=s*m[0],C=a*m[1],w=Me([x,C]);l=d/w*x*y[0],u=d/w*C*y[1]}else{var b=Ue({datas:r,distX:c,distY:f});b=y.map(function(_,S){return b[S]*_}),n=O(qh([s,a],b,o,t,e),2),l=n[0],u=n[1]}return{distWidth:l,distHeight:u}}function aa(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var r=O(t.split(" "),2),i=r[0],n=r[1],o=aa(i||""),s=aa(n||""),a=I(I({},o),s),l={x:"50%",y:"50%"};return a.x&&(l.x=a.x),a.y&&(l.y=a.y),a.value&&(a.x&&!a.y&&(l.y=a.value),!a.x&&a.y&&(l.x=a.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function hl(t,e,r){var i=aa(t,!0),n=i.x,o=i.y;return[Tt(n,e)||0,Tt(o,r)||0]}function Zm(t,e,r){var i=t.map(function(o){return pt(o,e)}),n=i.map(function(o){return gn(o,r)});return{prev:i,next:n,result:n.map(function(o){return Et(o,e)})}}function Zh(t,e){return t.length===e.length&&t.every(function(r,i){var n=e[i],o=Ht(r),s=Ht(n);return o&&s?Zh(r,n):!o&&!s?r===n:!1})}function oi(t,e,r,i,n){var o=t._store,s=o[e];if(!(e in o))if(n!=null)o[e]=n,s=n;else return o[e]=r,r;return s===r||i(s)===i(r)?s:(o[e]=r,r)}function ue(t){return t>=0?1:-1}function X(t){return Math.abs(t)}function bs(t,e){return Yg(t).map(function(r){return e(r)})}function Jh(t){return pi(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var Jm=xn("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,i=e.targets,n=e.angle,o=e.originalDatas,s=t.props,a=s.pinchable,l=s.ables;if(!a)return!1;var u="onPinch".concat(i?"Group":"","Start"),c="drag".concat(i?"Group":"","ControlStart"),f=(a===!0?t.controlAbles:l.filter(function(v){return a.indexOf(v.name)>-1})).filter(function(v){return v.canPinch&&v[c]}),h=Ct(t,e,{});i&&(h.targets=i);var d=ct(t,u,h);r.isPinch=d!==!1,r.ables=f;var p=r.isPinch;return p?(f.forEach(function(v){if(o[v.name]=o[v.name]||{},!!v[c]){var g=I(I({},e),{datas:o[v.name],parentRotate:n,isPinch:!0});v[c](t,g)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p):!1},pinch:function(t,e){var r=e.datas,i=e.scale,n=e.distance,o=e.originalDatas,s=e.inputEvent,a=e.targets,l=e.angle;if(r.isPinch){var u=n*(1-1/i),c=Ct(t,e,{});a&&(c.targets=a);var f="onPinch".concat(a?"Group":"");ct(t,f,c);var h=r.ables,d="drag".concat(a?"Group":"","Control");return h.forEach(function(p){p[d]&&p[d](t,I(I({},e),{datas:o[p.name],inputEvent:s,resolveMatrix:!0,pinchScale:i,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(t,e){var r=e.datas,i=e.isPinch,n=e.inputEvent,o=e.targets,s=e.originalDatas;if(r.isPinch){var a="onPinch".concat(o?"Group":"","End"),l=xe(t,e,{isDrag:i});o&&(l.targets=o),ct(t,a,l);var u=r.ables,c="drag".concat(o?"Group":"","ControlEnd");return u.forEach(function(f){f[c]&&f[c](t,I(I({},e),{isDrag:i,datas:s[f.name],inputEvent:n,isPinch:!0}))}),i}},pinchGroupStart:function(t,e){return this.pinchStart(t,I(I({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,I(I({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,I(I({},e),{targets:t.props.targets}))}}),$u=cl("scalable"),Qm={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:yh("scalable"),dragControlCondition:$u,viewClassName:ul("scalable"),dragControlStart:function(t,e){var r=e.datas,i=e.isPinch,n=e.inputEvent,o=e.parentDirection,s=jh(o,i,n,r),a=t.state,l=a.width,u=a.height,c=a.targetTransform,f=a.target,h=a.pos1,d=a.pos2,p=a.pos4;if(!s||!f)return!1;i||Ur(t,e),r.datas={},r.transform=c,r.prevDist=[1,1],r.direction=s,r.startOffsetWidth=l,r.startOffsetHeight=u,r.startValue=[1,1];var v=!s[0]&&!s[1]||s[0]||!s[1];Go(t,e,"scale"),r.isWidth=v;function g(b){r.ratio=b&&isFinite(b)?b:0}r.startPositions=De(t.state);function m(b){var _=Ph(r.startPositions,b);r.fixedDirection=_.fixedDirection,r.fixedPosition=_.fixedPosition,r.fixedOffset=_.fixedOffset}r.setFixedDirection=m,g(Je(h,d)/Je(d,p)),m([-s[0],-s[1]]);var y=function(b){r.minScaleSize=b},x=function(b){r.maxScaleSize=b};y([-1/0,-1/0]),x([1/0,1/0]);var C=Ct(t,e,I(I({direction:s,set:function(b){r.startValue=b},setRatio:g,setFixedDirection:m,setMinScaleSize:y,setMaxScaleSize:x},No(t,e)),{dragStart:le.dragStart(t,new gi().dragStart([0,0],e))})),w=ct(t,"onScaleStart",C);return r.startFixedDirection=r.fixedDirection,w!==!1&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),r.isScale?C:!1},dragControl:function(t,e){Lo(t,e,"scale");var r=e.datas,i=e.parentKeepRatio,n=e.parentFlag,o=e.isPinch,s=e.dragClient,a=e.isRequest,l=e.useSnap,u=e.resolveMatrix,c=r.prevDist,f=r.direction,h=r.startOffsetWidth,d=r.startOffsetHeight,p=r.isScale,v=r.startValue,g=r.isWidth,m=r.ratio;if(!p)return!1;var y=t.props,x=y.throttleScale,C=y.parentMoveable,w=f;!f[0]&&!f[1]&&(w=[1,1]);var b=m&&(i??y.keepRatio)||!1,_=t.state,S=[v[0],v[1]];function M(){var rt=Kh(w,b,r,e),ft=rt.distWidth,D=rt.distHeight,P=h?(h+ft)/h:1,L=d?(d+D)/d:1;v[0]||(S[0]=ft/h),v[1]||(S[1]=D/d);var N=(w[0]||b?P:1)*S[0],W=(w[1]||b?L:1)*S[1];return N===0&&(N=ue(c[0])*Gn),W===0&&(W=ue(c[1])*Gn),[N,W]}var T=M();if(!o&&t.props.groupable){var B=_.snapRenderInfo||{},k=B.direction;Ht(k)&&(k[0]||k[1])&&(_.snapRenderInfo={direction:f,request:e.isRequest})}ct(t,"onBeforeScale",Ct(t,e,{scale:T,setFixedDirection:function(rt){return r.setFixedDirection(rt),T=M(),T},startFixedDirection:r.startFixedDirection,setScale:function(rt){T=rt}},!0));var E=[T[0]/S[0],T[1]/S[1]],R=s,A=[0,0],G=ue(E[0]*E[1]),F=!s&&!n&&o;if(F||u?R=Qa(t,r.targetAllTransform,[0,0],[0,0],r):s||(R=r.fixedPosition),o||(A=Pm(t,E,f,!l&&a,r)),b){w[0]&&w[1]&&A[0]&&A[1]&&(Math.abs(A[0]*h)>Math.abs(A[1]*d)?A[1]=0:A[0]=0);var z=!A[0]&&!A[1];if(z&&(g?E[0]=bt(E[0]*S[0],x)/S[0]:E[1]=bt(E[1]*S[1],x)/S[1]),w[0]&&!w[1]||A[0]&&!A[1]||z&&g){E[0]+=A[0];var U=h*E[0]*S[0]/m;E[1]=ue(G*E[0])*X(U/d/S[1])}else if(!w[0]&&w[1]||!A[0]&&A[1]||z&&!g){E[1]+=A[1];var q=d*E[1]*S[1]*m;E[0]=ue(G*E[1])*X(q/h/S[0])}}else E[0]+=A[0],E[1]+=A[1],A[0]||(E[0]=bt(E[0]*S[0],x)/S[0]),A[1]||(E[1]=bt(E[1]*S[1],x)/S[1]);E[0]===0&&(E[0]=ue(c[0])*Gn),E[1]===0&&(E[1]=ue(c[1])*Gn),T=Rm(E,[S[0],S[1]]);var H=[h,d],et=[h*T[0],d*T[1]];et=Sf(et,r.minScaleSize,r.maxScaleSize,b?m:!1),T=bs(2,function(rt){return H[rt]?et[rt]/H[rt]:et[rt]}),E=bs(2,function(rt){return T[rt]/S[rt]});var ot=bs(2,function(rt){return c[rt]?E[rt]/c[rt]:E[rt]}),it="scale(".concat(E.join(", "),")"),st="scale(".concat(T.join(", "),")"),Q=zo(r,st,it),lt=!v[0]||!v[1],ht=P1(t,lt?st:it,r.fixedDirection,R,r.fixedOffset,r,lt),gt=F?ht:pt(ht,r.prevInverseDist||[0,0]);if(r.prevDist=E,r.prevInverseDist=ht,T[0]===c[0]&&T[1]===c[1]&&gt.every(function(rt){return!rt})&&!C&&!F)return!1;var xt=Ct(t,e,I({offsetWidth:h,offsetHeight:d,direction:f,scale:T,dist:E,delta:ot,isPinch:!!o},hh(t,Q,gt,o,e)));return ct(t,"onScale",xt),xt},dragControlEnd:function(t,e){var r=e.datas;if(!r.isScale)return!1;r.isScale=!1;var i=xe(t,e,{});return ct(t,"onScaleEnd",i),i},dragGroupControlCondition:$u,dragGroupControlStart:function(t,e){var r=e.datas,i=this.dragControlStart(t,e);if(!i)return!1;var n=Ne(t,"resizable",e);r.moveableScale=t.scale;var o=Qe(t,this,"dragControlStart",e,function(u,c){return ho(t,u,r,c)}),s=function(u){i.setFixedDirection(u),o.forEach(function(c,f){c.setFixedDirection(u),ho(t,c.moveable,r,n[f])})};r.setFixedDirection=s;var a=I(I({},i),{targets:t.props.targets,events:o,setFixedDirection:s}),l=ct(t,"onScaleGroupStart",a);return r.isScale=l!==!1,r.isScale?a:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){jo(t,"onBeforeScale",function(c){ct(t,"onBeforeScaleGroup",Ct(t,e,I(I({},c),{targets:t.props.targets}),!0))});var i=this.dragControl(t,e);if(i){var n=i.dist,o=r.moveableScale;t.scale=[n[0]*o[0],n[1]*o[1]];var s=t.props.keepRatio,a=r.fixedPosition,l=Qe(t,this,"dragControl",e,function(c,f){var h=O(ne(mn(t.rotation/180*Math.PI,3),[f.datas.originalX*n[0],f.datas.originalY*n[1],1],3),2),d=h[0],p=h[1];return I(I({},f),{parentDist:null,parentScale:n,parentKeepRatio:s,dragClient:Et(a,[d,p])})}),u=I({targets:t.props.targets,events:l},i);return ct(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,i=e.datas;if(i.isScale){this.dragControlEnd(t,e);var n=Qe(t,this,"dragControlEnd",e),o=xe(t,e,{targets:t.props.targets,events:n});return ct(t,"onScaleGroupEnd",o),r}},request:function(){var t={},e=0,r=0,i=!1;return{isControl:!0,requestStart:function(n){return i=n.useSnap,{datas:t,parentDirection:n.direction||[1,1],useSnap:i}},request:function(n){return e+=n.deltaWidth,r+=n.deltaHeight,{datas:t,parentDist:[e,r],parentKeepRatio:n.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}}};function ar(t,e){return t.map(function(r,i){return ao(r,e[i],1,2)})}function Yu(t,e,r){var i=Wt(t,e),n=Wt(t,r),o=n-i;return o>=0?o:o+2*Math.PI}function ty(t,e){var r=Yu(t[0],t[1],t[2]),i=Yu(e[0],e[1],e[2]),n=Math.PI;return!(r>=n&&i<=n||r<=n&&i>=n)}var ey={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:ul("warpable"),render:function(t,e){var r=t.props,i=r.resizable,n=r.scalable,o=r.warpable,s=r.zoom;if(i||n||!o)return[];var a=t.state,l=a.pos1,u=a.pos2,c=a.pos3,f=a.pos4,h=ar(l,u),d=ar(u,l),p=ar(l,c),v=ar(c,l),g=ar(c,f),m=ar(f,c),y=ar(u,f),x=ar(f,u);return tt([e.createElement("div",{className:dt("line"),key:"middeLine1",style:Li(h,g,s)}),e.createElement("div",{className:dt("line"),key:"middeLine2",style:Li(d,m,s)}),e.createElement("div",{className:dt("line"),key:"middeLine3",style:Li(p,y,s)}),e.createElement("div",{className:dt("line"),key:"middeLine4",style:Li(v,x,s)})],O(bh(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var r=e.inputEvent.target;return Kt(r,dt("direction"))&&Kt(r,dt("warpable"))},dragControlStart:function(t,e){var r=e.datas,i=e.inputEvent,n=t.props.target,o=i.target,s=$h(o,r);if(!s||!n)return!1;var a=t.state,l=a.transformOrigin,u=a.is3d,c=a.targetTransform,f=a.targetMatrix,h=a.width,d=a.height,p=a.left,v=a.top;r.datas={},r.targetTransform=c,r.warpTargetMatrix=u?f:Fe(f,3,4),r.targetInverseMatrix=Xf(Xe(r.warpTargetMatrix,4),3,4),r.direction=s,r.left=p,r.top=v,r.poses=[[0,0],[h,0],[0,d],[h,d]].map(function(y){return pt(y,l)}),r.nextPoses=r.poses.map(function(y){var x=O(y,2),C=x[0],w=x[1];return ne(r.warpTargetMatrix,[C,w,0,1],4)}),r.startValue=At(4),r.prevMatrix=At(4),r.absolutePoses=De(a),r.posIndexes=fh(s),Ur(t,e),Go(t,e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:s};var g=Ct(t,e,I({set:function(y){r.startValue=y}},No(t,e))),m=ct(t,"onWarpStart",g);return m!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,i=e.isRequest,n=e.distX,o=e.distY,s=r.targetInverseMatrix,a=r.prevMatrix,l=r.isWarp,u=r.startValue,c=r.poses,f=r.posIndexes,h=r.absolutePoses;if(!l)return!1;if(Lo(t,e,"matrix3d"),Ti(t,"warpable")){var d=f.map(function(M){return h[M]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=Wo(t,i,{horizontal:d.map(function(M){return M[1]+o}),vertical:d.map(function(M){return M[0]+n})}),v=p.horizontal,g=p.vertical;o-=v.offset,n-=g.offset}var m=Ue({datas:r,distX:n,distY:o},!0),y=r.nextPoses.slice();if(f.forEach(function(M){y[M]=Et(y[M],m)}),!x1.every(function(M){return ty(M.map(function(T){return c[T]}),M.map(function(T){return y[T]}))}))return!1;var x=Xa(c[0],c[2],c[1],c[3],y[0],y[2],y[1],y[3]);if(!x.length)return!1;var C=Pt(s,x,4),w=uh(r,C,!0),b=Pt(Xe(a,4),w,4);r.prevMatrix=w;var _=Pt(u,w,4),S=zo(r,"matrix3d(".concat(_.join(", "),")"),"matrix3d(".concat(w.join(", "),")"));return Ja(e,S),ct(t,"onWarp",Ct(t,e,I({delta:b,matrix:_,dist:w,multiply:Pt,transform:S},ce({transform:S},e)))),!0},dragControlEnd:function(t,e){var r=e.datas,i=e.isDrag;return r.isWarp?(r.isWarp=!1,ct(t,"onWarpEnd",xe(t,e,{})),i):!1}},ry=dt("area-pieces"),$n=dt("area-piece"),Qh=dt("avoid"),iy=dt("view-dragging");function xs(t){var e=t.areaElement;if(e){var r=t.state,i=r.width,n=r.height;Ef(e,Qh),e.style.cssText+="left: 0px; top: 0px; width: ".concat(i,"px; height: ").concat(n,"px")}}function Xu(t){return t.createElement("div",{key:"area_pieces",className:ry},t.createElement("div",{className:$n}),t.createElement("div",{className:$n}),t.createElement("div",{className:$n}),t.createElement("div",{className:$n}))}var td={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var r=t.props,i=r.target,n=r.dragArea,o=r.groupable,s=r.passDragArea,a=t.getState(),l=a.width,u=a.height,c=a.renderPoses,f=s?dt("area","pass"):dt("area");if(o)return[e.createElement("div",{key:"area",ref:Ze(t,"areaElement"),className:f}),Xu(e)];if(!i||!n)return[];var h=Xa([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),d=h.length?Vo(h,!0):"none";return[e.createElement("div",{key:"area",ref:Ze(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:d}}),Xu(e)]},dragStart:function(t,e){var r=e.datas,i=e.clientX,n=e.clientY,o=e.inputEvent;if(!o)return!1;r.isDragArea=!1;var s=t.areaElement,a=t.state,l=a.moveableClientRect,u=a.renderPoses,c=a.rootMatrix,f=a.is3d,h=l.left,d=l.top,p=Ee(u),v=p.left,g=p.top,m=p.width,y=p.height,x=f?4:3,C=O(bi(c,[i-h,n-d],x),2),w=C[0],b=C[1];w-=v,b-=g;var _=[{left:v,top:g,width:m,height:b-10},{left:v,top:g,width:w-10,height:y},{left:v,top:g+b+10,width:m,height:y-b-10},{left:v+w+10,top:g,width:m-w-10,height:y}],S=[].slice.call(s.nextElementSibling.children);_.forEach(function(M,T){S[T].style.cssText="left: ".concat(M.left,"px;top: ").concat(M.top,"px; width: ").concat(M.width,"px; height: ").concat(M.height,"px;")}),kf(s,Qh),a.disableNativeEvent=!0},drag:function(t,e){var r=e.datas,i=e.inputEvent;if(this.enableNativeEvent(t),!i)return!1;r.isDragArea||(r.isDragArea=!0,xs(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var r=e.inputEvent,i=e.datas;if(!r)return!1;i.isDragArea||xs(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){xs(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&Cf(function(){e.disableNativeEvent=!1})}},ny=xn("origin",{props:["origin","svgOrigin"],render:function(t,e){var r=t.props,i=r.zoom,n=r.svgOrigin,o=r.groupable,s=t.getState(),a=s.beforeOrigin,l=s.rotation,u=s.svg,c=s.allMatrix,f=s.is3d,h=s.left,d=s.top,p=s.offsetWidth,v=s.offsetHeight,g;if(!o&&u&&n){var m=O(hl(n,p,v),2),y=m[0],x=m[1],C=f?4:3,w=Gt(c,[y,x],C);g=mo(l,i,pt(w,[h,d]))}else g=mo(l,i,a);return[e.createElement("div",{className:dt("control","origin"),style:g,key:"beforeOrigin"})]}});function oy(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var sy={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var r=t.props,i=r.scrollContainer,n=i===void 0?t.getContainer():i,o=r.scrollOptions,s=new G0,a=Ye(n,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var l=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(c){var f=c.container,h=c.direction,d=Ct(t,e,{scrollContainer:f,direction:h}),p=u?"onScrollGroup":"onScroll";u&&(d.targets=u),ct(t,p,d)}).on("move",function(c){var f=c.offsetX,h=c.offsetY,d=c.inputEvent;t[l].scrollBy(f,h,d.inputEvent,!1)}).on("scrollDrag",function(c){var f=c.next;f(t[l].getCurrentEvent())}),s.dragStart(e,I({container:a},o))},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var i=t.props,n=i.scrollContainer,o=n===void 0?t.getContainer():n,s=i.scrollThreshold,a=s===void 0?0:s,l=i.scrollThrottleTime,u=l===void 0?0:l,c=i.getScrollPosition,f=c===void 0?oy:c,h=i.scrollOptions;return r.drag(e,I({container:o,threshold:a,throttleTime:u,getScrollPosition:function(d){return f({scrollContainer:d.container,direction:d.direction})}},h)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,I(I({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,I(I({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,I(I({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,I(I({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,I(I({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,I(I({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,I(I({},e),{targets:t.props.targets}))},unset:function(t){var e,r=t.state;(e=r.dragScroll)===null||e===void 0||e.dragEnd(),r.dragScroll=null}},ed={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},ay=xn("padding",{props:["padding"],render:function(t,e){var r=t.props;if(r.dragArea)return[];var i=Jh(r.padding||{}),n=i.left,o=i.top,s=i.right,a=i.bottom,l=t.getState(),u=l.renderPoses,c=l.pos1,f=l.pos2,h=l.pos3,d=l.pos4,p=[c,f,h,d],v=[];return n>0&&v.push([0,2]),o>0&&v.push([0,1]),s>0&&v.push([1,3]),a>0&&v.push([2,3]),v.map(function(g,m){var y=O(g,2),x=y[0],C=y[1],w=p[x],b=p[C],_=u[x],S=u[C],M=Xa([0,0],[100,0],[0,100],[100,100],w,b,_,S);if(M.length)return e.createElement("div",{key:"padding".concat(m),className:dt("padding"),style:{transform:Vo(M,!0)}})})}}),Uu=["nw","ne","se","sw"];function Yn(t,e){var r=t[0]+t[1],i=r>e?e/r:1;return t[0]*=i,t[1]=e-t[1]*i,t}var ly=[1,2,5,6],uy=[0,3,4,7],Ar=[1,-1,-1,1],Lr=[1,1,-1,-1];function dl(t,e,r,i,n,o,s,a){n===void 0&&(n=0),o===void 0&&(o=0),s===void 0&&(s=r),a===void 0&&(a=i);var l=[],u=!1,c=t.filter(function(h){return!h.virtual}),f=c.map(function(h){var d=h.horizontal,p=h.vertical,v=h.pos;if(p&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,p===1?v[1]-o:a-v[1]);return l.push(Be(g,i,e)),g}else{var g=Math.max(0,d===1?v[0]-n:s-v[0]);return l.push(Be(g,r,e)),g}});return{radiusPoses:c,styles:l,raws:f}}function rd(t){for(var e=[0,0],r=[0,0],i=t.length,n=0;n<i;++n){var o=t[n];o.sub&&(o.horizontal&&(e[1]===0&&(e[0]=n),e[1]=n-e[0]+1,r[0]=n+1),o.vertical&&(r[1]===0&&(r[0]=n),r[1]=n-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function id(t,e,r,i,n,o,s){var a,l,u,c;o===void 0&&(o=[0,0]),s===void 0&&(s=!1);var f=t.indexOf("/"),h=(f>-1?t.slice(0,f):t).length,d=t.slice(0,h),p=t.slice(h+1),v=d.length,g=p.length,m=g>0,y=O(d,4),x=y[0],C=x===void 0?"0px":x,w=y[1],b=w===void 0?C:w,_=y[2],S=_===void 0?C:_,M=y[3],T=M===void 0?b:M,B=O(p,4),k=B[0],E=k===void 0?C:k,R=B[1],A=R===void 0?m?E:b:R,G=B[2],F=G===void 0?m?E:S:G,z=B[3],U=z===void 0?m?A:T:z,q=[C,b,S,T].map(function(Q){return Tt(Q,e)}),H=[E,A,F,U].map(function(Q){return Tt(Q,r)}),et=q.slice(),ot=H.slice();a=O(Yn([et[0],et[1]],e),2),et[0]=a[0],et[1]=a[1],l=O(Yn([et[3],et[2]],e),2),et[3]=l[0],et[2]=l[1],u=O(Yn([ot[0],ot[3]],r),2),ot[0]=u[0],ot[3]=u[1],c=O(Yn([ot[1],ot[2]],r),2),ot[1]=c[0],ot[2]=c[1];var it=s?et:et.slice(0,Math.max(o[0],v)),st=s?ot:ot.slice(0,Math.max(o[1],g));return tt(tt([],O(it.map(function(Q,lt){var ht=Uu[lt];return{virtual:lt>=v,horizontal:Ar[lt],vertical:0,pos:[i+Q,n+(Lr[lt]===-1?r:0)],sub:!0,raw:q[lt],direction:ht}})),!1),O(st.map(function(Q,lt){var ht=Uu[lt];return{virtual:lt>=g,horizontal:0,vertical:Lr[lt],pos:[i+(Ar[lt]===-1?e:0),n+Q],sub:!0,raw:H[lt],direction:ht}})),!1)}function cy(t,e,r,i,n){n===void 0&&(n=e.length);var o=rd(t.slice(i)),s=o.horizontalRange,a=o.verticalRange,l=r-i,u=0;if(l===0)u=n;else if(l>0&&l<s[1])u=s[1]-l;else if(l>=a[0])u=a[0]+a[1]-l;else return;t.splice(r,u),e.splice(r,u)}function fy(t,e,r,i,n,o,s,a,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var f=rd(t.slice(r)),h=f.horizontalRange,d=f.verticalRange;if(i>-1)for(var p=Ar[i]===1?o-u:a-o,v=h[1];v<=i;++v){var g=Lr[v]===1?c:l,m=0;if(i===v?m=o:v===0?m=u+p:Ar[v]===-1&&(m=a-(e[r][0]-u)),t.splice(r+v,0,{horizontal:Ar[v],vertical:0,pos:[m,g]}),e.splice(r+v,0,[m,g]),v===0)break}else if(n>-1){var y=Lr[n]===1?s-c:l-s;if(h[1]===0&&d[1]===0){var x=[u+y,c];t.push({horizontal:Ar[0],vertical:0,pos:x}),e.push(x)}for(var C=d[0],v=d[1];v<=n;++v){var m=Ar[v]===1?u:a,g=0;if(n===v?g=s:v===0?g=c+y:Lr[v]===1?g=e[r+C][1]:Lr[v]===-1&&(g=l-(e[r+C][1]-c)),t.push({horizontal:0,vertical:Lr[v],pos:[m,g]}),e.push([m,g]),v===0)break}}}function hy(t,e){e===void 0&&(e=t.map(function(n){return n.raw}));var r=t.map(function(n,o){return n.horizontal?e[o]:null}).filter(function(n){return n!=null}),i=t.map(function(n,o){return n.vertical?e[o]:null}).filter(function(n){return n!=null});return{horizontals:r,verticals:i}}var dy=[[0,-1,"n"],[1,0,"e"]],py=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function pl(t,e,r){var i=t.props.clipRelative,n=t.state,o=n.width,s=n.height,a=e,l=a.type,u=a.poses,c=l==="rect",f=l==="circle";if(l==="polygon")return r.map(function(b){return"".concat(Be(b[0],o,i)," ").concat(Be(b[1],s,i))});if(c||l==="inset"){var h=r[1][1],d=r[3][0],p=r[7][0],v=r[5][1];if(c)return[h,d,v,p].map(function(b){return"".concat(b,"px")});var g=[h,o-d,s-v,p].map(function(b,_){return Be(b,_%2?o:s,i)});if(r.length>8){var m=O(pt(r[4],r[0]),2),y=m[0],x=m[1];g.push.apply(g,tt(["round"],O(dl(u.slice(8).map(function(b,_){return I(I({},b),{pos:r[_]})}),i,y,x,p,h,d,v).styles),!1))}return g}else if(f||l==="ellipse"){var C=r[0],w=Be(X(r[1][1]-C[1]),f?Math.sqrt((o*o+s*s)/2):s,i),g=f?[w]:[Be(X(r[2][0]-C[0]),o,i),w];return g.push("at",Be(C[0],o,i),Be(C[1],s,i)),g}}function bo(t,e,r,i){var n=[i,(i+e)/2,e],o=[t,(t+r)/2,r];return py.map(function(s){var a=O(s,3),l=a[0],u=a[1],c=a[2],f=n[l+1],h=o[u+1];return{vertical:X(u),horizontal:X(l),direction:c,pos:[f,h]}})}function nd(t){var e=[1/0,-1/0],r=[1/0,-1/0];return t.forEach(function(i){var n=i.pos;e[0]=Math.min(e[0],n[0]),e[1]=Math.max(e[1],n[0]),r[0]=Math.min(r[0],n[1]),r[1]=Math.max(r[1],n[1])}),[X(e[1]-e[0]),X(r[1]-r[0])]}function qu(t,e,r,i,n){var o,s,a,l,u,c,f,h,d;if(t){var p=n;if(!p){var v=ye(t),g=v("clipPath");p=g!=="none"?g:v("clip")}if(!((!p||p==="none"||p==="auto")&&(p=i,!p))){var m=xf(p),y=m.prefix,x=y===void 0?p:y,C=m.value,w=C===void 0?"":C,b=x==="circle",_=" ";if(x==="polygon"){var S=zr(w||"0% 0%, 100% 0%, 100% 100%, 0% 100%");_=",";var M=S.map(function(K){var Y=O(K.split(" "),2),nt=Y[0],ut=Y[1];return{vertical:1,horizontal:1,pos:[Tt(nt,e),Tt(ut,r)]}}),T=jr(M.map(function(K){return K.pos}));return{type:x,clipText:p,poses:M,splitter:_,left:T.minX,right:T.maxX,top:T.minY,bottom:T.maxY}}else if(b||x==="ellipse"){var B="",k="",E=0,R=0,S=Sr(w);if(b){var A="";o=O(S,4),s=o[0],A=s===void 0?"50%":s,a=o[2],B=a===void 0?"50%":a,l=o[3],k=l===void 0?"50%":l,E=Tt(A,Math.sqrt((e*e+r*r)/2)),R=E}else{var G="",F="";u=O(S,5),c=u[0],G=c===void 0?"50%":c,f=u[1],F=f===void 0?"50%":f,h=u[3],B=h===void 0?"50%":h,d=u[4],k=d===void 0?"50%":d,E=Tt(G,e),R=Tt(F,r)}var z=[Tt(B,e),Tt(k,r)],M=tt([{vertical:1,horizontal:1,pos:z,direction:"nesw"}],O(dy.slice(0,b?1:2).map(function(nt){return{vertical:X(nt[1]),horizontal:nt[0],direction:nt[2],sub:!0,pos:[z[0]+nt[0]*E,z[1]+nt[1]*R]}})),!1);return{type:x,clipText:p,radiusX:E,radiusY:R,left:z[0]-E,top:z[1]-R,right:z[0]+E,bottom:z[1]+R,poses:M,splitter:_}}else if(x==="inset"){var S=Sr(w||"0 0 0 0"),U=S.indexOf("round"),q=(U>-1?S.slice(0,U):S).length,H=S.slice(q+1),et=O(S.slice(0,q),4),ot=et[0],it=et[1],st=it===void 0?ot:it,Q=et[2],lt=Q===void 0?ot:Q,ht=et[3],gt=ht===void 0?st:ht,xt=O([ot,lt].map(function(nt){return Tt(nt,r)}),2),rt=xt[0],ft=xt[1],D=O([gt,st].map(function(nt){return Tt(nt,e)}),2),P=D[0],L=D[1],N=e-L,W=r-ft,$=id(H,N-P,W-rt,P,rt),M=tt(tt([],O(bo(rt,N,W,P)),!1),O($),!1);return{type:"inset",clipText:p,poses:M,top:rt,left:P,right:N,bottom:W,radius:H,splitter:_}}else if(x==="rect"){var S=zr(w||"0px, ".concat(e,"px, ").concat(r,"px, 0px"));_=",";var j=O(S.map(function(vt){var yt=hn(vt).value;return yt}),4),V=j[0],L=j[1],ft=j[2],P=j[3],M=bo(V,L,ft,P);return{type:"rect",clipText:p,poses:M,top:V,right:L,bottom:ft,left:P,values:S,splitter:_}}}}}function vy(t,e,r,i,n){var o=t[e],s=o.direction,a=o.sub,l=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(i&&e<8){var c=u.filter(function(E){return E==="w"||E==="e"}),f=u.filter(function(E){return E==="n"||E==="s"}),h=c[0],d=f[0];l[e]=r;var p=O(nd(t),2),v=p[0],g=p[1],m=v&&g?v/g:0;if(m&&n){var y=(e+4)%8,x=t[y].pos,C=[0,0];s.indexOf("w")>-1?C[0]=-1:s.indexOf("e")>-1&&(C[0]=1),s.indexOf("n")>-1?C[1]=-1:s.indexOf("s")>-1&&(C[1]=1);var w=qh([v,g],r,m,C,!0),b=v+w[0],_=g+w[1],S=x[1],M=x[1],T=x[0],B=x[0];C[0]===-1?T=B-b:C[0]===1?B=T+b:(T=T-b/2,B=B+b/2),C[1]===-1?S=M-_:(C[1]===1||(S=M-_/2),M=S+_);var k=bo(S,B,M,T);t.forEach(function(E,R){l[R][0]=k[R].pos[0]-E.pos[0],l[R][1]=k[R].pos[1]-E.pos[1]})}else t.forEach(function(E,R){var A=E.direction;A&&(A.indexOf(h)>-1&&(l[R][0]=r[0]),A.indexOf(d)>-1&&(l[R][1]=r[1]))}),h&&(l[1][0]=r[0]/2,l[5][0]=r[0]/2),d&&(l[3][1]=r[1]/2,l[7][1]=r[1]/2)}else s&&!a?u.forEach(function(E){var R=E==="n"||E==="s";t.forEach(function(A,G){var F=A.direction,z=A.horizontal,U=A.vertical;!F||F.indexOf(E)===-1||(l[G]=[R||!z?0:r[0],!R||!U?0:r[1]])})}):l[e]=r;return l}function gy(t,e){var r=O(lh(t,e),2),i=r[0],n=r[1],o=e.datas,s=o.clipPath,a=o.clipIndex,l=s,u=l.type,c=l.poses,f=l.splitter,h=c.map(function(y){return y.pos});if(u==="polygon")h.splice(a,0,[i,n]);else if(u==="inset"){var d=ly.indexOf(a),p=uy.indexOf(a),v=c.length;if(fy(c,h,8,d,p,i,n,h[4][0],h[4][1],h[0][0],h[0][1]),v===c.length)return}else return;var g=pl(t,s,h),m="".concat(u,"(").concat(g.join(f),")");ct(t,"onClip",Ct(t,e,I({clipEventType:"added",clipType:u,poses:h,clipStyles:g,clipStyle:m,distX:0,distY:0},ce({clipPath:m},e))))}function my(t,e){var r=e.datas,i=r.clipPath,n=r.clipIndex,o=i,s=o.type,a=o.poses,l=o.splitter,u=a.map(function(d){return d.pos}),c=u.length;if(s==="polygon")a.splice(n,1),u.splice(n,1);else if(s==="inset"){if(n<8||(cy(a,u,n,8,c),c===a.length))return}else return;var f=pl(t,i,u),h="".concat(s,"(").concat(f.join(l),")");ct(t,"onClip",Ct(t,e,I({clipEventType:"removed",clipType:s,poses:u,clipStyles:f,clipStyle:h,distX:0,distY:0},ce({clipPath:h},e))))}var yy={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var r=t.props,i=r.customClipPath,n=r.defaultClipPath,o=r.clipArea,s=r.zoom,a=r.groupable,l=t.getState(),u=l.target,c=l.width,f=l.height,h=l.allMatrix,d=l.is3d,p=l.left,v=l.top,g=l.pos1,m=l.pos2,y=l.pos3,x=l.pos4,C=l.clipPathState,w=l.snapBoundInfos,b=l.rotation;if(!u||a)return[];var _=qu(u,c,f,n||"inset",C||i);if(!_)return[];var S=d?4:3,M=_.type,T=_.poses,B=T.map(function(L){var N=Gt(h,L.pos,S);return[N[0]-p,N[1]-v]}),k=[],E=[],R=M==="rect",A=M==="inset",G=M==="polygon";if(R||A||G){var F=A?B.slice(0,8):B;E=F.map(function(L,N){var W=N===0?F[F.length-1]:F[N-1],$=Wt(W,L),j=Fh(W,L);return e.createElement("div",{key:"clipLine".concat(N),className:dt("line","clip-line","snap-control"),"data-clip-index":N,style:{width:"".concat(j,"px"),transform:"translate(".concat(W[0],"px, ").concat(W[1],"px) rotate(").concat($,"rad) scaleY(").concat(s,")")}})})}if(k=B.map(function(L,N){return e.createElement("div",{key:"clipControl".concat(N),className:dt("control","clip-control","snap-control"),"data-clip-index":N,style:{transform:"translate(".concat(L[0],"px, ").concat(L[1],"px) rotate(").concat(b,"rad) scale(").concat(s,")")}})}),A&&k.push.apply(k,tt([],O(B.slice(8).map(function(L,N){return e.createElement("div",{key:"clipRadiusControl".concat(N),className:dt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+N,style:{transform:"translate(".concat(L[0],"px, ").concat(L[1],"px) rotate(").concat(b,"rad) scale(").concat(s,")")}})})),!1)),M==="circle"||M==="ellipse"){var z=_.left,U=_.top,q=_.radiusX,H=_.radiusY,et=O(pt(Gt(h,[z,U],S),Gt(h,[0,0],S)),2),ot=et[0],it=et[1],st="none";if(!o){for(var Q=Math.max(10,q/5,H/5),lt=[],ht=0;ht<=Q;++ht){var gt=Math.PI*2/Q*ht;lt.push([q+(q-s)*Math.cos(gt),H+(H-s)*Math.sin(gt)])}lt.push([q,-2]),lt.push([-2,-2]),lt.push([-2,H*2+2]),lt.push([q*2+2,H*2+2]),lt.push([q*2+2,-2]),lt.push([q,-2]),st="polygon(".concat(lt.map(function(L){return"".concat(L[0],"px ").concat(L[1],"px")}).join(", "),")")}k.push(e.createElement("div",{key:"clipEllipse",className:dt("clip-ellipse","snap-control"),style:{width:"".concat(q*2,"px"),height:"".concat(H*2,"px"),clipPath:st,transform:"translate(".concat(-p+ot,"px, ").concat(-v+it,"px) ").concat(Vo(h))}}))}if(o){var xt=Ee(tt([g,m,y,x],O(B),!1)),rt=xt.width,ft=xt.height,D=xt.left,P=xt.top;if(G||R||A){var lt=A?B.slice(0,8):B;k.push(e.createElement("div",{key:"clipArea",className:dt("clip-area","snap-control"),style:{width:"".concat(rt,"px"),height:"".concat(ft,"px"),transform:"translate(".concat(D,"px, ").concat(P,"px)"),clipPath:"polygon(".concat(lt.map(function(N){return"".concat(N[0]-D,"px ").concat(N[1]-P,"px")}).join(", "),")")}}))}}return w&&["vertical","horizontal"].forEach(function(L){var N=w[L],W=L==="horizontal";N.isSnap&&E.push.apply(E,tt([],O(N.snap.posInfos.map(function($,j){var V=$.pos,K=pt(Gt(h,W?[0,V]:[V,0],S),[p,v]),Y=pt(Gt(h,W?[c,V]:[V,f],S),[p,v]);return rn(e,"",K,Y,s,"clip".concat(L,"snap").concat(j),"guideline")})),!1)),N.isBound&&E.push.apply(E,tt([],O(N.bounds.map(function($,j){var V=$.pos,K=pt(Gt(h,W?[0,V]:[V,0],S),[p,v]),Y=pt(Gt(h,W?[c,V]:[V,f],S),[p,v]);return rn(e,"",K,Y,s,"clip".concat(L,"bounds").concat(j),"guideline","bounds","bold")})),!1))}),tt(tt([],O(k),!1),O(E),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var r=t.props,i=r.dragWithClip,n=i===void 0?!0:i;return n?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,I(I({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,i=t.props,n=i.defaultClipPath,o=i.customClipPath,s=r.target,a=r.width,l=r.height,u=e.inputEvent?e.inputEvent.target:null,c=u&&u.getAttribute("class")||"",f=e.datas,h=qu(s,a,l,n||"inset",o);if(!h)return!1;var d=h.clipText,p=h.type,v=h.poses,g=ct(t,"onClipStart",Ct(t,e,{clipType:p,clipStyle:d,poses:v.map(function(m){return m.pos})}));return g===!1?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,f.clipPath=h,f.isClipStart=!0,r.clipPathState=d,Ur(t,e),!0)},dragControl:function(t,e){var r,i,n,o=e.datas,s=e.originalDatas,a=e.isDragTarget;if(!o.isClipStart)return!1;var l=o,u=l.isControl,c=l.isLine,f=l.isArea,h=l.clipIndex,d=l.clipPath;if(!d)return!1;var p=$r(t.props,"clippable"),v=p.keepRatio,g=0,m=0,y=s.draggable,x=Ue(e);a&&y?(r=O(y.prevBeforeDist,2),g=r[0],m=r[1]):(i=O(x,2),g=i[0],m=i[1]);var C=[g,m],w=t.state,b=w.width,_=w.height,S=!f&&!u&&!c,M=d.type,T=d.poses,B=d.splitter,k=T.map(function(It){return It.pos});S&&(g=-g,m=-m);var E=!u||T[h].direction==="nesw",R=M==="inset"||M==="rect",A=T.map(function(){return[0,0]});if(u&&!E){var G=T[h],F=G.horizontal,z=G.vertical,U=[g*X(F),m*X(z)];A=vy(T,h,U,R,v)}else E&&(A=k.map(function(){return[g,m]}));var q=k.map(function(It,se){return Et(It,A[se])}),H=tt([],O(q),!1);w.snapBoundInfos=null;var et=d.type==="circle",ot=d.type==="ellipse";if(et||ot){var it=Ee(q),st=X(it.bottom-it.top),Q=X(ot?it.right-it.left:st),lt=q[0][1]+st,ht=q[0][0]-Q,gt=q[0][0]+Q;et&&(H.push([gt,it.bottom]),A.push([1,0])),H.push([it.left,lt]),A.push([0,1]),H.push([ht,it.bottom]),A.push([1,0])}var xt=Rh((p.clipHorizontalGuidelines||[]).map(function(It){return Tt("".concat(It),_)}),(p.clipVerticalGuidelines||[]).map(function(It){return Tt("".concat(It),b)}),b,_),rt=[],ft=[];if(et||ot)rt=[H[4][0],H[2][0]],ft=[H[1][1],H[3][1]];else if(R){var D=[H[0],H[2],H[4],H[6]],P=[A[0],A[2],A[4],A[6]];rt=D.filter(function(It,se){return P[se][0]}).map(function(It){return It[0]}),ft=D.filter(function(It,se){return P[se][1]}).map(function(It){return It[1]})}else rt=H.filter(function(It,se){return A[se][0]}).map(function(It){return It[0]}),ft=H.filter(function(It,se){return A[se][1]}).map(function(It){return It[1]});var L=[0,0],N=Ou(xt,p.clipTargetBounds&&{left:0,top:0,right:b,bottom:_},rt,ft,5,5),W=N.horizontal,$=N.vertical,j=W.offset,V=$.offset;if(W.isBound&&(L[1]+=j),$.isBound&&(L[0]+=V),(ot||et)&&A[0][0]===0&&A[0][1]===0){var it=Ee(q),K=it.bottom-it.top,Y=ot?it.right-it.left:K,nt=$.isBound?X(V):$.snapIndex===0?-V:V,ut=W.isBound?X(j):W.snapIndex===0?-j:j;Y-=nt,K-=ut,et&&(K=Eh($,W)>0?K:Y,Y=K);var at=H[0];H[1][1]=at[1]-K,H[2][0]=at[0]+Y,H[3][1]=at[1]+K,H[4][0]=at[0]-Y}else if(R&&v&&u){var vt=O(nd(T),2),yt=vt[0],Dt=vt[1],Bt=yt&&Dt?yt/Dt:0,Vt=T[h],te=Vt.direction||"",He=H[1][1],lt=H[5][1],ht=H[7][0],gt=H[3][0];X(j)<=X(V)?j=ue(j)*X(V)/Bt:V=ue(V)*X(j)*Bt,te.indexOf("w")>-1?ht-=V:te.indexOf("e")>-1?gt-=V:(ht+=V/2,gt-=V/2),te.indexOf("n")>-1?He-=j:te.indexOf("s")>-1?lt-=j:(He+=j/2,lt-=j/2);var _n=bo(He,gt,lt,ht);H.forEach(function(Cl,xd){var Xo;Xo=O(_n[xd].pos,2),Cl[0]=Xo[0],Cl[1]=Xo[1]})}else H.forEach(function(It,se){var xl=A[se];xl[0]&&(It[0]-=V),xl[1]&&(It[1]-=j)});var ir=pl(t,d,q),Zr="".concat(M,"(").concat(ir.join(B),")");if(w.clipPathState=Zr,et||ot)rt=[H[4][0],H[2][0]],ft=[H[1][1],H[3][1]];else if(R){var D=[H[0],H[2],H[4],H[6]];rt=D.map(function(se){return se[0]}),ft=D.map(function(se){return se[1]})}else rt=H.map(function(It){return It[0]}),ft=H.map(function(It){return It[1]});if(w.snapBoundInfos=Ou(xt,p.clipTargetBounds&&{left:0,top:0,right:b,bottom:_},rt,ft,1,1),y){var oe=w.is3d,Ce=w.allMatrix,kn=oe?4:3,Yo=L;a&&(Yo=[C[0]+L[0]-x[0],C[1]+L[1]-x[1]]),y.deltaOffset=Pt(Ce,[Yo[0],Yo[1],0,0],kn)}return ct(t,"onClip",Ct(t,e,I({clipEventType:"changed",clipType:M,poses:q,clipStyle:Zr,clipStyles:ir,distX:g,distY:m},ce((n={},n[M==="rect"?"clip":"clipPath"]=Zr,n),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,i=e.datas,n=e.isDouble,o=i.isLine,s=i.isClipStart,a=i.isControl;return s?(ct(t,"onClipEnd",xe(t,e,{})),n&&(a?my(t,e):o&&gy(t,e)),n||r):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},by={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Kt(e.inputEvent.target,dt("origin"))},dragControlStart:function(t,e){var r=e.datas;Ur(t,e);var i=Ct(t,e,{dragStart:le.dragStart(t,new gi().dragStart([0,0],e))}),n=ct(t,"onDragOriginStart",i);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,n===!1?(r.isDragOrigin=!1,!1):i},dragControl:function(t,e){var r=e.datas,i=e.isPinch,n=e.isRequest;if(!r.isDragOrigin)return!1;var o=O(Ue(e),2),s=o[0],a=o[1],l=t.state,u=l.width,c=l.height,f=l.offsetMatrix,h=l.targetMatrix,d=l.is3d,p=t.props.originRelative,v=p===void 0?!0:p,g=d?4:3,m=[s,a];if(n){var y=e.distOrigin;(y[0]||y[1])&&(m=y)}var x=Et(r.startOrigin,m),C=Et(r.startTargetOrigin,m),w=pt(m,r.prevOrigin),b=Sn(f,h,x,g),_=t.getRect(),S=Ee(qr(b,u,c,g)),M=[_.left-S.left,_.top-S.top];r.prevOrigin=m;var T=[Be(C[0],u,v),Be(C[1],c,v)].join(" "),B=le.drag(t,Cn(e,t.state,M,!!i)),k=Ct(t,e,I(I({width:u,height:c,origin:x,dist:m,delta:w,transformOrigin:T,drag:B},ce({transformOrigin:T,transform:B.transform},e)),{afterTransform:B.transform}));return ct(t,"onDragOrigin",k),k},dragControlEnd:function(t,e){var r=e.datas;return r.isDragOrigin?(ct(t,"onDragOriginEnd",xe(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);return!!r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return r?(t.transformOrigin=r.transformOrigin,!0):!1},request:function(t){var e={},r=t.getRect(),i=0,n=0,o=r.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaOrigin"in a?(s[0]+=a.deltaOrigin[0],s[1]+=a.deltaOrigin[1]):"origin"in a?(s[0]=a.origin[0]-o[0],s[1]=a.origin[1]-o[1]):("x"in a?i=a.x-r.left:"deltaX"in a&&(i+=a.deltaX),"y"in a?n=a.y-r.top:"deltaY"in a&&(n+=a.deltaY)),{datas:e,distX:i,distY:n,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function xy(t,e,r,i){var n=t.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,o=t.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,s=-1;if(e===0&&(n===0?s=0:n===1&&(s=1)),e===2&&(n<=2?s=2:n<=3&&(s=3)),e===3&&(o===0?s=4:o<4&&(s=7)),e===1&&(o<=1?s=5:o<=2&&(s=6)),!(s===-1||!t[s].virtual)){var a=t[s];Cy(t,s),s<4?a.pos[0]=r:a.pos[1]=i}}function Cy(t,e){e<4?t.slice(0,e+1).forEach(function(r){r.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(r){r.virtual=!1}))}function Sy(t,e){e<4?t.slice(e,4).forEach(function(r){r.virtual=!0}):t.slice(e).forEach(function(r){r.virtual=!0})}function Ku(t,e,r,i,n){i===void 0&&(i=[0,0]);var o=[];return!t||t==="0px"?o=[]:o=Sr(t),id(o,e,r,0,0,i,n)}function Zu(t,e,r,i,n){var o=t.state,s=o.width,a=o.height,l=dl(n,t.props.roundRelative,s,a),u=l.raws,c=l.styles,f=l.radiusPoses,h=hy(f,u),d=h.horizontals,p=h.verticals,v=c.join(" ");o.borderRadiusState=v;var g=Ct(t,e,I({horizontals:d,verticals:p,borderRadius:v,width:s,height:a,delta:i,dist:r},ce({borderRadius:v},e)));return ct(t,"onRound",g),g}function Ju(t){var e,r,i=t.getState().style,n=i.borderRadius||"";if(!n&&t.props.groupable){var o=t.moveables[0],s=t.getTargets()[0];s&&((o==null?void 0:o.props.target)===s?(n=(r=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&r!==void 0?r:"",i.borderRadius=n):(n=ll(s).borderRadius,i.borderRadius=n))}return n}var wy={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?dt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var r=t.getState(),i=r.target,n=r.width,o=r.height,s=r.allMatrix,a=r.is3d,l=r.left,u=r.top,c=r.borderRadiusState,f=t.props,h=f.minRoundControls,d=h===void 0?[0,0]:h,p=f.maxRoundControls,v=p===void 0?[4,4]:p,g=f.zoom,m=f.roundPadding,y=m===void 0?0:m,x=f.isDisplayShadowRoundControls,C=f.groupable;if(!i)return null;var w=c||Ju(t),b=a?4:3,_=Ku(w,n,o,d,!0);if(!_)return null;var S=0,M=0,T=C?[0,0]:[l,u];return _.map(function(B,k){var E=B.horizontal,R=B.vertical,A=B.direction||"",G=tt([],O(B.pos),!1);M+=Math.abs(E),S+=Math.abs(R),E&&A.indexOf("n")>-1&&(G[1]-=y),R&&A.indexOf("w")>-1&&(G[0]-=y),E&&A.indexOf("s")>-1&&(G[1]+=y),R&&A.indexOf("e")>-1&&(G[0]+=y);var F=pt(Gt(s,G,b),T),z=x&&x!=="horizontal",U=B.vertical?S<=v[1]&&(z||!B.virtual):M<=v[0]&&(x||!B.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(k),className:dt("control","border-radius",B.vertical?"vertical":"",B.virtual?"virtual":""),"data-radius-index":k,style:{display:U?"block":"none",transform:"translate(".concat(F[0],"px, ").concat(F[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var r=e.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var r=e.inputEvent,i=e.datas,n=r.target,o=n.getAttribute("class")||"",s=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,l=s?parseInt(n.getAttribute("data-radius-index"),10):-1,u=-1;if(a){var c=n.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!a)return!1;var f=Ct(t,e,{}),h=ct(t,"onRoundStart",f);if(h===!1)return!1;i.lineIndex=u,i.controlIndex=l,i.isControl=s,i.isLine=a,Ur(t,e);var d=t.props,p=d.roundRelative,v=d.minRoundControls,g=v===void 0?[0,0]:v,m=t.state,y=m.width,x=m.height;i.isRound=!0,i.prevDist=[0,0];var C=Ju(t),w=Ku(C||"",y,x,g,!0)||[];return i.controlPoses=w,m.borderRadiusState=dl(w,p,y,x).styles.join(" "),f},dragControl:function(t,e){var r=e.datas,i=r.controlPoses;if(!r.isRound||!r.isControl||!i.length)return!1;var n=r.controlIndex,o=O(Ue(e),2),s=o[0],a=o[1],l=[s,a],u=pt(l,r.prevDist),c=t.props.maxRoundControls,f=c===void 0?[4,4]:c,h=t.state,d=h.width,p=h.height,v=i[n],g=v.vertical,m=v.horizontal,y=i.map(function(C){var w=C.horizontal,b=C.vertical,_=[w*m*l[0],b*g*l[1]];if(w){if(f[0]===1)return _;if(f[0]<4&&w!==m)return _}else{if(f[1]===0)return _[1]=b*m*l[0]/d*p,_;if(g){if(f[1]===1)return _;if(f[1]<4&&b!==g)return _}}return[0,0]});y[n]=l;var x=i.map(function(C,w){return I(I({},C),{pos:Et(C.pos,y[w])})});return n<4?x.slice(0,n+1).forEach(function(C){C.virtual=!1}):x.slice(4,n+1).forEach(function(C){C.virtual=!1}),r.prevDist=[s,a],Zu(t,e,l,u,x)},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var i=e.datas,n=e.isDouble;if(!i.isRound)return!1;var o=i.isControl,s=i.controlIndex,a=i.isLine,l=i.lineIndex,u=i.controlPoses,c=u.filter(function(m){var y=m.virtual;return y}).length,f=t.props.roundClickable,h=f===void 0?!0:f;if(n&&h){if(o&&(h===!0||h==="control"))Sy(u,s);else if(a&&(h===!0||h==="line")){var d=O(lh(t,e),2),p=d[0],v=d[1];xy(u,l,p,v)}c!==u.filter(function(m){var y=m.virtual;return y}).length&&Zu(t,e,[0,0],[0,0],u)}var g=xe(t,e,{});return ct(t,"onRoundEnd",g),r.borderRadiusState="",g},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);if(!r)return!1;var i=t.moveables,n=t.props.targets,o=Ne(t,"roundable",e),s=I({targets:t.props.targets,events:o.map(function(a,l){return I(I({},a),{target:n[l],moveable:i[l],currentTarget:i[l]})})},r);return ct(t,"onRoundGroupStart",s),r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);if(!r)return!1;var i=t.moveables,n=t.props.targets,o=Ne(t,"roundable",e),s=I({targets:t.props.targets,events:o.map(function(a,l){return I(I(I({},a),{target:n[l],moveable:i[l],currentTarget:i[l]}),ce({borderRadius:r.borderRadius},a))})},r);return ct(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var r=t.moveables,i=t.props.targets,n=Ne(t,"roundable",e);jo(t,"onRound",function(a){var l=I({targets:t.props.targets,events:n.map(function(u,c){return I(I(I({},u),{target:i[c],moveable:r[c],currentTarget:r[c]}),ce({borderRadius:a.borderRadius},u))})},a);ct(t,"onRoundGroup",l)});var o=this.dragControlEnd(t,e);if(!o)return!1;var s=I({targets:t.props.targets,events:n.map(function(a,l){var u;return I(I({},a),{target:i[l],moveable:r[l],currentTarget:r[l],lastEvent:(u=a.datas)===null||u===void 0?void 0:u.lastEvent})})},o);return ct(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function _y(t,e){var r=e?4:3,i=At(r),n="matrix".concat(e?"3d":"","(").concat(i.join(","),")");return t===n||t==="matrix(1,0,0,1,0,0)"}var od={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var r=t.state,i=r.is3d,n=r.targetMatrix,o=r.inlineTransform,s=i?"matrix3d(".concat(n.join(","),")"):"matrix(".concat(qf(n,!0),")"),a=!o||o==="none"?s:o;e.datas.startTransforms=_y(a,i)?[]:Sr(a)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return Ct(t,e,{setTransform:function(r){e.datas.startTransforms=Ht(r)?r:Sr(r)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return Ct(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),ct(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),ct(t,"onBeforeRender",Ct(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),ct(t,"onBeforeRenderEnd",Ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var i=Ne(t,"beforeRenderable",e),n=t.moveables,o=i.map(function(s,a){var l=n[a];return r.setTransform(l,s),r.resetStyle(s),r.fillDragStartParams(l,s)});ct(t,"onBeforeRenderGroupStart",Ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var i=Ne(t,"beforeRenderable",e),n=t.moveables,o=i.map(function(s,a){var l=n[a];return r.resetStyle(s),r.fillDragParams(l,s)});ct(t,"onBeforeRenderGroup",Ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),ct(t,"onBeforeRenderGroupEnd",Ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},sd={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){ct(t,"onRenderStart",Ct(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){ct(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){ct(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){ct(t,"onRenderGroupStart",Ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,i=Ne(t,"beforeRenderable",e),n=t.moveables,o=i.map(function(s,a){var l=n[a];return r.fillDragParams(l,s)});ct(t,"onRenderGroup",Ct(t,e,I(I({isPinch:!!e.isPinch,targets:t.props.targets,transform:Fn(e),transformObject:{}},ce(Hn(e))),{events:o})))},dragGroupEnd:function(t,e){var r=this,i=Ne(t,"beforeRenderable",e),n=t.moveables,o=i.map(function(s,a){var l=n[a];return r.fillDragEndParams(l,s)});ct(t,"onRenderGroupEnd",Ct(t,e,I({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o,transformObject:{},transform:Fn(e)},ce(Hn(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var r={};return vi(fo(e)||[]).forEach(function(i){r[i.name]=i.functionValue}),Ct(t,e,I({isPinch:!!e.isPinch,transformObject:r,transform:Fn(e)},ce(Hn(e))))},fillDragEndParams:function(t,e){var r={};return vi(fo(e)||[]).forEach(function(i){r[i.name]=i.functionValue}),Ct(t,e,I({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:r,transform:Fn(e)},ce(Hn(e))))}};function Yi(t,e,r,i,n,o,s){o.clientDistX=o.distX,o.clientDistY=o.distY;var a=n==="Start",l=n==="End",u=n==="After",c=t.state.target,f=o.isRequest,h=i.indexOf("Control")>-1;if(!c||a&&h&&!f&&t.areaElement===o.inputEvent.target)return!1;var d=tt([],O(e),!1);if(f){var p=o.requestAble;d.some(function(k){return k.name===p})||d.push.apply(d,tt([],O(t.props.ables.filter(function(k){return k.name===p})),!1))}if(!d.length||d.every(function(k){return k.dragRelation}))return!1;var v=o.inputEvent,g;l&&v&&(g=document.elementFromPoint(o.clientX,o.clientY)||v.target);var m=!1,y=function(){var k;m=!0,(k=o.stop)===null||k===void 0||k.call(o)},x=a&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());x&&t.updateRect(n,!0,!1);var C=o.datas,w=h?"controlGesto":"targetGesto",b=t[w],_=function(k,E,R){if(!(E in k)||b!==t[w])return!1;var A=k.name,G=C[A]||(C[A]={});if(a&&(G.isEventStart=!R||!k[R]||k[R](t,o)),!G.isEventStart)return!1;var F=k[E](t,I(I({},o),{stop:y,datas:G,originalDatas:C,inputTarget:g}));return t._emitter.off(),a&&F===!1&&(G.isEventStart=!1),F};x&&d.forEach(function(k){k.unset&&k.unset(t)}),_(od,"drag".concat(i).concat(n));var S=0,M=0;r.forEach(function(k){if(m)return!1;var E="".concat(k).concat(i).concat(n),R="".concat(k).concat(i,"Condition");n===""&&!f&&Xm(t.state,o);var A=d.filter(function(z){return z[E]});A=A.filter(function(z,U){return z.name&&A.indexOf(z)===U});var G=A.filter(function(z){return _(z,E,R)}),F=G.length;m&&++S,F&&++M,!m&&a&&A.length&&!F&&(S+=A.filter(function(z){var U=z.name,q=C[U];return q.isEventStart?z.dragRelation!=="strong":!1}).length?1:0)}),(!u||M)&&_(sd,"drag".concat(i).concat(n));var T=b!==t[w]||S===r.length;if((l||m||T)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(k){k.state.gestos={}}),d.forEach(function(k){k.unset&&k.unset(t)})),a&&!T&&!f&&M&&t.props.preventDefault&&(o==null||o.preventDefault()),t.isUnmounted||T)return!1;if(!a&&M&&!s||l){var B=t.props.flushSync||zh;B(function(){t.updateRect(l?n:"",!0,!1),t.forceUpdate()})}return!a&&!l&&!u&&M&&!s&&Yi(t,e,r,i,n+"After",o),!0}function vl(t,e){return function(r,i){var n;i===void 0&&(i=r.inputEvent.target);var o=i,s=t.areaElement,a=t._dragTarget;return!a||!e&&(!((n=t.controlGesto)===null||n===void 0)&&n.isFlag())?!1:o===a||a.contains(o)||o===s||!t.isMoveableElement(o)&&!t.controlBox.contains(o)||Kt(o,"moveable-area")||Kt(o,"moveable-padding")||Kt(o,"moveable-edgeDraggable")}}function ad(t,e,r){var i=t.controlBox,n=[],o=t.props,s=o.dragArea,a=t.state.target,l=o.dragTarget;n.push(i),(!s||l)&&n.push(e),!s&&l&&a&&e!==a&&o.dragTargetSelf&&n.push(a);var u=vl(t);return ud(t,n,"targetAbles",r,{dragStart:u,pinchStart:u})}function ld(t,e){var r=t.controlBox,i=[];i.push(r);var n=vl(t,!0),o=function(s,a){if(a===void 0&&(a=s.inputEvent.target),a===r)return!0;var l=n(s,a);return!l};return ud(t,i,"controlAbles",e,{dragStart:o,pinchStart:o})}function ud(t,e,r,i,n){n===void 0&&(n={});var o=r==="targetAbles",s=t.props,a=s.pinchOutside,l=s.pinchThreshold,u=s.preventClickEventOnDrag,c=s.preventClickDefault,f=s.checkInput,h=s.dragFocusedInput,d=s.preventDefault,p=d===void 0?!0:d,v=s.preventRightClick,g=v===void 0?!0:v,m=s.preventWheelClick,y=m===void 0?!0:m,x=s.dragContainer,C=Ye(x,!0),w={preventDefault:p,preventRightClick:g,preventWheelClick:y,container:C||br(t.getControlBoxElement()),pinchThreshold:l,pinchOutside:a,preventClickEventOnDrag:o?u:!1,preventClickEventOnDragStart:o?c:!1,preventClickEventByCondition:o?null:function(S){return t.controlBox.contains(S.target)},checkInput:o?f:!1,dragFocusedInput:h},b=new Z0(e,w),_=i==="Control";return["drag","pinch"].forEach(function(S){["Start","","End"].forEach(function(M){b.on("".concat(S).concat(M),function(T){var B,k=T.eventType,E=S==="drag"&&T.isPinch;if(n[k]&&!n[k](T)){T.stop();return}if(!E){var R=S==="drag"?[S]:["drag",S],A=tt([],O(t[r]),!1),G=Yi(t,A,R,i,M,T);G?(t.props.stopPropagation||M==="Start"&&_)&&((B=T==null?void 0:T.inputEvent)===null||B===void 0||B.stopPropagation()):T.stop()}})})}),b}var ky=function(){function t(e,r,i){var n=this;this.target=e,this.moveable=r,this.eventName=i,this.ables=[],this._onEvent=function(o){var s=n.eventName,a=n.moveable;a.state.disableNativeEvent||n.ables.forEach(function(l){l[s](a,{inputEvent:o})})},e.addEventListener(i.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Ey(t,e,r,i){var n;r===void 0&&(r=e);var o=ph(t,e),s=o.matrixes,a=o.is3d,l=o.targetMatrix,u=o.transformOrigin,c=o.targetOrigin,f=o.offsetContainer,h=o.hasFixed,d=o.zoom,p=F1(f,r),v=p.matrixes,g=p.is3d,m=p.offsetContainer,y=p.zoom,x=i,C=4,w=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,b=l,_=At(C),S=At(C),M=At(C),T=At(C),B=s.length,k=v.map(function(U){return I(I({},U),{matrix:U.matrix?tt([],O(U.matrix),!1):void 0})}).reverse();s.reverse(),!a&&x&&(b=Fe(b,3,4),na(s)),!g&&x&&na(k),k.forEach(function(U){S=Pt(S,U.matrix,C)});var E=r||kr(t),R=((n=k[0])===null||n===void 0?void 0:n.target)||nn(E,E,!0).offsetParent,A=k.slice(1).reduce(function(U,q){return Pt(U,q.matrix,C)},At(C));s.forEach(function(U,q){if(B-2===q&&(M=_.slice()),B-1===q&&(T=_.slice()),!U.matrix){var H=s[q+1],et=Vm(U,H,R,C,Pt(A,_,C));U.matrix=Vr(et,C)}_=Pt(_,U.matrix,C)});var G=!w&&a;b||(b=At(G?4:3));var F=Vo(w&&b.length===16?Fe(b,4,3):b,G),z=S;return S=Xf(S,C,C),{hasZoom:d!==1||y!==1,hasFixed:h,matrixes:s,rootMatrix:S,originalRootMatrix:z,beforeMatrix:M,offsetMatrix:T,allMatrix:_,targetMatrix:b,targetTransform:F,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:c,is3d:x,offsetContainer:f,offsetRootContainer:m}}function My(t,e,r,i){r===void 0&&(r=e);var n=0,o=0,s=0,a={},l=Hh(t);if(t&&(n=l.offsetWidth,o=l.offsetHeight),t){var u=Ey(t,e,r,i),c=fi(u.allMatrix,u.transformOrigin,n,o);a=I(I({},u),c);var f=fi(u.allMatrix,[50,50],100,100);s=Wh([f.pos1,f.pos2],f.direction)}var h=4;return I(I(I({hasZoom:!1,width:n,height:o,rotation:s},l),{originalRootMatrix:At(h),rootMatrix:At(h),beforeMatrix:At(h),offsetMatrix:At(h),allMatrix:At(h),targetMatrix:At(h),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!i,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function la(t,e,r,i,n,o){o===void 0&&(o=[]);var s=1,a=[0,0],l=Vn(),u=Vn(),c=Vn(),f=Vn(),h=[0,0],d={},p=My(e,r,n,!0);if(e){var v=ye(e);o.forEach(function(k){d[k]=v(k)});var g=p.is3d?4:3,m=fi(p.offsetMatrix,Et(p.transformOrigin,Uf(p.targetMatrix,g)),p.width,p.height);s=m.direction,a=Et(m.origin,[m.left-p.left,m.top-p.top]),f=$i(p.offsetRootContainer);var y=nn(i,i,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var x=fi(Pt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),C=fi(p.originalRootMatrix,go(ye(y)("transformOrigin")).map(function(k){return parseFloat(k)}),y.offsetWidth,y.offsetHeight);if(l=ys(x,f),c=ys(C,f,y,!0),t){var w=x.left,b=x.top;u=ys({left:w,top:b,bottom:b,right:b},f)}}else{l=$i(e),c=G1(y),t&&(u=$i(t));var _=c.left,S=c.top,M=c.clientLeft,T=c.clientTop,B=[l.left-_,l.top-S];h=pt(bi(p.rootMatrix,B,4),[M+p.left,T+p.top])}}return I({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:f,beforeDirection:s,beforeOrigin:a,originalBeforeOrigin:a,target:e,style:d,offsetDelta:h},p)}function Qu(t){var e=t.pos1,r=t.pos2,i=t.pos3,n=t.pos4;if(!e||!r||!i||!n)return null;var o=jr([e,r,i,n]),s=[o.minX,o.minY],a=pt(t.origin,s);return e=pt(e,s),r=pt(r,s),i=pt(i,s),n=pt(n,s),I(I({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:r,pos3:i,pos4:n,origin:a,beforeOrigin:a,isPersisted:!0})}var xi=function(t){bn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state=I({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},la(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new yn,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var i=r.props.parentMoveable;if(i){i.checkUpdateRect();return}Wg(r._observerId),r._observerId=Cf(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(i){i.stopPropagation(),i.preventDefault()},r}return e.prototype.render=function(){var r=this.props,i=this.getState(),n=r.parentPosition,o=r.className,s=r.target,a=r.zoom,l=r.cspNonce,u=r.translateZ,c=r.cssStyled,f=r.groupable,h=r.linePadding,d=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=O(n||[0,0],2),v=p[0],g=p[1],m=i.left,y=i.top,x=i.target,C=i.direction,w=i.hasFixed,b=i.offsetDelta,_=r.targets,S=this.isDragging(),M={};this.getEnabledAbles().forEach(function(A){M["data-able-".concat(A.name.toLowerCase())]=!0});var T=this._getAbleClassName(),B=_&&_.length&&(x||f)||s||!this._hasFirstTarget&&this.state.isPersisted,k=this.controlBox||this.props.firstRenderState||this.props.persistData,E=[m-v,y-g];!f&&r.useAccuratePosition&&(E[0]+=b[0],E[1]+=b[1]);var R={position:w?"fixed":"absolute",display:B?"block":"none",visibility:k?"visible":"hidden",transform:"translate3d(".concat(E[0],"px, ").concat(E[1],"px, ").concat(u,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return h&&(R["--moveable-line-padding"]=h),d&&(R["--moveable-control-padding"]=d),ze(c,I({cspNonce:l,ref:Ze(this,"controlBox"),className:"".concat(dt("control-box",C===-1?"reverse":"",S?"dragging":"")," ").concat(T," ").concat(o)},M,{onClick:this._onPreventClick,style:R}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,i=r.parentMoveable,n=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!n&&!i&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},e.prototype.componentWillUnmount=function(){var r,i;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(i=this._mutationObserver)===null||i===void 0||i.disconnect();var n=this._viewContainer;n&&this._changeAbleViewClassNames([]),ni(this,!1),ni(this,!0);var o=this.events;for(var s in o){var a=o[s];a&&a.destroy()}},e.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},e.prototype.getAble=function(r){var i=this.props.ables||[];return me(i,function(n){return n.name===r})},e.prototype.getContainer=function(){var r=this.props,i=r.parentMoveable,n=r.wrapperMoveable,o=r.container;return o||n&&n.getContainer()||i&&i.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(r){var i;return r&&(((i=r.getAttribute)===null||i===void 0?void 0:i.call(r,"class"))||"").indexOf(Ka)>-1},e.prototype.dragStart=function(r,i){i===void 0&&(i=r.target);var n=this.targetGesto,o=this.controlGesto;return n&&vl(this)({inputEvent:r},i)?n.isFlag()||n.triggerDragStart(r):o&&this.isMoveableElement(i)&&(o.isFlag()||o.triggerDragStart(r)),this},e.prototype.hitTest=function(r){var i=this.state,n=i.target,o=i.pos1,s=i.pos2,a=i.pos3,l=i.pos4,u=i.targetClientRect;if(!n)return 0;var c;if(Ei(r)){var f=r.getBoundingClientRect();c={left:f.left,top:f.top,width:f.width,height:f.height}}else c=I({width:0,height:0},r);var h=c.left,d=c.top,p=c.width,v=c.height,g=Su([o,s,l,a],u),m=$0(g,[[h,d],[h+p,d],[h+p,d+v],[h,d+v]]),y=Jf(g);return!m||!y?0:Math.min(100,m/y*100)},e.prototype.isInside=function(r,i){var n=this.state,o=n.target,s=n.pos1,a=n.pos2,l=n.pos3,u=n.pos4,c=n.targetClientRect;return o?$s([r,i],Su([s,a,u,l],c)):!1},e.prototype.updateRect=function(r,i,n){n===void 0&&(n=!0);var o=this.props,s=!o.parentPosition&&!o.wrapperMoveable;s&&mi(!0);var a=o.parentMoveable,l=this.state,u=l.target||o.target,c=this.getContainer(),f=a?a._rootContainer:this._rootContainer,h=la(this.controlBox,u,c,c,f||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&o.persistData){var d=Qu(o.persistData);for(var p in d)h[p]=d[p]}s&&mi(),this.updateState(h,a?!1:n)},e.prototype.isDragging=function(r){var i,n,o=this.targetGesto,s=this.controlGesto;if(o!=null&&o.isFlag()){if(!r)return!0;var a=o.getEventData();return!!(!((i=a[r])===null||i===void 0)&&i.isEventStart)}if(s!=null&&s.isFlag()){if(!r)return!0;var a=s.getEventData();return!!(!((n=a[r])===null||n===void 0)&&n.isEventStart)}return!1},e.prototype.updateTarget=function(r){this.updateRect(r,!0)},e.prototype.getRect=function(){var r=this.state,i=De(this.state),n=O(i,4),o=n[0],s=n[1],a=n[2],l=n[3],u=Ee(i),c=r.width,f=r.height,h=u.width,d=u.height,p=u.left,v=u.top,g=[r.left,r.top],m=Et(g,r.origin),y=Et(g,r.beforeOrigin),x=r.transformOrigin;return{width:h,height:d,left:p,top:v,pos1:o,pos2:s,pos3:a,pos4:l,offsetWidth:c,offsetHeight:f,beforeOrigin:y,origin:m,transformOrigin:x,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(r){if(!r||r==="target"){var i=this.targetGesto;(i==null?void 0:i.isIdle())===!1&&oa(this,!1),i==null||i.stop()}if(!r||r==="control"){var i=this.controlGesto;(i==null?void 0:i.isIdle())===!1&&oa(this,!0),i==null||i.stop()}},e.prototype.getRotation=function(){var r=this.state,i=r.pos1,n=r.pos2,o=r.direction;return Km(i,n,o)},e.prototype.request=function(r,i,n){i===void 0&&(i={});var o=this,s=o.props,a=s.parentMoveable||s.wrapperMoveable||o,l=a.props.ables,u=s.groupable,c=me(l,function(m){return m.name===r});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var f=c.request(o),h=n||i.isInstant,d=f.isControl?"controlAbles":"targetAbles",p="".concat(u?"Group":"").concat(f.isControl?"Control":""),v=tt([],O(a[d]),!1),g={request:function(m){return Yi(o,v,["drag"],p,"",I(I({},f.request(m)),{requestAble:r,isRequest:!0}),h),g},requestEnd:function(){return Yi(o,v,["drag"],p,"End",I(I({},f.requestEnd()),{requestAble:r,isRequest:!0}),h),g}};return Yi(o,v,["drag"],p,"Start",I(I({},f.requestStart(i)),{requestAble:r,isRequest:!0}),h),h?g.request(i).requestEnd():g},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var r=this.getState(),i=this.props,n=i.padding,o=r.originalBeforeOrigin,s=r.transformOrigin,a=r.allMatrix,l=r.is3d,u=r.pos1,c=r.pos2,f=r.pos3,h=r.pos4,d=r.left,p=r.top,v=r.isPersisted,g=i.zoom||1;if(!n&&g<=1){r.renderPoses=[u,c,f,h],r.renderLines=[[u,c],[c,h],[h,f],[f,u]];return}var m=Jh(n||{}),y=m.left,x=m.top,C=m.bottom,w=m.right,b=l?4:3,_=[];v?_=s:this.controlBox&&i.groupable?_=o:_=Et(o,[d,p]);var S=uo(b,Vr(_.map(function(R){return-R}),b),a,Vr(s,b)),M=we(S,u,[-y,-x],b),T=we(S,c,[w,-x],b),B=we(S,f,[-y,C],b),k=we(S,h,[w,C],b);if(r.renderPoses=[M,T,B,k],r.renderLines=[[M,T],[T,k],[k,B],[B,M]],g){var E=g/2;r.renderLines=[[we(S,u,[-y-E,-x],b),we(S,c,[w+E,-x],b)],[we(S,c,[w,-x-E],b),we(S,h,[w,C+E],b)],[we(S,h,[w+E,C],b),we(S,f,[-y-E,C],b)],[we(S,f,[-y,C+E],b),we(S,u,[-y,-x-E],b)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,i=r.target,n=r.container,o=r.parentMoveable,s=this.state,a=s.target,l=s.container;if(!(!a&&!i)){this.updateAbles();var u=!sa(a,i),c=u||!sa(l,n);if(c){var f=n||this.controlBox;f&&this.unsetAbles(),this.updateState({target:i,container:n}),!o&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(r,i){var n=this.props;if(this._emitter.trigger(r,i),n.parentMoveable&&i.isRequest&&!i.isRequestChild)return n.parentMoveable.triggerEvent(r,i,!0);var o=n[r];return o&&o(i)},e.prototype.useCSS=function(r,i){var n=this.props.customStyledMap,o=r+i;return n[o]||(n[o]=eh(r,i)),n[o]},e.prototype.getState=function(){var r,i=this.props;(i.target||!((r=i.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var n=this.controlBox,o=i.persistData,s=i.firstRenderState;if(s&&!n)return s;if(!this._hasFirstTarget&&o){var a=Qu(o);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(i){i.unset&&i.unset(r)})},e.prototype.updateAbles=function(r,i){r===void 0&&(r=this.props.ables),i===void 0&&(i="");var n=this.props,o=n.triggerAblesSimultaneously,s=this.getEnabledAbles(r),a="drag".concat(i,"Start"),l="pinch".concat(i,"Start"),u="drag".concat(i,"ControlStart"),c=jn(s,[a,l],o),f=jn(s,[u],o);this.enabledAbles=s,this.targetAbles=c,this.controlAbles=f},e.prototype.updateState=function(r,i){if(i){if(this.isUnmounted)return;this.setState(r)}else{var n=this.state;for(var o in r)n[o]=r[o]}},e.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var i=this.props;return r.filter(function(n){return n&&(n.always&&i[n.name]!==!1||i[n.name])})},e.prototype.renderAbles=function(){var r=this,i=this.props,n=i.triggerAblesSimultaneously,o={createElement:ze};return this.renderState={},Ym(Uh(jn(this.getEnabledAbles(),["render"],n).map(function(s){var a=s.render;return a(r,o)||[]})).filter(function(s){return s}),function(s){var a=s.key;return a}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(i,n){var o,s,a=(s=(o=n.requestStyle)===null||o===void 0?void 0:o.call(n))!==null&&s!==void 0?s:[];return tt(tt([],O(i),!1),O(a),!1)},tt([],O(this.props.requestStyles||[]),!1));return r},e.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},e.prototype._updateEvents=function(){var r=this.targetAbles.length,i=this.controlAbles.length,n=this._dragTarget,o=!r&&this.targetGesto||this._isTargetChanged(!0);o&&(ni(this,!1),this.updateState({gestos:{}})),i||ni(this,!0),n&&r&&!this.targetGesto&&(this.targetGesto=ad(this,n,"")),!this.controlGesto&&i&&(this.controlGesto=ld(this,"Control"))},e.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=Ye(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var r=this.props,i=r,n=i.zoom,o=i.hideDefaultLines,s=i.hideChildMoveableDefaultLines,a=i.parentMoveable;if(o||a&&s)return[];var l=this.getState(),u={createElement:ze};return l.renderLines.map(function(c,f){return rn(u,"",c[0],c[1],n,"render-line-".concat(f))})},e.prototype._isTargetChanged=function(r){var i=this.props,n=i.dragTarget||i.target,o=this._prevOriginalDragTarget,s=this._prevDragArea,a=i.dragArea,l=!a&&o!==n,u=(r||a)&&s!==a;return l||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var r=this,i=this.props,n=i.dragArea?this.areaElement:this.state.target,o=this.events,s=er(o);if(this._isTargetChanged())for(var a in o){var l=o[a];l&&l.destroy(),o[a]=null}if(n){var u=this.enabledAbles;s.forEach(function(c){var f=jn(u,[c]),h=f.length>0,d=o[c];if(!h){d&&(d.destroy(),o[c]=null);return}d||(d=new ky(n,r,c),o[c]=d),d.setAbles(f)})}},e.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=Ye(r,!0))},e.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=Ye(r,!0));var i=this._viewContainer;i&&this._changeAbleViewClassNames(tt(tt([],O(this._getAbleViewClassNames()),!1),[this.isDragging()?iy:""],!1))},e.prototype._changeAbleViewClassNames=function(r){var i=this._viewContainer,n=Xh(r.filter(Boolean),function(u){return u}).map(function(u){var c=O(u,1),f=c[0];return f}),o=this._viewClassNames,s=dn(o,n),a=s.removed,l=s.added;a.forEach(function(u){Ef(i,o[u])}),l.forEach(function(u){kf(i,n[u])}),this._viewClassNames=n},e.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(i){var n;return((n=i.viewClassName)===null||n===void 0?void 0:n.call(i,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(r){var i=this;r===void 0&&(r="");var n=this.getEnabledAbles(),o=this.targetGesto,s=this.controlGesto,a=o!=null&&o.isFlag()?o.getEventData():{},l=s!=null&&s.isFlag()?s.getEventData():{};return n.map(function(u){var c,f,h,d=u.name,p=((c=u.className)===null||c===void 0?void 0:c.call(u,i))||"";return(!((f=a[d])===null||f===void 0)&&f.isEventStart||!((h=l[d])===null||h===void 0)&&h.isEventStart)&&(p+=" ".concat(dt("".concat(d).concat(r,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(r){var i,n=this.props,o=n.target,s=br(this.getControlBoxElement());if(!s.ResizeObserver||!o||!n.useResizeObserver){(i=this._reiszeObserver)===null||i===void 0||i.disconnect();return}if(!(r.target===o&&this._reiszeObserver)){var a=new s.ResizeObserver(this.checkUpdateRect);a.observe(o,{box:"border-box"}),this._reiszeObserver=a}},e.prototype._updateMutationObserver=function(r){var i=this,n,o=this.props,s=o.target,a=br(this.getControlBoxElement());if(!a.MutationObserver||!s||!o.useMutationObserver){(n=this._mutationObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===s&&this._mutationObserver)){var l=new a.MutationObserver(function(u){var c,f;try{for(var h=l1(u),d=h.next();!d.done;d=h.next()){var p=d.value;p.type==="attributes"&&p.attributeName==="style"&&i.checkUpdateRect()}}catch(v){c={error:v}}finally{try{d&&!d.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}});l.observe(s,{attributes:!0}),this._mutationObserver=l}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:zh,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(Of),gl={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var r,i=t.props,n=i.targets||[],o=t.getState(),s=o.left,a=o.top,l=o.isPersisted,u=i.zoom||1,c=t.renderGroupRects,f=((r=i.persistData)===null||r===void 0?void 0:r.children)||[];l?n=f.map(function(){return null}):f=[];var h=oi(t,"parentPosition",[s,a],function(p){return p.join(",")}),d=oi(t,"requestStyles",t.getRequestChildStyles(),function(p){return p.join(",")});return t.moveables=t.moveables.slice(0,n.length),tt(tt([],O(n.map(function(p,v){return e.createElement(xi,{key:"moveable"+v,ref:mf(t,"moveables",v),target:p,origin:!1,requestStyles:d,cssStyled:i.cssStyled,customStyledMap:i.customStyledMap,useResizeObserver:i.useResizeObserver,useMutationObserver:i.useMutationObserver,hideChildMoveableDefaultLines:i.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,a],persistData:f[v],zoom:u})})),!1),O(Uh(c.map(function(p,v){var g=p.pos1,m=p.pos2,y=p.pos3,x=p.pos4,C=[g,m,y,x];return[[0,1],[1,3],[3,2],[2,0]].map(function(w,b){var _=O(w,2),S=_[0],M=_[1];return rn(e,"",pt(C[S],h),pt(C[M],h),u,"group-rect-".concat(v,"-").concat(b))})}))),!1)}},Dy=xn("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.props.target,i=e.inputEvent,n=e.inputTarget,o=t.isMoveableElement(n),s=!o&&t.controlBox.contains(n);if(!(!i||!n||e.isDrag||t.isMoveableElement(n)||s)){var a=r.contains(n);ct(t,"onClick",Ct(t,e,{isDouble:e.isDouble,inputTarget:n,isTarget:r===n,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var r=e.inputEvent,i=e.inputTarget;if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||e.datas.inputTarget===i)){var n=t.props.targets,o=n.indexOf(i),s=o>-1,a=!1;o===-1&&(o=tr(n,function(l){return l.contains(i)}),a=o>-1),ct(t,"onClickGroup",Ct(t,e,{isDouble:e.isDouble,targets:n,inputTarget:i,targetIndex:o,isTarget:s,containsTarget:a,moveableTarget:n[o]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Jr(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),I(I({},t),{datas:e})}var Ty=xn("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var r=t.props,i=r.edgeDraggable;return i?mh(e,"edgeDraggable",i,t.getState().renderPoses,r.zoom):[]},dragCondition:function(t,e){var r,i=t.props,n=(r=e.inputEvent)===null||r===void 0?void 0:r.target;return!i.edgeDraggable||!n?!1:!i.draggable&&Kt(n,dt("direction"))&&Kt(n,dt("edge"))&&Kt(n,dt("edgeDraggable"))},dragStart:function(t,e){return le.dragStart(t,Jr(e))},drag:function(t,e){return le.drag(t,Jr(e))},dragEnd:function(t,e){return le.dragEnd(t,Jr(e))},dragGroupCondition:function(t,e){var r,i=t.props,n=(r=e.inputEvent)===null||r===void 0?void 0:r.target;return!i.edgeDraggable||!n?!1:!i.draggable&&Kt(n,dt("direction"))&&Kt(n,dt("line"))},dragGroupStart:function(t,e){return le.dragGroupStart(t,Jr(e))},dragGroup:function(t,e){return le.dragGroup(t,Jr(e))},dragGroupEnd:function(t,e){return le.dragGroupEnd(t,Jr(e))},unset:function(t){return le.unset(t)}}),cd={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},ml=[od,ed,Om,Jm,le,Ty,ea,Qm,ey,vm,sy,ay,ny,by,yy,wy,gl,cd,Dy,td,sd],Py=ml.reduce(function(t,e){return(e.events||[]).forEach(function(r){_f(t,r)}),t},[]),By=ml.reduce(function(t,e){return(e.props||[]).forEach(function(r){_f(t,r)}),t},[]);function tc(t,e){var r=O(t,3),i=r[0],n=r[1],o=r[2];return(i*e[0]+n*e[1]+o)/Math.sqrt(i*i+n*n)}function Xn(t,e){var r=O(t,2),i=r[0],n=r[1];return-i*e[0]-n*e[1]}function ec(t,e){return Math.max.apply(Math,tt([],O(t.map(function(r){var i=O(r,4),n=i[0],o=i[1],s=i[2],a=i[3];return Math.max(n[e],o[e],s[e],a[e])})),!1))}function rc(t,e){return Math.min.apply(Math,tt([],O(t.map(function(r){var i=O(r,4),n=i[0],o=i[1],s=i[2],a=i[3];return Math.min(n[e],o[e],s[e],a[e])})),!1))}function Iy(t,e){var r,i,n,o=[0,0],s=[0,0],a=[0,0],l=[0,0],u=0,c=0;if(!t.length)return{pos1:o,pos2:s,pos3:a,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:e};var f=bt(e,fe);if(f%90){var h=f/180*Math.PI,d=Math.tan(h),p=-1/d,v=[Zs,ku],g=[[0,0],[0,0]],m=[Zs,ku],y=[[0,0],[0,0]];t.forEach(function(ot){ot.forEach(function(it){var st=tc([-d,1,0],it),Q=tc([-p,1,0],it);v[0]>st&&(g[0]=it,v[0]=st),v[1]<st&&(g[1]=it,v[1]=st),m[0]>Q&&(y[0]=it,m[0]=Q),m[1]<Q&&(y[1]=it,m[1]=Q)})});var x=O(g,2),C=x[0],w=x[1],b=O(y,2),_=b[0],S=b[1],M=[-d,1,Xn([-d,1],C)],T=[-d,1,Xn([-d,1],w)],B=[-p,1,Xn([-p,1],_)],k=[-p,1,Xn([-p,1],S)];r=O([[M,B],[M,k],[T,B],[T,k]].map(function(ot){var it=O(ot,2),st=it[0],Q=it[1];return Ua(st,Q)[0]}),4),o=r[0],s=r[1],a=r[2],l=r[3],u=m[1]-m[0],c=v[1]-v[0]}else{var E=rc(t,0),R=rc(t,1),A=ec(t,0),G=ec(t,1);if(o=[E,R],s=[A,R],a=[E,G],l=[A,G],u=A-E,c=G-R,f%180){var F=[a,o,l,s];i=O(F,4),o=i[0],s=i[1],a=i[2],l=i[3],u=G-R,c=A-E}}if(f%360>180){var F=[l,a,s,o];n=O(F,4),o=n[0],s=n[1],a=n[2],l=n[3]}var z=jr([o,s,a,l]),U=z.minX,q=z.minY,H=z.maxX,et=z.maxY;return{pos1:o,pos2:s,pos3:a,pos4:l,width:u,height:c,minX:U,minY:q,maxX:H,maxY:et,rotation:e}}function fd(t,e){var r=e.map(function(i){if(Ht(i)){var n=fd(t,i),o=n.length;return o>1?n:o===1?n[0]:null}else{var s=me(t,function(a){var l=a.manager;return l.props.target===i});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return r.length===1&&Ht(r[0])?r[0]:r}var Oy=function(t){bn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.differ=new Zf,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(r,i,n){var o;n===void 0&&(n=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;mi(!0),this.moveables.forEach(function(ht){ht.updateRect(r,!1,!1)});var a=this.props,l=this.moveables,u=s.target||a.target,c=l.map(function(ht){return{finded:!1,manager:ht}}),f=this.props.targetGroups||[],h=fd(c,f),d=a.useDefaultGroupRotate;h.push.apply(h,tt([],O(c.filter(function(ht){var gt=ht.finded;return!gt}).map(function(ht){var gt=ht.manager;return gt})),!1));var p=[],v=!i||r!==""&&a.updateGroup,g=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(o=a.persistData)===null||o===void 0?void 0:o.rotation;m!=null&&(g=m)}function y(ht,gt,xt){var rt=ht.map(function($){if(Ht($)){var j=y($,gt),V=[j.pos1,j.pos2,j.pos3,j.pos4];return p.push(j),{poses:V,rotation:j.rotation}}else return{poses:De($.state),rotation:$.getRotation()}}),ft=rt.map(function($){var j=$.rotation;return j}),D=0,P=ft[0],L=ft.every(function($){return Math.abs(P-$)<.1});v?D=!d&&L?P:g:D=!d&&!xt&&L?P:gt;var N=rt.map(function($){var j=$.poses;return j}),W=Iy(N,D);return W}var x=y(h,this.rotation,!0);v&&(this.rotation=x.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=p;var C=this.transformOrigin,w=this.rotation,b=this.scale,_=x.width,S=x.height,M=x.minX,T=x.minY,B=Zm([[0,0],[_,0],[0,S],[_,S]],hl(C,_,S),this.rotation/180*Math.PI),k=jr(B.result),E=k.minX,R=k.minY,A=" rotate(".concat(w,"deg)")+" scale(".concat(ue(b[0]),", ").concat(ue(b[1]),")"),G="translate(".concat(-E,"px, ").concat(-R,"px)").concat(A);this.controlBox.style.transform="translate3d(".concat(M,"px, ").concat(T,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(C,";")+"width:".concat(_,"px;height:").concat(S,"px;")+"transform: ".concat(G),s.width=_,s.height=S;var F=this.getContainer(),z=la(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||F,[]),U=[z.left,z.top],q=O(De(z),4),H=q[0],et=q[1],ot=q[2],it=q[3],st=jr([H,et,ot,it]),Q=[st.minX,st.minY],lt=ue(b[0]*b[1]);z.pos1=pt(H,Q),z.pos2=pt(et,Q),z.pos3=pt(ot,Q),z.pos4=pt(it,Q),z.left=M-z.left+Q[0],z.top=T-z.top+Q[1],z.origin=pt(Et(U,z.origin),Q),z.beforeOrigin=pt(Et(U,z.beforeOrigin),Q),z.originalBeforeOrigin=Et(U,z.originalBeforeOrigin),z.transformOrigin=pt(Et(U,z.transformOrigin),Q),u.style.transform="translate(".concat(-E-Q[0],"px, ").concat(-R-Q[1],"px)")+A,mi(),this.updateState(I(I({},z),{posDelta:Q,direction:lt,beforeDirection:lt}),n)},e.prototype.getRect=function(){return I(I({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},e.prototype.triggerEvent=function(r,i,n){if(n||r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,i);this._emitter.trigger(r,i)},e.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(i,n){var o,s,a=(s=(o=n.requestChildStyle)===null||o===void 0?void 0:o.call(n))!==null&&s!==void 0?s:[];return tt(tt([],O(i),!1),O(a),!1)},[]);return r},e.prototype.getMoveables=function(){return tt([],O(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,tt(tt([],O(this.props.ables),!1),[gl],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Ye(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var r=this.state,i=this.props,n=this._prevDragTarget,o=i.dragTarget||this.areaElement,s=i.targets,a=this.differ.update(s),l=a.added,u=a.changed,c=a.removed,f=l.length||c.length;(f||this._prevOriginalDragTarget!==this._originalDragTarget)&&(ni(this,!1),ni(this,!0),this.updateState({gestos:{}})),n!==o&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=ad(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=ld(this,"GroupControl")));var h=!sa(r.container,i.container);h&&(r.container=i.container),(h||f||this.transformOrigin!==(i.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!Zh(this._targetGroups,i.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},e.prototype._updateObserver=function(){},e.defaultProps=I(I({},xi.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(xi),Ry=function(t){bn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.moveables=[],r}return e.prototype.render=function(){var r=this,i,n=this.props,o=n.cspNonce,s=n.cssStyled,a=n.persistData,l=n.targets||[],u=l.length,c=this.isUnmounted||!u,f=(i=a==null?void 0:a.children)!==null&&i!==void 0?i:[];return c&&!u&&f.length?l=f.map(function(){return null}):c||(f=[]),ze(s,{cspNonce:o,ref:Ze(this,"controlBox"),className:dt("control-box")},l.map(function(h,d){var p,v,g=(v=(p=n.individualGroupableProps)===null||p===void 0?void 0:p.call(n,h,d))!==null&&v!==void 0?v:{};return ze(xi,I({key:"moveable"+d,ref:mf(r,"moveables",d)},n,g,{target:h,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[d]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(r,i,n){n===void 0&&(n=!0),mi(!0),this.moveables.forEach(function(o){o.updateRect(r,i,n)}),mi()},e.prototype.getRect=function(){return I(I({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},e.prototype.request=function(r,i,n){i===void 0&&(i={});var o=this.moveables.map(function(l){return l.request(r,I(I({},i),{isInstant:!1}),!1)}),s=n||i.isInstant,a={request:function(l){return o.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return o.forEach(function(l){return l.requestEnd()}),this}};return s?a.request(i).requestEnd():a},e.prototype.dragStart=function(r,i){i===void 0&&(i=r.target);var n=i,o=me(this.moveables,function(s){var a=s.getTargets()[0],l=s.getControlBoxElement(),u=s.getDragElement();return!a||!u?!1:u===n||u.contains(n)||u!==a&&a===n||a.contains(n)||l===n||l.contains(n)});return o&&o.dragStart(r,i),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return tt([],O(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(xi);function hd(t,e){var r=[];return t.forEach(function(i){if(i){if(ie(i)){e[i]&&r.push.apply(r,tt([],O(e[i]),!1));return}Ht(i)?r.push.apply(r,tt([],O(hd(i,e)),!1)):r.push(i)}}),r}function dd(t,e){var r=[];return t.forEach(function(i){if(i){if(ie(i)){e[i]&&r.push.apply(r,tt([],O(e[i]),!1));return}Ht(i)?r.push(dd(i,e)):r.push(i)}}),r}function pd(t,e){return t.length!==e.length||t.some(function(r,i){var n=e[i];return!r&&!n?!1:r!=n?Ht(r)&&Ht(n)?pd(r,n):!0:!1})}var Ay=function(t){bn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new Zf,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return e.makeStyled=function(){var r={},i=this.getTotalAbles();i.forEach(function(o){var s=o.css;s&&s.forEach(function(a){r[a]=!0})});var n=er(r).join(`
`);this.defaultStyled=eh("div",Pg(Ka,b1+n))},e.getTotalAbles=function(){return tt([ed,gl,cd,td],O(this.defaultAbles),!1)},e.prototype.render=function(){var r,i=this.constructor;i.defaultStyled||i.makeStyled();var n=this.props,o=n.ables,s=n.props,a=s1(n,["ables","props"]),l=O(this._updateRefs(!0),2),u=l[0],c=l[1],f=hd(u,c),h=f.length>1,d=i.getTotalAbles(),p=tt(tt([],O(d),!1),O(o||[]),!1),v=I(I(I({},a),s||{}),{ables:p,cssStyled:i.defaultStyled,customStyledMap:i.customStyledMap});this._elementTargets=f;var g=null,m=this.moveable,y=a.persistData;if(y!=null&&y.children&&(h=!0),a.individualGroupable)return ze(Ry,I({key:"individual-group",ref:Ze(this,"moveable")},v,{target:null,targets:f}));if(h){var x=dd(u,c);if(m&&!m.props.groupable&&!m.props.individualGroupable){var C=m.props.target;C&&f.indexOf(C)>-1&&(g=I({},m.state))}return ze(Oy,I({key:"group",ref:Ze(this,"moveable")},v,(r=a.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:f,targetGroups:x,firstRenderState:g}))}else{var w=f[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var b=m.moveables||[],_=me(b,function(S){return S.props.target===w});_&&(g=I({},_.state))}return ze(xi,I({key:"single",ref:Ze(this,"moveable")},v,{target:w,firstRenderState:g}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var r,i;return(i=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&i!==void 0?i:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var r=this,i;return this._onChangeTargets=function(){r._onChangeTargets=null,i()},new Promise(function(n){i=n})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(r){var i=this.refTargets,n=fl(this.props.target||this.props.targets),o=typeof document<"u",s=pd(i,n),a=this.selectorMap,l={};return this.refTargets.forEach(function u(c){if(ie(c)){var f=a[c];f?l[c]=a[c]:o&&(s=!0,l[c]=[].slice.call(document.querySelectorAll(c)))}else Ht(c)&&c.forEach(u)}),this._tmpRefTargets=n,this._tmpSelectorMap=l,[n,l,!r&&s]},e.prototype._checkChangeTargets=function(){var r,i,n;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var o=this._differ.update(this._elementTargets),s=o.added,a=o.removed,l=s.length||a.length;l&&((i=(r=this.props).onChangeTargets)===null||i===void 0||i.call(r,{moveable:this.moveable,targets:this._elementTargets}),(n=this._onChangeTargets)===null||n===void 0||n.call(this));var u=O(this._updateRefs(),3),c=u[0],f=u[1],h=u[2];this.refTargets=c,this.selectorMap=f,h&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,a1([Bg(ah)],e.prototype,"moveable",void 0),e}(Of),Ly=function(t){bn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=ml,e}(Ay),ua=function(t,e){return ua=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},ua(t,e)};function yl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ua(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var on=function(){return on=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},on.apply(this,arguments)};function zy(t,e,r,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,r,o):s(e,r))||o);return n>3&&o&&Object.defineProperty(e,r,o),o}var Ny=function(t){yl(e,t);function e(i){var n=t.call(this,i)||this;return n.state={},n.state=n.props,n}var r=e.prototype;return r.render=function(){return ze(Ly,on({ref:Ze(this,"moveable")},this.state))},e}(Wa),xo=By,vd=ah,gd=Py,Gy=function(t){yl(e,t);function e(i,n){n===void 0&&(n={});var o=t.call(this)||this;o.containerProvider=null,o.selfElement=null,o._warp=!1;var s=on({},n),a={};gd.forEach(function(c){a[Hg("on ".concat(c))]=function(f){return o.trigger(c,f)}});var l;n.warpSelf?(delete n.warpSelf,o._warp=!0,l=i):(l=ki(i).createElement("div"),i.appendChild(l)),o.containerProvider=bu(ze(Ny,on({ref:Ze(o,"innerMoveable")},s,a)),l),o.selfElement=l;var u=s.target;return Ht(u)&&u.length>1&&o.updateRect(),o}var r=e.prototype;return r.setState=function(i,n){this.innerMoveable.setState(i,n)},r.forceUpdate=function(i){this.innerMoveable.forceUpdate(i)},r.dragStart=function(i,n){n===void 0&&(n=i.target);var o=this.innerMoveable;o.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(i,n)},r.destroy=function(){var i,n=this.selfElement;bu(null,n,this.containerProvider),this._warp||(i=n==null?void 0:n.parentElement)===null||i===void 0||i.removeChild(n),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},e=zy([cu(vd,function(i,n){i[n]||(i[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=this.getMoveable();if(!(!a||!a[n]))return a[n].apply(a,o)})}),cu(xo,function(i,n){Object.defineProperty(i,n,{get:function(){return this.getMoveable().props[n]},set:function(o){var s;this.setState((s={},s[n]=o,s))},enumerable:!0,configurable:!0})})],e),e}(yn),Fy=function(t){yl(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Gy);const md={};vd.forEach(t=>{md[t]=function(...e){return this.$_moveable[t](...e)}});const yd={};xo.forEach(t=>{yd[t]=function(e){this.$_moveable[t]=e}});const Hy=Ep({name:"moveable",methods:md,props:xo,watch:yd,mounted(){const t={},e=this.$props;xo.forEach(o=>{const s=e[o];fn(s)||(t[o]=e[o])});const i=this.$refs.moveableElement,n=new Fy(i,{...t,warpSelf:!0});gd.forEach(o=>{n.on(o,s=>{this.$emit(o,{...s})})}),this.$_moveable=n},beforeUnmount(){this.$_moveable.destroy()}}),Wy=Hy,Vy=(t,e)=>{const r=t.__vccOpts||t;for(const[i,n]of e)r[i]=n;return r},jy={ref:"moveableElement"};function $y(t,e,r,i,n,o){return St(),_t("div",jy,null,512)}const Yy=Vy(Wy,[["render",$y]]),ic="/StickerEditor/assets/1-DOU5pnUw.jpg";var ca=function(t,e){return ca=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},ca(t,e)};function Xy(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ca(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Uy(t,e){return e={exports:{}},t(e,e.exports),e.exports}var wn=Uy(function(t,e){function r(l){if(l&&typeof l=="object"){var u=l.which||l.keyCode||l.charCode;u&&(l=u)}if(typeof l=="number")return s[l];var c=String(l),f=i[c.toLowerCase()];if(f)return f;var f=n[c.toLowerCase()];if(f)return f;if(c.length===1)return c.charCodeAt(0)}r.isEventKey=function(u,c){if(u&&typeof u=="object"){var f=u.which||u.keyCode||u.charCode;if(f==null)return!1;if(typeof c=="string"){var h=i[c.toLowerCase()];if(h)return h===f;var h=n[c.toLowerCase()];if(h)return h===f}else if(typeof c=="number")return c===f;return!1}},e=t.exports=r;var i=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},n=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(o=97;o<123;o++)i[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)i[o-48]=o;for(o=1;o<13;o++)i["f"+o]=o+111;for(o=0;o<10;o++)i["numpad "+o]=o+96;var s=e.names=e.title={};for(o in i)s[i[o]]=o;for(var a in n)i[a]=n[a]});wn.code;wn.codes;wn.aliases;var qy=wn.names;wn.title;var nc={"+":"plus","left command":"meta","right command":"meta"},oc={shift:1,ctrl:2,alt:3,meta:4};function bd(t,e){var r=(qy[t]||e||"").toLowerCase();for(var i in nc)r=r.replace(i,nc[i]);return r.replace(/\s/g,"")}function Ky(t,e){e===void 0&&(e=bd(t.keyCode,t.key));var r=Zy(t);return r.indexOf(e)===-1&&r.push(e),r.filter(Boolean)}function Zy(t){var e=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return e.filter(Boolean)}function sc(t){var e=t.slice();return e.sort(function(r,i){var n=oc[r]||5,o=oc[i]||5;return n-o}),e}var ac,Cs=function(t){Xy(e,t);function e(i){i===void 0&&(i=window);var n=t.call(this)||this;return n.container=i,n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n.clear=function(){return n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n},n.keydownEvent=function(o){n.triggerEvent("keydown",o)},n.keyupEvent=function(o){n.triggerEvent("keyup",o)},n.blur=function(){n.clear(),n.trigger("blur")},$t(i,"blur",n.blur),$t(i,"keydown",n.keydownEvent),$t(i,"keyup",n.keyupEvent),n}var r=e.prototype;return Object.defineProperty(e,"global",{get:function(){return ac||(ac=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},r.destroy=function(){var i=this.container;this.clear(),this.off(),Ft(i,"blur",this.blur),Ft(i,"keydown",this.keydownEvent),Ft(i,"keyup",this.keyupEvent)},r.keydown=function(i,n){return this.addEvent("keydown",i,n)},r.offKeydown=function(i,n){return this.removeEvent("keydown",i,n)},r.offKeyup=function(i,n){return this.removeEvent("keyup",i,n)},r.keyup=function(i,n){return this.addEvent("keyup",i,n)},r.addEvent=function(i,n,o){return Ht(n)?this.on("".concat(i,".").concat(sc(n).join(".")),o):ie(n)?this.on("".concat(i,".").concat(n),o):this.on(i,n),this},r.removeEvent=function(i,n,o){return Ht(n)?this.off("".concat(i,".").concat(sc(n).join(".")),o):ie(n)?this.off("".concat(i,".").concat(n),o):this.off(i,n),this},r.triggerEvent=function(i,n){this.ctrlKey=n.ctrlKey,this.shiftKey=n.shiftKey,this.altKey=n.altKey,this.metaKey=n.metaKey;var o=bd(n.keyCode,n.key),s=o==="ctrl"||o==="shift"||o==="meta"||o==="alt",a={key:o,isToggle:s,inputEvent:n,keyCode:n.keyCode,ctrlKey:n.ctrlKey,altKey:n.altKey,shiftKey:n.shiftKey,metaKey:n.metaKey};this.trigger(i,a),this.trigger("".concat(i,".").concat(o),a);var l=Ky(n,o);l.length>1&&this.trigger("".concat(i,".").concat(l.join(".")),a)},e}(yn);const $o=(t,e)=>{const r=t.__vccOpts||t;for(const[i,n]of e)r[i]=n;return r},Jy={class:"flex flex-col items-center justify-center min-h-screen"},Qy={class:"bg-white shadow-2xl rounded-3xl p-8 transition-all duration-300"},tb={class:"relative group"},eb=["src"],rb=["data-id","onMousedown"],ib=["src"],nb=["onClick"],ob=sf('<svg width="4vw" height="4vh" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-cb417d2e><path d="M9.17065 4C9.58249 2.83481 10.6937 2 11.9999 2C13.3062 2 14.4174 2.83481 14.8292 4" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" data-v-cb417d2e></path><path d="M20.5 6H3.49988" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" data-v-cb417d2e></path><path d="M18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5M18.8334 8.5L18.6334 11.5" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" data-v-cb417d2e></path><path d="M9.5 11L10 16" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" data-v-cb417d2e></path><path d="M14.5 11L14 16" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" data-v-cb417d2e></path></svg>',1),sb=[ob],ab={class:"mt-8 flex items-center justify-center space-x-4"},lb=["href"],ub=1,cb=0,fb={__name:"Editor",props:["selectedImage"],emits:["newImage"],setup(t,{expose:e,emit:r}){Cs.setGlobal();let i=Ot(null),n=Ot(null),o=null;const s=be("selectedImage"),a=be("savedImages");be("images");const l=Ot([]),u=Ot(null),c=Pa(()=>l.value.length>0),f=t,h=async()=>{try{const B=await M();i.value.src=B,n.value.href=B,_()}catch(B){console.error("Merge failed",B)}},d=B=>{const k=new Image;k.onload=()=>{const E=i.value.getBoundingClientRect(),R=k.width/k.height,A=150,G=A/R,F={id:Date.now(),src:B,originalWidth:k.width,originalHeight:k.height,style:{position:"absolute",leftPercent:50,topPercent:50,widthPercent:A/E.width*100,heightPercent:G/E.height*100,transform:"translate(-50%, -50%) rotate(0deg) scale(1, 1)"}};l.value.push(F),Rc(()=>{u.value=F.id})},k.src=B},p=B=>{B.setFixedDirection([0,0])},v=({target:B,clientX:k,clientY:E})=>{const R=l.value.find(A=>A.id===parseInt(B.dataset.id));if(R&&i.value){const A=i.value.getBoundingClientRect(),G=B.getBoundingClientRect();let F=k-A.left,z=E-A.top;F=Math.max(G.width/2,Math.min(F,A.width-G.width/2)),z=Math.max(G.height/2,Math.min(z,A.height-G.height/2)),R.style.leftPercent=F/A.width*100,R.style.topPercent=z/A.height*100}},g=B=>{Cs.global.shiftKey?B.setFixedDirection([-1,-1]):B.setFixedDirection([0,0])},m=({target:B,width:k,height:E,drag:R})=>{const A=l.value.find(G=>G.id===parseInt(B.dataset.id));if(A&&i.value){const G=i.value.getBoundingClientRect(),F=A.originalWidth/A.originalHeight;let z=k,U=E;k/E>F?z=E*F:U=k/F;const q=z/G.width*100,H=U/G.height*100;A.style.widthPercent=q,A.style.heightPercent=H}B.style.cssText+=`width: ${k}px; height: ${E}px`,B.style.transform=R.transform},y=({target:B,rotate:k,transform:E})=>{const R=l.value.find(A=>A.id===parseInt(B.dataset.id));if(R){const G=R.style.transform.match(/scale\(([-\d.]+),\s*([-\d.]+)\)/),F=G?G[1]:"1",z=G?G[2]:"1";R.style.transform=`translate(-50%, -50%) rotate(${k}deg) scale(${F}, ${z})`}B.style.transform=E},x=B=>{B.setFixedDirection([0,0])},C=B=>{Cs.global.shiftKey?B.setFixedDirection([-1,-1]):B.setFixedDirection([0,0])},w=({target:B,drag:k})=>{B.style.transform=k.transform},b=B=>{l.value=l.value.filter(k=>k.id!==B),u.value===B&&(u.value=null)},_=()=>{l.value=[],u.value=null},S=B=>{u.value=B},M=()=>new Promise((B,k)=>{const E=document.createElement("canvas"),R=E.getContext("2d"),A=new Image;A.onload=()=>{E.width=A.width,E.height=A.height,R.drawImage(A,0,0);const G=l.value.map(F=>new Promise(z=>{const U=new Image;U.onload=()=>z(U),U.onerror=()=>z(null),U.src=F.src}));Promise.all(G).then(F=>{F.forEach((z,U)=>{if(z){const q=l.value[U],H=q.style.leftPercent,et=q.style.topPercent,ot=q.style.widthPercent,it=q.style.heightPercent,st=H/100*E.width,Q=et/100*E.height,lt=ot/100*E.width,ht=it/100*E.height;let gt=0,xt=1,rt=1;const ft=q.style.transform.match(/rotate\(([-\d.]+)deg\) scale\(([-\d.]+),\s*([-\d.]+)\)/);ft&&(gt=parseFloat(ft[1]),xt=parseFloat(ft[2]),rt=parseFloat(ft[3])),R.save(),R.translate(st,Q),R.rotate(gt*Math.PI/180);const D=z.width/z.height;let P=lt*xt,L=ht*rt;P/L>D?P=L*D:L=P/D,R.drawImage(z,-P/2,-L/2,P,L),R.restore()}}),B(E.toDataURL("image/png"))})},A.onerror=k,A.src=i.value.src}),T=async()=>{try{const B=await M();_();const k=new Dg(i.value);k.availableMarkerTypes=k.ALL_MARKER_TYPES,k.uiStyleSettings.redoButtonVisible=!0,k.uiStyleSettings.zoomButtonVisible=!0,k.uiStyleSettings.zoomOutButtonVisible=!0,k.uiStyleSettings.clearButtonVisible=!0,k.settings.displayMode="popup",k.settings.defaultColor=["#000000"],k.settings.defaultFontFamilies=["Poetsen One","Indie Flower","Dela Gothic One","DynaPuff","Pixelify Sans","Gluten","Teko"],k.addRenderEventListener(E=>{a.value.push(E),i.value.src=E,n.value.href=E}),i.value.src=B,n.value.href=B,k.show()}catch(B){console.error("Merge failed",B)}};return an(()=>{const B=document.createElement("canvas"),k=B.getContext("2d"),E=new Image;E.src=ic,E.onload=()=>{B.width=E.width,B.height=E.height,k.drawImage(E,0,0),o=B.toDataURL("image/png"),n.value.href=o}}),ci(()=>f.selectedImage,B=>{B&&(_(),i.value.src=B,n.value.href=B)}),ci(l,B=>{console.log(`Total stickers on canvas: ${B.length}`)},{deep:!0}),ci(s,B=>{B&&(i.value.src=B,n.value.href=B)}),e({addSticker:d,clearStickers:_}),(B,k)=>(St(),_t("div",Jy,[Z("div",Qy,[Z("div",tb,[Z("img",{class:"w-auto min-w-[30vw] max-w-[60vw] h-auto max-h-[75vh] object-contain rounded-2xl",ref_key:"imgRef",ref:i,src:dr(s)||dr(ic),alt:"Selected image"},null,8,eb),(St(!0),_t(Qt,null,Hr(l.value,E=>(St(),_t("div",{key:E.id,style:sn({position:"absolute",left:`${E.style.leftPercent}%`,top:`${E.style.topPercent}%`,width:`${E.style.widthPercent}%`,height:`${E.style.heightPercent}%`,transform:E.style.transform}),"data-id":E.id,class:"sticker",onMousedown:R=>S(E.id)},[Z("img",{src:E.src,class:"w-full h-full object-contain"},null,8,ib),Z("button",{onClick:R=>b(E.id),class:"delete-btn"},sb,8,nb)],44,rb))),128)),u.value?(St(),nf(dr(Yy),{key:0,class:"moveable",target:`.sticker[data-id='${u.value}']`,draggable:!0,rotatable:!0,resizable:!0,scalable:!0,origin:!1,keepRatio:!0,throttleDrag:ub,throttleResize:cb,renderDirections:["nw","n","ne","w","e","sw","s","se"],rotationPosition:"top",bounds:{left:0,top:0,bottom:0,right:0,position:"css"},onResizeStart:p,onDrag:v,onBeforeResize:g,onResize:m,onRotate:y,onScaleStart:x,onBeforeScale:C,onScale:w},null,8,["target"])):Le("",!0)])]),Z("div",ab,[c.value?(St(),_t("button",{key:0,onClick:h,class:"btn btn-primary"},"Confirm")):Le("",!0),c.value?(St(),_t("button",{key:1,onClick:_,class:"btn btn-secondary"},"Cancel")):Le("",!0),Z("button",{onClick:T,class:"btn btn-secondary"}," Edit "),Z("a",{ref_key:"downloadButton",ref:n,href:dr(o),download:"image.png",class:"btn btn-primary"}," Download ",8,lb)])]))}},hb=$o(fb,[["__scopeId","data-v-cb417d2e"]]),db="/StickerEditor/assets/1-0XuTPjLX.png",pb="/StickerEditor/assets/2-_Rhau_vo.png",vb="/StickerEditor/assets/3-BXcWFjNm.png",gb="/StickerEditor/assets/4-CnaXBGn_.png",mb="/StickerEditor/assets/5-BPu4JRbl.png",yb="/StickerEditor/assets/6-5kuDDrRc.png",bb="/StickerEditor/assets/7-DfN-oFdh.png",xb="/StickerEditor/assets/8-Bj-yLTE5.png",Cb="/StickerEditor/assets/9-Kmg3Xvyw.png",Sb="/StickerEditor/assets/1-Ou9kq26v.png",wb="/StickerEditor/assets/10-DPzYjYHE.png",_b="/StickerEditor/assets/11-B9PiGc_V.png",kb="/StickerEditor/assets/12-BbYRcrUk.png",Eb="/StickerEditor/assets/13-DJwzk_nl.png",Mb="/StickerEditor/assets/14-CS5Kdzt3.png",Db="/StickerEditor/assets/15-DXyN3WUN.png",Tb="/StickerEditor/assets/16-C3Y3DpeW.png",Pb="/StickerEditor/assets/2-y8hTwTlL.png",Bb="/StickerEditor/assets/3-BzoEux2N.png",Ib="/StickerEditor/assets/4-DtsCYvVE.png",Ob="/StickerEditor/assets/5-C2G1UFD-.png",Rb="/StickerEditor/assets/6-UwhDRNRc.png",Ab="/StickerEditor/assets/7-2SRv9blB.png",Lb="/StickerEditor/assets/8-Dlvo-EYw.png",zb="/StickerEditor/assets/9-BcT3doT3.png",Nb="/StickerEditor/assets/1-C_dVzUJw.png",Gb="/StickerEditor/assets/10-DM-uAshQ.png",Fb="/StickerEditor/assets/11-dAYIZZHJ.png",Hb="/StickerEditor/assets/12-B0u8bVQV.png",Wb="/StickerEditor/assets/2-CR4zqjtb.png",Vb="/StickerEditor/assets/3-BB2ak2Rb.png",jb="/StickerEditor/assets/4-BcNxVwD9.png",$b="/StickerEditor/assets/5-Cctr_rhW.png",Yb="/StickerEditor/assets/6-DlO3oQAX.png",Xb="/StickerEditor/assets/7-DHblHS9_.png",Ub="/StickerEditor/assets/8-DFf9YKOS.png",qb="/StickerEditor/assets/9-xsCYuuWp.png",Kb="/StickerEditor/assets/1-0XuTPjLX.png",Zb="/StickerEditor/assets/add2-RRQ8YQ0u.png",Jb="/StickerEditor/assets/add3-DWmAwVb9.png",Qb="/StickerEditor/assets/add4-DrcPqAIq.png",tx="/StickerEditor/assets/add5-BIXogDIN.png",ex="/StickerEditor/assets/add6-D0aQ2SaT.png",Kr=t=>(_a("data-v-d1d560d2"),t=t(),ka(),t),rx={class:"relative flex"},ix={class:"flex w-[10.5vw] justify-between"},nx={class:"text-[2.5vh] font-semibold text-gray-800"},ox=["onClick"],sx=["onWheel"],ax=["src","alt","onClick"],lx={class:"p-[1.5vh] space-y-[1vh]"},ux=Kr(()=>Z("h2",{class:"text-[2.5vh] font-semibold text-gray-800"},"CUSTOM STICKERS",-1)),cx={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded relative mb-4",role:"alert"},fx={class:"block sm:inline"},hx={key:1,class:"h-[15vh] flex justify-center items-center border-Tertiary border-2 border-dashed rounded-xl p-2"},dx=Kr(()=>Z("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"black"},[Z("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),px=Kr(()=>Z("span",{class:"text-black font-bold"},"Upload Sticker",-1)),vx=[dx,px],gx={key:2,class:"min-h-[15vh] p-2 grid grid-cols-3 gap-2 border-white border-2 border-dashed rounded-xl"},mx=["src","alt","onClick"],yx=["onClick"],bx=Kr(()=>Z("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Z("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),xx=[bx],Cx=Kr(()=>Z("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"black"},[Z("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),Sx=Kr(()=>Z("span",{class:"text-black font-bold"},"Add",-1)),wx=[Cx,Sx],_x=Kr(()=>Z("svg",{class:"w-[2.5vh] h-[2.5vh] text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[Z("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),kx=[_x],Ex={__name:"Sticker",props:{showCloseButton:{type:Boolean,default:!0}},emits:["close"],setup(t,{emit:e}){const r=be("handleStickerSelected"),i=e,n=Ot(!1),o=Ot([]),s=Ot(""),a=Ot(!1);function l(b,_){return new URL(Object.assign({"../../../assets/Images/sticker/Comic Stickers/1.png":db,"../../../assets/Images/sticker/Comic Stickers/2.png":pb,"../../../assets/Images/sticker/Comic Stickers/3.png":vb,"../../../assets/Images/sticker/Comic Stickers/4.png":gb,"../../../assets/Images/sticker/Comic Stickers/5.png":mb,"../../../assets/Images/sticker/Comic Stickers/6.png":yb,"../../../assets/Images/sticker/Comic Stickers/7.png":bb,"../../../assets/Images/sticker/Comic Stickers/8.png":xb,"../../../assets/Images/sticker/Comic Stickers/9.png":Cb,"../../../assets/Images/sticker/Reaction Stickers/1.png":Sb,"../../../assets/Images/sticker/Reaction Stickers/10.png":wb,"../../../assets/Images/sticker/Reaction Stickers/11.png":_b,"../../../assets/Images/sticker/Reaction Stickers/12.png":kb,"../../../assets/Images/sticker/Reaction Stickers/13.png":Eb,"../../../assets/Images/sticker/Reaction Stickers/14.png":Mb,"../../../assets/Images/sticker/Reaction Stickers/15.png":Db,"../../../assets/Images/sticker/Reaction Stickers/16.png":Tb,"../../../assets/Images/sticker/Reaction Stickers/2.png":Pb,"../../../assets/Images/sticker/Reaction Stickers/3.png":Bb,"../../../assets/Images/sticker/Reaction Stickers/4.png":Ib,"../../../assets/Images/sticker/Reaction Stickers/5.png":Ob,"../../../assets/Images/sticker/Reaction Stickers/6.png":Rb,"../../../assets/Images/sticker/Reaction Stickers/7.png":Ab,"../../../assets/Images/sticker/Reaction Stickers/8.png":Lb,"../../../assets/Images/sticker/Reaction Stickers/9.png":zb,"../../../assets/Images/sticker/Sticker Frames/1.png":Nb,"../../../assets/Images/sticker/Sticker Frames/10.png":Gb,"../../../assets/Images/sticker/Sticker Frames/11.png":Fb,"../../../assets/Images/sticker/Sticker Frames/12.png":Hb,"../../../assets/Images/sticker/Sticker Frames/2.png":Wb,"../../../assets/Images/sticker/Sticker Frames/3.png":Vb,"../../../assets/Images/sticker/Sticker Frames/4.png":jb,"../../../assets/Images/sticker/Sticker Frames/5.png":$b,"../../../assets/Images/sticker/Sticker Frames/6.png":Yb,"../../../assets/Images/sticker/Sticker Frames/7.png":Xb,"../../../assets/Images/sticker/Sticker Frames/8.png":Ub,"../../../assets/Images/sticker/Sticker Frames/9.png":qb,"../../../assets/Images/sticker/add1.png":Kb,"../../../assets/Images/sticker/add2.png":Zb,"../../../assets/Images/sticker/add3.png":Jb,"../../../assets/Images/sticker/add4.png":Qb,"../../../assets/Images/sticker/add5.png":tx,"../../../assets/Images/sticker/add6.png":ex})[`../../../assets/Images/sticker/${b}/${_}.png`],import.meta.url).href}const u={comic:["1","2","3","4","5","6","7","8","9"],frames:["1","2","3","4","5","6","7","8","9","10","11","12"],reactions:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"]},c=Ot({comic:u.comic.map(b=>({src:l("Comic Stickers",b),alt:`Comic Stickers ${b}`})),frames:u.frames.map(b=>({src:l("Sticker Frames",b),alt:`Sticker Frames ${b}`})),reactions:u.reactions.map(b=>({src:l("Reaction Stickers",b),alt:`Reaction Stickers ${b}`}))}),f=b=>{r(b)},h=(b,_)=>{if(v[_])return;b.preventDefault();const S=b.currentTarget;S.scrollLeft+=b.deltaY},d=t;function p(){n.value=!0,setTimeout(()=>{i("close")},200)}const v=ko({comic:!1,frames:!1,reactions:!1});function g(b){v[b]=!v[b]}const m=b=>{const _=b.target.files[0],S=5*1024*1024,M=new FileReader;if(_){if(_.type!=="image/png"){a.value=!0,s.value="Please upload PNG images only",setTimeout(()=>{a.value=!1,s.value=""},3e3);return}if(_.size>S){a.value=!0,s.value="File size should be less than 5MB",setTimeout(()=>{a.value=!1,s.value=""},3e3);return}M.onload=T=>{const B={id:Date.now(),src:T.target.result,alt:_.name};o.value.push(B),w()},M.readAsDataURL(_)}},y=()=>{const b=document.createElement("input");b.type="file",b.accept="image/png",b.style.display="none",b.addEventListener("change",_=>{m(_),document.body.removeChild(b)}),document.body.appendChild(b),b.click()},x=b=>{o.value=o.value.filter(_=>_.id!==b),w()},C=b=>{r(b)},w=()=>{localStorage.setItem("customStickers",JSON.stringify(o.value))};return an(()=>{const b=localStorage.getItem("customStickers");if(b)try{o.value=JSON.parse(b)}catch(_){console.error("Error parsing saved stickers:",_),o.value=[]}}),(b,_)=>(St(),_t("div",rx,[Z("div",{class:Yt(["transition-all duration-300 ease-in-out","mx-auto overflow-y-auto",n.value?"w-0":"w-[20vw]",d.showCloseButton?"bg-Secondary h-screen":"bg-Background my-4 rounded-xl shadow-[0_-1px_40px_-15px] shadow-slate-800/50 h-[95vh]"])},[(St(!0),_t(Qt,null,Hr(Object.keys(c.value),(S,M)=>(St(),_t("div",{key:M,class:"p-[1.5vh] space-y-[1vh] relative"},[Z("div",ix,[Z("h2",nx,Un(S.toUpperCase()),1),Z("button",{onClick:T=>g(S),class:"bg-blue-500 text-white px-1 py-1 text-xs rounded-full shadow-md hover:bg-blue-600 transition-colors duration-300"},Un(v[S]?"Collapse":"Expand"),9,ox)]),Z("div",{class:Yt([v[S]?"grid grid-cols-2 gap-4":"flex items-center space-x-[1vw]","py-[1vh] transition-all duration-300",v[S]?"overflow-y-auto":"overflow-x-auto"]),onWheel:T=>h(T,S)},[(St(!0),_t(Qt,null,Hr(c.value[S],(T,B)=>(St(),_t("div",{key:B,class:"flex justify-center items-center flex-shrink-0 transition-transform duration-300 ease-in-out hover:scale-110 hover:brightness-125"},[Z("img",{class:Yt([v[S]?"w-full h-auto":"w-[5vw] h-[5vw] max-w-[72px] max-h-[72px]","rounded-md object-fill cursor-pointer shadow-sm hover:shadow-md transition-shadow duration-300"]),src:T.src,alt:T.alt,onClick:k=>f(T.src),loading:"lazy"},null,10,ax)]))),128))],42,sx)]))),128)),Z("div",lx,[ux,a.value?(St(),_t("div",cx,[Z("span",fx,Un(s.value),1)])):Le("",!0),o.value.length===0?(St(),_t("div",hx,[Z("button",{onClick:y,class:"w-full h-full rounded transition flex justify-center items-center duration-300 space-x-2 hover:scale-110"},vx)])):(St(),_t("div",gx,[(St(!0),_t(Qt,null,Hr(o.value,S=>(St(),_t("div",{key:S.id,class:"relative group flex items-center justify-center"},[Z("img",{src:S.src,alt:S.alt,onClick:M=>C(S.src),class:"w-full h-full object-contain cursor-pointer rounded shadow hover:shadow-md transition-shadow duration-300"},null,8,mx),Z("button",{onClick:M=>x(S.id),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},xx,8,yx)]))),128)),Z("div",{class:"flex items-center justify-center"},[Z("button",{onClick:y,class:"border-Tertiary border-2 border-dashed rounded-xl text-white font-bold transition duration-300 flex items-center justify-center min-h-[12vh] w-full"},wx)])]))])],2),Rt(yr,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-x-4","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition ease-in duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 translate-x-14"},{default:Fr(()=>[d.showCloseButton?(St(),_t("button",{key:0,class:"absolute top-[2vh] right-0 p-[1vh] bg-white rounded-l-md shadow-md hover:bg-gray-100 transition-colors duration-300",onClick:p},kx)):Le("",!0)]),_:1})]))}},Mx=$o(Ex,[["__scopeId","data-v-d1d560d2"]]),Er=t=>(_a("data-v-f754dfef"),t=t(),ka(),t),Dx={class:"relative flex"},Tx={class:"p-[1.5vh] space-y-[1vh] relative"},Px=Er(()=>Z("h2",{class:"text-[2.5vh] font-semibold text-gray-800"},"IMAGES",-1)),Bx={class:"grid grid-cols-2 gap-4 py-[1vh]"},Ix=["src","alt","onClick"],Ox={class:"p-[1.5vh] space-y-[1vh]"},Rx=Er(()=>Z("h2",{class:"text-[2.5vh] font-semibold text-gray-800"},"IMPORT",-1)),Ax={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded relative mb-4",role:"alert"},Lx={class:"block sm:inline"},zx={key:1,class:"h-[15vh] flex justify-center items-center border-Tertiary border-2 border-dashed rounded-xl p-2"},Nx=Er(()=>Z("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"black"},[Z("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),Gx=Er(()=>Z("span",{class:"text-black font-bold"},"Import Image",-1)),Fx=[Nx,Gx],Hx={key:2,class:"min-h-[15vh] p-2 grid grid-cols-2 gap-2 border-white border-2 border-dashed rounded-xl"},Wx=["src","alt","onClick"],Vx=["onClick"],jx=Er(()=>Z("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Z("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),$x=[jx],Yx=Er(()=>Z("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"black"},[Z("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),Xx=Er(()=>Z("span",{class:"text-black font-bold"},"Add",-1)),Ux=[Yx,Xx],qx=Er(()=>Z("svg",{class:"w-[2.5vh] h-[2.5vh] text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[Z("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),Kx=[qx],Zx={__name:"Image",props:{showCloseButton:{type:Boolean,default:!0}},emits:["close","newImage"],setup(t,{emit:e}){const r=e,i=Ot(!1),n=be("handleImageSelected"),o=be("images"),s=Ot([]),a=Ot(""),l=Ot(!1),u=t;function c(){i.value=!0,setTimeout(()=>{r("close")},200)}const f=g=>{n(g),r("close")},h=g=>{const m=g.target.files[0],y=5*1024*1024,x=new FileReader,C=["image/jpeg","image/png"];if(m){if(!C.includes(m.type)){l.value=!0,a.value="Please upload JPG, or PNG images only",setTimeout(()=>{l.value=!1,a.value=""},3e3);return}if(m.size>y){l.value=!0,a.value="File size should be less than 5MB",setTimeout(()=>{l.value=!1,a.value=""},3e3);return}x.onload=w=>{const b={id:Date.now(),src:w.target.result,alt:m.name};s.value.push(b),v(),r("newImage",b.src)},x.readAsDataURL(m)}},d=()=>{const g=document.createElement("input");g.type="file",g.accept="image/*",g.style.display="none",g.addEventListener("change",m=>{h(m),document.body.removeChild(g)}),document.body.appendChild(g),g.click()},p=g=>{s.value=s.value.filter(m=>m.id!==g),v()},v=()=>{localStorage.setItem("customImages",JSON.stringify(s.value))};return an(()=>{const g=localStorage.getItem("customImages");if(g)try{s.value=JSON.parse(g)}catch(m){console.error("Error parsing saved image:",m),s.value=[]}}),(g,m)=>(St(),_t("div",Dx,[Z("div",{class:Yt(["transition-all duration-300 ease-in-out","mx-auto overflow-y-auto",i.value?"w-0":"w-[20vw]",u.showCloseButton?"bg-Secondary h-screen":"bg-Background my-4 rounded-xl shadow-[0_-1px_40px_-15px] shadow-slate-800/50 h-[95vh]"])},[Z("div",Tx,[Px,Z("div",Bx,[(St(!0),_t(Qt,null,Hr(dr(o),(y,x)=>(St(),_t("div",{key:x,class:"flex justify-center items-center transition-transform duration-300 ease-in-out hover:scale-105"},[Z("img",{class:"w-full h-auto rounded-md object-cover cursor-pointer shadow-sm hover:shadow-md transition-shadow duration-300",src:y.src,alt:y.alt,onClick:C=>f(y.src),loading:"lazy"},null,8,Ix)]))),128))])]),Z("div",Ox,[Rx,l.value?(St(),_t("div",Ax,[Z("span",Lx,Un(a.value),1)])):Le("",!0),s.value.length===0?(St(),_t("div",zx,[Z("button",{onClick:d,class:"w-full h-full rounded transition flex justify-center items-center duration-300 space-x-2 hover:scale-110"},Fx)])):(St(),_t("div",Hx,[(St(!0),_t(Qt,null,Hr(s.value,y=>(St(),_t("div",{key:y.id,class:"relative group flex items-center justify-center"},[Z("img",{src:y.src,alt:y.alt,onClick:x=>f(y.src),class:"w-full h-auto object-cover cursor-pointer rounded shadow hover:shadow-md transition-shadow duration-300"},null,8,Wx),Z("button",{onClick:x=>p(y.id),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},$x,8,Vx)]))),128)),Z("div",{class:"flex items-center justify-center"},[Z("button",{onClick:d,class:"border-Tertiary border-2 border-dashed rounded-xl text-white font-bold transition duration-300 flex items-center justify-center min-h-[12vh] w-full"},Ux)])]))])],2),Rt(yr,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-x-4","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition ease-in duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 translate-x-14"},{default:Fr(()=>[u.showCloseButton?(St(),_t("button",{key:0,class:"absolute top-[2vh] right-0 p-[1vh] bg-white rounded-l-md shadow-md hover:bg-gray-100 transition-colors duration-300",onClick:c},Kx)):Le("",!0)]),_:1})]))}},Jx=$o(Zx,[["__scopeId","data-v-f754dfef"]]),bl=t=>(_a("data-v-bfb82969"),t=t(),ka(),t),Qx={class:"relative flex"},tC={class:"p-[1.5vh] space-y-[1vh] relative"},eC=bl(()=>Z("h2",{class:"text-[2.5vh] font-semibold text-gray-800"},"SAVED IMAGES",-1)),rC={key:0,class:"grid grid-cols-2 gap-4 py-[1vh]"},iC=["src","onClick"],nC={key:1,class:"flex items-center justify-center h-[50vh]"},oC=bl(()=>Z("p",{class:"text-gray-500 text-center"},"There are no saved images yet.",-1)),sC=[oC],aC=bl(()=>Z("svg",{class:"w-[2.5vh] h-[2.5vh] text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[Z("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),lC=[aC],uC={__name:"Saved",props:{showCloseButton:{type:Boolean,default:!0}},emits:["close","selectImage"],setup(t,{emit:e}){const r=e,i=Ot(!1),n=be("savedImages"),o=t;function s(){i.value=!0,setTimeout(()=>{r("close")},200)}const a=u=>{r("selectImage",u)},l=Pa(()=>n.value.length>0);return(u,c)=>(St(),_t("div",Qx,[Z("div",{class:Yt(["transition-all duration-300 ease-in-out","mx-auto overflow-y-auto",i.value?"w-0":"w-[20vw]",o.showCloseButton?"bg-Secondary h-screen":"bg-Background my-4 rounded-xl shadow-[0_-1px_40px_-15px] shadow-slate-800/50 h-[95vh]"])},[Z("div",tC,[eC,l.value?(St(),_t("div",rC,[(St(!0),_t(Qt,null,Hr(dr(n),(f,h)=>(St(),_t("div",{key:h,class:"flex justify-center items-center transition-transform duration-300 ease-in-out hover:scale-110"},[Z("img",{class:"w-full h-auto rounded-md object-cover cursor-pointer shadow-sm hover:shadow-md transition-shadow duration-300",src:f,alt:"Saved Image",onClick:d=>a(f),loading:"lazy"},null,8,iC)]))),128))])):(St(),_t("div",nC,sC))])],2),Rt(yr,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-x-4","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition ease-in duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 translate-x-14"},{default:Fr(()=>[o.showCloseButton?(St(),_t("button",{key:0,class:"absolute top-[2vh] right-0 p-[1vh] bg-white rounded-l-md shadow-md hover:bg-gray-100 transition-colors duration-300",onClick:s},lC)):Le("",!0)]),_:1})]))}},cC=$o(uC,[["__scopeId","data-v-bfb82969"]]),fC={class:"w-full h-screen flex-col justify-center items-center pt-10"},hC={class:"text-center flex flex-col justify-center items-center"},dC=sf('<svg width="2vw" height="4vh" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 16C9.85038 16.6303 10.8846 17 12 17C13.1154 17 14.1496 16.6303 15 16" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path><ellipse cx="15" cy="10.5" rx="1" ry="1.5" fill="#1C274C"></ellipse><ellipse cx="9" cy="10.5" rx="1" ry="1.5" fill="#1C274C"></ellipse><path d="M15 22H12C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8M15 22C18.866 22 22 18.866 22 15M15 22C15 20.1387 15 19.2081 15.2447 18.4549C15.7393 16.9327 16.9327 15.7393 18.4549 15.2447C19.2081 15 20.1387 15 22 15M22 12V15" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path></svg>',1),pC=[dC],vC={class:"text-center flex flex-col justify-center items-center"},gC=Z("svg",{width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Z("circle",{cx:"16",cy:"8",r:"2",stroke:"#1C274C","stroke-width":"1.5"}),Z("path",{d:"M5 13.307L5.81051 12.5542C6.73658 11.6941 8.18321 11.7424 9.04988 12.6623L11.6974 15.4727C12.2356 16.0439 13.1166 16.1209 13.7457 15.6516C14.6522 14.9753 15.9144 15.0522 16.7322 15.8334L19 18",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),Z("path",{d:"M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})],-1),mC=[gC],yC={class:"text-center flex flex-col justify-center items-center"},bC=Z("svg",{width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Z("path",{d:"M9.5 14.4L10.9286 16L14.5 12",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Z("path",{d:"M2 11.9997C2 7.28562 2 4.9286 3.46447 3.46413C4.70529 2.22331 6.58687 2.03382 10 2.00488M22 11.9997C22 7.28562 22 4.9286 20.5355 3.46413C19.2947 2.22331 17.4131 2.03382 14 2.00488",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),Z("path",{d:"M10 22C7.19974 22 5.79961 22 4.73005 21.455C3.78924 20.9757 3.02433 20.2108 2.54497 19.27C2 18.2004 2 16.8003 2 14C2 11.1997 2 9.79961 2.54497 8.73005C3.02433 7.78924 3.78924 7.02433 4.73005 6.54497C5.79961 6 7.19974 6 10 6H14C16.8003 6 18.2004 6 19.27 6.54497C20.2108 7.02433 20.9757 7.78924 21.455 8.73005C22 9.79961 22 11.1997 22 14C22 16.8003 22 18.2004 21.455 19.27C20.9757 20.2108 20.2108 20.9757 19.27 21.455C18.2004 22 16.8003 22 14 22",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})],-1),xC=[bC],CC={class:"text-center flex flex-col justify-center items-center"},SC=Z("svg",{width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Z("path",{d:"M12 17V11",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),Z("circle",{cx:"1",cy:"1",r:"1",transform:"matrix(1 0 0 -1 11 9)",fill:"#1C274C"}),Z("path",{d:"M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})],-1),wC=[SC],_C={__name:"AsideNav",emits:["selectedImage"],setup(t,{emit:e}){const r=Ot(!1),i=Ot(!1),n=Ot(!1),o=Ot(null),s=Ot("bg-Background"),a=be("selectedImage"),l=e,u=be("handleImageSelected"),c=g=>{u(g)};function f(g){g==="sticker"?(r.value=!0,i.value=!1,n.value=!1):g==="image"?(r.value=!1,i.value=!0,n.value=!1):g==="saved"&&(r.value=!1,i.value=!1,n.value=!0),v(),l("popup-toggled",r.value||i.value||n.value,300)}function h(g){!r.value&&!i.value&&!n.value&&(o.value=g)}function d(){o.value=null}function p(g){g==="sticker"?r.value=!1:g==="image"?i.value=!1:g==="saved"&&(n.value=!1),v(),l("popup-toggled",!1,0)}function v(){s.value=(r.value||i.value||n.value,"bg-Background")}return(g,m)=>(St(),_t("div",{class:Yt([s.value,"min-h-screen w-[5vw] flex flex-row fixed"])},[Z("ul",fC,[Z("li",hC,[Z("div",{class:Yt([r.value?"bg-Secondary":"bg-transparent","group flex flex-col justify-center items-center pt-4 pb-1 cursor-pointer relative w-full transition-all duration-300 ease-in-out"]),onClick:m[0]||(m[0]=y=>f("sticker")),onMouseenter:m[1]||(m[1]=y=>h("sticker")),onMouseleave:d},[Z("button",{class:Yt(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",o.value==="sticker"&&!r.value?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_0px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent",r.value?"bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":""])},pC,2),Z("span",{class:Yt(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":o.value==="sticker"||r.value,"opacity-0":o.value!=="sticker"&&!r.value}])}," Sticker ",2)],34)]),Z("li",vC,[Z("div",{class:Yt([i.value?"bg-Secondary":"bg-transparent","group flex flex-col justify-center items-center pt-4 pb-1 cursor-pointer relative w-full transition-all duration-300 ease-in-out"]),onClick:m[2]||(m[2]=y=>f("image")),onMouseenter:m[3]||(m[3]=y=>h("image")),onMouseleave:d},[Z("button",{class:Yt(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",o.value==="image"&&!i.value?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_0px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent",i.value?"bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":""])},mC,2),Z("span",{class:Yt(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":o.value==="image"||i.value,"opacity-0":o.value!=="image"&&!i.value}])}," Image ",2)],34)]),Z("li",yC,[Z("div",{class:Yt([n.value?"bg-Secondary":"bg-transparent","group flex flex-col justify-center items-center pt-4 pb-1 cursor-pointer relative w-full transition-all duration-300 ease-in-out"]),onClick:m[4]||(m[4]=y=>f("saved")),onMouseenter:m[5]||(m[5]=y=>h("saved")),onMouseleave:d},[Z("button",{class:Yt(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",o.value==="saved"&&!n.value?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_0px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent",n.value?"bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":""])},xC,2),Z("span",{class:Yt(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":o.value==="saved"||n.value,"opacity-0":o.value!=="saved"&&!n.value}])}," Saved ",2)],34)]),Z("li",CC,[Z("div",{class:"group flex flex-col justify-center items-center pt-4 pb-1 cursor-pointer relative w-full",onClick:m[6]||(m[6]=y=>f("info")),onMouseenter:m[7]||(m[7]=y=>h("info")),onMouseleave:d},[Z("button",{class:Yt(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",o.value==="info"?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent hover:bg-Tertiary hover:rounded-xl"])},wC,2),Z("span",{class:Yt(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":o.value==="info","opacity-0":o.value!=="info"}])}," Info ",2)],32)])]),Rt(yr,{name:"slide-fade"},{default:Fr(()=>[r.value||o.value==="sticker"&&!r.value&&!i.value&&!n.value?(St(),_t("div",{key:0,class:"absolute left-[5vw] top-0",onMouseenter:m[9]||(m[9]=y=>h("sticker")),onMouseleave:d,onClick:m[10]||(m[10]=y=>f("sticker"))},[Rt(Mx,{showCloseButton:r.value,onClose:m[8]||(m[8]=()=>p("sticker"))},null,8,["showCloseButton"])],32)):Le("",!0)]),_:1}),Rt(yr,{name:"slide-fade"},{default:Fr(()=>[i.value||o.value==="image"&&!r.value&&!i.value&&!n.value?(St(),_t("div",{key:0,class:"absolute left-[5vw] top-0",onMouseenter:m[13]||(m[13]=y=>h("image")),onMouseleave:d,onClick:m[14]||(m[14]=y=>f("image"))},[Rt(Jx,{onSelectImage:[c,m[12]||(m[12]=y=>a.value=y)],showCloseButton:i.value,onClose:m[11]||(m[11]=()=>p("image"))},null,8,["showCloseButton"])],32)):Le("",!0)]),_:1}),Rt(yr,{name:"slide-fade"},{default:Fr(()=>[n.value||o.value==="saved"&&!r.value&&!i.value&&!n.value?(St(),_t("div",{key:0,class:"absolute left-[5vw] top-0",onMouseenter:m[17]||(m[17]=y=>h("saved")),onMouseleave:d,onClick:m[18]||(m[18]=y=>f("saved"))},[Rt(cC,{showCloseButton:n.value,onClose:m[15]||(m[15]=()=>p("saved")),onSelectImage:m[16]||(m[16]=y=>a.value=y)},null,8,["showCloseButton"])],32)):Le("",!0)]),_:1})],2))}},kC={class:"flex bg-Background min-h-screen"},EC={class:"w-[5vw] flex-shrink-0 z-10"},MC={class:"w-full max-w-4xl flex justify-center items-center"},DC={__name:"ImageEditor",setup(t){function e(p){var g;return(g=Object.assign({"../assets/Images/gallery/1.jpg":qv,"../assets/Images/gallery/10.png":Zv,"../assets/Images/gallery/2.png":Qv,"../assets/Images/gallery/3.jpg":eg,"../assets/Images/gallery/4.png":ig,"../assets/Images/gallery/5.png":og,"../assets/Images/gallery/6.png":ag,"../assets/Images/gallery/7.png":ug,"../assets/Images/gallery/8.png":fg,"../assets/Images/gallery/9.png":dg})[`../assets/Images/gallery/${p}`])==null?void 0:g.default}let i=Ot(["1.jpg","2.png","3.jpg","4.png","5.png","6.png","7.png","8.png","9.png","10.png"].map((p,v)=>({src:e(p),alt:`Images ${v+1}`}))),n=Ot(!1),o=Ot(null);const s=Ot([]),a=Ot(null),l=Ot(!1),u=Ot(0),c=p=>{a.value&&(a.value.clearStickers(),o.value=p)},f=p=>{i.value.unshift({src:p,alt:"New Image"})},h=p=>{a.value&&a.value.addSticker(p)},d=(p,v)=>{l.value=p,u.value=v};return lr("handleImageSelected",c),lr("handleAsidePopupToggle",d),lr("handleStickerSelected",h),lr("images",i),lr("selectedImage",o),lr("typeButton",n),lr("savedImages",s),(p,v)=>(St(),_t("div",kC,[Z("aside",EC,[Rt(_C,{onPopupToggled:d})]),Z("main",{class:"flex-grow flex justify-center items-center transition-all duration-300 ease-in-out",style:sn({marginLeft:l.value?`${u.value}px`:"0"})},[Z("section",MC,[Rt(hb,{ref_key:"editorRef",ref:a,"selected-image":dr(o),onNewImage:f},null,8,["selected-image"])])],4)]))}},TC={__name:"App",setup(t){return(e,r)=>(St(),_t("main",null,[Rt(DC)]))}};$v(TC).mount("#app");
