(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $l(e,t){const r=new Set(e.split(","));return t?i=>r.has(i.toLowerCase()):i=>r.has(i)}const It={},_i=[],Be=()=>{},Uv=()=>!1,Na=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Xl=e=>e.startsWith("onUpdate:"),ie=Object.assign,Ul=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Yv=Object.prototype.hasOwnProperty,Et=(e,t)=>Yv.call(e,t),bt=Array.isArray,Ei=e=>Ga(e)==="[object Map]",uh=e=>Ga(e)==="[object Set]",Ct=e=>typeof e=="function",Jt=e=>typeof e=="string",Vi=e=>typeof e=="symbol",Gt=e=>e!==null&&typeof e=="object",ch=e=>(Gt(e)||Ct(e))&&Ct(e.then)&&Ct(e.catch),fh=Object.prototype.toString,Ga=e=>fh.call(e),qv=e=>Ga(e).slice(8,-1),hh=e=>Ga(e)==="[object Object]",Yl=e=>Jt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,mn=$l(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wa=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Kv=/-(\w)/g,Oi=Wa(e=>e.replace(Kv,(t,r)=>r?r.toUpperCase():"")),Jv=/\B([A-Z])/g,ji=Wa(e=>e.replace(Jv,"-$1").toLowerCase()),dh=Wa(e=>e.charAt(0).toUpperCase()+e.slice(1)),vo=Wa(e=>e?`on${dh(e)}`:""),Lr=(e,t)=>!Object.is(e,t),Ps=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},qs=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Uo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let hc;const ph=()=>hc||(hc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ha(e){if(bt(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=Jt(i)?eg(i):Ha(i);if(n)for(const s in n)t[s]=n[s]}return t}else if(Jt(e)||Gt(e))return e}const Zv=/;(?![^(]*\))/g,Qv=/:([^]+)/,tg=/\/\*[^]*?\*\//g;function eg(e){const t={};return e.replace(tg,"").split(Zv).forEach(r=>{if(r){const i=r.split(Qv);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function ql(e){let t="";if(Jt(e))t=e;else if(bt(e))for(let r=0;r<e.length;r++){const i=ql(e[r]);i&&(t+=i+" ")}else if(Gt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const rg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ig=$l(rg);function vh(e){return!!e||e===""}const dc=e=>Jt(e)?e:e==null?"":bt(e)||Gt(e)&&(e.toString===fh||!Ct(e.toString))?JSON.stringify(e,gh,2):String(e),gh=(e,t)=>t&&t.__v_isRef?gh(e,t.value):Ei(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n],s)=>(r[go(i,s)+" =>"]=n,r),{})}:uh(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>go(r))}:Vi(t)?go(t):Gt(t)&&!bt(t)&&!hh(t)?String(t):t,go=(e,t="")=>{var r;return Vi(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let He;class ng{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=He,!t&&He&&(this.index=(He.scopes||(He.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=He;try{return He=this,t()}finally{He=r}}}on(){He=this}off(){He=this.parent}stop(t){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function sg(e,t=He){t&&t.active&&t.effects.push(e)}function ag(){return He}let Zr;class Kl{constructor(t,r,i,n){this.fn=t,this.trigger=r,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,sg(this,n)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ai();for(let t=0;t<this._depsLength;t++){const r=this.deps[t];if(r.computed&&(og(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),oi()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Or,r=Zr;try{return Or=!0,Zr=this,this._runnings++,pc(this),this.fn()}finally{vc(this),this._runnings--,Zr=r,Or=t}}stop(){var t;this.active&&(pc(this),vc(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function og(e){return e.value}function pc(e){e._trackId++,e._depsLength=0}function vc(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)mh(e.deps[t],e);e.deps.length=e._depsLength}}function mh(e,t){const r=e.get(t);r!==void 0&&t._trackId!==r&&(e.delete(t),e.size===0&&e.cleanup())}let Or=!0,Yo=0;const yh=[];function ai(){yh.push(Or),Or=!1}function oi(){const e=yh.pop();Or=e===void 0?!0:e}function Jl(){Yo++}function Zl(){for(Yo--;!Yo&&qo.length;)qo.shift()()}function bh(e,t,r){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const i=e.deps[e._depsLength];i!==t?(i&&mh(i,e),e.deps[e._depsLength++]=t):e._depsLength++}}const qo=[];function xh(e,t,r){Jl();for(const i of e.keys()){let n;i._dirtyLevel<t&&(n??(n=e.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=t),i._shouldSchedule&&(n??(n=e.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&qo.push(i.scheduler)))}Zl()}const Sh=(e,t)=>{const r=new Map;return r.cleanup=e,r.computed=t,r},Ko=new WeakMap,Qr=Symbol(""),Jo=Symbol("");function _e(e,t,r){if(Or&&Zr){let i=Ko.get(e);i||Ko.set(e,i=new Map);let n=i.get(r);n||i.set(r,n=Sh(()=>i.delete(r))),bh(Zr,n)}}function gr(e,t,r,i,n,s){const a=Ko.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(r==="length"&&bt(e)){const l=Number(i);a.forEach((u,c)=>{(c==="length"||!Vi(c)&&c>=l)&&o.push(u)})}else switch(r!==void 0&&o.push(a.get(r)),t){case"add":bt(e)?Yl(r)&&o.push(a.get("length")):(o.push(a.get(Qr)),Ei(e)&&o.push(a.get(Jo)));break;case"delete":bt(e)||(o.push(a.get(Qr)),Ei(e)&&o.push(a.get(Jo)));break;case"set":Ei(e)&&o.push(a.get(Qr));break}Jl();for(const l of o)l&&xh(l,4);Zl()}const lg=$l("__proto__,__v_isRef,__isVue"),Ch=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Vi)),gc=ug();function ug(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const i=Pt(this);for(let s=0,a=this.length;s<a;s++)_e(i,"get",s+"");const n=i[t](...r);return n===-1||n===!1?i[t](...r.map(Pt)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){ai(),Jl();const i=Pt(this)[t].apply(this,r);return Zl(),oi(),i}}),e}function cg(e){const t=Pt(this);return _e(t,"has",e),t.hasOwnProperty(e)}class wh{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,i){const n=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return s;if(r==="__v_raw")return i===(n?s?wg:Mh:s?kh:Eh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const a=bt(t);if(!n){if(a&&Et(gc,r))return Reflect.get(gc,r,i);if(r==="hasOwnProperty")return cg}const o=Reflect.get(t,r,i);return(Vi(r)?Ch.has(r):lg(r))||(n||_e(t,"get",r),s)?o:le(o)?a&&Yl(r)?o:o.value:Gt(o)?n?Ph(o):eu(o):o}}class _h extends wh{constructor(t=!1){super(!1,t)}set(t,r,i,n){let s=t[r];if(!this._isShallow){const l=Ii(s);if(!Ks(i)&&!Ii(i)&&(s=Pt(s),i=Pt(i)),!bt(t)&&le(s)&&!le(i))return l?!1:(s.value=i,!0)}const a=bt(t)&&Yl(r)?Number(r)<t.length:Et(t,r),o=Reflect.set(t,r,i,n);return t===Pt(n)&&(a?Lr(i,s)&&gr(t,"set",r,i):gr(t,"add",r,i)),o}deleteProperty(t,r){const i=Et(t,r);t[r];const n=Reflect.deleteProperty(t,r);return n&&i&&gr(t,"delete",r,void 0),n}has(t,r){const i=Reflect.has(t,r);return(!Vi(r)||!Ch.has(r))&&_e(t,"has",r),i}ownKeys(t){return _e(t,"iterate",bt(t)?"length":Qr),Reflect.ownKeys(t)}}class fg extends wh{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const hg=new _h,dg=new fg,pg=new _h(!0),Ql=e=>e,Va=e=>Reflect.getPrototypeOf(e);function ss(e,t,r=!1,i=!1){e=e.__v_raw;const n=Pt(e),s=Pt(t);r||(Lr(t,s)&&_e(n,"get",t),_e(n,"get",s));const{has:a}=Va(n),o=i?Ql:r?iu:Dn;if(a.call(n,t))return o(e.get(t));if(a.call(n,s))return o(e.get(s));e!==n&&e.get(t)}function as(e,t=!1){const r=this.__v_raw,i=Pt(r),n=Pt(e);return t||(Lr(e,n)&&_e(i,"has",e),_e(i,"has",n)),e===n?r.has(e):r.has(e)||r.has(n)}function os(e,t=!1){return e=e.__v_raw,!t&&_e(Pt(e),"iterate",Qr),Reflect.get(e,"size",e)}function mc(e){e=Pt(e);const t=Pt(this);return Va(t).has.call(t,e)||(t.add(e),gr(t,"add",e,e)),this}function yc(e,t){t=Pt(t);const r=Pt(this),{has:i,get:n}=Va(r);let s=i.call(r,e);s||(e=Pt(e),s=i.call(r,e));const a=n.call(r,e);return r.set(e,t),s?Lr(t,a)&&gr(r,"set",e,t):gr(r,"add",e,t),this}function bc(e){const t=Pt(this),{has:r,get:i}=Va(t);let n=r.call(t,e);n||(e=Pt(e),n=r.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return n&&gr(t,"delete",e,void 0),s}function xc(){const e=Pt(this),t=e.size!==0,r=e.clear();return t&&gr(e,"clear",void 0,void 0),r}function ls(e,t){return function(i,n){const s=this,a=s.__v_raw,o=Pt(a),l=t?Ql:e?iu:Dn;return!e&&_e(o,"iterate",Qr),a.forEach((u,c)=>i.call(n,l(u),l(c),s))}}function us(e,t,r){return function(...i){const n=this.__v_raw,s=Pt(n),a=Ei(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=n[e](...i),c=r?Ql:t?iu:Dn;return!t&&_e(s,"iterate",l?Jo:Qr),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:o?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Er(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vg(){const e={get(s){return ss(this,s)},get size(){return os(this)},has:as,add:mc,set:yc,delete:bc,clear:xc,forEach:ls(!1,!1)},t={get(s){return ss(this,s,!1,!0)},get size(){return os(this)},has:as,add:mc,set:yc,delete:bc,clear:xc,forEach:ls(!1,!0)},r={get(s){return ss(this,s,!0)},get size(){return os(this,!0)},has(s){return as.call(this,s,!0)},add:Er("add"),set:Er("set"),delete:Er("delete"),clear:Er("clear"),forEach:ls(!0,!1)},i={get(s){return ss(this,s,!0,!0)},get size(){return os(this,!0)},has(s){return as.call(this,s,!0)},add:Er("add"),set:Er("set"),delete:Er("delete"),clear:Er("clear"),forEach:ls(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=us(s,!1,!1),r[s]=us(s,!0,!1),t[s]=us(s,!1,!0),i[s]=us(s,!0,!0)}),[e,r,t,i]}const[gg,mg,yg,bg]=vg();function tu(e,t){const r=t?e?bg:yg:e?mg:gg;return(i,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(Et(r,n)&&n in i?r:i,n,s)}const xg={get:tu(!1,!1)},Sg={get:tu(!1,!0)},Cg={get:tu(!0,!1)},Eh=new WeakMap,kh=new WeakMap,Mh=new WeakMap,wg=new WeakMap;function _g(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Eg(e){return e.__v_skip||!Object.isExtensible(e)?0:_g(qv(e))}function eu(e){return Ii(e)?e:ru(e,!1,hg,xg,Eh)}function kg(e){return ru(e,!1,pg,Sg,kh)}function Ph(e){return ru(e,!0,dg,Cg,Mh)}function ru(e,t,r,i,n){if(!Gt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const a=Eg(e);if(a===0)return e;const o=new Proxy(e,a===2?i:r);return n.set(e,o),o}function ki(e){return Ii(e)?ki(e.__v_raw):!!(e&&e.__v_isReactive)}function Ii(e){return!!(e&&e.__v_isReadonly)}function Ks(e){return!!(e&&e.__v_isShallow)}function Dh(e){return ki(e)||Ii(e)}function Pt(e){const t=e&&e.__v_raw;return t?Pt(t):e}function Th(e){return Object.isExtensible(e)&&qs(e,"__v_skip",!0),e}const Dn=e=>Gt(e)?eu(e):e,iu=e=>Gt(e)?Ph(e):e;class Rh{constructor(t,r,i,n){this.getter=t,this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Kl(()=>t(this._value),()=>Ds(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const t=Pt(this);return(!t._cacheable||t.effect.dirty)&&Lr(t._value,t._value=t.effect.run())&&Ds(t,4),Ah(t),t.effect._dirtyLevel>=2&&Ds(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Mg(e,t,r=!1){let i,n;const s=Ct(e);return s?(i=e,n=Be):(i=e.get,n=e.set),new Rh(i,n,s||!n,r)}function Ah(e){var t;Or&&Zr&&(e=Pt(e),bh(Zr,(t=e.dep)!=null?t:e.dep=Sh(()=>e.dep=void 0,e instanceof Rh?e:void 0)))}function Ds(e,t=4,r){e=Pt(e);const i=e.dep;i&&xh(i,t)}function le(e){return!!(e&&e.__v_isRef===!0)}function Se(e){return Pg(e,!1)}function Pg(e,t){return le(e)?e:new Dg(e,t)}class Dg{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Pt(t),this._value=r?t:Dn(t)}get value(){return Ah(this),this._value}set value(t){const r=this.__v_isShallow||Ks(t)||Ii(t);t=r?t:Pt(t),Lr(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:Dn(t),Ds(this,4))}}function ee(e){return le(e)?e.value:e}const Tg={get:(e,t,r)=>ee(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return le(n)&&!le(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function Oh(e){return ki(e)?e:new Proxy(e,Tg)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ir(e,t,r,i){try{return i?e(...i):e()}catch(n){ja(n,t,r)}}function qe(e,t,r,i){if(Ct(e)){const s=Ir(e,t,r,i);return s&&ch(s)&&s.catch(a=>{ja(a,t,r)}),s}const n=[];for(let s=0;s<e.length;s++)n.push(qe(e[s],t,r,i));return n}function ja(e,t,r,i=!0){const n=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${r}`;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,o)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Ir(l,null,10,[e,a,o]);return}}Rg(e,r,n,i)}function Rg(e,t,r,i=!0){console.error(e)}let Tn=!1,Zo=!1;const oe=[];let sr=0;const Mi=[];let Pr=null,Vr=0;const Ih=Promise.resolve();let nu=null;function Bh(e){const t=nu||Ih;return e?t.then(this?e.bind(this):e):t}function Ag(e){let t=sr+1,r=oe.length;for(;t<r;){const i=t+r>>>1,n=oe[i],s=Rn(n);s<e||s===e&&n.pre?t=i+1:r=i}return t}function su(e){(!oe.length||!oe.includes(e,Tn&&e.allowRecurse?sr+1:sr))&&(e.id==null?oe.push(e):oe.splice(Ag(e.id),0,e),Lh())}function Lh(){!Tn&&!Zo&&(Zo=!0,nu=Ih.then(zh))}function Og(e){const t=oe.indexOf(e);t>sr&&oe.splice(t,1)}function Ig(e){bt(e)?Mi.push(...e):(!Pr||!Pr.includes(e,e.allowRecurse?Vr+1:Vr))&&Mi.push(e),Lh()}function Sc(e,t,r=Tn?sr+1:0){for(;r<oe.length;r++){const i=oe[r];if(i&&i.pre){if(e&&i.id!==e.uid)continue;oe.splice(r,1),r--,i()}}}function Fh(e){if(Mi.length){const t=[...new Set(Mi)].sort((r,i)=>Rn(r)-Rn(i));if(Mi.length=0,Pr){Pr.push(...t);return}for(Pr=t,Vr=0;Vr<Pr.length;Vr++)Pr[Vr]();Pr=null,Vr=0}}const Rn=e=>e.id==null?1/0:e.id,Bg=(e,t)=>{const r=Rn(e)-Rn(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function zh(e){Zo=!1,Tn=!0,oe.sort(Bg);try{for(sr=0;sr<oe.length;sr++){const t=oe[sr];t&&t.active!==!1&&Ir(t,null,14)}}finally{sr=0,oe.length=0,Fh(),Tn=!1,nu=null,(oe.length||Mi.length)&&zh()}}function Lg(e,t,...r){if(e.isUnmounted)return;const i=e.vnode.props||It;let n=r;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in i){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=i[c]||It;h&&(n=r.map(d=>Jt(d)?d.trim():d)),f&&(n=r.map(Uo))}let o,l=i[o=vo(t)]||i[o=vo(Oi(t))];!l&&s&&(l=i[o=vo(ji(t))]),l&&qe(l,e,6,n);const u=i[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,qe(u,e,6,n)}}function Nh(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const s=e.emits;let a={},o=!1;if(!Ct(e)){const l=u=>{const c=Nh(u,t,!0);c&&(o=!0,ie(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(Gt(e)&&i.set(e,null),null):(bt(s)?s.forEach(l=>a[l]=null):ie(a,s),Gt(e)&&i.set(e,a),a)}function $a(e,t){return!e||!Na(t)?!1:(t=t.slice(2).replace(/Once$/,""),Et(e,t[0].toLowerCase()+t.slice(1))||Et(e,ji(t))||Et(e,t))}let Te=null,Xa=null;function Js(e){const t=Te;return Te=e,Xa=e&&e.type.__scopeId||null,t}function Fg(e){Xa=e}function zg(){Xa=null}function Ng(e,t=Te,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&Rc(-1);const s=Js(t);let a;try{a=e(...n)}finally{Js(s),i._d&&Rc(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function mo(e){const{type:t,vnode:r,proxy:i,withProxy:n,props:s,propsOptions:[a],slots:o,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let g,m;const b=Js(e);try{if(r.shapeFlag&4){const C=n||i,S=C;g=nr(c.call(S,C,f,s,d,h,p)),m=l}else{const C=t;g=nr(C.length>1?C(s,{attrs:l,slots:o,emit:u}):C(s,null)),m=t.props?l:Gg(l)}}catch(C){xn.length=0,ja(C,e,1),g=Ce(ti)}let x=g;if(m&&v!==!1){const C=Object.keys(m),{shapeFlag:S}=x;C.length&&S&7&&(a&&C.some(Xl)&&(m=Wg(m,a)),x=Bi(x,m))}return r.dirs&&(x=Bi(x),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&(x.transition=r.transition),g=x,Js(b),g}const Gg=e=>{let t;for(const r in e)(r==="class"||r==="style"||Na(r))&&((t||(t={}))[r]=e[r]);return t},Wg=(e,t)=>{const r={};for(const i in e)(!Xl(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function Hg(e,t,r){const{props:i,children:n,component:s}=e,{props:a,children:o,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?Cc(i,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==i[h]&&!$a(u,h))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?Cc(i,a,u):!0:!!a;return!1}function Cc(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(t[s]!==e[s]&&!$a(r,s))return!0}return!1}function Vg({vnode:e,parent:t},r){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=r,t=t.parent;else break}}const jg=Symbol.for("v-ndc"),$g=e=>e.__isSuspense;function Xg(e,t){t&&t.pendingBranch?bt(e)?t.effects.push(...e):t.effects.push(e):Ig(e)}const Ug=Symbol.for("v-scx"),Yg=()=>lr(Ug),cs={};function Ts(e,t,r){return Gh(e,t,r)}function Gh(e,t,{immediate:r,deep:i,flush:n,once:s,onTrack:a,onTrigger:o}=It){if(t&&s){const y=t;t=(...w)=>{y(...w),S()}}const l=ve,u=y=>i===!0?y:qr(y,i===!1?1:void 0);let c,f=!1,h=!1;if(le(e)?(c=()=>e.value,f=Ks(e)):ki(e)?(c=()=>u(e),f=!0):bt(e)?(h=!0,f=e.some(y=>ki(y)||Ks(y)),c=()=>e.map(y=>{if(le(y))return y.value;if(ki(y))return u(y);if(Ct(y))return Ir(y,l,2)})):Ct(e)?t?c=()=>Ir(e,l,2):c=()=>(d&&d(),qe(e,l,3,[p])):c=Be,t&&i){const y=c;c=()=>qr(y())}let d,p=y=>{d=x.onStop=()=>{Ir(y,l,4),d=x.onStop=void 0}},v;if(Ka)if(p=Be,t?r&&qe(t,l,3,[c(),h?[]:void 0,p]):c(),n==="sync"){const y=Yg();v=y.__watcherHandles||(y.__watcherHandles=[])}else return Be;let g=h?new Array(e.length).fill(cs):cs;const m=()=>{if(!(!x.active||!x.dirty))if(t){const y=x.run();(i||f||(h?y.some((w,_)=>Lr(w,g[_])):Lr(y,g)))&&(d&&d(),qe(t,l,3,[y,g===cs?void 0:h&&g[0]===cs?[]:g,p]),g=y)}else x.run()};m.allowRecurse=!!t;let b;n==="sync"?b=m:n==="post"?b=()=>ye(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),b=()=>su(m));const x=new Kl(c,Be,b),C=ag(),S=()=>{x.stop(),C&&Ul(C.effects,x)};return t?r?m():g=x.run():n==="post"?ye(x.run.bind(x),l&&l.suspense):x.run(),v&&v.push(S),S}function qg(e,t,r){const i=this.proxy,n=Jt(e)?e.includes(".")?Wh(i,e):()=>i[e]:e.bind(i,i);let s;Ct(t)?s=t:(s=t.handler,r=t);const a=Vn(this),o=Gh(n,s.bind(i),r);return a(),o}function Wh(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function qr(e,t,r=0,i){if(!Gt(e)||e.__v_skip)return e;if(t&&t>0){if(r>=t)return e;r++}if(i=i||new Set,i.has(e))return e;if(i.add(e),le(e))qr(e.value,t,r,i);else if(bt(e))for(let n=0;n<e.length;n++)qr(e[n],t,r,i);else if(uh(e)||Ei(e))e.forEach(n=>{qr(n,t,r,i)});else if(hh(e))for(const n in e)qr(e[n],t,r,i);return e}function Kg(e,t){if(Te===null)return e;const r=Ja(Te)||Te.proxy,i=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[s,a,o,l=It]=t[n];s&&(Ct(s)&&(s={mounted:s,updated:s}),s.deep&&qr(a),i.push({dir:s,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function Wr(e,t,r,i){const n=e.dirs,s=t&&t.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(ai(),qe(l,r,8,[e.el,o,e,t]),oi())}}/*! #__NO_SIDE_EFFECTS__ */function Jg(e,t){return Ct(e)?ie({name:e.name},t,{setup:e}):e}const Rs=e=>!!e.type.__asyncLoader,Hh=e=>e.type.__isKeepAlive;function Zg(e,t){Vh(e,"a",t)}function Qg(e,t){Vh(e,"da",t)}function Vh(e,t,r=ve){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Ua(t,i,r),r){let n=r.parent;for(;n&&n.parent;)Hh(n.parent.vnode)&&tm(i,t,r,n),n=n.parent}}function tm(e,t,r,i){const n=Ua(t,e,i,!0);$h(()=>{Ul(i[t],n)},r)}function Ua(e,t,r=ve,i=!1){if(r){const n=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;ai();const o=Vn(r),l=qe(t,r,e,a);return o(),oi(),l});return i?n.unshift(s):n.push(s),s}}const Cr=e=>(t,r=ve)=>(!Ka||e==="sp")&&Ua(e,(...i)=>t(...i),r),em=Cr("bm"),jh=Cr("m"),rm=Cr("bu"),im=Cr("u"),nm=Cr("bum"),$h=Cr("um"),sm=Cr("sp"),am=Cr("rtg"),om=Cr("rtc");function lm(e,t=ve){Ua("ec",e,t)}function Zs(e,t,r,i){let n;const s=r&&r[i];if(bt(e)||Jt(e)){n=new Array(e.length);for(let a=0,o=e.length;a<o;a++)n[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,s&&s[a])}else if(Gt(e))if(e[Symbol.iterator])n=Array.from(e,(a,o)=>t(a,o,void 0,s&&s[o]));else{const a=Object.keys(e);n=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const u=a[o];n[o]=t(e[u],u,o,s&&s[o])}}else n=[];return r&&(r[i]=n),n}const Qo=e=>e?sd(e)?Ja(e)||e.proxy:Qo(e.parent):null,yn=ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Qo(e.parent),$root:e=>Qo(e.root),$emit:e=>e.emit,$options:e=>au(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,su(e.update)}),$nextTick:e=>e.n||(e.n=Bh.bind(e.proxy)),$watch:e=>qg.bind(e)}),yo=(e,t)=>e!==It&&!e.__isScriptSetup&&Et(e,t),um={get({_:e},t){const{ctx:r,setupState:i,data:n,props:s,accessCache:a,type:o,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return s[t]}else{if(yo(i,t))return a[t]=1,i[t];if(n!==It&&Et(n,t))return a[t]=2,n[t];if((u=e.propsOptions[0])&&Et(u,t))return a[t]=3,s[t];if(r!==It&&Et(r,t))return a[t]=4,r[t];tl&&(a[t]=0)}}const c=yn[t];let f,h;if(c)return t==="$attrs"&&_e(e,"get",t),c(e);if((f=o.__cssModules)&&(f=f[t]))return f;if(r!==It&&Et(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,Et(h,t))return h[t]},set({_:e},t,r){const{data:i,setupState:n,ctx:s}=e;return yo(n,t)?(n[t]=r,!0):i!==It&&Et(i,t)?(i[t]=r,!0):Et(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:s}},a){let o;return!!r[a]||e!==It&&Et(e,a)||yo(t,a)||(o=s[0])&&Et(o,a)||Et(i,a)||Et(yn,a)||Et(n.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Et(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function wc(e){return bt(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let tl=!0;function cm(e){const t=au(e),r=e.proxy,i=e.ctx;tl=!1,t.beforeCreate&&_c(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:x,unmounted:C,render:S,renderTracked:y,renderTriggered:w,errorCaptured:_,serverPrefetch:E,expose:M,inheritAttrs:O,components:A,directives:R,filters:B}=t;if(u&&fm(u,i,null),a)for(const H in a){const z=a[H];Ct(z)&&(i[H]=z.bind(r))}if(n){const H=n.call(r,r);Gt(H)&&(e.data=eu(H))}if(tl=!0,s)for(const H in s){const z=s[H],Y=Ct(z)?z.bind(r,r):Ct(z.get)?z.get.bind(r,r):Be,K=!Ct(z)&&Ct(z.set)?z.set.bind(r):Be,G=Wm({get:Y,set:K});Object.defineProperty(i,H,{enumerable:!0,configurable:!0,get:()=>G.value,set:tt=>G.value=tt})}if(o)for(const H in o)Xh(o[H],i,r,H);if(l){const H=Ct(l)?l.call(r):l;Reflect.ownKeys(H).forEach(z=>{hi(z,H[z])})}c&&_c(c,e,"c");function W(H,z){bt(z)?z.forEach(Y=>H(Y.bind(r))):z&&H(z.bind(r))}if(W(em,f),W(jh,h),W(rm,d),W(im,p),W(Zg,v),W(Qg,g),W(lm,_),W(om,y),W(am,w),W(nm,b),W($h,C),W(sm,E),bt(M))if(M.length){const H=e.exposed||(e.exposed={});M.forEach(z=>{Object.defineProperty(H,z,{get:()=>r[z],set:Y=>r[z]=Y})})}else e.exposed||(e.exposed={});S&&e.render===Be&&(e.render=S),O!=null&&(e.inheritAttrs=O),A&&(e.components=A),R&&(e.directives=R)}function fm(e,t,r=Be){bt(e)&&(e=el(e));for(const i in e){const n=e[i];let s;Gt(n)?"default"in n?s=lr(n.from||i,n.default,!0):s=lr(n.from||i):s=lr(n),le(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[i]=s}}function _c(e,t,r){qe(bt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function Xh(e,t,r,i){const n=i.includes(".")?Wh(r,i):()=>r[i];if(Jt(e)){const s=t[e];Ct(s)&&Ts(n,s)}else if(Ct(e))Ts(n,e.bind(r));else if(Gt(e))if(bt(e))e.forEach(s=>Xh(s,t,r,i));else{const s=Ct(e.handler)?e.handler.bind(r):t[e.handler];Ct(s)&&Ts(n,s,e)}}function au(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!n.length&&!r&&!i?l=t:(l={},n.length&&n.forEach(u=>Qs(l,u,a,!0)),Qs(l,t,a)),Gt(t)&&s.set(t,l),l}function Qs(e,t,r,i=!1){const{mixins:n,extends:s}=t;s&&Qs(e,s,r,!0),n&&n.forEach(a=>Qs(e,a,r,!0));for(const a in t)if(!(i&&a==="expose")){const o=hm[a]||r&&r[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const hm={data:Ec,props:kc,emits:kc,methods:en,computed:en,beforeCreate:he,created:he,beforeMount:he,mounted:he,beforeUpdate:he,updated:he,beforeDestroy:he,beforeUnmount:he,destroyed:he,unmounted:he,activated:he,deactivated:he,errorCaptured:he,serverPrefetch:he,components:en,directives:en,watch:pm,provide:Ec,inject:dm};function Ec(e,t){return t?e?function(){return ie(Ct(e)?e.call(this,this):e,Ct(t)?t.call(this,this):t)}:t:e}function dm(e,t){return en(el(e),el(t))}function el(e){if(bt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function he(e,t){return e?[...new Set([].concat(e,t))]:t}function en(e,t){return e?ie(Object.create(null),e,t):t}function kc(e,t){return e?bt(e)&&bt(t)?[...new Set([...e,...t])]:ie(Object.create(null),wc(e),wc(t??{})):t}function pm(e,t){if(!e)return t;if(!t)return e;const r=ie(Object.create(null),e);for(const i in t)r[i]=he(e[i],t[i]);return r}function Uh(){return{app:null,config:{isNativeTag:Uv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vm=0;function gm(e,t){return function(i,n=null){Ct(i)||(i=ie({},i)),n!=null&&!Gt(n)&&(n=null);const s=Uh(),a=new WeakSet;let o=!1;const l=s.app={_uid:vm++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:Hm,get config(){return s.config},set config(u){},use(u,...c){return a.has(u)||(u&&Ct(u.install)?(a.add(u),u.install(l,...c)):Ct(u)&&(a.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,f){if(!o){const h=Ce(i,n);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),c&&t?t(h,u):e(h,u,f),o=!0,l._container=u,u.__vue_app__=l,Ja(h.component)||h.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l},runWithContext(u){const c=bn;bn=l;try{return u()}finally{bn=c}}};return l}}let bn=null;function hi(e,t){if(ve){let r=ve.provides;const i=ve.parent&&ve.parent.provides;i===r&&(r=ve.provides=Object.create(i)),r[e]=t}}function lr(e,t,r=!1){const i=ve||Te;if(i||bn){const n=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:bn._context.provides;if(n&&e in n)return n[e];if(arguments.length>1)return r&&Ct(t)?t.call(i&&i.proxy):t}}function mm(e,t,r,i=!1){const n={},s={};qs(s,qa,1),e.propsDefaults=Object.create(null),Yh(e,t,n,s);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);r?e.props=i?n:kg(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function ym(e,t,r,i){const{props:n,attrs:s,vnode:{patchFlag:a}}=e,o=Pt(n),[l]=e.propsOptions;let u=!1;if((i||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if($a(e.emitsOptions,h))continue;const d=t[h];if(l)if(Et(s,h))d!==s[h]&&(s[h]=d,u=!0);else{const p=Oi(h);n[p]=rl(l,o,p,d,e,!1)}else d!==s[h]&&(s[h]=d,u=!0)}}}else{Yh(e,t,n,s)&&(u=!0);let c;for(const f in o)(!t||!Et(t,f)&&((c=ji(f))===f||!Et(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(n[f]=rl(l,o,f,void 0,e,!0)):delete n[f]);if(s!==o)for(const f in s)(!t||!Et(t,f))&&(delete s[f],u=!0)}u&&gr(e,"set","$attrs")}function Yh(e,t,r,i){const[n,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(mn(l))continue;const u=t[l];let c;n&&Et(n,c=Oi(l))?!s||!s.includes(c)?r[c]=u:(o||(o={}))[c]=u:$a(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,a=!0)}if(s){const l=Pt(r),u=o||It;for(let c=0;c<s.length;c++){const f=s[c];r[f]=rl(n,l,f,u[f],e,!Et(u,f))}}return a}function rl(e,t,r,i,n,s){const a=e[r];if(a!=null){const o=Et(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Ct(l)){const{propsDefaults:u}=n;if(r in u)i=u[r];else{const c=Vn(n);i=u[r]=l.call(null,t),c()}}else i=l}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===ji(r))&&(i=!0))}return i}function qh(e,t,r=!1){const i=t.propsCache,n=i.get(e);if(n)return n;const s=e.props,a={},o=[];let l=!1;if(!Ct(e)){const c=f=>{l=!0;const[h,d]=qh(f,t,!0);ie(a,h),d&&o.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return Gt(e)&&i.set(e,_i),_i;if(bt(s))for(let c=0;c<s.length;c++){const f=Oi(s[c]);Mc(f)&&(a[f]=It)}else if(s)for(const c in s){const f=Oi(c);if(Mc(f)){const h=s[c],d=a[f]=bt(h)||Ct(h)?{type:h}:ie({},h);if(d){const p=Tc(Boolean,d.type),v=Tc(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||Et(d,"default"))&&o.push(f)}}}const u=[a,o];return Gt(e)&&i.set(e,u),u}function Mc(e){return e[0]!=="$"&&!mn(e)}function Pc(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Dc(e,t){return Pc(e)===Pc(t)}function Tc(e,t){return bt(t)?t.findIndex(r=>Dc(r,e)):Ct(t)&&Dc(t,e)?0:-1}const Kh=e=>e[0]==="_"||e==="$stable",ou=e=>bt(e)?e.map(nr):[nr(e)],bm=(e,t,r)=>{if(t._n)return t;const i=Ng((...n)=>ou(t(...n)),r);return i._c=!1,i},Jh=(e,t,r)=>{const i=e._ctx;for(const n in e){if(Kh(n))continue;const s=e[n];if(Ct(s))t[n]=bm(n,s,i);else if(s!=null){const a=ou(s);t[n]=()=>a}}},Zh=(e,t)=>{const r=ou(t);e.slots.default=()=>r},xm=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Pt(t),qs(t,"_",r)):Jh(t,e.slots={})}else e.slots={},t&&Zh(e,t);qs(e.slots,qa,1)},Sm=(e,t,r)=>{const{vnode:i,slots:n}=e;let s=!0,a=It;if(i.shapeFlag&32){const o=t._;o?r&&o===1?s=!1:(ie(n,t),!r&&o===1&&delete n._):(s=!t.$stable,Jh(t,n)),a=t}else t&&(Zh(e,t),a={default:1});if(s)for(const o in n)!Kh(o)&&a[o]==null&&delete n[o]};function il(e,t,r,i,n=!1){if(bt(e)){e.forEach((h,d)=>il(h,t&&(bt(t)?t[d]:t),r,i,n));return}if(Rs(i)&&!n)return;const s=i.shapeFlag&4?Ja(i.component)||i.component.proxy:i.el,a=n?null:s,{i:o,r:l}=e,u=t&&t.r,c=o.refs===It?o.refs={}:o.refs,f=o.setupState;if(u!=null&&u!==l&&(Jt(u)?(c[u]=null,Et(f,u)&&(f[u]=null)):le(u)&&(u.value=null)),Ct(l))Ir(l,o,12,[a,c]);else{const h=Jt(l),d=le(l);if(h||d){const p=()=>{if(e.f){const v=h?Et(f,l)?f[l]:c[l]:l.value;n?bt(v)&&Ul(v,s):bt(v)?v.includes(s)||v.push(s):h?(c[l]=[s],Et(f,l)&&(f[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else h?(c[l]=a,Et(f,l)&&(f[l]=a)):d&&(l.value=a,e.k&&(c[e.k]=a))};a?(p.id=-1,ye(p,r)):p()}}}const ye=Xg;function Cm(e){return wm(e)}function wm(e,t){const r=ph();r.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Be,insertStaticContent:p}=e,v=(k,P,I,F=null,N=null,$=null,j=void 0,V=null,q=!!P.dynamicChildren)=>{if(k===P)return;k&&!Zi(k,P)&&(F=lt(k),tt(k,N,$,!0),k=null),P.patchFlag===-2&&(q=!1,P.dynamicChildren=null);const{type:X,ref:it,shapeFlag:ot}=P;switch(X){case Ya:g(k,P,I,F);break;case ti:m(k,P,I,F);break;case xo:k==null&&b(P,I,F,j);break;case xe:A(k,P,I,F,N,$,j,V,q);break;default:ot&1?S(k,P,I,F,N,$,j,V,q):ot&6?R(k,P,I,F,N,$,j,V,q):(ot&64||ot&128)&&X.process(k,P,I,F,N,$,j,V,q,St)}it!=null&&N&&il(it,k&&k.ref,$,P||k,!P)},g=(k,P,I,F)=>{if(k==null)i(P.el=o(P.children),I,F);else{const N=P.el=k.el;P.children!==k.children&&u(N,P.children)}},m=(k,P,I,F)=>{k==null?i(P.el=l(P.children||""),I,F):P.el=k.el},b=(k,P,I,F)=>{[k.el,k.anchor]=p(k.children,P,I,F,k.el,k.anchor)},x=({el:k,anchor:P},I,F)=>{let N;for(;k&&k!==P;)N=h(k),i(k,I,F),k=N;i(P,I,F)},C=({el:k,anchor:P})=>{let I;for(;k&&k!==P;)I=h(k),n(k),k=I;n(P)},S=(k,P,I,F,N,$,j,V,q)=>{P.type==="svg"?j="svg":P.type==="math"&&(j="mathml"),k==null?y(P,I,F,N,$,j,V,q):E(k,P,N,$,j,V,q)},y=(k,P,I,F,N,$,j,V)=>{let q,X;const{props:it,shapeFlag:ot,transition:at,dirs:vt}=k;if(q=k.el=a(k.type,$,it&&it.is,it),ot&8?c(q,k.children):ot&16&&_(k.children,q,null,F,N,bo(k,$),j,V),vt&&Wr(k,null,F,"created"),w(q,k,k.scopeId,j,F),it){for(const Mt in it)Mt!=="value"&&!mn(Mt)&&s(q,Mt,null,it[Mt],$,k.children,F,N,Z);"value"in it&&s(q,"value",null,it.value,$),(X=it.onVnodeBeforeMount)&&er(X,F,k)}vt&&Wr(k,null,F,"beforeMount");const gt=_m(N,at);gt&&at.beforeEnter(q),i(q,P,I),((X=it&&it.onVnodeMounted)||gt||vt)&&ye(()=>{X&&er(X,F,k),gt&&at.enter(q),vt&&Wr(k,null,F,"mounted")},N)},w=(k,P,I,F,N)=>{if(I&&d(k,I),F)for(let $=0;$<F.length;$++)d(k,F[$]);if(N){let $=N.subTree;if(P===$){const j=N.vnode;w(k,j,j.scopeId,j.slotScopeIds,N.parent)}}},_=(k,P,I,F,N,$,j,V,q=0)=>{for(let X=q;X<k.length;X++){const it=k[X]=V?Dr(k[X]):nr(k[X]);v(null,it,P,I,F,N,$,j,V)}},E=(k,P,I,F,N,$,j)=>{const V=P.el=k.el;let{patchFlag:q,dynamicChildren:X,dirs:it}=P;q|=k.patchFlag&16;const ot=k.props||It,at=P.props||It;let vt;if(I&&Hr(I,!1),(vt=at.onVnodeBeforeUpdate)&&er(vt,I,P,k),it&&Wr(P,k,I,"beforeUpdate"),I&&Hr(I,!0),X?M(k.dynamicChildren,X,V,I,F,bo(P,N),$):j||z(k,P,V,null,I,F,bo(P,N),$,!1),q>0){if(q&16)O(V,P,ot,at,I,F,N);else if(q&2&&ot.class!==at.class&&s(V,"class",null,at.class,N),q&4&&s(V,"style",ot.style,at.style,N),q&8){const gt=P.dynamicProps;for(let Mt=0;Mt<gt.length;Mt++){const At=gt[Mt],Ht=ot[At],se=at[At];(se!==Ht||At==="value")&&s(V,At,Ht,se,N,k.children,I,F,Z)}}q&1&&k.children!==P.children&&c(V,P.children)}else!j&&X==null&&O(V,P,ot,at,I,F,N);((vt=at.onVnodeUpdated)||it)&&ye(()=>{vt&&er(vt,I,P,k),it&&Wr(P,k,I,"updated")},F)},M=(k,P,I,F,N,$,j)=>{for(let V=0;V<P.length;V++){const q=k[V],X=P[V],it=q.el&&(q.type===xe||!Zi(q,X)||q.shapeFlag&70)?f(q.el):I;v(q,X,it,null,F,N,$,j,!0)}},O=(k,P,I,F,N,$,j)=>{if(I!==F){if(I!==It)for(const V in I)!mn(V)&&!(V in F)&&s(k,V,I[V],null,j,P.children,N,$,Z);for(const V in F){if(mn(V))continue;const q=F[V],X=I[V];q!==X&&V!=="value"&&s(k,V,X,q,j,P.children,N,$,Z)}"value"in F&&s(k,"value",I.value,F.value,j)}},A=(k,P,I,F,N,$,j,V,q)=>{const X=P.el=k?k.el:o(""),it=P.anchor=k?k.anchor:o("");let{patchFlag:ot,dynamicChildren:at,slotScopeIds:vt}=P;vt&&(V=V?V.concat(vt):vt),k==null?(i(X,I,F),i(it,I,F),_(P.children||[],I,it,N,$,j,V,q)):ot>0&&ot&64&&at&&k.dynamicChildren?(M(k.dynamicChildren,at,I,N,$,j,V),(P.key!=null||N&&P===N.subTree)&&Qh(k,P,!0)):z(k,P,I,it,N,$,j,V,q)},R=(k,P,I,F,N,$,j,V,q)=>{P.slotScopeIds=V,k==null?P.shapeFlag&512?N.ctx.activate(P,I,F,j,q):B(P,I,F,N,$,j,q):L(k,P,q)},B=(k,P,I,F,N,$,j)=>{const V=k.component=Bm(k,F,N);if(Hh(k)&&(V.ctx.renderer=St),Lm(V),V.asyncDep){if(N&&N.registerDep(V,W),!k.el){const q=V.subTree=Ce(ti);m(null,q,P,I)}}else W(V,k,P,I,N,$,j)},L=(k,P,I)=>{const F=P.component=k.component;if(Hg(k,P,I))if(F.asyncDep&&!F.asyncResolved){H(F,P,I);return}else F.next=P,Og(F.update),F.effect.dirty=!0,F.update();else P.el=k.el,F.vnode=P},W=(k,P,I,F,N,$,j)=>{const V=()=>{if(k.isMounted){let{next:it,bu:ot,u:at,parent:vt,vnode:gt}=k;{const tr=td(k);if(tr){it&&(it.el=gt.el,H(k,it,j)),tr.asyncDep.then(()=>{k.isUnmounted||V()});return}}let Mt=it,At;Hr(k,!1),it?(it.el=gt.el,H(k,it,j)):it=gt,ot&&Ps(ot),(At=it.props&&it.props.onVnodeBeforeUpdate)&&er(At,vt,it,gt),Hr(k,!0);const Ht=mo(k),se=k.subTree;k.subTree=Ht,v(se,Ht,f(se.el),lt(se),k,N,$),it.el=Ht.el,Mt===null&&Vg(k,Ht.el),at&&ye(at,N),(At=it.props&&it.props.onVnodeUpdated)&&ye(()=>er(At,vt,it,gt),N)}else{let it;const{el:ot,props:at}=P,{bm:vt,m:gt,parent:Mt}=k,At=Rs(P);if(Hr(k,!1),vt&&Ps(vt),!At&&(it=at&&at.onVnodeBeforeMount)&&er(it,Mt,P),Hr(k,!0),ot&&ct){const Ht=()=>{k.subTree=mo(k),ct(ot,k.subTree,k,N,null)};At?P.type.__asyncLoader().then(()=>!k.isUnmounted&&Ht()):Ht()}else{const Ht=k.subTree=mo(k);v(null,Ht,I,F,k,N,$),P.el=Ht.el}if(gt&&ye(gt,N),!At&&(it=at&&at.onVnodeMounted)){const Ht=P;ye(()=>er(it,Mt,Ht),N)}(P.shapeFlag&256||Mt&&Rs(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&k.a&&ye(k.a,N),k.isMounted=!0,P=I=F=null}},q=k.effect=new Kl(V,Be,()=>su(X),k.scope),X=k.update=()=>{q.dirty&&q.run()};X.id=k.uid,Hr(k,!0),X()},H=(k,P,I)=>{P.component=k;const F=k.vnode.props;k.vnode=P,k.next=null,ym(k,P.props,F,I),Sm(k,P.children,I),ai(),Sc(k),oi()},z=(k,P,I,F,N,$,j,V,q=!1)=>{const X=k&&k.children,it=k?k.shapeFlag:0,ot=P.children,{patchFlag:at,shapeFlag:vt}=P;if(at>0){if(at&128){K(X,ot,I,F,N,$,j,V,q);return}else if(at&256){Y(X,ot,I,F,N,$,j,V,q);return}}vt&8?(it&16&&Z(X,N,$),ot!==X&&c(I,ot)):it&16?vt&16?K(X,ot,I,F,N,$,j,V,q):Z(X,N,$,!0):(it&8&&c(I,""),vt&16&&_(ot,I,F,N,$,j,V,q))},Y=(k,P,I,F,N,$,j,V,q)=>{k=k||_i,P=P||_i;const X=k.length,it=P.length,ot=Math.min(X,it);let at;for(at=0;at<ot;at++){const vt=P[at]=q?Dr(P[at]):nr(P[at]);v(k[at],vt,I,null,N,$,j,V,q)}X>it?Z(k,N,$,!0,!1,ot):_(P,I,F,N,$,j,V,q,ot)},K=(k,P,I,F,N,$,j,V,q)=>{let X=0;const it=P.length;let ot=k.length-1,at=it-1;for(;X<=ot&&X<=at;){const vt=k[X],gt=P[X]=q?Dr(P[X]):nr(P[X]);if(Zi(vt,gt))v(vt,gt,I,null,N,$,j,V,q);else break;X++}for(;X<=ot&&X<=at;){const vt=k[ot],gt=P[at]=q?Dr(P[at]):nr(P[at]);if(Zi(vt,gt))v(vt,gt,I,null,N,$,j,V,q);else break;ot--,at--}if(X>ot){if(X<=at){const vt=at+1,gt=vt<it?P[vt].el:F;for(;X<=at;)v(null,P[X]=q?Dr(P[X]):nr(P[X]),I,gt,N,$,j,V,q),X++}}else if(X>at)for(;X<=ot;)tt(k[X],N,$,!0),X++;else{const vt=X,gt=X,Mt=new Map;for(X=gt;X<=at;X++){const ce=P[X]=q?Dr(P[X]):nr(P[X]);ce.key!=null&&Mt.set(ce.key,X)}let At,Ht=0;const se=at-gt+1;let tr=!1,is=0;const _r=new Array(se);for(X=0;X<se;X++)_r[X]=0;for(X=vt;X<=ot;X++){const ce=k[X];if(Ht>=se){tt(ce,N,$,!0);continue}let Oe;if(ce.key!=null)Oe=Mt.get(ce.key);else for(At=gt;At<=at;At++)if(_r[At-gt]===0&&Zi(ce,P[At])){Oe=At;break}Oe===void 0?tt(ce,N,$,!0):(_r[Oe-gt]=X+1,Oe>=is?is=Oe:tr=!0,v(ce,P[Oe],I,null,N,$,j,V,q),Ht++)}const ci=tr?Em(_r):_i;for(At=ci.length-1,X=se-1;X>=0;X--){const ce=gt+X,Oe=P[ce],ns=ce+1<it?P[ce+1].el:F;_r[X]===0?v(null,Oe,I,ns,N,$,j,V,q):tr&&(At<0||X!==ci[At]?G(Oe,I,ns,2):At--)}}},G=(k,P,I,F,N=null)=>{const{el:$,type:j,transition:V,children:q,shapeFlag:X}=k;if(X&6){G(k.component.subTree,P,I,F);return}if(X&128){k.suspense.move(P,I,F);return}if(X&64){j.move(k,P,I,St);return}if(j===xe){i($,P,I);for(let ot=0;ot<q.length;ot++)G(q[ot],P,I,F);i(k.anchor,P,I);return}if(j===xo){x(k,P,I);return}if(F!==2&&X&1&&V)if(F===0)V.beforeEnter($),i($,P,I),ye(()=>V.enter($),N);else{const{leave:ot,delayLeave:at,afterLeave:vt}=V,gt=()=>i($,P,I),Mt=()=>{ot($,()=>{gt(),vt&&vt()})};at?at($,gt,Mt):Mt()}else i($,P,I)},tt=(k,P,I,F=!1,N=!1)=>{const{type:$,props:j,ref:V,children:q,dynamicChildren:X,shapeFlag:it,patchFlag:ot,dirs:at}=k;if(V!=null&&il(V,null,I,k,!0),it&256){P.ctx.deactivate(k);return}const vt=it&1&&at,gt=!Rs(k);let Mt;if(gt&&(Mt=j&&j.onVnodeBeforeUnmount)&&er(Mt,P,k),it&6)st(k.component,I,F);else{if(it&128){k.suspense.unmount(I,F);return}vt&&Wr(k,null,P,"beforeUnmount"),it&64?k.type.remove(k,P,I,N,St,F):X&&($!==xe||ot>0&&ot&64)?Z(X,P,I,!1,!0):($===xe&&ot&384||!N&&it&16)&&Z(q,P,I),F&&nt(k)}(gt&&(Mt=j&&j.onVnodeUnmounted)||vt)&&ye(()=>{Mt&&er(Mt,P,k),vt&&Wr(k,null,P,"unmounted")},I)},nt=k=>{const{type:P,el:I,anchor:F,transition:N}=k;if(P===xe){et(I,F);return}if(P===xo){C(k);return}const $=()=>{n(I),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(k.shapeFlag&1&&N&&!N.persisted){const{leave:j,delayLeave:V}=N,q=()=>j(I,$);V?V(k.el,$,q):q()}else $()},et=(k,P)=>{let I;for(;k!==P;)I=h(k),n(k),k=I;n(P)},st=(k,P,I)=>{const{bum:F,scope:N,update:$,subTree:j,um:V}=k;F&&Ps(F),N.stop(),$&&($.active=!1,tt(j,k,P,I)),V&&ye(V,P),ye(()=>{k.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},Z=(k,P,I,F=!1,N=!1,$=0)=>{for(let j=$;j<k.length;j++)tt(k[j],P,I,F,N)},lt=k=>k.shapeFlag&6?lt(k.component.subTree):k.shapeFlag&128?k.suspense.next():h(k.anchor||k.el);let ft=!1;const yt=(k,P,I)=>{k==null?P._vnode&&tt(P._vnode,null,null,!0):v(P._vnode||null,k,P,null,null,null,I),ft||(ft=!0,Sc(),Fh(),ft=!1),P._vnode=k},St={p:v,um:tt,m:G,r:nt,mt:B,mc:_,pc:z,pbc:M,n:lt,o:e};let rt,ct;return t&&([rt,ct]=t(St)),{render:yt,hydrate:rt,createApp:gm(yt,rt)}}function bo({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Hr({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function _m(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Qh(e,t,r=!1){const i=e.children,n=t.children;if(bt(i)&&bt(n))for(let s=0;s<i.length;s++){const a=i[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=Dr(n[s]),o.el=a.el),r||Qh(a,o)),o.type===Ya&&(o.el=a.el)}}function Em(e){const t=e.slice(),r=[0];let i,n,s,a,o;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(n=r[r.length-1],e[n]<u){t[i]=n,r.push(i);continue}for(s=0,a=r.length-1;s<a;)o=s+a>>1,e[r[o]]<u?s=o+1:a=o;u<e[r[s]]&&(s>0&&(t[i]=r[s-1]),r[s]=i)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=t[a];return r}function td(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:td(t)}const km=e=>e.__isTeleport,xe=Symbol.for("v-fgt"),Ya=Symbol.for("v-txt"),ti=Symbol.for("v-cmt"),xo=Symbol.for("v-stc"),xn=[];let Ue=null;function Yt(e=!1){xn.push(Ue=e?null:[])}function Mm(){xn.pop(),Ue=xn[xn.length-1]||null}let An=1;function Rc(e){An+=e}function ed(e){return e.dynamicChildren=An>0?Ue||_i:null,Mm(),An>0&&Ue&&Ue.push(e),e}function re(e,t,r,i,n,s){return ed(Dt(e,t,r,i,n,s,!0))}function rd(e,t,r,i,n){return ed(Ce(e,t,r,i,n,!0))}function Pm(e){return e?e.__v_isVNode===!0:!1}function Zi(e,t){return e.type===t.type&&e.key===t.key}const qa="__vInternal",id=({key:e})=>e??null,As=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Jt(e)||le(e)||Ct(e)?{i:Te,r:e,k:t,f:!!r}:e:null);function Dt(e,t=null,r=null,i=0,n=null,s=e===xe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&id(t),ref:t&&As(t),scopeId:Xa,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Te};return o?(lu(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=Jt(r)?8:16),An>0&&!a&&Ue&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ue.push(l),l}const Ce=Dm;function Dm(e,t=null,r=null,i=0,n=null,s=!1){if((!e||e===jg)&&(e=ti),Pm(e)){const o=Bi(e,t,!0);return r&&lu(o,r),An>0&&!s&&Ue&&(o.shapeFlag&6?Ue[Ue.indexOf(e)]=o:Ue.push(o)),o.patchFlag|=-2,o}if(Gm(e)&&(e=e.__vccOpts),t){t=Tm(t);let{class:o,style:l}=t;o&&!Jt(o)&&(t.class=ql(o)),Gt(l)&&(Dh(l)&&!bt(l)&&(l=ie({},l)),t.style=Ha(l))}const a=Jt(e)?1:$g(e)?128:km(e)?64:Gt(e)?4:Ct(e)?2:0;return Dt(e,t,r,i,n,a,s,!0)}function Tm(e){return e?Dh(e)||qa in e?ie({},e):e:null}function Bi(e,t,r=!1){const{props:i,ref:n,patchFlag:s,children:a}=e,o=t?Am(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&id(o),ref:t&&t.ref?r&&n?bt(n)?n.concat(As(t)):[n,As(t)]:As(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xe?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Bi(e.ssContent),ssFallback:e.ssFallback&&Bi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Rm(e=" ",t=0){return Ce(Ya,null,e,t)}function nd(e="",t=!1){return t?(Yt(),rd(ti,null,e)):Ce(ti,null,e)}function nr(e){return e==null||typeof e=="boolean"?Ce(ti):bt(e)?Ce(xe,null,e.slice()):typeof e=="object"?Dr(e):Ce(Ya,null,String(e))}function Dr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Bi(e)}function lu(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(bt(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),lu(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!(qa in t)?t._ctx=Te:n===3&&Te&&(Te.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ct(t)?(t={default:t,_ctx:Te},r=32):(t=String(t),i&64?(r=16,t=[Rm(t)]):r=8);e.children=t,e.shapeFlag|=r}function Am(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=ql([t.class,i.class]));else if(n==="style")t.style=Ha([t.style,i.style]);else if(Na(n)){const s=t[n],a=i[n];a&&s!==a&&!(bt(s)&&s.includes(a))&&(t[n]=s?[].concat(s,a):a)}else n!==""&&(t[n]=i[n])}return t}function er(e,t,r,i=null){qe(e,t,7,[r,i])}const Om=Uh();let Im=0;function Bm(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||Om,s={uid:Im++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new ng(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qh(i,n),emitsOptions:Nh(i,n),emit:null,emitted:null,propsDefaults:It,inheritAttrs:i.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Lg.bind(null,s),e.ce&&e.ce(s),s}let ve=null,ta,nl;{const e=ph(),t=(r,i)=>{let n;return(n=e[r])||(n=e[r]=[]),n.push(i),s=>{n.length>1?n.forEach(a=>a(s)):n[0](s)}};ta=t("__VUE_INSTANCE_SETTERS__",r=>ve=r),nl=t("__VUE_SSR_SETTERS__",r=>Ka=r)}const Vn=e=>{const t=ve;return ta(e),e.scope.on(),()=>{e.scope.off(),ta(t)}},Ac=()=>{ve&&ve.scope.off(),ta(null)};function sd(e){return e.vnode.shapeFlag&4}let Ka=!1;function Lm(e,t=!1){t&&nl(t);const{props:r,children:i}=e.vnode,n=sd(e);mm(e,r,n,t),xm(e,i);const s=n?Fm(e,t):void 0;return t&&nl(!1),s}function Fm(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Th(new Proxy(e.ctx,um));const{setup:i}=r;if(i){const n=e.setupContext=i.length>1?Nm(e):null,s=Vn(e);ai();const a=Ir(i,e,0,[e.props,n]);if(oi(),s(),ch(a)){if(a.then(Ac,Ac),t)return a.then(o=>{Oc(e,o,t)}).catch(o=>{ja(o,e,0)});e.asyncDep=a}else Oc(e,a,t)}else ad(e,t)}function Oc(e,t,r){Ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Gt(t)&&(e.setupState=Oh(t)),ad(e,r)}let Ic;function ad(e,t,r){const i=e.type;if(!e.render){if(!t&&Ic&&!i.render){const n=i.template||au(e).template;if(n){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=i,u=ie(ie({isCustomElement:s,delimiters:o},a),l);i.render=Ic(n,u)}}e.render=i.render||Be}{const n=Vn(e);ai();try{cm(e)}finally{oi(),n()}}}function zm(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return _e(e,"get","$attrs"),t[r]}}))}function Nm(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return zm(e)},slots:e.slots,emit:e.emit,expose:t}}function Ja(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Oh(Th(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in yn)return yn[r](e)},has(t,r){return r in t||r in yn}}))}function Gm(e){return Ct(e)&&"__vccOpts"in e}const Wm=(e,t)=>Mg(e,t,Ka),Hm="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Vm="http://www.w3.org/2000/svg",jm="http://www.w3.org/1998/Math/MathML",Tr=typeof document<"u"?document:null,Bc=Tr&&Tr.createElement("template"),$m={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t==="svg"?Tr.createElementNS(Vm,e):t==="mathml"?Tr.createElementNS(jm,e):Tr.createElement(e,r?{is:r}:void 0);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>Tr.createTextNode(e),createComment:e=>Tr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Tr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,i,n,s){const a=r?r.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===s||!(n=n.nextSibling)););else{Bc.innerHTML=i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e;const o=Bc.content;if(i==="svg"||i==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},Xm=Symbol("_vtc");function Um(e,t,r){const i=e[Xm];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Lc=Symbol("_vod"),Ym=Symbol("_vsh"),qm=Symbol(""),Km=/(^|;)\s*display\s*:/;function Jm(e,t,r){const i=e.style,n=Jt(r);let s=!1;if(r&&!n){if(t)if(Jt(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&Os(i,o,"")}else for(const a in t)r[a]==null&&Os(i,a,"");for(const a in r)a==="display"&&(s=!0),Os(i,a,r[a])}else if(n){if(t!==r){const a=i[qm];a&&(r+=";"+a),i.cssText=r,s=Km.test(r)}}else t&&e.removeAttribute("style");Lc in e&&(e[Lc]=s?i.display:"",e[Ym]&&(i.display="none"))}const Fc=/\s*!important$/;function Os(e,t,r){if(bt(r))r.forEach(i=>Os(e,t,i));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=Zm(e,t);Fc.test(r)?e.setProperty(ji(i),r.replace(Fc,""),"important"):e[i]=r}}const zc=["Webkit","Moz","ms"],So={};function Zm(e,t){const r=So[t];if(r)return r;let i=Oi(t);if(i!=="filter"&&i in e)return So[t]=i;i=dh(i);for(let n=0;n<zc.length;n++){const s=zc[n]+i;if(s in e)return So[t]=s}return t}const Nc="http://www.w3.org/1999/xlink";function Qm(e,t,r,i,n){if(i&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(Nc,t.slice(6,t.length)):e.setAttributeNS(Nc,t,r);else{const s=ig(t);r==null||s&&!vh(r)?e.removeAttribute(t):e.setAttribute(t,s?"":r)}}function t0(e,t,r,i,n,s,a){if(t==="innerHTML"||t==="textContent"){i&&a(i,n,s),e[t]=r??"";return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const u=o==="OPTION"?e.getAttribute("value")||"":e.value,c=r??"";(u!==c||!("_value"in e))&&(e.value=c),r==null&&e.removeAttribute(t),e._value=r;return}let l=!1;if(r===""||r==null){const u=typeof e[t];u==="boolean"?r=vh(r):r==null&&u==="string"?(r="",l=!0):u==="number"&&(r=0,l=!0)}try{e[t]=r}catch{}l&&e.removeAttribute(t)}function di(e,t,r,i){e.addEventListener(t,r,i)}function e0(e,t,r,i){e.removeEventListener(t,r,i)}const Gc=Symbol("_vei");function r0(e,t,r,i,n=null){const s=e[Gc]||(e[Gc]={}),a=s[t];if(i&&a)a.value=i;else{const[o,l]=i0(t);if(i){const u=s[t]=a0(i,n);di(e,o,u,l)}else a&&(e0(e,o,a,l),s[t]=void 0)}}const Wc=/(?:Once|Passive|Capture)$/;function i0(e){let t;if(Wc.test(e)){t={};let i;for(;i=e.match(Wc);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ji(e.slice(2)),t]}let Co=0;const n0=Promise.resolve(),s0=()=>Co||(n0.then(()=>Co=0),Co=Date.now());function a0(e,t){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;qe(o0(i,r.value),t,5,[i])};return r.value=e,r.attached=s0(),r}function o0(e,t){if(bt(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const Hc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,l0=(e,t,r,i,n,s,a,o,l)=>{const u=n==="svg";t==="class"?Um(e,i,u):t==="style"?Jm(e,r,i):Na(t)?Xl(t)||r0(e,t,r,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):u0(e,t,i,u))?t0(e,t,i,s,a,o,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Qm(e,t,i,u))};function u0(e,t,r,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&Hc(t)&&Ct(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Hc(t)&&Jt(r)?!1:t in e}const Vc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return bt(t)?r=>Ps(t,r):t};function c0(e){e.target.composing=!0}function jc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const wo=Symbol("_assign"),f0={created(e,{modifiers:{lazy:t,trim:r,number:i}},n){e[wo]=Vc(n);const s=i||n.props&&n.props.type==="number";di(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;r&&(o=o.trim()),s&&(o=Uo(o)),e[wo](o)}),r&&di(e,"change",()=>{e.value=e.value.trim()}),t||(di(e,"compositionstart",c0),di(e,"compositionend",jc),di(e,"change",jc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:i,number:n}},s){if(e[wo]=Vc(s),e.composing)return;const a=n||e.type==="number"?Uo(e.value):e.value,o=t??"";a!==o&&(document.activeElement===e&&e.type!=="range"&&(r||i&&e.value.trim()===o)||(e.value=o))}},h0=ie({patchProp:l0},$m);let $c;function d0(){return $c||($c=Cm(h0))}const p0=(...e)=>{const t=d0().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=g0(i);if(!n)return;const s=t._component;!Ct(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const a=r(n,!1,v0(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t};function v0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function g0(e){return Jt(e)?document.querySelector(e):e}const m0="/StickerEditor/assets/add1-DpgXoKJM.png",y0="/StickerEditor/assets/add2-RRQ8YQ0u.png",b0="/StickerEditor/assets/add3-DWmAwVb9.png",x0="/StickerEditor/assets/add4-DrcPqAIq.png",S0="/StickerEditor/assets/add5-BIXogDIN.png",C0="/StickerEditor/assets/add6-D0aQ2SaT.png",w0={class:"bg-Surface left-0 h-screen w-[22vw] py-5"},_0={class:"max-h-[95vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},E0=["src","alt","onClick"],k0={__name:"AsideLeft",setup(e){let t=Se([{src:m0,alt:"add on 1"},{src:y0,alt:"add on 2"},{src:b0,alt:"add on 3"},{src:x0,alt:"add on 4"},{src:S0,alt:"add on 5"},{src:C0,alt:"add on 6"}]);const r=lr("handleStickerSelected"),i=n=>{r(n)};return(n,s)=>(Yt(),re("div",w0,[Dt("div",_0,[(Yt(!0),re(xe,null,Zs(ee(t),(a,o)=>(Yt(),re("div",{key:o,class:"object-fill flex justify-center items-center"},[Dt("img",{class:"max-w-[8vw] cursor-pointer hover:opacity-60 transition-opacity duration-200",src:a.src,alt:a.alt,onClick:l=>i(a.src)},null,8,E0)]))),128))])]))}},M0={class:"flex flex-col gap-5"},P0={class:"bg-Surface h-[50vh] w-[22vw] relative rounded-bl-xl",ref:"parentContainer"},D0=Dt("label",{Class:"text-Primary font-semibold flex justify-center mb-2 mt-2 text-xl"},"Gallery",-1),T0={class:"max-h-[42vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},R0=["onClick"],A0=["src","alt"],O0={class:"bg-Surface h-[50vh] w-[22vw] relative rounded-tl-xl",ref:"parentContainer"},I0=Dt("label",{Class:"text-Primary font-semibold flex justify-center mb-2 mt-2 text-xl"},"Saved image",-1),B0={class:"max-h-[42vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},L0=["onClick"],F0=["src"],z0={__name:"AsideRight",emits:["selectImage"],setup(e,{emit:t}){const r=lr("images"),i=lr("savedImages"),n=t,s=a=>{n("selectImage",a)};return(a,o)=>(Yt(),re("div",M0,[Dt("div",P0,[D0,Dt("div",T0,[(Yt(!0),re(xe,null,Zs(ee(r),(l,u)=>(Yt(),re("div",{key:u,class:"object-fill flex justify-center items-center cursor-pointer",onClick:c=>s(l.src)},[Dt("img",{class:"min-w-[8vw]",src:l.src,alt:l.alt},null,8,A0)],8,R0))),128))])],512),Dt("div",O0,[I0,Dt("div",B0,[(Yt(!0),re(xe,null,Zs(ee(i),(l,u)=>(Yt(),re("div",{key:u,class:"object-fill flex justify-center items-center cursor-pointer",onClick:c=>s(l)},[Dt("img",{class:"max-w-[8vw]",src:l,alt:"Saved Image"},null,8,F0)],8,L0))),128))])],512)]))}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var od=function(e,t){return(od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])})(e,t)};function Lt(e,t){function r(){this.constructor=e}od(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Xc(e,t,r,i){return new(r||(r=Promise))(function(n,s){function a(u){try{l(i.next(u))}catch(c){s(c)}}function o(u){try{l(i.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?n(u.value):(c=u.value,c instanceof r?c:new r(function(f){f(c)})).then(a,o)}l((i=i.apply(e,t||[])).next())})}function Uc(e,t){var r,i,n,s,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=2&c[0]?i.return:c[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,c[1])).done)return n;switch(i=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,i=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(n=a.trys,!((n=n.length>0&&n[n.length-1])||c[0]!==6&&c[0]!==2)){a=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){a.label=c[1];break}if(c[0]===6&&a.label<n[1]){a.label=n[1],n=c;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(c);break}n[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(f){c=[6,f],i=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function On(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,n++)i[n]=s[a];return i}var J=function(){function e(){}return e.createDefs=function(){return document.createElementNS("http://www.w3.org/2000/svg","defs")},e.setAttributes=function(t,r){for(var i=0,n=r;i<n.length;i++){var s=n[i],a=s[0],o=s[1];t.setAttribute(a,o)}},e.createRect=function(t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.setAttribute("width",t.toString()),n.setAttribute("height",r.toString()),i&&e.setAttributes(n,i),n},e.createLine=function(t,r,i,n,s){var a=document.createElementNS("http://www.w3.org/2000/svg","line");return a.setAttribute("x1",t.toString()),a.setAttribute("y1",r.toString()),a.setAttribute("x2",i.toString()),a.setAttribute("y2",n.toString()),s&&e.setAttributes(a,s),a},e.createPolygon=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","polygon");return i.setAttribute("points",t),r&&e.setAttributes(i,r),i},e.createCircle=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",(t/2).toString()),i.setAttribute("cy",(t/2).toString()),i.setAttribute("r",t.toString()),r&&e.setAttributes(i,r),i},e.createEllipse=function(t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return n.setAttribute("cx",(t/2).toString()),n.setAttribute("cy",(r/2).toString()),n.setAttribute("rx",(t/2).toString()),n.setAttribute("ry",(r/2).toString()),i&&e.setAttributes(n,i),n},e.createGroup=function(t){var r=document.createElementNS("http://www.w3.org/2000/svg","g");return t&&e.setAttributes(r,t),r},e.createTransform=function(){return document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGTransform()},e.createMarker=function(t,r,i,n,s,a,o){var l=document.createElementNS("http://www.w3.org/2000/svg","marker");return e.setAttributes(l,[["id",t],["orient",r],["markerWidth",i.toString()],["markerHeight",n.toString()],["refX",s.toString()],["refY",a.toString()]]),l.appendChild(o),l},e.createText=function(t){var r=document.createElementNS("http://www.w3.org/2000/svg","text");return r.setAttribute("x","0"),r.setAttribute("y","0"),t&&e.setAttributes(r,t),r},e.createTSpan=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","tspan");return i.textContent=t,r&&e.setAttributes(i,r),i},e.createImage=function(t){var r=document.createElementNS("http://www.w3.org/2000/svg","image");return t&&e.setAttributes(r,t),r},e.createPoint=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGPoint();return i.x=t,i.y=r,i},e.createPath=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",t),r&&e.setAttributes(i,r),i},e}(),Yc=function(){function e(){}return e.addKey=function(t){e.key=t},Object.defineProperty(e,"isLicensed",{get:function(){return!!e.key&&new RegExp(/^MJS2-[A-Z][0-9]{3}-[A-Z][0-9]{3}-[0-9]{4}$/,"i").test(e.key)},enumerable:!1,configurable:!0}),e}(),N0=function(){function e(){this.naturalSize=!1,this.imageType="image/png",this.markersOnly=!1}return e.prototype.rasterize=function(t,r,i){var n=this;return new Promise(function(s){var a=i!==void 0?i:document.createElement("canvas");t===null&&(n.markersOnly=!0,n.naturalSize=!1);var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("width",r.width.baseVal.valueAsString),o.setAttribute("height",r.height.baseVal.valueAsString),o.setAttribute("viewBox","0 0 "+r.viewBox.baseVal.width.toString()+" "+r.viewBox.baseVal.height.toString()),o.innerHTML=r.innerHTML,n.naturalSize===!0?(o.width.baseVal.value=t.naturalWidth,o.height.baseVal.value=t.naturalHeight):n.width!==void 0&&n.height!==void 0&&(o.width.baseVal.value=n.width,o.height.baseVal.value=n.height),a.width=o.width.baseVal.value,a.height=o.height.baseVal.value;var l=o.outerHTML,u=a.getContext("2d");n.markersOnly!==!0&&u.drawImage(t,0,0,a.width,a.height);var c=window.URL,f=new Image(a.width,a.height);f.setAttribute("crossOrigin","anonymous");var h=new Blob([l],{type:"image/svg+xml"}),d=c.createObjectURL(h);f.onload=function(){u.drawImage(f,0,0),c.revokeObjectURL(d);var p=a.toDataURL(n.imageType,n.imageQuality);s(p)},f.src=d})},e}(),qc=function(){},G0=function(){function e(t){this._classNamePrefixBase="__markerjs2_",this.classes=[],this.rules=[],this.settings=this.defaultSettings,this._classNamePrefix=this._classNamePrefixBase+"_"+t+"_"}return Object.defineProperty(e.prototype,"classNamePrefixBase",{get:function(){return this._classNamePrefixBase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNamePrefix",{get:function(){return this._classNamePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultSettings",{get:function(){return{canvasBackgroundColor:"#ffffff",toolbarBackgroundColor:"#111111",toolbarBackgroundHoverColor:"#333333",toolbarColor:"#eeeeee",toolbarHeight:40,toolboxColor:"#eeeeee",toolboxAccentColor:"#3080c3",undoButtonVisible:!0,redoButtonVisible:!1,zoomButtonVisible:!1,zoomOutButtonVisible:!1,clearButtonVisible:!1,resultButtonBlockVisible:!0,logoPosition:"left"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fadeInAnimationClassName",{get:function(){return this.classNamePrefix+"fade_in"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fadeOutAnimationClassName",{get:function(){return this.classNamePrefix+"fade_out"},enumerable:!1,configurable:!0}),e.prototype.addClass=function(t){return this.styleSheet===void 0&&this.addStyleSheet(),t.name=""+this.classNamePrefix+t.localName,this.classes.push(t),this.styleSheet.sheet.insertRule("."+t.name+" {"+t.style+"}",this.styleSheet.sheet.cssRules.length),t},e.prototype.addRule=function(t){this.styleSheet===void 0&&this.addStyleSheet(),this.rules.push(t),this.styleSheet.sheet.insertRule(t.selector+" {"+t.style+"}",this.styleSheet.sheet.cssRules.length)},e.prototype.addStyleSheet=function(){var t;this.styleSheet=document.createElement("style"),((t=this.styleSheetRoot)!==null&&t!==void 0?t:document.head).appendChild(this.styleSheet),this.addRule(new Xe("."+this.classNamePrefix+" h3","font-family: sans-serif")),this.addRule(new Xe("@keyframes "+this.classNamePrefix+"_fade_in_animation_frames",`
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
    `)),this.addRule(new Xe("@keyframes "+this.classNamePrefix+"_fade_out_animation_frames",`
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
    `)),this.addClass(new Ut("fade_in",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_in_animation_frames;
    `)),this.addClass(new Ut("fade_out",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_out_animation_frames;
    `))},e.prototype.removeStyleSheet=function(){var t;this.styleSheet&&(((t=this.styleSheetRoot)!==null&&t!==void 0?t:document.head).removeChild(this.styleSheet),this.styleSheet=void 0)},e}(),Xe=function(e,t){this.selector=e,this.style=t},Ut=function(e,t){this.localName=e,this.style=t},W0=function(){function e(t,r,i,n,s){this.buttons=[],this.markerButtons=[],this.buttonClickListeners=[],this.markerjsContainer=t,this.displayMode=r,this.markerItems=i,this.uiStyleSettings=n,this.styles=s,this.addStyles(),this.adjustLayout=this.adjustLayout.bind(this),this.overflowButtonClicked=this.overflowButtonClicked.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this)}return e.prototype.show=function(t){var r=this;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=t,this.uiContainer.className=this.toolbarStyleClass.name+" "+this.styles.fadeInAnimationClassName+" "+(this.uiStyleSettings.toolbarStyleColorsClassName?this.uiStyleSettings.toolbarStyleColorsClassName:this.toolbarStyleColorsClass.name);var i=document.createElement("div");i.className=this.toolbarBlockStyleClass.name,i.style.whiteSpace="nowrap",this.uiContainer.appendChild(i),this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M10.07 14.27a.997.997 0 011.33.48l2.3 4.99 1.8-.85-2.31-4.98c-.24-.5-.02-1.1.48-1.33l.28-.08 2.3-.45L8 5.12V15.9l1.82-1.47.25-.16m3.57 7.7a.99.99 0 01-1.33-.47l-2.18-4.74-2.51 2.02c-.17.14-.38.22-.62.22a1 1 0 01-1-1V3a1 1 0 011-1c.24 0 .47.09.64.23l.01-.01 11.49 9.64a1.001 1.001 0 01-.44 1.75l-3.16.62 2.2 4.73c.26.5.02 1.09-.48 1.32l-3.62 1.69z"/></svg>',"select","Select mode"),this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M9 3v1H4v2h1v13a2 2 0 002 2h10a2 2 0 002-2V6h1V4h-5V3H9M7 6h10v13H7V6m2 2v9h2V8H9m4 0v9h2V8h-2z"/></svg>',"delete","Delete marker"),this.uiStyleSettings.clearButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M19.36 2.72l1.42 1.42-5.72 5.71c1.07 1.54 1.22 3.39.32 4.59L9.06 8.12c1.2-.9 3.05-.75 4.59.32l5.71-5.72M5.93 17.57c-2.01-2.01-3.24-4.41-3.58-6.65l4.88-2.09 7.44 7.44-2.09 4.88c-2.24-.34-4.64-1.57-6.65-3.58z"/></svg>',"clear","Delete all markers"),this.uiStyleSettings.undoButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M12.5 8c-2.65 0-5.05 1-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>',"undo","Undo"),this.uiStyleSettings.redoButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 017.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/></svg>',"redo","Redo"),this.uiStyleSettings.zoomButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M15.5 14l5 5-1.5 1.5-5-5v-.79l-.27-.28A6.471 6.471 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3 6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.57 4.23l.28.27h.79m-6 0C12 14 14 12 14 9.5S12 5 9.5 5 5 7 5 9.5 7 14 9.5 14m2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"/></svg>',"zoom","Zoom in"),this.uiStyleSettings.zoomButtonVisible&&this.uiStyleSettings.zoomOutButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 009.5 3 6.5 6.5 0 003 9.5 6.5 6.5 0 009.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.5-1.5-5-5m-6 0C7 14 5 12 5 9.5S7 5 9.5 5 14 7 14 9.5 12 14 9.5 14M7 9h5v1H7V9z"/></svg>',"zoom-out","Zoom out"),this.uiStyleSettings.notesButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M18.13 12l1.26-1.26c.44-.44 1-.68 1.61-.74V9l-6-6H5c-1.11 0-2 .89-2 2v14a2 2 0 002 2h6v-1.87l.13-.13H5V5h7v7h6.13M14 4.5l5.5 5.5H14V4.5m5.13 9.33l2.04 2.04L15.04 22H13v-2.04l6.13-6.13m3.72.36l-.98.98-2.04-2.04.98-.98c.19-.2.52-.2.72 0l1.32 1.32c.2.2.2.53 0 .72z"/></svg>',"notes","Notes"),this.markerButtonBlock=document.createElement("div"),this.markerButtonBlock.className=this.toolbarBlockStyleClass.name,this.markerButtonBlock.style.flexGrow="2",this.markerButtonBlock.style.textAlign="center",this.uiContainer.appendChild(this.markerButtonBlock),this.markerButtonOverflowBlock=document.createElement("div"),this.markerButtonOverflowBlock.className=this.toolbarOverflowBlockStyleClass.name+" "+(this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName?this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName:this.toolbarOverflowBlockStyleColorsClass.name),this.markerButtonOverflowBlock.style.display="none",this.uiContainer.appendChild(this.markerButtonOverflowBlock),this.markerItems&&(this.markerItems.forEach(function(s){var a=document.createElement("div");a.className=""+r.toolbarButtonStyleClass.name,a.setAttribute("data-type-name",s.typeName),a.setAttribute("aria-label",s.title),a.setAttribute("title",s.title),a.innerHTML=s.icon,a.addEventListener("click",function(){r.markerToolbarButtonClicked(a,s)}),r.buttons.push(a),r.markerButtons.push(a)}),this.overflowButton=document.createElement("div"),this.overflowButton.className=this.toolbarButtonStyleClass.name+" "+(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name),this.overflowButton.innerHTML='<svg viewBox="0 0 24 24"><path d="M12 16a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2z"/></svg>',this.overflowButton.addEventListener("click",this.overflowButtonClicked),this.markerButtonBlock.appendChild(this.overflowButton));var n=document.createElement("div");n.className=this.toolbarBlockStyleClass.name,n.style.whiteSpace="nowrap",n.style.display=this.uiStyleSettings.resultButtonBlockVisible!==!1?"":"none",this.uiContainer.appendChild(n),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M9 20.42l-6.21-6.21 2.83-2.83L9 14.77l9.88-9.89 2.83 2.83L9 20.42z"/></svg>',"render","Save and close"),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M20 6.91L17.09 4 12 9.09 6.91 4 4 6.91 9.09 12 4 17.09 6.91 20 12 14.91 17.09 20 20 17.09 14.91 12 20 6.91z"/></svg>',"close","Close"),this.markerjsContainer.appendChild(this.uiContainer),this.setSelectMode(),this.setCurrentMarker(),this.adjustLayout()},e.prototype.addButtonClickListener=function(t){this.buttonClickListeners.push(t)},e.prototype.removeButtonClickListener=function(t){this.buttonClickListeners.indexOf(t)>-1&&this.buttonClickListeners.splice(this.buttonClickListeners.indexOf(t),1)},e.prototype.setSelectMode=function(){this.resetButtonStyles(),this.setActiveButton(this.buttons[0])},e.prototype.adjustLayout=function(){if(this.markerButtons&&this.markerButtons.length>0){var t=Math.floor(this.markerButtonBlock.clientWidth/this.uiStyleSettings.toolbarHeight)-1;this.markerButtonBlock.innerHTML="",this.markerButtonOverflowBlock.innerHTML="";for(var r=0;r<this.markerButtons.length;r++)r<t||r===t&&this.markerButtons.length-1===t?this.markerButtonBlock.appendChild(this.markerButtons[r]):(r===t&&this.markerButtonBlock.appendChild(this.overflowButton),this.markerButtonOverflowBlock.appendChild(this.markerButtons[r]))}},e.prototype.overflowButtonClicked=function(){this.markerButtonOverflowBlock.style.display!=="none"?(this.markerButtonOverflowBlock.className=this.markerButtonOverflowBlock.className.replace(this.styles.fadeInAnimationClassName,""),this.markerButtonOverflowBlock.style.display="none"):(this.markerButtonOverflowBlock.className+=" "+this.styles.fadeInAnimationClassName,this.markerButtonOverflowBlock.style.top=this.uiContainer.offsetTop+this.overflowButton.offsetHeight+"px",this.markerButtonOverflowBlock.style.right=this.uiContainer.offsetWidth-this.overflowButton.offsetLeft-this.overflowButton.offsetWidth+2*this.uiContainer.offsetLeft+"px",this.markerButtonOverflowBlock.style.display="inline-block")},e.prototype.resetButtonStyles=function(){var t=this;this.buttons.forEach(function(r){r.className=r.className.replace(t.uiStyleSettings.toolbarButtonStyleColorsClassName?t.uiStyleSettings.toolbarButtonStyleColorsClassName:t.toolbarButtonStyleColorsClass.name,"").trim(),r.className=r.className.replace(t.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?t.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:t.toolbarActiveButtonStyleColorsClass.name,"").trim(),r.className+=" "+(t.uiStyleSettings.toolbarButtonStyleColorsClassName?t.uiStyleSettings.toolbarButtonStyleColorsClassName:t.toolbarButtonStyleColorsClass.name)})},e.prototype.addActionButton=function(t,r,i,n){var s=this,a=document.createElement("div");switch(a.className=""+this.toolbarButtonStyleClass.name,a.innerHTML=r,a.setAttribute("role","button"),a.setAttribute("data-action",i),a.title=n,a.setAttribute("aria-label",n),a.addEventListener("click",function(){s.actionToolbarButtonClicked(a,i)}),i){case"select":a.style.fill=this.uiStyleSettings.selectButtonColor;break;case"delete":case"clear":a.style.fill=this.uiStyleSettings.deleteButtonColor;break;case"undo":case"redo":a.style.fill=this.uiStyleSettings.selectButtonColor;break;case"render":a.style.fill=this.uiStyleSettings.okButtonColor;break;case"close":a.style.fill=this.uiStyleSettings.closeButtonColor}t.appendChild(a),this.buttons.push(a)},e.prototype.addStyles=function(){this.toolbarStyleClass=this.styles.addClass(new Ut("toolbar",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: row;
      justify-content: space-between;      
      height: `+this.uiStyleSettings.toolbarHeight+`px;
      box-sizing: content-box;
      `+(this.displayMode==="inline"?"border-top-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-top-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolbarStyleColorsClass=this.styles.addClass(new Ut("toolbar_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      box-shadow: 0px 3px rgba(33, 33, 33, 0.1);
    `)),this.toolbarBlockStyleClass=this.styles.addClass(new Ut("toolbar-block",`
        display: inline-block;
        box-sizing: content-box;
    `)),this.toolbarOverflowBlockStyleClass=this.styles.addClass(new Ut("toolbar-overflow-block",`
        position: absolute;
        top: `+this.uiStyleSettings.toolbarHeight+`px;
        max-width: `+2*this.uiStyleSettings.toolbarHeight+`px;
        z-index: 10;
        box-sizing: content-box;
      `)),this.toolbarOverflowBlockStyleColorsClass=this.styles.addClass(new Ut("toolbar-overflow-block_colors",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      `));var t=this.uiStyleSettings.toolbarHeight/4;this.toolbarButtonStyleClass=this.styles.addClass(new Ut("toolbar_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*t)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*t)+`px;
      padding: `+t+`px;
      box-sizing: content-box;
    `)),this.toolbarButtonStyleColorsClass=this.styles.addClass(new Ut("toolbar_button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolbarActiveButtonStyleColorsClass=this.styles.addClass(new Ut("toolbar_active_button",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new Xe("."+this.toolbarButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new Xe("."+this.toolbarButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `))},e.prototype.markerToolbarButtonClicked=function(t,r){this.setActiveButton(t),this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(i){return i("marker",r)}),this.markerButtonOverflowBlock.style.display="none"},e.prototype.actionToolbarButtonClicked=function(t,r){this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(i){return i("action",r)}),this.markerButtonOverflowBlock.style.display="none",this.setActiveButton(this.buttons[0])},e.prototype.setActiveButton=function(t){this.resetButtonStyles(),t.className=t.className.replace(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name,"").trim(),t.className+=" "+(this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:this.toolbarActiveButtonStyleColorsClass.name)},e.prototype.setActiveMarkerButton=function(t){var r=this.markerButtons.find(function(i){return i.getAttribute("data-type-name")===t});r&&this.setActiveButton(r)},e.prototype.setCurrentMarker=function(t){var r=this;this.currentMarker=t,this.buttons.filter(function(i){return/delete|notes/.test(i.getAttribute("data-action"))}).forEach(function(i){r.currentMarker===void 0?(i.style.fillOpacity="0.4",i.style.pointerEvents="none"):(i.style.fillOpacity="1",i.style.pointerEvents="all")})},e}(),H0=function(){function e(t,r,i,n){this.panels=[],this.panelButtons=[],this.markerjsContainer=t,this.displayMode=r,this.uiStyleSettings=i,this.styles=n,this.panelButtonClick=this.panelButtonClick.bind(this),this.addStyles()}return e.prototype.addStyles=function(){var t;this.toolboxStyleClass=this.styles.addClass(new Ut("toolbox",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      font-family: sans-serif;
      `+(this.displayMode==="popup"?"height:"+2.5*this.uiStyleSettings.toolbarHeight+"px;":"")+`
      box-sizing: content-box;
      `+(this.displayMode==="popup"?"background-color: "+this.uiStyleSettings.canvasBackgroundColor+";":"")+`
      `+(this.displayMode==="inline"?"border-bottom-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-bottom-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolboxStyleColorsClass=this.styles.addClass(new Ut("toolbox_colors",`
      color: `+this.uiStyleSettings.toolboxColor+`;
    `));var r=this.uiStyleSettings.toolbarHeight/4;this.toolboxButtonRowStyleClass=this.styles.addClass(new Ut("toolbox-button-row",`
      display: flex;
      cursor: default;
      box-sizing: content-box;
    `)),this.toolboxButtonRowStyleColorsClass=this.styles.addClass(new Ut("toolbox-button-row_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
    `)),this.toolboxPanelRowStyleClass=this.styles.addClass(new Ut("toolbox-panel-row",`
      display: flex;
      `+(this.displayMode==="inline"?"position: absolute;":"")+`
      `+(this.displayMode==="inline"?"bottom: "+this.uiStyleSettings.toolbarHeight+"px;":"")+`
      cursor: default;
      height: `+1.5*this.uiStyleSettings.toolbarHeight+`px;
      `+(this.displayMode==="inline"?"width: 100%;":"")+`
      box-sizing: content-box;
    `)),this.toolboxPanelRowStyleColorsClass=this.styles.addClass(new Ut("toolbox-panel-row_colors",`
      background-color: `+((t=this.uiStyleSettings.toolboxBackgroundColor)!==null&&t!==void 0?t:this.uiStyleSettings.toolbarBackgroundHoverColor)+`;
    `)),this.toolboxButtonStyleClass=this.styles.addClass(new Ut("toolbox_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*r)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*r)+`px;
      padding: `+r+`px;
      box-sizing: content-box;
    `)),this.toolboxButtonStyleColorsClass=this.styles.addClass(new Ut("toolbox-button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolboxActiveButtonStyleColorsClass=this.styles.addClass(new Ut("toolbox-active-button_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`;
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.styles.addRule(new Xe("."+this.toolboxButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new Xe("."+this.toolboxButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new Xe("."+this.toolboxPanelRowStyleClass.name+" > div",`
        scrollbar-width: thin;
        `)),this.styles.addRule(new Xe("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar",`
      height: 10px;
      width: 10px;
    `)),this.styles.addRule(new Xe("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-track",`
        background-color: transparent;
        `)),this.styles.addRule(new Xe("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-thumb",`
        background-color: #444;
        border-radius: 20px;
        border: 2px solid #aaa;
        `))},e.prototype.show=function(t){var r;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=t,this.uiContainer.className=this.toolboxStyleClass.name+" "+((r=this.uiStyleSettings.toolboxStyleColorsClassName)!==null&&r!==void 0?r:this.toolboxStyleColorsClass.name),this.markerjsContainer.appendChild(this.uiContainer)},e.prototype.setPanelButtons=function(t){var r,i,n=this;this.panels=t,this.uiContainer!==void 0&&(this.uiContainer.innerHTML="",this.panelRow=document.createElement("div"),this.panelRow.className=this.toolboxPanelRowStyleClass.name+" "+((r=this.uiStyleSettings.toolboxPanelRowStyleColorsClassName)!==null&&r!==void 0?r:this.toolboxPanelRowStyleColorsClass.name),this.uiContainer.appendChild(this.panelRow),this.buttonRow=document.createElement("div"),this.buttonRow.className=this.toolboxButtonRowStyleClass.name+" "+((i=this.uiStyleSettings.toolboxButtonRowStyleColorsClassName)!==null&&i!==void 0?i:this.toolboxButtonRowStyleColorsClass.name)+" ",this.uiContainer.appendChild(this.buttonRow),this.panelButtons.splice(0),this.panels.forEach(function(s){var a;s.uiStyleSettings=n.uiStyleSettings;var o=document.createElement("div");o.className=n.toolboxButtonStyleClass.name+" "+((a=n.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&a!==void 0?a:n.toolboxButtonStyleColorsClass.name),o.innerHTML=s.icon,o.title=s.title,o.setAttribute("role","button"),o.setAttribute("aria-label",s.title),s.id&&o.setAttribute("data-action",s.id),o.addEventListener("click",function(){n.panelButtonClick(s)}),n.panelButtons.push(o),n.buttonRow.appendChild(o)}),this.displayMode==="inline"?this.panelRow.style.display="none":this.panelRow.style.visibility="hidden")},e.prototype.panelButtonClick=function(t){var r=this,i=-1;if(t!==this.activePanel){i=this.panels.indexOf(t),this.panelRow.innerHTML="";var n=t.getUi();n.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.panelRow.appendChild(n),this.panelRow.style.display="flex",this.panelRow.style.visibility="visible",this.panelRow.className=this.panelRow.className.replace(this.styles.fadeOutAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeInAnimationClassName,this.activePanel=t}else this.activePanel=void 0,this.panelRow.className=this.panelRow.className.replace(this.styles.fadeInAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeOutAnimationClassName,setTimeout(function(){r.displayMode==="inline"?r.panelRow.style.display="none":r.panelRow.style.visibility="hidden"},200);this.panelButtons.forEach(function(s,a){var o,l;s.className=r.toolboxButtonStyleClass.name+" "+(a===i?""+((o=r.uiStyleSettings.toolboxActiveButtonStyleColorsClassName)!==null&&o!==void 0?o:r.toolboxActiveButtonStyleColorsClass.name):""+((l=r.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&l!==void 0?l:r.toolboxButtonStyleColorsClass.name))})},e}(),$i=function(){function e(t,r,i){this.title=t,this.icon=r,this._id=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e}(),we=function(e){function t(r,i,n,s,a){var o=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M17.5 12a1.5 1.5 0 01-1.5-1.5A1.5 1.5 0 0117.5 9a1.5 1.5 0 011.5 1.5 1.5 1.5 0 01-1.5 1.5m-3-4A1.5 1.5 0 0113 6.5 1.5 1.5 0 0114.5 5 1.5 1.5 0 0116 6.5 1.5 1.5 0 0114.5 8m-5 0A1.5 1.5 0 018 6.5 1.5 1.5 0 019.5 5 1.5 1.5 0 0111 6.5 1.5 1.5 0 019.5 8m-3 4A1.5 1.5 0 015 10.5 1.5 1.5 0 016.5 9 1.5 1.5 0 018 10.5 1.5 1.5 0 016.5 12M12 3a9 9 0 00-9 9 9 9 0 009 9 1.5 1.5 0 001.5-1.5c0-.39-.15-.74-.39-1-.23-.27-.38-.62-.38-1a1.5 1.5 0 011.5-1.5H16a5 5 0 005-5c0-4.42-4.03-8-9-8z"/></svg>',a||"color-picker-panel")||this;return o.colors=[],o.addTransparent=!1,o.colorBoxes=[],o.colors=i,o.currentColor=n,o.setCurrentColor=o.setCurrentColor.bind(o),o.getColorBox=o.getColorBox.bind(o),o}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.overflow="hidden",i.style.overflowX="scroll",i.style.whiteSpace="nowrap",this.colors.forEach(function(n){var s=r.getColorBox(n);i.appendChild(s),r.colorBoxes.push(s)}),i},t.prototype.getColorBox=function(r){var i=this,n=this.uiStyleSettings.toolbarHeight/4,s=this.uiStyleSettings.toolbarHeight-n,a=document.createElement("div");a.style.display="inline-block",a.style.boxSizing="content-box",a.style.width=s-2+"px",a.style.height=s-2+"px",a.style.padding="1px",a.style.marginRight="2px",a.style.marginBottom="2px",a.style.borderWidth="2px",a.style.borderStyle="solid",a.style.borderRadius=(s+2)/2+"px",a.style.borderColor=r===this.currentColor?this.uiStyleSettings.toolboxAccentColor:"transparent",a.addEventListener("click",function(){i.setCurrentColor(r,a)});var o=document.createElement("div");return o.style.display="inline-block",o.style.width=s-2+"px",o.style.height=s-2+"px",o.style.backgroundColor=r,o.style.borderRadius=s/2+"px",r==="transparent"&&(o.style.fill=this.uiStyleSettings.toolboxAccentColor,o.innerHTML=`<svg viewBox="0 0 24 24">
        <path d="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z" />
      </svg>`),a.appendChild(o),a},t.prototype.setCurrentColor=function(r,i){var n=this;this.currentColor=r,this.colorBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onColorChanged&&this.onColorChanged(r)},t}($i),ld=function(){function e(t,r,i){this._state="new",this._isSelected=!1,this._container=t,this._overlayContainer=r,this.globalSettings=i,this.stateChanged=this.stateChanged.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this)}return Object.defineProperty(e.prototype,"typeName",{get:function(){return Object.getPrototypeOf(this).constructor.typeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overlayContainer",{get:function(){return this._overlayContainer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.ownsTarget=function(t){return!1},Object.defineProperty(e.prototype,"isSelected",{get:function(){return this._isSelected},enumerable:!1,configurable:!0}),e.prototype.select=function(){this.container.style.cursor="move",this._isSelected=!0,this.manipulationStartState=this.getState()},e.prototype.deselect=function(){this.container.style.cursor="default",this._isSelected=!1,this.stateChanged()},e.prototype.pointerDown=function(t,r){},e.prototype.dblClick=function(t,r){},e.prototype.manipulate=function(t){},e.prototype.pointerUp=function(t){this.stateChanged()},e.prototype.dispose=function(){},e.prototype.addMarkerVisualToContainer=function(t){this.container.childNodes.length>0?this.container.insertBefore(t,this.container.childNodes[0]):this.container.appendChild(t)},e.prototype.getState=function(){return{typeName:e.typeName,state:this.state,notes:this.notes}},e.prototype.restoreState=function(t){this._state=t.state,this.notes=t.notes},e.prototype.scale=function(t,r){},e.prototype.colorChanged=function(t){this.onColorChanged&&this.onColorChanged(t),this.stateChanged()},e.prototype.fillColorChanged=function(t){this.onFillColorChanged&&this.onFillColorChanged(t),this.stateChanged()},e.prototype.stateChanged=function(){if(this.onStateChanged&&this.state!=="creating"&&this.state!=="new"){var t=this.getState();this.manipulationStartState!==void 0&&(this.manipulationStartState.state="select"),t.state="select",JSON.stringify(this.manipulationStartState)!=JSON.stringify(t)&&this.onStateChanged(this)}},e.typeName="MarkerBase",e}(),V0=function(){function e(){this.findGripByVisual=this.findGripByVisual.bind(this)}return e.prototype.findGripByVisual=function(t){return this.topLeft.ownsTarget(t)?this.topLeft:this.topCenter.ownsTarget(t)?this.topCenter:this.topRight.ownsTarget(t)?this.topRight:this.centerLeft.ownsTarget(t)?this.centerLeft:this.centerRight.ownsTarget(t)?this.centerRight:this.bottomLeft.ownsTarget(t)?this.bottomLeft:this.bottomCenter.ownsTarget(t)?this.bottomCenter:this.bottomRight.ownsTarget(t)?this.bottomRight:void 0},e}(),uu=function(){function e(){this.GRIP_SIZE=10,this.visual=J.createGroup(),this.visual.appendChild(J.createCircle(1.5*this.GRIP_SIZE,[["fill","transparent"]])),this.visual.appendChild(J.createCircle(this.GRIP_SIZE,[["fill","#cccccc"],["fill-opacity","0.7"],["stroke","#333333"],["stroke-width","2"],["stroke-opacity","0.7"]]))}return e.prototype.ownsTarget=function(t){return t===this.visual||t===this.visual.childNodes[0]||t===this.visual.childNodes[1]},e}(),fs=function(){function e(){}return e.toITransformMatrix=function(t){return{a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}},e.toSVGMatrix=function(t,r){return t.a=r.a,t.b=r.b,t.c=r.c,t.d=r.d,t.e=r.e,t.f=r.f,t},e}(),jn=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.left=0,s.top=0,s.width=0,s.height=0,s.defaultSize={x:50,y:20},s.offsetX=0,s.offsetY=0,s.rotationAngle=0,s.CB_DISTANCE=10,s._suppressMarkerCreateEvent=!1,s.container.transform.baseVal.appendItem(J.createTransform()),s.setupControlBox(),s}return Lt(t,e),Object.defineProperty(t.prototype,"centerX",{get:function(){return this.left+this.width/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this.top+this.height/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visual",{get:function(){return this._visual},set:function(r){this._visual=r;var i=J.createTransform();this._visual.transform.baseVal.appendItem(i)},enumerable:!1,configurable:!0}),t.prototype.ownsTarget=function(r){return!!e.prototype.ownsTarget.call(this,r)||!!(this.controlGrips.findGripByVisual(r)!==void 0||this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(r))},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.left=r.x,this.top=r.y),this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.manipulationStartWidth=this.width,this.manipulationStartHeight=this.height;var n=this.unrotatePoint(r);if(this.manipulationStartX=n.x,this.manipulationStartY=n.y,this.offsetX=n.x-this.left,this.offsetY=n.y-this.top,this.state!=="new")if(this.select(),this.activeGrip=this.controlGrips.findGripByVisual(i),this.activeGrip!==void 0)this._state="resize";else if(this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(i)){this.activeGrip=this.rotatorGrip;var s=this.rotatePoint({x:this.centerX,y:this.centerY});this.left=s.x-this.width/2,this.top=s.y-this.height/2,this.moveVisual({x:this.left,y:this.top});var a=this.container.transform.baseVal.getItem(0);a.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(a,0),this.adjustControlBox(),this._state="rotate"}else this._state="move"},t.prototype.pointerUp=function(r){var i=this.state;e.prototype.pointerUp.call(this,r),this.state==="creating"&&this.width<10&&this.height<10?(this.width=this.defaultSize.x,this.height=this.defaultSize.y):this.manipulate(r),this._state="select",i==="creating"&&this.onMarkerCreated&&this._suppressMarkerCreateEvent===!1&&this.onMarkerCreated(this)},t.prototype.moveVisual=function(r){this.visual.style.transform="translate("+r.x+"px, "+r.y+"px)"},t.prototype.manipulate=function(r){var i=this.unrotatePoint(r);this.state==="creating"?this.resize(r):this.state==="move"?(this.left=this.manipulationStartLeft+(i.x-this.manipulationStartLeft)-this.offsetX,this.top=this.manipulationStartTop+(i.y-this.manipulationStartTop)-this.offsetY,this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()):this.state==="resize"?this.resize(i):this.state==="rotate"&&this.rotate(r)},t.prototype.resize=function(r){var i=this.manipulationStartLeft,n=this.manipulationStartWidth,s=this.manipulationStartTop,a=this.manipulationStartHeight;switch(this.activeGrip){case this.controlGrips.bottomLeft:case this.controlGrips.centerLeft:case this.controlGrips.topLeft:i=this.manipulationStartLeft+r.x-this.manipulationStartX,n=this.manipulationStartWidth+this.manipulationStartLeft-i;break;case this.controlGrips.bottomRight:case this.controlGrips.centerRight:case this.controlGrips.topRight:case void 0:n=this.manipulationStartWidth+r.x-this.manipulationStartX}switch(this.activeGrip){case this.controlGrips.topCenter:case this.controlGrips.topLeft:case this.controlGrips.topRight:s=this.manipulationStartTop+r.y-this.manipulationStartY,a=this.manipulationStartHeight+this.manipulationStartTop-s;break;case this.controlGrips.bottomCenter:case this.controlGrips.bottomLeft:case this.controlGrips.bottomRight:case void 0:a=this.manipulationStartHeight+r.y-this.manipulationStartY}n>=0?(this.left=i,this.width=n):(this.left=i+n,this.width=-n),a>=0?(this.top=s,this.height=a):(this.top=s+a,this.height=-a),this.setSize()},t.prototype.setSize=function(){this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()},t.prototype.rotate=function(r){if(Math.abs(r.x-this.centerX)>.1){var i=Math.sign(r.x-this.centerX);this.rotationAngle=180*Math.atan((r.y-this.centerY)/(r.x-this.centerX))/Math.PI+90*i,this.applyRotation()}},t.prototype.applyRotation=function(){var r=this.container.transform.baseVal.getItem(0);r.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(r,0)},t.prototype.rotatePoint=function(r){if(this.rotationAngle===0)return r;var i=this.container.getCTM(),n=J.createPoint(r.x,r.y);return{x:(n=n.matrixTransform(i)).x,y:n.y}},t.prototype.unrotatePoint=function(r){if(this.rotationAngle===0)return r;var i=this.container.getCTM();i=i.inverse();var n=J.createPoint(r.x,r.y);return{x:(n=n.matrixTransform(i)).x,y:n.y}},t.prototype.select=function(){e.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},t.prototype.deselect=function(){e.prototype.deselect.call(this),this.controlBox.style.display="none"},t.prototype.setupControlBox=function(){this.controlBox=J.createGroup();var r=J.createTransform();r.setTranslate(-this.CB_DISTANCE/2,-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.appendItem(r),this.container.appendChild(this.controlBox),this.controlRect=J.createRect(this.width+this.CB_DISTANCE,this.height+this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"],["fill","transparent"],["pointer-events","none"]]),this.controlBox.appendChild(this.controlRect),this.globalSettings.disableRotation!==!0&&(this.rotatorGripLine=J.createLine((this.width+2*this.CB_DISTANCE)/2,this.top-this.CB_DISTANCE,(this.width+2*this.CB_DISTANCE)/2,this.top-3*this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.appendChild(this.rotatorGripLine)),this.controlGrips=new V0,this.addControlGrips(),this.controlBox.style.display="none"},t.prototype.adjustControlBox=function(){var r=this.controlBox.transform.baseVal.getItem(0);r.setTranslate(this.left-this.CB_DISTANCE/2,this.top-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.replaceItem(r,0),this.controlRect.setAttribute("width",(this.width+this.CB_DISTANCE).toString()),this.controlRect.setAttribute("height",(this.height+this.CB_DISTANCE).toString()),this.rotatorGripLine!==void 0&&(this.rotatorGripLine.setAttribute("x1",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y1",(-this.CB_DISTANCE/2).toString()),this.rotatorGripLine.setAttribute("x2",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y2",(3*-this.CB_DISTANCE).toString())),this.positionGrips()},t.prototype.addControlGrips=function(){this.controlGrips.topLeft=this.createGrip(),this.controlGrips.topCenter=this.createGrip(),this.controlGrips.topRight=this.createGrip(),this.controlGrips.centerLeft=this.createGrip(),this.controlGrips.centerRight=this.createGrip(),this.controlGrips.bottomLeft=this.createGrip(),this.controlGrips.bottomCenter=this.createGrip(),this.controlGrips.bottomRight=this.createGrip(),this.globalSettings.disableRotation!==!0&&(this.rotatorGrip=this.createGrip()),this.positionGrips()},t.prototype.createGrip=function(){var r=new uu;return r.visual.transform.baseVal.appendItem(J.createTransform()),this.controlBox.appendChild(r.visual),r},t.prototype.positionGrips=function(){var r=this.controlGrips.topLeft.GRIP_SIZE,i=-r/2,n=i,s=(this.width+this.CB_DISTANCE)/2-r/2,a=(this.height+this.CB_DISTANCE)/2-r/2,o=this.height+this.CB_DISTANCE-r/2,l=this.width+this.CB_DISTANCE-r/2;this.positionGrip(this.controlGrips.topLeft.visual,i,n),this.positionGrip(this.controlGrips.topCenter.visual,s,n),this.positionGrip(this.controlGrips.topRight.visual,l,n),this.positionGrip(this.controlGrips.centerLeft.visual,i,a),this.positionGrip(this.controlGrips.centerRight.visual,l,a),this.positionGrip(this.controlGrips.bottomLeft.visual,i,o),this.positionGrip(this.controlGrips.bottomCenter.visual,s,o),this.positionGrip(this.controlGrips.bottomRight.visual,l,o),this.rotatorGrip!==void 0&&this.positionGrip(this.rotatorGrip.visual,s,n-3*this.CB_DISTANCE)},t.prototype.positionGrip=function(r,i,n){var s=r.transform.baseVal.getItem(0);s.setTranslate(i,n),r.transform.baseVal.replaceItem(s,0)},t.prototype.hideControlBox=function(){this.controlBox.style.display="none"},t.prototype.showControlBox=function(){this.controlBox.style.display=""},t.prototype.getState=function(){return Object.assign({left:this.left,top:this.top,width:this.width,height:this.height,rotationAngle:this.rotationAngle,visualTransformMatrix:fs.toITransformMatrix(this.visual.transform.baseVal.getItem(0).matrix),containerTransformMatrix:fs.toITransformMatrix(this.container.transform.baseVal.getItem(0).matrix)},e.prototype.getState.call(this))},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var i=r;this.left=i.left,this.top=i.top,this.width=i.width,this.height=i.height,this.rotationAngle=i.rotationAngle,this.visual.transform.baseVal.getItem(0).setMatrix(fs.toSVGMatrix(this.visual.transform.baseVal.getItem(0).matrix,i.visualTransformMatrix)),this.container.transform.baseVal.getItem(0).setMatrix(fs.toSVGMatrix(this.container.transform.baseVal.getItem(0).matrix,i.containerTransformMatrix))},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i);var n=this.rotatePoint({x:this.left,y:this.top}),s=this.unrotatePoint({x:n.x*r,y:n.y*i});this.left=s.x,this.top=s.y,this.width=this.width*r,this.height=this.height*i,this.adjustControlBox()},t}(ld),ud=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.fillColor="transparent",s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.opacity=1,s.setStrokeColor=s.setStrokeColor.bind(s),s.setFillColor=s.setFillColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.createVisual=s.createVisual.bind(s),s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual)},t.prototype.createVisual=function(){this.visual=J.createRect(1,1,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.setSize()},t.prototype.setSize=function(){e.prototype.setSize.call(this),J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]])},t.prototype.pointerUp=function(r){e.prototype.pointerUp.call(this,r),this.setSize()},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.visual&&J.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},t.prototype.setFillColor=function(r){this.fillColor=r,this.visual&&J.setAttributes(this.visual,[["fill",this.fillColor]]),this.stateChanged()},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.visual&&J.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.visual&&J.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},t.prototype.getState=function(){return Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},e.prototype.getState.call(this))},t.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.opacity=i.opacity,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.setSize()},t.title="Rectangle marker",t}(jn),Xi=function(e){function t(r,i,n,s,a){var o=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M3 17h18v-2H3v2m0 3h18v-1H3v1m0-7h18v-3H3v3m0-9v4h18V4H3z"/></svg>',a||"line-width-panel")||this;return o.widths=[],o.widthBoxes=[],o.widths=i,o.currentWidth=n,o.setCurrentWidth=o.setCurrentWidth.bind(o),o}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",this.widths.forEach(function(n){var s=document.createElement("div");s.style.display="flex",s.style.flexGrow="2",s.style.alignItems="center",s.style.justifyContent="space-between",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.borderColor=n===r.currentWidth?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentWidth(n,s)}),i.appendChild(s);var a=document.createElement("div");a.innerText=n.toString(),a.style.marginRight="5px",s.appendChild(a);var o=document.createElement("div");o.style.minHeight="20px",o.style.flexGrow="2",o.style.display="flex",o.style.alignItems="center";var l=document.createElement("hr");l.style.minWidth="20px",l.style.border="0px",l.style.borderTop=n+"px solid "+r.uiStyleSettings.toolboxColor,l.style.flexGrow="2",o.appendChild(l),s.appendChild(o),r.widthBoxes.push(s)}),i},t.prototype.setCurrentWidth=function(r,i){var n=this;this.currentWidth=r,this.widthBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onWidthChanged&&this.onWidthChanged(this.currentWidth)},t}($i),$n=function(e){function t(r,i,n,s,a){var o=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M3 16h5v-2H3v2m6.5 0h5v-2h-5v2m6.5 0h5v-2h-5v2M3 20h2v-2H3v2m4 0h2v-2H7v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2M3 12h8v-2H3v2m10 0h8v-2h-8v2M3 4v4h18V4H3z"/></svg>',a||"line-style-panel")||this;return o.styles=[],o.styleBoxes=[],o.styles=i,o.currentStyle=n,o.setCurrentStyle=o.setCurrentStyle.bind(o),o}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",this.styles.forEach(function(n){var s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="space-between",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.overflow="hidden",s.style.maxWidth=100/r.styles.length-5+"%",s.style.borderColor=n===r.currentStyle?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentStyle(n,s)}),i.appendChild(s);var a=document.createElement("div");a.style.minHeight="20px",a.style.flexGrow="2",a.style.overflow="hidden";var o=`<svg width="100" height="20">
      <line x1="0" y1="10" x2="100" y2="10" stroke="`+r.uiStyleSettings.toolboxColor+'" stroke-width="3" '+(n!==""?'stroke-dasharray="'+n+'"':"")+` />
  </svg>`;a.innerHTML=o,s.appendChild(a),r.styleBoxes.push(s)}),i},t.prototype.setCurrentStyle=function(r,i){var n=this;this.currentStyle=r,this.styleBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onStyleChanged&&this.onStyleChanged(this.currentStyle)},t}($i),_o=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.strokeColor=n.defaultColor,s.strokeWidth=n.defaultStrokeWidth,s.strokeDasharray=n.defaultStrokeDasharray,s.strokePanel=new we("Line color",n.defaultColorSet,n.defaultColor),s.strokePanel.onColorChanged=s.setStrokeColor,s.strokeWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new $n("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s}return Lt(t,e),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="FrameMarker",t.title="Frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4m14 11H6V8h12v9z"/></svg>',t}(ud),j0=function(){this.defaultColorSet=["#EF4444","#10B981","#2563EB","#FFFF00","#7C3AED","#F472B6","#000000","#FFFFFF"],this.defaultColor=this.defaultColorSet[0],this.defaultFillColor=this.defaultColorSet[0],this.defaultStrokeColor=this.defaultColorSet[7],this.defaultHighlightColor=this.defaultColorSet[3],this.defaultStrokeWidth=3,this.defaultStrokeDasharray="",this.defaultHighlightOpacity=.5,this.defaultFontFamily="Helvetica, Arial, sans-serif",this.defaultStrokeWidths=[1,2,3,5,10],this.defaultStrokeDasharrays=["","3","12 3","9 6 3 6"],this.defaultOpacitySteps=[.1,.25,.5,.75,1],this.displayMode="inline",this.defaultFontFamilies=['Times, "Times New Roman", serif',"Helvetica, Arial, sans-serif",'Courier, "Courier New", monospace',"cursive","fantasy"],this.popupMargin=30,this.newFreehandMarkerOnPointerUp=!1,this.defaultColorsFollowCurrentColors=!1,this.freehandPixelRatio=1,this.disableRotation=!1,this.defaultCaptionFontSize="1rem",this.defaultCaptionText="Text",this.wrapText=!1,this.defaultText="Your text here"},cd=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.x1=0,s.y1=0,s.x2=0,s.y2=0,s.defaultLength=50,s.manipulationStartX=0,s.manipulationStartY=0,s.manipulationStartX1=0,s.manipulationStartY1=0,s.manipulationStartX2=0,s.manipulationStartY2=0,s.setupControlBox(),s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!!e.prototype.ownsTarget.call(this,r)||!(!this.grip1.ownsTarget(r)&&!this.grip2.ownsTarget(r))},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.manipulationStartX=r.x,this.manipulationStartY=r.y,this.state==="new"&&(this.x1=r.x,this.y1=r.y,this.x2=r.x,this.y2=r.y),this.manipulationStartX1=this.x1,this.manipulationStartY1=this.y1,this.manipulationStartX2=this.x2,this.manipulationStartY2=this.y2,this.state!=="new"&&(this.select(),this.grip1.ownsTarget(i)?this.activeGrip=this.grip1:this.grip2.ownsTarget(i)?this.activeGrip=this.grip2:this.activeGrip=void 0,this.activeGrip?this._state="resize":this._state="move")},t.prototype.pointerUp=function(r){var i=this.state;e.prototype.pointerUp.call(this,r),this.state==="creating"&&Math.abs(this.x1-this.x2)<10&&Math.abs(this.y1-this.y2)<10?(this.x2=this.x1+this.defaultLength,this.adjustVisual(),this.adjustControlBox()):this.manipulate(r),this._state="select",i==="creating"&&this.onMarkerCreated&&this.onMarkerCreated(this)},t.prototype.adjustVisual=function(){},t.prototype.manipulate=function(r){this.state==="creating"?this.resize(r):this.state==="move"?(this.x1=this.manipulationStartX1+r.x-this.manipulationStartX,this.y1=this.manipulationStartY1+r.y-this.manipulationStartY,this.x2=this.manipulationStartX2+r.x-this.manipulationStartX,this.y2=this.manipulationStartY2+r.y-this.manipulationStartY,this.adjustVisual(),this.adjustControlBox()):this.state==="resize"&&this.resize(r)},t.prototype.resize=function(r){switch(this.activeGrip){case this.grip1:this.x1=r.x,this.y1=r.y;break;case this.grip2:case void 0:this.x2=r.x,this.y2=r.y}this.adjustVisual(),this.adjustControlBox()},t.prototype.select=function(){e.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},t.prototype.deselect=function(){e.prototype.deselect.call(this),this.controlBox.style.display="none"},t.prototype.setupControlBox=function(){this.controlBox=J.createGroup(),this.container.appendChild(this.controlBox),this.addControlGrips(),this.controlBox.style.display="none"},t.prototype.adjustControlBox=function(){this.positionGrips()},t.prototype.addControlGrips=function(){this.grip1=this.createGrip(),this.grip2=this.createGrip(),this.positionGrips()},t.prototype.createGrip=function(){var r=new uu;return r.visual.transform.baseVal.appendItem(J.createTransform()),this.controlBox.appendChild(r.visual),r},t.prototype.positionGrips=function(){var r=this.grip1.GRIP_SIZE;this.positionGrip(this.grip1.visual,this.x1-r/2,this.y1-r/2),this.positionGrip(this.grip2.visual,this.x2-r/2,this.y2-r/2)},t.prototype.positionGrip=function(r,i,n){var s=r.transform.baseVal.getItem(0);s.setTranslate(i,n),r.transform.baseVal.replaceItem(s,0)},t.prototype.getState=function(){return Object.assign({x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2},e.prototype.getState.call(this))},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var i=r;this.x1=i.x1,this.y1=i.y1,this.x2=i.x2,this.y2=i.y2},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.x1=this.x1*r,this.y1=this.y1*i,this.x2=this.x2*r,this.y2=this.y2*i,this.adjustVisual(),this.adjustControlBox()},t}(ld),cu=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.setStrokeColor=s.setStrokeColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.strokeColor=n.defaultColor,s.strokeWidth=n.defaultStrokeWidth,s.strokeDasharray=n.defaultStrokeDasharray,s.strokePanel=new we("Line color",n.defaultColorSet,n.defaultColor),s.strokePanel.onColorChanged=s.setStrokeColor,s.strokeWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new $n("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.selectorLine&&r!==this.visibleLine)},t.prototype.createVisual=function(){this.visual=J.createGroup(),this.selectorLine=J.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()]]),this.visibleLine=J.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.visual.appendChild(this.selectorLine),this.visual.appendChild(this.visibleLine),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.adjustVisual(),this._state="creating")},t.prototype.adjustVisual=function(){this.selectorLine&&this.visibleLine&&(this.selectorLine.setAttribute("x1",this.x1.toString()),this.selectorLine.setAttribute("y1",this.y1.toString()),this.selectorLine.setAttribute("x2",this.x2.toString()),this.selectorLine.setAttribute("y2",this.y2.toString()),this.visibleLine.setAttribute("x1",this.x1.toString()),this.visibleLine.setAttribute("y1",this.y1.toString()),this.visibleLine.setAttribute("x2",this.x2.toString()),this.visibleLine.setAttribute("y2",this.y2.toString()),J.setAttributes(this.visibleLine,[["stroke",this.strokeColor]]),J.setAttributes(this.visibleLine,[["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.visibleLine,[["stroke-dasharray",this.strokeDasharray.toString()]]))},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.adjustVisual(),this.colorChanged(r)},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.adjustVisual()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.adjustVisual(),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var i=r;this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.createVisual(),this.adjustVisual()},t.typeName="LineMarker",t.title="Line marker",t.icon='<svg viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>',t}(cd),fu=function(e){function t(r,i,n,s,a){var o=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M17 8h3v12h1v1h-4v-1h1v-3h-4l-1.5 3H14v1h-4v-1h1l6-12m1 1l-3.5 7H18V9M5 3h5c1.11 0 2 .89 2 2v11H9v-5H6v5H3V5c0-1.11.89-2 2-2m1 2v4h3V5H6z"/></svg>',a||"font-family-panel")||this;return o.fonts=[],o.fontBoxes=[],o.fonts=i,o.currentFont=n,o.setCurrentFont=o.setCurrentFont.bind(o),o}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.overflow="hidden",i.style.flexGrow="2",this.fonts.forEach(function(n){var s=document.createElement("div");s.style.display="inline-block",s.style.alignItems="center",s.style.justifyContent="space-between",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.overflow="hidden",s.style.maxWidth=100/r.fonts.length-5+"%",s.style.borderColor=n===r.currentFont?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentFont(n,s)}),i.appendChild(s);var a=document.createElement("div");a.style.display="flex",a.style.minHeight="20px",a.style.flexGrow="2",a.style.fontFamily=n,a.style.overflow="hidden";var o=document.createElement("div");o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.textOverflow="ellipsis",o.innerHTML="The quick brown fox jumps over the lazy dog",a.appendChild(o),s.appendChild(a),r.fontBoxes.push(s)}),i},t.prototype.setCurrentFont=function(r,i){var n=this;this.currentFont=r,this.fontBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onFontChanged&&this.onFontChanged(this.currentFont)},t}($i),rn=function(e){function t(r,i,n){var s,a=e.call(this,r,i,n)||this;return a.color="transparent",a.padding=5,a.DEFAULT_TEXT="your text here",a.isMoved=!1,a.color=n.defaultColor,a.fontFamily=n.defaultFontFamily,a.text=(s=n.defaultText)!==null&&s!==void 0?s:a.DEFAULT_TEXT,a.defaultSize={x:100,y:30},a.setColor=a.setColor.bind(a),a.setFont=a.setFont.bind(a),a.renderText=a.renderText.bind(a),a.sizeText=a.sizeText.bind(a),a.textEditDivClicked=a.textEditDivClicked.bind(a),a.showTextEditor=a.showTextEditor.bind(a),a.setSize=a.setSize.bind(a),a.positionTextEditor=a.positionTextEditor.bind(a),a.wrapText=a.wrapText.bind(a),a.colorPanel=new we("Color",n.defaultColorSet,n.defaultColor),a.colorPanel.onColorChanged=a.setColor,a.fontFamilyPanel=new fu("Font",n.defaultFontFamilies,n.defaultFontFamily),a.fontFamilyPanel.onFontChanged=a.setFont,a}return Lt(t,e),t.prototype.ownsTarget=function(r){if(e.prototype.ownsTarget.call(this,r)||r===this.visual||r===this.textElement||r===this.bgRectangle)return!0;var i=!1;return this.textElement.childNodes.forEach(function(n){n===r&&(i=!0)}),i},t.prototype.createVisual=function(){this.visual=J.createGroup(),this.bgRectangle=J.createRect(1,1,[["fill","transparent"]]),this.visual.appendChild(this.bgRectangle),this.textElement=J.createText([["fill",this.color],["font-family",this.fontFamily],["font-size","16px"],["x","0"],["y","0"]]),this.textElement.transform.baseVal.appendItem(J.createTransform()),this.textElement.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.textElement),this.addMarkerVisualToContainer(this.visual),this.renderText()},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.isMoved=!1,this.pointerDownPoint=r,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.wrapText=function(){function r(u){var c=u[0].length;return u.forEach(function(f){f.length>c&&(c=f.length)}),.35*c/u.length}if(this.text!==""){for(var i=this.text.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/),n=1*this.width/this.height,s=new(Array.bind.apply(Array,On([void 0],i))),a=r(s),o=Number.MAX_VALUE,l=function(){var u=s[0];s.forEach(function(c){c.length>u.length&&(u=c)}),(o=u.lastIndexOf(" ",o-1))>0?(s=[],i.forEach(function(c){for(var f=c;f.length>o;){var h=f.lastIndexOf(" ",o);h<0&&(h=f.indexOf(" ")),h>0?(s.push(f.substring(0,h)),f=f.substring(h).trim()):(s.push(f),f="")}s.push(f)}),a=r(s)):a=-1};a>n;)l();return s.join(`\r
`)}return this.text},t.prototype.renderText=function(){var r=this;if(this.textElement){for(;this.textElement.lastChild;)this.textElement.removeChild(this.textElement.lastChild);(this.globalSettings.wrapText?this.wrapText():this.text).split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/).forEach(function(i){r.textElement.appendChild(J.createTSpan(i.trim()===""?" ":i.trim(),[["x","0"],["dy","1.2em"]]))}),setTimeout(this.sizeText,10)}},t.prototype.getTextScale=function(){var r=this.textElement.getBBox(),i=1;if(r.width>0&&r.height>0){var n=(1*this.width-this.width*this.padding*2/100)/r.width,s=(1*this.height-this.height*this.padding*2/100)/r.height;i=Math.min(n,s)}return i},t.prototype.getTextPosition=function(r){var i=window.getComputedStyle(this.textElement).direction==="rtl"?1:-1,n=this.textElement.getBBox(),s=0,a=0;return n.width>0&&n.height>0&&(s=(this.width+i*n.width*r)/2,a=this.height/2-n.height*r/2),{x:s,y:a}},t.prototype.sizeText=function(){var r=this.textElement.getBBox(),i=this.getTextScale(),n=this.getTextPosition(i);n.y-=r.y*i,navigator.userAgent.indexOf("Edge/")>-1?this.textElement.style.transform="translate("+n.x+"px, "+n.y+"px) scale("+i+", "+i+")":(this.textElement.transform.baseVal.getItem(0).setTranslate(n.x,n.y),this.textElement.transform.baseVal.getItem(1).setScale(i,i))},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(r.x-this.pointerDownPoint.x)>5||Math.abs(r.y-this.pointerDownPoint.y)>5)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.isMoved=!0,this.setSize(),this.globalSettings.wrapText?this.renderText():this.sizeText()},t.prototype.setSize=function(){e.prototype.setSize.call(this),this.visual&&this.bgRectangle&&(J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.bgRectangle,[["width",this.width.toString()],["height",this.height.toString()]]))},t.prototype.pointerUp=function(r){var i=this.state;i==="creating"&&(this._suppressMarkerCreateEvent=!0),e.prototype.pointerUp.call(this,r),this.setSize(),(i==="creating"||!this.isMoved&&Date.now()-this.pointerDownTimestamp>500)&&this.showTextEditor(),this.pointerDownPoint=void 0},t.prototype.showTextEditor=function(){var r=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditor=document.createElement("div"),this.textEditor.style.position="absolute",this.textEditor.style.fontFamily=this.fontFamily,this.textEditor.style.lineHeight="1em",this.textEditor.innerText=this.text,this.textEditor.contentEditable="true",this.textEditor.style.color=this.color,this.textEditor.style.whiteSpace="pre",this.positionTextEditor(),this.textEditor.addEventListener("pointerup",function(i){i.stopPropagation()}),this.globalSettings.wrapText||this.textEditor.addEventListener("input",function(){for(var i=Number.parseFloat(r.textEditor.style.fontSize);r.textEditor.clientWidth>=Number.parseInt(r.textEditor.style.maxWidth)&&i>.9;)i-=.1,r.textEditor.style.fontSize=Math.max(i,.9)+"em"}),this.textEditor.addEventListener("keyup",function(i){i.cancelBubble=!0}),this.textEditor.addEventListener("paste",function(i){if(i.clipboardData){var n=i.clipboardData.getData("text"),s=window.getSelection();if(!s.rangeCount)return!1;s.deleteFromDocument(),s.getRangeAt(0).insertNode(document.createTextNode(n)),i.preventDefault()}}),this.textEditDiv.addEventListener("pointerup",function(){r.textEditDivClicked(r.textEditor.innerText)}),this.textEditDiv.appendChild(this.textEditor),this.overlayContainer.appendChild(this.textEditDiv),this.hideVisual(),this.textEditor.focus(),document.execCommand("selectAll")},t.prototype.positionTextEditor=function(){if(this.state==="edit")if(this.textEditor===void 0)this.showTextEditor();else if(this.globalSettings.wrapText)this.textEditor.style.left=this.left+this.padding+"px",this.textEditor.style.top=this.top+this.padding+"px",this.textEditor.style.width=this.width-2*this.padding+"px",this.textEditor.style.height=this.height-2*this.padding+"px",this.textEditor.style.maxHeight=this.textEditor.style.height,this.textEditor.style.whiteSpace="wrap";else{this.textElement.style.display="";var r=this.getTextScale(),i=this.rotatePoint({x:this.left+this.width/2,y:this.top+this.height/2}),n=this.textElement.getBBox(),s={x:n.width*r,y:n.height*r};i.x-=s.x/2,i.y-=s.y/2,this.textEditor.style.top=i.y+"px",this.textEditor.style.left=i.x+"px",this.textEditor.style.maxWidth=this.overlayContainer.offsetWidth-i.x+"px",this.textEditor.style.fontSize=Math.max(16*r,12)+"px",this.textElement.style.display="none"}},t.prototype.textEditDivClicked=function(r){this.text=r.trim(),this.overlayContainer.innerHTML="",this.renderText(),this.showVisual(),this._suppressMarkerCreateEvent&&(this._suppressMarkerCreateEvent=!1,this.onMarkerCreated&&this.onMarkerCreated(this)),this.stateChanged()},t.prototype.select=function(){e.prototype.select.call(this),this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText)},t.prototype.deselect=function(){this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText),e.prototype.deselect.call(this)},t.prototype.dblClick=function(r,i){e.prototype.dblClick.call(this,r,i),this.showTextEditor()},t.prototype.setColor=function(r){this.textElement&&J.setAttributes(this.textElement,[["fill",r]]),this.color=r,this.textEditor&&(this.textEditor.style.color=this.color),this.colorChanged(r)},t.prototype.setFont=function(r){this.textElement&&J.setAttributes(this.textElement,[["font-family",r]]),this.fontFamily=r,this.textEditor&&(this.textEditor.style.fontFamily=this.fontFamily),this.renderText(),this.stateChanged()},t.prototype.hideVisual=function(){this.textElement.style.display="none",this.hideControlBox()},t.prototype.showVisual=function(){this.state==="edit"&&(this._state="select"),this.textElement.style.display="",this.showControlBox()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({color:this.color,fontFamily:this.fontFamily,padding:this.padding,text:this.text,wrapText:this.globalSettings.wrapText},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){var i=r;this.color=i.color,this.fontFamily=i.fontFamily,this.padding=i.padding,this.text=i.text,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize(),this.globalSettings.wrapText&&this.renderText()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.setSize(),this.sizeText(),this.positionTextEditor()},t.typeName="TextMarker",t.title="Text marker",t.icon='<svg viewBox="0 0 24 24"><path d="M9.6 14L12 7.7l2.4 6.3M11 5L5.5 19h2.2l1.1-3H15l1.1 3h2.2L13 5h-2z"/></svg>',t}(jn),Qi=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.color="transparent",s.lineWidth=3,s.drawing=!1,s.pixelRatio=1,s.color=n.defaultColor,s.lineWidth=n.defaultStrokeWidth,s.pixelRatio=n.freehandPixelRatio,s.setColor=s.setColor.bind(s),s.addCanvas=s.addCanvas.bind(s),s.finishCreation=s.finishCreation.bind(s),s.setLineWidth=s.setLineWidth.bind(s),s.colorPanel=new we("Color",n.defaultColorSet,n.defaultColor),s.colorPanel.onColorChanged=s.setColor,s.lineWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.lineWidthPanel.onWidthChanged=s.setLineWidth,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.drawingImage)},t.prototype.createVisual=function(){this.visual=J.createGroup(),this.drawingImage=J.createImage(),this.visual.appendChild(this.drawingImage);var r=J.createTransform();this.visual.transform.baseVal.appendItem(r),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,i){this.state==="new"&&(this.addCanvas(),this.createVisual(),this._state="creating"),this.state==="creating"?(this.canvasContext.strokeStyle=this.color,this.canvasContext.lineWidth=this.lineWidth,this.canvasContext.beginPath(),this.canvasContext.moveTo(r.x,r.y),this.drawing=!0):e.prototype.pointerDown.call(this,r,i)},t.prototype.manipulate=function(r){this.state==="creating"?this.drawing&&(this.canvasContext.lineTo(r.x,r.y),this.canvasContext.stroke()):e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]])},t.prototype.pointerUp=function(r){this._state==="creating"?this.drawing&&(this.canvasContext.closePath(),this.drawing=!1,this.globalSettings.newFreehandMarkerOnPointerUp&&this.finishCreation()):e.prototype.pointerUp.call(this,r)},t.prototype.addCanvas=function(){this.overlayContainer.innerHTML="",this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.overlayContainer.clientWidth*this.pixelRatio,this.canvasElement.height=this.overlayContainer.clientHeight*this.pixelRatio,this.canvasContext=this.canvasElement.getContext("2d"),this.canvasContext.scale(this.pixelRatio,this.pixelRatio),this.overlayContainer.appendChild(this.canvasElement)},t.prototype.select=function(){this.state==="creating"&&this.finishCreation(),e.prototype.select.call(this)},t.prototype.deselect=function(){this.state==="creating"&&this.finishCreation(),e.prototype.deselect.call(this)},t.prototype.finishCreation=function(){for(var r=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),i=[this.canvasElement.width+1,this.canvasElement.height+1,-1,-1],n=i[0],s=i[1],a=i[2],o=i[3],l=!1,u=0;u<this.canvasElement.height;u++)for(var c=0;c<this.canvasElement.width;c++)r.data[u*this.canvasElement.width*4+4*c+3]>0&&(l=!0,u<s&&(s=u),c<n&&(n=c),u>o&&(o=u),c>a&&(a=c));if(l){this.left=n/this.pixelRatio,this.top=s/this.pixelRatio,this.width=(a-n)/this.pixelRatio,this.height=(o-s)/this.pixelRatio;var f=document.createElement("canvas");f.width=a-n,f.height=o-s,f.getContext("2d").putImageData(this.canvasContext.getImageData(n,s,a-n,o-s),0,0),this.drawingImgUrl=f.toDataURL("image/png"),this.setDrawingImage(),this._state="select",this.onMarkerCreated&&this.onMarkerCreated(this)}this.overlayContainer.innerHTML=""},t.prototype.setDrawingImage=function(){J.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.drawingImage,[["href",this.drawingImgUrl]]),this.moveVisual({x:this.left,y:this.top})},t.prototype.setColor=function(r){this.color=r,this.colorChanged(r)},t.prototype.setLineWidth=function(r){this.lineWidth=r},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return this.state==="new"||this.state==="creating"?[this.colorPanel,this.lineWidthPanel]:[]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({drawingImgUrl:this.drawingImgUrl},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){this.createVisual(),e.prototype.restoreState.call(this,r),this.drawingImgUrl=r.drawingImgUrl,this.setDrawingImage()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.setDrawingImage()},t.typeName="FreehandMarker",t.title="Freehand marker",t.icon='<svg viewBox="0 0 24 24"><path d="M9.75 20.85c1.78-.7 1.39-2.63.49-3.85-.89-1.25-2.12-2.11-3.36-2.94A9.817 9.817 0 014.54 12c-.28-.33-.85-.94-.27-1.06.59-.12 1.61.46 2.13.68.91.38 1.81.82 2.65 1.34l1.01-1.7C8.5 10.23 6.5 9.32 4.64 9.05c-1.06-.16-2.18.06-2.54 1.21-.32.99.19 1.99.77 2.77 1.37 1.83 3.5 2.71 5.09 4.29.34.33.75.72.95 1.18.21.44.16.47-.31.47-1.24 0-2.79-.97-3.8-1.61l-1.01 1.7c1.53.94 4.09 2.41 5.96 1.79m11.09-15.6c.22-.22.22-.58 0-.79l-1.3-1.3a.562.562 0 00-.78 0l-1.02 1.02 2.08 2.08M11 10.92V13h2.08l6.15-6.15-2.08-2.08L11 10.92z"/></svg>',t}(jn),$0=function(e){function t(r,i,n,s){var a=e.call(this,r,n||'<svg viewBox="0 0 24 24"><path d="M8 14v4l-6-6 6-6v4h8V6l6 6-6 6v-4H8z"/></svg>',s||"arrow-type-panel")||this;return a.typeBoxes=[],a.currentType=i,a.setCurrentType=a.setCurrentType.bind(a),a}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2";for(var n=function(o){var l="both";switch(o){case 0:l="both";break;case 1:l="start";break;case 2:l="end";break;case 3:l="none"}var u=document.createElement("div");if(u.style.display="flex",u.style.flexGrow="2",u.style.alignItems="center",u.style.justifyContent="space-between",u.style.padding="5px",u.style.borderWidth="2px",u.style.borderStyle="solid",u.style.borderColor=l===s.currentType?s.uiStyleSettings.toolboxAccentColor:"transparent",u.addEventListener("click",function(){r.setCurrentType(l,u)}),i.appendChild(u),l==="both"||l==="start"){var c=document.createElement("div");c.style.display="flex",c.style.alignItems="center",c.style.minHeight="20px",c.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,5 10,0 10,10" fill="`+(s.uiStyleSettings!==void 0?s.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,c.style.marginLeft="5px",u.appendChild(c)}var f=document.createElement("div");f.style.display="flex",f.style.alignItems="center",f.style.minHeight="20px",f.style.flexGrow="2";var h=document.createElement("hr");if(h.style.minWidth="20px",h.style.border="0px",h.style.borderTop="3px solid "+(s.uiStyleSettings!==void 0?s.uiStyleSettings.toolboxColor:"#eeeeee"),h.style.flexGrow="2",f.appendChild(h),u.appendChild(f),l==="both"||l==="end"){var d=document.createElement("div");d.style.display="flex",d.style.alignItems="center",d.style.minHeight="20px",d.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,0 10,5 0,10" fill="`+(s.uiStyleSettings!==void 0?s.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,d.style.marginRight="5px",u.appendChild(d)}s.typeBoxes.push(u)},s=this,a=0;a<4;a++)n(a);return i},t.prototype.setCurrentType=function(r,i){var n=this;this.currentType=r,this.typeBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings!==void 0?n.uiStyleSettings.toolboxAccentColor:"#3080c3":"transparent"}),this.onArrowTypeChanged&&this.onArrowTypeChanged(this.currentType)},t}($i),Eo=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.arrowType="end",s.arrowBaseHeight=10,s.arrowBaseWidth=10,s.getArrowPoints=s.getArrowPoints.bind(s),s.setArrowType=s.setArrowType.bind(s),s.arrowTypePanel=new $0("Arrow type","end"),s.arrowTypePanel.onArrowTypeChanged=s.setArrowType,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.arrow1&&r!==this.arrow2)},t.prototype.getArrowPoints=function(r,i){var n=this.arrowBaseWidth+2*this.strokeWidth,s=this.arrowBaseHeight+2*this.strokeWidth;return r-n/2+","+(i+s/2)+" "+r+","+(i-s/2)+" "+(r+n/2)+","+(i+s/2)},t.prototype.createTips=function(){this.arrow1=J.createPolygon(this.getArrowPoints(this.x1,this.y1),[["fill",this.strokeColor]]),this.arrow1.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.arrow1),this.arrow2=J.createPolygon(this.getArrowPoints(this.x2,this.y2),[["fill",this.strokeColor]]),this.arrow2.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.arrow2)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="creating"&&this.createTips()},t.prototype.adjustVisual=function(){if(e.prototype.adjustVisual.call(this),this.arrow1&&this.arrow2){this.arrow1.style.display=this.arrowType==="both"||this.arrowType==="start"?"":"none",this.arrow2.style.display=this.arrowType==="both"||this.arrowType==="end"?"":"none",J.setAttributes(this.arrow1,[["points",this.getArrowPoints(this.x1,this.y1)],["fill",this.strokeColor]]),J.setAttributes(this.arrow2,[["points",this.getArrowPoints(this.x2,this.y2)],["fill",this.strokeColor]]);var r=0;Math.abs(this.x1-this.x2)>.1&&(r=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2));var i=this.arrow1.transform.baseVal.getItem(0);i.setRotate(r,this.x1,this.y1),this.arrow1.transform.baseVal.replaceItem(i,0);var n=this.arrow2.transform.baseVal.getItem(0);n.setRotate(r+180,this.x2,this.y2),this.arrow2.transform.baseVal.replaceItem(n,0)}},t.prototype.setArrowType=function(r){this.arrowType=r,this.adjustVisual(),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel,this.arrowTypePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({arrowType:this.arrowType},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var i=r;this.arrowType=i.arrowType,this.createTips(),this.adjustVisual()},t.typeName="ArrowMarker",t.title="Arrow marker",t.icon='<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 7 15.59V9H5v10h10v-2H8.41L19 6.41z"/></svg>',t}(cu),fd=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.fillColor=n.defaultFillColor,s.strokeWidth=0,s.fillPanel=new we("Color",n.defaultColorSet,n.defaultFillColor),s.fillPanel.onColorChanged=s.setFillColor,s}return Lt(t,e),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.fillPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="CoverMarker",t.title="Cover marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4z"/></svg>',t}(ud),hd=function(e){function t(r,i,n,s,a){var o=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M17.66 8L12 2.35 6.34 8A8.02 8.02 0 004 13.64c0 2 .78 4.11 2.34 5.67a7.99 7.99 0 0011.32 0c1.56-1.56 2.34-3.67 2.34-5.67S19.22 9.56 17.66 8M6 14c0-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 18 12 18 14H6z"/></svg>',a||"opacity-panel")||this;return o.opacities=[],o.opacityBoxes=[],o.opacities=i,o.currentOpacity=n,o.setCurrentOpacity=o.setCurrentOpacity.bind(o),o}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",i.style.justifyContent="space-between",this.opacities.forEach(function(n){var s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.borderColor=n===r.currentOpacity?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentOpacity(n,s)}),i.appendChild(s);var a=document.createElement("div");a.innerText=100*n+"%",s.appendChild(a),r.opacityBoxes.push(s)}),i},t.prototype.setCurrentOpacity=function(r,i){var n=this;this.currentOpacity=r,this.opacityBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onOpacityChanged&&this.onOpacityChanged(this.currentOpacity)},t}($i),ko=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.setOpacity=s.setOpacity.bind(s),s.fillColor=n.defaultHighlightColor,s.strokeWidth=0,s.opacity=n.defaultHighlightOpacity,s.fillPanel=new we("Color",n.defaultColorSet,s.fillColor),s.fillPanel.onColorChanged=s.setFillColor,s.opacityPanel=new hd("Opacity",n.defaultOpacitySteps,s.opacity),s.opacityPanel.onOpacityChanged=s.setOpacity,s}return Lt(t,e),t.prototype.setOpacity=function(r){this.opacity=r,this.visual&&J.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.fillPanel,this.opacityPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="HighlightMarker",t.title="Highlight marker",t.icon='<svg viewBox="0 0 24 24"><path d="M18.5 1.15c-.53 0-1.04.19-1.43.58l-5.81 5.82 5.65 5.65 5.82-5.81c.77-.78.77-2.04 0-2.83l-2.84-2.83c-.39-.39-.89-.58-1.39-.58M10.3 8.5l-5.96 5.96c-.78.78-.78 2.04.02 2.85C3.14 18.54 1.9 19.77.67 21h5.66l.86-.86c.78.76 2.03.75 2.81-.02l5.95-5.96"/></svg>',t}(fd),dd='<svg viewBox="0 0 24 24"><path d="M9.62 12L12 5.67 14.37 12M11 3L5.5 17h2.25l1.12-3h6.25l1.13 3h2.25L13 3h-2z"/></svg>',hu='<svg viewBox="0 0 24 24"><path d="M19 11.5s-2 2.17-2 3.5a2 2 0 002 2 2 2 0 002-2c0-1.33-2-3.5-2-3.5M5.21 10L10 5.21 14.79 10m1.77-1.06L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.56-.59 1.53 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.59.59-1.56 0-2.12z"/></svg>',Kc=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.bgColor="transparent",s.tipPosition={x:0,y:0},s.tipBase1Position={x:0,y:0},s.tipBase2Position={x:0,y:0},s.tipMoving=!1,s.color=n.defaultStrokeColor,s.bgColor=n.defaultFillColor,s.fontFamily=n.defaultFontFamily,s.defaultSize={x:100,y:30},s.setBgColor=s.setBgColor.bind(s),s.getTipPoints=s.getTipPoints.bind(s),s.positionTip=s.positionTip.bind(s),s.setTipPoints=s.setTipPoints.bind(s),s.colorPanel=new we("Text color",n.defaultColorSet,s.color,dd,"text-color-panel"),s.colorPanel.onColorChanged=s.setColor,s.bgColorPanel=new we("Fill color",n.defaultColorSet,s.bgColor,hu,"fill-color-panel"),s.bgColorPanel.onColorChanged=s.setBgColor,s.fontFamilyPanel=new fu("Font",n.defaultFontFamilies,n.defaultFontFamily),s.fontFamilyPanel.onFontChanged=s.setFont,s.tipGrip=new uu,s.tipGrip.visual.transform.baseVal.appendItem(J.createTransform()),s.controlBox.appendChild(s.tipGrip.visual),s}return Lt(t,e),t.prototype.ownsTarget=function(r){return e.prototype.ownsTarget.call(this,r)||this.tipGrip.ownsTarget(r)||this.tip===r},t.prototype.createTip=function(){J.setAttributes(this.bgRectangle,[["fill",this.bgColor],["rx","10px"]]),this.tip=J.createPolygon(this.getTipPoints(),[["fill",this.bgColor]]),this.visual.appendChild(this.tip)},t.prototype.pointerDown=function(r,i){this.state==="new"&&e.prototype.pointerDown.call(this,r,i),this.state==="creating"?this.createTip():this.tipGrip.ownsTarget(i)?(this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.tipMoving=!0):e.prototype.pointerDown.call(this,r,i)},t.prototype.pointerUp=function(r){if(this.tipMoving)this.tipMoving=!1,this.isMoved=!0,e.prototype.pointerUp.call(this,r);else{var i=this.state==="creating";e.prototype.pointerUp.call(this,r),this.setTipPoints(i),this.positionTip()}},t.prototype.manipulate=function(r){if(this.tipMoving){var i=this.unrotatePoint(r);this.tipPosition={x:i.x-this.manipulationStartLeft,y:i.y-this.manipulationStartTop},this.positionTip()}else e.prototype.manipulate.call(this,r)},t.prototype.setBgColor=function(r){this.bgRectangle&&this.tip&&(J.setAttributes(this.bgRectangle,[["fill",r]]),J.setAttributes(this.tip,[["fill",r]])),this.bgColor=r,this.fillColorChanged(r)},t.prototype.getTipPoints=function(){return this.setTipPoints(this.state==="creating"),this.tipBase1Position.x+","+this.tipBase1Position.y+" "+this.tipBase2Position.x+","+this.tipBase2Position.y+" "+this.tipPosition.x+","+this.tipPosition.y},t.prototype.setTipPoints=function(r){r===void 0&&(r=!1);var i=Math.min(this.height/2,15),n=this.height/5;r&&(this.tipPosition={x:i+n/2,y:this.height+20});var s=Math.atan(this.height/2/(this.width/2));this.tipPosition.x<this.width/2&&this.tipPosition.y<this.height/2?s<Math.atan((this.height/2-this.tipPosition.y)/(this.width/2-this.tipPosition.x))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:i,y:0},this.tipBase2Position={x:i+n,y:0}):(this.tipBase1Position={x:0,y:i},this.tipBase2Position={x:0,y:i+n}):this.tipPosition.x>=this.width/2&&this.tipPosition.y<this.height/2?s<Math.atan((this.height/2-this.tipPosition.y)/(this.tipPosition.x-this.width/2))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-i-n,y:0},this.tipBase2Position={x:this.width-i,y:0}):(this.tipBase1Position={x:this.width,y:i},this.tipBase2Position={x:this.width,y:i+n}):this.tipPosition.x>=this.width/2&&this.tipPosition.y>=this.height/2?s<Math.atan((this.tipPosition.y-this.height/2)/(this.tipPosition.x-this.width/2))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-i-n,y:this.height},this.tipBase2Position={x:this.width-i,y:this.height}):(this.tipBase1Position={x:this.width,y:this.height-i-n},this.tipBase2Position={x:this.width,y:this.height-i}):s<Math.atan((this.tipPosition.y-this.height/2)/(this.width/2-this.tipPosition.x))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:i,y:this.height},this.tipBase2Position={x:i+n,y:this.height}):(this.tipBase1Position={x:0,y:this.height-i},this.tipBase2Position={x:0,y:this.height-i-n})},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.positionTip()},t.prototype.positionTip=function(){J.setAttributes(this.tip,[["points",this.getTipPoints()]]);var r=this.tipGrip.visual.transform.baseVal.getItem(0);r.setTranslate(this.tipPosition.x,this.tipPosition.y),this.tipGrip.visual.transform.baseVal.replaceItem(r,0)},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.bgColorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),t.prototype.select=function(){this.positionTip(),e.prototype.select.call(this)},t.prototype.getState=function(){var r=Object.assign({bgColor:this.bgColor,tipPosition:this.tipPosition},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){var i=r;this.bgColor=i.bgColor,this.tipPosition=i.tipPosition,e.prototype.restoreState.call(this,r),this.createTip(),this.setTipPoints()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.tipPosition={x:this.tipPosition.x*r,y:this.tipPosition.y*i},this.positionTip()},t.typeName="CalloutMarker",t.title="Callout marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 2h16a2 2 0 012 2v12a2 2 0 01-2 2h-4l-4 4-4-4H4a2 2 0 01-2-2V4a2 2 0 012-2m0 2v12h4.83L12 19.17 15.17 16H20V4H4m2 3h12v2H6V7m0 4h10v2H6v-2z"/></svg>',t}(rn),sl=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.fillColor="transparent",s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.opacity=1,s.strokeColor=n.defaultColor,s.strokeWidth=n.defaultStrokeWidth,s.strokeDasharray=n.defaultStrokeDasharray,s.fillColor=n.defaultFillColor,s.setStrokeColor=s.setStrokeColor.bind(s),s.setFillColor=s.setFillColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.setOpacity=s.setOpacity.bind(s),s.createVisual=s.createVisual.bind(s),s.strokePanel=new we("Line color",On(n.defaultColorSet,["transparent"]),n.defaultColor,void 0,"stroke-color-panel"),s.strokePanel.onColorChanged=s.setStrokeColor,s.fillPanel=new we("Fill color",On(n.defaultColorSet,["transparent"]),s.fillColor,hu,"fill-color-panel"),s.fillPanel.onColorChanged=s.setFillColor,s.strokeWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new $n("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s.opacityPanel=new hd("Opacity",n.defaultOpacitySteps,s.opacity),s.opacityPanel.onOpacityChanged=s.setOpacity,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual)},t.prototype.createVisual=function(){this.visual=J.createEllipse(this.width/2,this.height/2,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.setSize()},t.prototype.setSize=function(){e.prototype.setSize.call(this),J.setAttributes(this.visual,[["cx",(this.width/2).toString()],["cy",(this.height/2).toString()],["rx",(this.width/2).toString()],["ry",(this.height/2).toString()]])},t.prototype.pointerUp=function(r){e.prototype.pointerUp.call(this,r),this.setSize()},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.visual&&J.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},t.prototype.setFillColor=function(r){this.fillColor=r,this.visual&&J.setAttributes(this.visual,[["fill",this.fillColor]]),this.fillColorChanged(r),this.stateChanged()},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.visual&&J.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.visual&&J.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},t.prototype.setOpacity=function(r){this.opacity=r,this.visual&&J.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.opacityPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.opacity=i.opacity,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.setSize()},t.typeName="EllipseMarker",t.title="Ellipse marker",t.icon='<svg viewBox="0 0 24 24"><path d="M12 4C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',t}(jn),X0=function(e){function t(r,i,n){return e.call(this,r,i,n)||this}return Lt(t,e),Object.defineProperty(t.prototype,"tipLength",{get:function(){return 10+3*this.strokeWidth},enumerable:!1,configurable:!0}),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.tip1&&r!==this.tip2)},t.prototype.createTips=function(){this.tip1=J.createLine(this.x1-this.tipLength/2,this.y1,this.x1+this.tipLength/2,this.y1,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip1.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.tip1),this.tip2=J.createLine(this.x2-this.tipLength/2,this.y2,this.x2+this.tipLength/2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip2.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.tip2)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="creating"&&this.createTips()},t.prototype.adjustVisual=function(){if(e.prototype.adjustVisual.call(this),this.tip1&&this.tip2&&(J.setAttributes(this.tip1,[["x1",(this.x1-this.tipLength/2).toString()],["y1",this.y1.toString()],["x2",(this.x1+this.tipLength/2).toString()],["y2",this.y1.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.tip2,[["x1",(this.x2-this.tipLength/2).toString()],["y1",this.y2.toString()],["x2",(this.x2+this.tipLength/2).toString()],["y2",this.y2.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),Math.abs(this.x1-this.x2)>.1)){var r=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2),i=this.tip1.transform.baseVal.getItem(0);i.setRotate(r,this.x1,this.y1),this.tip1.transform.baseVal.replaceItem(i,0);var n=this.tip2.transform.baseVal.getItem(0);n.setRotate(r+180,this.x2,this.y2),this.tip2.transform.baseVal.replaceItem(n,0)}},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r),this.createTips(),this.adjustVisual()},t.typeName="MeasurementMarker",t.title="Measurement marker",t.icon='<svg viewBox="0 0 24 24"><path d="M1.39 18.36l1.77-1.76L4.58 18l1.06-1.05-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.42 1.41L10.59 12l-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.41 1.41 1.07-1.06-1.42-1.41 1.42-1.42L18 6.7l1.07-1.06-2.47-2.48 1.76-1.77 4.25 4.25L5.64 22.61l-4.25-4.25z"/></svg>',t}(cu),U0=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.strokePanel.colors=n.defaultColorSet,s.fillColor="transparent",s}return Lt(t,e),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="EllipseFrameMarker",t.title="Ellipse frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M12 6c4.41 0 8 2.69 8 6s-3.59 6-8 6-8-2.69-8-6 3.59-6 8-6m0-2C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',t}(sl),Y0=function(){function e(){this.undoStack=[],this.redoStack=[]}return Object.defineProperty(e.prototype,"isUndoPossible",{get:function(){return this.undoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRedoPossible",{get:function(){return this.redoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoStepCount",{get:function(){return this.undoStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redoStepCount",{get:function(){return this.redoStack.length},enumerable:!1,configurable:!0}),e.prototype.addUndoStep=function(t){this.undoStack.length!==0&&JSON.stringify(this.undoStack[this.undoStack.length-1])===JSON.stringify(t)||(this.undoStack.push(t),JSON.stringify(this.lastRedoStep)!==JSON.stringify(t)&&this.redoStack.splice(0,this.redoStack.length))},e.prototype.replaceLastUndoStep=function(t){this.undoStack.length>0&&(this.undoStack[this.undoStack.length-1]=t)},e.prototype.getLastUndoStep=function(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0},e.prototype.undo=function(){if(this.undoStack.length>1){var t=this.undoStack.pop();return t!==void 0&&this.redoStack.push(t),this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0}},e.prototype.redo=function(){return this.lastRedoStep=this.redoStack.pop(),this.lastRedoStep},e}(),q0=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.curveX=0,s.curveY=0,s.manipulationStartCurveX=0,s.manipulationStartCurveY=0,s.setStrokeColor=s.setStrokeColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.positionGrips=s.positionGrips.bind(s),s.addControlGrips=s.addControlGrips.bind(s),s.adjustVisual=s.adjustVisual.bind(s),s.setupControlBox=s.setupControlBox.bind(s),s.resize=s.resize.bind(s),s.strokeColor=n.defaultColor,s.strokeWidth=n.defaultStrokeWidth,s.strokeDasharray=n.defaultStrokeDasharray,s.strokePanel=new we("Line color",n.defaultColorSet,n.defaultColor),s.strokePanel.onColorChanged=s.setStrokeColor,s.strokeWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new $n("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.selectorCurve&&r!==this.visibleCurve&&!this.curveGrip.ownsTarget(r))},t.prototype.getPathD=function(){return"M "+this.x1+" "+this.y1+" Q "+this.curveX+" "+this.curveY+", "+this.x2+" "+this.y2},t.prototype.createVisual=function(){this.visual=J.createGroup(),this.selectorCurve=J.createPath(this.getPathD(),[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()],["fill","transparent"]]),this.visibleCurve=J.createPath(this.getPathD(),[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["fill","transparent"]]),this.visual.appendChild(this.selectorCurve),this.visual.appendChild(this.visibleCurve),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.manipulationStartCurveX=this.curveX,this.manipulationStartCurveY=this.curveY,this.state==="new"&&(this.curveX=r.x,this.curveY=r.y),this.state==="new"?(this.createVisual(),this.adjustVisual(),this._state="creating"):this.curveGrip.ownsTarget(i)&&(this.activeGrip=this.curveGrip,this._state="resize")},t.prototype.adjustVisual=function(){this.selectorCurve&&this.visibleCurve&&(this.selectorCurve.setAttribute("d",this.getPathD()),this.visibleCurve.setAttribute("d",this.getPathD()),J.setAttributes(this.visibleCurve,[["stroke",this.strokeColor]]),J.setAttributes(this.visibleCurve,[["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.visibleCurve,[["stroke-dasharray",this.strokeDasharray.toString()]]))},t.prototype.setupControlBox=function(){e.prototype.setupControlBox.call(this),this.curveControlLine1=J.createLine(this.x1,this.y1,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.curveControlLine2=J.createLine(this.x2,this.y2,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.insertBefore(this.curveControlLine1,this.controlBox.firstChild),this.controlBox.insertBefore(this.curveControlLine2,this.controlBox.firstChild)},t.prototype.addControlGrips=function(){this.curveGrip=this.createGrip(),this.curveX=0,this.curveY=0,e.prototype.addControlGrips.call(this)},t.prototype.positionGrips=function(){e.prototype.positionGrips.call(this);var r=this.curveGrip.GRIP_SIZE;this.positionGrip(this.curveGrip.visual,this.curveX-r/2,this.curveY-r/2),this.curveControlLine1&&this.curveControlLine2&&(this.curveControlLine1.setAttribute("x1",this.x1.toString()),this.curveControlLine1.setAttribute("y1",this.y1.toString()),this.curveControlLine1.setAttribute("x2",this.curveX.toString()),this.curveControlLine1.setAttribute("y2",this.curveY.toString()),this.curveControlLine2.setAttribute("x1",this.x2.toString()),this.curveControlLine2.setAttribute("y1",this.y2.toString()),this.curveControlLine2.setAttribute("x2",this.curveX.toString()),this.curveControlLine2.setAttribute("y2",this.curveY.toString()))},t.prototype.manipulate=function(r){this.state==="move"&&(this.curveX=this.manipulationStartCurveX+r.x-this.manipulationStartX,this.curveY=this.manipulationStartCurveY+r.y-this.manipulationStartY),e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){this.activeGrip===this.curveGrip&&(this.curveX=r.x,this.curveY=r.y),e.prototype.resize.call(this,r),this.state==="creating"&&(this.curveX=this.x1+(this.x2-this.x1)/2,this.curveY=this.y1+(this.y2-this.y1)/2)},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.adjustVisual(),this.colorChanged(r)},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.adjustVisual()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.adjustVisual()},t.prototype.scale=function(r,i){this.curveX=this.curveX*r,this.curveY=this.curveY*i,e.prototype.scale.call(this,r,i)},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,curveX:this.curveX,curveY:this.curveY},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var i=r;this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.curveX=i.curveX,this.curveY=i.curveY,this.createVisual(),this.adjustVisual()},t.typeName="CurveMarker",t.title="Curve marker",t.icon='<svg viewBox="0 0 24 24"><path d="M18.5 2A1.5 1.5 0 0120 3.5 1.5 1.5 0 0118.5 5c-.23 0-.45-.05-.65-.15l-3.69 3.7.34.45c2.19-1.26 4.76-2 7.5-2l1 .03v2.01L22 9c-2.58 0-5 .75-7 2.04A3.96 3.96 0 0111.04 15C9.75 17 9 19.42 9 22l.04 1H7.03L7 22c0-2.74.74-5.31 2-7.5l-.45-.34-3.7 3.69c.1.2.15.42.15.65A1.5 1.5 0 013.5 20 1.5 1.5 0 012 18.5 1.5 1.5 0 013.5 17c.23 0 .45.05.65.15l3.69-3.7C7.31 12.78 7 11.92 7 11a4 4 0 014-4c.92 0 1.78.31 2.45.84l3.7-3.69c-.1-.2-.15-.42-.15-.65A1.5 1.5 0 0118.5 2M11 9a2 2 0 00-2 2 2 2 0 002 2 2 2 0 002-2 2 2 0 00-2-2z"/></svg>',t}(cd),K0=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.fillColor="transparent",s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.textColor="transparent",s.fontSize="1rem",s.isMoved=!1,s.captionText="Caption",s.PADDING=5,s.captionBoxWidth=0,s.captionBoxHeight=0,s.strokeColor=n.defaultColor,s.strokeWidth=n.defaultStrokeWidth,s.strokeDasharray=n.defaultStrokeDasharray,s.fillColor=n.defaultFillColor,s.textColor=n.defaultStrokeColor,s.fontFamily=n.defaultFontFamily,s.fontSize=n.defaultCaptionFontSize,s.captionText=n.defaultCaptionText,s.setStrokeColor=s.setStrokeColor.bind(s),s.setFillColor=s.setFillColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.createVisual=s.createVisual.bind(s),s.sizeCaption=s.sizeCaption.bind(s),s.setCaptionText=s.setCaptionText.bind(s),s.showTextEditor=s.showTextEditor.bind(s),s.positionTextEditor=s.positionTextEditor.bind(s),s.finishTextEditing=s.finishTextEditing.bind(s),s.setFont=s.setFont.bind(s),s.setTextColor=s.setTextColor.bind(s),s.strokePanel=new we("Line color",On(n.defaultColorSet,["transparent"]),s.strokeColor,void 0,"stroke-color-panel"),s.strokePanel.onColorChanged=s.setStrokeColor,s.fillPanel=new we("Fill color",On(n.defaultColorSet,["transparent"]),s.fillColor,hu,"fill-color-panel"),s.fillPanel.onColorChanged=s.setFillColor,s.strokeWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new $n("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s.fontFamilyPanel=new fu("Font",n.defaultFontFamilies,n.defaultFontFamily),s.fontFamilyPanel.onFontChanged=s.setFont,s.textColorPanel=new we("Text color",n.defaultColorSet,s.textColor,dd,"text-color-panel"),s.textColorPanel.onColorChanged=s.setTextColor,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.frame&&r!==this.captionBg&&r!==this.captionElement)},t.prototype.createVisual=function(){this.visual=J.createGroup(),this.addMarkerVisualToContainer(this.visual),this.captionBg=J.createRect(1,1,[["fill",this.fillColor]]),this.visual.appendChild(this.captionBg),this.captionElement=J.createText([["fill",this.textColor],["font-family",this.fontFamily]]),this.captionElement.style.fontSize=this.fontSize,this.captionElement.style.textAnchor="start",this.captionElement.style.dominantBaseline="text-before-edge",this.captionElement.textContent=this.captionText,this.visual.appendChild(this.captionElement),this.frame=J.createRect(this.width,this.height,[["fill","transparent"],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray]]),this.visual.appendChild(this.frame),this.sizeCaption()},t.prototype.setCaptionText=function(r){this.captionText=r,this.captionElement.textContent=this.captionText,this.sizeCaption()},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.isMoved=!1,this.pointerDownPoint=r,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(r.x-this.pointerDownPoint.x)>5||Math.abs(r.y-this.pointerDownPoint.y)>5)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.setSize()},t.prototype.sizeCaption=function(){var r=this.captionElement.getBBox();this.captionText.trim()!==""?(this.captionBoxWidth=r.width+2*this.PADDING,this.captionBoxHeight=r.height+2*this.PADDING):(this.captionBoxWidth=0,this.captionBoxHeight=0),J.setAttributes(this.captionBg,[["width",this.captionBoxWidth.toString()],["height",this.captionBoxHeight.toString()],["clip-path","path('M0,0 H"+this.width+" V"+this.height+" H"+-this.width+" Z')"]]),J.setAttributes(this.captionElement,[["x",this.PADDING.toString()],["y",this.PADDING.toString()],["clip-path","path('M0,0 H"+(this.width-this.PADDING)+" V"+this.height+" H"+(-this.width-this.PADDING)+" Z')"]])},t.prototype.showTextEditor=function(){var r=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditBox=document.createElement("input"),this.textEditBox.style.position="absolute",this.textEditBox.style.width=this.width+"px",this.captionBoxHeight>0&&(this.textEditBox.style.height=this.captionBoxHeight+"px"),this.textEditBox.style.fontSize=this.fontSize,this.textEditBox.style.fontFamily=this.fontFamily,this.textEditBox.style.backgroundColor=this.fillColor,this.textEditBox.style.color=this.textColor,this.textEditBox.style.borderWidth="0",this.textEditBox.setAttribute("value",this.captionText),this.textEditBox.select(),this.textEditDiv.appendChild(this.textEditBox),this.overlayContainer.appendChild(this.textEditDiv),this.textEditBox.addEventListener("pointerup",function(i){i.stopPropagation()}),this.textEditBox.addEventListener("keypress",function(i){i.key==="Enter"&&r.finishTextEditing(r.textEditBox.value)}),this.textEditBox.addEventListener("keyup",function(i){i.cancelBubble=!0}),this.textEditBox.addEventListener("blur",function(){r.finishTextEditing(r.textEditBox.value)}),this.textEditDiv.addEventListener("pointerup",function(){r.finishTextEditing(r.textEditBox.value)}),this.positionTextEditor(),this.textEditBox.focus()},t.prototype.positionTextEditor=function(){this.state==="edit"&&(this.textEditBox===void 0?this.showTextEditor():(this.textEditBox.style.left=this.left+"px",this.textEditBox.style.top=this.top+"px",this.textEditBox.style.transform="rotate("+this.rotationAngle+"deg)",this.textEditBox.style.transformOrigin=this.width/2+"px "+this.height/2+"px"))},t.prototype.finishTextEditing=function(r){this.setCaptionText(r.trim()),this.overlayContainer.innerHTML="",this.stateChanged()},t.prototype.setFont=function(r){this.captionElement&&J.setAttributes(this.captionElement,[["font-family",r]]),this.fontFamily=r,this.textEditBox&&(this.textEditBox.style.fontFamily=this.fontFamily),this.sizeCaption(),this.stateChanged()},t.prototype.setTextColor=function(r){this.captionElement&&J.setAttributes(this.captionElement,[["fill",r]]),this.textColor=r,this.textEditBox&&(this.textEditBox.style.color=this.textColor),this.stateChanged()},t.prototype.setSize=function(){e.prototype.setSize.call(this),J.setAttributes(this.frame,[["width",this.width.toString()],["height",this.height.toString()]]),this.sizeCaption()},t.prototype.pointerUp=function(r){e.prototype.pointerUp.call(this,r),this.setSize(),!this.isMoved&&Date.now()-this.pointerDownTimestamp>500&&this.showTextEditor(),this.pointerDownPoint=void 0},t.prototype.dblClick=function(r,i){e.prototype.dblClick.call(this,r,i),this.showTextEditor()},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.frame&&J.setAttributes(this.frame,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},t.prototype.setFillColor=function(r){this.fillColor=r,this.captionBg&&J.setAttributes(this.captionBg,[["fill",this.fillColor]]),this.fillColorChanged(r),this.stateChanged()},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.frame&&J.setAttributes(this.frame,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.frame&&J.setAttributes(this.frame,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.fontFamilyPanel,this.textColorPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:1,textColor:this.textColor,fontFamily:this.fontFamily,fontSize:this.fontSize,captionText:this.captionText},e.prototype.getState.call(this));return r.typeName=this.typeName,r},t.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.textColor=i.textColor,this.fontFamily=i.fontFamily,this.captionText=i.captionText,this.fontSize=i.fontSize,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.setSize()},t.typeName="CaptionFrameMarker",t.title="Caption frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M5 3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2H5m0 2h14v14H5V5m2 2v2h10V7H7z"/></svg>',t}(jn),Ve=function(){function e(t,r){r===void 0&&(r=!1),this.cancelable=!1,this._defaultPrevented=!1,this.markerArea=t,this.cancelable=r}return Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this._defaultPrevented=!0},e}(),J0=function(e){function t(r,i,n){var s=e.call(this,r,!1)||this;return s.dataUrl=i,s.state=n,s}return Lt(t,e),t}(Ve),dr=function(e){function t(r,i,n){n===void 0&&(n=!1);var s=e.call(this,r,n)||this;return s.marker=i,s}return Lt(t,e),t}(Ve),Z0=function(){function e(){this.render=[],this.beforeclose=[],this.close=[],this.show=[],this.restorestate=[],this.statechange=[],this.markerselect=[],this.markerdeselect=[],this.markercreating=[],this.markercreate=[],this.markerbeforedelete=[],this.markerdelete=[],this.markerchange=[],this.focus=[],this.blur=[]}return e.prototype.addEventListener=function(t,r){this[t].push(r)},e.prototype.removeEventListener=function(t,r){var i=this[t].indexOf(r);i>-1&&this[t].splice(i,1)},e}(),Q0=function(){function e(t){this.touchPoints=0,this._availableMarkerTypes=this.DEFAULT_MARKER_TYPES,this.mode="select",this.markers=[],this.isDragging=!1,this.renderEventListeners=[],this.closeEventListeners=[],this.settings=new j0,this._isOpen=!1,this.undoRedoManager=new Y0,this.renderAtNaturalSize=!1,this.renderImageType="image/png",this.renderMarkersOnly=!1,this.zoomSteps=[1,1.5,2,4],this._zoomLevel=1,this._isResizing=!1,this.prevPanPoint={x:0,y:0},this.eventListeners=new Z0,this._silentRenderMode=!1,this._isFocused=!1,this._instanceNo=e.instanceCounter++,this.styles=new G0(this.instanceNo),this.uiStyleSettings=this.styles.settings,this.target=t,this.targetRoot=document.body,this.width=t.clientWidth,this.height=t.clientHeight,this.styles.removeStyleSheet(),this.open=this.open.bind(this),this.setTopLeft=this.setTopLeft.bind(this),this.toolbarButtonClicked=this.toolbarButtonClicked.bind(this),this.createNewMarker=this.createNewMarker.bind(this),this.addNewMarker=this.addNewMarker.bind(this),this.markerCreated=this.markerCreated.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onDblClick=this.onDblClick.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.overrideOverflow=this.overrideOverflow.bind(this),this.restoreOverflow=this.restoreOverflow.bind(this),this.close=this.close.bind(this),this.closeUI=this.closeUI.bind(this),this.addCloseEventListener=this.addCloseEventListener.bind(this),this.removeCloseEventListener=this.removeCloseEventListener.bind(this),this.addRenderEventListener=this.addRenderEventListener.bind(this),this.removeRenderEventListener=this.removeRenderEventListener.bind(this),this.clientToLocalCoordinates=this.clientToLocalCoordinates.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.deleteSelectedMarker=this.deleteSelectedMarker.bind(this),this.setWindowHeight=this.setWindowHeight.bind(this),this.removeMarker=this.removeMarker.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this),this.onPopupTargetResize=this.onPopupTargetResize.bind(this),this.showNotesEditor=this.showNotesEditor.bind(this),this.hideNotesEditor=this.hideNotesEditor.bind(this),this.stepZoom=this.stepZoom.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.markerStateChanged=this.markerStateChanged.bind(this),this.switchToSelectMode=this.switchToSelectMode.bind(this),this.addDefs=this.addDefs.bind(this),this.addDefsToImage=this.addDefsToImage.bind(this),this.addMarkerEvents=this.addMarkerEvents.bind(this)}return Object.defineProperty(e.prototype,"ALL_MARKER_TYPES",{get:function(){return[_o,Qi,Eo,rn,U0,sl,ko,Kc,X0,fd,cu,q0,K0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DEFAULT_MARKER_TYPES",{get:function(){return[_o,Qi,Eo,rn,sl,ko,Kc]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BASIC_MARKER_TYPES",{get:function(){return[_o,Qi,Eo,rn,ko]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableMarkerTypes",{get:function(){return this._availableMarkerTypes},set:function(t){var r=this;this._availableMarkerTypes.splice(0),t.forEach(function(i){if(typeof i=="string"){var n=r.ALL_MARKER_TYPES.find(function(s){return s.typeName===i});n!==void 0&&r._availableMarkerTypes.push(n)}else r._availableMarkerTypes.push(i)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentMarker",{get:function(){return this._currentMarker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUndoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isUndoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRedoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isRedoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){return this._zoomLevel},set:function(t){this._zoomLevel=t,this.editorCanvas&&this.contentDiv&&(this.editorCanvas.style.transform="scale("+this._zoomLevel+")",this.contentDiv.scrollTo({left:(this.editorCanvas.clientWidth*this._zoomLevel-this.contentDiv.clientWidth)/2,top:(this.editorCanvas.clientHeight*this._zoomLevel-this.contentDiv.clientHeight)/2}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instanceNo",{get:function(){return this._instanceNo},enumerable:!1,configurable:!0}),e.prototype.open=function(){this.setupResizeObserver(),this.setEditingTarget(),this.setTopLeft(),this.initMarkerCanvas(),this.initOverlay(),this.attachEvents(),this.settings.displayMode==="popup"&&this.onPopupTargetResize(),Yc.isLicensed||this.addLogo(),this._isOpen=!0,this._isFocused=!0},e.prototype.show=function(){var t=this;this.styles.styleSheetRoot===void 0&&qc.styleSheetRoot!==void 0&&(this.styles.styleSheetRoot=qc.styleSheetRoot),this.markers.splice(0),this.setWindowHeight(),this.showUI(),this.open(),this.eventListeners.show.forEach(function(r){return r(new Ve(t))})},e.prototype.render=function(){return Xc(this,void 0,void 0,function(){var t;return Uc(this,function(r){switch(r.label){case 0:return this.setCurrentMarker(),(t=new N0).naturalSize=this.renderAtNaturalSize,t.imageType=this.renderImageType,t.imageQuality=this.renderImageQuality,t.markersOnly=this.renderMarkersOnly,t.width=this.renderWidth,t.height=this.renderHeight,[4,t.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 1:return r.sent(),[4,t.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 2:return[2,r.sent()]}})})},e.prototype.close=function(t){var r=this;if(t===void 0&&(t=!1),this.isOpen){var i=!1;t||this.eventListeners.beforeclose.forEach(function(n){var s=new Ve(r,!0);n(s),s.defaultPrevented&&(i=!0)}),i||(this.coverDiv&&this.closeUI(),this.targetObserver&&(this.targetObserver.unobserve(this.target),this.targetObserver.unobserve(this.editorCanvas)),this.settings.displayMode==="popup"&&window.removeEventListener("resize",this.setWindowHeight),this.eventListeners.close.forEach(function(n){return n(new Ve(r))}),this.detachEvents(),this._isOpen=!1)}},e.prototype.addMarkersToToolbar=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];(t=this._availableMarkerTypes).push.apply(t,r)},e.prototype.addRenderEventListener=function(t){this.addEventListener("render",function(r){t(r.dataUrl,r.state)})},e.prototype.removeRenderEventListener=function(t){},e.prototype.addCloseEventListener=function(t){this.addEventListener("close",function(){t()})},e.prototype.removeCloseEventListener=function(t){},e.prototype.setupResizeObserver=function(){var t=this;this.settings.displayMode==="inline"?window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){t.resize(t.target.clientWidth,t.target.clientHeight)}),this.targetObserver.observe(this.target)):this.settings.displayMode==="popup"&&(window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){return t.onPopupTargetResize()}),this.targetObserver.observe(this.editorCanvas)),window.addEventListener("resize",this.setWindowHeight))},e.prototype.onPopupTargetResize=function(){var t=1*this.target.clientWidth/this.target.clientHeight,r=this.editorCanvas.clientWidth/t>this.editorCanvas.clientHeight?this.editorCanvas.clientHeight*t:this.editorCanvas.clientWidth,i=r<this.editorCanvas.clientWidth?this.editorCanvas.clientHeight:this.editorCanvas.clientWidth/t;this.resize(r,i)},e.prototype.setWindowHeight=function(){this.windowHeight=window.innerHeight},e.prototype.resize=function(t,r){this._isResizing=!0;var i=t/this.imageWidth,n=r/this.imageHeight;this.imageWidth=Math.round(t),this.imageHeight=Math.round(r),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px",this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.settings.displayMode!=="popup"?this.coverDiv.style.width=this.imageWidth.toString()+"px":(this.setTopLeft(),this.positionMarkerImage()),this.toolbar!==void 0&&this.toolbar.adjustLayout(),this.positionLogo(),this.scaleMarkers(i,n),this._isResizing=!1},e.prototype.scaleMarkers=function(t,r){var i,n=this;this._currentMarker&&this._currentMarker instanceof rn?this._currentMarker.scale(t,r):(i=this._currentMarker,this.setCurrentMarker()),this.markers.forEach(function(s){s!==n._currentMarker&&s.scale(t,r)}),i!==void 0&&this.setCurrentMarker(i)},e.prototype.setEditingTarget=function(){this.imageWidth=Math.round(this.target.clientWidth),this.imageHeight=Math.round(this.target.clientHeight),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px"},e.prototype.setTopLeft=function(){var t=this.editingTarget.getBoundingClientRect(),r=this.editorCanvas.getBoundingClientRect();this.left=t.left-r.left,this.top=t.top-r.top},e.prototype.initMarkerCanvas=function(){this.markerImageHolder=document.createElement("div"),this.markerImageHolder.style.setProperty("touch-action","pinch-zoom"),this.markerImage=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.markerImage.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImage.style.pointerEvents="auto",this.markerImageHolder.style.position="absolute",this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.markerImageHolder.style.transformOrigin="top left",this.positionMarkerImage(),this.markerImageHolder.appendChild(this.markerImage),this.editorCanvas.appendChild(this.markerImageHolder)},e.prototype.addDefs=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];this.defs=J.createDefs(),this.addDefsToImage(),(t=this.defs).append.apply(t,r)},e.prototype.addDefsToImage=function(){this.defs&&this.markerImage.insertBefore(this.defs,this.markerImage.firstChild)},e.prototype.initOverlay=function(){this.overlayContainer=document.createElement("div"),this.overlayContainer.style.position="absolute",this.overlayContainer.style.left="0px",this.overlayContainer.style.top="0px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.overlayContainer.style.display="flex",this.markerImageHolder.appendChild(this.overlayContainer)},e.prototype.positionMarkerImage=function(){this.markerImageHolder.style.top=this.top/this.zoomLevel+"px",this.markerImageHolder.style.left=this.left/this.zoomLevel+"px"},e.prototype.attachEvents=function(){this.markerImage.addEventListener("pointerdown",this.onPointerDown),this.markerImage.addEventListener("touchmove",function(t){return t.preventDefault()}),this.markerImage.addEventListener("dblclick",this.onDblClick),this.attachWindowEvents()},e.prototype.attachWindowEvents=function(){window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerOut),window.addEventListener("pointerout",this.onPointerOut),window.addEventListener("pointerleave",this.onPointerUp),window.addEventListener("resize",this.onWindowResize),window.addEventListener("keyup",this.onKeyUp)},e.prototype.detachEvents=function(){this.markerImage.removeEventListener("pointerdown",this.onPointerDown),this.markerImage.removeEventListener("dblclick",this.onDblClick),this.detachWindowEvents()},e.prototype.detachWindowEvents=function(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerOut),window.removeEventListener("pointerout",this.onPointerOut),window.removeEventListener("pointerleave",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("keyup",this.onKeyUp)},e.prototype.addLogo=function(){this.logoUI=document.createElement("div"),this.logoUI.style.display="inline-block",this.logoUI.style.margin="0px",this.logoUI.style.padding="0px",this.logoUI.style.fill="#333333";var t=document.createElement("a");t.href="https://markerjs.com/",t.target="_blank",t.innerHTML='<svg viewBox="0 0 112 96" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="#e5f20d" fill-opacity=".647" d="M0 40.386h111.96V95.62H0z"/><path d="M93.61 61.452c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.591 1.048-1.481 0-2.222-.74-2.222-2.22 0-16.617-.533-29.347-1.604-38.192-1.068-8.842-2.92-13.265-5.552-13.265-4.443 0-10.94 15.509-19.497 46.52v.124c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.592 1.048-1.48 0-2.22-.74-2.22-2.22 0-3.29.165-8.392.493-15.302.33-7.732.494-13.82.494-18.262 0-6.17-.186-10.55-.556-13.142-.37-2.591-1.172-3.887-2.406-3.887-2.796 0-6.333 5.12-10.612 15.363C38.494 34.367 34.01 46.44 29.32 60.34l-1.11 3.209a5.714 5.714 0 01-1.42 2.097c-.617.578-1.295.864-2.036.864-.987 0-1.644-.081-1.974-.247-.328-.162-.533-.656-.617-1.48-.41-4.03-.74-9.418-.987-16.165-.163-1.728-.329-4.566-.494-8.515-.822-13.901-1.562-23.3-2.221-28.196-.657-4.893-.987-7.628-.987-8.205 0-.657.33-1.44.987-2.345.659-.903 1.276-1.357 1.85-1.357 1.319 0 2.387.947 3.21 2.838.411.906.863 4.526 1.357 10.859.493 6.335.905 14.19 1.233 23.568l.617 18.88c4.527-13.983 9.216-26.673 14.068-38.068C45.65 6.686 50.093.988 54.123.988c2.715 0 4.566 1.974 5.553 5.923.987 3.949 1.481 9.667 1.481 17.152 0 3.949-.081 9.625-.247 17.029l-.123 5.676c3.373-11.762 6.725-21.634 10.057-29.615 3.331-7.979 6.685-11.97 10.056-11.97 8.475 0 12.71 18.757 12.71 56.269z" fill-rule="nonzero"/></svg>',t.title="Powered by marker.js",t.style.display="grid",t.style.alignItems="center",t.style.justifyItems="center",t.style.padding="3px",t.style.width="20px",t.style.height="20px",this.logoUI.appendChild(t),this.editorCanvas.appendChild(this.logoUI),this.logoUI.style.position="absolute",this.logoUI.style.pointerEvents="all",this.positionLogo()},e.prototype.positionLogo=function(){this.logoUI&&(this.uiStyleSettings.logoPosition!=="right"?this.logoUI.style.left=this.markerImageHolder.offsetLeft+10+"px":this.logoUI.style.left=this.markerImageHolder.offsetLeft+this.markerImageHolder.offsetWidth-this.logoUI.clientWidth-10+"px",this.logoUI.style.top=this.markerImageHolder.offsetTop+this.markerImageHolder.offsetHeight-this.logoUI.clientHeight-10+"px")},e.prototype.overrideOverflow=function(){this.scrollXState=window.scrollX,this.scrollYState=window.scrollY,this.bodyOverflowState=document.body.style.overflow,window.scroll({top:0,left:0}),document.body.style.overflow="hidden"},e.prototype.restoreOverflow=function(){document.body.style.overflow=this.bodyOverflowState,window.scroll({top:this.scrollYState,left:this.scrollXState})},e.prototype.showUI=function(){var t;switch(this.settings.displayMode==="popup"&&this.overrideOverflow(),this.coverDiv=document.createElement("div"),this.coverDiv.style.visibility=this._silentRenderMode?"hidden":"visible",this.coverDiv.className=this.styles.classNamePrefixBase+" "+this.styles.classNamePrefix,this.coverDiv.style.fontSize="16px",this.coverDiv.style.userSelect="none",this.settings.displayMode){case"inline":this.coverDiv.style.position="absolute";var r=this.settings.uiOffsetTop!==void 0?this.target.offsetTop+this.settings.uiOffsetTop:this.target.offsetTop>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0,i=this.target.offsetLeft+((t=this.settings.uiOffsetLeft)!==null&&t!==void 0?t:0);this.coverDiv.style.top=r+"px",this.coverDiv.style.left=i+"px",this.coverDiv.style.width=this.target.offsetWidth.toString()+"px",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"5";break;case"popup":this.coverDiv.style.position="fixed",this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=window.innerHeight+"px",this.coverDiv.style.backgroundColor="rgba(0, 0, 0, 0.75)",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"1000",this.coverDiv.style.display="flex"}this.targetRoot.appendChild(this.coverDiv),this.uiDiv=document.createElement("div"),this.uiDiv.style.display="flex",this.uiDiv.style.flexDirection="column",this.uiDiv.style.flexGrow="2",this.uiDiv.style.margin=this.settings.displayMode==="popup"?this.settings.popupMargin+"px":"0px",this.settings.displayMode==="popup"&&(this.uiDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px"),this.uiDiv.style.border="0px",this.coverDiv.appendChild(this.uiDiv),this.toolbar=new W0(this.uiDiv,this.settings.displayMode,this._availableMarkerTypes,this.uiStyleSettings,this.styles),this.toolbar.addButtonClickListener(this.toolbarButtonClicked),this.toolbar.show(this._silentRenderMode||this.uiStyleSettings.hideToolbar?"hidden":"visible"),this.contentDiv=document.createElement("div"),this.contentDiv.style.display="flex",this.contentDiv.style.flexDirection="row",this.contentDiv.style.flexGrow="2",this.contentDiv.style.flexShrink="1",this.settings.displayMode==="popup"&&(this.contentDiv.style.backgroundColor=this.uiStyleSettings.canvasBackgroundColor,this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.uiStyleSettings.toolbarHeight+"px",this.contentDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px)"),this.contentDiv.style.overflow="auto",this.uiDiv.appendChild(this.contentDiv),this.editorCanvas=document.createElement("div"),this.editorCanvas.style.flexGrow="2",this.editorCanvas.style.flexShrink="1",this.editorCanvas.style.position="relative",this.editorCanvas.style.overflow="hidden",this.editorCanvas.style.display="flex",this.settings.displayMode==="popup"&&(this.editorCanvas.style.alignItems="center",this.editorCanvas.style.justifyContent="center"),this.editorCanvas.style.pointerEvents="none",this.editorCanvas.style.transformOrigin="left top",this.editorCanvas.style.transform="scale("+this.zoomLevel+")",this.contentDiv.appendChild(this.editorCanvas),this.editingTarget=this.target instanceof HTMLImageElement?document.createElement("img"):document.createElement("canvas"),this.settings.displayMode==="inline"&&this.settings.uiOffsetTop===void 0&&this.target.offsetTop<this.styles.settings.toolbarHeight&&(this.editingTarget.style.marginTop=this.target.offsetTop-this.styles.settings.toolbarHeight+"px"),this.editorCanvas.appendChild(this.editingTarget),this.toolbox=new H0(this.uiDiv,this.settings.displayMode,this.uiStyleSettings,this.styles),this.toolbox.show(this._silentRenderMode||this.uiStyleSettings.hideToolbox?"hidden":"visible")},e.prototype.closeUI=function(){this.settings.displayMode==="popup"&&this.restoreOverflow(),this.targetRoot.removeChild(this.coverDiv),this.coverDiv.remove(),this.coverDiv=null},e.prototype.removeMarker=function(t){this.markerImage.removeChild(t.container),this.markers.indexOf(t)>-1&&this.markers.splice(this.markers.indexOf(t),1),t.dispose()},e.prototype.switchToSelectMode=function(){this.mode="select",this.hideNotesEditor(),this._currentMarker!==void 0&&(this._currentMarker.state!=="new"?this._currentMarker.select():(this.removeMarker(this._currentMarker),this.setCurrentMarker(),this.markerImage.style.cursor="default"),this.addUndoStep())},e.prototype.toolbarButtonClicked=function(t,r){if(t==="marker"&&r!==void 0)this.createNewMarker(r);else if(t==="action")switch(r){case"select":this.switchToSelectMode(),this.switchToSelectMode();break;case"delete":this.deleteSelectedMarker();break;case"clear":this.clear();break;case"undo":this.undo();break;case"redo":this.redo();break;case"zoom":this.stepZoom();break;case"zoom-out":this.zoomLevel=1;break;case"notes":this.notesArea===void 0?(this.switchToSelectMode(),this.zoomLevel=1,this.showNotesEditor()):this.switchToSelectMode();break;case"close":this.close();break;case"render":this.switchToSelectMode(),this.startRenderAndClose()}},e.prototype.deleteSelectedMarker=function(){var t=this;if(this._currentMarker!==void 0){var r=!1;if(this.eventListeners.markerbeforedelete.forEach(function(n){var s=new dr(t,t._currentMarker,!0);n(s),s.defaultPrevented&&(r=!0)}),!r){var i=this._currentMarker;this._currentMarker.dispose(),this.markerImage.removeChild(this._currentMarker.container),this.markers.splice(this.markers.indexOf(this._currentMarker),1),this.setCurrentMarker(),this.addUndoStep(),this.eventListeners.markerdelete.forEach(function(n){return n(new dr(t,i))})}}},e.prototype.clear=function(){var t=this,r=!1;if(this.markers.length>0&&(this.eventListeners.markerbeforedelete.forEach(function(a){var o=new dr(t,void 0,!0);a(o),o.defaultPrevented&&(r=!0)}),!r)){this.setCurrentMarker();for(var i=function(a){var o=n.markers[a];n.setCurrentMarker(n.markers[a]),n._currentMarker.dispose(),n.markerImage.removeChild(n._currentMarker.container),n.markers.splice(n.markers.indexOf(n._currentMarker),1),n.eventListeners.markerdelete.forEach(function(l){return l(new dr(t,o))})},n=this,s=this.markers.length-1;s>=0;s--)i(s);this.addUndoStep()}},Object.defineProperty(e.prototype,"isNotesAreaOpen",{get:function(){return this.notesArea!==void 0},enumerable:!1,configurable:!0}),e.prototype.showNotesEditor=function(){var t;this._currentMarker!==void 0&&(this.overlayContainer.innerHTML="",this.notesArea=document.createElement("textarea"),this.notesArea.className=this.uiStyleSettings.notesAreaStyleClassName,this.notesArea.style.pointerEvents="auto",this.notesArea.style.alignSelf="stretch",this.notesArea.style.width="100%",this.notesArea.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.notesArea.value=(t=this._currentMarker.notes)!==null&&t!==void 0?t:"",this.overlayContainer.appendChild(this.notesArea))},e.prototype.hideNotesEditor=function(){this.isNotesAreaOpen&&(this._currentMarker!==void 0&&(this._currentMarker.notes=this.notesArea.value.trim()!==""?this.notesArea.value:void 0),this.overlayContainer.removeChild(this.notesArea),this.notesArea=void 0)},e.prototype.selectLastMarker=function(){this.markers.length>0?this.setCurrentMarker(this.markers[this.markers.length-1]):this.setCurrentMarker()},e.prototype.addUndoStep=function(){var t=this;if(this._currentMarker===void 0||this._currentMarker.state!=="edit"){var r=this.getState(),i=this.undoRedoManager.getLastUndoStep();if(!i||i.width===r.width&&i.height===r.height){var n=this.undoRedoManager.undoStepCount;this.undoRedoManager.addUndoStep(r),n<this.undoRedoManager.undoStepCount&&this.eventListeners.statechange.forEach(function(s){return s(new Ve(t))})}else this.undoRedoManager.replaceLastUndoStep(r)}},e.prototype.undo=function(){this.switchToSelectMode(),this.addUndoStep(),this.undoStep()},e.prototype.undoStep=function(){var t=this,r=this.undoRedoManager.undo();r!==void 0&&(this.restoreState(r),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(i){return i(new Ve(t))}))},e.prototype.redo=function(){this.switchToSelectMode(),this.redoStep()},e.prototype.redoStep=function(){var t=this,r=this.undoRedoManager.redo();r!==void 0&&(this.restoreState(r),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(i){return i(new Ve(t))}))},e.prototype.stepZoom=function(){var t=this.zoomSteps.indexOf(this.zoomLevel);this.zoomLevel=t<this.zoomSteps.length-1?this.zoomSteps[t+1]:this.zoomSteps[0]},e.prototype.panTo=function(t){this.contentDiv.scrollBy({left:this.prevPanPoint.x-t.x,top:this.prevPanPoint.y-t.y}),this.prevPanPoint=t},e.prototype.startRenderAndClose=function(){return Xc(this,void 0,void 0,function(){var t,r,i=this;return Uc(this,function(n){switch(n.label){case 0:return[4,this.render()];case 1:return t=n.sent(),r=this.getState(),this.eventListeners.render.forEach(function(s){return s(new J0(i,t,r))}),this.close(!0),[2]}})})},e.prototype.getState=function(t){t===!0&&this.setCurrentMarker();var r={width:this.imageWidth,height:this.imageHeight,markers:[]};return this.markers.forEach(function(i){return r.markers.push(i.getState())}),r},e.prototype.restoreState=function(t){var r=this;for(this.markers.splice(0);this.markerImage.lastChild;)this.markerImage.removeChild(this.markerImage.lastChild);t.markers.forEach(function(i){var n=r._availableMarkerTypes.find(function(a){return a.typeName===i.typeName});if(n!==void 0){var s=r.addNewMarker(n);s.restoreState(i),r.addMarkerEvents(s),r.markers.push(s)}}),t.width&&t.height&&(t.width!==this.imageWidth||t.height!==this.imageHeight)&&this.scaleMarkers(this.imageWidth/t.width,this.imageHeight/t.height),this.eventListeners.restorestate.forEach(function(i){return i(new Ve(r))})},e.prototype.addNewMarker=function(t){var r=J.createGroup();return this.markerImage.appendChild(r),new t(r,this.overlayContainer,this.settings)},e.prototype.createNewMarker=function(t){var r,i=this;(r=typeof t=="string"?this._availableMarkerTypes.find(function(n){return n.typeName===t}):t)&&(this.setCurrentMarker(),this.addUndoStep(),this._currentMarker=this.addNewMarker(r),this.addMarkerEvents(this._currentMarker),this.markerImage.style.cursor="crosshair",this.toolbar.setActiveMarkerButton(r.typeName),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this.eventListeners.markercreating.forEach(function(n){return n(new dr(i,i._currentMarker))}))},e.prototype.addMarkerEvents=function(t){t.onMarkerCreated=this.markerCreated,t.onColorChanged=this.colorChanged,t.onFillColorChanged=this.fillColorChanged,t.onStateChanged=this.markerStateChanged},e.prototype.markerCreated=function(t){var r=this;this.mode="select",this.markerImage.style.cursor="default",this.markers.push(t),this.setCurrentMarker(t),t instanceof Qi&&this.settings.newFreehandMarkerOnPointerUp?this.createNewMarker(Qi):this.toolbar.setSelectMode(),this.addUndoStep(),this.eventListeners.markercreate.forEach(function(i){return i(new dr(r,t))})},e.prototype.colorChanged=function(t){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultColor=t,this.settings.defaultStrokeColor=t)},e.prototype.fillColorChanged=function(t){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultFillColor=t)},e.prototype.markerStateChanged=function(t){var r=this;this.eventListeners.markerchange.forEach(function(i){return i(new dr(r,t))})},e.prototype.setCurrentMarker=function(t){var r=this;this._currentMarker!==t&&this._currentMarker!==void 0&&(this._currentMarker.deselect(),this.toolbar.setCurrentMarker(),this.toolbox.setPanelButtons([]),this._isResizing||this.eventListeners.markerdeselect.forEach(function(i){return i(new dr(r,r._currentMarker))})),this._currentMarker=t,this._currentMarker===void 0||this._currentMarker.isSelected||(this._currentMarker.state!=="new"&&this._currentMarker.select(),this.toolbar.setCurrentMarker(this._currentMarker),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this._isResizing||this.eventListeners.markerselect.forEach(function(i){return i(new dr(r,r._currentMarker))}))},e.prototype.onPointerDown=function(t){if(this._isFocused||this.focus(),this.touchPoints++,this.touchPoints===1||t.pointerType!=="touch")if(this._currentMarker===void 0||this._currentMarker.state!=="new"&&this._currentMarker.state!=="creating"){if(this.mode==="select"){var r=this.markers.find(function(i){return i.ownsTarget(t.target)});r!==void 0?(this.setCurrentMarker(r),this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(t.clientX,t.clientY),t.target)):(this.setCurrentMarker(),this.isDragging=!0,this.prevPanPoint={x:t.clientX,y:t.clientY})}}else this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(t.clientX,t.clientY))},e.prototype.onDblClick=function(t){if(this._isFocused||this.focus(),this.mode==="select"){var r=this.markers.find(function(i){return i.ownsTarget(t.target)});r!==void 0&&r!==this._currentMarker&&this.setCurrentMarker(r),this._currentMarker!==void 0?this._currentMarker.dblClick(this.clientToLocalCoordinates(t.clientX,t.clientY),t.target):this.setCurrentMarker()}},e.prototype.onPointerMove=function(t){this.touchPoints!==1&&t.pointerType==="touch"||(this._currentMarker!==void 0||this.isDragging)&&(this._currentMarker!==void 0&&this._currentMarker.state==="edit"||t.preventDefault(),this._currentMarker!==void 0?this._currentMarker.manipulate(this.clientToLocalCoordinates(t.clientX,t.clientY)):this.zoomLevel>1&&this.panTo({x:t.clientX,y:t.clientY}))},e.prototype.onPointerUp=function(t){this.touchPoints>0&&this.touchPoints--,this.touchPoints===0&&this.isDragging&&this._currentMarker!==void 0&&this._currentMarker.pointerUp(this.clientToLocalCoordinates(t.clientX,t.clientY)),this.isDragging=!1,this.addUndoStep()},e.prototype.onPointerOut=function(){this.touchPoints>0&&this.touchPoints--},e.prototype.onKeyUp=function(t){this._currentMarker===void 0||this.notesArea!==void 0||t.key!=="Delete"&&t.key!=="Backspace"||this.deleteSelectedMarker()},e.prototype.clientToLocalCoordinates=function(t,r){var i=this.markerImage.getBoundingClientRect(),n=i.width/this.imageWidth/this.zoomLevel,s=i.height/this.imageHeight/this.zoomLevel;return{x:(t-i.left)/this.zoomLevel/n,y:(r-i.top)/this.zoomLevel/s}},e.prototype.onWindowResize=function(){this.positionUI()},e.prototype.positionUI=function(){switch(this.setTopLeft(),this.settings.displayMode){case"inline":var t=this.target.getClientRects(),r=t.length>0&&t.item(0)&&t.item(0).y>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0;this.coverDiv.style.top=r+"px",this.coverDiv.style.left=this.target.offsetLeft.toString()+"px";break;case"popup":this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=this.windowHeight+"px",this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.styles.settings.toolbarHeight+"px"}this.positionMarkerImage(),this.positionLogo()},e.prototype.addLicenseKey=function(t){Yc.addKey(t)},e.prototype.addEventListener=function(t,r){this.eventListeners.addEventListener(t,r)},e.prototype.removeEventListener=function(t,r){this.eventListeners.removeEventListener(t,r)},e.prototype.renderState=function(t){this._silentRenderMode=!0,this.settings.displayMode="inline",this.isOpen||this.show(),this.restoreState(t),this.startRenderAndClose(),this._silentRenderMode=!1},Object.defineProperty(e.prototype,"isFocused",{get:function(){return this._isFocused},enumerable:!1,configurable:!0}),e.prototype.focus=function(){var t=this;this._isFocused||(this.attachWindowEvents(),this._isFocused=!0,this._previousCurrentMarker!==void 0&&this.setCurrentMarker(this._previousCurrentMarker),this.eventListeners.focus.forEach(function(r){return r(new Ve(t))}))},e.prototype.blur=function(){var t=this;this._isFocused&&(this.detachWindowEvents(),this._isFocused=!1,this._previousCurrentMarker=this._currentMarker,this.setCurrentMarker(),this.eventListeners.blur.forEach(function(r){return r(new Ve(t))}))},e.instanceCounter=0,e}();function ty(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(i){return i.split(" ").map(function(n){return n?""+e+n:""}).join(" ")}).join(" ")}function ey(e,t){return t.replace(/([^}{]*){/gm,function(r,i){return i.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function mr(e,t){return function(r){r&&(e[t]=r)}}function pd(e,t,r){return function(i){i&&(e[t][r]=i)}}function Jc(e,t){return function(r){var i=r.prototype;e.forEach(function(n){t(i,n)})}}function ry(e,t){return t===void 0&&(t={}),function(r,i){e.forEach(function(n){var s=t[n]||n;s in r||(r[s]=function(){for(var a,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var u=(a=this[i])[n].apply(a,o);return u===this[i]?this:u})})}}var iy="function",ny="object",sy="string",ay="number",du="undefined",vd=typeof window!==du,oy=typeof document!==du&&document,ly=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],jt=1e-7,hs={cm:function(e){return e*96/2.54},mm:function(e){return e*96/254},in:function(e){return e*96},pt:function(e){return e*96/72},pc:function(e){return e*96/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function uy(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,n++)i[n]=s[a];return i}function ea(e,t,r,i){return(e*i+t*r)/(r+i)}function Xn(e){return typeof e===du}function Ze(e){return e&&typeof e===ny}function $t(e){return Array.isArray(e)}function Ee(e){return typeof e===sy}function Li(e){return typeof e===ay}function pu(e){return typeof e===iy}function cy(e,t){var r=e===""||e==" ",i=t===""||t==" ";return i&&r||e===t}function gd(e,t,r,i,n){var s=vu(e,t,r);return s?r:fy(e,t,r+1,i,n)}function vu(e,t,r){if(!e.ignore)return null;var i=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(i)}function fy(e,t,r,i,n){for(var s=function(u){var c=t[u].trim();if(c===e.close&&!vu(e,t,u))return{value:u};var f=u,h=ke(n,function(d){var p=d.open;return p===c});if(h&&(f=gd(h,t,u,i,n)),f===-1)return a=u,"break";u=f,a=u},a,o=r;o<i;++o){var l=s(o);if(o=a,typeof l=="object")return l.value;if(l==="break")break}return-1}function gu(e,t){var r=Ee(t)?{separator:t}:t,i=r.separator,n=i===void 0?",":i,s=r.isSeparateFirst,a=r.isSeparateOnlyOpenClose,o=r.isSeparateOpenClose,l=o===void 0?a:o,u=r.openCloseCharacters,c=u===void 0?ly:u,f=c.map(function(w){var _=w.open,E=w.close;return _===E?_:_+"|"+E}).join("|"),h="(\\s*"+n+"\\s*|"+f+"|\\s+)",d=new RegExp(h,"g"),p=e.split(d).filter(function(w){return w&&w!=="undefined"}),v=p.length,g=[],m=[];function b(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var x=function(w){var _=p[w].trim(),E=w,M=ke(c,function(R){var B=R.open;return B===_}),O=ke(c,function(R){var B=R.close;return B===_});if(M){if(E=gd(M,p,w,v,c),E!==-1&&l)return b()&&s||(g.push(p.slice(w,E+1).join("")),w=E,s)?(C=w,"break"):(C=w,"continue")}else if(O&&!vu(O,p,w)){var A=uy(c);return A.splice(c.indexOf(O),1),{value:gu(e,{separator:n,isSeparateFirst:s,isSeparateOnlyOpenClose:a,isSeparateOpenClose:l,openCloseCharacters:A})}}else if(cy(_,n)&&!a)return b(),s?(C=w,"break"):(C=w,"continue");E===-1&&(E=v-1),m.push(p.slice(w,E+1).join("")),w=E,C=w},C,S=0;S<v;++S){var y=x(S);if(S=C,typeof y=="object")return y.value;if(y==="break")break}return m.length&&g.push(m.join("")),g}function Fr(e){return gu(e,"")}function Kr(e){return gu(e,",")}function md(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function Un(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],i=t[2],n=t[3];return{prefix:r,unit:n,value:parseFloat(i)}}function hy(e){return e.replace(/[\s-_]+([^\s-_])/g,function(t,r){return r.toUpperCase()})}function Is(e,t){return t===void 0&&(t="-"),e.replace(/([a-z])([A-Z])/g,function(r,i,n){return""+i+t+n.toLowerCase()})}function In(){return Date.now?Date.now():new Date().getTime()}function xr(e,t,r){r===void 0&&(r=-1);for(var i=e.length,n=0;n<i;++n)if(t(e[n],n,e))return n;return r}function ke(e,t,r){var i=xr(e,t);return i>-1?e[i]:r}var yd=function(){var e=In(),t=vd&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(r){var i=In(),n=setTimeout(function(){r(i-e)},1e3/60);return n}}(),dy=function(){var e=vd&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}}();function Sr(e){return Object.keys(e)}function py(e){var t=Sr(e);return t.map(function(r){return e[r]})}function Tt(e,t){var r=Un(e),i=r.value,n=r.unit;if(Ze(t)){var s=t[n];if(s){if(pu(s))return s(i);if(hs[n])return hs[n](i,s)}}else if(n==="%")return i*t/100;return hs[n]?hs[n](i):i}function al(e,t,r){return Math.max(t,Math.min(e,r))}function Zc(e,t,r,i){return i===void 0&&(i=e[0]/e[1]),[[mt(t[0],jt),mt(t[0]/i,jt)],[mt(t[1]*i,jt),mt(t[1],jt)]].filter(function(n){return n.every(function(s,a){var o=t[a],l=mt(o,jt);return r?s<=o||s<=l:s>=o||s>=l})})[0]||e}function bd(e,t,r,i){if(!i)return e.map(function(d,p){return al(d,t[p],r[p])});var n=e[0],s=e[1],a=i===!0?n/s:i,o=Zc(e,t,!1,a),l=o[0],u=o[1],c=Zc(e,r,!0,a),f=c[0],h=c[1];return n<l||s<u?(n=l,s=u):(n>f||s>h)&&(n=f,s=h),[n,s]}function vy(e){for(var t=e.length,r=0,i=t-1;i>=0;--i)r+=e[i];return r}function ol(e){for(var t=e.length,r=0,i=t-1;i>=0;--i)r+=e[i];return t?r/t:0}function Wt(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=Math.atan2(i,r);return n>=0?n:n+Math.PI*2}function gy(e){return[0,1].map(function(t){return ol(e.map(function(r){return r[t]}))})}function Qc(e){var t=gy(e),r=Wt(t,e[0]),i=Wt(t,e[1]);return r<i&&i-r<Math.PI||r>i&&i-r<-Math.PI?1:-1}function yr(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function mt(e,t){if(!t)return e;var r=1/t;return Math.round(e/t)/r}function tf(e,t){return e.forEach(function(r,i){e[i]=mt(e[i],t)}),e}function my(e){for(var t=[],r=0;r<e;++r)t.push(r);return t}function xd(e){return e.reduce(function(t,r){return t.concat(r)},[])}function Sd(e,t){e.indexOf(t)===-1&&e.push(t)}function qt(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function Cd(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function wd(e,t){if(e.classList)e.classList.remove(t);else{var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function Qt(e,t,r,i){e.addEventListener(t,r,i)}function Xt(e,t,r,i){e.removeEventListener(t,r,i)}function Ui(e){return(e==null?void 0:e.ownerDocument)||oy}function mu(e){return Ui(e).documentElement}function Gr(e){return Ui(e).body}function Br(e){var t;return((t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function _d(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}function Yi(e){return Ze(e)&&e.nodeName&&e.nodeType&&"ownerDocument"in e}var yy=function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(r){return this.values[this.keys.indexOf(r)]},t.set=function(r,i){var n=this.keys,s=this.values,a=n.indexOf(r),o=a===-1?n.length:a;n[o]=r,s[o]=i},e}(),by=function(){function e(){this.object={}}var t=e.prototype;return t.get=function(r){return this.object[r]},t.set=function(r,i){this.object[r]=i},e}(),xy=typeof Map=="function",Sy=function(){function e(){}var t=e.prototype;return t.connect=function(r,i){this.prev=r,this.next=i,r&&(r.next=this),i&&(i.prev=this)},t.disconnect=function(){var r=this.prev,i=this.next;r&&(r.next=i),i&&(i.prev=r)},t.getIndex=function(){for(var r=this,i=-1;r;)r=r.prev,++i;return i},e}();function Cy(e,t){var r=[],i=[];return e.forEach(function(n){var s=n[0],a=n[1],o=new Sy;r[s]=o,i[a]=o}),r.forEach(function(n,s){n.connect(r[s-1])}),e.filter(function(n,s){return!t[s]}).map(function(n,s){var a=n[0],o=n[1];if(a===o)return[0,0];var l=r[a],u=i[o-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,r[0]);var f=l.getIndex();return[c,f]})}var wy=function(){function e(r,i,n,s,a,o,l,u){this.prevList=r,this.list=i,this.added=n,this.removed=s,this.changed=a,this.maintained=o,this.changedBeforeAdded=l,this.fixed=u}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var r=Cy(this.changedBeforeAdded,this.fixed),i=this.changed,n=[];this.cacheOrdered=r.filter(function(s,a){var o=s[0],l=s[1],u=i[a],c=u[0],f=u[1];if(o!==l)return n.push([c,f]),!0}),this.cachePureChanged=n},e}();function Yn(e,t,r){var i=xy?Map:r?by:yy,n=r||function(b){return b},s=[],a=[],o=[],l=e.map(n),u=t.map(n),c=new i,f=new i,h=[],d=[],p={},v=[],g=0,m=0;return l.forEach(function(b,x){c.set(b,x)}),u.forEach(function(b,x){f.set(b,x)}),l.forEach(function(b,x){var C=f.get(b);typeof C>"u"?(++m,a.push(x)):p[C]=m}),u.forEach(function(b,x){var C=c.get(b);typeof C>"u"?(s.push(x),++g):(o.push([C,x]),m=p[x]||0,h.push([C-m,x-g]),d.push(x===C),C!==x&&v.push([C,x]))}),a.reverse(),new wy(e,t,s,a,v,o,h,d)}var _y=function(){function e(r,i){r===void 0&&(r=[]),this.findKeyCallback=i,this.list=[].slice.call(r)}var t=e.prototype;return t.update=function(r){var i=[].slice.call(r),n=Yn(this.list,i,this.findKeyCallback);return this.list=i,n},e}(),ll=function(e,t){return ll=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},ll(e,t)};function qn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ll(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ar=function(){return ar=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ar.apply(this,arguments)};function Ed(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function ef(e,t,r){if(r||arguments.length===2)for(var i=0,n=t.length,s;i<n;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}function rf(e){var t=0;return e.map(function(r){return r==null?"$compat".concat(++t):"".concat(r)})}function kd(e){var t=[];return e.forEach(function(r){t=t.concat($t(r)?kd(r):r)}),t}function Mo(e,t){if(!t)return e;for(var r in t)Xn(e[r])&&(e[r]=t[r]);return e}function ra(e,t){if(e===t)return!1;for(var r in e)if(!(r in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function nf(e){var t=e.className,r=Ed(e,["className"]);return t!=null&&(r.class=t),delete r.style,delete r.children,r}function sf(e){var t={},r={};for(var i in e)i.indexOf("on")===0?r[i]=e[i]:t[i]=e[i];return[t,r]}function Za(e){if(!e)return null;var t=e.b;return Yi(t)?t:Za(e.c)}function Md(e){var t=e.parentNode;t&&t.removeChild(e)}function Pd(e){e.forEach(function(t){t()})}function Ey(){return this.constructor(this.props,this.context)}var yu=0,Qa=function(){function e(r,i,n,s,a,o,l){l===void 0&&(l={}),this.t=r,this.d=i,this.k=n,this.i=s,this.c=a,this.ref=o,this.ps=l,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var t=e.prototype;return t.s=function(){return!0},t.u=function(r,i,n,s,a){var o=this,l=o.d,u=py(i).filter(function(p){return p.$_req}),c=kd(u.map(function(p){return p.$_subs})),f=ke(c,function(p){return p.d===l});if(o.b&&!Ee(n)&&!a&&!o.s(n.props,s)&&!f){var h=c.reduce(function(p,v){var g=v.d;return p[0]?p[0].d===g&&p.push(v):g>l&&p.push(v),p},[]);return h.forEach(function(p){Kn(p,p._ps,[p.o],r,i,!0)}),!1}o.o=n,o.ss(s);var d=o.ps;return Ee(n)||(o.ps=n.props,o.ref=n.ref),bu(this),o.r(r,i,o.b?d:{},s),!0},t.md=function(){this.rr()},t.ss=function(){},t.ud=function(){this.rr()},t.rr=function(){var r=this,i=r.ref,n=r.fr;i&&i(n?n.current:r.b)},e}();function Dd(){return Object.__CROACT_CURRENT_INSTNACE__}function ky(){return yu}function My(e){yu=e}function bu(e){return Object.__CROACT_CURRENT_INSTNACE__=e,yu=0,e}var xu=function(){function e(r,i){r===void 0&&(r={}),this.props=r,this.context=i,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var t=e.prototype;return t.render=function(){return null},t.shouldComponentUpdate=function(r,i){return this.props!==r||this.state!==i},t.setState=function(r,i,n){var s=this;s.$_timer||(s.$_state={}),clearTimeout(s.$_timer),s.$_timer=0,s.$_state=ar(ar({},s.$_state),r),n?s.$_setState(i,n):s.$_timer=window.setTimeout(function(){s.$_timer=0,s.$_setState(i,n)})},t.forceUpdate=function(r){this.setState({},r,!0)},t.componentDidMount=function(){},t.componentDidUpdate=function(r,i){},t.componentWillUnmount=function(){},t.$_setState=function(r,i){var n=[],s=this.$_p,a=Kn(s.c,[s],[s.o],n,s._cs,ar(ar({},this.state),this.$_state),i);a&&(r&&n.push(r),Pd(n),bu(null))},e}(),Td=function(e){qn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}var r=t.prototype;return r.shouldComponentUpdate=function(i,n){return ra(this.props,i)||ra(this.state,n)},t}(xu);function Rd(e){var t=function(r){t.current=r};return t.current=e,t}function Py(e){return e._fr=!0,e}function Dy(e,t,r,i){var n,s;return!((n=e==null?void 0:e.prototype)===null||n===void 0)&&n.render?s=new e(t,r):(s=new xu(t,r),s.constructor=e,e._fr?(i.fr=Rd(),s.render=function(){return this.constructor(this.props,i.fr)}):s.render=Ey),s.$_p=i,s}var Ty=function(e){qn(t,e);function t(i,n,s,a,o,l,u){u===void 0&&(u={});var c=e.call(this,i,n,s,a,o,l,Mo(u,i.defaultProps))||this;return c.typ="comp",c._usefs=[],c._uefs=[],c._defs=[],c}var r=t.prototype;return r.s=function(i,n){var s=this.b;return s.shouldComponentUpdate(Mo(i,this.t.defaultProps),n||s.state)!==!1},r.r=function(i,n,s){var a,o,l=this,u=l.t;l.ps=Mo(l.ps,l.t.defaultProps);var c=l.ps,f=!l.b,h=u.contextType,d=l.b,p=h==null?void 0:h.get(l);l._cs=n,f?(d=Dy(u,c,p,l),l.b=d):(d.props=c,d.context=p);var v=d.state;l._usefs=[],l._uefs=[];var g=d.render();((o=(a=g==null?void 0:g.props)===null||a===void 0?void 0:a.children)===null||o===void 0?void 0:o.length)===0&&(g.props.children=l.ps.children);var m=ar(ar({},n),d.$_cs);Kn(l,l._ps,g?[g]:[],i,m),f?l._uefs.push(function(){h==null||h.register(l),d.componentDidMount()}):l._uefs.push(function(){d.componentDidUpdate(s,v)}),i.push(function(){l._usefs.forEach(function(b){b()}),f?l.md():l.ud(),l._defs=l._uefs.map(function(b){return b()})})},r.ss=function(i){var n=this.b;!n||!i||(n.state=i)},r.un=function(){var i,n=this;n._ps.forEach(function(a){a.un()});var s=n.t;(i=s.contextType)===null||i===void 0||i.unregister(n),clearTimeout(n.b.$_timer),n._defs.forEach(function(a){a&&a()}),n.b.componentWillUnmount()},t}(Qa);function Ry(e,t,r){var i=Su(nf(e),nf(t)),n=i.added,s=i.removed,a=i.changed;for(var o in n)r.setAttribute(o,n[o]);for(var l in a)r.setAttribute(l,a[l][1]);for(var u in s)r.removeAttribute(u)}function Ay(e,t,r){var i=Su(e,t),n=i.added,s=i.removed;for(var a in s)r.e(a,!0);for(var o in n)r.e(o)}function Su(e,t){var r=Sr(e),i=Sr(t),n=Yn(r,i,function(l){return l}),s={},a={},o={};return n.added.forEach(function(l){var u=i[l];s[u]=t[u]}),n.removed.forEach(function(l){var u=r[l];a[u]=e[u]}),n.maintained.forEach(function(l){var u=l[0],c=r[u],f=[e[c],t[c]];e[c]!==t[c]&&(o[c]=f)}),{added:s,removed:a,changed:o}}function Oy(e,t,r){var i=r.style,n=Su(e,t),s=n.added,a=n.removed,o=n.changed;for(var l in s){var u=Is(l,"-");i.setProperty(u,s[l])}for(var l in o){var c=Is(l,"-");i.setProperty(c,o[l][1])}for(var l in a){var f=Is(l,"-");i.removeProperty(f)}}function Iy(e){return e.replace(/^on/g,"").toLowerCase()}var By=function(e){qn(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.typ="elem",i._es={},i._svg=!1,i}var r=t.prototype;return r.e=function(i,n){var s=this,a=s._es,o=s.b,l=Iy(i);n?(Xt(o,l,a[i]),delete a[i]):(a[i]=function(u){var c,f;(f=(c=s.ps)[i])===null||f===void 0||f.call(c,u)},Qt(o,l,a[i]))},r.s=function(i){return ra(this.ps,i)},r.r=function(i,n,s){var a,o=this,l=!o.b,u=o.ps;if(l){var c=Za(o.c),f=!1;o._svg||o.t==="svg"?f=!0:f=c&&c.ownerSVGElement,o._svg=f;var h=(a=o._hyd)===null||a===void 0?void 0:a.splice(0,1)[0],d=o.t;if(h)o._hyd=[].slice.call(h.children||[]);else{var p=Ui(c);f?h=p.createElementNS("http://www.w3.org/2000/svg",d):h=p.createElement(d)}o.b=h}Kn(o,o._ps,u.children,i,n);var v=o.b,g=sf(s),m=g[0],b=g[1],x=sf(u),C=x[0],S=x[1];return Ry(m,C,v),Ay(b,S,o),Oy(s.style||{},u.style||{},v),i.push(function(){l?o.md():o.ud()}),!0},r.un=function(){var i=this,n=i._es,s=i.b;for(var a in n)Xt(s,a,n[a]);i._ps.forEach(function(o){o.un()}),i._es={},i._sel||Md(s)},t}(Qa);function Bn(e){if(!e||Yi(e))return e;var t=e.$_p._ps;return t.length?Bn(t[0].b):null}function Ad(e){if(e){if(e.b&&Yi(e.b))return e;var t=e._ps;return t.length?Ad(t[0]):null}}function Ke(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=t||{},s=n.key,a=n.ref,o=Ed(n,["key","ref"]);return{type:e,key:s,ref:a,props:ar(ar({},o),{children:xd(r).filter(function(l){return l!=null&&l!==!1})})}}var Od=function(e){qn(t,e);function t(i,n){n===void 0&&(n=0);var s=e.call(this,"container",n,"container",0,null)||this;return s.typ="container",s.b=i,s}var r=t.prototype;return r.r=function(){return!0},r.un=function(){},t}(Qa),Ly=function(e){qn(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.typ="text",i}var r=t.prototype;return r.r=function(i){var n,s=this,a=!s.b;if(a){var o=Za(s.c),l=(n=s._hyd)===null||n===void 0?void 0:n.splice(0,1)[0];s.b=l||Ui(o).createTextNode(s.t.replace("text_",""))}return i.push(function(){a?s.md():s.ud()}),!0},r.un=function(){Md(this.b)},t}(Qa);function Fy(e,t,r){var i=r.map(function(l){return Ee(l)?null:l.key}),n=rf(t.map(function(l){return l.k})),s=rf(i),a=Yn(n,s,function(l){return l});a.removed.forEach(function(l){t.splice(l,1)[0].un()}),a.ordered.forEach(function(l){var u=l[0],c=l[1],f=t.splice(u,1)[0];t.splice(c,0,f);var h=Bn(f.b),d=Bn(t[c+1]&&t[c+1].b);h&&h.parentNode.insertBefore(h,d)}),a.added.forEach(function(l){t.splice(l,0,af(r[l],i[l],l,e))});var o=a.maintained.filter(function(l){l[0];var u=l[1],c=r[u],f=t[u],h=Ee(c)?"text_".concat(c):c.type;return h!==f.t?(f.un(),t.splice(u,1,af(c,i[u],u,e)),!0):(f.i=u,!1)});return ef(ef([],a.added,!0),o.map(function(l){l[0];var u=l[1];return u}),!0)}function zy(e,t){for(var r=e._ps,i=r.length,n=t.i+1;n<i;++n){var s=Bn(r[n].b);if(s)return s}return null}function af(e,t,r,i){var n=i.d+1;if(Ee(e)||Li(e))return new Ly("text_".concat(e),n,t,r,i,null,{});var s=e.type,a=typeof s=="string"?By:Ty;return new a(s,n,t,r,i,e.ref,e.props)}function Kn(e,t,r,i,n,s,a){var o=Fy(e,t,r),l=e._hyd,u=t.filter(function(f,h){return f._hyd=l,f.u(i,n,r[h],s,a)});e.typ==="container"&&e._sel&&t.forEach(function(f){var h=Ad(f);h&&(h._sel=!0)}),e._hyd=null;var c=Za(e);return c&&o.reverse().forEach(function(f){var h=t[f],d=Bn(h.b);if(d&&c!==d&&!d.parentNode){var p=zy(e,h);c.insertBefore(d,p)}}),u.length>0}function Ny(e,t,r,i){r===void 0&&(r=t.__CROACT__),i===void 0&&(i={});var n=!!r;r||(r=new Od(t));var s=[];return Kn(r,r._ps,e?[e]:[],s,i,void 0,void 0),Pd(s),bu(null),n||(t.__CROACT__=r),r}function of(e,t,r){return!r&&e&&(r=new Od(t.parentElement),r._hyd=[t],r._sel=!0),Ny(e,t,r),r}function Id(e){var t=Dd(),r=t._hs||(t._hs=[]),i=ky(),n=r[i];if(My(i+1),n){if(!ra(n.deps,e.deps))return n.updated=!1,n;r[i]=e}else r.push(e);return e.value=e.func(),e.updated=!0,e}function Gy(e,t){var r=Id({func:e,deps:t});return r.value}function Wy(e){return Gy(function(){return Rd(e)},[])}function Bd(e,t,r){var i=Dd(),n=Id({func:function(){return e},deps:t}),s=r?i._usefs:i._uefs;n.updated?s.push(function(){return n.effect&&n.effect(),n.effect=e(),n.effect}):s.push(function(){return n.effect})}function Hy(e,t,r){Bd(function(){e==null||e(t())},r,!0)}function Cu(e,t){for(var r=e.length,i=0;i<r;++i)if(t(e[i],i))return!0;return!1}function Ld(e,t){for(var r=e.length,i=0;i<r;++i)if(t(e[i],i))return e[i];return null}function Fd(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function wu(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function Vy(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!!(t&&t.length)}function jy(e,t){var r=wu("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return r?r[3]:""}function ul(e){return e.replace(/_/g,".")}function nn(e,t){var r=null,i="-1";return Cu(e,function(n){var s=wu("("+n.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!s||n.brand?!1:(r=n,i=s[3]||"-1",n.versionAlias?i=n.versionAlias:n.versionTest&&(i=jy(n.versionTest.toLowerCase(),t)||i),i=ul(i),!0)}),{preset:r,version:i}}function tn(e,t){var r={brand:"",version:"-1"};return Cu(e,function(i){var n=zd(t,i);return n?(r.brand=i.id,r.version=i.versionAlias||n.version,r.version!=="-1"):!1}),r}function zd(e,t){return Ld(e,function(r){var i=r.brand;return wu(""+t.test,i.toLowerCase())})}var cl=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Nd=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],fl=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Gd=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Wd=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Hd(e){return!!nn(Gd,e).preset}function $y(e){var t=Fd(e),r=!!/mobi/g.exec(t),i={name:"unknown",version:"-1",majorVersion:-1,webview:Hd(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},n={name:"unknown",version:"-1",majorVersion:-1},s=nn(cl,t),a=s.preset,o=s.version,l=nn(Wd,t),u=l.preset,c=l.version,f=nn(Nd,t);if(i.chromium=!!f.preset,i.chromiumVersion=f.version,!i.chromium){var h=nn(fl,t);i.webkit=!!h.preset,i.webkitVersion=h.version}return u&&(n.name=u.id,n.version=c,n.majorVersion=parseInt(c,10)),a&&(i.name=a.id,i.version=o,i.webview&&n.name==="ios"&&i.name!=="safari"&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:n,isMobile:r,isHints:!1}}function Xy(e){var t=navigator.userAgentData,r=(t.uaList||t.brands).slice(),i=e&&e.fullVersionList,n=t.mobile||!1,s=r[0],a=(e&&e.platform||t.platform||navigator.platform).toLowerCase(),o={name:s.brand,version:s.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!tn(Gd,r).brand||Hd(Fd())},l={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&Cu(fl,function(p){return zd(r,p)});var u=tn(Nd,r);if(o.chromium=!!u.brand,o.chromiumVersion=u.version,!o.chromium){var c=tn(fl,r);o.webkit=!!c.brand,o.webkitVersion=c.version}var f=Ld(Wd,function(p){return new RegExp(""+p.test,"g").exec(a)});if(l.name=f?f.id:"",e&&(l.version=e.platformVersion),i&&i.length){var h=tn(cl,i);o.name=h.brand||o.name,o.version=h.version||o.version}else{var d=tn(cl,r);o.name=d.brand||o.name,o.version=d.brand&&e?e.uaFullVersion:d.version}return o.webkit&&(l.name=n?"ios":"mac"),l.name==="ios"&&o.webview&&(o.version="-1"),l.version=ul(l.version),o.version=ul(o.version),l.majorVersion=parseInt(l.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:l,isMobile:n,isHints:!0}}function Uy(e){return typeof e>"u"&&Vy()?Xy():$y(e)}function Yy(e,t,r,i,n,s){for(var a=0;a<n;++a){var o=r+a*n,l=i+a*n;e[o]+=e[l]*s,t[o]+=t[l]*s}}function qy(e,t,r,i,n){for(var s=0;s<n;++s){var a=r+s*n,o=i+s*n,l=e[a],u=t[a];e[a]=e[o],e[o]=l,t[a]=t[o],t[o]=u}}function Ky(e,t,r,i,n){for(var s=0;s<i;++s){var a=r+s*i;e[a]/=n,t[a]/=n}}function Vd(e,t,r){r===void 0&&(r=Math.sqrt(e.length));for(var i=e.slice(),n=0;n<r;++n)i[n*r+t-1]=0,i[(t-1)*r+n]=0;return i[(t-1)*(r+1)]=1,i}function cr(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=e.slice(),i=Bt(t),n=0;n<t;++n){var s=t*n+n;if(!mt(r[s],jt)){for(var a=n+1;a<t;++a)if(r[t*n+a]){qy(r,i,n,a,t);break}}if(!mt(r[s],jt))return[];Ky(r,i,n,t,r[s]);for(var a=0;a<t;++a){var o=a,l=a+n*t,u=r[l];!mt(u,jt)||n===a||Yy(r,i,o,n,t,-u)}}return i}function Jy(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],i=0;i<t;++i)for(var n=0;n<t;++n)r[n*t+i]=e[t*i+n];return r}function jd(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],i=e[t*t-1],n=0;n<t-1;++n)r[n]=e[t*(t-1)+n]/i;return r[t-1]=0,r}function Zy(e,t){for(var r=Bt(t),i=0;i<t-1;++i)r[t*(t-1)+i]=e[i]||0;return r}function ei(e,t){for(var r=e.slice(),i=e.length;i<t-1;++i)r[i]=0;return r[t-1]=1,r}function Qe(e,t,r){if(t===void 0&&(t=Math.sqrt(e.length)),t===r)return e;for(var i=Bt(r),n=Math.min(t,r),s=0;s<n-1;++s){for(var a=0;a<n-1;++a)i[s*r+a]=e[s*t+a];i[(s+1)*r-1]=e[(s+1)*t-1],i[(r-1)*r+s]=e[(t-1)*t+s]}return i[r*r-1]=e[t*t-1],i}function ia(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=Bt(e);return t.forEach(function(n){i=Rt(i,n,e)}),i}function Rt(e,t,r){r===void 0&&(r=Math.sqrt(e.length));var i=[],n=e.length/r,s=t.length/n;if(n){if(!s)return e}else return t;for(var a=0;a<r;++a)for(var o=0;o<s;++o){i[o*r+a]=0;for(var l=0;l<n;++l)i[o*r+a]+=e[l*r+a]*t[o*n+l]}return i}function kt(e,t){for(var r=Math.min(e.length,t.length),i=e.slice(),n=0;n<r;++n)i[n]=i[n]+t[n];return i}function pt(e,t){for(var r=Math.min(e.length,t.length),i=e.slice(),n=0;n<r;++n)i[n]=i[n]-t[n];return i}function Qy(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function $d(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function ue(e,t,r){r===void 0&&(r=t.length);var i=Rt(e,t,r),n=i[r-1];return i.map(function(s){return s/n})}function t1(e,t){return Rt(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function e1(e,t){return Rt(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function r1(e,t){return Rt(e,Zn(t,4))}function ds(e,t){var r=t[0],i=r===void 0?1:r,n=t[1],s=n===void 0?1:n,a=t[2],o=a===void 0?1:a;return Rt(e,[i,0,0,0,0,s,0,0,0,0,o,0,0,0,0,1],4)}function Jn(e,t){return ue(Zn(t,3),ei(e,3))}function Po(e,t){var r=t[0],i=r===void 0?0:r,n=t[1],s=n===void 0?0:n,a=t[2],o=a===void 0?0:a;return Rt(e,[1,0,0,0,0,1,0,0,0,0,1,0,i,s,o,1],4)}function lf(e,t){return Rt(e,t,4)}function Zn(e,t){var r=Math.cos(e),i=Math.sin(e),n=Bt(t);return n[0]=r,n[1]=i,n[t]=-i,n[t+1]=r,n}function Bt(e){for(var t=e*e,r=[],i=0;i<t;++i)r[i]=i%(e+1)?0:1;return r}function _u(e,t){for(var r=Bt(t),i=Math.min(e.length,t-1),n=0;n<i;++n)r[(t+1)*n]=e[n];return r}function ri(e,t){for(var r=Bt(t),i=Math.min(e.length,t-1),n=0;n<i;++n)r[t*(t-1)+n]=e[n];return r}function Eu(e,t,r,i,n,s,a,o){var l=e[0],u=e[1],c=t[0],f=t[1],h=r[0],d=r[1],p=i[0],v=i[1],g=n[0],m=n[1],b=s[0],x=s[1],C=a[0],S=a[1],y=o[0],w=o[1],_=[l,0,c,0,h,0,p,0,u,0,f,0,d,0,v,0,1,0,1,0,1,0,1,0,0,l,0,c,0,h,0,p,0,u,0,f,0,d,0,v,0,1,0,1,0,1,0,1,-g*l,-m*l,-b*c,-x*c,-C*h,-S*h,-y*p,-w*p,-g*u,-m*u,-b*f,-x*f,-C*d,-S*d,-y*v,-w*v],E=cr(_,8);if(!E.length)return[];var M=Rt(E,[g,m,b,x,C,S,y,w],8);return M[8]=1,Qe(Jy(M),3,4)}var Sn=function(){return Sn=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Sn.apply(this,arguments)};function i1(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ln(e,t){return t===void 0&&(t=0),pi(Fi(e,t))}function n1(e,t){var r=ue(e,[t[0],t[1]||0,t[2]||0,1],4),i=r[3]||1;return[r[0]/i,r[1]/i,r[2]/i]}function pi(e){var t=i1();return e.forEach(function(r){var i=r.matrixFunction,n=r.functionValue;i&&(t=i(t,n))}),t}function Fi(e,t){t===void 0&&(t=0);var r=$t(e)?e:Fr(e);return r.map(function(i){var n=md(i),s=n.prefix,a=n.value,o=null,l=s,u="";if(s==="translate"||s==="translateX"||s==="translate3d"){var c=Ze(t)?Sn(Sn({},t),{"o%":t["%"]}):{"%":t,"o%":t},f=Kr(a).map(function(R,B){return B===0&&"x%"in c?c["%"]=t["x%"]:B===1&&"y%"in c?c["%"]=t["y%"]:c["%"]=t["o%"],Tt(R,c)}),h=f[0],d=f[1],p=d===void 0?0:d,v=f[2],g=v===void 0?0:v;o=Po,u=[h,p,g]}else if(s==="translateY"){var m=Ze(t)?Sn({"%":t["y%"]},t):{"%":t},p=Tt(a,m);o=Po,u=[0,p,0]}else if(s==="translateZ"){var g=parseFloat(a);o=Po,u=[0,0,g]}else if(s==="scale"||s==="scale3d"){var b=Kr(a).map(function(R){return parseFloat(R)}),x=b[0],C=b[1],S=C===void 0?x:C,y=b[2],w=y===void 0?1:y;o=ds,u=[x,S,w]}else if(s==="scaleX"){var x=parseFloat(a);o=ds,u=[x,1,1]}else if(s==="scaleY"){var S=parseFloat(a);o=ds,u=[1,S,1]}else if(s==="scaleZ"){var w=parseFloat(a);o=ds,u=[1,1,w]}else if(s==="rotate"||s==="rotateZ"||s==="rotateX"||s==="rotateY"){var _=Un(a),E=_.unit,M=_.value,O=E==="rad"?M:M*Math.PI/180;s==="rotate"||s==="rotateZ"?(l="rotateZ",o=r1):s==="rotateX"?o=t1:s==="rotateY"&&(o=e1),u=O}else if(s==="matrix3d")o=lf,u=Kr(a).map(function(R){return parseFloat(R)});else if(s==="matrix"){var A=Kr(a).map(function(R){return parseFloat(R)});o=lf,u=[A[0],A[1],0,0,A[2],A[3],0,0,0,0,1,0,A[4],A[5],0,1]}else l="";return{name:s,functionName:l,value:a,matrixFunction:o,functionValue:u}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var hl=function(e,t){return hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},hl(e,t)};function s1(e,t){hl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Xd=typeof Map=="function"?void 0:function(){var e=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++e)}}(),Ud=function(e){s1(t,e);function t(r){return r===void 0&&(r=[]),e.call(this,r,Xd)||this}return t}(_y);function a1(e,t){return Yn(e,t,Xd)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dl=function(){return dl=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},dl.apply(this,arguments)};function o1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,n++)i[n]=s[a];return i}var l1=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(r,i){if(Ze(r))for(var n in r)this.on(n,r[n]);else this._addEvent(r,i,{});return this},t.off=function(r,i){if(!r)this._events={};else if(Ze(r))for(var n in r)this.off(n);else if(!i)this._events[r]=[];else{var s=this._events[r];if(s){var a=xr(s,function(o){return o.listener===i});a>-1&&s.splice(a,1)}}return this},t.once=function(r,i){var n=this;return i&&this._addEvent(r,i,{once:!0}),new Promise(function(s){n._addEvent(r,s,{once:!0})})},t.emit=function(r,i){var n=this;i===void 0&&(i={});var s=this._events[r];if(!r||!s)return!0;var a=!1;return i.eventType=r,i.stop=function(){a=!0},i.currentTarget=this,o1(s).forEach(function(o){o.listener(i),o.once&&n.off(r,o.listener)}),!a},t.trigger=function(r,i){return i===void 0&&(i={}),this.emit(r,i)},t._addEvent=function(r,i,n){var s=this._events;s[r]=s[r]||[];var a=s[r];a.push(dl({listener:i},n))},e}();const to=l1;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pl=function(e,t){return pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},pl(e,t)};function u1(e,t){pl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var yi=function(){return yi=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},yi.apply(this,arguments)};function c1(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function uf(e,t){return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}function ps(e){if(e){if(Ee(e))return document.querySelector(e)}else return null;if(pu(e))return e();if(e instanceof Element)return e;if("current"in e)return e.current;if("value"in e)return e.value}var f1=function(e){u1(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i._startRect=null,i._startPos=[],i._prevTime=0,i._timer=0,i._prevScrollPos=[0,0],i._isWait=!1,i._flag=!1,i._currentOptions=null,i._lock=!1,i._unregister=null,i._onScroll=function(){var n=i._currentOptions;i._lock||!n||i.emit("scrollDrag",{next:function(s){i.checkScroll({container:n.container,inputEvent:s})}})},i}var r=t.prototype;return r.dragStart=function(i,n){var s=ps(n.container);if(!s){this._flag=!1;return}var a=0,o=0,l=0,u=0;if(s===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=s.getBoundingClientRect();a=c.top,o=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[i.clientX,i.clientY],this._startRect={top:a,left:o,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],n),this._currentOptions=n,this._registerScrollEvent(n)},r.drag=function(i,n){if(clearTimeout(this._timer),!!this._flag){var s=i.clientX,a=i.clientY,o=n.threshold,l=o===void 0?0:o,u=this,c=u._startRect,f=u._startPos;this._currentOptions=n;var h=[0,0];return c.top>a-l?(f[1]>c.top||a<f[1])&&(h[1]=-1):c.top+c.height<a+l&&(f[1]<c.top+c.height||a>f[1])&&(h[1]=1),c.left>s-l?(f[0]>c.left||s<f[0])&&(h[0]=-1):c.left+c.width<s+l&&(f[0]<c.left+c.width||s>f[0])&&(h[0]=1),!h[0]&&!h[1]?!1:this._continueDrag(yi(yi({},n),{direction:h,inputEvent:i,isDrag:!0}))}},r.checkScroll=function(i){var n=this;if(this._isWait)return!1;var s=i.prevScrollPos,a=s===void 0?this._prevScrollPos:s,o=i.direction,l=i.throttleTime,u=l===void 0?0:l,c=i.inputEvent,f=i.isDrag,h=this._getScrollPosition(o||[0,0],i),d=h[0]-a[0],p=h[1]-a[1],v=o||[d?Math.abs(d)/d:0,p?Math.abs(p)/p:0];return this._prevScrollPos=h,this._lock=!1,!d&&!p?!1:(this.emit("move",{offsetX:v[0]?d:0,offsetY:v[1]?p:0,inputEvent:c}),u&&f&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){n._continueDrag(i)},u)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(i,n){var s=n.container,a=n.getScrollPosition,o=a===void 0?c1:a;return o({container:ps(s),direction:i})},r._continueDrag=function(i){var n=this,s,a=i.container,o=i.direction,l=i.throttleTime,u=i.useScroll,c=i.isDrag,f=i.inputEvent;if(!(!this._flag||c&&this._isWait)){var h=In(),d=Math.max(l+this._prevTime-h,0);if(d>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){n._continueDrag(i)},d),!1;this._prevTime=h;var p=this._getScrollPosition(o,i);this._prevScrollPos=p,c&&(this._isWait=!0),u||(this._lock=!0);var v={container:ps(a),direction:o,inputEvent:f};return(s=i.requestScroll)===null||s===void 0||s.call(i,v),this.emit("scroll",v),this._isWait=!1,u||this.checkScroll(yi(yi({},i),{prevScrollPos:p,direction:o,inputEvent:f}))}},r._registerScrollEvent=function(i){this._unregisterScrollEvent();var n=i.checkScrollEvent;if(n){var s=n===!0?uf:n,a=ps(i.container);n===!0&&(a===document.body||a===document.documentElement)?this._unregister=uf(window,this._onScroll):this._unregister=s(a,this._onScroll)}},r._unregisterScrollEvent=function(){var i;(i=this._unregister)===null||i===void 0||i.call(this),this._unregister=null},t}(to);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function h1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,n++)i[n]=s[a];return i}function be(e){return mt(e,jt)}function d1(e,t){return e.every(function(r,i){return be(r-t[i])===0})}function p1(e,t){return!be(e[0]-t[0])&&!be(e[1]-t[1])}function Yd(e){return e.length<3?0:Math.abs(vy(e.map(function(t,r){var i=e[r+1]||e[0];return t[0]*i[1]-i[0]*t[1]})))/2}function cf(e,t){var r=t.width,i=t.height,n=t.left,s=t.top,a=ii(e),o=a.minX,l=a.minY,u=a.maxX,c=a.maxY,f=r/(u-o),h=i/(c-l);return e.map(function(d){return[n+(d[0]-o)*f,s+(d[1]-l)*h]})}function ii(e){var t=e.map(function(i){return i[0]}),r=e.map(function(i){return i[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,r)}}function vl(e,t,r){var i=e[0],n=e[1],s=ii(t),a=s.minX,o=s.maxX,l=[[a,n],[o,n]],u=na(l[0],l[1]),c=gl(t),f=[];if(c.forEach(function(p){var v=na(p[0],p[1]),g=p[0];if(d1(u,v))f.push({pos:e,line:p,type:"line"});else{var m=qd(ku(u,v),[l,p]);m.forEach(function(b){p.some(function(x){return p1(x,b)})?f.push({pos:b,line:p,type:"point"}):be(g[1]-n)!==0&&f.push({pos:b,line:p,type:"intersection"})})}}),!r&&ke(f,function(p){return p[0]===i}))return!0;var h=0,d={};return f.forEach(function(p){var v=p.pos,g=p.type,m=p.line;if(!(v[0]>i))if(g==="intersection")++h;else{if(g==="line")return;if(g==="point"){var b=ke(m,function(S){return S[1]!==n}),x=d[v[0]],C=b[1]>n?1:-1;x?x!==C&&++h:d[v[0]]=C}}}),h%2===1}function na(e,t){var r=e[0],i=e[1],n=t[0],s=t[1],a=n-r,o=s-i;Math.abs(a)<jt&&(a=0),Math.abs(o)<jt&&(o=0);var l=0,u=0,c=0;return a?o?(l=-o/a,u=1,c=-l*r-i):(u=1,c=-i):o&&(l=-1,c=r),[l,u,c]}function ku(e,t){var r=e[0],i=e[1],n=e[2],s=t[0],a=t[1],o=t[2],l=r===0&&s===0,u=i===0&&a===0,c=[];if(l&&u)return[];if(l){var f=-n/i,h=-o/a;return f!==h?[]:[[-1/0,f],[1/0,f]]}else if(u){var d=-n/r,p=-o/s;return d!==p?[]:[[d,-1/0],[d,1/0]]}else if(r===0){var v=-n/i,g=-(a*v+o)/s;c=[[g,v]]}else if(s===0){var v=-o/a,g=-(i*v+n)/r;c=[[g,v]]}else if(i===0){var g=-n/r,v=-(s*g+o)/a;c=[[g,v]]}else if(a===0){var g=-o/s,v=-(r*g+n)/i;c=[[g,v]]}else{var g=(i*o-a*n)/(a*r-i*s),v=-(r*g+n)/i;c=[[g,v]]}return c.map(function(m){return[m[0],m[1]]})}function qd(e,t){var r=t.map(function(f){return[0,1].map(function(h){return[Math.min(f[0][h],f[1][h]),Math.max(f[0][h],f[1][h])]})}),i=[];if(e.length===2){var n=e[0],s=n[0],a=n[1];if(be(s-e[1][0])){if(!be(a-e[1][1])){var u=Math.max.apply(Math,r.map(function(f){return f[0][0]})),c=Math.min.apply(Math,r.map(function(f){return f[0][1]}));if(be(u-c)>0)return[];i=[[u,a],[c,a]]}}else{var o=Math.max.apply(Math,r.map(function(f){return f[1][0]})),l=Math.min.apply(Math,r.map(function(f){return f[1][1]}));if(be(o-l)>0)return[];i=[[s,o],[s,l]]}}return i.length||(i=e.filter(function(f){var h=f[0],d=f[1];return r.every(function(p){return 0<=be(h-p[0][0])&&0<=be(p[0][1]-h)&&0<=be(d-p[1][0])&&0<=be(p[1][1]-d)})})),i.map(function(f){return[be(f[0]),be(f[1])]})}function gl(e){return h1(e.slice(1),[e[0]]).map(function(t,r){return[e[r],t]})}function v1(e,t){var r=e.slice(),i=t.slice();Qc(r)===-1&&r.reverse(),Qc(i)===-1&&i.reverse();var n=gl(r),s=gl(i),a=n.map(function(c){return na(c[0],c[1])}),o=s.map(function(c){return na(c[0],c[1])}),l=[];a.forEach(function(c,f){var h=n[f],d=[];o.forEach(function(p,v){var g=ku(c,p),m=qd(g,[h,s[v]]);d.push.apply(d,m.map(function(b){return{index1:f,index2:v,pos:b,type:"intersection"}}))}),d.sort(function(p,v){return yr(h[0],p.pos)-yr(h[0],v.pos)}),l.push.apply(l,d),vl(h[1],i)&&l.push({index1:f,index2:-1,pos:h[1],type:"inside"})}),s.forEach(function(c,f){if(vl(c[1],r)){var h=!1,d=xr(l,function(p){var v=p.index2;return v===f?(h=!0,!1):!!h});d===-1&&(h=!1,d=xr(l,function(p){var v=p.index1,g=p.index2;return v===-1&&g+1===f?(h=!0,!1):!!h})),d===-1?l.push({index1:-1,index2:f,pos:c[1],type:"inside"}):l.splice(d,0,{index1:-1,index2:f,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var f=c.pos,h=f[0]+"x"+f[1];return u[h]?!1:(u[h]=!0,!0)})}function g1(e,t){var r=v1(e,t);return r.map(function(i){var n=i.pos;return n})}function m1(e,t){var r=g1(e,t);return Yd(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ml=function(e,t){return ml=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},ml(e,t)};function y1(e,t){ml(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Vt=function(){return Vt=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Vt.apply(this,arguments)};function b1(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=Math.atan2(i,r);return n>=0?n:n+Math.PI*2}function Do(e){return b1([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180}function x1(e){return e.touches&&e.touches.length>=2}function vs(e){return e?e.touches?C1(e.touches):[Kd(e)]:[]}function S1(e){return e&&(e.type.indexOf("mouse")>-1||"button"in e)}function ff(e,t,r){var i=r.length,n=Cn(e,i),s=n.clientX,a=n.clientY,o=n.originalClientX,l=n.originalClientY,u=Cn(t,i),c=u.clientX,f=u.clientY,h=Cn(r,i),d=h.clientX,p=h.clientY,v=s-c,g=a-f,m=s-d,b=a-p;return{clientX:o,clientY:l,deltaX:v,deltaY:g,distX:m,distY:b}}function To(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function C1(e){for(var t=Math.min(e.length,2),r=[],i=0;i<t;++i)r.push(Kd(e[i]));return r}function Kd(e){return{clientX:e.clientX,clientY:e.clientY}}function Cn(e,t){t===void 0&&(t=e.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},i=Math.min(e.length,t),n=0;n<i;++n){var s=e[n];r.originalClientX+="originalClientX"in s?s.originalClientX:s.clientX,r.originalClientY+="originalClientY"in s?s.originalClientY:s.clientY,r.clientX+=s.clientX,r.clientY+=s.clientY}return t?{clientX:r.clientX/t,clientY:r.clientY/t,originalClientX:r.originalClientX/t,originalClientY:r.originalClientY/t}:r}var Ro=function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),Do(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),Do(t)-Do(this.startClients)},e.prototype.getPosition=function(t,r){t===void 0&&(t=this.prevClients);var i=ff(t||this.prevClients,this.prevClients,this.startClients),n=i.deltaX,s=i.deltaY;return this.movement+=Math.sqrt(n*n+s*s),this.prevClients=t,i},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var r=this.prevClients,i=this.startClients,n=Math.min(this.length,r.length),s=[],a=0;a<n;++a)s[a]=ff([t[a]],[r[a]],[i[a]]);return s},e.prototype.getMovement=function(t){var r=this.movement;if(!t)return r;var i=Cn(t,this.length),n=Cn(this.prevClients,this.length),s=i.clientX-n.clientX,a=i.clientY-n.clientY;return Math.sqrt(s*s+a*a)+r},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),To(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),To(t)/To(this.startClients)},e.prototype.move=function(t,r){this.startClients.forEach(function(i){i.clientX-=t,i.clientY-=r}),this.prevClients.forEach(function(i){i.clientX-=t,i.clientY-=r})},e}(),hf=["textarea","input"],w1=function(e){y1(t,e);function t(r,i){i===void 0&&(i={});var n=e.call(this)||this;n.options={},n.flag=!1,n.pinchFlag=!1,n.data={},n.isDrag=!1,n.isPinch=!1,n.clientStores=[],n.targets=[],n.prevTime=0,n.doubleFlag=!1,n._useMouse=!1,n._useTouch=!1,n._useDrag=!1,n._dragFlag=!1,n._isTrusted=!1,n._isMouseEvent=!1,n._isSecondaryButton=!1,n._preventMouseEvent=!1,n._prevInputEvent=null,n._isDragAPI=!1,n._isIdle=!0,n._preventMouseEventId=0,n._window=window,n.onDragStart=function(h,d){if(d===void 0&&(d=!0),!(!n.flag&&h.cancelable===!1)){var p=h.type.indexOf("drag")>=-1;if(!(n.flag&&p)){n._isDragAPI=!0;var v=n.options,g=v.container,m=v.pinchOutside,b=v.preventWheelClick,x=v.preventRightClick,C=v.preventDefault,S=v.checkInput,y=v.dragFocusedInput,w=v.preventClickEventOnDragStart,_=v.preventClickEventOnDrag,E=v.preventClickEventByCondition,M=n._useTouch,O=!n.flag;if(n._isSecondaryButton=h.which===3||h.button===2,b&&(h.which===2||h.button===1)||x&&(h.which===3||h.button===2))return n.stop(),!1;if(O){var A=n._window.document.activeElement,R=h.target;if(R){var B=R.tagName.toLowerCase(),L=hf.indexOf(B)>-1,W=R.isContentEditable;if(L||W){if(S||!y&&A===R)return!1;if(A&&(A===R||W&&A.isContentEditable&&A.contains(R)))if(y)R.blur();else return!1}else if((C||h.type==="touchstart")&&A){var H=A.tagName.toLowerCase();(A.isContentEditable||hf.indexOf(H)>-1)&&A.blur()}(w||_||E)&&Qt(n._window,"click",n._onClick,!0)}n.clientStores=[new Ro(vs(h))],n._isIdle=!1,n.flag=!0,n.isDrag=!1,n._isTrusted=d,n._dragFlag=!0,n._prevInputEvent=h,n.data={},n.doubleFlag=In()-n.prevTime<200,n._isMouseEvent=S1(h),!n._isMouseEvent&&n._preventMouseEvent&&n._allowMouseEvent();var z=n._preventMouseEvent||n.emit("dragStart",Vt(Vt({data:n.data,datas:n.data,inputEvent:h,isMouseEvent:n._isMouseEvent,isSecondaryButton:n._isSecondaryButton,isTrusted:d,isDouble:n.doubleFlag},n.getCurrentStore().getPosition()),{preventDefault:function(){h.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));z===!1&&n.stop(),n._isMouseEvent&&n.flag&&C&&h.preventDefault()}if(!n.flag)return!1;var Y=0;if(O?(n._attchDragEvent(),M&&m&&(Y=setTimeout(function(){Qt(g,"touchstart",n.onDragStart,{passive:!1})}))):M&&m&&Xt(g,"touchstart",n.onDragStart),n.flag&&x1(h)){if(clearTimeout(Y),O&&h.touches.length!==h.changedTouches.length)return;n.pinchFlag||n.onPinchStart(h)}}}},n.onDrag=function(h,d){if(n.flag){var p=n.options.preventDefault;!n._isMouseEvent&&p&&h.preventDefault(),n._prevInputEvent=h;var v=vs(h),g=n.moveClients(v,h,!1);if(n._dragFlag){if(n.pinchFlag||g.deltaX||g.deltaY){var m=n._preventMouseEvent||n.emit("drag",Vt(Vt({},g),{isScroll:!!d,inputEvent:h}));if(m===!1){n.stop();return}}n.pinchFlag&&n.onPinch(h,v)}n.getCurrentStore().getPosition(v,!0)}},n.onDragEnd=function(h){if(n.flag){var d=n.options,p=d.pinchOutside,v=d.container,g=d.preventClickEventOnDrag,m=d.preventClickEventOnDragStart,b=d.preventClickEventByCondition,x=n.isDrag;(g||m||b)&&requestAnimationFrame(function(){n._allowClickEvent()}),!b&&!m&&g&&!x&&n._allowClickEvent(),n._useTouch&&p&&Xt(v,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(h);var C=h!=null&&h.touches?vs(h):[],S=C.length;S===0||!n.options.keepDragging?n.flag=!1:n._addStore(new Ro(C));var y=n._getPosition(),w=In(),_=!x&&n.doubleFlag;n._prevInputEvent=null,n.prevTime=x||_?0:w,n.flag||(n._dettachDragEvent(),n._preventMouseEvent||n.emit("dragEnd",Vt({data:n.data,datas:n.data,isDouble:_,isDrag:x,isClick:!x,isMouseEvent:n._isMouseEvent,isSecondaryButton:n._isSecondaryButton,inputEvent:h,isTrusted:n._isTrusted},y)),n.clientStores=[],n._isMouseEvent||(n._preventMouseEvent=!0,clearTimeout(n._preventMouseEventId),n._preventMouseEventId=setTimeout(function(){n._preventMouseEvent=!1},200)),n._isIdle=!0)}},n.onBlur=function(){n.onDragEnd()},n._allowClickEvent=function(){Xt(n._window,"click",n._onClick,!0)},n._onClick=function(h){n._allowClickEvent(),n._allowMouseEvent();var d=n.options.preventClickEventByCondition;d!=null&&d(h)||(h.stopPropagation(),h.preventDefault())},n._onContextMenu=function(h){var d=n.options;d.preventRightClick?n.onDragEnd(h):h.preventDefault()},n._passCallback=function(){};var s=[].concat(r),a=s[0];n._window=_d(a)?a:Br(a),n.options=Vt({checkInput:!1,container:a&&!("document"in a)?Br(a):a,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var o=n.options,l=o.container,u=o.events,c=o.checkWindowBlur;if(n._useDrag=u.indexOf("drag")>-1,n._useTouch=u.indexOf("touch")>-1,n._useMouse=u.indexOf("mouse")>-1,n.targets=s,n._useDrag&&s.forEach(function(h){Qt(h,"dragstart",n.onDragStart)}),n._useMouse&&(s.forEach(function(h){Qt(h,"mousedown",n.onDragStart),Qt(h,"mousemove",n._passCallback)}),Qt(l,"contextmenu",n._onContextMenu)),c&&Qt(Br(),"blur",n.onBlur),n._useTouch){var f={passive:!1};s.forEach(function(h){Qt(h,"touchstart",n.onDragStart,f),Qt(h,"touchmove",n._passCallback,f)})}return n}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(i,n){return i+n.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(r,i,n,s){s===void 0&&(s=!0),this.flag&&(this.clientStores[0].move(r,i),s&&this.onDrag(n,!0))},t.prototype.move=function(r,i){var n=r[0],s=r[1],a=this.getCurrentStore(),o=a.prevClients;return this.moveClients(o.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+n,clientY:c+s,originalClientX:u,originalClientY:c}}),i,!0)},t.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},t.prototype.setEventData=function(r){var i=this.data;for(var n in r)i[n]=r[n];return this},t.prototype.setEventDatas=function(r){return this.setEventData(r)},t.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),Vt(Vt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var r=this,i=this.targets,n=this.options.container;this.off(),Xt(this._window,"blur",this.onBlur),this._useDrag&&i.forEach(function(s){Xt(s,"dragstart",r.onDragStart)}),this._useMouse&&(i.forEach(function(s){Xt(s,"mousedown",r.onDragStart)}),Xt(n,"contextmenu",this._onContextMenu)),this._useTouch&&(i.forEach(function(s){Xt(s,"touchstart",r.onDragStart)}),Xt(n,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(r){var i=this,n=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>n)){var s=new Ro(vs(r));this.pinchFlag=!0,this._addStore(s);var a=this.emit("pinchStart",Vt(Vt({data:this.data,datas:this.data,angle:s.getAngle(),touches:this.getCurrentStore().getPositions()},s.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));a===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(r,i){if(!(!this.flag||!this.pinchFlag||i.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Vt(Vt({data:this.data,datas:this.data,movement:this.getMovement(i),angle:n.getAngle(i),rotation:n.getRotation(i),touches:n.getPositions(i),scale:n.getScale(i),distance:n.getDistance(i)},n.getPosition(i)),{inputEvent:r,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(r){if(this.pinchFlag){var i=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",Vt(Vt({data:this.data,datas:this.data,isPinch:i,touches:n.getPositions()},n.getPosition()),{inputEvent:r}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(r,i,n){var s=this._getPosition(r,n),a=this.isDrag;(s.deltaX||s.deltaY)&&(this.isDrag=!0);var o=!1;return!a&&this.isDrag&&(o=!0),Vt(Vt({data:this.data,datas:this.data},s),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:i,isTrusted:this._isTrusted,isFirstDrag:o})},t.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},t.prototype._getPosition=function(r,i){var n=this.getCurrentStore(),s=n.getPosition(r,i),a=this.clientStores.slice(1).reduce(function(u,c){var f=c.getPosition();return u.distX+=f.distX,u.distY+=f.distY,u},s),o=a.distX,l=a.distY;return Vt(Vt({},s),{distX:o,distY:l})},t.prototype._attchDragEvent=function(){var r=this._window,i=this.options.container,n={passive:!1};this._isDragAPI&&(Qt(i,"dragover",this.onDrag,n),Qt(r,"dragend",this.onDragEnd)),this._useMouse&&(Qt(i,"mousemove",this.onDrag),Qt(r,"mouseup",this.onDragEnd)),this._useTouch&&(Qt(i,"touchmove",this.onDrag,n),Qt(r,"touchend",this.onDragEnd,n),Qt(r,"touchcancel",this.onDragEnd,n))},t.prototype._dettachDragEvent=function(){var r=this._window,i=this.options.container;this._isDragAPI&&(Xt(i,"dragover",this.onDrag),Xt(r,"dragend",this.onDragEnd)),this._useMouse&&(Xt(i,"mousemove",this.onDrag),Xt(r,"mouseup",this.onDragEnd)),this._useTouch&&(Xt(i,"touchstart",this.onDragStart),Xt(i,"touchmove",this.onDrag),Xt(r,"touchend",this.onDragEnd),Xt(r,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t}(to);function _1(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}var E1=_1;function k1(e){return E1(e).toString(36)}function M1(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function P1(e,t,r){return r.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(i,n){var s=n.trim();return(s?Kr(s):[""]).map(function(a){var o=a.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(e))):o?".".concat(e," ").concat(o):".".concat(e)}).join(", ")+" {"})}function D1(e,t,r,i,n){var s=Ui(i),a=s.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",e),a.setAttribute("data-styled-count","1"),r.nonce&&a.setAttribute("nonce",r.nonce),a.innerHTML=P1(e,t,r),(n||s.head||s.body).appendChild(a),a}function T1(e){var t="rCS"+k1(e);return{className:t,inject:function(r,i){i===void 0&&(i={});var n=M1(r),s=(n||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!s)s=D1(t,e,i,r,n);else{var a=parseFloat(s.getAttribute("data-styled-count"))||0;s.setAttribute("data-styled-count","".concat(a+1))}return{destroy:function(){var o,l=parseFloat(s.getAttribute("data-styled-count"))||0;l<=1?(s.remove?s.remove():(o=s.parentNode)===null||o===void 0||o.removeChild(s),s=null):s.setAttribute("data-styled-count","".concat(l-1))}}}}}var yl=function(){return yl=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},yl.apply(this,arguments)};function R1(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function Jd(e,t){var r=T1(t),i=r.className;return Py(function(n,s){var a=n.className,o=a===void 0?"":a;n.cspNonce;var l=R1(n,["className","cspNonce"]),u=Wy();return Hy(s,function(){return u.current},[]),Bd(function(){var c=r.inject(u.current,{nonce:n.cspNonce});return function(){c.destroy()}},[]),Ke(e,yl({ref:u,"data-styled-id":i,className:"".concat(o," ").concat(i)},l))})}var bl=function(e,t){return bl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},bl(e,t)};function Qn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");bl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var D=function(){return D=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},D.apply(this,arguments)};function A1(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function O1(e,t,r,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(n<3?a(s):n>3?a(t,r,s):a(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s}function I1(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function T(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function Q(e,t,r){if(r||arguments.length===2)for(var i=0,n=t.length,s;i<n;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}function ts(e,t){return D({events:[],props:[],name:e},t)}var B1=["n","w","s","e"],Mu=["n","w","s","e","nw","ne","sw","se"];function L1(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*e,'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function F1(e){var t=L1(1,e),r=Math.round(e/45)*45%180,i="ns-resize";return r===135?i="nwse-resize":r===45?i="nesw-resize":r===90&&(i="ew-resize"),"cursor:".concat(i,";cursor: url('").concat(t,"') 16 16, ").concat(i,";")}var qi=Uy(),Zd=qi.browser.webkit,Qd=Zd&&function(){var e=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1}(),tp=qi.browser.name,ep=parseInt(qi.browser.version,10),z1=tp==="chrome",N1=qi.browser.chromium,G1=parseInt(qi.browser.chromiumVersion,10)||0,W1=z1&&ep>=109||N1&&G1>=109,H1=tp==="firefox",V1=parseInt(qi.browser.webkitVersion,10)>=612||ep>=15,Pu="moveable-",j1=Mu.map(function(e){var t="",r="",i="center",n="center",s="calc(var(--moveable-control-padding, 20) * -1px)";return e.indexOf("n")>-1&&(t="top: ".concat(s,";"),n="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",n="top"),e.indexOf("w")>-1&&(r="left: ".concat(s,";"),i="right"),e.indexOf("e")>-1&&(r="left: 0px;",i="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(r).concat(t,`
        transform-origin: `).concat(i," ").concat(n,`;
    }`)}).join(`
`),$1=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(j1,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
`).concat(F1(e),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Qd?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),X1=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],xl=1e-4,me=1e-7,gs=1e-9,Sl=Math.pow(10,10),df=-Sl,U1={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Du={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},rp={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},ip=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function es(e,t,r,i,n,s){var a,o;s===void 0&&(s="draggable");var l=(o=(a=t.gestos[s])===null||a===void 0?void 0:a.move(r,e.inputEvent))!==null&&o!==void 0?o:{},u=l.originalDatas||l.datas,c=u[s]||(u[s]={});return D(D({},n?$p(t,l):l),{isPinch:!!i,parentEvent:!0,datas:c,originalDatas:e.originalDatas})}var zi=function(){function e(t){var r;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[t]={},r)}return e.prototype.dragStart=function(t,r){this.isDrag=!1,this.isFlag=!1;var i=r.originalDatas;return this.datas=i,i[this.ableName]||(i[this.ableName]={}),D(D({},this.move(t,r.inputEvent)),{type:"dragstart"})},e.prototype.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},e.prototype.move=function(t,r){var i,n,s=!1;if(!this.isFlag)this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],i=t[0],n=t[1],this.isFlag=!0;else{var a=this.isDrag;i=this.prevX+t[0],n=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!a&&this.isDrag&&(s=!0)}return this.prevX=i,this.prevY=n,{type:"drag",clientX:i,clientY:n,inputEvent:r,isFirstDrag:s,isDrag:this.isDrag,distX:i-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e}();function Pi(e,t,r,i){var n=e.length===16,s=n?4:3,a=ui(e,r,i,s),o=T(a,4),l=T(o[0],2),u=l[0],c=l[1],f=T(o[1],2),h=f[0],d=f[1],p=T(o[2],2),v=p[0],g=p[1],m=T(o[3],2),b=m[0],x=m[1],C=T(Nt(e,t,s),2),S=C[0],y=C[1],w=Math.min(u,h,v,b),_=Math.min(c,d,g,x),E=Math.max(u,h,v,b),M=Math.max(c,d,g,x);u=u-w||0,h=h-w||0,v=v-w||0,b=b-w||0,c=c-_||0,d=d-_||0,g=g-_||0,x=x-_||0,S=S-w||0,y=y-_||0;var O=e[0],A=e[s+1],R=pe(O*A);return{left:w,top:_,right:E,bottom:M,origin:[S,y],pos1:[u,c],pos2:[h,d],pos3:[v,g],pos4:[b,x],direction:R}}function np(e,t){var r=t.clientX,i=t.clientY,n=t.datas,s=e.state,a=s.moveableClientRect,o=s.rootMatrix,l=s.is3d,u=s.pos1,c=a.left,f=a.top,h=l?4:3,d=T(pt(Wi(o,[r-c,i-f],h),u),2),p=d[0],v=d[1],g=T(hr({datas:n,distX:p,distY:v}),2),m=g[0],b=g[1];return[m,b]}function li(e,t){var r=t.datas,i=e.state,n=i.allMatrix,s=i.beforeMatrix,a=i.is3d,o=i.left,l=i.top,u=i.origin,c=i.offsetMatrix,f=i.targetMatrix,h=i.transformOrigin,d=a?4:3;r.is3d=a,r.matrix=n,r.targetMatrix=f,r.beforeMatrix=s,r.offsetMatrix=c,r.transformOrigin=h,r.inverseMatrix=cr(n,d),r.inverseBeforeMatrix=cr(s,d),r.absoluteOrigin=ei(kt([o,l],u),d),r.startDragBeforeDist=ue(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=ue(r.inverseMatrix,r.absoluteOrigin,d)}function Y1(e){return Pi(e.datas.beforeTransform,[50,50],100,100).direction}function eo(e,t,r){var i=t.datas,n=t.originalDatas.beforeRenderable,s=i.transformIndex,a=n.nextTransforms,o=a.length,l=n.nextTransformAppendedIndexes,u=-1;s===-1?(r==="translate"?u=0:r==="rotate"&&(u=xr(a,function(d){return d.match(/scale\(/g)})),u===-1&&(u=a.length),i.transformIndex=u):ke(l,function(d){return d.index===s&&d.functionName===r})?u=s:u=s+l.filter(function(d){return d.index<s}).length;var c=bx(a,e.state,u),f=c.targetFunction,h=r==="rotate"?"rotateZ":r;i.beforeFunctionTexts=c.beforeFunctionTexts,i.afterFunctionTexts=c.afterFunctionTexts,i.beforeTransform=c.beforeFunctionMatrix,i.beforeTransform2=c.beforeFunctionMatrix2,i.targetTansform=c.targetFunctionMatrix,i.afterTransform=c.afterFunctionMatrix,i.afterTransform2=c.afterFunctionMatrix2,i.targetAllTransform=c.allFunctionMatrix,f.functionName===h?(i.afterFunctionTexts.splice(0,1),i.isAppendTransform=!1):o>u&&(i.isAppendTransform=!0,n.nextTransformAppendedIndexes=Q(Q([],T(l),!1),[{functionName:r,index:u,isAppend:!0}],!1))}function ro(e,t,r){return"".concat(e.beforeFunctionTexts.join(" ")," ").concat(e.isAppendTransform?r:t," ").concat(e.afterFunctionTexts.join(" "))}function q1(e){var t=e.datas,r=e.distX,i=e.distY,n=T(ap({datas:t,distX:r,distY:i}),2),s=n[0],a=n[1],o=sp(t,Zy([s,a],4));return ue(o,ei([0,0,0],4),4)}function sp(e,t,r){var i=e.beforeTransform,n=e.afterTransform,s=e.beforeTransform2,a=e.afterTransform2,o=e.targetAllTransform,l=r?Rt(o,t,4):Rt(t,o,4),u=Rt(cr(r?s:i,4),l,4),c=Rt(u,cr(r?a:n,4),4);return c}function ap(e){var t=e.datas,r=e.distX,i=e.distY,n=t.inverseBeforeMatrix,s=t.is3d,a=t.startDragBeforeDist,o=t.absoluteOrigin,l=s?4:3;return pt(ue(n,kt(o,[r,i]),l),a)}function hr(e,t){var r=e.datas,i=e.distX,n=e.distY,s=r.inverseBeforeMatrix,a=r.inverseMatrix,o=r.is3d,l=r.startDragBeforeDist,u=r.startDragDist,c=r.absoluteOrigin,f=o?4:3;return pt(ue(t?s:a,kt(c,[i,n]),f),t?l:u)}function K1(e,t){var r=e.datas,i=e.distX,n=e.distY,s=r.beforeMatrix,a=r.matrix,o=r.is3d,l=r.startDragBeforeDist,u=r.startDragDist,c=r.absoluteOrigin,f=o?4:3;return pt(ue(t?s:a,kt(t?l:u,[i,n]),f),c)}function J1(e,t,r,i,n,s){return i===void 0&&(i=t),n===void 0&&(n=r),s===void 0&&(s=[0,0]),e?e.map(function(a,o){var l=Un(a),u=l.value,c=l.unit,f=o?n:i,h=o?r:t;if(a==="%"||isNaN(u)){var d=f?s[o]/f:0;return h*d}else if(c!=="%")return u;return h*u/100}):s}function op(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function Z1(e,t){return op(t).map(function(r){return e[r]})}function Ao(e,t){var r=(t+1)/2;return[ea(e[0][0],e[1][0],r,1-r),ea(e[0][1],e[1][1],r,1-r)]}function Kt(e,t){var r=Ao([e[0],e[1]],t[0]),i=Ao([e[2],e[3]],t[0]);return Ao([r,i],t[1])}function Q1(e,t,r,i,n,s){var a=ui(t,r,i,n),o=Kt(a,s),l=e[0]-o[0],u=e[1]-o[1];return[l,u]}function rs(e,t,r,i){return Rt(e,_n(t,i,r),i)}function tb(e,t,r,i){var n=e.transformOrigin,s=e.offsetMatrix,a=e.is3d,o=a?4:3,l;if(Ee(r)){var u=t.beforeTransform,c=t.afterTransform;i?l=Qe(Ln(r),4,o):l=Qe(Rt(Rt(u,Ln([r]),4),c,4),4,o)}else l=r;return rs(s,l,n,o)}function eb(e,t){var r=e.transformOrigin,i=e.offsetMatrix,n=e.is3d,s=e.targetMatrix,a=e.targetAllTransform,o=n?4:3;return rs(i,Rt(a||s,_u(t,o),o),r,o)}function io(e,t){var r=Ki(t);return{setTransform:function(i,n){n===void 0&&(n=-1),r.startTransforms=$t(i)?i:Fr(i),Cl(e,t,n)},setTransformIndex:function(i){Cl(e,t,i)}}}function no(e,t,r){var i=Ki(t),n=i.startTransforms;Cl(e,t,xr(n,function(s){return s.indexOf("".concat(r,"("))===0}))}function Cl(e,t,r){var i=Ki(t),n=t.datas;if(n.transformIndex=r,r!==-1){var s=i.startTransforms[r];if(s){var a=e.state,o=Fi([s],{"x%":function(l){return l/100*a.offsetWidth},"y%":function(l){return l/100*a.offsetHeight}});n.startValue=o[0].functionValue}}}function Tu(e,t){var r=Ki(e);r.nextTransforms=Fr(t)}function Ki(e){return e.originalDatas.beforeRenderable}function sa(e){var t=e.originalDatas.beforeRenderable;return t.nextTransforms}function ms(e){return(sa(e)||[]).join(" ")}function ys(e){return Ki(e).nextStyle}function lp(e,t,r,i,n){Tu(n,t);var s=de.drag(e,es(n,e.state,r,i,!1)),a=s?s.transform:t;return D(D({transform:t,drag:s},ge({transform:a},n)),{afterTransform:a})}function Ru(e,t,r,i,n,s){var a=tb(e.state,n,t,s),o=nb(e,r,i,a);return o}function up(e,t,r,i,n,s,a){var o=Ru(e,t,r,n,s,a),l=e.state,u=l.left,c=l.top,f=e.props.groupable,h=f?u:0,d=f?c:0,p=pt(i,o);return pt(p,[h,d])}function rb(e,t,r,i,n,s,a){var o=up(e,t,r,i,n,s,a);return o}function ib(e,t,r){return[t?-1+e[0]/(t/2):0,r?-1+e[1]/(r/2):0]}function nb(e,t,r,i){i===void 0&&(i=e.state.allMatrix);var n=e.state,s=n.width,a=n.height,o=n.is3d,l=o?4:3,u=[s/2*(1+t[0])+r[0],a/2*(1+t[1])+r[1]];return Nt(i,u,l)}function sb(e,t,r){var i=r.fixedDirection,n=r.fixedPosition,s=r.fixedOffset;return up(e,"rotate(".concat(t,"deg)"),i,n,s,r)}function ab(e,t,r,i,n,s){var a=e.props.groupable,o=e.state,l=o.transformOrigin,u=o.offsetMatrix,c=o.is3d,f=o.width,h=o.height,d=o.left,p=o.top,v=s.fixedDirection,g=s.nextTargetMatrix||o.targetMatrix,m=c?4:3,b=J1(n,t,r,f,h,l),x=a?d:0,C=a?p:0,S=rs(u,g,b,m),y=Q1(i,S,t,r,m,v);return pt(y,[x,C])}function ob(e,t){return Kt(ze(e.state),t)}function lb(e,t){var r=e.targetGesto,i=e.controlGesto,n;return r!=null&&r.isFlag()&&(n=r.getEventData()[t]),!n&&(i!=null&&i.isFlag())&&(n=i.getEventData()[t]),n||{}}function ub(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function cb(e){var t=e("scale"),r=e("rotate"),i=e("translate"),n=[];return i&&i!=="0px"&&i!=="none"&&n.push("translate(".concat(i.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&n.push("rotate(".concat(r,")")),t&&t!=="1"&&t!=="none"&&n.push("scale(".concat(t.split(/\s+/).join(","),")")),n}function cp(e,t,r){for(var i=e,n=[],s=mu(e)||Gr(e),a=!r&&e===t||e===s,o=a,l=!1,u=3,c,f,h,d=!1,p=zn(t,t,!0).offsetParent,v=1;i&&!o;){o=a;var g=Me(i),m=g("position"),b=Ip(i),x=m==="fixed",C=cb(g),S=Qy(ox(b)),y=void 0,w=!1,_=!1,E=0,M=0,O=0,A=0,R={hasTransform:!1,fixedContainer:null};x&&(d=!0,R=hx(i),p=R.fixedContainer);var B=S.length;!l&&(B===16||C.length)&&(l=!0,u=4,Pl(n),h&&(h=Qe(h,3,4))),l&&B===9&&(S=Qe(S,3,4));var L=fx(i,e),W=L.tagName,H=L.hasOffset,z=L.isSVG,Y=L.origin,K=L.targetOrigin,G=L.offset,tt=T(G,2),nt=tt[0],et=tt[1];W==="svg"&&!i.ownerSVGElement&&h&&(n.push({type:"target",target:i,matrix:dx(i,u)}),n.push({type:"offset",target:i,matrix:Bt(u)}));var st=parseFloat(g("zoom"))||1;if(x)y=R.fixedContainer,w=!0;else{var Z=zn(i,t,!1,!0,g),lt=Z.offsetZoom;if(y=Z.offsetParent,w=Z.isEnd,_=Z.isStatic,v*=lt,(Z.isCustomElement||lt!==1)&&_)nt-=y.offsetLeft,et-=y.offsetTop;else if(H1||W1){var ft=Z.parentSlotElement;if(ft){for(var yt=y,St=0,rt=0;yt&&ub(yt);)St+=yt.offsetLeft,rt+=yt.offsetTop,yt=yt.offsetParent;nt-=St,et-=rt}}}if(Zd&&!V1&&H&&!z&&_&&(m==="relative"||m==="static")&&(nt-=y.offsetLeft,et-=y.offsetTop,a=a||w),x)H&&R.hasTransform&&(O=y.clientLeft,A=y.clientTop);else if(H&&p!==y&&(E=y.clientLeft,M=y.clientTop),H&&y===s){var ct=Bp(i,!1);nt+=ct[0],et+=ct[1]}if(n.push({type:"target",target:i,matrix:_n(S,u,Y)}),C.length&&(n.push({type:"offset",target:i,matrix:Bt(u)}),n.push({type:"target",target:i,matrix:_n(Ln(C),u,Y)})),H){var k=i===e,P=k?0:i.scrollLeft,I=k?0:i.scrollTop;n.push({type:"offset",target:i,matrix:ri([nt-P+E-O,et-I+M-A],u)})}else n.push({type:"offset",target:i,origin:Y});if(st!==1&&n.push({type:"zoom",target:i,matrix:_n(_u([st,st],u),u,[0,0])}),h||(h=S),c||(c=Y),f||(f=K),o||x)break;i=y,a=w,(!r||i===s)&&(o=a)}return h||(h=Bt(u)),c||(c=[0,0]),f||(f=[0,0]),{zoom:v,offsetContainer:p,matrixes:n,targetMatrix:h,transformOrigin:c,targetOrigin:f,is3d:l,hasFixed:d}}var jr=null,$r=null,bi=null;function Ni(e){e?(window.Map&&(jr=new Map,$r=new Map),bi=[]):(jr=null,bi=null,$r=null)}function fb(e){var t=$r==null?void 0:$r.get(e);if(t)return t;var r=En(e,!0);return $r&&$r.set(e,r),r}function hb(e,t){if(bi){var r=ke(bi,function(n){return n[0][0]==e&&n[0][1]==t});if(r)return r[1]}var i=cp(e,t,!0);return bi&&bi.push([[e,t],i]),i}function Me(e){var t=jr==null?void 0:jr.get(e);if(!t){var r=Br(e).getComputedStyle(e);if(!jr)return function(s){return r[s]};t={style:r,cached:{}},jr.set(e,t)}var i=t.cached,n=t.style;return function(s){return s in i||(i[s]=n[s]),i[s]}}function Je(e,t,r){var i=r.originalDatas;i.groupable=i.groupable||{};var n=i.groupable;n.childDatas=n.childDatas||[];var s=n.childDatas;return e.moveables.map(function(a,o){return s[o]=s[o]||{},s[o][t]=s[o][t]||{},D(D({},r),{isRequestChild:!0,datas:s[o][t],originalDatas:s[o]})})}function Oo(e,t,r,i,n,s,a){var o=!!r.match(/Start$/g),l=!!r.match(/End$/g),u=n.isPinch,c=n.datas,f=Je(e,t.name,n),h=e.moveables,d=[],p=f.map(function(v,g){var m=h[g],b=m.state,x=b.gestos,C=v;if(o)C=new zi(a).dragStart(i,v),d.push(C);else{if(x[a]||(x[a]=c.childGestos[g]),!x[a])return;C=es(v,b,i,u,s,a),d.push(C)}var S=t[r](m,D(D({},C),{parentFlag:!0}));return l&&(x[a]=null),S});return o&&(c.childGestos=h.map(function(v){return v.state.gestos[a]})),{eventParams:p,childEvents:d}}function br(e,t,r,i,n,s){n===void 0&&(n=function(c,f){return f});var a=!!r.match(/End$/g),o=Je(e,t.name,i),l=e.moveables,u=o.map(function(c,f){var h=l[f],d=c;d=n(h,c);var p=t[r](h,D(D({},d),{parentFlag:!0}));return p&&s&&s(h,c,p,f),a&&(h.state.gestos={}),p});return u}function aa(e,t,r,i){var n=r.fixedDirection,s=r.fixedPosition,a=i.datas.startPositions||ze(t.state),o=Kt(a,n),l=T(ue(Zn(-e.rotation/180*Math.PI,3),[o[0]-s[0],o[1]-s[1],1],3),2),u=l[0],c=l[1];return i.datas.originalX=u,i.datas.originalY=c,i}function fp(e,t,r,i){var n=e.getState(),s=n.renderPoses,a=n.rotation,o=n.direction,l=ni(e.props,t).zoom,u=wn(a/Math.PI*180),c={},f=e.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var h=f.renderDirectionMap;r.forEach(function(p){var v=p.dir;c[v]=!0});var d=pe(o);return r.map(function(p){var v=p.data,g=p.classNames,m=p.dir,b=Du[m];if(!b||!c[m])return null;h[m]=!0;var x=(mt(u,15)+d*rp[m]+720)%180,C={};return Sr(v).forEach(function(S){C["data-".concat(S)]=v[S]}),i.createElement("div",D({className:dt.apply(void 0,Q(["control","direction",m,t],T(g),!1)),"data-rotation":x,"data-direction":m},C,{key:"direction-".concat(m),style:ca.apply(void 0,Q([a,l],T(b.map(function(S){return s[S]})),!1))}))})}function hp(e,t,r,i){var n=ni(e.props,r),s=n.renderDirections,a=s===void 0?t:s,o=n.displayAroundControls;if(!a)return[];var l=a===!0?Mu:a;return Q(Q([],T(o?gp(e,i,r,l):[]),!1),T(fp(e,r,l.map(function(u){return{data:{},classNames:[],dir:u}}),i)),!1)}function Fn(e,t,r,i,n,s){for(var a=[],o=6;o<arguments.length;o++)a[o-6]=arguments[o];var l=Wt(r,i),u=t?mt(l/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(s),className:dt.apply(void 0,Q(["line","direction",t?"edge":"",t],T(a),!1)),"data-rotation":u,"data-line-key":s,"data-direction":t,style:an(r,i,n,l)})}function dp(e,t,r,i,n){var s=r===!0?B1:r;return s.map(function(a,o){var l=T(Du[a],2),u=l[0],c=l[1];if(c!=null)return Fn(e,a,i[u],i[c],n,"".concat(t,"Edge").concat(o),t)}).filter(Boolean)}function pp(e){return function(t,r){var i=ni(t.props,e).edge;return i&&(i===!0||i.length)?Q(Q([],T(dp(r,e,i,t.getState().renderPoses,t.props.zoom)),!1),T(db(t,e,r)),!1):vp(t,e,r)}}function vp(e,t,r){return hp(e,Mu,t,r)}function db(e,t,r){return hp(e,["nw","ne","sw","se"],t,r)}function gp(e,t,r,i){var n=e.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var s=e.getState(),a=s.renderPoses,o=s.rotation,l=s.direction,u=n.renderDirectionMap,c=e.props.zoom,f=pe(l),h=o/Math.PI*180;return(i||Sr(u)).map(function(d){var p=Du[d];if(!p)return null;var v=(mt(h,15)+f*rp[d]+720)%180,g=["around-control"];return r&&g.push("direction",r),t.createElement("div",{className:dt.apply(void 0,Q([],T(g),!1)),"data-rotation":v,"data-direction":d,key:"direction-around-".concat(d),style:ca.apply(void 0,Q([o,c],T(p.map(function(m){return a[m]})),!1))})})}function Au(e,t,r){var i=e||{},n=i.position,s=n===void 0?"client":n,a=i.left,o=a===void 0?-1/0:a,l=i.top,u=l===void 0?-1/0:l,c=i.right,f=c===void 0?1/0:c,h=i.bottom,d=h===void 0?1/0:h,p={position:s,left:o,top:u,right:f,bottom:d};return{vertical:pf(p,t,!0),horizontal:pf(p,r,!1)}}function so(e,t){var r=e.state,i=r.containerClientRect,n=i.clientHeight,s=i.clientWidth,a=i.clientLeft,o=i.clientTop,l=r.snapOffset,u=l.left,c=l.top,f=l.right,h=l.bottom,d=t||e.props.bounds||{},p=d.position||"client",v=p==="css",g=d.left,m=g===void 0?-1/0:g,b=d.top,x=b===void 0?-1/0:b,C=d.right,S=C===void 0?v?-1/0:1/0:C,y=d.bottom,w=y===void 0?v?-1/0:1/0:y;return v&&(S=s+f-u-S,w=n+h-c-w),{left:m+u-a,right:S+u-a,top:x+c-o,bottom:w+c-o}}function pb(e,t,r){var i=so(e),n=i.left,s=i.top,a=i.right,o=i.bottom,l=T(r,2),u=l[0],c=l[1],f=T(pt(r,t),2),h=f[0],d=f[1];U(h)<me&&(h=0),U(d)<me&&(d=0);var p=d>0,v=h>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(h===0&&d===0)return{vertical:g,horizontal:m};if(h===0)p?o<c&&(m.pos=o,m.offset=c-o):s>c&&(m.pos=s,m.offset=c-s);else if(d===0)v?a<u&&(g.pos=a,g.offset=u-a):n>u&&(g.pos=n,g.offset=u-n);else{var b=d/h,x=r[1]-b*u,C=0,S=0,y=!1;v&&a<=u?(C=b*a+x,S=a,y=!0):!v&&u<=n&&(C=b*n+x,S=n,y=!0),y&&(C<s||C>o)&&(y=!1),y||(p&&o<=c?(C=o,S=(C-x)/b,y=!0):!p&&c<=s&&(C=s,S=(C-x)/b,y=!0)),y&&(g.isBound=!0,g.pos=S,g.offset=u-S,m.isBound=!0,m.pos=C,m.offset=c-C)}return{vertical:g,horizontal:m}}function pf(e,t,r){var i=e[r?"left":"top"],n=e[r?"right":"bottom"],s=Math.min.apply(Math,Q([],T(t),!1)),a=Math.max.apply(Math,Q([],T(t),!1)),o=[];return i+1>s&&o.push({direction:"start",isBound:!0,offset:s-i,pos:i}),n-1<a&&o.push({direction:"end",isBound:!0,offset:a-n,pos:n}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(l,u){return U(u.offset)-U(l.offset)})}function vf(e,t,r){var i=r?e.map(function(n){return Jn(n,r)}):e;return i.some(function(n){return n[0]<t.left&&U(n[0]-t.left)>.1||n[0]>t.right&&U(n[0]-t.right)>.1||n[1]<t.top&&U(n[1]-t.top)>.1||n[1]>t.bottom&&U(n[1]-t.bottom)>.1})}function vb(e,t,r){var i=Fe(e),n=Math.sqrt(i*i-t*t)||0;return[n,-n].sort(function(s,a){return U(s-e[r?0:1])-U(a-e[r?0:1])}).map(function(s){return Wt([0,0],r?[s,t]:[t,s])})}function gb(e,t,r,i,n){if(!e.props.bounds)return[];var s=n*Math.PI/180,a=so(e),o=a.left,l=a.top,u=a.right,c=a.bottom,f=o-i[0],h=u-i[0],d=l-i[1],p=c-i[1],v={left:f,top:d,right:h,bottom:p};if(!vf(r,v,0))return[];var g=[];return[[f,0],[h,0],[d,1],[p,1]].forEach(function(m){var b=T(m,2),x=b[0],C=b[1];r.forEach(function(S){var y=Wt([0,0],S);g.push.apply(g,Q([],T(vb(S,x,C).map(function(w){return s+w-y}).filter(function(w){return!vf(t,v,w)}).map(function(w){return mt(w*180/Math.PI,me)})),!1))})}),g}var mb=["left","right","center"],yb=["top","bottom","middle"],gf={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},zr={start:"left",end:"right",center:"center"},Nr={start:"top",end:"bottom",center:"middle"};function xi(){return{left:!1,top:!1,right:!1,bottom:!1}}function Ji(e,t){var r=e.props,i=r.snappable,n=r.bounds,s=r.innerBounds,a=r.verticalGuidelines,o=r.horizontalGuidelines,l=r.snapGridWidth,u=r.snapGridHeight,c=e.state,f=c.guidelines,h=c.enableSnap;return!i||!h||t&&i!==!0&&i.indexOf(t)<0?!1:!!(l||u||n||s||f&&f.length||a&&a.length||o&&o.length)}function Ou(e){return e===!1?{}:e===!0||!e?{left:!0,right:!0,top:!0,bottom:!0}:e}function bb(e,t){var r=Ou(e),i={};for(var n in r)n in t&&r[n]&&(i[n]=t[n]);return i}function Iu(e,t){var r=bb(e,t),i=yb.filter(function(s){return s in r}),n=mb.filter(function(s){return s in r});return{horizontalNames:i,verticalNames:n,horizontal:i.map(function(s){return r[s]}),vertical:n.map(function(s){return r[s]})}}function xb(e,t,r){var i=Nt(e,[t.clientLeft,t.clientTop],r);return[t.left+i[0],t.top+i[1]]}function Sb(e){var t=T(e,2),r=t[0],i=t[1],n=i[0]-r[0],s=i[1]-r[1];Math.abs(n)<jt&&(n=0),Math.abs(s)<jt&&(s=0);var a=0,o=0,l=0;return n?s?(a=-s/n,o=1,l=a*r[0]-r[1]):(o=1,l=-r[1]):(a=-1,l=r[0]),[a,o,l].map(function(u){return mt(u,jt)})}var mp="snapRotationThreshold",yp="snapRotationDegrees",bp="snapHorizontalThreshold",xp="snapVerticalThreshold";function ao(e,t,r,i,n,s,a){var o;i===void 0&&(i=[]),n===void 0&&(n=[]);var l=e.props,u=((o=e.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],c=Rf(a,l[bp],5),f=Rf(s,l[xp],5);return Sp(e.state.guidelines,t,r,i,n,c,f,u)}function Sp(e,t,r,i,n,s,a,o){return{vertical:yf(e,"vertical",t,a*o[0],i),horizontal:yf(e,"horizontal",r,s*o[1],n)}}function Cb(e,t,r){var i=T(r,2),n=i[0],s=i[1],a=T(t,2),o=a[0],l=a[1],u=T(pt(r,t),2),c=u[0],f=u[1],h=f>0,d=c>0;c=fa(c),f=fa(f);var p={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(c===0&&f===0)return{vertical:p,horizontal:v};var g=ao(e,c?[n]:[],f?[s]:[],[],[],void 0,void 0),m=g.vertical,b=g.horizontal;m.posInfos.filter(function(W){var H=W.pos;return d?H>=o:H<=o}),b.posInfos.filter(function(W){var H=W.pos;return h?H>=l:H<=l}),m.isSnap=m.posInfos.length>0,b.isSnap=b.posInfos.length>0;var x=wl(m),C=x.isSnap,S=x.guideline,y=wl(b),w=y.isSnap,_=y.guideline,E=w?_.pos[1]:0,M=C?S.pos[0]:0;if(c===0)w&&(v.isSnap=!0,v.pos=_.pos[1],v.offset=s-v.pos);else if(f===0)C&&(p.isSnap=!0,p.pos=M,p.offset=n-M);else{var O=f/c,A=r[1]-O*n,R=0,B=0,L=!1;C?(B=M,R=O*B+A,L=!0):w&&(R=E,B=(R-A)/O,L=!0),L&&(p.isSnap=!0,p.pos=B,p.offset=n-B,v.isSnap=!0,v.pos=R,v.offset=s-R)}return{vertical:p,horizontal:v}}function Rr(e){var t="";return e===-1||e==="top"||e==="left"?t="start":e===0||e==="center"||e==="middle"?t="center":(e===1||e==="right"||e==="bottom")&&(t="end"),t}function mf(e,t,r,i){var n=Iu(e.props.snapDirections,t),s=ao(e,n.vertical,n.horizontal,n.verticalNames.map(function(l){return Rr(l)}),n.horizontalNames.map(function(l){return Rr(l)}),r,i),a=Rr(n.horizontalNames[s.horizontal.index]),o=Rr(n.verticalNames[s.vertical.index]);return{vertical:D(D({},s.vertical),{direction:o}),horizontal:D(D({},s.horizontal),{direction:a})}}function wl(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=e.posInfos[0],i=r.guidelineInfos[0],n=i.offset,s=i.dist,a=i.guideline;return{isSnap:t,offset:n,dist:s,pos:r.pos,guideline:a}}function yf(e,t,r,i,n){var s,a;if(n===void 0&&(n=[]),!e||!e.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=t==="vertical",l=o?0:1,u=r.map(function(f,h){var d=n[h]||"",p=e.map(function(v){var g=v.pos,m=f-g[l];return{offset:m,dist:U(m),guideline:v,direction:d}}).filter(function(v){var g=v.guideline,m=v.dist,b=g.type;return!(b!==t||m>i)}).sort(function(v,g){return v.dist-g.dist});return{pos:f,index:h,guidelineInfos:p,direction:d}}).filter(function(f){return f.guidelineInfos.length>0}).sort(function(f,h){return f.guidelineInfos[0].dist-h.guidelineInfos[0].dist}),c=u.length>0;return{isSnap:c,index:c?u[0].index:-1,direction:(a=(s=u[0])===null||s===void 0?void 0:s.direction)!==null&&a!==void 0?a:"",posInfos:u}}function wb(e,t,r,i,n){var s=[];r[0]&&r[1]?s=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(h,d,p){var v=p[d+1]||p[0];s.push(h),s.push([(h[0]+v[0])/2,(h[1]+v[1])/2])}):e.props.keepRatio?s.push([-1,-1],[-1,1],[1,-1],[1,1],r):(s.push.apply(s,Q([],T(Z1([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),s.length>1&&s.push([(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]));var a=s.map(function(h){return Kt(t,h)}),o=a.map(function(h){return h[0]}),l=a.map(function(h){return h[1]}),u=ao(e,o,l,s.map(function(h){return Rr(h[0])}),s.map(function(h){return Rr(h[1])}),i,n),c=Rr(s.map(function(h){return h[0]})[u.vertical.index]),f=Rr(s.map(function(h){return h[1]})[u.horizontal.index]);return{vertical:D(D({},u.vertical),{direction:c}),horizontal:D(D({},u.horizontal),{direction:f})}}function Cp(e,t){var r=U(e.offset),i=U(t.offset);return e.isBound&&t.isBound?i-r:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?i-r:e.isSnap?-1:t.isSnap||r<me?1:i<me?-1:r-i}function oa(e,t){return e.slice().sort(function(r,i){var n=r.sign[t],s=i.sign[t],a=r.offset[t],o=i.offset[t];if(n){if(!s)return-1}else return 1;return Cp({isBound:r.isBound,isSnap:r.isSnap,offset:a},{isBound:i.isBound,isSnap:i.isSnap,offset:o})})[0]}function _b(e,t,r){var i=[];if(r)U(t[0])!==1||U(t[1])!==1?i.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):i.push([t,[e[0],-e[1]]],[t,[-e[0],e[1]]]),i.push([t,e]);else if(e[0]&&e[1]||!e[0]&&!e[1]){var n=e[0]?e:[1,1];[1,-1].forEach(function(a){[1,-1].forEach(function(o){var l=[a*n[0],o*n[1]];t[0]===l[0]&&t[1]===l[1]||i.push([t,l])})})}else if(e[0]){var s=U(t[0])===1?[1]:[1,-1];s.forEach(function(a){i.push([[t[0],-1],[a*e[0],-1]],[[t[0],0],[a*e[0],0]],[[t[0],1],[a*e[0],1]])})}else if(e[1]){var s=U(t[1])===1?[1]:[1,-1];s.forEach(function(o){i.push([[-1,t[1]],[-1,o*e[1]]],[[0,t[1]],[0,o*e[1]]],[[1,t[1]],[1,o*e[1]]])})}return i}function wp(e,t){var r=ol([t[0][0],t[1][0]]),i=ol([t[0][1],t[1][1]]);return{vertical:r<=e[0],horizontal:i<=e[1]}}function Bu(e,t){var r=T(t,2),i=r[0],n=r[1],s=n[0]-i[0],a=n[1]-i[1];U(s)<me&&(s=0),U(a)<me&&(a=0);var o,l;if(!s)o=i[0],l=e[0];else if(!a)o=i[1],l=e[1];else{var u=a/s;o=u*(e[0]-i[0])+i[1],l=e[1]}return o-l}function _p(e,t,r,i){return i===void 0&&(i=me),e.every(function(n){var s=Bu(n,t),a=s<=0;return a===r||U(s)<=i})}function bf(e,t,r,i,n){return n===void 0&&(n=0),i&&t-n<=e||!i&&e<=r+n?{isBound:!0,offset:i?t-e:r-e}:{isBound:!1,offset:0}}function Eb(e,t){var r=t.line,i=t.centerSign,n=t.verticalSign,s=t.horizontalSign,a=t.lineConstants,o=e.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=o.left,u=o.top,c=o.width,f=o.height,h=[[l,u],[l,u+f]],d=[[l,u],[l+c,u]],p=[[l+c,u],[l+c,u+f]],v=[[l,u+f],[l+c,u+f]];if(_p([[l,u],[l+c,u],[l,u+f],[l+c,u+f]],r,i))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Ar(r,a,d,n),m=Ar(r,a,v,n),b=Ar(r,a,h,s),x=Ar(r,a,p,s),C=g.isBound&&m.isBound,S=g.isBound||m.isBound,y=b.isBound&&x.isBound,w=b.isBound||x.isBound,_=Gi(g.offset,m.offset),E=Gi(b.offset,x.offset),M=[0,0],O=!1,A=!1;return U(E)<U(_)?(M=[_,0],O=S,A=C):(M=[0,E],O=w,A=y),{isAllBound:A,isVerticalBound:S,isHorizontalBound:w,isBound:O,offset:M}}function Ar(e,t,r,i,n,s){var a=T(t,2),o=a[0],l=a[1],u=e[0],c=r[0],f=r[1],h=fa(f[1]-c[1]),d=fa(f[0]-c[0]),p=l,v=o,g=-o/l;if(d){if(!h){if(s&&!p)return{isBound:!1,offset:0};if(v){var C=(c[1]-u[1])/g+u[0];return bf(C,c[0],f[0],i,n)}else{var b=c[1]-u[1],x=U(b)<=(n||0);return{isBound:x,offset:x?b:0}}}}else{if(s&&!v)return{isBound:!1,offset:0};if(p){var m=g*(c[0]-u[0])+u[1];return bf(m,c[1],f[1],i,n)}else{var b=c[0]-u[0],x=U(b)<=(n||0);return{isBound:x,offset:x?b:0}}}return{isBound:!1,offset:0}}function Ep(e,t,r){return t.map(function(i){var n=Eb(e,i),s=n.isBound,a=n.offset,o=n.isVerticalBound,l=n.isHorizontalBound,u=i.multiple,c=hr({datas:r,distX:a[0],distY:a[1]}).map(function(f,h){return f*(u[h]?2/u[h]:0)});return{sign:u,isBound:s,isVerticalBound:o,isHorizontalBound:l,isSnap:!1,offset:c}})}function kb(e,t,r){var i,n=Lu(e,t,[0,0],!1).map(function(h){return D(D({},h),{multiple:h.multiple.map(function(d){return U(d)*2})})}),s=Ep(e,n,r),a=oa(s,0),o=oa(s,1),l=0,u=0,c=a.isVerticalBound||o.isVerticalBound,f=a.isHorizontalBound||o.isHorizontalBound;return(c||f)&&(i=T(K1({datas:r,distX:-a.offset[0],distY:-o.offset[1]}),2),l=i[0],u=i[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:f,offset:u}}}function Mb(e,t){var r=[],i=e[0],n=e[1];return i&&n?r.push([[0,n*2],e,[-i,n]],[[i*2,0],e,[i,-n]]):i?(r.push([[i*2,0],[i,1],[i,-1]]),t&&r.push([[0,-1],[i,-1],[-i,-1]],[[0,1],[i,1],[-i,1]])):n?(r.push([[0,n*2],[1,n],[-1,n]]),t&&r.push([[-1,0],[-1,n],[-1,-n]],[[1,0],[1,n],[1,-n]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function Lu(e,t,r,i){var n=e.state,s=n.allMatrix,a=n.is3d,o=ui(s,100,100,a?4:3),l=Kt(o,[0,0]);return Mb(r,i).map(function(u){var c=T(u,3),f=c[0],h=c[1],d=c[2],p=[Kt(o,h),Kt(o,d)],v=Sb(p),g=wp(l,p),m=g.vertical,b=g.horizontal,x=Bu(l,p)<=0;return{multiple:f,centerSign:x,verticalSign:m,horizontalSign:b,lineConstants:v,line:[Kt(t,h),Kt(t,d)]}})}function xf(e,t,r,i){var n=i?e.map(function(s){return Jn(s,i)}):e;return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].some(function(s){var a=Bu(r,s)<=0;return!_p(t,s,a)})}function Pb(e){var t=T(e,2),r=t[0],i=t[1],n=i[0]-r[0],s=i[1]-r[1];if(!n)return U(r[0]);if(!s)return U(r[1]);var a=s/n;return U((-a*r[0]+r[1])/Math.sqrt(Math.pow(a,2)+1))}function Db(e){var t=T(e,2),r=t[0],i=t[1],n=i[0]-r[0],s=i[1]-r[1];if(!n)return[r[0],0];if(!s)return[0,r[1]];var a=s/n,o=-a*r[0]+r[1];return[-o/(a+1/a),o/(a*a+1)]}function Tb(e,t,r,i,n){var s=e.props.innerBounds,a=n*Math.PI/180;if(!s)return[];var o=s.left,l=s.top,u=s.width,c=s.height,f=o-i[0],h=o+u-i[0],d=l-i[1],p=l+c-i[1],v=[[f,d],[h,d],[f,p],[h,p]],g=Kt(r,[0,0]);if(!xf(r,v,g,0))return[];var m=[],b=v.map(function(x){return[Fe(x),Wt([0,0],x)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(x){var C=Wt([0,0],Db(x)),S=Pb(x);m.push.apply(m,Q([],T(b.filter(function(y){var w=T(y,1),_=w[0];return _&&S<=_}).map(function(y){var w=T(y,2),_=w[0],E=w[1],M=Math.acos(_?S/_:0),O=E+M,A=E-M;return[a+O-C,a+A-C]}).reduce(function(y,w){return y.push.apply(y,Q([],T(w),!1)),y},[]).filter(function(y){return!xf(t,v,g,y)}).map(function(y){return mt(y*180/Math.PI,me)})),!1))}),m}function Rb(e){var t=e.props.innerBounds,r=xi();if(!t)return{boundMap:r,vertical:[],horizontal:[]};var i=e.getRect(),n=i.pos1,s=i.pos2,a=i.pos3,o=i.pos4,l=[n,s,a,o],u=Kt(l,[0,0]),c=t.left,f=t.top,h=t.width,d=t.height,p=[[c,f],[c,f+d]],v=[[c,f],[c+h,f]],g=[[c+h,f],[c+h,f+d]],m=[[c,f+d],[c+h,f+d]],b=Lu(e,l,[0,0],!1),x=[],C=[];return b.forEach(function(S){var y=S.line,w=S.lineConstants,_=wp(u,y),E=_.horizontal,M=_.vertical,O=Ar(y,w,v,M,1,!0),A=Ar(y,w,m,M,1,!0),R=Ar(y,w,p,E,1,!0),B=Ar(y,w,g,E,1,!0);O.isBound&&!r.top&&(x.push(f),r.top=!0),A.isBound&&!r.bottom&&(x.push(f+d),r.bottom=!0),R.isBound&&!r.left&&(C.push(c),r.left=!0),B.isBound&&!r.right&&(C.push(c+h),r.right=!0)}),{boundMap:r,horizontal:x,vertical:C}}function Ab(e,t,r,i){var n=t[0]-e[0],s=t[1]-e[1];if(U(n)<jt&&(n=0),U(s)<jt&&(s=0),!n)return i?[0,0]:[0,r];if(!s)return i?[r,0]:[0,0];var a=s/n,o=e[1]-a*e[0];if(i){var l=a*(t[0]+r)+o;return[r,l-t[1]]}else{var u=(t[1]+r-o)/a;return[u-t[0],r]}}function _l(e,t,r,i,n){var s=Ab(e,t,r,i);if(!s)return{isOutside:!1,offset:[0,0]};var a=yr(e,t),o=yr(s,e),l=yr(s,t),u=o>a||l>a,c=T(hr({datas:n,distX:s[0],distY:s[1]}),2),f=c[0],h=c[1];return{offset:[f,h],isOutside:u}}function la(e,t){return e.isBound?e.offset:t.isSnap?wl(t).offset:0}function Ob(e,t,r,i,n){var s=T(t,2),a=s[0],o=s[1],l=T(r,2),u=l[0],c=l[1],f=T(i,2),h=f[0],d=f[1],p=T(n,2),v=p[0],g=p[1],m=-v,b=-g;if(e&&a&&o){m=0,b=0;var x=[];if(u&&c?x.push([0,g],[v,0]):u?x.push([v,0]):c?x.push([0,g]):h&&d?x.push([0,g],[v,0]):h?x.push([v,0]):d&&x.push([0,g]),x.length){x.sort(function(w,_){return Fe(pt([a,o],w))-Fe(pt([a,o],_))});var C=x[0];if(C[0]&&U(a)>jt)m=-C[0],b=o*U(a+m)/U(a)-o;else if(C[1]&&U(o)>jt){var S=o;b=-C[1],m=a*U(o+b)/U(S)-a}if(e&&c&&u)if(U(m)>jt&&U(m)<U(v)){var y=U(v)/U(m);m*=y,b*=y}else if(U(b)>jt&&U(b)<U(g)){var y=U(g)/U(b);m*=y,b*=y}else m=Gi(-v,m),b=Gi(-g,b)}}else m=a||u?-v:0,b=o||c?-g:0;return[m,b]}function Ib(e,t,r,i,n,s){if(!Ji(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=Nu(s.absolutePoses,[t,r]),o=Le(a),l=o.left,u=o.right,c=o.top,f=o.bottom,h={horizontal:a.map(function(B){return B[1]}),vertical:a.map(function(B){return B[0]})},d=Ou(e.props.snapDirections),p=Iu(d,{left:l,right:u,top:c,bottom:f,center:(l+u)/2,middle:(c+f)/2}),v=oo(e,n,p,h),g=v.vertical,m=v.horizontal,b=kb(e,a,s),x=b.vertical,C=b.horizontal,S=g.isSnap,y=m.isSnap,w=g.isBound||x.isBound,_=m.isBound||C.isBound,E=Gi(g.offset,x.offset),M=Gi(m.offset,C.offset),O=T(Ob(i,[t,r],[w,_],[S,y],[E,M]),2),A=O[0],R=O[1];return[{isBound:w,isSnap:S,offset:A},{isBound:_,isSnap:y,offset:R}]}function oo(e,t,r,i){i===void 0&&(i=r);var n=Au(so(e),i.vertical,i.horizontal),s=n.horizontal,a=n.vertical,o=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ao(e,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),l=o.horizontal,u=o.vertical,c=la(s[0],l),f=la(a[0],u),h=U(c),d=U(f);return{horizontal:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:h,bounds:s,snap:l},vertical:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:d,bounds:a,snap:u}}}function Sf(e,t,r,i,n,s,a){a===void 0&&(a=[1,1]);var o=Au(t,r,i),l=o.horizontal,u=o.vertical,c=Sp(e,r,i,[],[],n,s,a),f=c.horizontal,h=c.vertical,d=la(l[0],f),p=la(u[0],h),v=U(d),g=U(p);return{horizontal:{isBound:l[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:d,dist:v,bounds:l,snap:f},vertical:{isBound:u[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:p,dist:g,bounds:u,snap:h}}}function Bb(e,t,r,i){var n=Wt(e,t)/Math.PI*180,s=r.vertical,a=s.isBound,o=s.isSnap,l=s.dist,u=r.horizontal,c=u.isBound,f=u.isSnap,h=u.dist,d=n%180,p=d<3||d>177,v=d>87&&d<93;return h<l&&(a||o&&!v&&(!i||!p))?"vertical":c||f&&!p&&(!i||!v)?"horizontal":""}function Lb(e,t,r,i,n,s){return r.map(function(a){var o=T(a,2),l=o[0],u=o[1],c=Kt(t,l),f=Kt(t,u),h=i?Fb(e,c,f,n):oo(e,n,{vertical:[f[0]],horizontal:[f[1]]}),d=h.horizontal,p=d.offset,v=d.isBound,g=d.isSnap,m=h.vertical,b=m.offset,x=m.isBound,C=m.isSnap,S=pt(u,l);if(!b&&!p)return{isBound:x||v,isSnap:C||g,sign:S,offset:[0,0]};var y=Bb(c,f,h,i);if(!y)return{sign:S,isBound:!1,isSnap:!1,offset:[0,0]};var w=y==="vertical",_=[0,0];return!i&&U(u[0])===1&&U(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?_=hr({datas:s,distX:-b,distY:-p}):_=_l(c,f,-(w?b:p),w,s).offset,_=_.map(function(E,M){return E*(S[M]?2/S[M]:0)}),{sign:S,isBound:w?x:v,isSnap:w?C:g,offset:_}})}function Cf(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function Fb(e,t,r,i){var n=pb(e,t,r),s=n.horizontal,a=n.vertical,o=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Cb(e,t,r),l=o.horizontal,u=o.vertical,c=Cf(s,l),f=Cf(a,u),h=U(c),d=U(f);return{horizontal:{isBound:s.isBound,isSnap:l.isSnap,offset:c,dist:h},vertical:{isBound:a.isBound,isSnap:u.isSnap,offset:f,dist:d}}}function zb(e,t,r,i,n){var s=[-r[0],-r[1]],a=e.state,o=a.width,l=a.height,u=e.props.bounds,c=1/0,f=1/0;if(u){var h=[[r[0],-r[1]],[-r[0],r[1]]],d=u.left,p=d===void 0?-1/0:d,v=u.top,g=v===void 0?-1/0:v,m=u.right,b=m===void 0?1/0:m,x=u.bottom,C=x===void 0?1/0:x;h.forEach(function(S){var y=S[0]!==s[0],w=S[1]!==s[1],_=Kt(t,S),E=Wt(i,_)*360/Math.PI;if(w){var M=_.slice();(U(E-360)<2||U(E-180)<2)&&(M[1]=i[1]);var O=_l(i,M,(i[1]<_[1]?C:g)-_[1],!1,n),A=T(O.offset,2),R=A[1],B=O.isOutside;isNaN(R)||(f=l+(B?1:-1)*U(R))}if(y){var M=_.slice();(U(E-90)<2||U(E-270)<2)&&(M[0]=i[0]);var L=_l(i,M,(i[0]<_[0]?b:p)-_[0],!0,n),W=T(L.offset,1),H=W[0],z=L.isOutside;isNaN(H)||(c=o+(z?1:-1)*U(H))}})}return{maxWidth:c,maxHeight:f}}var de={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var r=e.props,i=r.hideThrottleDragRotateLine,n=r.throttleDragRotate,s=r.zoom,a=e.getState(),o=a.dragInfo,l=a.beforeOrigin;if(i||!n||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var c=Fe(u),f=Wt(u,[0,0]);return[t.createElement("div",{className:dt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(f,"rad) scaleY(").concat(s,")")}})]},dragStart:function(e,t){var r=t.datas,i=t.parentEvent,n=t.parentGesto,s=e.state,a=s.gestos,o=s.style;if(a.draggable)return!1;a.draggable=n||e.targetGesto,r.datas={},r.left=parseFloat(o.left||"")||0,r.top=parseFloat(o.top||"")||0,r.bottom=parseFloat(o.bottom||"")||0,r.right=parseFloat(o.right||"")||0,r.startValue=[0,0],li(e,t),no(e,t,"translate"),ix(e,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=xt(e,t,D({set:function(c){r.startValue=c}},io(e,t))),u=i||ut(e,"onDragStart",l);return u!==!1?(r.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(a.draggable=null,r.isPinch=!1),r.isDrag?l:!1},drag:function(e,t){if(t){eo(e,t,"translate");var r=t.datas,i=t.parentEvent,n=t.parentFlag,s=t.isPinch,a=t.deltaOffset,o=t.useSnap,l=t.isRequest,u=t.isGroup,c=t.parentThrottleDrag,f=t.distX,h=t.distY,d=r.isDrag,p=r.prevDist,v=r.prevBeforeDist,g=r.startValue;if(d){a&&(f+=a[0],h+=a[1]);var m=e.props,b=m.parentMoveable,x=u?0:m.throttleDrag||c||0,C=i?0:m.throttleDragRotate||0,S=0,y=!1,w=!1,_=!1,E=!1;if(!i&&C>0&&(f||h)){var M=m.startDragRotate||0,O=mt(M+Wt([0,0],[f,h])*180/Math.PI,C)-M,A=h*Math.abs(Math.cos((O-90)/180*Math.PI)),R=f*Math.abs(Math.cos(O/180*Math.PI)),B=Fe([R,A]);S=O*Math.PI/180,f=B*Math.cos(S),h=B*Math.sin(S)}if(!s&&!i&&!n){var L=T(Ib(e,f,h,C,!o&&l||a,r),2),W=L[0],H=L[1];y=W.isSnap,w=W.isBound,_=H.isSnap,E=H.isBound;var z=W.offset,Y=H.offset;f+=z,h+=Y}var K=kt(ap({datas:r,distX:f,distY:h}),g),G=kt(q1({datas:r,distX:f,distY:h}),g);tf(G,me),tf(K,me),C||(!y&&!w&&(G[0]=mt(G[0],x),K[0]=mt(K[0],x)),!_&&!E&&(G[1]=mt(G[1],x),K[1]=mt(K[1],x)));var tt=pt(K,g),nt=pt(G,g),et=pt(nt,p),st=pt(tt,v);r.prevDist=nt,r.prevBeforeDist=tt,r.passDelta=et,r.passDist=nt;var Z=r.left+tt[0],lt=r.top+tt[1],ft=r.right-tt[0],yt=r.bottom-tt[1],St=ro(r,"translate(".concat(G[0],"px, ").concat(G[1],"px)"),"translate(".concat(nt[0],"px, ").concat(nt[1],"px)"));if(Tu(t,St),e.state.dragInfo.dist=i?[0,0]:nt,!(!i&&!b&&et.every(function(I){return!I})&&st.some(function(I){return!I}))){var rt=e.state,ct=rt.width,k=rt.height,P=xt(e,t,D({transform:St,dist:nt,delta:et,translate:G,beforeDist:tt,beforeDelta:st,beforeTranslate:K,left:Z,top:lt,right:ft,bottom:yt,width:ct,height:k,isPinch:s},ge({transform:St},t)));return!i&&ut(e,"onDrag",P),P}}}},dragAfter:function(e,t){var r=t.datas,i=r.deltaOffset;return i[0]||i[1]?(r.deltaOffset=[0,0],this.drag(e,D(D({},t),{deltaOffset:i}))):!1},dragEnd:function(e,t){var r=t.parentEvent,i=t.datas;if(e.state.dragInfo=null,!!i.isDrag){i.isDrag=!1;var n=Ae(e,t,{});return!r&&ut(e,"onDragEnd",n),n}},dragGroupStart:function(e,t){var r,i,n=t.datas,s=t.clientX,a=t.clientY,o=this.dragStart(e,t);if(!o)return!1;var l=Oo(e,this,"dragStart",[s||0,a||0],t,!1,"draggable"),u=l.childEvents,c=l.eventParams,f=D(D({},o),{targets:e.props.targets,events:c}),h=ut(e,"onDragGroupStart",f);n.isDrag=h!==!1;var d=(i=(r=u[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&i!==void 0?i:[0,0];return n.throttleOffset=[d[0]%1,d[1]%1],n.isDrag?o:!1},dragGroup:function(e,t){var r=t.datas;if(r.isDrag){var i=this.drag(e,D(D({},t),{parentThrottleDrag:e.props.throttleDrag})),n=t.datas.passDelta,s=Oo(e,this,"drag",n,t,!1,"draggable").eventParams;if(i){var a=D({targets:e.props.targets,events:s},i);return ut(e,"onDragGroup",a),a}}},dragGroupEnd:function(e,t){var r=t.isDrag,i=t.datas;if(i.isDrag){this.dragEnd(e,t);var n=Oo(e,this,"dragEnd",[0,0],t,!1,"draggable").eventParams;return ut(e,"onDragGroupEnd",Ae(e,t,{targets:e.props.targets,events:n})),r}},request:function(e){var t={},r=e.getRect(),i=0,n=0,s=!1;return{isControl:!1,requestStart:function(a){return s=a.useSnap,{datas:t,useSnap:s}},request:function(a){return"x"in a?i=a.x-r.left:"deltaX"in a&&(i+=a.deltaX),"y"in a?n=a.y-r.top:"deltaY"in a&&(n+=a.deltaY),{datas:t,distX:i,distY:n,useSnap:s}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:s}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}};function kp(e,t){var r=Kt(e,t),i=[0,0];return{fixedPosition:r,fixedDirection:t,fixedOffset:i}}function Nb(e,t){var r=e.allMatrix,i=e.is3d,n=e.width,s=e.height,a=i?4:3,o=[n/2*(1+t[0]),s/2*(1+t[1])],l=Nt(r,o,a),u=[0,0];return{fixedPosition:l,fixedDirection:t,fixedOffset:u}}function Mp(e,t){var r=e.allMatrix,i=e.is3d,n=e.width,s=e.height,a=i?4:3,o=ib(t,n,s),l=Nt(r,t,a),u=[n?0:t[0],s?0:t[1]];return{fixedPosition:l,fixedDirection:o,fixedOffset:u}}var wf=Hu("resizable"),El={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:pp("resizable"),dragControlCondition:wf,viewClassName:Wu("resizable"),dragControlStart:function(e,t){var r,i=t.inputEvent,n=t.isPinch,s=t.isGroup,a=t.parentDirection,o=t.parentGesto,l=t.datas,u=t.parentFixedDirection,c=t.parentEvent,f=Gp(a,n,i,l),h=e.state,d=h.target,p=h.width,v=h.height,g=h.gestos;if(!f||!d||g.resizable)return!1;g.resizable=o||e.controlGesto,!n&&li(e,t),l.datas={},l.direction=f,l.startOffsetWidth=p,l.startOffsetHeight=v,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=h.inlineCSSWidth||h.cssWidth,l.startHeight=h.inlineCSSHeight||h.cssHeight,l.maxSize=[1/0,1/0],s||(l.minSize=[h.minOffsetWidth,h.minOffsetHeight],l.maxSize=[h.maxOffsetWidth,h.maxOffsetHeight]);var m=e.props.transformOrigin||"% %";l.transformOrigin=m&&Ee(m)?m.split(" "):m,l.startOffsetMatrix=h.offsetMatrix,l.startTransformOrigin=h.transformOrigin,l.isWidth=(r=t==null?void 0:t.parentIsWidth)!==null&&r!==void 0?r:!f[0]&&!f[1]||f[0]||!f[1];function b(E){l.ratio=E&&isFinite(E)?E:0}l.startPositions=ze(e.state);function x(E){var M=kp(l.startPositions,E);l.fixedDirection=M.fixedDirection,l.fixedPosition=M.fixedPosition,l.fixedOffset=M.fixedOffset}function C(E){var M=Mp(e.state,E);l.fixedDirection=M.fixedDirection,l.fixedPosition=M.fixedPosition,l.fixedOffset=M.fixedOffset}function S(E){l.minSize=[Tt("".concat(E[0]),0)||0,Tt("".concat(E[1]),0)||0]}function y(E){var M=[E[0]||1/0,E[1]||1/0];(!Li(M[0])||isFinite(M[0]))&&(M[0]=Tt("".concat(M[0]),0)||1/0),(!Li(M[1])||isFinite(M[1]))&&(M[1]=Tt("".concat(M[1]),0)||1/0),l.maxSize=M}b(p/v),x(u||[-f[0],-f[1]]),l.setFixedDirection=x,l.setFixedPosition=C,l.setMin=S,l.setMax=y;var w=xt(e,t,{direction:f,startRatio:l.ratio,set:function(E){var M=T(E,2),O=M[0],A=M[1];l.startWidth=O,l.startHeight=A},setMin:S,setMax:y,setRatio:b,setFixedDirection:x,setFixedPosition:C,setOrigin:function(E){l.transformOrigin=E},dragStart:de.dragStart(e,new zi().dragStart([0,0],t))}),_=c||ut(e,"onResizeStart",w);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,_!==!1&&(l.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:f}),l.isResize?w:!1},dragControl:function(e,t){var r,i=t.datas,n=t.parentFlag,s=t.isPinch,a=t.parentKeepRatio,o=t.dragClient,l=t.parentDist,u=t.useSnap,c=t.isRequest,f=t.isGroup,h=t.parentEvent,d=t.resolveMatrix,p=i.isResize,v=i.transformOrigin,g=i.startWidth,m=i.startHeight,b=i.prevWidth,x=i.prevHeight,C=i.minSize,S=i.maxSize,y=i.ratio,w=i.startOffsetWidth,_=i.startOffsetHeight,E=i.isWidth;if(!p)return;if(d){var M=e.state.is3d,O=i.startOffsetMatrix,A=i.startTransformOrigin,R=M?4:3,B=Ln(sa(t)),L=Math.sqrt(B.length);R!==L&&(B=Qe(B,L,R));var W=rs(O,B,A,R),H=ui(W,w,_,R);i.startPositions=H,i.nextTargetMatrix=B,i.nextAllMatrix=W}var z=ni(e.props,"resizable"),Y=z.resizeFormat,K=z.throttleResize,G=K===void 0?n?0:1:K,tt=z.parentMoveable,nt=z.keepRatioFinally,et=i.direction,st=et,Z=0,lt=0;!et[0]&&!et[1]&&(st=[1,1]);var ft=y&&(a??z.keepRatio)||!1;function yt(){var ot=i.fixedDirection,at=Up(st,ft,i,t);Z=at.distWidth,lt=at.distHeight;var vt=st[0]-ot[0]||ft?Math.max(w+Z,me):w,gt=st[1]-ot[1]||ft?Math.max(_+lt,me):_;return ft&&w&&_&&(E?gt=vt/y:vt=gt*y),[vt,gt]}var St=T(yt(),2),rt=St[0],ct=St[1];h||(i.setFixedDirection(i.fixedDirection),ut(e,"onBeforeResize",xt(e,t,{startFixedDirection:i.startFixedDirection,startFixedPosition:i.startFixedPosition,setFixedDirection:function(ot){var at;return i.setFixedDirection(ot),at=T(yt(),2),rt=at[0],ct=at[1],[rt,ct]},setFixedPosition:function(ot){var at;return i.setFixedPosition(ot),at=T(yt(),2),rt=at[0],ct=at[1],[rt,ct]},boundingWidth:rt,boundingHeight:ct,setSize:function(ot){var at;at=T(ot,2),rt=at[0],ct=at[1]}},!0)));var k=o;o||(!n&&s?k=ob(e,[0,0]):k=i.fixedPosition);var P=[0,0];s||(P=ex(e,rt,ct,et,k,!u&&c,i)),l&&(!l[0]&&(P[0]=0),!l[1]&&(P[1]=0));function I(){var ot;Y&&(ot=T(Y([rt,ct]),2),rt=ot[0],ct=ot[1]),rt=mt(rt,G),ct=mt(ct,G)}if(ft){st[0]&&st[1]&&P[0]&&P[1]&&(U(P[0])>U(P[1])?P[1]=0:P[0]=0);var F=!P[0]&&!P[1];F&&I(),st[0]&&!st[1]||P[0]&&!P[1]||F&&E?(rt+=P[0],ct=rt/y):(!st[0]&&st[1]||!P[0]&&P[1]||F&&!E)&&(ct+=P[1],rt=ct*y)}else rt+=P[0],ct+=P[1],rt=Math.max(0,rt),ct=Math.max(0,ct);r=T(bd([rt,ct],C,S,ft?y:!1),2),rt=r[0],ct=r[1],I(),ft&&(f||nt)&&(E?ct=rt/y:rt=ct*y),Z=rt-w,lt=ct-_;var N=[Z-b,lt-x];i.prevWidth=Z,i.prevHeight=lt;var $=ab(e,rt,ct,k,v,i);if(!(!tt&&N.every(function(ot){return!ot})&&$.every(function(ot){return!ot}))){var j=de.drag(e,es(t,e.state,$,!!s,!1,"draggable")),V=j.transform,q=g+Z,X=m+lt,it=xt(e,t,D({width:q,height:X,offsetWidth:Math.round(rt),offsetHeight:Math.round(ct),startRatio:y,boundingWidth:rt,boundingHeight:ct,direction:et,dist:[Z,lt],delta:N,isPinch:!!s,drag:j},Hp({style:{width:"".concat(q,"px"),height:"".concat(X,"px")},transform:V},j,t)));return!h&&ut(e,"onResize",it),it}},dragControlAfter:function(e,t){var r=t.datas,i=r.isResize,n=r.startOffsetWidth,s=r.startOffsetHeight,a=r.prevWidth,o=r.prevHeight;if(!(!i||e.props.checkResizableError===!1)){var l=e.state,u=l.width,c=l.height,f=u-(n+a),h=c-(s+o),d=U(f)>3,p=U(h)>3;if(d&&(r.startWidth+=f,r.startOffsetWidth+=f,r.prevWidth+=f),p&&(r.startHeight+=h,r.startOffsetHeight+=h,r.prevHeight+=h),d||p)return this.dragControl(e,t)}},dragControlEnd:function(e,t){var r=t.datas,i=t.parentEvent;if(r.isResize){r.isResize=!1;var n=Ae(e,t,{});return!i&&ut(e,"onResizeEnd",n),n}},dragGroupControlCondition:wf,dragGroupControlStart:function(e,t){var r=t.datas,i=this.dragControlStart(e,D(D({},t),{isGroup:!0}));if(!i)return!1;var n=Je(e,"resizable",t),s=r.startOffsetWidth,a=r.startOffsetHeight;function o(){var d=r.minSize;n.forEach(function(p){var v=p.datas,g=v.minSize,m=v.startOffsetWidth,b=v.startOffsetHeight,x=s*(m?g[0]/m:0),C=a*(b?g[1]/b:0);d[0]=Math.max(d[0],x),d[1]=Math.max(d[1],C)})}function l(){var d=r.maxSize;n.forEach(function(p){var v=p.datas,g=v.maxSize,m=v.startOffsetWidth,b=v.startOffsetHeight,x=s*(m?g[0]/m:0),C=a*(b?g[1]/b:0);d[0]=Math.min(d[0],x),d[1]=Math.min(d[1],C)})}var u=br(e,this,"dragControlStart",t,function(d,p){return aa(e,d,r,p)});o(),l();var c=function(d){i.setFixedDirection(d),u.forEach(function(p,v){p.setFixedDirection(d),aa(e,p.moveable,r,n[v])})};r.setFixedDirection=c;var f=D(D({},i),{targets:e.props.targets,events:u.map(function(d){return D(D({},d),{setMin:function(p){d.setMin(p),o()},setMax:function(p){d.setMax(p),l()}})}),setFixedDirection:c,setMin:function(d){i.setMin(d),o()},setMax:function(d){i.setMax(d),l()}}),h=ut(e,"onResizeGroupStart",f);return r.isResize=h!==!1,r.isResize?i:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isResize){var i=ni(e.props,"resizable");uo(e,"onBeforeResize",function(d){ut(e,"onBeforeResizeGroup",xt(e,t,D(D({},d),{targets:i.targets}),!0))});var n=this.dragControl(e,D(D({},t),{isGroup:!0}));if(n){var s=n.boundingWidth,a=n.boundingHeight,o=n.dist,l=i.keepRatio,u=[s/(s-o[0]),a/(a-o[1])],c=r.fixedPosition,f=br(e,this,"dragControl",t,function(d,p){var v=T(ue(Zn(e.rotation/180*Math.PI,3),[p.datas.originalX*u[0],p.datas.originalY*u[1],1],3),2),g=v[0],m=v[1];return D(D({},p),{parentDist:null,parentScale:u,dragClient:kt(c,[g,m]),parentKeepRatio:l})}),h=D({targets:i.targets,events:f},n);return ut(e,"onResizeGroup",h),h}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,i=t.datas;if(i.isResize){this.dragControlEnd(e,t);var n=br(e,this,"dragControlEnd",t),s=Ae(e,t,{targets:e.props.targets,events:n});return ut(e,"onResizeGroupEnd",s),r}},request:function(e){var t={},r=0,i=0,n=!1,s=e.getRect();return{isControl:!0,requestStart:function(a){var o;return n=a.useSnap,{datas:t,parentDirection:a.direction||[1,1],parentIsWidth:(o=a==null?void 0:a.horizontal)!==null&&o!==void 0?o:!0,useSnap:n}},request:function(a){return"offsetWidth"in a?r=a.offsetWidth-s.offsetWidth:"deltaWidth"in a&&(r+=a.deltaWidth),"offsetHeight"in a?i=a.offsetHeight-s.offsetHeight:"deltaHeight"in a&&(i+=a.deltaHeight),{datas:t,parentDist:[r,i],parentKeepRatio:a.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}},unset:function(e){e.state.gestos.resizable=null}};function Io(e,t,r,i,n){var s=e.props.groupable,a=e.state,o=a.is3d?4:3,l=t.origin,u=Nt(e.state.rootMatrix,pt([l[0],l[1]],s?[0,0]:[a.left,a.top]),o),c=kt([n.left,n.top],u);t.startAbsoluteOrigin=c,t.prevDeg=Wt(c,[r,i])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=yr(c,[r,i])}function Bs(e,t,r){var i=r.defaultDeg,n=r.prevDeg,s=n%360,a=Math.floor(n/360);s<0&&(s+=360),s>e&&s>270&&e<90?++a:s<e&&s<90&&e>270&&--a;var o=t*(a*360+e-i);return r.prevDeg=i+o,o}function Bo(e,t,r,i){return Bs(Wt(i.startAbsoluteOrigin,[e,t])/Math.PI*180,r,i)}function Lo(e,t,r,i,n,s){var a=e.props.throttleRotate,o=a===void 0?0:a,l=r.prevSnapDeg,u=0,c=!1;if(s){var f=tx(e,t,i,n+i);c=f.isSnap,u=n+f.dist}c||(u=mt(n+i,o));var h=u-n;return r.prevSnapDeg=h,[h-l,h,u]}function Pp(e,t,r){var i=T(t,4),n=i[0],s=i[1],a=i[2],o=i[3];if(e==="none")return[];if($t(e))return e.map(function(g){return Pp(g,[n,s,a,o],r)[0]});var l=T((e||"top").split("-"),2),u=l[0],c=l[1],f=[n,s];u==="left"?f=[a,n]:u==="right"?f=[s,o]:u==="bottom"&&(f=[o,a]);var h=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],d=zp(f,r);if(c){var p=c==="top"||c==="left",v=u==="bottom"||u==="left";h=f[p&&!v||!p&&v?0:1]}return[[h,d]]}function kl(e,t){if(t.isRequest)return t.requestAble==="rotatable";var r=t.inputEvent.target;if(qt(r,dt("rotation-control"))||e.props.rotateAroundControls&&qt(r,dt("around-control"))||qt(r,dt("control"))&&qt(r,dt("rotatable")))return!0;var i=e.props.rotationTarget;return i?Vu(i,!0).some(function(n){return n?r===n||r.contains(n):!1}):!1}var Gb=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Wb={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Gb],viewClassName:function(e){return e.isDragging("rotatable")?dt("view-rotation-dragging"):""},render:function(e,t){var r=ni(e.props,"rotatable"),i=r.rotatable,n=r.rotationPosition,s=r.zoom,a=r.renderDirections,o=r.rotateAroundControls,l=r.resolveAblesWithRotatable,u=e.getState(),c=u.renderPoses,f=u.direction;if(!i)return null;var h=Pp(n,c,f),d=[];if(h.forEach(function(m,b){var x=T(m,2),C=x[0],S=x[1];d.push(t.createElement("div",{key:"rotation".concat(b),className:dt("rotation"),style:{transform:"translate(-50%) translate(".concat(C[0],"px, ").concat(C[1],"px) rotate(").concat(S,"rad)")}},t.createElement("div",{className:dt("line rotation-line"),style:{transform:"scaleX(".concat(s,")")}}),t.createElement("div",{className:dt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(s,")")}})))}),a){var p=Sr(l||{}),v={};p.forEach(function(m){l[m].forEach(function(b){v[b]=m})});var g=[];$t(a)&&(g=a.map(function(m){var b=v[m];return{data:b?{resolve:b}:{},classNames:b?["move"]:[],dir:m}})),d.push.apply(d,Q([],T(fp(e,"rotatable",g,t)),!1))}return o&&d.push.apply(d,Q([],T(gp(e,t)),!1)),d},dragControlCondition:kl,dragControlStart:function(e,t){var r,i,n=t.datas,s=t.clientX,a=t.clientY,o=t.parentRotate,l=t.parentFlag,u=t.isPinch,c=t.isRequest,f=e.state,h=f.target,d=f.left,p=f.top,v=f.direction,g=f.beforeDirection,m=f.targetTransform,b=f.moveableClientRect,x=f.offsetMatrix,C=f.targetMatrix,S=f.allMatrix,y=f.width,w=f.height;if(!c&&!h)return!1;var _=e.getRect();n.rect=_,n.transform=m,n.left=d,n.top=p;var E=function(st){var Z=Mp(e.state,st);n.fixedDirection=Z.fixedDirection,n.fixedOffset=Z.fixedOffset,n.fixedPosition=Z.fixedPosition,G&&G.setFixedPosition(st)},M=function(st){var Z=Nb(e.state,st);n.fixedDirection=Z.fixedDirection,n.fixedOffset=Z.fixedOffset,n.fixedPosition=Z.fixedPosition,G&&G.setFixedDirection(st)},O=s,A=a;if(c||u||l){var R=o||0;n.beforeInfo={origin:_.beforeOrigin,prevDeg:R,defaultDeg:R,prevSnapDeg:0,startDist:0},n.afterInfo=D(D({},n.beforeInfo),{origin:_.origin}),n.absoluteInfo=D(D({},n.beforeInfo),{origin:_.origin,startValue:R})}else{var B=(i=t.inputEvent)===null||i===void 0?void 0:i.target;if(B){var L=B.getAttribute("data-direction")||"",W=U1[L];if(W){n.isControl=!0,n.isAroundControl=qt(B,dt("around-control")),n.controlDirection=W;var H=B.getAttribute("data-resolve");H&&(n.resolveAble=H);var z=gx(f.rootMatrix,f.renderPoses,b);r=T(Kt(z,W),2),O=r[0],A=r[1]}}n.beforeInfo={origin:_.beforeOrigin},n.afterInfo={origin:_.origin},n.absoluteInfo={origin:_.origin,startValue:_.rotation};var Y=E;E=function(st){var Z=f.is3d?4:3,lt=T(kt(jd(C,Z),st),2),ft=lt[0],yt=lt[1],St=ue(x,ei([ft,yt],Z)),rt=ue(S,ei([st[0],st[1]],Z));Y(st);var ct=f.posDelta;n.beforeInfo.origin=pt(St,ct),n.afterInfo.origin=pt(rt,ct),n.absoluteInfo.origin=pt(rt,ct),Io(e,n.beforeInfo,O,A,b),Io(e,n.afterInfo,O,A,b),Io(e,n.absoluteInfo,O,A,b)},M=function(st){var Z=Kt([[0,0],[y,0],[0,w],[y,w]],st);E(Z)}}n.startClientX=O,n.startClientY=A,n.direction=v,n.beforeDirection=g,n.startValue=0,n.datas={},no(e,t,"rotate");var K=!1,G=!1;if(n.isControl&&n.resolveAble){var tt=n.resolveAble;tt==="resizable"&&(G=El.dragControlStart(e,D(D({},new zi("resizable").dragStart([0,0],t)),{parentPosition:n.controlPosition,parentFixedPosition:n.fixedPosition})))}G||(K=de.dragStart(e,new zi().dragStart([0,0],t))),E(mx(e));var nt=xt(e,t,D(D({set:function(st){n.startValue=st*Math.PI/180},setFixedDirection:M,setFixedPosition:E},io(e,t)),{dragStart:K,resizeStart:G})),et=ut(e,"onRotateStart",nt);return n.isRotate=et!==!1,f.snapRenderInfo={request:t.isRequest},n.isRotate?nt:!1},dragControl:function(e,t){var r,i,n,s=t.datas,a=t.clientDistX,o=t.clientDistY,l=t.parentRotate,u=t.parentFlag,c=t.isPinch,f=t.groupDelta,h=t.resolveMatrix,d=s.beforeDirection,p=s.beforeInfo,v=s.afterInfo,g=s.absoluteInfo,m=s.isRotate,b=s.startValue,x=s.rect,C=s.startClientX,S=s.startClientY;if(m){eo(e,t,"rotate");var y=Y1(t),w=d*y,_=e.props.parentMoveable,E=0,M,O,A=0,R,B,L=0,W,H,z=180/Math.PI*b,Y=g.startValue,K=!1,G=C+a,tt=S+o;if(!u&&"parentDist"in t){var nt=t.parentDist;M=nt,R=nt,W=nt}else c||u?(M=Bs(l,d,p),R=Bs(l,w,v),W=Bs(l,w,g)):(M=Bo(G,tt,d,p),R=Bo(G,tt,w,v),W=Bo(G,tt,w,g),K=!0);if(O=z+M,B=z+R,H=Y+W,ut(e,"onBeforeRotate",xt(e,t,{beforeRotation:O,rotation:B,absoluteRotation:H,setRotation:function(k){R=k-z,M=R,W=R}},!0)),r=T(Lo(e,x,p,M,z,K),3),E=r[0],M=r[1],O=r[2],i=T(Lo(e,x,v,R,z,K),3),A=i[0],R=i[1],B=i[2],n=T(Lo(e,x,g,W,Y,K),3),L=n[0],W=n[1],H=n[2],!(!L&&!A&&!E&&!_&&!h)){var et=ro(s,"rotate(".concat(B,"deg)"),"rotate(".concat(R,"deg)"));h&&(s.fixedPosition=Ru(e,s.targetAllTransform,s.fixedDirection,s.fixedOffset,s));var st=sb(e,R,s),Z=pt(kt(f||[0,0],st),s.prevInverseDist||[0,0]);s.prevInverseDist=st,s.requestValue=null;var lt=lp(e,et,Z,c,t),ft=lt,yt=yr([G,tt],g.startAbsoluteOrigin)-g.startDist,St=void 0;if(s.resolveAble==="resizable"){var rt=El.dragControl(e,D(D({},es(t,e.state,[t.deltaX,t.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:yt}));rt&&(St=rt,ft=Hp(ft,rt,t))}var ct=xt(e,t,D(D({delta:A,dist:R,rotate:B,rotation:B,beforeDist:M,beforeDelta:E,beforeRotate:O,beforeRotation:O,absoluteDist:W,absoluteDelta:L,absoluteRotate:H,absoluteRotation:H,isPinch:!!c,resize:St},lt),ft));return ut(e,"onRotate",ct),ct}}},dragControlEnd:function(e,t){var r=t.datas;if(r.isRotate){r.isRotate=!1;var i=Ae(e,t,{});return ut(e,"onRotateEnd",i),i}},dragGroupControlCondition:kl,dragGroupControlStart:function(e,t){var r=t.datas,i=e.state,n=i.left,s=i.top,a=i.beforeOrigin,o=this.dragControlStart(e,t);if(!o)return!1;o.set(r.beforeDirection*e.rotation);var l=br(e,this,"dragControlStart",t,function(f,h){var d=f.state,p=d.left,v=d.top,g=d.beforeOrigin,m=kt(pt([p,v],[n,s]),pt(g,a));return h.datas.startGroupClient=m,h.datas.groupClient=m,D(D({},h),{parentRotate:0})}),u=D(D({},o),{targets:e.props.targets,events:l}),c=ut(e,"onRotateGroupStart",u);return r.isRotate=c!==!1,r.isRotate?o:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isRotate){uo(e,"onBeforeRotate",function(u){ut(e,"onBeforeRotateGroup",xt(e,t,D(D({},u),{targets:e.props.targets}),!0))});var i=this.dragControl(e,t);if(i){var n=r.beforeDirection,s=i.beforeDist,a=s/180*Math.PI,o=br(e,this,"dragControl",t,function(u,c){var f=c.datas.startGroupClient,h=T(c.datas.groupClient,2),d=h[0],p=h[1],v=T(Jn(f,a*n),2),g=v[0],m=v[1],b=[g-d,m-p];return c.datas.groupClient=[g,m],D(D({},c),{parentRotate:s,groupDelta:b})});e.rotation=n*i.beforeRotation;var l=D({targets:e.props.targets,events:o,set:function(u){e.rotation=u},setGroupRotation:function(u){e.rotation=u}},i);return ut(e,"onRotateGroup",l),l}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,i=t.datas;if(i.isRotate){this.dragControlEnd(e,t);var n=br(e,this,"dragControlEnd",t),s=Ae(e,t,{targets:e.props.targets,events:n});return ut(e,"onRotateGroupEnd",s),r}},request:function(e){var t={},r=0,i=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(n){return"deltaRotate"in n?r+=n.deltaRotate:"rotate"in n&&(r=n.rotate-i),{datas:t,parentDist:r}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Hb(e,t){var r,i=e.direction,n=e.classNames,s=e.size,a=e.pos,o=e.zoom,l=e.key,u=i==="horizontal",c=u?"Y":"X";return t.createElement("div",{key:l,className:n.join(" "),style:(r={},r[u?"width":"height"]="".concat(s),r.transform="translate(".concat(a[0],", ").concat(a[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(o,")"),r)})}function Fu(e,t){return Hb(D(D({},e),{classNames:Q([dt("line","guideline",e.direction)],T(e.classNames),!1).filter(function(r){return r}),size:e.size||"".concat(e.sizeValue,"px"),pos:e.pos||e.posValue.map(function(r){return"".concat(mt(r,.1),"px")})}),t)}function _f(e,t,r,i,n,s,a,o){var l=e.props.zoom;return r.map(function(u,c){var f=u.type,h=u.pos,d=[0,0];return d[a]=i,d[a?0:1]=-n+h,Fu({key:"".concat(t,"TargetGuideline").concat(c),classNames:[dt("target","bold",f)],posValue:d,sizeValue:s,zoom:l,direction:t},o)})}function Ef(e,t,r,i,n,s){var a=e.props,o=a.zoom,l=a.isDisplayInnerSnapDigit,u=t==="horizontal"?zr:Nr,c=n[u.start],f=n[u.end];return r.filter(function(h){var d=h.hide,p=h.elementRect;if(d)return!1;if(l&&p){var v=p.rect;if(v[u.start]<=c&&f<=v[u.end])return!1}return!0}).map(function(h,d){var p=h.pos,v=h.size,g=h.element,m=h.className,b=[-i[0]+p[0],-i[1]+p[1]];return Fu({key:"".concat(t,"-default-guideline-").concat(d),classNames:g?[dt("bold"),m]:[dt("normal"),m],direction:t,posValue:b,sizeValue:v,zoom:o},s)})}function sn(e,t,r,i,n,s,a,o){var l,u=e.props,c=u.snapDigit,f=c===void 0?0:c,h=u.isDisplaySnapDigit,d=h===void 0?!0:h,p=u.snapDistFormat,v=p===void 0?function(S,y){return S}:p,g=u.zoom,m=t==="horizontal"?"X":"Y",b=t==="vertical"?"height":"width",x=Math.abs(n),C=d?parseFloat(x.toFixed(f)):0;return o.createElement("div",{key:"".concat(t,"-").concat(r,"-guideline-").concat(i),className:dt("guideline-group",t),style:(l={left:"".concat(s[0],"px"),top:"".concat(s[1],"px")},l[b]="".concat(x,"px"),l)},Fu({direction:t,classNames:[dt(r),a],size:"100%",posValue:[0,0],sizeValue:x,zoom:g},o),o.createElement("div",{className:dt("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},C>0?v(C,t):""))}function Vb(e,t,r,i){var n=e==="vertical"?0:1,s=e==="vertical"?1:0,a=n?zr:Nr,o=r[a.start],l=r[a.end];return Vp(t,function(u){return u.pos[n]}).map(function(u){var c=[],f=[],h=[];return u.forEach(function(d){var p,v,g=d.element,m=d.elementRect.rect;if(m[a.end]<o)c.push(d);else if(l<m[a.start])f.push(d);else if(m[a.start]<=o&&l<=m[a.end]&&i){var b=d.pos,x={element:g,rect:D(D({},m),(p={},p[a.end]=m[a.start],p))},C={element:g,rect:D(D({},m),(v={},v[a.start]=m[a.end],v))},S=[0,0],y=[0,0];S[n]=b[n],S[s]=b[s],y[n]=b[n],y[s]=b[s]+d.size,c.push({type:e,pos:S,size:0,elementRect:x,direction:"",elementDirection:"end"}),f.push({type:e,pos:y,size:0,elementRect:C,direction:"",elementDirection:"start"})}}),c.sort(function(d,p){return p.pos[s]-d.pos[s]}),f.sort(function(d,p){return d.pos[s]-p.pos[s]}),{total:u,start:c,end:f,inner:h}})}function jb(e,t,r,i,n){var s=e.props.isDisplayInnerSnapDigit,a=[];return["vertical","horizontal"].forEach(function(o){var l=t.filter(function(g){return g.type===o}),u=o==="vertical"?1:0,c=u?0:1,f=Vb(o,l,i,s),h=u?Nr:zr,d=u?zr:Nr,p=i[h.start],v=i[h.end];f.forEach(function(g){var m=g.total,b=g.start,x=g.end,C=g.inner,S=r[c]+m[0].pos[c]-i[d.start],y=i;b.forEach(function(w){var _=w.elementRect.rect,E=y[h.start]-_[h.end];if(E>0){var M=[0,0];M[u]=r[u]+y[h.start]-p-E,M[c]=S,a.push(sn(e,o,"dashed",a.length,E,M,w.className,n))}y=_}),y=i,x.forEach(function(w){var _=w.elementRect.rect,E=_[h.start]-y[h.end];if(E>0){var M=[0,0];M[u]=r[u]+y[h.end]-p,M[c]=S,a.push(sn(e,o,"dashed",a.length,E,M,w.className,n))}y=_}),C.forEach(function(w){var _=w.elementRect.rect,E=p-_[h.start],M=_[h.end]-v,O=[0,0],A=[0,0];O[u]=r[u]-E,O[c]=S,A[u]=r[u]+v-p,A[c]=S,a.push(sn(e,o,"dashed",a.length,E,O,w.className,n)),a.push(sn(e,o,"dashed",a.length,M,A,w.className,n))})})}),a}function $b(e,t,r,i,n){var s=[];return["horizontal","vertical"].forEach(function(a){var o=t.filter(function(g){return g.type===a}).slice(0,1),l=a==="vertical"?0:1,u=l?0:1,c=l?Nr:zr,f=l?zr:Nr,h=i[c.start],d=i[c.end],p=i[f.start],v=i[f.end];o.forEach(function(g){var m=g.gap,b=g.gapRects,x=Math.max.apply(Math,Q([p],T(b.map(function(y){var w=y.rect;return w[f.start]})),!1)),C=Math.min.apply(Math,Q([v],T(b.map(function(y){var w=y.rect;return w[f.end]})),!1)),S=(x+C)/2;x===C||S===(p+v)/2||b.forEach(function(y){var w=y.rect,_=y.className,E=[r[0],r[1]];if(w[c.end]<h)E[l]+=w[c.end]-h;else if(d<w[c.start])E[l]+=w[c.start]-h-m;else return;E[u]+=S-p,s.push(sn(e,l?"vertical":"horizontal","gap",s.length,m,E,_,n))})})}),s}function Ml(e){var t,r,i=e.state,n=i.containerClientRect,s=i.hasFixed,a=n.overflow,o=n.scrollHeight,l=n.scrollWidth,u=n.clientHeight,c=n.clientWidth,f=n.clientLeft,h=n.clientTop,d=e.props,p=d.snapGap,v=p===void 0?!0:p,g=d.verticalGuidelines,m=d.horizontalGuidelines,b=d.snapThreshold,x=b===void 0?5:b,C=d.maxSnapElementGuidelineDistance,S=C===void 0?1/0:C,y=d.isDisplayGridGuidelines,w=Le(ze(e.state)),_=w.top,E=w.left,M=w.bottom,O=w.right,A={top:_,left:E,bottom:M,right:O,center:(E+O)/2,middle:(_+M)/2},R=qb(e),B=Q([],T(R),!1),L=((r=(t=i.snapThresholdInfo)===null||t===void 0?void 0:t.multiples)!==null&&r!==void 0?r:[1,1]).map(function(Y){return Y*x});v&&B.push.apply(B,Q([],T(Xb(e,A,L)),!1));var W=D({},i.snapOffset||{left:0,top:0,bottom:0,right:0});if(B.push.apply(B,Q([],T(Yb(e,a?l:c,a?o:u,f,h,W,y)),!1)),s){var H=n.left,z=n.top;W.left+=H,W.top+=z,W.right+=H,W.bottom+=z}return B.push.apply(B,Q([],T(Tp(m||!1,g||!1,a?l:c,a?o:u,f,h,W)),!1)),B=B.filter(function(Y){var K=Y.element,G=Y.elementRect,tt=Y.type;if(!K||!G)return!0;var nt=G.rect;return Dp(A,nt,tt,S)}),B}function Xb(e,t,r){var i=e.props,n=i.maxSnapElementGuidelineDistance,s=n===void 0?1/0:n,a=i.maxSnapElementGapDistance,o=a===void 0?1/0:a,l=e.state.elementRects,u=[];return[["vertical",zr,Nr],["horizontal",Nr,zr]].forEach(function(c){var f=T(c,3),h=f[0],d=f[1],p=f[2],v=t[d.start],g=t[d.end],m=t[d.center],b=t[p.start],x=t[p.end],C={left:r[0],top:r[1]};function S(_){var E=_.rect,M=C[d.start];return E[d.end]<v+M?v-E[d.end]:g-M<E[d.start]?E[d.start]-g:-1}var y=l.filter(function(_){var E=_.rect;return E[p.start]>x||E[p.end]<b?!1:S(_)>0}).sort(function(_,E){return S(_)-S(E)}),w=[];y.forEach(function(_){y.forEach(function(E){if(_!==E){var M=_.rect,O=E.rect,A=M[p.start],R=M[p.end],B=O[p.start],L=O[p.end];A>L||B>R||w.push([_,E])}})}),w.forEach(function(_){var E=T(_,2),M=E[0],O=E[1],A=M.rect,R=O.rect,B=A[d.start],L=A[d.end],W=R[d.start],H=R[d.end],z=C[d.start],Y=0,K=0,G=!1,tt=!1,nt=!1;if(L<=v&&g<=W){if(tt=!0,Y=(W-L-(g-v))/2,K=L+Y+(g-v)/2,U(K-m)>z)return}else if(L<W&&H<v+z){if(G=!0,Y=W-L,K=H+Y,U(K-v)>z)return}else if(L<W&&g-z<B){if(nt=!0,Y=W-L,K=B-Y,U(K-g)>z)return}else return;Y&&Dp(t,R,h,s)&&(Y>o||u.push({type:h,pos:h==="vertical"?[K,0]:[0,K],element:O.element,size:0,className:O.className,isStart:G,isCenter:tt,isEnd:nt,gap:Y,hide:!0,gapRects:[M,O],direction:"",elementDirection:""}))})}),u}function Ub(e,t,r,i){var n,s,a=e.props,o=e.state,l=a.snapGridAll,u=a.snapGridWidth,c=u===void 0?0:u,f=a.snapGridHeight,h=f===void 0?0:f,d=o.snapRenderInfo,p=d&&(((n=d.direction)===null||n===void 0?void 0:n[0])||((s=d.direction)===null||s===void 0?void 0:s[1])),v=e.moveables;if(l&&v&&p&&(c||h)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=e.getRect(),m=g.children,b=d.direction;if(m){var x=b.map(function(S,y){var w=y===0?{snapSize:c,posName:"left",sizeName:"width",clientOffset:i.left-t}:{snapSize:h,posName:"top",sizeName:"height",clientOffset:i.top-r},_=w.snapSize,E=w.posName,M=w.sizeName,O=w.clientOffset;if(!_)return{dir:S,multiple:1,snapSize:_,snapOffset:0};var A=g[M],R=g[E],B=xd(m.map(function(G){return[G[E]-R,G[M],A-G[M]-G[E]+R]})).filter(function(G){return G}).sort(function(G,tt){return G-tt}),L=B[0],W=B.map(function(G){return mt(G/L,.1)*_}),H=1,z=mt(A/L,.1);for(H=1;H<=10&&!W.every(function(G){return G*H%1===0});++H);var Y=(-S+1)/2,K=ea(R-O,R-O+A,Y,1-Y);return{multiple:z*H,dir:S,snapSize:_,snapOffset:Math.round(K/_)}}),C=x.map(function(S){return S.multiple||1});o.snapThresholdInfo.multiples=C,o.snapThresholdInfo.offset=x.map(function(S){return S.snapOffset}),x.forEach(function(S,y){S.snapSize})}}else o.snapThresholdInfo=null}function Yb(e,t,r,i,n,s,a){i===void 0&&(i=0),n===void 0&&(n=0);var o=e.props,l=e.state,u=o.snapGridWidth,c=u===void 0?0:u,f=o.snapGridHeight,h=f===void 0?0:f,d=[],p=s.left,v=s.top,g=[0,0];Ub(e,i,n,s);var m=l.snapThresholdInfo,b=c,x=h;if(m&&(c*=m.multiples[0]||1,h*=m.multiples[1]||1,g=m.offset),h){for(var C=function(y){d.push({type:"horizontal",pos:[p,mt(g[1]*x+y-n+v,.1)],className:dt("grid-guideline"),size:t,hide:!a,direction:"",grid:!0})},S=0;S<=r*2;S+=h)C(S);for(var S=-h;S>=-r;S-=h)C(S)}if(c){for(var C=function(w){d.push({type:"vertical",pos:[mt(g[0]*b+w-i+p,.1),v],className:dt("grid-guideline"),size:r,hide:!a,direction:"",grid:!0})},S=0;S<=t*2;S+=c)C(S);for(var S=-c;S>=-t;S-=c)C(S)}return d}function Dp(e,t,r,i){return r==="horizontal"?U(e.right-t.left)<=i||U(e.left-t.right)<=i||e.left<=t.right&&t.left<=e.right:r==="vertical"?U(e.bottom-t.top)<=i||U(e.top-t.bottom)<=i||e.top<=t.bottom&&t.top<=e.bottom:!0}function qb(e){var t=e.state,r=e.props.elementGuidelines,i=r===void 0?[]:r;if(!i.length)return t.elementRects=[],[];var n=(t.elementRects||[]).filter(function(h){return!h.refresh}),s=i.map(function(h){return Ze(h)&&"element"in h?D(D({},h),{element:ur(h.element,!0)}):{element:ur(h,!0)}}).filter(function(h){return h.element}),a=a1(n.map(function(h){return h.element}),s.map(function(h){return h.element})),o=a.maintained,l=a.added,u=[];o.forEach(function(h){var d=T(h,2),p=d[0],v=d[1];u[v]=n[p]}),Kb(e,l.map(function(h){return s[h]})).map(function(h,d){u[l[d]]=h}),t.elementRects=u;var c=Ou(e.props.elementSnapDirections),f=[];return u.forEach(function(h){var d=h.element,p=h.top,v=p===void 0?c.top:p,g=h.left,m=g===void 0?c.left:g,b=h.right,x=b===void 0?c.right:b,C=h.bottom,S=C===void 0?c.bottom:C,y=h.center,w=y===void 0?c.center:y,_=h.middle,E=_===void 0?c.middle:_,M=h.className,O=h.rect,A=Iu({top:v,right:x,left:m,bottom:S,center:w,middle:E},O),R=A.horizontal,B=A.vertical,L=A.horizontalNames,W=A.verticalNames,H=O.top,z=O.left,Y=O.right-z,K=O.bottom-H,G=[Y,K];B.forEach(function(tt,nt){f.push({type:"vertical",element:d,pos:[mt(tt,.1),H],size:K,sizes:G,className:M,elementRect:h,elementDirection:gf[W[nt]]||W[nt],direction:""})}),R.forEach(function(tt,nt){f.push({type:"horizontal",element:d,pos:[z,mt(tt,.1)],size:Y,sizes:G,className:M,elementRect:h,elementDirection:gf[L[nt]]||L[nt],direction:""})})}),f}function kf(e,t){return e?e.map(function(r){var i=Ze(r)?r:{pos:r},n=i.pos;return Li(n)?i:D(D({},i),{pos:Tt(n,t)})}):[]}function Tp(e,t,r,i,n,s,a){n===void 0&&(n=0),s===void 0&&(s=0),a===void 0&&(a={left:0,top:0,right:0,bottom:0});var o=[],l=a.left,u=a.top,c=a.bottom,f=a.right,h=r+f-l,d=i+c-u;return kf(e,d).forEach(function(p){o.push({type:"horizontal",pos:[l,mt(p.pos-s+u,.1)],size:h,className:p.className,direction:""})}),kf(t,h).forEach(function(p){o.push({type:"vertical",pos:[mt(p.pos-n+l,.1),u],size:d,className:p.className,direction:""})}),o}function Kb(e,t){if(!t.length)return[];var r=e.props.groupable,i=e.state,n=i.containerClientRect,s=i.rootMatrix,a=i.is3d,o=i.offsetDelta,l=a?4:3,u=T(xb(s,n,l),2),c=u[0],f=u[1],h=r?0:o[0],d=r?0:o[1];return t.map(function(p){var v=p.element.getBoundingClientRect(),g=v.left-c-h,m=v.top-f-d,b=m+v.height,x=g+v.width,C=T(Wi(s,[g,m],l),2),S=C[0],y=C[1],w=T(Wi(s,[x,b],l),2),_=w[0],E=w[1];return D(D({},p),{rect:{left:S,right:_,top:y,bottom:E,center:(S+_)/2,middle:(y+E)/2}})})}function bs(e){var t=e.state,r=t.container,i=e.props.snapContainer||r;if(t.snapContainer===i&&t.guidelines&&t.guidelines.length)return!1;var n=t.containerClientRect,s={left:0,top:0,bottom:0,right:0};if(r!==i){var a=ur(i,!0);if(a){var o=En(a),l=Af(t,[o.left-n.left,o.top-n.top]),u=Af(t,[o.right-n.right,o.bottom-n.bottom]);s.left=mt(l[0],1e-5),s.top=mt(l[1],1e-5),s.right=mt(u[0],1e-5),s.bottom=mt(u[1],1e-5)}}return t.snapContainer=i,t.snapOffset=s,t.guidelines=Ml(e),t.enableSnap=!0,!0}function Rp(e,t,r,i,n,s){var a=ui(e,t,r,s?4:3),o=Kt(a,i);return Nu(a,pt(n,o))}function Mf(e){return e?e/U(e):0}function Jb(e,t,r,i,n,s){var a=s.fixedDirection,o=_b(r,a,i),l=Lu(e,t,r,i),u=Q(Q([],T(Lb(e,t,o,i,n,s)),!1),T(Ep(e,l,s)),!1),c=oa(u,0),f=oa(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function Zb(e,t,r,i,n,s,a,o,l){var u=Kt(t,a),c=oo(e,o,{vertical:[u[0]],horizontal:[u[1]]}),f=c.horizontal.offset,h=c.vertical.offset;if(mt(h,xl)||mt(f,xl)){var d=T(hr({datas:l,distX:-h,distY:-f}),2),p=d[0],v=d[1],g=Math.min(n||1/0,r+a[0]*p),m=Math.min(s||1/0,i+a[1]*v);return[g-r,m-i]}return[0,0]}function Ap(e,t,r,i,n,s,a,o){for(var l=ze(e.state),u=e.props.keepRatio,c=0,f=0,h=0;h<2;++h){var d=t(c,f),p=Jb(e,d,n,u,a,o),v=p.width,g=p.height,m=v.isBound,b=g.isBound,x=v.offset,C=g.offset;if(h===1&&(m||(x=0),b||(C=0)),h===0&&a&&!m&&!b)return[0,0];if(u){var S=U(x)*(r?1/r:1),y=U(C)*(i?1/i:1),w=m&&b?S<y:b||!m&&S<y;w?x=r*C/i:C=i*x/r}c+=x,f+=C}if(!u&&n[0]&&n[1]){var _=zb(e,l,n,s,o),E=_.maxWidth,M=_.maxHeight,O=T(Zb(e,t(c,f).map(function(B){return B.map(function(L){return mt(L,xl)})}),r+c,i+f,E,M,n,a,o),2),x=O[0],C=O[1];c+=x,f+=C}return[c,f]}function wn(e){return e<0&&(e=e%360+360),e%=360,e}function Qb(e,t){t=wn(t);var r=Math.floor(e/360),i=r*360+360-t,n=r*360+t;return U(e-i)<U(e-n)?i:n}function Fo(e,t){e=wn(e),t=wn(t);var r=wn(e-t);return Math.min(r,360-r)}function tx(e,t,r,i){var n,s=e.props,a=(n=s[mp])!==null&&n!==void 0?n:5,o=s[yp];if(Ji(e,"rotatable")){var l=t.pos1,u=t.pos2,c=t.pos3,f=t.pos4,h=t.origin,d=r*Math.PI/180,p=[l,u,c,f].map(function(C){return pt(C,h)}),v=p.map(function(C){return Jn(C,d)}),g=Q(Q([],T(gb(e,p,v,h,r)),!1),T(Tb(e,p,v,h,r)),!1);g.sort(function(C,S){return U(C-r)-U(S-r)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:r}}if(o!=null&&o.length&&a){var b=o.slice().sort(function(C,S){return Fo(C,i)-Fo(S,i)}),x=b[0];if(Fo(x,i)<=a)return{isSnap:!0,dist:r+Qb(i,x)-i}}return{isSnap:!1,dist:r}}function ex(e,t,r,i,n,s,a){if(!Ji(e,"resizable"))return[0,0];var o=a.fixedDirection,l=a.nextAllMatrix,u=e.state,c=u.allMatrix,f=u.is3d;return Ap(e,function(h,d){return Rp(l||c,t+h,r+d,o,n,f)},t,r,i,n,s,a)}function rx(e,t,r,i,n){if(!Ji(e,"scalable"))return[0,0];var s=n.startOffsetWidth,a=n.startOffsetHeight,o=n.fixedPosition,l=n.fixedDirection,u=n.is3d,c=Ap(e,function(f,h){return Rp(eb(n,kt(t,[f/s,h/a])),s,a,l,o,u)},s,a,r,o,i,n);return[c[0]/s,c[1]/a]}function ix(e,t){t.absolutePoses=ze(e.state)}function Pf(e){var t=[];return e.forEach(function(r){r.guidelineInfos.forEach(function(i){var n=i.guideline;ke(t,function(s){return s.guideline===n})||(n.direction="",t.push({guideline:n,posInfo:r}))})}),t.map(function(r){var i=r.guideline,n=r.posInfo;return D(D({},i),{direction:n.direction})})}function Df(e,t,r,i,n,s){var a=Au(so(e,s),t,r),o=a.vertical,l=a.horizontal,u=xi();o.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.left=!0),p.direction==="end"&&(u.right=!0),i.push({type:"bounds",pos:p.pos}))}),l.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.top=!0),p.direction==="end"&&(u.bottom=!0),n.push({type:"bounds",pos:p.pos}))});var c=Rb(e),f=c.boundMap,h=c.vertical,d=c.horizontal;return h.forEach(function(p){xr(i,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||i.push({type:"bounds",pos:p})}),d.forEach(function(p){xr(n,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),{boundMap:u,innerBoundMap:f}}var nx=Hu("",["resizable","scalable"]),sx={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",mp,yp,bp,xp,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(e,t){var r=e.state,i=r.top,n=r.left,s=r.pos1,a=r.pos2,o=r.pos3,l=r.pos4,u=r.snapRenderInfo,c=e.props.snapRenderThreshold,f=c===void 0?1:c;if(!u||!u.render||!Ji(e,""))return Ci(e,"boundMap",xi(),function(et){return JSON.stringify(et)}),Ci(e,"innerBoundMap",xi(),function(et){return JSON.stringify(et)}),[];r.guidelines=Ml(e);var h=Math.min(s[0],a[0],o[0],l[0]),d=Math.min(s[1],a[1],o[1],l[1]),p=u.externalPoses||[],v=ze(e.state),g=[],m=[],b=[],x=[],C=[],S=Le(v),y=S.width,w=S.height,_=S.top,E=S.left,M=S.bottom,O=S.right,A={left:E,right:O,top:_,bottom:M,center:(E+O)/2,middle:(_+M)/2},R=p.length>0,B=R?Le(p):{};if(!u.request){if(u.direction&&C.push(wb(e,v,u.direction,f,f)),u.snap){var L=Le(v);u.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),C.push(mf(e,L,f,f))}R&&(u.center&&(B.middle=(B.top+B.bottom)/2,B.center=(B.left+B.right)/2),C.push(mf(e,B,f,f))),C.forEach(function(et){var st=et.vertical.posInfos,Z=et.horizontal.posInfos;g.push.apply(g,Q([],T(st.filter(function(lt){var ft=lt.guidelineInfos;return ft.some(function(yt){var St=yt.guideline;return!St.hide})}).map(function(lt){return{type:"snap",pos:lt.pos}})),!1)),m.push.apply(m,Q([],T(Z.filter(function(lt){var ft=lt.guidelineInfos;return ft.some(function(yt){var St=yt.guideline;return!St.hide})}).map(function(lt){return{type:"snap",pos:lt.pos}})),!1)),b.push.apply(b,Q([],T(Pf(st)),!1)),x.push.apply(x,Q([],T(Pf(Z)),!1))})}var W=Df(e,[E,O],[_,M],g,m),H=W.boundMap,z=W.innerBoundMap;R&&Df(e,[B.left,B.right],[B.top,B.bottom],g,m,u.externalBounds);var Y=Q(Q([],T(b),!1),T(x),!1),K=Y.filter(function(et){return et.element&&!et.gapRects}),G=Y.filter(function(et){return et.gapRects}).sort(function(et,st){return et.gap-st.gap});ut(e,"onSnap",{guidelines:Y.filter(function(et){var st=et.element;return!st}),elements:K,gaps:G},!0);var tt=Ci(e,"boundMap",H,function(et){return JSON.stringify(et)},xi()),nt=Ci(e,"innerBoundMap",z,function(et){return JSON.stringify(et)},xi());return(H===tt||z===nt)&&ut(e,"onBound",{bounds:H,innerBounds:z},!0),Q(Q(Q(Q(Q(Q([],T(jb(e,K,[h,d],A,t)),!1),T($b(e,G,[h,d],A,t)),!1),T(Ef(e,"horizontal",x,[n,i],A,t)),!1),T(Ef(e,"vertical",b,[n,i],A,t)),!1),T(_f(e,"horizontal",m,h,i,y,0,t)),!1),T(_f(e,"vertical",g,d,n,w,1,t)),!1)},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},bs(e)},drag:function(e){var t=e.state;bs(e)||(t.guidelines=Ml(e)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){if(nx(e,t)||kl(e,t))return!0;if(!t.isRequest&&t.inputEvent)return qt(t.inputEvent.target,dt("snap-control"))},dragControlStart:function(e){e.state.snapRenderInfo=null,bs(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,bs(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function ax(e,t){return[e[0]*t[0],e[1]*t[1]]}function dt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ty.apply(void 0,Q([Pu],T(e),!1))}function Op(e){e()}function ox(e){return!e||e==="none"?[1,0,0,1,0,0]:Ze(e)?e:Ln(e)}function _n(e,t,r){return ia(t,ri(r,t),e,ri(r.map(function(i){return-i}),t))}function lx(e,t,r){if(t==="%"){var i=zu(e.ownerSVGElement);return i[r?"width":"height"]/100}return 1}function ux(e){var t=cx(Gu(e,":before"));return t.map(function(r,i){var n=Un(r),s=n.value,a=n.unit;return s*lx(e,a,i===0)})}function ua(e){return e?e.split(" "):["0","0"]}function cx(e){return ua(e.transformOrigin)}function Ip(e){var t=Me(e),r=t("transform");if(r&&r!=="none")return r;if("transform"in e){var i=e.transform,n=i.baseVal;if(!n)return"";var s=n.length;if(!s)return"";for(var a=[],o=function(u){var c=n[u].matrix;a.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return c[f]}).join(", "),")"))},l=0;l<s;++l)o(l);return a.join(" ")}return""}function zn(e,t,r,i,n){var s,a,o=mu(e)||Gr(e),l=!1,u,c;if(!e||r)u=e;else{var f=(s=e==null?void 0:e.assignedSlot)===null||s===void 0?void 0:s.parentElement,h=e.parentElement;f?(l=!0,c=h,u=f):u=h}for(var d=!1,p=e===t||u===t,v="relative",g=1,m=parseFloat(n==null?void 0:n("zoom"))||1,b=n==null?void 0:n("position");u&&u!==o;){t===u&&(p=!0);var x=Me(u),C=u.tagName.toLowerCase(),S=Ip(u),y=x("willChange"),w=parseFloat(x("zoom"))||1;if(v=x("position"),i&&w!==1){g=w;break}if(!r&&i&&m!==1&&b&&b!=="absolute"||C==="svg"||C==="foreignobject"||v!=="static"||S&&S!=="none"||y==="transform")break;var _=(a=e==null?void 0:e.assignedSlot)===null||a===void 0?void 0:a.parentNode,E=u.parentNode;_&&(l=!0,c=E);var M=E;if(M&&M.nodeType===11){u=M.host,d=!0,v=Me(u)("position");break}u=M,v="relative"}return{offsetZoom:g,hasSlot:l,parentSlotElement:c,isCustomElement:d,isStatic:v==="static",isEnd:p||!u||u===o,offsetParent:u||o}}function fx(e,t){var r,i=e.tagName.toLowerCase(),n=e.offsetLeft,s=e.offsetTop,a=Me(e),o=Xn(n),l=!o,u,c;return!l&&(i!=="svg"||e.ownerSVGElement)?(u=Qd?ux(e):ua(a("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice(),l=!0,i==="svg"?(n=0,s=0):(r=T(px(e,u,e===t&&t.tagName.toLowerCase()==="g"),4),n=r[0],s=r[1],u[0]=r[2],u[1]=r[3])):(u=ua(a("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice()),{tagName:i,isSVG:o,hasOffset:l,offset:[n||0,s||0],origin:u,targetOrigin:c}}function Bp(e,t){var r=Me(e),i=Me(Gr(e)),n=i("position");if(!t&&(!n||n==="static"))return[0,0];var s=parseInt(i("marginLeft"),10),a=parseInt(i("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(a=0),(r("left")!=="auto"||r("right")!=="auto")&&(s=0)),[s,a]}function Pl(e){e.forEach(function(t){var r=t.matrix;r&&(t.matrix=Qe(r,3,4))})}function hx(e){for(var t=e.parentElement,r=!1,i=Gr(e);t;){var n=Gu(t).transform;if(n&&n!=="none"){r=!0;break}if(t===i)break;t=t.parentElement}return{fixedContainer:t||i,hasTransform:r}}function lo(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat($d(e,!t).join(","),")")}function zu(e){var t=e.clientWidth,r=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:r};var i=e.viewBox,n=i&&i.baseVal||{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width||t,height:n.height||r,clientWidth:t,clientHeight:r}}function dx(e,t){var r,i=zu(e),n=i.width,s=i.height,a=i.clientWidth,o=i.clientHeight,l=a/n,u=o/s,c=e.preserveAspectRatio.baseVal,f=c.align,h=c.meetOrSlice,d=[0,0],p=[l,u],v=[0,0];if(f!==1){var g=(f-2)%3,m=Math.floor((f-2)/3);d[0]=n*g/2,d[1]=s*m/2;var b=h===2?Math.max(u,l):Math.min(l,u);p[0]=b,p[1]=b,v[0]=(a-n)/2*g,v[1]=(o-s)/2*m}var x=_u(p,t);return r=T(v,2),x[t*(t-1)]=r[0],x[t*(t-1)+1]=r[1],_n(x,t,d)}function px(e,t,r){var i=e.tagName.toLowerCase();if(!e.getBBox||!r&&i==="g")return[0,0,0,0];var n=Me(e),s=n("transform-box")==="fill-box",a=e.getBBox(),o=zu(e.ownerSVGElement),l=a.x,u=a.y;i==="foreignobject"&&!l&&!u&&(l=parseFloat(e.getAttribute("x"))||0,u=parseFloat(e.getAttribute("y"))||0);var c=l-o.x,f=u-o.y,h=s?t[0]:t[0]-c,d=s?t[1]:t[1]-f;return[c,f,h,d]}function Nt(e,t,r){return ue(e,ei(t,r),r)}function ui(e,t,r,i){return[[0,0],[t,0],[0,r],[t,r]].map(function(n){return Nt(e,n,i)})}function Le(e){var t=e.map(function(u){return u[0]}),r=e.map(function(u){return u[1]}),i=Math.min.apply(Math,Q([],T(t),!1)),n=Math.min.apply(Math,Q([],T(r),!1)),s=Math.max.apply(Math,Q([],T(t),!1)),a=Math.max.apply(Math,Q([],T(r),!1)),o=s-i,l=a-n;return{left:i,top:n,right:s,bottom:a,width:o,height:l}}function Tf(e,t,r,i){var n=ui(e,t,r,i);return Le(n)}function vx(e,t,r,i,n){var s,a=e.target,o=e.origin,l=t.matrix,u=Fp(a),c=u.offsetWidth,f=u.offsetHeight,h=r.getBoundingClientRect(),d=[0,0];r===Gr(r)&&(d=Bp(a,!0));for(var p=a.getBoundingClientRect(),v=p.left-h.left+r.scrollLeft-(r.clientLeft||0)+d[0],g=p.top-h.top+r.scrollTop-(r.clientTop||0)+d[1],m=p.width,b=p.height,x=ia(i,n,l),C=Tf(x,c,f,i),S=C.left,y=C.top,w=C.width,_=C.height,E=Nt(x,o,i),M=pt(E,[S,y]),O=[v+M[0]*m/w,g+M[1]*b/_],A=[0,0],R=0;++R<10;){var B=cr(n,i);s=T(pt(Nt(B,O,i),Nt(B,E,i)),2),A[0]=s[0],A[1]=s[1];var L=ia(i,n,ri(A,i),l),W=Tf(L,c,f,i),H=W.left,z=W.top,Y=H-v,K=z-g;if(U(Y)<2&&U(K)<2)break;O[0]-=Y,O[1]-=K}return A.map(function(G){return Math.round(G)})}function gx(e,t,r){var i=e.length===16,n=i?4:3,s=t.map(function(l){return Nt(e,l,n)}),a=r.left,o=r.top;return s.map(function(l){return[l[0]+a,l[1]+o]})}function Fe(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Lp(e,t){return Fe([t[0]-e[0],t[1]-e[1]])}function an(e,t,r,i){r===void 0&&(r=1),i===void 0&&(i=Wt(e,t));var n=Lp(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(i,"rad) scaleY(").concat(r,")"),width:"".concat(n,"px")}}function ca(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r.length,s=r.reduce(function(o,l){return o+l[0]},0)/n,a=r.reduce(function(o,l){return o+l[1]},0)/n;return{transform:"translateZ(0px) translate(".concat(s,"px, ").concat(a,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function ni(e,t){var r=e[t];return Ze(r)?D(D({},e),r):e}function Fp(e){var t=e&&!Xn(e.offsetWidth),r=0,i=0,n=0,s=0,a=0,o=0,l=0,u=0,c=0,f=0,h=0,d=0,p=1/0,v=1/0,g=1/0,m=1/0,b=0,x=0,C=!1;if(e)if(!t&&e.ownerSVGElement){var S=e.getBBox();C=!0,r=S.width,i=S.height,a=r,o=i,l=r,u=i,n=r,s=i}else{var y=Me(e),w=e.style,_=y("boxSizing")==="border-box",E=parseFloat(y("borderLeftWidth"))||0,M=parseFloat(y("borderRightWidth"))||0,O=parseFloat(y("borderTopWidth"))||0,A=parseFloat(y("borderBottomWidth"))||0,R=parseFloat(y("paddingLeft"))||0,B=parseFloat(y("paddingRight"))||0,L=parseFloat(y("paddingTop"))||0,W=parseFloat(y("paddingBottom"))||0,H=R+B,z=L+W,Y=E+M,K=O+A,G=H+Y,tt=z+K,nt=y("position"),et=0,st=0;if("clientLeft"in e){var Z=null;if(nt==="absolute"){var lt=zn(e,Gr(e));Z=lt.offsetParent}else Z=e.parentElement;if(Z){var ft=Me(Z);et=parseFloat(ft("width")),st=parseFloat(ft("height"))}}c=Math.max(H,Tt(y("minWidth"),et)||0),f=Math.max(z,Tt(y("minHeight"),st)||0),p=Tt(y("maxWidth"),et),v=Tt(y("maxHeight"),st),isNaN(p)&&(p=1/0),isNaN(v)&&(v=1/0),b=Tt(w.width,0)||0,x=Tt(w.height,0)||0,a=parseFloat(y("width"))||0,o=parseFloat(y("height"))||0,l=U(a-b)<1?al(c,b||a,p):a,u=U(o-x)<1?al(f,x||o,v):o,r=l,i=u,n=l,s=u,_?(g=p,m=v,h=c,d=f,l=r-G,u=i-tt):(g=p+G,m=v+tt,h=c+G,d=f+tt,r=l+G,i=u+tt),n=l+H,s=u+z}return{svg:C,offsetWidth:r,offsetHeight:i,clientWidth:n,clientHeight:s,contentWidth:l,contentHeight:u,inlineCSSWidth:b,inlineCSSHeight:x,cssWidth:a,cssHeight:o,minWidth:c,minHeight:f,maxWidth:p,maxHeight:v,minOffsetWidth:h,minOffsetHeight:d,maxOffsetWidth:g,maxOffsetHeight:m}}function zp(e,t){return Wt(t>0?e[0]:e[1],t>0?e[1]:e[0])}function xs(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Np(e,t){var r=e===Gr(e)||e===mu(e),i={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return r&&(i.clientHeight=Math.max(t.height,i.clientHeight),i.scrollHeight=Math.max(t.height,i.scrollHeight)),i.overflow=Me(e)("overflow")!=="visible",D(D({},t),i)}function zo(e,t,r,i){var n=e.left,s=e.right,a=e.top,o=e.bottom,l=t.top,u=t.left,c={left:u+n,top:l+a,right:u+s,bottom:l+o,width:s-n,height:o-a};return r&&i?Np(r,c):c}function En(e,t){var r=0,i=0,n=0,s=0;if(e){var a=e.getBoundingClientRect();r=a.left,i=a.top,n=a.width,s=a.height}var o={left:r,top:i,width:n,height:s,right:r+n,bottom:i+s};return e&&t?Np(e,o):o}function mx(e){var t=e.props,r=t.groupable,i=t.svgOrigin,n=e.getState(),s=n.offsetWidth,a=n.offsetHeight,o=n.svg,l=n.transformOrigin;return!r&&o&&i?ju(i,s,a):l}function Gp(e,t,r,i){var n;if(e)n=e;else if(t)n=[0,0];else{var s=r.target;n=Wp(s,i)}return n}function Wp(e,t){if(e){var r=e.getAttribute("data-rotation")||"",i=e.getAttribute("data-direction");if(t.deg=r,!!i){var n=[0,0];return i.indexOf("w")>-1&&(n[0]=-1),i.indexOf("e")>-1&&(n[0]=1),i.indexOf("n")>-1&&(n[1]=-1),i.indexOf("s")>-1&&(n[1]=1),n}}}function Nu(e,t){return[kt(t,e[0]),kt(t,e[1]),kt(t,e[2]),kt(t,e[3])]}function ze(e){var t=e.left,r=e.top,i=e.pos1,n=e.pos2,s=e.pos3,a=e.pos4;return Nu([i,n,s,a],[t,r])}function Dl(e,t){e[t?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(e)})}function Si(e,t){var r=t?"controlGesto":"targetGesto",i=e[r];(i==null?void 0:i.isIdle())===!1&&Dl(e,t),i==null||i.unset(),e[r]=null}function ge(e,t){if(t){var r=Ki(t);r.nextStyle=D(D({},r.nextStyle),e)}return{style:e,cssText:Sr(e).map(function(i){return"".concat(Is(i,"-"),": ").concat(e[i],";")}).join("")}}function Hp(e,t,r){var i=t.afterTransform||t.transform;return D(D({},ge(D(D(D({},e.style),t.style),{transform:i}),r)),{afterTransform:i,transform:e.transform})}function xt(e,t,r,i){var n=t.datas;n.datas||(n.datas={});var s=D(D({},r),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:n.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){n.isEventStart=!1},stopDrag:function(){var a;(a=t.stop)===null||a===void 0||a.call(t)}});return n.isStartEvent?i||(n.lastEvent=s):n.isStartEvent=!0,s}function Ae(e,t,r){var i=t.datas,n="isDrag"in r?r.isDrag:t.isDrag;return i.datas||(i.datas={}),D(D({isDrag:n},r),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:i.lastEvent,isDouble:t.isDouble,datas:i.datas,isFirstDrag:!!t.isFirstDrag})}function uo(e,t,r){e._emitter.on(t,r)}function ut(e,t,r,i,n){return e.triggerEvent(t,r,i,n)}function Gu(e,t){return Br(e).getComputedStyle(e,t)}function Ss(e,t,r){var i={},n={};return e.filter(function(s){var a=s.name;if(i[a]||!t.some(function(o){return s[o]}))return!1;if(!r&&s.ableGroup){if(n[s.ableGroup])return!1;n[s.ableGroup]=!0}return i[a]=!0,!0})}function Tl(e,t){return e===t||e==null&&t==null}function Rf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length-1,i=0;i<r;++i){var n=e[i];if(!Xn(n))return n}return e[r]}function Vp(e,t){var r=[],i=[];return e.forEach(function(n,s){var a=t(n,s,e),o=i.indexOf(a),l=r[o]||[];o===-1&&(i.push(a),r.push(l)),l.push(n)}),r}function yx(e,t){var r=[],i={};return e.forEach(function(n,s){var a=t(n,s,e),o=i[a];o||(o=[],i[a]=o,r.push(o)),o.push(n)}),r}function jp(e){return e.reduce(function(t,r){return t.concat(r)},[])}function Gi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(r,i){return U(i)-U(r)}),e[0]}function Wi(e,t,r){return ue(cr(e,r),ei(t,r),r)}function $p(e,t){var r,i=e.is3d,n=e.rootMatrix,s=i?4:3;return r=T(Wi(n,[t.distX,t.distY],s),2),t.distX=r[0],t.distY=r[1],t}function Ie(e,t,r,i){if(!r[0]&&!r[1])return t;var n=Nt(e,[Mf(r[0]||1),0],i),s=Nt(e,[0,Mf(r[1]||1)],i),a=Nt(e,[r[0]/Fe(n),r[1]/Fe(s)],i);return kt(t,a)}function $e(e,t,r){return r?"".concat(e/t*100,"%"):"".concat(e,"px")}function fa(e){return U(e)<=me?0:e}function Wu(e){return function(t){if(!t.isDragging(e))return"";var r=lb(t,e),i=r.deg;return i?dt("view-control-rotation".concat(i)):""}}function Hu(e,t){return t===void 0&&(t=[e]),function(r,i){if(i.isRequest)return t.some(function(s){return i.requestAble===s})?i.parentDirection:!1;var n=i.inputEvent.target;return qt(n,dt("direction"))&&(!e||qt(n,dt(e)))}}function bx(e,t,r){var i,n=Fi(e,{"x%":function(S){return S/100*t.offsetWidth},"y%":function(S){return S/100*t.offsetHeight}}),s=e.slice(0,r<0?void 0:r),a=e.slice(0,r<0?void 0:r+1),o=e[r]||"",l=r<0?[]:e.slice(r),u=r<0?[]:e.slice(r+1),c=n.slice(0,r<0?void 0:r),f=n.slice(0,r<0?void 0:r+1),h=(i=n[r])!==null&&i!==void 0?i:Fi([""])[0],d=r<0?[]:n.slice(r),p=r<0?[]:n.slice(r+1),v=h?[h]:[],g=pi(c),m=pi(f),b=pi(d),x=pi(p),C=Rt(g,b,4);return{transforms:e,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:pi(v),afterFunctionMatrix:b,afterFunctionMatrix2:x,allFunctionMatrix:C,beforeFunctions:c,beforeFunctions2:f,targetFunction:v[0],afterFunctions:d,afterFunctions2:p,beforeFunctionTexts:s,beforeFunctionTexts2:a,targetFunctionText:o,afterFunctionTexts:l,afterFunctionTexts2:u}}function xx(e){return!e||!Ze(e)||Yi(e)?!1:$t(e)||"length"in e}function ur(e,t){return e?Yi(e)?e:Ee(e)?t?document.querySelector(e):e:pu(e)?e():_d(e)?e:"current"in e?e.current:e:null}function Vu(e,t){if(!e)return[];var r=xx(e)?[].slice.call(e):[e];return r.reduce(function(i,n){return Ee(n)&&t?Q(Q([],T(i),!1),T([].slice.call(document.querySelectorAll(n))),!1):($t(n)?i.push(Vu(n,t)):i.push(ur(n,t)),i)},[])}function Sx(e,t,r){var i=Wt(e,t)/Math.PI*180;return i=r>=0?i:180-i,i=i>=0?i:360+i,i}function Af(e,t){var r=e.rootMatrix,i=e.is3d,n=i?4:3,s=cr(r,n);return i||(s=Qe(s,3,4)),s[12]=0,s[13]=0,s[14]=0,n1(s,t)}function Xp(e,t,r,i,n){var s=T(e,2),a=s[0],o=s[1],l=0,u=0;if(n&&a&&o){var c=Wt([0,0],t),f=Wt([0,0],i),h=Fe(t),d=Math.cos(c-f)*h;if(!i[0])u=d,l=u*r;else if(!i[1])l=d,u=l/r;else{var p=i[0]*a,v=i[1]*o,g=Math.atan2(p+t[0],v+t[1]),m=Math.atan2(p,v);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var b=0;U(g-m)<Math.PI/2||U(g-m)>Math.PI/2*3||(m+=Math.PI),b=g-m,b>Math.PI*2?b-=Math.PI*2:b>Math.PI?b=2*Math.PI-b:b<-Math.PI&&(b=-2*Math.PI-b);var x=Fe([p+t[0],v+t[1]])*Math.cos(b);l=x*Math.sin(m)-p,u=x*Math.cos(m)-v,i[0]<0&&(l*=-1),i[1]<0&&(u*=-1)}}else l=i[0]*t[0],u=i[1]*t[1];return[l,u]}function Up(e,t,r,i){var n,s=r.ratio,a=r.startOffsetWidth,o=r.startOffsetHeight,l=0,u=0,c=i.distX,f=i.distY,h=i.pinchScale,d=i.parentDistance,p=i.parentDist,v=i.parentScale,g=r.fixedDirection,m=[0,1].map(function(w){return U(e[w]-g[w])}),b=[0,1].map(function(w){var _=m[w];return _!==0&&(_=2/_),_});if(p)l=p[0],u=p[1],t&&(l?u||(u=l/s):l=u*s);else if(Li(h))l=(h-1)*a,u=(h-1)*o;else if(v)l=(v[0]-1)*a,u=(v[1]-1)*o;else if(d){var x=a*m[0],C=o*m[1],S=Fe([x,C]);l=d/S*x*b[0],u=d/S*C*b[1]}else{var y=hr({datas:r,distX:c,distY:f});y=b.map(function(w,_){return y[_]*w}),n=T(Xp([a,o],y,s,e,t),2),l=n[0],u=n[1]}return{distWidth:l,distHeight:u}}function Rl(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var r=T(e.split(" "),2),i=r[0],n=r[1],s=Rl(i||""),a=Rl(n||""),o=D(D({},s),a),l={x:"50%",y:"50%"};return o.x&&(l.x=o.x),o.y&&(l.y=o.y),o.value&&(o.x&&!o.y&&(l.y=o.value),!o.x&&o.y&&(l.x=o.value)),l}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function ju(e,t,r){var i=Rl(e,!0),n=i.x,s=i.y;return[Tt(n,t)||0,Tt(s,r)||0]}function Cx(e,t,r){var i=e.map(function(s){return pt(s,t)}),n=i.map(function(s){return Jn(s,r)});return{prev:i,next:n,result:n.map(function(s){return kt(s,t)})}}function Yp(e,t){return e.length===t.length&&e.every(function(r,i){var n=t[i],s=$t(r),a=$t(n);return s&&a?Yp(r,n):!s&&!a?r===n:!1})}function Ci(e,t,r,i,n){var s=e._store,a=s[t];if(!(t in s))if(n!=null)s[t]=n,a=n;else return s[t]=r,r;return a===r||i(a)===i(r)?a:(s[t]=r,r)}function pe(e){return e>=0?1:-1}function U(e){return Math.abs(e)}function No(e,t){return my(e).map(function(r){return t(r)})}function qp(e){return Li(e)?{top:e,left:e,right:e,bottom:e}:{left:e.left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}}var wx=ts("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(e,t){var r=t.datas,i=t.targets,n=t.angle,s=t.originalDatas,a=e.props,o=a.pinchable,l=a.ables;if(!o)return!1;var u="onPinch".concat(i?"Group":"","Start"),c="drag".concat(i?"Group":"","ControlStart"),f=(o===!0?e.controlAbles:l.filter(function(v){return o.indexOf(v.name)>-1})).filter(function(v){return v.canPinch&&v[c]}),h=xt(e,t,{});i&&(h.targets=i);var d=ut(e,u,h);r.isPinch=d!==!1,r.ables=f;var p=r.isPinch;return p?(f.forEach(function(v){if(s[v.name]=s[v.name]||{},!!v[c]){var g=D(D({},t),{datas:s[v.name],parentRotate:n,isPinch:!0});v[c](e,g)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},p):!1},pinch:function(e,t){var r=t.datas,i=t.scale,n=t.distance,s=t.originalDatas,a=t.inputEvent,o=t.targets,l=t.angle;if(r.isPinch){var u=n*(1-1/i),c=xt(e,t,{});o&&(c.targets=o);var f="onPinch".concat(o?"Group":"");ut(e,f,c);var h=r.ables,d="drag".concat(o?"Group":"","Control");return h.forEach(function(p){p[d]&&p[d](e,D(D({},t),{datas:s[p.name],inputEvent:a,resolveMatrix:!0,pinchScale:i,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(e,t){var r=t.datas,i=t.isPinch,n=t.inputEvent,s=t.targets,a=t.originalDatas;if(r.isPinch){var o="onPinch".concat(s?"Group":"","End"),l=Ae(e,t,{isDrag:i});s&&(l.targets=s),ut(e,o,l);var u=r.ables,c="drag".concat(s?"Group":"","ControlEnd");return u.forEach(function(f){f[c]&&f[c](e,D(D({},t),{isDrag:i,datas:a[f.name],inputEvent:n,isPinch:!0}))}),i}},pinchGroupStart:function(e,t){return this.pinchStart(e,D(D({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,D(D({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,D(D({},t),{targets:e.props.targets}))}}),Of=Hu("scalable"),_x={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:pp("scalable"),dragControlCondition:Of,viewClassName:Wu("scalable"),dragControlStart:function(e,t){var r=t.datas,i=t.isPinch,n=t.inputEvent,s=t.parentDirection,a=Gp(s,i,n,r),o=e.state,l=o.width,u=o.height,c=o.targetTransform,f=o.target,h=o.pos1,d=o.pos2,p=o.pos4;if(!a||!f)return!1;i||li(e,t),r.datas={},r.transform=c,r.prevDist=[1,1],r.direction=a,r.startOffsetWidth=l,r.startOffsetHeight=u,r.startValue=[1,1];var v=!a[0]&&!a[1]||a[0]||!a[1];no(e,t,"scale"),r.isWidth=v;function g(y){r.ratio=y&&isFinite(y)?y:0}r.startPositions=ze(e.state);function m(y){var w=kp(r.startPositions,y);r.fixedDirection=w.fixedDirection,r.fixedPosition=w.fixedPosition,r.fixedOffset=w.fixedOffset}r.setFixedDirection=m,g(yr(h,d)/yr(d,p)),m([-a[0],-a[1]]);var b=function(y){r.minScaleSize=y},x=function(y){r.maxScaleSize=y};b([-1/0,-1/0]),x([1/0,1/0]);var C=xt(e,t,D(D({direction:a,set:function(y){r.startValue=y},setRatio:g,setFixedDirection:m,setMinScaleSize:b,setMaxScaleSize:x},io(e,t)),{dragStart:de.dragStart(e,new zi().dragStart([0,0],t))})),S=ut(e,"onScaleStart",C);return r.startFixedDirection=r.fixedDirection,S!==!1&&(r.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:a}),r.isScale?C:!1},dragControl:function(e,t){eo(e,t,"scale");var r=t.datas,i=t.parentKeepRatio,n=t.parentFlag,s=t.isPinch,a=t.dragClient,o=t.isRequest,l=t.useSnap,u=t.resolveMatrix,c=r.prevDist,f=r.direction,h=r.startOffsetWidth,d=r.startOffsetHeight,p=r.isScale,v=r.startValue,g=r.isWidth,m=r.ratio;if(!p)return!1;var b=e.props,x=b.throttleScale,C=b.parentMoveable,S=f;!f[0]&&!f[1]&&(S=[1,1]);var y=m&&(i??b.keepRatio)||!1,w=e.state,_=[v[0],v[1]];function E(){var rt=Up(S,y,r,t),ct=rt.distWidth,k=rt.distHeight,P=h?(h+ct)/h:1,I=d?(d+k)/d:1;v[0]||(_[0]=ct/h),v[1]||(_[1]=k/d);var F=(S[0]||y?P:1)*_[0],N=(S[1]||y?I:1)*_[1];return F===0&&(F=pe(c[0])*gs),N===0&&(N=pe(c[1])*gs),[F,N]}var M=E();if(!s&&e.props.groupable){var O=w.snapRenderInfo||{},A=O.direction;$t(A)&&(A[0]||A[1])&&(w.snapRenderInfo={direction:f,request:t.isRequest})}ut(e,"onBeforeScale",xt(e,t,{scale:M,setFixedDirection:function(rt){return r.setFixedDirection(rt),M=E(),M},startFixedDirection:r.startFixedDirection,setScale:function(rt){M=rt}},!0));var R=[M[0]/_[0],M[1]/_[1]],B=a,L=[0,0],W=pe(R[0]*R[1]),H=!a&&!n&&s;if(H||u?B=Ru(e,r.targetAllTransform,[0,0],[0,0],r):a||(B=r.fixedPosition),s||(L=rx(e,R,f,!l&&o,r)),y){S[0]&&S[1]&&L[0]&&L[1]&&(Math.abs(L[0]*h)>Math.abs(L[1]*d)?L[1]=0:L[0]=0);var z=!L[0]&&!L[1];if(z&&(g?R[0]=mt(R[0]*_[0],x)/_[0]:R[1]=mt(R[1]*_[1],x)/_[1]),S[0]&&!S[1]||L[0]&&!L[1]||z&&g){R[0]+=L[0];var Y=h*R[0]*_[0]/m;R[1]=pe(W*R[0])*U(Y/d/_[1])}else if(!S[0]&&S[1]||!L[0]&&L[1]||z&&!g){R[1]+=L[1];var K=d*R[1]*_[1]*m;R[0]=pe(W*R[1])*U(K/h/_[0])}}else R[0]+=L[0],R[1]+=L[1],L[0]||(R[0]=mt(R[0]*_[0],x)/_[0]),L[1]||(R[1]=mt(R[1]*_[1],x)/_[1]);R[0]===0&&(R[0]=pe(c[0])*gs),R[1]===0&&(R[1]=pe(c[1])*gs),M=ax(R,[_[0],_[1]]);var G=[h,d],tt=[h*M[0],d*M[1]];tt=bd(tt,r.minScaleSize,r.maxScaleSize,y?m:!1),M=No(2,function(rt){return G[rt]?tt[rt]/G[rt]:tt[rt]}),R=No(2,function(rt){return M[rt]/_[rt]});var nt=No(2,function(rt){return c[rt]?R[rt]/c[rt]:R[rt]}),et="scale(".concat(R.join(", "),")"),st="scale(".concat(M.join(", "),")"),Z=ro(r,st,et),lt=!v[0]||!v[1],ft=rb(e,lt?st:et,r.fixedDirection,B,r.fixedOffset,r,lt),yt=H?ft:pt(ft,r.prevInverseDist||[0,0]);if(r.prevDist=R,r.prevInverseDist=ft,M[0]===c[0]&&M[1]===c[1]&&yt.every(function(rt){return!rt})&&!C&&!H)return!1;var St=xt(e,t,D({offsetWidth:h,offsetHeight:d,direction:f,scale:M,dist:R,delta:nt,isPinch:!!s},lp(e,Z,yt,s,t)));return ut(e,"onScale",St),St},dragControlEnd:function(e,t){var r=t.datas;if(!r.isScale)return!1;r.isScale=!1;var i=Ae(e,t,{});return ut(e,"onScaleEnd",i),i},dragGroupControlCondition:Of,dragGroupControlStart:function(e,t){var r=t.datas,i=this.dragControlStart(e,t);if(!i)return!1;var n=Je(e,"resizable",t);r.moveableScale=e.scale;var s=br(e,this,"dragControlStart",t,function(u,c){return aa(e,u,r,c)}),a=function(u){i.setFixedDirection(u),s.forEach(function(c,f){c.setFixedDirection(u),aa(e,c.moveable,r,n[f])})};r.setFixedDirection=a;var o=D(D({},i),{targets:e.props.targets,events:s,setFixedDirection:a}),l=ut(e,"onScaleGroupStart",o);return r.isScale=l!==!1,r.isScale?o:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isScale){uo(e,"onBeforeScale",function(c){ut(e,"onBeforeScaleGroup",xt(e,t,D(D({},c),{targets:e.props.targets}),!0))});var i=this.dragControl(e,t);if(i){var n=i.dist,s=r.moveableScale;e.scale=[n[0]*s[0],n[1]*s[1]];var a=e.props.keepRatio,o=r.fixedPosition,l=br(e,this,"dragControl",t,function(c,f){var h=T(ue(Zn(e.rotation/180*Math.PI,3),[f.datas.originalX*n[0],f.datas.originalY*n[1],1],3),2),d=h[0],p=h[1];return D(D({},f),{parentDist:null,parentScale:n,parentKeepRatio:a,dragClient:kt(o,[d,p])})}),u=D({targets:e.props.targets,events:l},i);return ut(e,"onScaleGroup",u),u}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,i=t.datas;if(i.isScale){this.dragControlEnd(e,t);var n=br(e,this,"dragControlEnd",t),s=Ae(e,t,{targets:e.props.targets,events:n});return ut(e,"onScaleGroupEnd",s),r}},request:function(){var e={},t=0,r=0,i=!1;return{isControl:!0,requestStart:function(n){return i=n.useSnap,{datas:e,parentDirection:n.direction||[1,1],useSnap:i}},request:function(n){return t+=n.deltaWidth,r+=n.deltaHeight,{datas:e,parentDist:[t,r],parentKeepRatio:n.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}}};function kr(e,t){return e.map(function(r,i){return ea(r,t[i],1,2)})}function If(e,t,r){var i=Wt(e,t),n=Wt(e,r),s=n-i;return s>=0?s:s+2*Math.PI}function Ex(e,t){var r=If(e[0],e[1],e[2]),i=If(t[0],t[1],t[2]),n=Math.PI;return!(r>=n&&i<=n||r<=n&&i>=n)}var kx={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Wu("warpable"),render:function(e,t){var r=e.props,i=r.resizable,n=r.scalable,s=r.warpable,a=r.zoom;if(i||n||!s)return[];var o=e.state,l=o.pos1,u=o.pos2,c=o.pos3,f=o.pos4,h=kr(l,u),d=kr(u,l),p=kr(l,c),v=kr(c,l),g=kr(c,f),m=kr(f,c),b=kr(u,f),x=kr(f,u);return Q([t.createElement("div",{className:dt("line"),key:"middeLine1",style:an(h,g,a)}),t.createElement("div",{className:dt("line"),key:"middeLine2",style:an(d,m,a)}),t.createElement("div",{className:dt("line"),key:"middeLine3",style:an(p,b,a)}),t.createElement("div",{className:dt("line"),key:"middeLine4",style:an(v,x,a)})],T(vp(e,"warpable",t)),!1)},dragControlCondition:function(e,t){if(t.isRequest)return!1;var r=t.inputEvent.target;return qt(r,dt("direction"))&&qt(r,dt("warpable"))},dragControlStart:function(e,t){var r=t.datas,i=t.inputEvent,n=e.props.target,s=i.target,a=Wp(s,r);if(!a||!n)return!1;var o=e.state,l=o.transformOrigin,u=o.is3d,c=o.targetTransform,f=o.targetMatrix,h=o.width,d=o.height,p=o.left,v=o.top;r.datas={},r.targetTransform=c,r.warpTargetMatrix=u?f:Qe(f,3,4),r.targetInverseMatrix=Vd(cr(r.warpTargetMatrix,4),3,4),r.direction=a,r.left=p,r.top=v,r.poses=[[0,0],[h,0],[0,d],[h,d]].map(function(b){return pt(b,l)}),r.nextPoses=r.poses.map(function(b){var x=T(b,2),C=x[0],S=x[1];return ue(r.warpTargetMatrix,[C,S,0,1],4)}),r.startValue=Bt(4),r.prevMatrix=Bt(4),r.absolutePoses=ze(o),r.posIndexes=op(a),li(e,t),no(e,t,"matrix3d"),o.snapRenderInfo={request:t.isRequest,direction:a};var g=xt(e,t,D({set:function(b){r.startValue=b}},io(e,t))),m=ut(e,"onWarpStart",g);return m!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(e,t){var r=t.datas,i=t.isRequest,n=t.distX,s=t.distY,a=r.targetInverseMatrix,o=r.prevMatrix,l=r.isWarp,u=r.startValue,c=r.poses,f=r.posIndexes,h=r.absolutePoses;if(!l)return!1;if(eo(e,t,"matrix3d"),Ji(e,"warpable")){var d=f.map(function(E){return h[E]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=oo(e,i,{horizontal:d.map(function(E){return E[1]+s}),vertical:d.map(function(E){return E[0]+n})}),v=p.horizontal,g=p.vertical;s-=v.offset,n-=g.offset}var m=hr({datas:r,distX:n,distY:s},!0),b=r.nextPoses.slice();if(f.forEach(function(E){b[E]=kt(b[E],m)}),!X1.every(function(E){return Ex(E.map(function(M){return c[M]}),E.map(function(M){return b[M]}))}))return!1;var x=Eu(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var C=Rt(a,x,4),S=sp(r,C,!0),y=Rt(cr(o,4),S,4);r.prevMatrix=S;var w=Rt(u,S,4),_=ro(r,"matrix3d(".concat(w.join(", "),")"),"matrix3d(".concat(S.join(", "),")"));return Tu(t,_),ut(e,"onWarp",xt(e,t,D({delta:y,matrix:w,dist:S,multiply:Rt,transform:_},ge({transform:_},t)))),!0},dragControlEnd:function(e,t){var r=t.datas,i=t.isDrag;return r.isWarp?(r.isWarp=!1,ut(e,"onWarpEnd",Ae(e,t,{})),i):!1}},Mx=dt("area-pieces"),Cs=dt("area-piece"),Kp=dt("avoid"),Px=dt("view-dragging");function Go(e){var t=e.areaElement;if(t){var r=e.state,i=r.width,n=r.height;wd(t,Kp),t.style.cssText+="left: 0px; top: 0px; width: ".concat(i,"px; height: ").concat(n,"px")}}function Bf(e){return e.createElement("div",{key:"area_pieces",className:Mx},e.createElement("div",{className:Cs}),e.createElement("div",{className:Cs}),e.createElement("div",{className:Cs}),e.createElement("div",{className:Cs}))}var Jp={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(e,t){var r=e.props,i=r.target,n=r.dragArea,s=r.groupable,a=r.passDragArea,o=e.getState(),l=o.width,u=o.height,c=o.renderPoses,f=a?dt("area","pass"):dt("area");if(s)return[t.createElement("div",{key:"area",ref:mr(e,"areaElement"),className:f}),Bf(t)];if(!i||!n)return[];var h=Eu([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),d=h.length?lo(h,!0):"none";return[t.createElement("div",{key:"area",ref:mr(e,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:d}}),Bf(t)]},dragStart:function(e,t){var r=t.datas,i=t.clientX,n=t.clientY,s=t.inputEvent;if(!s)return!1;r.isDragArea=!1;var a=e.areaElement,o=e.state,l=o.moveableClientRect,u=o.renderPoses,c=o.rootMatrix,f=o.is3d,h=l.left,d=l.top,p=Le(u),v=p.left,g=p.top,m=p.width,b=p.height,x=f?4:3,C=T(Wi(c,[i-h,n-d],x),2),S=C[0],y=C[1];S-=v,y-=g;var w=[{left:v,top:g,width:m,height:y-10},{left:v,top:g,width:S-10,height:b},{left:v,top:g+y+10,width:m,height:b-y-10},{left:v+S+10,top:g,width:m-S-10,height:b}],_=[].slice.call(a.nextElementSibling.children);w.forEach(function(E,M){_[M].style.cssText="left: ".concat(E.left,"px;top: ").concat(E.top,"px; width: ").concat(E.width,"px; height: ").concat(E.height,"px;")}),Cd(a,Kp),o.disableNativeEvent=!0},drag:function(e,t){var r=t.datas,i=t.inputEvent;if(this.enableNativeEvent(e),!i)return!1;r.isDragArea||(r.isDragArea=!0,Go(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var r=t.inputEvent,i=t.datas;if(!r)return!1;i.isDragArea||Go(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){Go(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&yd(function(){t.disableNativeEvent=!1})}},Dx=ts("origin",{props:["origin","svgOrigin"],render:function(e,t){var r=e.props,i=r.zoom,n=r.svgOrigin,s=r.groupable,a=e.getState(),o=a.beforeOrigin,l=a.rotation,u=a.svg,c=a.allMatrix,f=a.is3d,h=a.left,d=a.top,p=a.offsetWidth,v=a.offsetHeight,g;if(!s&&u&&n){var m=T(ju(n,p,v),2),b=m[0],x=m[1],C=f?4:3,S=Nt(c,[b,x],C);g=ca(l,i,pt(S,[h,d]))}else g=ca(l,i,o);return[t.createElement("div",{className:dt("control","origin"),style:g,key:"beforeOrigin"})]}});function Tx(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var Rx={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(e,t){var r=e.props,i=r.scrollContainer,n=i===void 0?e.getContainer():i,s=r.scrollOptions,a=new f1,o=ur(n,!0);t.datas.dragScroll=a,e.state.dragScroll=a;var l=t.isControl?"controlGesto":"targetGesto",u=t.targets;a.on("scroll",function(c){var f=c.container,h=c.direction,d=xt(e,t,{scrollContainer:f,direction:h}),p=u?"onScrollGroup":"onScroll";u&&(d.targets=u),ut(e,p,d)}).on("move",function(c){var f=c.offsetX,h=c.offsetY,d=c.inputEvent;e[l].scrollBy(f,h,d.inputEvent,!1)}).on("scrollDrag",function(c){var f=c.next;f(e[l].getCurrentEvent())}),a.dragStart(t,D({container:o},s))},checkScroll:function(e,t){var r=t.datas.dragScroll;if(r){var i=e.props,n=i.scrollContainer,s=n===void 0?e.getContainer():n,a=i.scrollThreshold,o=a===void 0?0:a,l=i.scrollThrottleTime,u=l===void 0?0:l,c=i.getScrollPosition,f=c===void 0?Tx:c,h=i.scrollOptions;return r.drag(t,D({container:s,threshold:o,throttleTime:u,getScrollPosition:function(d){return f({scrollContainer:d.container,direction:d.direction})}},h)),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,D(D({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,D(D({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,D(D({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,D(D({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,D(D({},t),{targets:e.props.targets,isControl:!0}))},dragGroupControl:function(e,t){return this.drag(e,D(D({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,D(D({},t),{targets:e.props.targets}))},unset:function(e){var t,r=e.state;(t=r.dragScroll)===null||t===void 0||t.dragEnd(),r.dragScroll=null}},Zp={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},Ax=ts("padding",{props:["padding"],render:function(e,t){var r=e.props;if(r.dragArea)return[];var i=qp(r.padding||{}),n=i.left,s=i.top,a=i.right,o=i.bottom,l=e.getState(),u=l.renderPoses,c=l.pos1,f=l.pos2,h=l.pos3,d=l.pos4,p=[c,f,h,d],v=[];return n>0&&v.push([0,2]),s>0&&v.push([0,1]),a>0&&v.push([1,3]),o>0&&v.push([2,3]),v.map(function(g,m){var b=T(g,2),x=b[0],C=b[1],S=p[x],y=p[C],w=u[x],_=u[C],E=Eu([0,0],[100,0],[0,100],[100,100],S,y,w,_);if(E.length)return t.createElement("div",{key:"padding".concat(m),className:dt("padding"),style:{transform:lo(E,!0)}})})}}),Lf=["nw","ne","se","sw"];function ws(e,t){var r=e[0]+e[1],i=r>t?t/r:1;return e[0]*=i,e[1]=t-e[1]*i,e}var Ox=[1,2,5,6],Ix=[0,3,4,7],Xr=[1,-1,-1,1],Ur=[1,1,-1,-1];function $u(e,t,r,i,n,s,a,o){n===void 0&&(n=0),s===void 0&&(s=0),a===void 0&&(a=r),o===void 0&&(o=i);var l=[],u=!1,c=e.filter(function(h){return!h.virtual}),f=c.map(function(h){var d=h.horizontal,p=h.vertical,v=h.pos;if(p&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,p===1?v[1]-s:o-v[1]);return l.push($e(g,i,t)),g}else{var g=Math.max(0,d===1?v[0]-n:a-v[0]);return l.push($e(g,r,t)),g}});return{radiusPoses:c,styles:l,raws:f}}function Qp(e){for(var t=[0,0],r=[0,0],i=e.length,n=0;n<i;++n){var s=e[n];s.sub&&(s.horizontal&&(t[1]===0&&(t[0]=n),t[1]=n-t[0]+1,r[0]=n+1),s.vertical&&(r[1]===0&&(r[0]=n),r[1]=n-r[0]+1))}return{horizontalRange:t,verticalRange:r}}function tv(e,t,r,i,n,s,a){var o,l,u,c;s===void 0&&(s=[0,0]),a===void 0&&(a=!1);var f=e.indexOf("/"),h=(f>-1?e.slice(0,f):e).length,d=e.slice(0,h),p=e.slice(h+1),v=d.length,g=p.length,m=g>0,b=T(d,4),x=b[0],C=x===void 0?"0px":x,S=b[1],y=S===void 0?C:S,w=b[2],_=w===void 0?C:w,E=b[3],M=E===void 0?y:E,O=T(p,4),A=O[0],R=A===void 0?C:A,B=O[1],L=B===void 0?m?R:y:B,W=O[2],H=W===void 0?m?R:_:W,z=O[3],Y=z===void 0?m?L:M:z,K=[C,y,_,M].map(function(Z){return Tt(Z,t)}),G=[R,L,H,Y].map(function(Z){return Tt(Z,r)}),tt=K.slice(),nt=G.slice();o=T(ws([tt[0],tt[1]],t),2),tt[0]=o[0],tt[1]=o[1],l=T(ws([tt[3],tt[2]],t),2),tt[3]=l[0],tt[2]=l[1],u=T(ws([nt[0],nt[3]],r),2),nt[0]=u[0],nt[3]=u[1],c=T(ws([nt[1],nt[2]],r),2),nt[1]=c[0],nt[2]=c[1];var et=a?tt:tt.slice(0,Math.max(s[0],v)),st=a?nt:nt.slice(0,Math.max(s[1],g));return Q(Q([],T(et.map(function(Z,lt){var ft=Lf[lt];return{virtual:lt>=v,horizontal:Xr[lt],vertical:0,pos:[i+Z,n+(Ur[lt]===-1?r:0)],sub:!0,raw:K[lt],direction:ft}})),!1),T(st.map(function(Z,lt){var ft=Lf[lt];return{virtual:lt>=g,horizontal:0,vertical:Ur[lt],pos:[i+(Xr[lt]===-1?t:0),n+Z],sub:!0,raw:G[lt],direction:ft}})),!1)}function Bx(e,t,r,i,n){n===void 0&&(n=t.length);var s=Qp(e.slice(i)),a=s.horizontalRange,o=s.verticalRange,l=r-i,u=0;if(l===0)u=n;else if(l>0&&l<a[1])u=a[1]-l;else if(l>=o[0])u=o[0]+o[1]-l;else return;e.splice(r,u),t.splice(r,u)}function Lx(e,t,r,i,n,s,a,o,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var f=Qp(e.slice(r)),h=f.horizontalRange,d=f.verticalRange;if(i>-1)for(var p=Xr[i]===1?s-u:o-s,v=h[1];v<=i;++v){var g=Ur[v]===1?c:l,m=0;if(i===v?m=s:v===0?m=u+p:Xr[v]===-1&&(m=o-(t[r][0]-u)),e.splice(r+v,0,{horizontal:Xr[v],vertical:0,pos:[m,g]}),t.splice(r+v,0,[m,g]),v===0)break}else if(n>-1){var b=Ur[n]===1?a-c:l-a;if(h[1]===0&&d[1]===0){var x=[u+b,c];e.push({horizontal:Xr[0],vertical:0,pos:x}),t.push(x)}for(var C=d[0],v=d[1];v<=n;++v){var m=Xr[v]===1?u:o,g=0;if(n===v?g=a:v===0?g=c+b:Ur[v]===1?g=t[r+C][1]:Ur[v]===-1&&(g=l-(t[r+C][1]-c)),e.push({horizontal:0,vertical:Ur[v],pos:[m,g]}),t.push([m,g]),v===0)break}}}function Fx(e,t){t===void 0&&(t=e.map(function(n){return n.raw}));var r=e.map(function(n,s){return n.horizontal?t[s]:null}).filter(function(n){return n!=null}),i=e.map(function(n,s){return n.vertical?t[s]:null}).filter(function(n){return n!=null});return{horizontals:r,verticals:i}}var zx=[[0,-1,"n"],[1,0,"e"]],Nx=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Xu(e,t,r){var i=e.props.clipRelative,n=e.state,s=n.width,a=n.height,o=t,l=o.type,u=o.poses,c=l==="rect",f=l==="circle";if(l==="polygon")return r.map(function(y){return"".concat($e(y[0],s,i)," ").concat($e(y[1],a,i))});if(c||l==="inset"){var h=r[1][1],d=r[3][0],p=r[7][0],v=r[5][1];if(c)return[h,d,v,p].map(function(y){return"".concat(y,"px")});var g=[h,s-d,a-v,p].map(function(y,w){return $e(y,w%2?s:a,i)});if(r.length>8){var m=T(pt(r[4],r[0]),2),b=m[0],x=m[1];g.push.apply(g,Q(["round"],T($u(u.slice(8).map(function(y,w){return D(D({},y),{pos:r[w]})}),i,b,x,p,h,d,v).styles),!1))}return g}else if(f||l==="ellipse"){var C=r[0],S=$e(U(r[1][1]-C[1]),f?Math.sqrt((s*s+a*a)/2):a,i),g=f?[S]:[$e(U(r[2][0]-C[0]),s,i),S];return g.push("at",$e(C[0],s,i),$e(C[1],a,i)),g}}function ha(e,t,r,i){var n=[i,(i+t)/2,t],s=[e,(e+r)/2,r];return Nx.map(function(a){var o=T(a,3),l=o[0],u=o[1],c=o[2],f=n[l+1],h=s[u+1];return{vertical:U(u),horizontal:U(l),direction:c,pos:[f,h]}})}function ev(e){var t=[1/0,-1/0],r=[1/0,-1/0];return e.forEach(function(i){var n=i.pos;t[0]=Math.min(t[0],n[0]),t[1]=Math.max(t[1],n[0]),r[0]=Math.min(r[0],n[1]),r[1]=Math.max(r[1],n[1])}),[U(t[1]-t[0]),U(r[1]-r[0])]}function Ff(e,t,r,i,n){var s,a,o,l,u,c,f,h,d;if(e){var p=n;if(!p){var v=Me(e),g=v("clipPath");p=g!=="none"?g:v("clip")}if(!((!p||p==="none"||p==="auto")&&(p=i,!p))){var m=md(p),b=m.prefix,x=b===void 0?p:b,C=m.value,S=C===void 0?"":C,y=x==="circle",w=" ";if(x==="polygon"){var _=Kr(S||"0% 0%, 100% 0%, 100% 100%, 0% 100%");w=",";var E=_.map(function(q){var X=T(q.split(" "),2),it=X[0],ot=X[1];return{vertical:1,horizontal:1,pos:[Tt(it,t),Tt(ot,r)]}}),M=ii(E.map(function(q){return q.pos}));return{type:x,clipText:p,poses:E,splitter:w,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(y||x==="ellipse"){var O="",A="",R=0,B=0,_=Fr(S);if(y){var L="";s=T(_,4),a=s[0],L=a===void 0?"50%":a,o=s[2],O=o===void 0?"50%":o,l=s[3],A=l===void 0?"50%":l,R=Tt(L,Math.sqrt((t*t+r*r)/2)),B=R}else{var W="",H="";u=T(_,5),c=u[0],W=c===void 0?"50%":c,f=u[1],H=f===void 0?"50%":f,h=u[3],O=h===void 0?"50%":h,d=u[4],A=d===void 0?"50%":d,R=Tt(W,t),B=Tt(H,r)}var z=[Tt(O,t),Tt(A,r)],E=Q([{vertical:1,horizontal:1,pos:z,direction:"nesw"}],T(zx.slice(0,y?1:2).map(function(it){return{vertical:U(it[1]),horizontal:it[0],direction:it[2],sub:!0,pos:[z[0]+it[0]*R,z[1]+it[1]*B]}})),!1);return{type:x,clipText:p,radiusX:R,radiusY:B,left:z[0]-R,top:z[1]-B,right:z[0]+R,bottom:z[1]+B,poses:E,splitter:w}}else if(x==="inset"){var _=Fr(S||"0 0 0 0"),Y=_.indexOf("round"),K=(Y>-1?_.slice(0,Y):_).length,G=_.slice(K+1),tt=T(_.slice(0,K),4),nt=tt[0],et=tt[1],st=et===void 0?nt:et,Z=tt[2],lt=Z===void 0?nt:Z,ft=tt[3],yt=ft===void 0?st:ft,St=T([nt,lt].map(function(it){return Tt(it,r)}),2),rt=St[0],ct=St[1],k=T([yt,st].map(function(it){return Tt(it,t)}),2),P=k[0],I=k[1],F=t-I,N=r-ct,$=tv(G,F-P,N-rt,P,rt),E=Q(Q([],T(ha(rt,F,N,P)),!1),T($),!1);return{type:"inset",clipText:p,poses:E,top:rt,left:P,right:F,bottom:N,radius:G,splitter:w}}else if(x==="rect"){var _=Kr(S||"0px, ".concat(t,"px, ").concat(r,"px, 0px"));w=",";var j=T(_.map(function(vt){var gt=Un(vt).value;return gt}),4),V=j[0],I=j[1],ct=j[2],P=j[3],E=ha(V,I,ct,P);return{type:"rect",clipText:p,poses:E,top:V,right:I,bottom:ct,left:P,values:_,splitter:w}}}}}function Gx(e,t,r,i,n){var s=e[t],a=s.direction,o=s.sub,l=e.map(function(){return[0,0]}),u=a?a.split(""):[];if(i&&t<8){var c=u.filter(function(R){return R==="w"||R==="e"}),f=u.filter(function(R){return R==="n"||R==="s"}),h=c[0],d=f[0];l[t]=r;var p=T(ev(e),2),v=p[0],g=p[1],m=v&&g?v/g:0;if(m&&n){var b=(t+4)%8,x=e[b].pos,C=[0,0];a.indexOf("w")>-1?C[0]=-1:a.indexOf("e")>-1&&(C[0]=1),a.indexOf("n")>-1?C[1]=-1:a.indexOf("s")>-1&&(C[1]=1);var S=Xp([v,g],r,m,C,!0),y=v+S[0],w=g+S[1],_=x[1],E=x[1],M=x[0],O=x[0];C[0]===-1?M=O-y:C[0]===1?O=M+y:(M=M-y/2,O=O+y/2),C[1]===-1?_=E-w:(C[1]===1||(_=E-w/2),E=_+w);var A=ha(_,O,E,M);e.forEach(function(R,B){l[B][0]=A[B].pos[0]-R.pos[0],l[B][1]=A[B].pos[1]-R.pos[1]})}else e.forEach(function(R,B){var L=R.direction;L&&(L.indexOf(h)>-1&&(l[B][0]=r[0]),L.indexOf(d)>-1&&(l[B][1]=r[1]))}),h&&(l[1][0]=r[0]/2,l[5][0]=r[0]/2),d&&(l[3][1]=r[1]/2,l[7][1]=r[1]/2)}else a&&!o?u.forEach(function(R){var B=R==="n"||R==="s";e.forEach(function(L,W){var H=L.direction,z=L.horizontal,Y=L.vertical;!H||H.indexOf(R)===-1||(l[W]=[B||!z?0:r[0],!B||!Y?0:r[1]])})}):l[t]=r;return l}function Wx(e,t){var r=T(np(e,t),2),i=r[0],n=r[1],s=t.datas,a=s.clipPath,o=s.clipIndex,l=a,u=l.type,c=l.poses,f=l.splitter,h=c.map(function(b){return b.pos});if(u==="polygon")h.splice(o,0,[i,n]);else if(u==="inset"){var d=Ox.indexOf(o),p=Ix.indexOf(o),v=c.length;if(Lx(c,h,8,d,p,i,n,h[4][0],h[4][1],h[0][0],h[0][1]),v===c.length)return}else return;var g=Xu(e,a,h),m="".concat(u,"(").concat(g.join(f),")");ut(e,"onClip",xt(e,t,D({clipEventType:"added",clipType:u,poses:h,clipStyles:g,clipStyle:m,distX:0,distY:0},ge({clipPath:m},t))))}function Hx(e,t){var r=t.datas,i=r.clipPath,n=r.clipIndex,s=i,a=s.type,o=s.poses,l=s.splitter,u=o.map(function(d){return d.pos}),c=u.length;if(a==="polygon")o.splice(n,1),u.splice(n,1);else if(a==="inset"){if(n<8||(Bx(o,u,n,8,c),c===o.length))return}else return;var f=Xu(e,i,u),h="".concat(a,"(").concat(f.join(l),")");ut(e,"onClip",xt(e,t,D({clipEventType:"removed",clipType:a,poses:u,clipStyles:f,clipStyle:h,distX:0,distY:0},ge({clipPath:h},t))))}var Vx={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(e,t){var r=e.props,i=r.customClipPath,n=r.defaultClipPath,s=r.clipArea,a=r.zoom,o=r.groupable,l=e.getState(),u=l.target,c=l.width,f=l.height,h=l.allMatrix,d=l.is3d,p=l.left,v=l.top,g=l.pos1,m=l.pos2,b=l.pos3,x=l.pos4,C=l.clipPathState,S=l.snapBoundInfos,y=l.rotation;if(!u||o)return[];var w=Ff(u,c,f,n||"inset",C||i);if(!w)return[];var _=d?4:3,E=w.type,M=w.poses,O=M.map(function(I){var F=Nt(h,I.pos,_);return[F[0]-p,F[1]-v]}),A=[],R=[],B=E==="rect",L=E==="inset",W=E==="polygon";if(B||L||W){var H=L?O.slice(0,8):O;R=H.map(function(I,F){var N=F===0?H[H.length-1]:H[F-1],$=Wt(N,I),j=Lp(N,I);return t.createElement("div",{key:"clipLine".concat(F),className:dt("line","clip-line","snap-control"),"data-clip-index":F,style:{width:"".concat(j,"px"),transform:"translate(".concat(N[0],"px, ").concat(N[1],"px) rotate(").concat($,"rad) scaleY(").concat(a,")")}})})}if(A=O.map(function(I,F){return t.createElement("div",{key:"clipControl".concat(F),className:dt("control","clip-control","snap-control"),"data-clip-index":F,style:{transform:"translate(".concat(I[0],"px, ").concat(I[1],"px) rotate(").concat(y,"rad) scale(").concat(a,")")}})}),L&&A.push.apply(A,Q([],T(O.slice(8).map(function(I,F){return t.createElement("div",{key:"clipRadiusControl".concat(F),className:dt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+F,style:{transform:"translate(".concat(I[0],"px, ").concat(I[1],"px) rotate(").concat(y,"rad) scale(").concat(a,")")}})})),!1)),E==="circle"||E==="ellipse"){var z=w.left,Y=w.top,K=w.radiusX,G=w.radiusY,tt=T(pt(Nt(h,[z,Y],_),Nt(h,[0,0],_)),2),nt=tt[0],et=tt[1],st="none";if(!s){for(var Z=Math.max(10,K/5,G/5),lt=[],ft=0;ft<=Z;++ft){var yt=Math.PI*2/Z*ft;lt.push([K+(K-a)*Math.cos(yt),G+(G-a)*Math.sin(yt)])}lt.push([K,-2]),lt.push([-2,-2]),lt.push([-2,G*2+2]),lt.push([K*2+2,G*2+2]),lt.push([K*2+2,-2]),lt.push([K,-2]),st="polygon(".concat(lt.map(function(I){return"".concat(I[0],"px ").concat(I[1],"px")}).join(", "),")")}A.push(t.createElement("div",{key:"clipEllipse",className:dt("clip-ellipse","snap-control"),style:{width:"".concat(K*2,"px"),height:"".concat(G*2,"px"),clipPath:st,transform:"translate(".concat(-p+nt,"px, ").concat(-v+et,"px) ").concat(lo(h))}}))}if(s){var St=Le(Q([g,m,b,x],T(O),!1)),rt=St.width,ct=St.height,k=St.left,P=St.top;if(W||B||L){var lt=L?O.slice(0,8):O;A.push(t.createElement("div",{key:"clipArea",className:dt("clip-area","snap-control"),style:{width:"".concat(rt,"px"),height:"".concat(ct,"px"),transform:"translate(".concat(k,"px, ").concat(P,"px)"),clipPath:"polygon(".concat(lt.map(function(F){return"".concat(F[0]-k,"px ").concat(F[1]-P,"px")}).join(", "),")")}}))}}return S&&["vertical","horizontal"].forEach(function(I){var F=S[I],N=I==="horizontal";F.isSnap&&R.push.apply(R,Q([],T(F.snap.posInfos.map(function($,j){var V=$.pos,q=pt(Nt(h,N?[0,V]:[V,0],_),[p,v]),X=pt(Nt(h,N?[c,V]:[V,f],_),[p,v]);return Fn(t,"",q,X,a,"clip".concat(I,"snap").concat(j),"guideline")})),!1)),F.isBound&&R.push.apply(R,Q([],T(F.bounds.map(function($,j){var V=$.pos,q=pt(Nt(h,N?[0,V]:[V,0],_),[p,v]),X=pt(Nt(h,N?[c,V]:[V,f],_),[p,v]);return Fn(t,"",q,X,a,"clip".concat(I,"bounds").concat(j),"guideline","bounds","bold")})),!1))}),Q(Q([],T(A),!1),T(R),!1)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var r=e.props,i=r.dragWithClip,n=i===void 0?!0:i;return n?!1:this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,D(D({},t),{isDragTarget:!0}))},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var r=e.state,i=e.props,n=i.defaultClipPath,s=i.customClipPath,a=r.target,o=r.width,l=r.height,u=t.inputEvent?t.inputEvent.target:null,c=u&&u.getAttribute("class")||"",f=t.datas,h=Ff(a,o,l,n||"inset",s);if(!h)return!1;var d=h.clipText,p=h.type,v=h.poses,g=ut(e,"onClipStart",xt(e,t,{clipType:p,clipStyle:d,poses:v.map(function(m){return m.pos})}));return g===!1?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,f.clipPath=h,f.isClipStart=!0,r.clipPathState=d,li(e,t),!0)},dragControl:function(e,t){var r,i,n,s=t.datas,a=t.originalDatas,o=t.isDragTarget;if(!s.isClipStart)return!1;var l=s,u=l.isControl,c=l.isLine,f=l.isArea,h=l.clipIndex,d=l.clipPath;if(!d)return!1;var p=ni(e.props,"clippable"),v=p.keepRatio,g=0,m=0,b=a.draggable,x=hr(t);o&&b?(r=T(b.prevBeforeDist,2),g=r[0],m=r[1]):(i=T(x,2),g=i[0],m=i[1]);var C=[g,m],S=e.state,y=S.width,w=S.height,_=!f&&!u&&!c,E=d.type,M=d.poses,O=d.splitter,A=M.map(function(Ot){return Ot.pos});_&&(g=-g,m=-m);var R=!u||M[h].direction==="nesw",B=E==="inset"||E==="rect",L=M.map(function(){return[0,0]});if(u&&!R){var W=M[h],H=W.horizontal,z=W.vertical,Y=[g*U(H),m*U(z)];L=Gx(M,h,Y,B,v)}else R&&(L=A.map(function(){return[g,m]}));var K=A.map(function(Ot,fe){return kt(Ot,L[fe])}),G=Q([],T(K),!1);S.snapBoundInfos=null;var tt=d.type==="circle",nt=d.type==="ellipse";if(tt||nt){var et=Le(K),st=U(et.bottom-et.top),Z=U(nt?et.right-et.left:st),lt=K[0][1]+st,ft=K[0][0]-Z,yt=K[0][0]+Z;tt&&(G.push([yt,et.bottom]),L.push([1,0])),G.push([et.left,lt]),L.push([0,1]),G.push([ft,et.bottom]),L.push([1,0])}var St=Tp((p.clipHorizontalGuidelines||[]).map(function(Ot){return Tt("".concat(Ot),w)}),(p.clipVerticalGuidelines||[]).map(function(Ot){return Tt("".concat(Ot),y)}),y,w),rt=[],ct=[];if(tt||nt)rt=[G[4][0],G[2][0]],ct=[G[1][1],G[3][1]];else if(B){var k=[G[0],G[2],G[4],G[6]],P=[L[0],L[2],L[4],L[6]];rt=k.filter(function(Ot,fe){return P[fe][0]}).map(function(Ot){return Ot[0]}),ct=k.filter(function(Ot,fe){return P[fe][1]}).map(function(Ot){return Ot[1]})}else rt=G.filter(function(Ot,fe){return L[fe][0]}).map(function(Ot){return Ot[0]}),ct=G.filter(function(Ot,fe){return L[fe][1]}).map(function(Ot){return Ot[1]});var I=[0,0],F=Sf(St,p.clipTargetBounds&&{left:0,top:0,right:y,bottom:w},rt,ct,5,5),N=F.horizontal,$=F.vertical,j=N.offset,V=$.offset;if(N.isBound&&(I[1]+=j),$.isBound&&(I[0]+=V),(nt||tt)&&L[0][0]===0&&L[0][1]===0){var et=Le(K),q=et.bottom-et.top,X=nt?et.right-et.left:q,it=$.isBound?U(V):$.snapIndex===0?-V:V,ot=N.isBound?U(j):N.snapIndex===0?-j:j;X-=it,q-=ot,tt&&(q=Cp($,N)>0?q:X,X=q);var at=G[0];G[1][1]=at[1]-q,G[2][0]=at[0]+X,G[3][1]=at[1]+q,G[4][0]=at[0]-X}else if(B&&v&&u){var vt=T(ev(M),2),gt=vt[0],Mt=vt[1],At=gt&&Mt?gt/Mt:0,Ht=M[h],se=Ht.direction||"",tr=G[1][1],lt=G[5][1],ft=G[7][0],yt=G[3][0];U(j)<=U(V)?j=pe(j)*U(V)/At:V=pe(V)*U(j)*At,se.indexOf("w")>-1?ft-=V:se.indexOf("e")>-1?yt-=V:(ft+=V/2,yt-=V/2),se.indexOf("n")>-1?tr-=j:se.indexOf("s")>-1?lt-=j:(tr+=j/2,lt-=j/2);var is=ha(tr,yt,lt,ft);G.forEach(function(fc,Xv){var po;po=T(is[Xv].pos,2),fc[0]=po[0],fc[1]=po[1]})}else G.forEach(function(Ot,fe){var cc=L[fe];cc[0]&&(Ot[0]-=V),cc[1]&&(Ot[1]-=j)});var _r=Xu(e,d,K),ci="".concat(E,"(").concat(_r.join(O),")");if(S.clipPathState=ci,tt||nt)rt=[G[4][0],G[2][0]],ct=[G[1][1],G[3][1]];else if(B){var k=[G[0],G[2],G[4],G[6]];rt=k.map(function(fe){return fe[0]}),ct=k.map(function(fe){return fe[1]})}else rt=G.map(function(Ot){return Ot[0]}),ct=G.map(function(Ot){return Ot[1]});if(S.snapBoundInfos=Sf(St,p.clipTargetBounds&&{left:0,top:0,right:y,bottom:w},rt,ct,1,1),b){var ce=S.is3d,Oe=S.allMatrix,ns=ce?4:3,ho=I;o&&(ho=[C[0]+I[0]-x[0],C[1]+I[1]-x[1]]),b.deltaOffset=Rt(Oe,[ho[0],ho[1],0,0],ns)}return ut(e,"onClip",xt(e,t,D({clipEventType:"changed",clipType:E,poses:K,clipStyle:ci,clipStyles:_r,distX:g,distY:m},ge((n={},n[E==="rect"?"clip":"clipPath"]=ci,n),t)))),!0},dragControlEnd:function(e,t){this.unset(e);var r=t.isDrag,i=t.datas,n=t.isDouble,s=i.isLine,a=i.isClipStart,o=i.isControl;return a?(ut(e,"onClipEnd",Ae(e,t,{})),n&&(o?Hx(e,t):s&&Wx(e,t)),n||r):!1},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},jx={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(e,t){return t.isRequest?t.requestAble==="originDraggable":qt(t.inputEvent.target,dt("origin"))},dragControlStart:function(e,t){var r=t.datas;li(e,t);var i=xt(e,t,{dragStart:de.dragStart(e,new zi().dragStart([0,0],t))}),n=ut(e,"onDragOriginStart",i);return r.startOrigin=e.state.transformOrigin,r.startTargetOrigin=e.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,n===!1?(r.isDragOrigin=!1,!1):i},dragControl:function(e,t){var r=t.datas,i=t.isPinch,n=t.isRequest;if(!r.isDragOrigin)return!1;var s=T(hr(t),2),a=s[0],o=s[1],l=e.state,u=l.width,c=l.height,f=l.offsetMatrix,h=l.targetMatrix,d=l.is3d,p=e.props.originRelative,v=p===void 0?!0:p,g=d?4:3,m=[a,o];if(n){var b=t.distOrigin;(b[0]||b[1])&&(m=b)}var x=kt(r.startOrigin,m),C=kt(r.startTargetOrigin,m),S=pt(m,r.prevOrigin),y=rs(f,h,x,g),w=e.getRect(),_=Le(ui(y,u,c,g)),E=[w.left-_.left,w.top-_.top];r.prevOrigin=m;var M=[$e(C[0],u,v),$e(C[1],c,v)].join(" "),O=de.drag(e,es(t,e.state,E,!!i,!1)),A=xt(e,t,D(D({width:u,height:c,origin:x,dist:m,delta:S,transformOrigin:M,drag:O},ge({transformOrigin:M,transform:O.transform},t)),{afterTransform:O.transform}));return ut(e,"onDragOrigin",A),A},dragControlEnd:function(e,t){var r=t.datas;return r.isDragOrigin?(ut(e,"onDragOriginEnd",Ae(e,t,{})),!0):!1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);return!!r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);return r?(e.transformOrigin=r.transformOrigin,!0):!1},request:function(e){var t={},r=e.getRect(),i=0,n=0,s=r.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(o){return"deltaOrigin"in o?(a[0]+=o.deltaOrigin[0],a[1]+=o.deltaOrigin[1]):"origin"in o?(a[0]=o.origin[0]-s[0],a[1]=o.origin[1]-s[1]):("x"in o?i=o.x-r.left:"deltaX"in o&&(i+=o.deltaX),"y"in o?n=o.y-r.top:"deltaY"in o&&(n+=o.deltaY)),{datas:t,distX:i,distY:n,distOrigin:a}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function $x(e,t,r,i){var n=e.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,s=e.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,a=-1;if(t===0&&(n===0?a=0:n===1&&(a=1)),t===2&&(n<=2?a=2:n<=3&&(a=3)),t===3&&(s===0?a=4:s<4&&(a=7)),t===1&&(s<=1?a=5:s<=2&&(a=6)),!(a===-1||!e[a].virtual)){var o=e[a];Xx(e,a),a<4?o.pos[0]=r:o.pos[1]=i}}function Xx(e,t){t<4?e.slice(0,t+1).forEach(function(r){r.virtual=!1}):(e[0].virtual&&(e[0].virtual=!1),e.slice(4,t+1).forEach(function(r){r.virtual=!1}))}function Ux(e,t){t<4?e.slice(t,4).forEach(function(r){r.virtual=!0}):e.slice(t).forEach(function(r){r.virtual=!0})}function zf(e,t,r,i,n){i===void 0&&(i=[0,0]);var s=[];return!e||e==="0px"?s=[]:s=Fr(e),tv(s,t,r,0,0,i,n)}function Nf(e,t,r,i,n){var s=e.state,a=s.width,o=s.height,l=$u(n,e.props.roundRelative,a,o),u=l.raws,c=l.styles,f=l.radiusPoses,h=Fx(f,u),d=h.horizontals,p=h.verticals,v=c.join(" ");s.borderRadiusState=v;var g=xt(e,t,D({horizontals:d,verticals:p,borderRadius:v,width:a,height:o,delta:i,dist:r},ge({borderRadius:v},t)));return ut(e,"onRound",g),g}function Gf(e){var t,r,i=e.getState().style,n=i.borderRadius||"";if(!n&&e.props.groupable){var s=e.moveables[0],a=e.getTargets()[0];a&&((s==null?void 0:s.props.target)===a?(n=(r=(t=e.moveables[0])===null||t===void 0?void 0:t.state.style.borderRadius)!==null&&r!==void 0?r:"",i.borderRadius=n):(n=Gu(a).borderRadius,i.borderRadius=n))}return n}var Yx={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(e){var t=e.props.roundClickable;return t===!0||t==="line"?dt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(e,t){var r=e.getState(),i=r.target,n=r.width,s=r.height,a=r.allMatrix,o=r.is3d,l=r.left,u=r.top,c=r.borderRadiusState,f=e.props,h=f.minRoundControls,d=h===void 0?[0,0]:h,p=f.maxRoundControls,v=p===void 0?[4,4]:p,g=f.zoom,m=f.roundPadding,b=m===void 0?0:m,x=f.isDisplayShadowRoundControls,C=f.groupable;if(!i)return null;var S=c||Gf(e),y=o?4:3,w=zf(S,n,s,d,!0);if(!w)return null;var _=0,E=0,M=C?[0,0]:[l,u];return w.map(function(O,A){var R=O.horizontal,B=O.vertical,L=O.direction||"",W=Q([],T(O.pos),!1);E+=Math.abs(R),_+=Math.abs(B),R&&L.indexOf("n")>-1&&(W[1]-=b),B&&L.indexOf("w")>-1&&(W[0]-=b),R&&L.indexOf("s")>-1&&(W[1]+=b),B&&L.indexOf("e")>-1&&(W[0]+=b);var H=pt(Nt(a,W,y),M),z=x&&x!=="horizontal",Y=O.vertical?_<=v[1]&&(z||!O.virtual):E<=v[0]&&(x||!O.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(A),className:dt("control","border-radius",O.vertical?"vertical":"",O.virtual?"virtual":""),"data-radius-index":A,style:{display:Y?"block":"none",transform:"translate(".concat(H[0],"px, ").concat(H[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var r=t.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragControlStart:function(e,t){var r=t.inputEvent,i=t.datas,n=r.target,s=n.getAttribute("class")||"",a=s.indexOf("border-radius")>-1,o=s.indexOf("moveable-line")>-1&&s.indexOf("moveable-direction")>-1,l=a?parseInt(n.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var c=n.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!a&&!o)return!1;var f=xt(e,t,{}),h=ut(e,"onRoundStart",f);if(h===!1)return!1;i.lineIndex=u,i.controlIndex=l,i.isControl=a,i.isLine=o,li(e,t);var d=e.props,p=d.roundRelative,v=d.minRoundControls,g=v===void 0?[0,0]:v,m=e.state,b=m.width,x=m.height;i.isRound=!0,i.prevDist=[0,0];var C=Gf(e),S=zf(C||"",b,x,g,!0)||[];return i.controlPoses=S,m.borderRadiusState=$u(S,p,b,x).styles.join(" "),f},dragControl:function(e,t){var r=t.datas,i=r.controlPoses;if(!r.isRound||!r.isControl||!i.length)return!1;var n=r.controlIndex,s=T(hr(t),2),a=s[0],o=s[1],l=[a,o],u=pt(l,r.prevDist),c=e.props.maxRoundControls,f=c===void 0?[4,4]:c,h=e.state,d=h.width,p=h.height,v=i[n],g=v.vertical,m=v.horizontal,b=i.map(function(C){var S=C.horizontal,y=C.vertical,w=[S*m*l[0],y*g*l[1]];if(S){if(f[0]===1)return w;if(f[0]<4&&S!==m)return w}else{if(f[1]===0)return w[1]=y*m*l[0]/d*p,w;if(g){if(f[1]===1)return w;if(f[1]<4&&y!==g)return w}}return[0,0]});b[n]=l;var x=i.map(function(C,S){return D(D({},C),{pos:kt(C.pos,b[S])})});return n<4?x.slice(0,n+1).forEach(function(C){C.virtual=!1}):x.slice(4,n+1).forEach(function(C){C.virtual=!1}),r.prevDist=[a,o],Nf(e,t,l,u,x)},dragControlEnd:function(e,t){var r=e.state;r.borderRadiusState="";var i=t.datas,n=t.isDouble;if(!i.isRound)return!1;var s=i.isControl,a=i.controlIndex,o=i.isLine,l=i.lineIndex,u=i.controlPoses,c=u.filter(function(m){var b=m.virtual;return b}).length,f=e.props.roundClickable,h=f===void 0?!0:f;if(n&&h){if(s&&(h===!0||h==="control"))Ux(u,a);else if(o&&(h===!0||h==="line")){var d=T(np(e,t),2),p=d[0],v=d[1];$x(u,l,p,v)}c!==u.filter(function(m){var b=m.virtual;return b}).length&&Nf(e,t,[0,0],[0,0],u)}var g=Ae(e,t,{});return ut(e,"onRoundEnd",g),r.borderRadiusState="",g},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);if(!r)return!1;var i=e.moveables,n=e.props.targets,s=Je(e,"roundable",t),a=D({targets:e.props.targets,events:s.map(function(o,l){return D(D({},o),{target:n[l],moveable:i[l],currentTarget:i[l]})})},r);return ut(e,"onRoundGroupStart",a),r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);if(!r)return!1;var i=e.moveables,n=e.props.targets,s=Je(e,"roundable",t),a=D({targets:e.props.targets,events:s.map(function(o,l){return D(D(D({},o),{target:n[l],moveable:i[l],currentTarget:i[l]}),ge({borderRadius:r.borderRadius},o))})},r);return ut(e,"onRoundGroup",a),a},dragGroupControlEnd:function(e,t){var r=e.moveables,i=e.props.targets,n=Je(e,"roundable",t);uo(e,"onRound",function(o){var l=D({targets:e.props.targets,events:n.map(function(u,c){return D(D(D({},u),{target:i[c],moveable:r[c],currentTarget:r[c]}),ge({borderRadius:o.borderRadius},u))})},o);ut(e,"onRoundGroup",l)});var s=this.dragControlEnd(e,t);if(!s)return!1;var a=D({targets:e.props.targets,events:n.map(function(o,l){var u;return D(D({},o),{target:i[l],moveable:r[l],currentTarget:r[l],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},s);return ut(e,"onRoundGroupEnd",a),a},unset:function(e){e.state.borderRadiusState=""}};function qx(e,t){var r=t?4:3,i=Bt(r),n="matrix".concat(t?"3d":"","(").concat(i.join(","),")");return e===n||e==="matrix(1,0,0,1,0,0)"}var rv={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(e,t){var r=e.state,i=r.is3d,n=r.targetMatrix,s=r.inlineTransform,a=i?"matrix3d(".concat(n.join(","),")"):"matrix(".concat($d(n,!0),")"),o=!s||s==="none"?a:s;t.datas.startTransforms=qx(o,i)?[]:Fr(o)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return xt(e,t,{setTransform:function(r){t.datas.startTransforms=$t(r)?r:Fr(r)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return xt(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),ut(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){t.datas.startTransforms||this.setTransform(e,t),this.resetStyle(t),ut(e,"onBeforeRender",xt(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t.datas.startTransforms||(this.setTransform(e,t),this.resetStyle(t)),ut(e,"onBeforeRenderEnd",xt(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var r=this;this.dragStart(e,t);var i=Je(e,"beforeRenderable",t),n=e.moveables,s=i.map(function(a,o){var l=n[o];return r.setTransform(l,a),r.resetStyle(a),r.fillDragStartParams(l,a)});ut(e,"onBeforeRenderGroupStart",xt(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:s}))},dragGroup:function(e,t){var r=this;this.drag(e,t);var i=Je(e,"beforeRenderable",t),n=e.moveables,s=i.map(function(a,o){var l=n[o];return r.resetStyle(a),r.fillDragParams(l,a)});ut(e,"onBeforeRenderGroup",xt(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:s}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),ut(e,"onBeforeRenderGroupEnd",xt(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},iv={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(e,t){ut(e,"onRenderStart",xt(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){ut(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){return this.drag(e,t)},dragEnd:function(e,t){ut(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){ut(e,"onRenderGroupStart",xt(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var r=this,i=Je(e,"beforeRenderable",t),n=e.moveables,s=i.map(function(a,o){var l=n[o];return r.fillDragParams(l,a)});ut(e,"onRenderGroup",xt(e,t,D(D({isPinch:!!t.isPinch,targets:e.props.targets,transform:ms(t),transformObject:{}},ge(ys(t))),{events:s})))},dragGroupEnd:function(e,t){var r=this,i=Je(e,"beforeRenderable",t),n=e.moveables,s=i.map(function(a,o){var l=n[o];return r.fillDragEndParams(l,a)});ut(e,"onRenderGroupEnd",xt(e,t,D({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:s,transformObject:{},transform:ms(t)},ge(ys(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){var r={};return Fi(sa(t)||[]).forEach(function(i){r[i.name]=i.functionValue}),xt(e,t,D({isPinch:!!t.isPinch,transformObject:r,transform:ms(t)},ge(ys(t))))},fillDragEndParams:function(e,t){var r={};return Fi(sa(t)||[]).forEach(function(i){r[i.name]=i.functionValue}),xt(e,t,D({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:r,transform:ms(t)},ge(ys(t))))}};function kn(e,t,r,i,n,s,a){s.clientDistX=s.distX,s.clientDistY=s.distY;var o=n==="Start",l=n==="End",u=n==="After",c=e.state.target,f=s.isRequest,h=i.indexOf("Control")>-1;if(!c||o&&h&&!f&&e.areaElement===s.inputEvent.target)return!1;var d=Q([],T(t),!1);if(f){var p=s.requestAble;d.some(function(A){return A.name===p})||d.push.apply(d,Q([],T(e.props.ables.filter(function(A){return A.name===p})),!1))}if(!d.length||d.every(function(A){return A.dragRelation}))return!1;var v=s.inputEvent,g;l&&v&&(g=document.elementFromPoint(s.clientX,s.clientY)||v.target);var m=!1,b=function(){var A;m=!0,(A=s.stop)===null||A===void 0||A.call(s)},x=o&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());x&&e.updateRect(n,!0,!1);var C=s.datas,S=h?"controlGesto":"targetGesto",y=e[S],w=function(A,R,B){if(!(R in A)||y!==e[S])return!1;var L=A.name,W=C[L]||(C[L]={});if(o&&(W.isEventStart=!B||!A[B]||A[B](e,s)),!W.isEventStart)return!1;var H=A[R](e,D(D({},s),{stop:b,datas:W,originalDatas:C,inputTarget:g}));return e._emitter.off(),o&&H===!1&&(W.isEventStart=!1),H};x&&d.forEach(function(A){A.unset&&A.unset(e)}),w(rv,"drag".concat(i).concat(n));var _=0,E=0;r.forEach(function(A){if(m)return!1;var R="".concat(A).concat(i).concat(n),B="".concat(A).concat(i,"Condition");n===""&&!f&&$p(e.state,s);var L=d.filter(function(z){return z[R]});L=L.filter(function(z,Y){return z.name&&L.indexOf(z)===Y});var W=L.filter(function(z){return w(z,R,B)}),H=W.length;m&&++_,H&&++E,!m&&o&&L.length&&!H&&(_+=L.filter(function(z){var Y=z.name,K=C[Y];return K.isEventStart?z.dragRelation!=="strong":!1}).length?1:0)}),(!u||E)&&w(iv,"drag".concat(i).concat(n));var M=y!==e[S]||_===r.length;if((l||m||M)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(A){A.state.gestos={}}),d.forEach(function(A){A.unset&&A.unset(e)})),o&&!M&&!f&&E&&e.props.preventDefault&&(s==null||s.preventDefault()),e.isUnmounted||M)return!1;if(!o&&E&&!a||l){var O=e.props.flushSync||Op;O(function(){e.updateRect(l?n:"",!0,!1),e.forceUpdate()})}return!o&&!l&&!u&&E&&!a&&kn(e,t,r,i,n+"After",s),!0}function Uu(e,t){return function(r,i){var n;i===void 0&&(i=r.inputEvent.target);var s=i,a=e.areaElement,o=e._dragTarget;return!o||!t&&(!((n=e.controlGesto)===null||n===void 0)&&n.isFlag())?!1:s===o||o.contains(s)||s===a||!e.isMoveableElement(s)&&!e.controlBox.contains(s)||qt(s,"moveable-area")||qt(s,"moveable-padding")||qt(s,"moveable-edgeDraggable")}}function nv(e,t,r){var i=e.controlBox,n=[],s=e.props,a=s.dragArea,o=e.state.target,l=s.dragTarget;n.push(i),(!a||l)&&n.push(t),!a&&l&&o&&t!==o&&s.dragTargetSelf&&n.push(o);var u=Uu(e);return av(e,n,"targetAbles",r,{dragStart:u,pinchStart:u})}function sv(e,t){var r=e.controlBox,i=[];i.push(r);var n=Uu(e,!0),s=function(a,o){if(o===void 0&&(o=a.inputEvent.target),o===r)return!0;var l=n(a,o);return!l};return av(e,i,"controlAbles",t,{dragStart:s,pinchStart:s})}function av(e,t,r,i,n){n===void 0&&(n={});var s=r==="targetAbles",a=e.props,o=a.pinchOutside,l=a.pinchThreshold,u=a.preventClickEventOnDrag,c=a.preventClickDefault,f=a.checkInput,h=a.dragFocusedInput,d=a.preventDefault,p=d===void 0?!0:d,v=a.preventRightClick,g=v===void 0?!0:v,m=a.preventWheelClick,b=m===void 0?!0:m,x=a.dragContainer,C=ur(x,!0),S={preventDefault:p,preventRightClick:g,preventWheelClick:b,container:C||Br(e.getControlBoxElement()),pinchThreshold:l,pinchOutside:o,preventClickEventOnDrag:s?u:!1,preventClickEventOnDragStart:s?c:!1,preventClickEventByCondition:s?null:function(_){return e.controlBox.contains(_.target)},checkInput:s?f:!1,dragFocusedInput:h},y=new w1(t,S),w=i==="Control";return["drag","pinch"].forEach(function(_){["Start","","End"].forEach(function(E){y.on("".concat(_).concat(E),function(M){var O,A=M.eventType,R=_==="drag"&&M.isPinch;if(n[A]&&!n[A](M)){M.stop();return}if(!R){var B=_==="drag"?[_]:["drag",_],L=Q([],T(e[r]),!1),W=kn(e,L,B,i,E,M);W?(e.props.stopPropagation||E==="Start"&&w)&&((O=M==null?void 0:M.inputEvent)===null||O===void 0||O.stopPropagation()):M.stop()}})})}),y}var Kx=function(){function e(t,r,i){var n=this;this.target=t,this.moveable=r,this.eventName=i,this.ables=[],this._onEvent=function(s){var a=n.eventName,o=n.moveable;o.state.disableNativeEvent||n.ables.forEach(function(l){l[a](o,{inputEvent:s})})},t.addEventListener(i.toLowerCase(),this._onEvent)}return e.prototype.setAbles=function(t){this.ables=t},e.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e}();function Jx(e,t,r,i){var n;r===void 0&&(r=t);var s=cp(e,t),a=s.matrixes,o=s.is3d,l=s.targetMatrix,u=s.transformOrigin,c=s.targetOrigin,f=s.offsetContainer,h=s.hasFixed,d=s.zoom,p=hb(f,r),v=p.matrixes,g=p.is3d,m=p.offsetContainer,b=p.zoom,x=i||g||o,C=x?4:3,S=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,y=l,w=Bt(C),_=Bt(C),E=Bt(C),M=Bt(C),O=a.length,A=v.map(function(Y){return D(D({},Y),{matrix:Y.matrix?Q([],T(Y.matrix),!1):void 0})}).reverse();a.reverse(),!o&&x&&(y=Qe(y,3,4),Pl(a)),!g&&x&&Pl(A),A.forEach(function(Y){_=Rt(_,Y.matrix,C)});var R=r||Gr(e),B=((n=A[0])===null||n===void 0?void 0:n.target)||zn(R,R,!0).offsetParent,L=A.slice(1).reduce(function(Y,K){return Rt(Y,K.matrix,C)},Bt(C));a.forEach(function(Y,K){if(O-2===K&&(E=w.slice()),O-1===K&&(M=w.slice()),!Y.matrix){var G=a[K+1],tt=vx(Y,G,B,C,Rt(L,w,C));Y.matrix=ri(tt,C)}w=Rt(w,Y.matrix,C)});var W=!S&&o;y||(y=Bt(W?4:3));var H=lo(S&&y.length===16?Qe(y,4,3):y,W),z=_;return _=Vd(_,C,C),{hasZoom:d!==1||b!==1,hasFixed:h,matrixes:a,rootMatrix:_,originalRootMatrix:z,beforeMatrix:E,offsetMatrix:M,allMatrix:w,targetMatrix:y,targetTransform:H,inlineTransform:e.style.transform,transformOrigin:u,targetOrigin:c,is3d:x,offsetContainer:f,offsetRootContainer:m}}function Zx(e,t,r,i){r===void 0&&(r=t);var n=0,s=0,a=0,o={},l=Fp(e);if(e&&(n=l.offsetWidth,s=l.offsetHeight),e){var u=Jx(e,t,r,i),c=Pi(u.allMatrix,u.transformOrigin,n,s);o=D(D({},u),c);var f=Pi(u.allMatrix,[50,50],100,100);a=zp([f.pos1,f.pos2],f.direction)}var h=i?4:3;return D(D(D({hasZoom:!1,width:n,height:s,rotation:a},l),{originalRootMatrix:Bt(h),rootMatrix:Bt(h),beforeMatrix:Bt(h),offsetMatrix:Bt(h),allMatrix:Bt(h),targetMatrix:Bt(h),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!i,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function Al(e,t,r,i,n,s){s===void 0&&(s=[]);var a=1,o=[0,0],l=xs(),u=xs(),c=xs(),f=xs(),h=[0,0],d={},p=Zx(t,r,n,!0);if(t){var v=Me(t);s.forEach(function(A){d[A]=v(A)});var g=p.is3d?4:3,m=Pi(p.offsetMatrix,kt(p.transformOrigin,jd(p.targetMatrix,g)),p.width,p.height);a=m.direction,o=kt(m.origin,[m.left-p.left,m.top-p.top]),f=En(p.offsetRootContainer);var b=zn(i,i,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var x=Pi(Rt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),C=Pi(p.originalRootMatrix,ua(Me(b)("transformOrigin")).map(function(A){return parseFloat(A)}),b.offsetWidth,b.offsetHeight);if(l=zo(x,f),c=zo(C,f,b,!0),e){var S=x.left,y=x.top;u=zo({left:S,top:y,bottom:y,right:y},f)}}else{l=En(t),c=fb(b),e&&(u=En(e));var w=c.left,_=c.top,E=c.clientLeft,M=c.clientTop,O=[l.left-w,l.top-_];h=pt(Wi(p.rootMatrix,O,4),[E+p.left,M+p.top])}}return D({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:f,beforeDirection:a,beforeOrigin:o,originalBeforeOrigin:o,target:t,style:d,offsetDelta:h},p)}function Wf(e){var t=e.pos1,r=e.pos2,i=e.pos3,n=e.pos4;if(!t||!r||!i||!n)return null;var s=ii([t,r,i,n]),a=[s.minX,s.minY],o=pt(e.origin,a);return t=pt(t,a),r=pt(r,a),i=pt(i,a),n=pt(n,a),D(D({},e),{left:e.left,top:e.top,posDelta:a,pos1:t,pos2:r,pos3:i,pos4:n,origin:o,beforeOrigin:o,isPersisted:!0})}var Hi=function(e){Qn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state=D({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Al(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new to,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var i=r.props.parentMoveable;if(i){i.checkUpdateRect();return}dy(r._observerId),r._observerId=yd(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(i){i.stopPropagation(),i.preventDefault()},r}return t.prototype.render=function(){var r=this.props,i=this.getState(),n=r.parentPosition,s=r.className,a=r.target,o=r.zoom,l=r.cspNonce,u=r.translateZ,c=r.cssStyled,f=r.groupable,h=r.linePadding,d=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=T(n||[0,0],2),v=p[0],g=p[1],m=i.left,b=i.top,x=i.target,C=i.direction,S=i.hasFixed,y=i.offsetDelta,w=r.targets,_=this.isDragging(),E={};this.getEnabledAbles().forEach(function(L){E["data-able-".concat(L.name.toLowerCase())]=!0});var M=this._getAbleClassName(),O=w&&w.length&&(x||f)||a||!this._hasFirstTarget&&this.state.isPersisted,A=this.controlBox||this.props.firstRenderState||this.props.persistData,R=[m-v,b-g];!f&&r.useAccuratePosition&&(R[0]+=y[0],R[1]+=y[1]);var B={position:S?"fixed":"absolute",display:O?"block":"none",visibility:A?"visible":"hidden",transform:"translate3d(".concat(R[0],"px, ").concat(R[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return h&&(B["--moveable-line-padding"]=h),d&&(B["--moveable-control-padding"]=d),Ke(c,D({cspNonce:l,ref:mr(this,"controlBox"),className:"".concat(dt("control-box",C===-1?"reverse":"",_?"dragging":"")," ").concat(M," ").concat(s)},E,{onClick:this._onPreventClick,style:B}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,i=r.parentMoveable,n=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!n&&!i&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},t.prototype.componentWillUnmount=function(){var r,i;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(i=this._mutationObserver)===null||i===void 0||i.disconnect();var n=this._viewContainer;n&&this._changeAbleViewClassNames([]),Si(this,!1),Si(this,!0);var s=this.events;for(var a in s){var o=s[a];o&&o.destroy()}},t.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},t.prototype.getAble=function(r){var i=this.props.ables||[];return ke(i,function(n){return n.name===r})},t.prototype.getContainer=function(){var r=this.props,i=r.parentMoveable,n=r.wrapperMoveable,s=r.container;return s||n&&n.getContainer()||i&&i.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(r){var i;return r&&(((i=r.getAttribute)===null||i===void 0?void 0:i.call(r,"class"))||"").indexOf(Pu)>-1},t.prototype.dragStart=function(r,i){i===void 0&&(i=r.target);var n=this.targetGesto,s=this.controlGesto;return n&&Uu(this)({inputEvent:r},i)?n.isFlag()||n.triggerDragStart(r):s&&this.isMoveableElement(i)&&(s.isFlag()||s.triggerDragStart(r)),this},t.prototype.hitTest=function(r){var i=this.state,n=i.target,s=i.pos1,a=i.pos2,o=i.pos3,l=i.pos4,u=i.targetClientRect;if(!n)return 0;var c;if(Yi(r)){var f=r.getBoundingClientRect();c={left:f.left,top:f.top,width:f.width,height:f.height}}else c=D({width:0,height:0},r);var h=c.left,d=c.top,p=c.width,v=c.height,g=cf([s,a,l,o],u),m=m1(g,[[h,d],[h+p,d],[h+p,d+v],[h,d+v]]),b=Yd(g);return!m||!b?0:Math.min(100,m/b*100)},t.prototype.isInside=function(r,i){var n=this.state,s=n.target,a=n.pos1,o=n.pos2,l=n.pos3,u=n.pos4,c=n.targetClientRect;return s?vl([r,i],cf([a,o,u,l],c)):!1},t.prototype.updateRect=function(r,i,n){n===void 0&&(n=!0);var s=this.props,a=!s.parentPosition&&!s.wrapperMoveable;a&&Ni(!0);var o=s.parentMoveable,l=this.state,u=l.target||s.target,c=this.getContainer(),f=o?o._rootContainer:this._rootContainer,h=Al(this.controlBox,u,c,c,f||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&s.persistData){var d=Wf(s.persistData);for(var p in d)h[p]=d[p]}a&&Ni(),this.updateState(h,o?!1:n)},t.prototype.isDragging=function(r){var i,n,s=this.targetGesto,a=this.controlGesto;if(s!=null&&s.isFlag()){if(!r)return!0;var o=s.getEventData();return!!(!((i=o[r])===null||i===void 0)&&i.isEventStart)}if(a!=null&&a.isFlag()){if(!r)return!0;var o=a.getEventData();return!!(!((n=o[r])===null||n===void 0)&&n.isEventStart)}return!1},t.prototype.updateTarget=function(r){this.updateRect(r,!0)},t.prototype.getRect=function(){var r=this.state,i=ze(this.state),n=T(i,4),s=n[0],a=n[1],o=n[2],l=n[3],u=Le(i),c=r.width,f=r.height,h=u.width,d=u.height,p=u.left,v=u.top,g=[r.left,r.top],m=kt(g,r.origin),b=kt(g,r.beforeOrigin),x=r.transformOrigin;return{width:h,height:d,left:p,top:v,pos1:s,pos2:a,pos3:o,pos4:l,offsetWidth:c,offsetHeight:f,beforeOrigin:b,origin:m,transformOrigin:x,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(r){if(!r||r==="target"){var i=this.targetGesto;(i==null?void 0:i.isIdle())===!1&&Dl(this,!1),i==null||i.stop()}if(!r||r==="control"){var i=this.controlGesto;(i==null?void 0:i.isIdle())===!1&&Dl(this,!0),i==null||i.stop()}},t.prototype.getRotation=function(){var r=this.state,i=r.pos1,n=r.pos2,s=r.direction;return Sx(i,n,s)},t.prototype.request=function(r,i,n){i===void 0&&(i={});var s=this,a=s.props,o=a.parentMoveable||a.wrapperMoveable||s,l=o.props.ables,u=a.groupable,c=ke(l,function(m){return m.name===r});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var f=c.request(s),h=n||i.isInstant,d=f.isControl?"controlAbles":"targetAbles",p="".concat(u?"Group":"").concat(f.isControl?"Control":""),v=Q([],T(o[d]),!1),g={request:function(m){return kn(s,v,["drag"],p,"",D(D({},f.request(m)),{requestAble:r,isRequest:!0}),h),g},requestEnd:function(){return kn(s,v,["drag"],p,"End",D(D({},f.requestEnd()),{requestAble:r,isRequest:!0}),h),g}};return kn(s,v,["drag"],p,"Start",D(D({},f.requestStart(i)),{requestAble:r,isRequest:!0}),h),h?g.request(i).requestEnd():g},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var r=this.getState(),i=this.props,n=i.padding,s=r.originalBeforeOrigin,a=r.transformOrigin,o=r.allMatrix,l=r.is3d,u=r.pos1,c=r.pos2,f=r.pos3,h=r.pos4,d=r.left,p=r.top,v=r.isPersisted,g=i.zoom||1;if(!n&&g<=1){r.renderPoses=[u,c,f,h],r.renderLines=[[u,c],[c,h],[h,f],[f,u]];return}var m=qp(n||{}),b=m.left,x=m.top,C=m.bottom,S=m.right,y=l?4:3,w=[];v?w=a:this.controlBox&&i.groupable?w=s:w=kt(s,[d,p]);var _=ia(y,ri(w.map(function(B){return-B}),y),o,ri(a,y)),E=Ie(_,u,[-b,-x],y),M=Ie(_,c,[S,-x],y),O=Ie(_,f,[-b,C],y),A=Ie(_,h,[S,C],y);if(r.renderPoses=[E,M,O,A],r.renderLines=[[E,M],[M,A],[A,O],[O,E]],g){var R=g/2;r.renderLines=[[Ie(_,u,[-b-R,-x],y),Ie(_,c,[S+R,-x],y)],[Ie(_,c,[S,-x-R],y),Ie(_,h,[S,C+R],y)],[Ie(_,h,[S+R,C],y),Ie(_,f,[-b-R,C],y)],[Ie(_,f,[-b,C+R],y),Ie(_,u,[-b,-x-R],y)]]}},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,i=r.target,n=r.container,s=r.parentMoveable,a=this.state,o=a.target,l=a.container;if(!(!o&&!i)){this.updateAbles();var u=!Tl(o,i),c=u||!Tl(l,n);if(c){var f=n||this.controlBox;f&&this.unsetAbles(),this.updateState({target:i,container:n}),!s&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(r,i){var n=this.props;if(this._emitter.trigger(r,i),n.parentMoveable&&i.isRequest&&!i.isRequestChild)return n.parentMoveable.triggerEvent(r,i,!0);var s=n[r];return s&&s(i)},t.prototype.useCSS=function(r,i){var n=this.props.customStyledMap,s=r+i;return n[s]||(n[s]=Jd(r,i)),n[s]},t.prototype.getState=function(){var r,i=this.props;(i.target||!((r=i.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var n=this.controlBox,s=i.persistData,a=i.firstRenderState;if(a&&!n)return a;if(!this._hasFirstTarget&&s){var o=Wf(s);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(i){i.unset&&i.unset(r)})},t.prototype.updateAbles=function(r,i){r===void 0&&(r=this.props.ables),i===void 0&&(i="");var n=this.props,s=n.triggerAblesSimultaneously,a=this.getEnabledAbles(r),o="drag".concat(i,"Start"),l="pinch".concat(i,"Start"),u="drag".concat(i,"ControlStart"),c=Ss(a,[o,l],s),f=Ss(a,[u],s);this.enabledAbles=a,this.targetAbles=c,this.controlAbles=f},t.prototype.updateState=function(r,i){if(i){if(this.isUnmounted)return;this.setState(r)}else{var n=this.state;for(var s in r)n[s]=r[s]}},t.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var i=this.props;return r.filter(function(n){return n&&(n.always&&i[n.name]!==!1||i[n.name])})},t.prototype.renderAbles=function(){var r=this,i=this.props,n=i.triggerAblesSimultaneously,s={createElement:Ke};return this.renderState={},yx(jp(Ss(this.getEnabledAbles(),["render"],n).map(function(a){var o=a.render;return o(r,s)||[]})).filter(function(a){return a}),function(a){var o=a.key;return o}).map(function(a){return a[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(i,n){var s,a,o=(a=(s=n.requestStyle)===null||s===void 0?void 0:s.call(n))!==null&&a!==void 0?a:[];return Q(Q([],T(i),!1),T(o),!1)},Q([],T(this.props.requestStyles||[]),!1));return r},t.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},t.prototype._updateEvents=function(){var r=this.targetAbles.length,i=this.controlAbles.length,n=this._dragTarget,s=!r&&this.targetGesto||this._isTargetChanged(!0);s&&(Si(this,!1),this.updateState({gestos:{}})),i||Si(this,!0),n&&r&&!this.targetGesto&&(this.targetGesto=nv(this,n,"")),!this.controlGesto&&i&&(this.controlGesto=sv(this,"Control"))},t.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=ur(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var r=this.props,i=r,n=i.zoom,s=i.hideDefaultLines,a=i.hideChildMoveableDefaultLines,o=i.parentMoveable;if(s||o&&a)return[];var l=this.getState(),u={createElement:Ke};return l.renderLines.map(function(c,f){return Fn(u,"",c[0],c[1],n,"render-line-".concat(f))})},t.prototype._isTargetChanged=function(r){var i=this.props,n=i.dragTarget||i.target,s=this._prevOriginalDragTarget,a=this._prevDragArea,o=i.dragArea,l=!o&&s!==n,u=(r||o)&&a!==o;return l||u||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var r=this,i=this.props,n=i.dragArea?this.areaElement:this.state.target,s=this.events,a=Sr(s);if(this._isTargetChanged())for(var o in s){var l=s[o];l&&l.destroy(),s[o]=null}if(n){var u=this.enabledAbles;a.forEach(function(c){var f=Ss(u,[c]),h=f.length>0,d=s[c];if(!h){d&&(d.destroy(),s[c]=null);return}d||(d=new Kx(n,r,c),s[c]=d),d.setAbles(f)})}},t.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=ur(r,!0))},t.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=ur(r,!0));var i=this._viewContainer;i&&this._changeAbleViewClassNames(Q(Q([],T(this._getAbleViewClassNames()),!1),[this.isDragging()?Px:""],!1))},t.prototype._changeAbleViewClassNames=function(r){var i=this._viewContainer,n=Vp(r.filter(Boolean),function(u){return u}).map(function(u){var c=T(u,1),f=c[0];return f}),s=this._viewClassNames,a=Yn(s,n),o=a.removed,l=a.added;o.forEach(function(u){wd(i,s[u])}),l.forEach(function(u){Cd(i,n[u])}),this._viewClassNames=n},t.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(i){var n;return((n=i.viewClassName)===null||n===void 0?void 0:n.call(i,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(r){var i=this;r===void 0&&(r="");var n=this.getEnabledAbles(),s=this.targetGesto,a=this.controlGesto,o=s!=null&&s.isFlag()?s.getEventData():{},l=a!=null&&a.isFlag()?a.getEventData():{};return n.map(function(u){var c,f,h,d=u.name,p=((c=u.className)===null||c===void 0?void 0:c.call(u,i))||"";return(!((f=o[d])===null||f===void 0)&&f.isEventStart||!((h=l[d])===null||h===void 0)&&h.isEventStart)&&(p+=" ".concat(dt("".concat(d).concat(r,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(r){var i,n=this.props,s=n.target,a=Br(this.getControlBoxElement());if(!a.ResizeObserver||!s||!n.useResizeObserver){(i=this._reiszeObserver)===null||i===void 0||i.disconnect();return}if(!(r.target===s&&this._reiszeObserver)){var o=new a.ResizeObserver(this.checkUpdateRect);o.observe(s,{box:"border-box"}),this._reiszeObserver=o}},t.prototype._updateMutationObserver=function(r){var i=this,n,s=this.props,a=s.target,o=Br(this.getControlBoxElement());if(!o.MutationObserver||!a||!s.useMutationObserver){(n=this._mutationObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===a&&this._mutationObserver)){var l=new o.MutationObserver(function(u){var c,f;try{for(var h=I1(u),d=h.next();!d.done;d=h.next()){var p=d.value;p.type==="attributes"&&p.attributeName==="style"&&i.checkUpdateRect()}}catch(v){c={error:v}}finally{try{d&&!d.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}});l.observe(a,{attributes:!0}),this._mutationObserver=l}},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Op,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t}(Td),Yu={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(e,t){var r,i=e.props,n=i.targets||[],s=e.getState(),a=s.left,o=s.top,l=s.isPersisted,u=i.zoom||1,c=e.renderGroupRects,f=((r=i.persistData)===null||r===void 0?void 0:r.children)||[];l?n=f.map(function(){return null}):f=[];var h=Ci(e,"parentPosition",[a,o],function(p){return p.join(",")}),d=Ci(e,"requestStyles",e.getRequestChildStyles(),function(p){return p.join(",")});return e.moveables=e.moveables.slice(0,n.length),Q(Q([],T(n.map(function(p,v){return t.createElement(Hi,{key:"moveable"+v,ref:pd(e,"moveables",v),target:p,origin:!1,requestStyles:d,cssStyled:i.cssStyled,customStyledMap:i.customStyledMap,useResizeObserver:i.useResizeObserver,useMutationObserver:i.useMutationObserver,hideChildMoveableDefaultLines:i.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:[a,o],persistData:f[v],zoom:u})})),!1),T(jp(c.map(function(p,v){var g=p.pos1,m=p.pos2,b=p.pos3,x=p.pos4,C=[g,m,b,x];return[[0,1],[1,3],[3,2],[2,0]].map(function(S,y){var w=T(S,2),_=w[0],E=w[1];return Fn(t,"",pt(C[_],h),pt(C[E],h),u,"group-rect-".concat(v,"-").concat(y))})}))),!1)}},Qx=ts("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var r=e.props.target,i=t.inputEvent,n=t.inputTarget,s=e.isMoveableElement(n),a=!s&&e.controlBox.contains(n);if(!(!i||!n||t.isDrag||e.isMoveableElement(n)||a)){var o=r.contains(n);ut(e,"onClick",xt(e,t,{isDouble:t.isDouble,inputTarget:n,isTarget:r===n,moveableTarget:e.props.target,containsTarget:o}))}},dragGroupEnd:function(e,t){var r=t.inputEvent,i=t.inputTarget;if(!(!r||!i||t.isDrag||e.isMoveableElement(i)||t.datas.inputTarget===i)){var n=e.props.targets,s=n.indexOf(i),a=s>-1,o=!1;s===-1&&(s=xr(n,function(l){return l.contains(i)}),o=s>-1),ut(e,"onClickGroup",xt(e,t,{isDouble:t.isDouble,targets:n,inputTarget:i,targetIndex:s,isTarget:a,containsTarget:o,moveableTarget:n[s]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}});function fi(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),D(D({},e),{datas:t})}var tS=ts("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(e,t){var r=e.props,i=r.edgeDraggable;return i?dp(t,"edgeDraggable",i,e.getState().renderPoses,r.zoom):[]},dragCondition:function(e,t){var r,i=e.props,n=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!i.edgeDraggable||!n?!1:!i.draggable&&qt(n,dt("direction"))&&qt(n,dt("edge"))&&qt(n,dt("edgeDraggable"))},dragStart:function(e,t){return de.dragStart(e,fi(t))},drag:function(e,t){return de.drag(e,fi(t))},dragEnd:function(e,t){return de.dragEnd(e,fi(t))},dragGroupCondition:function(e,t){var r,i=e.props,n=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!i.edgeDraggable||!n?!1:!i.draggable&&qt(n,dt("direction"))&&qt(n,dt("line"))},dragGroupStart:function(e,t){return de.dragGroupStart(e,fi(t))},dragGroup:function(e,t){return de.dragGroup(e,fi(t))},dragGroupEnd:function(e,t){return de.dragGroupEnd(e,fi(t))},unset:function(e){return de.unset(e)}}),ov={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},qu=[rv,Zp,sx,wx,de,tS,El,_x,kx,Wb,Rx,Ax,Dx,jx,Vx,Yx,Yu,ov,Qx,Jp,iv],eS=qu.reduce(function(e,t){return(t.events||[]).forEach(function(r){Sd(e,r)}),e},[]),rS=qu.reduce(function(e,t){return(t.props||[]).forEach(function(r){Sd(e,r)}),e},[]);function Hf(e,t){var r=T(e,3),i=r[0],n=r[1],s=r[2];return(i*t[0]+n*t[1]+s)/Math.sqrt(i*i+n*n)}function _s(e,t){var r=T(e,2),i=r[0],n=r[1];return-i*t[0]-n*t[1]}function Vf(e,t){return Math.max.apply(Math,Q([],T(e.map(function(r){var i=T(r,4),n=i[0],s=i[1],a=i[2],o=i[3];return Math.max(n[t],s[t],a[t],o[t])})),!1))}function jf(e,t){return Math.min.apply(Math,Q([],T(e.map(function(r){var i=T(r,4),n=i[0],s=i[1],a=i[2],o=i[3];return Math.min(n[t],s[t],a[t],o[t])})),!1))}function iS(e,t){var r,i,n,s=[0,0],a=[0,0],o=[0,0],l=[0,0],u=0,c=0;if(!e.length)return{pos1:s,pos2:a,pos3:o,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:t};var f=mt(t,me);if(f%90){var h=f/180*Math.PI,d=Math.tan(h),p=-1/d,v=[Sl,df],g=[[0,0],[0,0]],m=[Sl,df],b=[[0,0],[0,0]];e.forEach(function(nt){nt.forEach(function(et){var st=Hf([-d,1,0],et),Z=Hf([-p,1,0],et);v[0]>st&&(g[0]=et,v[0]=st),v[1]<st&&(g[1]=et,v[1]=st),m[0]>Z&&(b[0]=et,m[0]=Z),m[1]<Z&&(b[1]=et,m[1]=Z)})});var x=T(g,2),C=x[0],S=x[1],y=T(b,2),w=y[0],_=y[1],E=[-d,1,_s([-d,1],C)],M=[-d,1,_s([-d,1],S)],O=[-p,1,_s([-p,1],w)],A=[-p,1,_s([-p,1],_)];r=T([[E,O],[E,A],[M,O],[M,A]].map(function(nt){var et=T(nt,2),st=et[0],Z=et[1];return ku(st,Z)[0]}),4),s=r[0],a=r[1],o=r[2],l=r[3],u=m[1]-m[0],c=v[1]-v[0]}else{var R=jf(e,0),B=jf(e,1),L=Vf(e,0),W=Vf(e,1);if(s=[R,B],a=[L,B],o=[R,W],l=[L,W],u=L-R,c=W-B,f%180){var H=[o,s,l,a];i=T(H,4),s=i[0],a=i[1],o=i[2],l=i[3],u=W-B,c=L-R}}if(f%360>180){var H=[l,o,a,s];n=T(H,4),s=n[0],a=n[1],o=n[2],l=n[3]}var z=ii([s,a,o,l]),Y=z.minX,K=z.minY,G=z.maxX,tt=z.maxY;return{pos1:s,pos2:a,pos3:o,pos4:l,width:u,height:c,minX:Y,minY:K,maxX:G,maxY:tt,rotation:t}}function lv(e,t){var r=t.map(function(i){if($t(i)){var n=lv(e,i),s=n.length;return s>1?n:s===1?n[0]:null}else{var a=ke(e,function(o){var l=o.manager;return l.props.target===i});return a?(a.finded=!0,a.manager):null}}).filter(Boolean);return r.length===1&&$t(r[0])?r[0]:r}var nS=function(e){Qn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.differ=new Ud,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,i,n){var s;n===void 0&&(n=!0);var a=this.state;if(!this.controlBox||a.isPersisted)return;Ni(!0),this.moveables.forEach(function(ft){ft.updateRect(r,!1,!1)});var o=this.props,l=this.moveables,u=a.target||o.target,c=l.map(function(ft){return{finded:!1,manager:ft}}),f=this.props.targetGroups||[],h=lv(c,f),d=o.useDefaultGroupRotate;h.push.apply(h,Q([],T(c.filter(function(ft){var yt=ft.finded;return!yt}).map(function(ft){var yt=ft.manager;return yt})),!1));var p=[],v=!i||r!==""&&o.updateGroup,g=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(s=o.persistData)===null||s===void 0?void 0:s.rotation;m!=null&&(g=m)}function b(ft,yt,St){var rt=ft.map(function($){if($t($)){var j=b($,yt),V=[j.pos1,j.pos2,j.pos3,j.pos4];return p.push(j),{poses:V,rotation:j.rotation}}else return{poses:ze($.state),rotation:$.getRotation()}}),ct=rt.map(function($){var j=$.rotation;return j}),k=0,P=ct[0],I=ct.every(function($){return Math.abs(P-$)<.1});v?k=!d&&I?P:g:k=!d&&!St&&I?P:yt;var F=rt.map(function($){var j=$.poses;return j}),N=iS(F,k);return N}var x=b(h,this.rotation,!0);v&&(this.rotation=x.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=p;var C=this.transformOrigin,S=this.rotation,y=this.scale,w=x.width,_=x.height,E=x.minX,M=x.minY,O=Cx([[0,0],[w,0],[0,_],[w,_]],ju(C,w,_),this.rotation/180*Math.PI),A=ii(O.result),R=A.minX,B=A.minY,L=" rotate(".concat(S,"deg)")+" scale(".concat(pe(y[0]),", ").concat(pe(y[1]),")"),W="translate(".concat(-R,"px, ").concat(-B,"px)").concat(L);this.controlBox.style.transform="translate3d(".concat(E,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(C,";")+"width:".concat(w,"px;height:").concat(_,"px;")+"transform: ".concat(W),a.width=w,a.height=_;var H=this.getContainer(),z=Al(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||H,[]),Y=[z.left,z.top],K=T(ze(z),4),G=K[0],tt=K[1],nt=K[2],et=K[3],st=ii([G,tt,nt,et]),Z=[st.minX,st.minY],lt=pe(y[0]*y[1]);z.pos1=pt(G,Z),z.pos2=pt(tt,Z),z.pos3=pt(nt,Z),z.pos4=pt(et,Z),z.left=E-z.left+Z[0],z.top=M-z.top+Z[1],z.origin=pt(kt(Y,z.origin),Z),z.beforeOrigin=pt(kt(Y,z.beforeOrigin),Z),z.originalBeforeOrigin=kt(Y,z.originalBeforeOrigin),z.transformOrigin=pt(kt(Y,z.transformOrigin),Z),u.style.transform="translate(".concat(-R-Z[0],"px, ").concat(-B-Z[1],"px)")+L,Ni(),this.updateState(D(D({},z),{posDelta:Z,direction:lt,beforeDirection:lt}),n)},t.prototype.getRect=function(){return D(D({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.triggerEvent=function(r,i,n){if(n||r.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,r,i);this._emitter.trigger(r,i)},t.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(i,n){var s,a,o=(a=(s=n.requestChildStyle)===null||s===void 0?void 0:s.call(n))!==null&&a!==void 0?a:[];return Q(Q([],T(i),!1),T(o),!1)},[]);return r},t.prototype.getMoveables=function(){return Q([],T(this.moveables),!1)},t.prototype.updateAbles=function(){e.prototype.updateAbles.call(this,Q(Q([],T(this.props.ables),!1),[Yu],!1),"Group")},t.prototype._updateTargets=function(){e.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=ur(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var r=this.state,i=this.props,n=this._prevDragTarget,s=i.dragTarget||this.areaElement,a=i.targets,o=this.differ.update(a),l=o.added,u=o.changed,c=o.removed,f=l.length||c.length;(f||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Si(this,!1),Si(this,!0),this.updateState({gestos:{}})),n!==s&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=nv(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=sv(this,"GroupControl")));var h=!Tl(r.container,i.container);h&&(r.container=i.container),(h||f||this.transformOrigin!==(i.defaultGroupOrigin||"50% 50%")||u.length||a.length&&!Yp(this._targetGroups,i.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},t.prototype._updateObserver=function(){},t.defaultProps=D(D({},Hi.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(Hi),sS=function(e){Qn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.moveables=[],r}return t.prototype.render=function(){var r=this,i,n=this.props,s=n.cspNonce,a=n.cssStyled,o=n.persistData,l=n.targets||[],u=l.length,c=this.isUnmounted||!u,f=(i=o==null?void 0:o.children)!==null&&i!==void 0?i:[];return c&&!u&&f.length?l=f.map(function(){return null}):c||(f=[]),Ke(a,{cspNonce:s,ref:mr(this,"controlBox"),className:dt("control-box")},l.map(function(h,d){var p,v,g=(v=(p=n.individualGroupableProps)===null||p===void 0?void 0:p.call(n,h,d))!==null&&v!==void 0?v:{};return Ke(Hi,D({key:"moveable"+d,ref:pd(r,"moveables",d)},n,g,{target:h,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[d]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,i,n){n===void 0&&(n=!0),Ni(!0),this.moveables.forEach(function(s){s.updateRect(r,i,n)}),Ni()},t.prototype.getRect=function(){return D(D({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.request=function(r,i,n){i===void 0&&(i={});var s=this.moveables.map(function(l){return l.request(r,D(D({},i),{isInstant:!1}),!1)}),a=n||i.isInstant,o={request:function(l){return s.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return s.forEach(function(l){return l.requestEnd()}),this}};return a?o.request(i).requestEnd():o},t.prototype.dragStart=function(r,i){i===void 0&&(i=r.target);var n=i,s=ke(this.moveables,function(a){var o=a.getTargets()[0],l=a.getControlBoxElement(),u=a.getDragElement();return!o||!u?!1:u===n||u.contains(n)||u!==o&&o===n||o.contains(n)||l===n||l.contains(n)});return s&&s.dragStart(r,i),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return Q([],T(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t}(Hi);function uv(e,t){var r=[];return e.forEach(function(i){if(i){if(Ee(i)){t[i]&&r.push.apply(r,Q([],T(t[i]),!1));return}$t(i)?r.push.apply(r,Q([],T(uv(i,t)),!1)):r.push(i)}}),r}function cv(e,t){var r=[];return e.forEach(function(i){if(i){if(Ee(i)){t[i]&&r.push.apply(r,Q([],T(t[i]),!1));return}$t(i)?r.push(cv(i,t)):r.push(i)}}),r}function fv(e,t){return e.length!==t.length||e.some(function(r,i){var n=t[i];return!r&&!n?!1:r!=n?$t(r)&&$t(n)?fv(r,n):!0:!1})}var aS=function(e){Qn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new Ud,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return t.makeStyled=function(){var r={},i=this.getTotalAbles();i.forEach(function(s){var a=s.css;a&&a.forEach(function(o){r[o]=!0})});var n=Sr(r).join(`
`);this.defaultStyled=Jd("div",ey(Pu,$1+n))},t.getTotalAbles=function(){return Q([Zp,Yu,ov,Jp],T(this.defaultAbles),!1)},t.prototype.render=function(){var r,i=this.constructor;i.defaultStyled||i.makeStyled();var n=this.props,s=n.ables,a=n.props,o=A1(n,["ables","props"]),l=T(this._updateRefs(!0),2),u=l[0],c=l[1],f=uv(u,c),h=f.length>1,d=i.getTotalAbles(),p=Q(Q([],T(d),!1),T(s||[]),!1),v=D(D(D({},o),a||{}),{ables:p,cssStyled:i.defaultStyled,customStyledMap:i.customStyledMap});this._elementTargets=f;var g=null,m=this.moveable,b=o.persistData;if(b!=null&&b.children&&(h=!0),o.individualGroupable)return Ke(sS,D({key:"individual-group",ref:mr(this,"moveable")},v,{target:null,targets:f}));if(h){var x=cv(u,c);if(m&&!m.props.groupable&&!m.props.individualGroupable){var C=m.props.target;C&&f.indexOf(C)>-1&&(g=D({},m.state))}return Ke(nS,D({key:"group",ref:mr(this,"moveable")},v,(r=o.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:f,targetGroups:x,firstRenderState:g}))}else{var S=f[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var y=m.moveables||[],w=ke(y,function(_){return _.props.target===S});w&&(g=D({},w.state))}return Ke(Hi,D({key:"single",ref:mr(this,"moveable")},v,{target:S,firstRenderState:g}))}},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var r,i;return(i=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&i!==void 0?i:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var r=this,i;return this._onChangeTargets=function(){r._onChangeTargets=null,i()},new Promise(function(n){i=n})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(r){var i=this.refTargets,n=Vu(this.props.target||this.props.targets),s=typeof document<"u",a=fv(i,n),o=this.selectorMap,l={};return this.refTargets.forEach(function u(c){if(Ee(c)){var f=o[c];f?l[c]=o[c]:s&&(a=!0,l[c]=[].slice.call(document.querySelectorAll(c)))}else $t(c)&&c.forEach(u)}),this._tmpRefTargets=n,this._tmpSelectorMap=l,[n,l,!r&&a]},t.prototype._checkChangeTargets=function(){var r,i,n;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var s=this._differ.update(this._elementTargets),a=s.added,o=s.removed,l=a.length||o.length;l&&((i=(r=this.props).onChangeTargets)===null||i===void 0||i.call(r,{moveable:this.moveable,targets:this._elementTargets}),(n=this._onChangeTargets)===null||n===void 0||n.call(this));var u=T(this._updateRefs(),3),c=u[0],f=u[1],h=u[2];this.refTargets=c,this.selectorMap=f,h&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,O1([ry(ip)],t.prototype,"moveable",void 0),t}(Td),oS=function(e){Qn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultAbles=qu,t}(aS),Ol=function(e,t){return Ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},Ol(e,t)};function Ku(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ol(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Nn=function(){return Nn=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Nn.apply(this,arguments)};function lS(e,t,r,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(n<3?a(s):n>3?a(t,r,s):a(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s}var uS=function(e){Ku(t,e);function t(i){var n=e.call(this,i)||this;return n.state={},n.state=n.props,n}var r=t.prototype;return r.render=function(){return Ke(oS,Nn({ref:mr(this,"moveable")},this.state))},t}(xu),da=rS,hv=ip,dv=eS,cS=function(e){Ku(t,e);function t(i,n){n===void 0&&(n={});var s=e.call(this)||this;s.containerProvider=null,s.selfElement=null,s._warp=!1;var a=Nn({},n),o={};dv.forEach(function(c){o[hy("on ".concat(c))]=function(f){return s.trigger(c,f)}});var l;n.warpSelf?(delete n.warpSelf,s._warp=!0,l=i):(l=Ui(i).createElement("div"),i.appendChild(l)),s.containerProvider=of(Ke(uS,Nn({ref:mr(s,"innerMoveable")},a,o)),l),s.selfElement=l;var u=a.target;return $t(u)&&u.length>1&&s.updateRect(),s}var r=t.prototype;return r.setState=function(i,n){this.innerMoveable.setState(i,n)},r.forceUpdate=function(i){this.innerMoveable.forceUpdate(i)},r.dragStart=function(i,n){n===void 0&&(n=i.target);var s=this.innerMoveable;s.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(i,n)},r.destroy=function(){var i,n=this.selfElement;of(null,n,this.containerProvider),this._warp||(i=n==null?void 0:n.parentElement)===null||i===void 0||i.removeChild(n),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},t=lS([Jc(hv,function(i,n){i[n]||(i[n]=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=this.getMoveable();if(!(!o||!o[n]))return o[n].apply(o,s)})}),Jc(da,function(i,n){Object.defineProperty(i,n,{get:function(){return this.getMoveable().props[n]},set:function(s){var a;this.setState((a={},a[n]=s,a))},enumerable:!0,configurable:!0})})],t),t}(to),fS=function(e){Ku(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(cS);const pv={};hv.forEach(e=>{pv[e]=function(...t){return this.$_moveable[e](...t)}});const vv={};da.forEach(e=>{vv[e]=function(t){this.$_moveable[e]=t}});const hS=Jg({name:"moveable",methods:pv,props:da,watch:vv,mounted(){const e={},t=this.$props;da.forEach(s=>{const a=t[s];Xn(a)||(e[s]=t[s])});const i=this.$refs.moveableElement,n=new fS(i,{...e,warpSelf:!0});dv.forEach(s=>{n.on(s,a=>{this.$emit(s,{...a})})}),this.$_moveable=n},beforeUnmount(){this.$_moveable.destroy()}}),dS=hS,pS=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},vS={ref:"moveableElement"};function gS(e,t,r,i,n,s){return Yt(),re("div",vS,null,512)}const mS=pS(dS,[["render",gS]]),$f="/StickerEditor/assets/testimg-DOU5pnUw.jpg",yS=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},bS=e=>(Fg("data-v-9b12b9ba"),e=e(),zg(),e),xS={class:"flex flex-col"},SS={class:"bg-Surface w-[52vw] h-auto flex items-center justify-center rounded-xl p-10 relative"},CS=["src"],wS=["data-id","onMousedown"],_S=["src"],ES=["onClick"],kS={class:"mt-5 flex items-center justify-center gap-5"},MS=bS(()=>Dt("label",{for:"file-upload",class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh] content-center text-center hover:cursor-pointer"},"Import",-1)),PS=["href"],DS=40,TS=.7,RS={__name:"Editor",setup(e,{expose:t}){let r=Se(null),i=Se(null),n=null;const s=lr("selectedImage"),a=lr("savedImages"),o=lr("images"),l=Se([]),u=Se(null),c=S=>{const y={id:Date.now(),src:S,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%) rotate(0deg)",width:"70px",height:"70px"}};l.value.push(y),Bh(()=>{u.value=y.id})},f=({target:S,clientX:y,clientY:w})=>{const _=l.value.find(E=>E.id===parseInt(S.dataset.id));if(_&&r.value){const E=r.value.getBoundingClientRect(),M=S.getBoundingClientRect();let O=y-E.left,A=w-E.top;const R=M.width/2,B=M.height/2;O=Math.max(R,Math.min(O,E.width-R)),A=Math.max(B,Math.min(A,E.height-B));const L=O/E.width*100,W=A/E.height*100;_.style.left=`${L}%`,_.style.top=`${W}%`,_.style.transform=`translate(-50%, -50%) ${_.style.transform.split(") ")[1]||""}`}},h=(S,y)=>{const _=(y-S)*TS;return Math.max(S+_,DS)},d=({target:S,width:y,height:w})=>{const _=l.value.find(E=>E.id===parseInt(S.dataset.id));if(_){const E=parseFloat(_.style.width),M=parseFloat(_.style.height),O=h(E,y),A=h(M,w);_.style.width=`${O}px`,_.style.height=`${A}px`}},p=({target:S,rotate:y})=>{const w=l.value.find(_=>_.id===parseInt(S.dataset.id));if(w){const E=w.style.transform.split(") ")[0]+")";w.style.transform=`${E} rotate(${y}deg)`}},v=S=>{l.value=l.value.filter(y=>y.id!==S),u.value===S&&(u.value=null)},g=()=>{l.value=[],u.value=null},m=S=>{u.value=S},b=()=>new Promise((S,y)=>{const w=document.createElement("canvas"),_=w.getContext("2d"),E=new Image;E.src=r.value.src,E.onload=()=>{w.width=E.width,w.height=E.height,_.drawImage(E,0,0);let M=0;if(l.value.length===0){const O=w.toDataURL("image/png");g(),S(O)}else{const O=r.value.getBoundingClientRect(),A=E.width/O.width,R=E.height/O.height;l.value.forEach(B=>{const L=new Image;L.src=B.src,L.onload=()=>{var st;const W=parseFloat(B.style.left)/100*O.width,H=parseFloat(B.style.top)/100*O.height,z=parseFloat(B.style.width),Y=parseFloat(B.style.height),K=W*A,G=H*R,tt=z*A,nt=Y*R,et=parseFloat(((st=B.style.transform.match(/rotate\(([-\d.]+)deg\)/))==null?void 0:st[1])||0);if(_.save(),_.translate(K,G),_.rotate(et*Math.PI/180),_.drawImage(L,-tt/2,-nt/2,tt,nt),_.restore(),M++,M===l.value.length){const Z=w.toDataURL("image/png");g(),S(Z)}},L.onerror=y})}},E.onerror=y}),x=async()=>{try{const S=await b();console.log("Merge successful"),g();const y=new Q0(r.value);y.availableMarkerTypes=y.ALL_MARKER_TYPES,y.uiStyleSettings.redoButtonVisible=!0,y.uiStyleSettings.zoomButtonVisible=!0,y.uiStyleSettings.zoomOutButtonVisible=!0,y.uiStyleSettings.clearButtonVisible=!0,y.settings.displayMode="popup",y.settings.defaultColor=["#000000"],y.settings.defaultFontFamilies=["Poetsen One","Indie Flower","Dela Gothic One","DynaPuff","Pixelify Sans","Gluten","Teko"],y.addRenderEventListener(w=>{a.value.push(w),r.value.src=w,i.value.href=w}),r.value.src=S,i.value.href=S,y.show()}catch(S){console.error("Merge failed",S)}},C=S=>{const y=S.target.files[0],w=new FileReader;w.onload=()=>{n=w.result,r.value.src=n,i.value.href=n,o.value.push({src:n,alt:y.name}),emit("newImage",n)},y&&w.readAsDataURL(y)};return jh(()=>{const S=document.createElement("canvas"),y=S.getContext("2d"),w=new Image;w.src=$f,w.onload=()=>{S.width=w.width,S.height=w.height,y.drawImage(w,0,0),n=S.toDataURL("image/png"),i.value.href=n}}),Ts(s,S=>{S&&(r.value.src=S,i.value.href=S)}),t({addSticker:c}),(S,y)=>(Yt(),re("div",xS,[Dt("div",SS,[Dt("img",{class:"w-auto max-w-[48vw] h-auto min-h-[60vh] max-h-[75vh] object-fill rounded-xl",ref_key:"imgRef",ref:r,src:ee(s)||ee($f),alt:"Test img"},null,8,CS),(Yt(!0),re(xe,null,Zs(l.value,w=>(Yt(),re("div",{key:w.id,style:Ha({position:"absolute",left:w.style.left,top:w.style.top,transform:w.style.transform,width:w.style.width,height:w.style.height}),"data-id":w.id,class:"sticker",onMousedown:_=>m(w.id)},[Dt("img",{src:w.src,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,_S),Dt("button",{onClick:_=>v(w.id),class:"delete-btn"},"X",8,ES)],44,wS))),128)),u.value?(Yt(),rd(ee(mS),{key:0,class:"moveable",target:`.sticker[data-id='${u.value}']`,draggable:!0,resizable:!0,rotatable:!0,origin:!1,keepRatio:!1,onDrag:f,onResize:d,onRotate:p},null,8,["target"])):nd("",!0)]),Dt("div",kS,[MS,Dt("input",{id:"file-upload",type:"file",onChange:C,accept:"image/*",class:"hidden"},null,32),Dt("button",{class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh]",onClick:x},"Edit"),Dt("a",{class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh] flex items-center justify-center",ref_key:"downloadButton",ref:i,href:ee(n),download:"image.png"},"Download",8,PS)])]))}},AS=yS(RS,[["__scopeId","data-v-9b12b9ba"]]),OS="/StickerEditor/assets/out2-CcsAHtZO.png",IS="/StickerEditor/assets/out3-DDp8jPL9.png",BS="/StickerEditor/assets/out6-DvOdD5OY.png",LS="/StickerEditor/assets/out5-f7Ma6H0z.png",FS="/StickerEditor/assets/out7-Bh2lHIfN.png",zS="/StickerEditor/assets/out8-CHEbLBCF.png",NS="/StickerEditor/assets/out9-YMO4_2Fq.png",GS="/StickerEditor/assets/out10-CvLObVeK.png",WS="/StickerEditor/assets/out11-CT18JE_v.png",HS="/StickerEditor/assets/out12-CN1wM1JI.png",VS={class:"bg-Background h-screen gap-10 mx-auto grid grid-rows-3 relative"},jS={class:"row-span-1 w-[400px] absolute left-0"},$S={class:"row-span-1 flex items-center justify-center min-h-screen absolute left-1/4 right-1/4"},XS={class:"row-span-1 h-screen flex justify-end absolute right-0"},US={__name:"ImageEditor",setup(e){let t=Se([{src:OS,alt:"add on 1"},{src:IS,alt:"add on 2"},{src:LS,alt:"add on 3"},{src:BS,alt:"add on 4"},{src:FS,alt:"add on 5"},{src:zS,alt:"add on 6"},{src:NS,alt:"add on 7"},{src:GS,alt:"add on 8"},{src:WS,alt:"add on 9"},{src:HS,alt:"add on 10"}]),r=Se(!1),i=Se(null);const n=Se([]),s=Se(null),a=l=>{t.value.unshift({src:l,alt:"New Image"})};return hi("handleStickerSelected",l=>{s.value&&s.value.addSticker(l)}),hi("images",t),hi("selectedImage",i),hi("typeButton",r),hi("savedImages",n),(l,u)=>(Yt(),re("section",VS,[Dt("aside",jS,[Ce(k0)]),Dt("main",$S,[Ce(AS,{ref_key:"editorRef",ref:s,"selected-image":ee(i),onNewImage:a},null,8,["selected-image"])]),Dt("aside",XS,[Ce(z0,{onSelectImage:u[0]||(u[0]=c=>le(i)?i.value=c:i=c)})])]))}},vi="4.32.2";let Xf=!1,Mn,gv,mv,Il,yv,bv,xv,Sv,Cv;function YS(e,t={auto:!1}){if(Xf)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(Mn)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${Mn}'\``);Xf=t.auto,Mn=e.kind,gv=e.fetch,e.Request,e.Response,e.Headers,mv=e.FormData,e.Blob,Il=e.File,yv=e.ReadableStream,bv=e.getMultipartRequestOptions,xv=e.getDefaultAgent,Sv=e.fileFromPath,Cv=e.isFsReadStream}class qS{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function KS({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,i,n,s;try{r=fetch,i=Request,n=Response,s=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${t}`)}return{kind:"web",fetch:r,Request:i,Response:n,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new qS(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}Mn||YS(KS(),{auto:!0});class _t extends Error{}class ne extends _t{constructor(t,r,i,n){super(`${ne.makeMessage(t,r,i)}`),this.status=t,this.headers=n;const s=r;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(t,r,i){const n=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):i;return t&&n?`${t} ${n}`:t?`${t} status code (no body)`:n||"(no status code or body)"}static generate(t,r,i,n){if(!t)return new co({cause:Ll(r)});const s=r==null?void 0:r.error;return t===400?new wv(t,s,i,n):t===401?new _v(t,s,i,n):t===403?new Ev(t,s,i,n):t===404?new kv(t,s,i,n):t===409?new Mv(t,s,i,n):t===422?new Pv(t,s,i,n):t===429?new Dv(t,s,i,n):t>=500?new Tv(t,s,i,n):new ne(t,s,i,n)}}class Re extends ne{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class co extends ne{constructor({message:t,cause:r}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}}class Ju extends co{constructor({message:t}={}){super({message:t??"Request timed out."})}}class wv extends ne{constructor(){super(...arguments),this.status=400}}class _v extends ne{constructor(){super(...arguments),this.status=401}}class Ev extends ne{constructor(){super(...arguments),this.status=403}}class kv extends ne{constructor(){super(...arguments),this.status=404}}class Mv extends ne{constructor(){super(...arguments),this.status=409}}class Pv extends ne{constructor(){super(...arguments),this.status=422}}class Dv extends ne{constructor(){super(...arguments),this.status=429}}class Tv extends ne{}class or{constructor(t,r){this.iterator=t,this.controller=r}static fromSSEResponse(t,r){let i=!1;async function*n(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let s=!1;try{for await(const a of JS(t,r))if(!s){if(a.data.startsWith("[DONE]")){s=!0;continue}if(a.event===null){let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(o&&o.error)throw new ne(void 0,o.error,void 0,void 0);yield o}else{let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(a.event=="error")throw new ne(void 0,o.error,o.message,void 0);yield{event:a.event,data:o}}}s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||r.abort()}}return new or(n,r)}static fromReadableStream(t,r){let i=!1;async function*n(){const a=new si,o=Rv(t);for await(const l of o)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*s(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const o of n())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||r.abort()}}return new or(s,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],r=[],i=this.iterator(),n=s=>({next:()=>{if(s.length===0){const a=i.next();t.push(a),r.push(a)}return s.shift()}});return[new or(()=>n(t),this.controller),new or(()=>n(r),this.controller)]}toReadableStream(){const t=this;let r;const i=new TextEncoder;return new yv({async start(){r=t[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:a}=await r.next();if(a)return n.close();const o=i.encode(JSON.stringify(s)+`
`);n.enqueue(o)}catch(s){n.error(s)}},async cancel(){var n;await((n=r.return)==null?void 0:n.call(r))}})}}async function*JS(e,t){if(!e.body)throw t.abort(),new _t("Attempted to iterate over a response with no body");const r=new tC,i=new si,n=Rv(e.body);for await(const s of ZS(n))for(const a of i.decode(s)){const o=r.decode(a);o&&(yield o)}for(const s of i.flush()){const a=r.decode(s);a&&(yield a)}}async function*ZS(e){let t=new Uint8Array;for await(const r of e){if(r==null)continue;const i=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r;let n=new Uint8Array(t.length+i.length);n.set(t),n.set(i,t.length),t=n;let s;for(;(s=QS(t))!==-1;)yield t.slice(0,s),t=t.slice(s)}t.length>0&&(yield t)}function QS(e){for(let i=0;i<e.length-2;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}class tC{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[r,i,n]=eC(t,":");return n.startsWith(" ")&&(n=n.substring(1)),r==="event"?this.event=n:r==="data"&&this.data.push(n),null}}class si{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let r=this.decodeText(t);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];const i=si.NEWLINE_CHARS.has(r[r.length-1]||"");let n=r.split(si.NEWLINE_REGEXP);return i&&n.pop(),n.length===1&&!i?(this.buffer.push(n[0]),[]):(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),i||(this.buffer=[n.pop()||""]),n)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new _t(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new _t(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new _t("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}si.NEWLINE_CHARS=new Set([`
`,"\r"]);si.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function eC(e,t){const r=e.indexOf(t);return r!==-1?[e.substring(0,r),t,e.substring(r+t.length)]:[e,"",""]}function Rv(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const r=await t.read();return r!=null&&r.done&&t.releaseLock(),r}catch(r){throw t.releaseLock(),r}},async return(){const r=t.cancel();return t.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Av=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",Ov=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Iv(e),Iv=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",rC=e=>Ov(e)||Av(e)||Cv(e);async function Bv(e,t,r){var n;if(e=await e,r??(r=Ov(e)?{lastModified:e.lastModified,type:e.type}:{}),Av(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new Il([s],t,r)}const i=await iC(e);if(t||(t=sC(e)??"unknown_file"),!r.type){const s=(n=i[0])==null?void 0:n.type;typeof s=="string"&&(r={...r,type:s})}return new Il(i,t,r)}async function iC(e){var r;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Iv(e))t.push(await e.arrayBuffer());else if(aC(e))for await(const i of e)t.push(i);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(r=e==null?void 0:e.constructor)==null?void 0:r.name}; props: ${nC(e)}`);return t}function nC(e){return`[${Object.getOwnPropertyNames(e).map(r=>`"${r}"`).join(", ")}]`}function sC(e){var t;return Wo(e.name)||Wo(e.filename)||((t=Wo(e.path))==null?void 0:t.split(/[\\/]/).pop())}const Wo=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},aC=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",Uf=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",Gn=async e=>{const t=await oC(e.body);return bv(t,e)},oC=async e=>{const t=new mv;return await Promise.all(Object.entries(e||{}).map(([r,i])=>Bl(t,r,i))),t},Bl=async(e,t,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")e.append(t,String(r));else if(rC(r)){const i=await Bv(r);e.append(t,i)}else if(Array.isArray(r))await Promise.all(r.map(i=>Bl(e,t+"[]",i)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([i,n])=>Bl(e,`${t}[${i}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var Di={},lC=function(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},uC=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},Es;async function Lv(e){const{response:t}=e;if(e.options.stream)return Ti("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):or.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const r=t.headers.get("content-type");if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.includes("application/vnd.api+json"))){const s=await t.json();return Ti("response",t.status,t.url,t.headers,s),s}const n=await t.text();return Ti("response",t.status,t.url,t.headers,n),n}class fo extends Promise{constructor(t,r=Lv){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=r}_thenUnwrap(t){return new fo(this.responsePromise,async r=>t(await this.parseResponse(r)))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,r){return this.parse().then(t,r)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class cC{constructor({baseURL:t,maxRetries:r=2,timeout:i=6e5,httpAgent:n,fetch:s}){this.baseURL=t,this.maxRetries=Ho("maxRetries",r),this.timeout=Ho("timeout",i),this.httpAgent=n,this.fetch=s??gv}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...gC(),...this.authHeaders(t)}}validateHeaders(t,r){}defaultIdempotencyKey(){return`stainless-node-retry-${xC()}`}get(t,r){return this.methodRequest("get",t,r)}post(t,r){return this.methodRequest("post",t,r)}patch(t,r){return this.methodRequest("patch",t,r)}put(t,r){return this.methodRequest("put",t,r)}delete(t,r){return this.methodRequest("delete",t,r)}methodRequest(t,r,i){return this.request(Promise.resolve(i).then(n=>({method:t,path:r,...n})))}getAPIList(t,r,i){return this.requestAPIList(r,{method:"get",path:t,...i})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}return null}buildRequest(t){var p;const{method:r,path:i,query:n,headers:s={}}=t,a=Uf(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,o=this.calculateContentLength(a),l=this.buildURL(i,n);"timeout"in t&&Ho("timeout",t.timeout);const u=t.timeout??this.timeout,c=t.httpAgent??this.httpAgent??xv(l),f=u+1e3;typeof((p=c==null?void 0:c.options)==null?void 0:p.timeout)=="number"&&f>(c.options.timeout??0)&&(c.options.timeout=f),this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const h=this.buildHeaders({options:t,headers:s,contentLength:o});return{req:{method:r,...a&&{body:a},headers:h,...c&&{agent:c},signal:t.signal??null},url:l,timeout:u}}buildHeaders({options:t,headers:r,contentLength:i}){const n={};i&&(n["content-length"]=i);const s=this.defaultHeaders(t);return Jf(n,s),Jf(n,r),Uf(t.body)&&Mn!=="node"&&delete n["content-type"],this.validateHeaders(n,r),n}async prepareOptions(t){}async prepareRequest(t,{url:r,options:i}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(r=>[...r])):{...t}:{}}makeStatusError(t,r,i,n){return ne.generate(t,r,i,n)}request(t,r=null){return new fo(this.makeRequest(t,r))}async makeRequest(t,r){var c,f;const i=await t;r==null&&(r=i.maxRetries??this.maxRetries),await this.prepareOptions(i);const{req:n,url:s,timeout:a}=this.buildRequest(i);if(await this.prepareRequest(n,{url:s,options:i}),Ti("request",s,i,n.headers),(c=i.signal)!=null&&c.aborted)throw new Re;const o=new AbortController,l=await this.fetchWithTimeout(s,n,a,o).catch(Ll);if(l instanceof Error){if((f=i.signal)!=null&&f.aborted)throw new Re;if(r)return this.retryRequest(i,r);throw l.name==="AbortError"?new Ju:new co({cause:l})}const u=hC(l.headers);if(!l.ok){if(r&&this.shouldRetry(l)){const m=`retrying, ${r} attempts remaining`;return Ti(`response (error; ${m})`,l.status,s,u),this.retryRequest(i,r,u)}const h=await l.text().catch(m=>Ll(m).message),d=mC(h),p=d?void 0:h;throw Ti(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,l.status,s,u,p),this.makeStatusError(l.status,d,p,u)}return{response:l,options:i,controller:o}}requestAPIList(t,r){const i=this.makeRequest(r,null);return new fC(this,i,t)}buildURL(t,r){const i=bC(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),n=this.defaultQuery();return zv(n)||(r={...n,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(i.search=this.stringifyQuery(r)),i.toString()}stringifyQuery(t){return Object.entries(t).filter(([r,i])=>typeof i<"u").map(([r,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(r)}=`;throw new _t(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,r,i,n){const{signal:s,...a}=r||{};s&&s.addEventListener("abort",()=>n.abort());const o=setTimeout(()=>n.abort(),i);return this.getRequestClient().fetch.call(void 0,t,{signal:n.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const r=t.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,r,i){let n;const s=i==null?void 0:i["retry-after-ms"];if(s){const o=parseFloat(s);Number.isNaN(o)||(n=o)}const a=i==null?void 0:i["retry-after"];if(a&&!n){const o=parseFloat(a);Number.isNaN(o)?n=Date.parse(a)-Date.now():n=o*1e3}if(!(n&&0<=n&&n<60*1e3)){const o=t.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(r,o)}return await Zu(n),this.makeRequest(t,r-1)}calculateDefaultRetryTimeoutMillis(t,r){const s=r-t,a=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${vi}`}}class Fv{constructor(t,r,i,n){Es.set(this,void 0),lC(this,Es,t,"f"),this.options=n,this.response=r,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new _t("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in t&&typeof r.query=="object")r.query={...r.query,...t.params};else if("url"in t){const i=[...Object.entries(r.query||{}),...t.url.searchParams.entries()];for(const[n,s]of i)t.url.searchParams.set(n,s);r.query=void 0,r.path=t.url.toString()}return await uC(this,Es,"f").requestAPIList(this.constructor,r)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Es=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const r of t.getPaginatedItems())yield r}}class fC extends fo{constructor(t,r,i){super(r,async n=>new i(t,n.response,await Lv(n),n.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const r of t)yield r}}const hC=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,r){const i=r.toString();return t[i.toLowerCase()]||t[i]}}),dC={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},fr=e=>typeof e=="object"&&e!==null&&!zv(e)&&Object.keys(e).every(t=>Nv(dC,t)),pC=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":qf(Deno.build.os),"X-Stainless-Arch":Yf(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":qf(process.platform),"X-Stainless-Arch":Yf(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=vC();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function vC(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const i=r.exec(navigator.userAgent);if(i){const n=i[1]||0,s=i[2]||0,a=i[3]||0;return{browser:t,version:`${n}.${s}.${a}`}}}return null}const Yf=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",qf=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Kf;const gC=()=>Kf??(Kf=pC()),mC=e=>{try{return JSON.parse(e)}catch{return}},yC=new RegExp("^(?:[a-z]+:)?//","i"),bC=e=>yC.test(e),Zu=e=>new Promise(t=>setTimeout(t,e)),Ho=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new _t(`${e} must be an integer`);if(t<0)throw new _t(`${e} must be a positive integer`);return t},Ll=e=>e instanceof Error?e:new Error(e),Vo=e=>{var t,r,i,n;if(typeof process<"u")return((t=Di==null?void 0:Di[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(n=(i=(r=Deno.env)==null?void 0:r.get)==null?void 0:i.call(r,e))==null?void 0:n.trim()};function zv(e){if(!e)return!0;for(const t in e)return!1;return!0}function Nv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Jf(e,t){for(const r in t){if(!Nv(t,r))continue;const i=r.toLowerCase();if(!i)continue;const n=t[r];n===null?delete e[i]:n!==void 0&&(e[i]=n)}}function Ti(e,...t){typeof process<"u"&&(Di==null?void 0:Di.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const xC=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),SC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Zf(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class Qu extends Fv{constructor(t,r,i,n){super(t,r,i,n),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class wr extends Fv{constructor(t,r,i,n){super(t,r,i,n),this.data=i.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const r=Object.fromEntries(t.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var i;const t=this.getPaginatedItems();if(!t.length)return null;const r=(i=t[t.length-1])==null?void 0:i.id;return r?{params:{after:r}}:null}}class Ft{constructor(t){this._client=t}}let pa=class extends Ft{create(t,r){return this._client.post("/chat/completions",{body:t,...r,stream:t.stream??!1})}};pa||(pa={});let va=class extends Ft{constructor(){super(...arguments),this.completions=new pa(this._client)}};(function(e){e.Completions=pa})(va||(va={}));class ga extends Ft{create(t,r){return this._client.post("/audio/speech",{body:t,...r,__binaryResponse:!0})}}ga||(ga={});class ma extends Ft{create(t,r){return this._client.post("/audio/transcriptions",Gn({body:t,...r}))}}ma||(ma={});class ya extends Ft{create(t,r){return this._client.post("/audio/translations",Gn({body:t,...r}))}}ya||(ya={});class ba extends Ft{constructor(){super(...arguments),this.transcriptions=new ma(this._client),this.translations=new ya(this._client),this.speech=new ga(this._client)}}(function(e){e.Transcriptions=ma,e.Translations=ya,e.Speech=ga})(ba||(ba={}));let xa=class extends Ft{create(t,r,i){return this._client.post(`/assistants/${t}/files`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}retrieve(t,r,i){return this._client.get(`/assistants/${t}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,r={},i){return fr(r)?this.list(t,{},r):this._client.getAPIList(`/assistants/${t}/files`,tc,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}del(t,r,i){return this._client.delete(`/assistants/${t}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}};class tc extends wr{}(function(e){e.AssistantFilesPage=tc})(xa||(xa={}));class Sa extends Ft{constructor(){super(...arguments),this.files=new xa(this._client)}create(t,r){return this._client.post("/assistants",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(t,r){return this._client.get(`/assistants/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(t,r,i){return this._client.post(`/assistants/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t={},r){return fr(t)?this.list({},t):this._client.getAPIList("/assistants",ec,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(t,r){return this._client.delete(`/assistants/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}class ec extends wr{}(function(e){e.AssistantsPage=ec,e.Files=xa,e.AssistantFilesPage=tc})(Sa||(Sa={}));function Qf(e){return typeof e.parse=="function"}const Ri=e=>(e==null?void 0:e.role)==="assistant",Gv=e=>(e==null?void 0:e.role)==="function",Wv=e=>(e==null?void 0:e.role)==="tool";var Ne=function(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},wt=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},ae,Ls,Fs,on,ln,zs,un,pr,cn,Ns,Gs,gi,Fl,Ca,zl,Nl,Gl,Wl,Hv,Hl;const th=10;class Vv{constructor(){ae.add(this),this.controller=new AbortController,Ls.set(this,void 0),Fs.set(this,()=>{}),on.set(this,()=>{}),ln.set(this,void 0),zs.set(this,()=>{}),un.set(this,()=>{}),pr.set(this,{}),this._chatCompletions=[],this.messages=[],cn.set(this,!1),Ns.set(this,!1),Gs.set(this,!1),gi.set(this,!1),Wl.set(this,t=>{if(Ne(this,Ns,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Re),t instanceof Re)return Ne(this,Gs,!0,"f"),this._emit("abort",t);if(t instanceof _t)return this._emit("error",t);if(t instanceof Error){const r=new _t(t.message);return r.cause=t,this._emit("error",r)}return this._emit("error",new _t(String(t)))}),Ne(this,Ls,new Promise((t,r)=>{Ne(this,Fs,t,"f"),Ne(this,on,r,"f")}),"f"),Ne(this,ln,new Promise((t,r)=>{Ne(this,zs,t,"f"),Ne(this,un,r,"f")}),"f"),wt(this,Ls,"f").catch(()=>{}),wt(this,ln,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},wt(this,Wl,"f"))},0)}_addChatCompletion(t){var i;this._chatCompletions.push(t),this._emit("chatCompletion",t);const r=(i=t.choices[0])==null?void 0:i.message;return r&&this._addMessage(r),t}_addMessage(t,r=!0){if("content"in t||(t.content=null),this.messages.push(t),r){if(this._emit("message",t),(Gv(t)||Wv(t))&&t.content)this._emit("functionCallResult",t.content);else if(Ri(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(Ri(t)&&t.tool_calls)for(const i of t.tool_calls)i.type==="function"&&this._emit("functionCall",i.function)}}_connected(){this.ended||(wt(this,Fs,"f").call(this),this._emit("connect"))}get ended(){return wt(this,cn,"f")}get errored(){return wt(this,Ns,"f")}get aborted(){return wt(this,Gs,"f")}abort(){this.controller.abort()}on(t,r){return(wt(this,pr,"f")[t]||(wt(this,pr,"f")[t]=[])).push({listener:r}),this}off(t,r){const i=wt(this,pr,"f")[t];if(!i)return this;const n=i.findIndex(s=>s.listener===r);return n>=0&&i.splice(n,1),this}once(t,r){return(wt(this,pr,"f")[t]||(wt(this,pr,"f")[t]=[])).push({listener:r,once:!0}),this}emitted(t){return new Promise((r,i)=>{Ne(this,gi,!0,"f"),t!=="error"&&this.once("error",i),this.once(t,r)})}async done(){Ne(this,gi,!0,"f"),await wt(this,ln,"f")}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new _t("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),wt(this,ae,"m",Fl).call(this)}async finalMessage(){return await this.done(),wt(this,ae,"m",Ca).call(this)}async finalFunctionCall(){return await this.done(),wt(this,ae,"m",zl).call(this)}async finalFunctionCallResult(){return await this.done(),wt(this,ae,"m",Nl).call(this)}async totalUsage(){return await this.done(),wt(this,ae,"m",Gl).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(t,...r){if(wt(this,cn,"f"))return;t==="end"&&(Ne(this,cn,!0,"f"),wt(this,zs,"f").call(this));const i=wt(this,pr,"f")[t];if(i&&(wt(this,pr,"f")[t]=i.filter(n=>!n.once),i.forEach(({listener:n})=>n(...r))),t==="abort"){const n=r[0];!wt(this,gi,"f")&&!(i!=null&&i.length)&&Promise.reject(n),wt(this,on,"f").call(this,n),wt(this,un,"f").call(this,n),this._emit("end");return}if(t==="error"){const n=r[0];!wt(this,gi,"f")&&!(i!=null&&i.length)&&Promise.reject(n),wt(this,on,"f").call(this,n),wt(this,un,"f").call(this,n),this._emit("end")}}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const r=wt(this,ae,"m",Ca).call(this);r&&this._emit("finalMessage",r);const i=wt(this,ae,"m",Fl).call(this);i&&this._emit("finalContent",i);const n=wt(this,ae,"m",zl).call(this);n&&this._emit("finalFunctionCall",n);const s=wt(this,ae,"m",Nl).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",wt(this,ae,"m",Gl).call(this))}async _createChatCompletion(t,r,i){const n=i==null?void 0:i.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),wt(this,ae,"m",Hv).call(this,r);const s=await t.create({...r,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(t,r,i){for(const n of r.messages)this._addMessage(n,!1);return await this._createChatCompletion(t,r,i)}async _runFunctions(t,r,i){var h;const n="function",{function_call:s="auto",stream:a,...o}=r,l=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:u=th}=i||{},c={};for(const d of r.functions)c[d.name||d.function.name]=d;const f=r.functions.map(d=>({name:d.name||d.function.name,parameters:d.parameters,description:d.description}));for(const d of r.messages)this._addMessage(d,!1);for(let d=0;d<u;++d){const v=(h=(await this._createChatCompletion(t,{...o,function_call:s,functions:f,messages:[...this.messages]},i)).choices[0])==null?void 0:h.message;if(!v)throw new _t("missing message in ChatCompletion response");if(!v.function_call)return;const{name:g,arguments:m}=v.function_call,b=c[g];if(b){if(l&&l!==g){const y=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:n,name:g,content:y});continue}}else{const y=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${f.map(w=>JSON.stringify(w.name)).join(", ")}. Please try again`;this._addMessage({role:n,name:g,content:y});continue}let x;try{x=Qf(b)?await b.parse(m):m}catch(y){this._addMessage({role:n,name:g,content:y instanceof Error?y.message:String(y)});continue}const C=await b.function(x,this),S=wt(this,ae,"m",Hl).call(this,C);if(this._addMessage({role:n,name:g,content:S}),l)return}}async _runTools(t,r,i){var h,d;const n="tool",{tool_choice:s="auto",stream:a,...o}=r,l=typeof s!="string"&&((h=s==null?void 0:s.function)==null?void 0:h.name),{maxChatCompletions:u=th}=i||{},c={};for(const p of r.tools)p.type==="function"&&(c[p.function.name||p.function.function.name]=p.function);const f="tools"in r?r.tools.map(p=>p.type==="function"?{type:"function",function:{name:p.function.name||p.function.function.name,parameters:p.function.parameters,description:p.function.description}}:p):void 0;for(const p of r.messages)this._addMessage(p,!1);for(let p=0;p<u;++p){const g=(d=(await this._createChatCompletion(t,{...o,tool_choice:s,tools:f,messages:[...this.messages]},i)).choices[0])==null?void 0:d.message;if(!g)throw new _t("missing message in ChatCompletion response");if(!g.tool_calls)return;for(const m of g.tool_calls){if(m.type!=="function")continue;const b=m.id,{name:x,arguments:C}=m.function,S=c[x];if(S){if(l&&l!==x){const E=`Invalid tool_call: ${JSON.stringify(x)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:n,tool_call_id:b,content:E});continue}}else{const E=`Invalid tool_call: ${JSON.stringify(x)}. Available options are: ${f.map(M=>JSON.stringify(M.function.name)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:b,content:E});continue}let y;try{y=Qf(S)?await S.parse(C):C}catch(E){const M=E instanceof Error?E.message:String(E);this._addMessage({role:n,tool_call_id:b,content:M});continue}const w=await S.function(y,this),_=wt(this,ae,"m",Hl).call(this,w);if(this._addMessage({role:n,tool_call_id:b,content:_}),l)return}}}}Ls=new WeakMap,Fs=new WeakMap,on=new WeakMap,ln=new WeakMap,zs=new WeakMap,un=new WeakMap,pr=new WeakMap,cn=new WeakMap,Ns=new WeakMap,Gs=new WeakMap,gi=new WeakMap,Wl=new WeakMap,ae=new WeakSet,Fl=function(){return wt(this,ae,"m",Ca).call(this).content??null},Ca=function(){let t=this.messages.length;for(;t-- >0;){const r=this.messages[t];if(Ri(r))return{...r,content:r.content??null}}throw new _t("stream ended without producing a ChatCompletionMessage with role=assistant")},zl=function(){var t,r;for(let i=this.messages.length-1;i>=0;i--){const n=this.messages[i];if(Ri(n)&&(n!=null&&n.function_call))return n.function_call;if(Ri(n)&&((t=n==null?void 0:n.tool_calls)!=null&&t.length))return(r=n.tool_calls.at(-1))==null?void 0:r.function}},Nl=function(){for(let t=this.messages.length-1;t>=0;t--){const r=this.messages[t];if(Gv(r)&&r.content!=null||Wv(r)&&r.content!=null&&this.messages.some(i=>{var n;return i.role==="assistant"&&((n=i.tool_calls)==null?void 0:n.some(s=>s.type==="function"&&s.id===r.tool_call_id))}))return r.content}},Gl=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(t.completion_tokens+=r.completion_tokens,t.prompt_tokens+=r.prompt_tokens,t.total_tokens+=r.total_tokens);return t},Hv=function(t){if(t.n!=null&&t.n>1)throw new _t("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Hl=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Wn extends Vv{static runFunctions(t,r,i){const n=new Wn,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(t,r,s)),n}static runTools(t,r,i){const n=new Wn,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(t,r,s)),n}_addMessage(t){super._addMessage(t),Ri(t)&&t.content&&this._emit("content",t.content)}}var Ge=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},jo=function(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},rr,Mr,$o,Xo,ks,eh;class Hn extends Vv{constructor(){super(...arguments),rr.add(this),Mr.set(this,void 0)}get currentChatCompletionSnapshot(){return Ge(this,Mr,"f")}static fromReadableStream(t){const r=new Hn;return r._run(()=>r._fromReadableStream(t)),r}static createChatCompletion(t,r,i){const n=new Hn;return n._run(()=>n._runChatCompletion(t,{...r,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(t,r,i){var a;const n=i==null?void 0:i.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Ge(this,rr,"m",$o).call(this);const s=await t.create({...r,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const o of s)Ge(this,rr,"m",Xo).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new Re;return this._addChatCompletion(Ge(this,rr,"m",ks).call(this))}async _fromReadableStream(t,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ge(this,rr,"m",$o).call(this),this._connected();const n=or.fromReadableStream(t,this.controller);let s;for await(const o of n)s&&s!==o.id&&this._addChatCompletion(Ge(this,rr,"m",ks).call(this)),Ge(this,rr,"m",Xo).call(this,o),s=o.id;if((a=n.controller.signal)!=null&&a.aborted)throw new Re;return this._addChatCompletion(Ge(this,rr,"m",ks).call(this))}[(Mr=new WeakMap,rr=new WeakSet,$o=function(){this.ended||jo(this,Mr,void 0,"f")},Xo=function(r){var a,o,l;if(this.ended)return;const i=Ge(this,rr,"m",eh).call(this,r);this._emit("chunk",r,i);const n=(o=(a=r.choices[0])==null?void 0:a.delta)==null?void 0:o.content,s=(l=i.choices[0])==null?void 0:l.message;n!=null&&(s==null?void 0:s.role)==="assistant"&&(s!=null&&s.content)&&this._emit("content",n,s.content)},ks=function(){if(this.ended)throw new _t("stream has ended, this shouldn't happen");const r=Ge(this,Mr,"f");if(!r)throw new _t("request ended without sending any chunks");return jo(this,Mr,void 0,"f"),CC(r)},eh=function(r){var i,n,s;let a=Ge(this,Mr,"f");const{choices:o,...l}=r;a?Object.assign(a,l):a=jo(this,Mr,{...l,choices:[]},"f");for(const{delta:u,finish_reason:c,index:f,logprobs:h=null,...d}of r.choices){let p=a.choices[f];if(p||(p=a.choices[f]={finish_reason:c,index:f,message:{},logprobs:h,...d}),h)if(!p.logprobs)p.logprobs=Object.assign({},h);else{const{content:C,...S}=h;Object.assign(p.logprobs,S),C&&((i=p.logprobs).content??(i.content=[]),p.logprobs.content.push(...C))}if(c&&(p.finish_reason=c),Object.assign(p,d),!u)continue;const{content:v,function_call:g,role:m,tool_calls:b,...x}=u;if(Object.assign(p.message,x),v&&(p.message.content=(p.message.content||"")+v),m&&(p.message.role=m),g&&(p.message.function_call?(g.name&&(p.message.function_call.name=g.name),g.arguments&&((n=p.message.function_call).arguments??(n.arguments=""),p.message.function_call.arguments+=g.arguments)):p.message.function_call=g),b){p.message.tool_calls||(p.message.tool_calls=[]);for(const{index:C,id:S,type:y,function:w,..._}of b){const E=(s=p.message.tool_calls)[C]??(s[C]={});Object.assign(E,_),S&&(E.id=S),y&&(E.type=y),w&&(E.function??(E.function={arguments:""})),w!=null&&w.name&&(E.function.name=w.name),w!=null&&w.arguments&&(E.function.arguments+=w.arguments)}}}return a},Symbol.asyncIterator)](){const t=[],r=[];let i=!1;return this.on("chunk",n=>{const s=r.shift();s?s.resolve(n):t.push(n)}),this.on("end",()=>{i=!0;for(const n of r)n.resolve(void 0);r.length=0}),this.on("abort",n=>{i=!0;for(const s of r)s.reject(n);r.length=0}),this.on("error",n=>{i=!0;for(const s of r)s.reject(n);r.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((s,a)=>r.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new or(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function CC(e){const{id:t,choices:r,created:i,model:n,system_fingerprint:s,...a}=e;return{...a,id:t,choices:r.map(({message:o,finish_reason:l,index:u,logprobs:c,...f})=>{if(!l)throw new _t(`missing finish_reason for choice ${u}`);const{content:h=null,function_call:d,tool_calls:p,...v}=o,g=o.role;if(!g)throw new _t(`missing role for choice ${u}`);if(d){const{arguments:m,name:b}=d;if(m==null)throw new _t(`missing function_call.arguments for choice ${u}`);if(!b)throw new _t(`missing function_call.name for choice ${u}`);return{...f,message:{content:h,function_call:{arguments:m,name:b},role:g},finish_reason:l,index:u,logprobs:c}}return p?{...f,index:u,finish_reason:l,logprobs:c,message:{...v,role:g,content:h,tool_calls:p.map((m,b)=>{const{function:x,type:C,id:S,...y}=m,{arguments:w,name:_,...E}=x||{};if(S==null)throw new _t(`missing choices[${u}].tool_calls[${b}].id
${Ms(e)}`);if(C==null)throw new _t(`missing choices[${u}].tool_calls[${b}].type
${Ms(e)}`);if(_==null)throw new _t(`missing choices[${u}].tool_calls[${b}].function.name
${Ms(e)}`);if(w==null)throw new _t(`missing choices[${u}].tool_calls[${b}].function.arguments
${Ms(e)}`);return{...y,id:S,type:C,function:{...E,name:_,arguments:w}}})}}:{...f,message:{...v,content:h,role:g},finish_reason:l,index:u,logprobs:c}}),created:i,model:n,object:"chat.completion",...s?{system_fingerprint:s}:{}}}function Ms(e){return JSON.stringify(e)}class Ai extends Hn{static fromReadableStream(t){const r=new Ai;return r._run(()=>r._fromReadableStream(t)),r}static runFunctions(t,r,i){const n=new Ai,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(t,r,s)),n}static runTools(t,r,i){const n=new Ai,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(t,r,s)),n}}let jv=class extends Ft{runFunctions(t,r){return t.stream?Ai.runFunctions(this._client.chat.completions,t,r):Wn.runFunctions(this._client.chat.completions,t,r)}runTools(t,r){return t.stream?Ai.runTools(this._client.chat.completions,t,r):Wn.runTools(this._client.chat.completions,t,r)}stream(t,r){return Hn.createChatCompletion(this._client.chat.completions,t,r)}};class wa extends Ft{constructor(){super(...arguments),this.completions=new jv(this._client)}}(function(e){e.Completions=jv})(wa||(wa={}));var We=function(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},zt=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},Ws,Hs,fn,hn,Vs,dn,vr,pn,js,$s,mi,Vl;class wC{constructor(){this.controller=new AbortController,Ws.set(this,void 0),Hs.set(this,()=>{}),fn.set(this,()=>{}),hn.set(this,void 0),Vs.set(this,()=>{}),dn.set(this,()=>{}),vr.set(this,{}),pn.set(this,!1),js.set(this,!1),$s.set(this,!1),mi.set(this,!1),Vl.set(this,t=>{if(We(this,js,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Re),t instanceof Re)return We(this,$s,!0,"f"),this._emit("abort",t);if(t instanceof _t)return this._emit("error",t);if(t instanceof Error){const r=new _t(t.message);return r.cause=t,this._emit("error",r)}return this._emit("error",new _t(String(t)))}),We(this,Ws,new Promise((t,r)=>{We(this,Hs,t,"f"),We(this,fn,r,"f")}),"f"),We(this,hn,new Promise((t,r)=>{We(this,Vs,t,"f"),We(this,dn,r,"f")}),"f"),zt(this,Ws,"f").catch(()=>{}),zt(this,hn,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emit("end")},zt(this,Vl,"f"))},0)}_addRun(t){return t}_connected(){this.ended||(zt(this,Hs,"f").call(this),this._emit("connect"))}get ended(){return zt(this,pn,"f")}get errored(){return zt(this,js,"f")}get aborted(){return zt(this,$s,"f")}abort(){this.controller.abort()}on(t,r){return(zt(this,vr,"f")[t]||(zt(this,vr,"f")[t]=[])).push({listener:r}),this}off(t,r){const i=zt(this,vr,"f")[t];if(!i)return this;const n=i.findIndex(s=>s.listener===r);return n>=0&&i.splice(n,1),this}once(t,r){return(zt(this,vr,"f")[t]||(zt(this,vr,"f")[t]=[])).push({listener:r,once:!0}),this}emitted(t){return new Promise((r,i)=>{We(this,mi,!0,"f"),t!=="error"&&this.once("error",i),this.once(t,r)})}async done(){We(this,mi,!0,"f"),await zt(this,hn,"f")}_emit(t,...r){if(zt(this,pn,"f"))return;t==="end"&&(We(this,pn,!0,"f"),zt(this,Vs,"f").call(this));const i=zt(this,vr,"f")[t];if(i&&(zt(this,vr,"f")[t]=i.filter(n=>!n.once),i.forEach(({listener:n})=>n(...r))),t==="abort"){const n=r[0];!zt(this,mi,"f")&&!(i!=null&&i.length)&&Promise.reject(n),zt(this,fn,"f").call(this,n),zt(this,dn,"f").call(this,n),this._emit("end");return}if(t==="error"){const n=r[0];!zt(this,mi,"f")&&!(i!=null&&i.length)&&Promise.reject(n),zt(this,fn,"f").call(this,n),zt(this,dn,"f").call(this,n),this._emit("end")}}async _threadAssistantStream(t,r,i){return await this._createThreadAssistantStream(r,t,i)}async _runAssistantStream(t,r,i,n){return await this._createAssistantStream(r,t,i,n)}async _runToolAssistantStream(t,r,i,n,s){return await this._createToolAssistantStream(i,t,r,n,s)}async _createThreadAssistantStream(t,r,i){const n=i==null?void 0:i.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const s=await t.createAndRun({...r,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addRun(s)}async _createToolAssistantStream(t,r,i,n,s){const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o=await t.submitToolOutputs(r,i,{...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addRun(o)}async _createAssistantStream(t,r,i,n){const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a=await t.create(r,{...i,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addRun(a)}}Ws=new WeakMap,Hs=new WeakMap,fn=new WeakMap,hn=new WeakMap,Vs=new WeakMap,dn=new WeakMap,vr=new WeakMap,pn=new WeakMap,js=new WeakMap,$s=new WeakMap,mi=new WeakMap,Vl=new WeakMap;var ht=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},Pe=function(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},te,jl,ir,Xs,je,Jr,wi,Yr,_a,De,Us,Ys,Pn,vn,gn,rh,ih,nh,sh,ah,oh,lh;class Ye extends wC{constructor(){super(...arguments),te.add(this),jl.set(this,[]),ir.set(this,{}),Xs.set(this,{}),je.set(this,void 0),Jr.set(this,void 0),wi.set(this,void 0),Yr.set(this,void 0),_a.set(this,void 0),De.set(this,void 0),Us.set(this,void 0),Ys.set(this,void 0),Pn.set(this,void 0)}[(jl=new WeakMap,ir=new WeakMap,Xs=new WeakMap,je=new WeakMap,Jr=new WeakMap,wi=new WeakMap,Yr=new WeakMap,_a=new WeakMap,De=new WeakMap,Us=new WeakMap,Ys=new WeakMap,Pn=new WeakMap,te=new WeakSet,Symbol.asyncIterator)](){const t=[],r=[];let i=!1;return this.on("event",n=>{const s=r.shift();s?s.resolve(n):t.push(n)}),this.on("end",()=>{i=!0;for(const n of r)n.resolve(void 0);r.length=0}),this.on("abort",n=>{i=!0;for(const s of r)s.reject(n);r.length=0}),this.on("error",n=>{i=!0;for(const s of r)s.reject(n);r.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((s,a)=>r.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const r=new Ye;return r._run(()=>r._fromReadableStream(t)),r}async _fromReadableStream(t,r){var s;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const n=or.fromReadableStream(t,this.controller);for await(const a of n)ht(this,te,"m",vn).call(this,a);if((s=n.controller.signal)!=null&&s.aborted)throw new Re;return this._addRun(ht(this,te,"m",gn).call(this))}toReadableStream(){return new or(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,r,i,n,s){const a=new Ye;return a._run(()=>a._runToolAssistantStream(t,r,i,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(t,r,i,n,s){var u;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},l=await t.submitToolOutputs(r,i,o,{...s,signal:this.controller.signal});this._connected();for await(const c of l)ht(this,te,"m",vn).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new Re;return this._addRun(ht(this,te,"m",gn).call(this))}static createThreadAssistantStream(t,r,i){const n=new Ye;return n._run(()=>n._threadAssistantStream(t,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(t,r,i,n){const s=new Ye;return s._run(()=>s._runAssistantStream(t,r,i,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return ht(this,Us,"f")}currentRun(){return ht(this,Ys,"f")}currentMessageSnapshot(){return ht(this,je,"f")}currentRunStepSnapshot(){return ht(this,Pn,"f")}async finalRunSteps(){return await this.done(),Object.values(ht(this,ir,"f"))}async finalMessages(){return await this.done(),Object.values(ht(this,Xs,"f"))}async finalRun(){if(await this.done(),!ht(this,Jr,"f"))throw Error("Final run was not received.");return ht(this,Jr,"f")}async _createThreadAssistantStream(t,r,i){var o;const n=i==null?void 0:i.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},a=await t.createAndRun(s,{...i,signal:this.controller.signal});this._connected();for await(const l of a)ht(this,te,"m",vn).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new Re;return this._addRun(ht(this,te,"m",gn).call(this))}async _createAssistantStream(t,r,i,n){var l;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...i,stream:!0},o=await t.create(r,a,{...n,signal:this.controller.signal});this._connected();for await(const u of o)ht(this,te,"m",vn).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new Re;return this._addRun(ht(this,te,"m",gn).call(this))}static accumulateDelta(t,r){for(const[i,n]of Object.entries(r)){if(!t.hasOwnProperty(i)){t[i]=n;continue}let s=t[i];if(s==null){t[i]=n;continue}if(i==="index"||i==="type"){t[i]=n;continue}if(typeof s=="string"&&typeof n=="string")s+=n;else if(typeof s=="number"&&typeof n=="number")s+=n;else if(Zf(s)&&Zf(n))s=this.accumulateDelta(s,n);else if(Array.isArray(s)&&Array.isArray(n)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...n);continue}}else throw Error(`Unhandled record type: ${i}, deltaValue: ${n}, accValue: ${s}`);t[i]=s}return t}}vn=function(t){if(!this.ended)switch(Pe(this,Us,t,"f"),ht(this,te,"m",nh).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ht(this,te,"m",lh).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ht(this,te,"m",ih).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ht(this,te,"m",rh).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},gn=function(){if(this.ended)throw new _t("stream has ended, this shouldn't happen");if(!ht(this,Jr,"f"))throw Error("Final run has not been received");return ht(this,Jr,"f")},rh=function(t){const[r,i]=ht(this,te,"m",ah).call(this,t,ht(this,je,"f"));Pe(this,je,r,"f"),ht(this,Xs,"f")[r.id]=r;for(const n of i){const s=r.content[n.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,r),t.data.delta.content)for(const n of t.data.delta.content){if(n.type=="text"&&n.text){let s=n.text,a=r.content[n.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(n.index!=ht(this,wi,"f")){if(ht(this,Yr,"f"))switch(ht(this,Yr,"f").type){case"text":this._emit("textDone",ht(this,Yr,"f").text,ht(this,je,"f"));break;case"image_file":this._emit("imageFileDone",ht(this,Yr,"f").image_file,ht(this,je,"f"));break}Pe(this,wi,n.index,"f")}Pe(this,Yr,r.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(ht(this,wi,"f")!==void 0){const n=t.data.content[ht(this,wi,"f")];if(n)switch(n.type){case"image_file":this._emit("imageFileDone",n.image_file,ht(this,je,"f"));break;case"text":this._emit("textDone",n.text,ht(this,je,"f"));break}}ht(this,je,"f")&&this._emit("messageDone",t.data),Pe(this,je,void 0,"f")}},ih=function(t){const r=ht(this,te,"m",sh).call(this,t);switch(Pe(this,Pn,r,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const i=t.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const s of i.step_details.tool_calls)s.index==ht(this,_a,"f")?this._emit("toolCallDelta",s,r.step_details.tool_calls[s.index]):(ht(this,De,"f")&&this._emit("toolCallDone",ht(this,De,"f")),Pe(this,_a,s.index,"f"),Pe(this,De,r.step_details.tool_calls[s.index],"f"),ht(this,De,"f")&&this._emit("toolCallCreated",ht(this,De,"f")));this._emit("runStepDelta",t.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Pe(this,Pn,void 0,"f"),t.data.step_details.type=="tool_calls"&&ht(this,De,"f")&&(this._emit("toolCallDone",ht(this,De,"f")),Pe(this,De,void 0,"f")),this._emit("runStepDone",t.data,r);break}},nh=function(t){ht(this,jl,"f").push(t),this._emit("event",t)},sh=function(t){switch(t.event){case"thread.run.step.created":return ht(this,ir,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let r=ht(this,ir,"f")[t.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let i=t.data;if(i.delta){const n=Ye.accumulateDelta(r,i.delta);ht(this,ir,"f")[t.data.id]=n}return ht(this,ir,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ht(this,ir,"f")[t.data.id]=t.data;break}if(ht(this,ir,"f")[t.data.id])return ht(this,ir,"f")[t.data.id];throw new Error("No snapshot available")},ah=function(t,r){let i=[];switch(t.event){case"thread.message.created":return[t.data,i];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=t.data;if(n.delta.content)for(const s of n.delta.content)if(s.index in r.content){let a=r.content[s.index];r.content[s.index]=ht(this,te,"m",oh).call(this,s,a)}else r.content[s.index]=s,i.push(s);return[r,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},oh=function(t,r){return Ye.accumulateDelta(r,t)},lh=function(t){switch(Pe(this,Ys,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Pe(this,Jr,t.data,"f"),ht(this,De,"f")&&(this._emit("toolCallDone",ht(this,De,"f")),Pe(this,De,void 0,"f"));break}};let Ea=class extends Ft{retrieve(t,r,i,n){return this._client.get(`/threads/${t}/messages/${r}/files/${i}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,r,i={},n){return fr(i)?this.list(t,r,{},i):this._client.getAPIList(`/threads/${t}/messages/${r}/files`,rc,{query:i,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}};class rc extends wr{}(function(e){e.MessageFilesPage=rc})(Ea||(Ea={}));class ka extends Ft{constructor(){super(...arguments),this.files=new Ea(this._client)}create(t,r,i){return this._client.post(`/threads/${t}/messages`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}retrieve(t,r,i){return this._client.get(`/threads/${t}/messages/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}update(t,r,i,n){return this._client.post(`/threads/${t}/messages/${r}`,{body:i,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,r={},i){return fr(r)?this.list(t,{},r):this._client.getAPIList(`/threads/${t}/messages`,ic,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class ic extends wr{}(function(e){e.MessagesPage=ic,e.Files=Ea,e.MessageFilesPage=rc})(ka||(ka={}));class Ma extends Ft{retrieve(t,r,i,n){return this._client.get(`/threads/${t}/runs/${r}/steps/${i}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,r,i={},n){return fr(i)?this.list(t,r,{},i):this._client.getAPIList(`/threads/${t}/runs/${r}/steps`,nc,{query:i,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}class nc extends wr{}(function(e){e.RunStepsPage=nc})(Ma||(Ma={}));class Pa extends Ft{constructor(){super(...arguments),this.steps=new Ma(this._client)}create(t,r,i){return this._client.post(`/threads/${t}/runs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers},stream:r.stream??!1})}retrieve(t,r,i){return this._client.get(`/threads/${t}/runs/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}update(t,r,i,n){return this._client.post(`/threads/${t}/runs/${r}`,{body:i,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,r={},i){return fr(r)?this.list(t,{},r):this._client.getAPIList(`/threads/${t}/runs`,sc,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}cancel(t,r,i){return this._client.post(`/threads/${t}/runs/${r}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}async createAndPoll(t,r,i){const n=await this.create(t,r,i);return await this.poll(t,n.id,i)}createAndStream(t,r,i){return Ye.createAssistantStream(t,this._client.beta.threads.runs,r,i)}async poll(t,r,i){const n={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const{data:s,response:a}=await this.retrieve(t,r,{...i,headers:{...i==null?void 0:i.headers,...n}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(i!=null&&i.pollIntervalMs)o=i.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Zu(o);break;case"requires_action":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(t,r,i){return Ye.createAssistantStream(t,this._client.beta.threads.runs,r,i)}submitToolOutputs(t,r,i,n){return this._client.post(`/threads/${t}/runs/${r}/submit_tool_outputs`,{body:i,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers},stream:i.stream??!1})}async submitToolOutputsAndPoll(t,r,i,n){const s=await this.submitToolOutputs(t,r,i,n);return await this.poll(t,s.id,n)}submitToolOutputsStream(t,r,i,n){return Ye.createToolAssistantStream(t,r,this._client.beta.threads.runs,i,n)}}class sc extends wr{}(function(e){e.RunsPage=sc,e.Steps=Ma,e.RunStepsPage=nc})(Pa||(Pa={}));class Da extends Ft{constructor(){super(...arguments),this.runs=new Pa(this._client),this.messages=new ka(this._client)}create(t={},r){return fr(t)?this.create({},t):this._client.post("/threads",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(t,r){return this._client.get(`/threads/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(t,r,i){return this._client.post(`/threads/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}del(t,r){return this._client.delete(`/threads/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}createAndRun(t,r){return this._client.post("/threads/runs",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers},stream:t.stream??!1})}async createAndRunPoll(t,r){const i=await this.createAndRun(t,r);return await this.runs.poll(i.thread_id,i.id,r)}createAndRunStream(t,r){return Ye.createThreadAssistantStream(t,this._client.beta.threads,r)}}(function(e){e.Runs=Pa,e.RunsPage=sc,e.Messages=ka,e.MessagesPage=ic})(Da||(Da={}));class Ta extends Ft{constructor(){super(...arguments),this.chat=new wa(this._client),this.assistants=new Sa(this._client),this.threads=new Da(this._client)}}(function(e){e.Chat=wa,e.Assistants=Sa,e.AssistantsPage=ec,e.Threads=Da})(Ta||(Ta={}));class Ra extends Ft{create(t,r){return this._client.post("/completions",{body:t,...r,stream:t.stream??!1})}}Ra||(Ra={});class Aa extends Ft{create(t,r){return this._client.post("/embeddings",{body:t,...r})}}Aa||(Aa={});class Oa extends Ft{create(t,r){return this._client.post("/files",Gn({body:t,...r}))}retrieve(t,r){return this._client.get(`/files/${t}`,r)}list(t={},r){return fr(t)?this.list({},t):this._client.getAPIList("/files",ac,{query:t,...r})}del(t,r){return this._client.delete(`/files/${t}`,r)}content(t,r){return this._client.get(`/files/${t}/content`,{...r,__binaryResponse:!0})}retrieveContent(t,r){return this._client.get(`/files/${t}/content`,{...r,headers:{Accept:"application/json",...r==null?void 0:r.headers}})}async waitForProcessing(t,{pollInterval:r=5e3,maxWait:i=30*60*1e3}={}){const n=new Set(["processed","error","deleted"]),s=Date.now();let a=await this.retrieve(t);for(;!a.status||!n.has(a.status);)if(await Zu(r),a=await this.retrieve(t),Date.now()-s>i)throw new Ju({message:`Giving up on waiting for file ${t} to finish processing after ${i} milliseconds.`});return a}}class ac extends Qu{}(function(e){e.FileObjectsPage=ac})(Oa||(Oa={}));class Ia extends Ft{create(t,r){return this._client.post("/fine_tuning/jobs",{body:t,...r})}retrieve(t,r){return this._client.get(`/fine_tuning/jobs/${t}`,r)}list(t={},r){return fr(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",oc,{query:t,...r})}cancel(t,r){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,r)}listEvents(t,r={},i){return fr(r)?this.listEvents(t,{},r):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,lc,{query:r,...i})}}class oc extends wr{}class lc extends wr{}(function(e){e.FineTuningJobsPage=oc,e.FineTuningJobEventsPage=lc})(Ia||(Ia={}));class Ba extends Ft{constructor(){super(...arguments),this.jobs=new Ia(this._client)}}(function(e){e.Jobs=Ia,e.FineTuningJobsPage=oc,e.FineTuningJobEventsPage=lc})(Ba||(Ba={}));class La extends Ft{createVariation(t,r){return this._client.post("/images/variations",Gn({body:t,...r}))}edit(t,r){return this._client.post("/images/edits",Gn({body:t,...r}))}generate(t,r){return this._client.post("/images/generations",{body:t,...r})}}La||(La={});class Fa extends Ft{retrieve(t,r){return this._client.get(`/models/${t}`,r)}list(t){return this._client.getAPIList("/models",uc,t)}del(t,r){return this._client.delete(`/models/${t}`,r)}}class uc extends Qu{}(function(e){e.ModelsPage=uc})(Fa||(Fa={}));class za extends Ft{create(t,r){return this._client.post("/moderations",{body:t,...r})}}za||(za={});var $v;class Zt extends cC{constructor({baseURL:t=Vo("OPENAI_BASE_URL"),apiKey:r=Vo("OPENAI_API_KEY"),organization:i=Vo("OPENAI_ORG_ID")??null,...n}={}){if(r===void 0)throw new _t("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:r,organization:i,...n,baseURL:t||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&SC())throw new _t(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new Ra(this),this.chat=new va(this),this.embeddings=new Aa(this),this.files=new Oa(this),this.images=new La(this),this.audio=new ba(this),this.moderations=new za(this),this.models=new Fa(this),this.fineTuning=new Ba(this),this.beta=new Ta(this),this._options=s,this.apiKey=r,this.organization=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}$v=Zt;Zt.OpenAI=$v;Zt.OpenAIError=_t;Zt.APIError=ne;Zt.APIConnectionError=co;Zt.APIConnectionTimeoutError=Ju;Zt.APIUserAbortError=Re;Zt.NotFoundError=kv;Zt.ConflictError=Mv;Zt.RateLimitError=Dv;Zt.BadRequestError=wv;Zt.AuthenticationError=_v;Zt.InternalServerError=Tv;Zt.PermissionDeniedError=Ev;Zt.UnprocessableEntityError=Pv;(function(e){e.toFile=Bv,e.fileFromPath=Sv,e.Page=Qu,e.CursorPage=wr,e.Completions=Ra,e.Chat=va,e.Embeddings=Aa,e.Files=Oa,e.FileObjectsPage=ac,e.Images=La,e.Audio=ba,e.Moderations=za,e.Models=Fa,e.ModelsPage=uc,e.FineTuning=Ba,e.Beta=Ta})(Zt||(Zt={}));const _C=Zt,EC="/StickerEditor/assets/Loading-Blt9h-Iq.gif",kC={class:"px-20 py-10"},MC=Dt("p",{class:"text-xl font-bold"},"Prompt",-1),PC=["disabled"],DC={key:0,class:"flex items-center justify-center mt-5"},TC=["src"],RC=["src"],AC={__name:"Generate",setup(e){const t=new _C({organization:"org-XXygSipTZ0fjqKM619BA11Cp",apiKey:"",dangerouslyAllowBrowser:!0});let r=Se(null),i=Se(""),n=Se(""),s=Se(!1);const a=async()=>{if(!s.value)try{s.value=!0,r.value=await t.images.generate({model:"dall-e-3",prompt:i.value,n:1,size:"1024x1024"}),n.value=r.value.data[0].url,console.log(n.value)}catch(o){console.error("Error generating image:",o)}finally{s.value=!1}};return(o,l)=>(Yt(),re("main",kC,[MC,Kg(Dt("textarea",{"onUpdate:modelValue":l[0]||(l[0]=u=>le(i)?i.value=u:i=u),class:"border-2 border-black px-5 py-2 w-[600px] h-[200px]",maxlength:"1000",placeholder:"Enter your prompt (max 1000 words)"},null,512),[[f0,ee(i)]]),Dt("button",{onClick:a,disabled:ee(s),class:"border-2 border-black px-5 py-2 bg-black text-white font-bold",type:"button"},dc(ee(s)?"Loading...":"Generate"),9,PC),Dt("p",null,"Image-url: "+dc(ee(n)),1),ee(s)?(Yt(),re("div",DC,[Dt("img",{src:ee(EC),alt:"Loading..."},null,8,TC)])):ee(n)?(Yt(),re("img",{key:1,class:"w-[1024px] h-[1024px] border border-black mt-5",src:ee(n),alt:"Generated Image"},null,8,RC)):nd("",!0)]))}},OC={class:"m-0 p-0 box-border min-w-[1440px] min-h-screen overflow-hidden mx-auto"},IC={__name:"App",setup(e){return(t,r)=>(Yt(),re(xe,null,[Dt("main",OC,[Ce(US)]),Ce(AC,{class:"hidden"})],64))}};p0(IC).mount("#app");
