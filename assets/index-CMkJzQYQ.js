(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function sa(t,e){const r=new Set(t.split(","));return i=>r.has(i)}const At={},ei=[],_e=()=>{},hd=()=>!1,vo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),aa=t=>t.startsWith("onUpdate:"),Zt=Object.assign,la=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},dd=Object.prototype.hasOwnProperty,_t=(t,e)=>dd.call(t,e),mt=Array.isArray,ri=t=>go(t)==="[object Map]",Zu=t=>go(t)==="[object Set]",St=t=>typeof t=="function",Yt=t=>typeof t=="string",gi=t=>typeof t=="symbol",Rt=t=>t!==null&&typeof t=="object",Ju=t=>(Rt(t)||St(t))&&St(t.then)&&St(t.catch),Qu=Object.prototype.toString,go=t=>Qu.call(t),pd=t=>go(t).slice(8,-1),tc=t=>go(t)==="[object Object]",ua=t=>Yt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ii=sa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mo=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},vd=/-(\w)/g,ai=mo(t=>t.replace(vd,(e,r)=>r?r.toUpperCase():"")),gd=/\B([A-Z])/g,mi=mo(t=>t.replace(gd,"-$1").toLowerCase()),ec=mo(t=>t.charAt(0).toUpperCase()+t.slice(1)),Yo=mo(t=>t?`on${ec(t)}`:""),yr=(t,e)=>!Object.is(t,e),$o=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},Kn=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},md=t=>{const e=parseFloat(t);return isNaN(e)?t:e},yd=t=>{const e=Yt(t)?Number(t):NaN;return isNaN(e)?t:e};let pl;const rc=()=>pl||(pl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function nn(t){if(mt(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],n=Yt(i)?Sd(i):nn(i);if(n)for(const o in n)e[o]=n[o]}return e}else if(Yt(t)||Rt(t))return t}const bd=/;(?![^(]*\))/g,xd=/:([^]+)/,Cd=/\/\*[^]*?\*\//g;function Sd(t){const e={};return t.replace(Cd,"").split(bd).forEach(r=>{if(r){const i=r.split(xd);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Gt(t){let e="";if(Yt(t))e=t;else if(mt(t))for(let r=0;r<t.length;r++){const i=Gt(t[r]);i&&(e+=i+" ")}else if(Rt(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const _d="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wd=sa(_d);function ic(t){return!!t||t===""}const vl=t=>Yt(t)?t:t==null?"":mt(t)||Rt(t)&&(t.toString===Qu||!St(t.toString))?JSON.stringify(t,nc,2):String(t),nc=(t,e)=>e&&e.__v_isRef?nc(t,e.value):ri(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,n],o)=>(r[Xo(i,o)+" =>"]=n,r),{})}:Zu(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Xo(r))}:gi(e)?Xo(e):Rt(e)&&!mt(e)&&!tc(e)?String(e):e,Xo=(t,e="")=>{var r;return gi(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Te;class kd{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Te,!e&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=Te;try{return Te=this,e()}finally{Te=r}}}on(){Te=this}off(){Te=this.parent}stop(e){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function Ed(t,e=Te){e&&e.active&&e.effects.push(t)}function Md(){return Te}let Lr;class ca{constructor(e,r,i,n){this.fn=e,this.trigger=r,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Ed(this,n)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Wr();for(let e=0;e<this._depsLength;e++){const r=this.deps[e];if(r.computed&&(Dd(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Vr()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=vr,r=Lr;try{return vr=!0,Lr=this,this._runnings++,gl(this),this.fn()}finally{ml(this),this._runnings--,Lr=r,vr=e}}stop(){var e;this.active&&(gl(this),ml(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function Dd(t){return t.value}function gl(t){t._trackId++,t._depsLength=0}function ml(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)oc(t.deps[e],t);t.deps.length=t._depsLength}}function oc(t,e){const r=t.get(e);r!==void 0&&e._trackId!==r&&(t.delete(e),t.size===0&&t.cleanup())}let vr=!0,ys=0;const sc=[];function Wr(){sc.push(vr),vr=!1}function Vr(){const t=sc.pop();vr=t===void 0?!0:t}function fa(){ys++}function ha(){for(ys--;!ys&&bs.length;)bs.shift()()}function ac(t,e,r){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const i=t.deps[t._depsLength];i!==e?(i&&oc(i,t),t.deps[t._depsLength++]=e):t._depsLength++}}const bs=[];function lc(t,e,r){fa();for(const i of t.keys()){let n;i._dirtyLevel<e&&(n??(n=t.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(n??(n=t.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&bs.push(i.scheduler)))}ha()}const uc=(t,e)=>{const r=new Map;return r.cleanup=t,r.computed=e,r},xs=new WeakMap,zr=Symbol(""),Cs=Symbol("");function pe(t,e,r){if(vr&&Lr){let i=xs.get(t);i||xs.set(t,i=new Map);let n=i.get(r);n||i.set(r,n=uc(()=>i.delete(r))),ac(Lr,n)}}function qe(t,e,r,i,n,o){const s=xs.get(t);if(!s)return;let a=[];if(e==="clear")a=[...s.values()];else if(r==="length"&&mt(t)){const l=Number(i);s.forEach((u,c)=>{(c==="length"||!gi(c)&&c>=l)&&a.push(u)})}else switch(r!==void 0&&a.push(s.get(r)),e){case"add":mt(t)?ua(r)&&a.push(s.get("length")):(a.push(s.get(zr)),ri(t)&&a.push(s.get(Cs)));break;case"delete":mt(t)||(a.push(s.get(zr)),ri(t)&&a.push(s.get(Cs)));break;case"set":ri(t)&&a.push(s.get(zr));break}fa();for(const l of a)l&&lc(l,4);ha()}const Td=sa("__proto__,__v_isRef,__isVue"),cc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(gi)),yl=Pd();function Pd(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const i=kt(this);for(let o=0,s=this.length;o<s;o++)pe(i,"get",o+"");const n=i[e](...r);return n===-1||n===!1?i[e](...r.map(kt)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Wr(),fa();const i=kt(this)[e].apply(this,r);return ha(),Vr(),i}}),t}function Bd(t){const e=kt(this);return pe(e,"has",t),e.hasOwnProperty(t)}class fc{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,i){const n=this._isReadonly,o=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return o;if(r==="__v_raw")return i===(n?o?jd:vc:o?pc:dc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const s=mt(e);if(!n){if(s&&_t(yl,r))return Reflect.get(yl,r,i);if(r==="hasOwnProperty")return Bd}const a=Reflect.get(e,r,i);return(gi(r)?cc.has(r):Td(r))||(n||pe(e,"get",r),o)?a:ve(a)?s&&ua(r)?a:a.value:Rt(a)?n?gc(a):bo(a):a}}class hc extends fc{constructor(e=!1){super(!1,e)}set(e,r,i,n){let o=e[r];if(!this._isShallow){const l=li(o);if(!Zn(i)&&!li(i)&&(o=kt(o),i=kt(i)),!mt(e)&&ve(o)&&!ve(i))return l?!1:(o.value=i,!0)}const s=mt(e)&&ua(r)?Number(r)<e.length:_t(e,r),a=Reflect.set(e,r,i,n);return e===kt(n)&&(s?yr(i,o)&&qe(e,"set",r,i):qe(e,"add",r,i)),a}deleteProperty(e,r){const i=_t(e,r);e[r];const n=Reflect.deleteProperty(e,r);return n&&i&&qe(e,"delete",r,void 0),n}has(e,r){const i=Reflect.has(e,r);return(!gi(r)||!cc.has(r))&&pe(e,"has",r),i}ownKeys(e){return pe(e,"iterate",mt(e)?"length":zr),Reflect.ownKeys(e)}}class Id extends fc{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const Od=new hc,Rd=new Id,Ad=new hc(!0),da=t=>t,yo=t=>Reflect.getPrototypeOf(t);function Cn(t,e,r=!1,i=!1){t=t.__v_raw;const n=kt(t),o=kt(e);r||(yr(e,o)&&pe(n,"get",e),pe(n,"get",o));const{has:s}=yo(n),a=i?da:r?ga:ji;if(s.call(n,e))return a(t.get(e));if(s.call(n,o))return a(t.get(o));t!==n&&t.get(e)}function Sn(t,e=!1){const r=this.__v_raw,i=kt(r),n=kt(t);return e||(yr(t,n)&&pe(i,"has",t),pe(i,"has",n)),t===n?r.has(t):r.has(t)||r.has(n)}function _n(t,e=!1){return t=t.__v_raw,!e&&pe(kt(t),"iterate",zr),Reflect.get(t,"size",t)}function bl(t){t=kt(t);const e=kt(this);return yo(e).has.call(e,t)||(e.add(t),qe(e,"add",t,t)),this}function xl(t,e){e=kt(e);const r=kt(this),{has:i,get:n}=yo(r);let o=i.call(r,t);o||(t=kt(t),o=i.call(r,t));const s=n.call(r,t);return r.set(t,e),o?yr(e,s)&&qe(r,"set",t,e):qe(r,"add",t,e),this}function Cl(t){const e=kt(this),{has:r,get:i}=yo(e);let n=r.call(e,t);n||(t=kt(t),n=r.call(e,t)),i&&i.call(e,t);const o=e.delete(t);return n&&qe(e,"delete",t,void 0),o}function Sl(){const t=kt(this),e=t.size!==0,r=t.clear();return e&&qe(t,"clear",void 0,void 0),r}function wn(t,e){return function(i,n){const o=this,s=o.__v_raw,a=kt(s),l=e?da:t?ga:ji;return!t&&pe(a,"iterate",zr),s.forEach((u,c)=>i.call(n,l(u),l(c),o))}}function kn(t,e,r){return function(...i){const n=this.__v_raw,o=kt(n),s=ri(o),a=t==="entries"||t===Symbol.iterator&&s,l=t==="keys"&&s,u=n[t](...i),c=r?da:e?ga:ji;return!e&&pe(o,"iterate",l?Cs:zr),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:a?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function nr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ld(){const t={get(o){return Cn(this,o)},get size(){return _n(this)},has:Sn,add:bl,set:xl,delete:Cl,clear:Sl,forEach:wn(!1,!1)},e={get(o){return Cn(this,o,!1,!0)},get size(){return _n(this)},has:Sn,add:bl,set:xl,delete:Cl,clear:Sl,forEach:wn(!1,!0)},r={get(o){return Cn(this,o,!0)},get size(){return _n(this,!0)},has(o){return Sn.call(this,o,!0)},add:nr("add"),set:nr("set"),delete:nr("delete"),clear:nr("clear"),forEach:wn(!0,!1)},i={get(o){return Cn(this,o,!0,!0)},get size(){return _n(this,!0)},has(o){return Sn.call(this,o,!0)},add:nr("add"),set:nr("set"),delete:nr("delete"),clear:nr("clear"),forEach:wn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=kn(o,!1,!1),r[o]=kn(o,!0,!1),e[o]=kn(o,!1,!0),i[o]=kn(o,!0,!0)}),[t,r,e,i]}const[zd,Nd,Gd,Fd]=Ld();function pa(t,e){const r=e?t?Fd:Gd:t?Nd:zd;return(i,n,o)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(_t(r,n)&&n in i?r:i,n,o)}const Hd={get:pa(!1,!1)},Wd={get:pa(!1,!0)},Vd={get:pa(!0,!1)},dc=new WeakMap,pc=new WeakMap,vc=new WeakMap,jd=new WeakMap;function Yd(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $d(t){return t.__v_skip||!Object.isExtensible(t)?0:Yd(pd(t))}function bo(t){return li(t)?t:va(t,!1,Od,Hd,dc)}function Xd(t){return va(t,!1,Ad,Wd,pc)}function gc(t){return va(t,!0,Rd,Vd,vc)}function va(t,e,r,i,n){if(!Rt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=n.get(t);if(o)return o;const s=$d(t);if(s===0)return t;const a=new Proxy(t,s===2?i:r);return n.set(t,a),a}function ii(t){return li(t)?ii(t.__v_raw):!!(t&&t.__v_isReactive)}function li(t){return!!(t&&t.__v_isReadonly)}function Zn(t){return!!(t&&t.__v_isShallow)}function mc(t){return ii(t)||li(t)}function kt(t){const e=t&&t.__v_raw;return e?kt(e):t}function yc(t){return Object.isExtensible(t)&&Kn(t,"__v_skip",!0),t}const ji=t=>Rt(t)?bo(t):t,ga=t=>Rt(t)?gc(t):t;class bc{constructor(e,r,i,n){this.getter=e,this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ca(()=>e(this._value),()=>Vn(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const e=kt(this);return(!e._cacheable||e.effect.dirty)&&yr(e._value,e._value=e.effect.run())&&Vn(e,4),xc(e),e.effect._dirtyLevel>=2&&Vn(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Ud(t,e,r=!1){let i,n;const o=St(t);return o?(i=t,n=_e):(i=t.get,n=t.set),new bc(i,n,o||!n,r)}function xc(t){var e;vr&&Lr&&(t=kt(t),ac(Lr,(e=t.dep)!=null?e:t.dep=uc(()=>t.dep=void 0,t instanceof bc?t:void 0)))}function Vn(t,e=4,r){t=kt(t);const i=t.dep;i&&lc(i,e)}function ve(t){return!!(t&&t.__v_isRef===!0)}function Vt(t){return qd(t,!1)}function qd(t,e){return ve(t)?t:new Kd(t,e)}class Kd{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:kt(e),this._value=r?e:ji(e)}get value(){return xc(this),this._value}set value(e){const r=this.__v_isShallow||Zn(e)||li(e);e=r?e:kt(e),yr(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:ji(e),Vn(this,4))}}function hr(t){return ve(t)?t.value:t}const Zd={get:(t,e,r)=>hr(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const n=t[e];return ve(n)&&!ve(r)?(n.value=r,!0):Reflect.set(t,e,r,i)}};function Cc(t){return ii(t)?t:new Proxy(t,Zd)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gr(t,e,r,i){try{return i?t(...i):t()}catch(n){xo(n,e,r)}}function we(t,e,r,i){if(St(t)){const o=gr(t,e,r,i);return o&&Ju(o)&&o.catch(s=>{xo(s,e,r)}),o}const n=[];for(let o=0;o<t.length;o++)n.push(we(t[o],e,r,i));return n}function xo(t,e,r,i=!0){const n=e?e.vnode:null;if(e){let o=e.parent;const s=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,s,a)===!1)return}o=o.parent}const l=e.appContext.config.errorHandler;if(l){gr(l,null,10,[t,s,a]);return}}Jd(t,r,n,i)}function Jd(t,e,r,i=!0){console.error(t)}let Yi=!1,Ss=!1;const te=[];let Ve=0;const ni=[];let lr=null,Tr=0;const Sc=Promise.resolve();let ma=null;function _c(t){const e=ma||Sc;return t?e.then(this?t.bind(this):t):e}function Qd(t){let e=Ve+1,r=te.length;for(;e<r;){const i=e+r>>>1,n=te[i],o=$i(n);o<t||o===t&&n.pre?e=i+1:r=i}return e}function ya(t){(!te.length||!te.includes(t,Yi&&t.allowRecurse?Ve+1:Ve))&&(t.id==null?te.push(t):te.splice(Qd(t.id),0,t),wc())}function wc(){!Yi&&!Ss&&(Ss=!0,ma=Sc.then(Ec))}function tp(t){const e=te.indexOf(t);e>Ve&&te.splice(e,1)}function ep(t){mt(t)?ni.push(...t):(!lr||!lr.includes(t,t.allowRecurse?Tr+1:Tr))&&ni.push(t),wc()}function _l(t,e,r=Yi?Ve+1:0){for(;r<te.length;r++){const i=te[r];if(i&&i.pre){if(t&&i.id!==t.uid)continue;te.splice(r,1),r--,i()}}}function kc(t){if(ni.length){const e=[...new Set(ni)].sort((r,i)=>$i(r)-$i(i));if(ni.length=0,lr){lr.push(...e);return}for(lr=e,Tr=0;Tr<lr.length;Tr++)lr[Tr]();lr=null,Tr=0}}const $i=t=>t.id==null?1/0:t.id,rp=(t,e)=>{const r=$i(t)-$i(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function Ec(t){Ss=!1,Yi=!0,te.sort(rp);try{for(Ve=0;Ve<te.length;Ve++){const e=te[Ve];e&&e.active!==!1&&gr(e,null,14)}}finally{Ve=0,te.length=0,kc(),Yi=!1,ma=null,(te.length||ni.length)&&Ec()}}function ip(t,e,...r){if(t.isUnmounted)return;const i=t.vnode.props||At;let n=r;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in i){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:h}=i[c]||At;h&&(n=r.map(d=>Yt(d)?d.trim():d)),f&&(n=r.map(md))}let a,l=i[a=Yo(e)]||i[a=Yo(ai(e))];!l&&o&&(l=i[a=Yo(mi(e))]),l&&we(l,t,6,n);const u=i[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,we(u,t,6,n)}}function Mc(t,e,r=!1){const i=e.emitsCache,n=i.get(t);if(n!==void 0)return n;const o=t.emits;let s={},a=!1;if(!St(t)){const l=u=>{const c=Mc(u,e,!0);c&&(a=!0,Zt(s,c))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(Rt(t)&&i.set(t,null),null):(mt(o)?o.forEach(l=>s[l]=null):Zt(s,o),Rt(t)&&i.set(t,s),s)}function Co(t,e){return!t||!vo(e)?!1:(e=e.slice(2).replace(/Once$/,""),_t(t,e[0].toLowerCase()+e.slice(1))||_t(t,mi(e))||_t(t,e))}let Oe=null,So=null;function Jn(t){const e=Oe;return Oe=t,So=t&&t.type.__scopeId||null,e}function _o(t){So=t}function wo(){So=null}function Oi(t,e=Oe,r){if(!e||t._n)return t;const i=(...n)=>{i._d&&Rl(-1);const o=Jn(e);let s;try{s=t(...n)}finally{Jn(o),i._d&&Rl(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function Uo(t){const{type:e,vnode:r,proxy:i,withProxy:n,props:o,propsOptions:[s],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=t;let g,m;const b=Jn(t);try{if(r.shapeFlag&4){const S=n||i,w=S;g=We(c.call(w,S,f,o,d,h,p)),m=l}else{const S=e;g=We(S.length>1?S(o,{attrs:l,slots:a,emit:u}):S(o,null)),m=e.props?l:np(l)}}catch(S){zi.length=0,xo(S,t,1),g=Lt(Ae)}let C=g;if(m&&v!==!1){const S=Object.keys(m),{shapeFlag:w}=C;S.length&&w&7&&(s&&S.some(aa)&&(m=op(m,s)),C=br(C,m))}return r.dirs&&(C=br(C),C.dirs=C.dirs?C.dirs.concat(r.dirs):r.dirs),r.transition&&(C.transition=r.transition),g=C,Jn(b),g}const np=t=>{let e;for(const r in t)(r==="class"||r==="style"||vo(r))&&((e||(e={}))[r]=t[r]);return e},op=(t,e)=>{const r={};for(const i in t)(!aa(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function sp(t,e,r){const{props:i,children:n,component:o}=t,{props:s,children:a,patchFlag:l}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?wl(i,s,u):!!s;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(s[h]!==i[h]&&!Co(u,h))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===s?!1:i?s?wl(i,s,u):!0:!!s;return!1}function wl(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const o=i[n];if(e[o]!==t[o]&&!Co(r,o))return!0}return!1}function ap({vnode:t,parent:e},r){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=r,e=e.parent;else break}}const lp=Symbol.for("v-ndc"),up=t=>t.__isSuspense;function cp(t,e){e&&e.pendingBranch?mt(t)?e.effects.push(...t):e.effects.push(t):ep(t)}const fp=Symbol.for("v-scx"),hp=()=>ke(fp),En={};function Ri(t,e,r){return Dc(t,e,r)}function Dc(t,e,{immediate:r,deep:i,flush:n,once:o,onTrack:s,onTrigger:a}=At){if(e&&o){const y=e;e=(..._)=>{y(..._),w()}}const l=ee,u=y=>i===!0?y:qr(y,i===!1?1:void 0);let c,f=!1,h=!1;if(ve(t)?(c=()=>t.value,f=Zn(t)):ii(t)?(c=()=>u(t),f=!0):mt(t)?(h=!0,f=t.some(y=>ii(y)||Zn(y)),c=()=>t.map(y=>{if(ve(y))return y.value;if(ii(y))return u(y);if(St(y))return gr(y,l,2)})):St(t)?e?c=()=>gr(t,l,2):c=()=>(d&&d(),we(t,l,3,[p])):c=_e,e&&i){const y=c;c=()=>qr(y())}let d,p=y=>{d=C.onStop=()=>{gr(y,l,4),d=C.onStop=void 0}},v;if(To)if(p=_e,e?r&&we(e,l,3,[c(),h?[]:void 0,p]):c(),n==="sync"){const y=hp();v=y.__watcherHandles||(y.__watcherHandles=[])}else return _e;let g=h?new Array(t.length).fill(En):En;const m=()=>{if(!(!C.active||!C.dirty))if(e){const y=C.run();(i||f||(h?y.some((_,x)=>yr(_,g[x])):yr(y,g)))&&(d&&d(),we(e,l,3,[y,g===En?void 0:h&&g[0]===En?[]:g,p]),g=y)}else C.run()};m.allowRecurse=!!e;let b;n==="sync"?b=m:n==="post"?b=()=>fe(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),b=()=>ya(m));const C=new ca(c,_e,b),S=Md(),w=()=>{C.stop(),S&&la(S.effects,C)};return e?r?m():g=C.run():n==="post"?fe(C.run.bind(C),l&&l.suspense):C.run(),v&&v.push(w),w}function dp(t,e,r){const i=this.proxy,n=Yt(t)?t.includes(".")?Tc(i,t):()=>i[t]:t.bind(i,i);let o;St(e)?o=e:(o=e.handler,r=e);const s=on(this),a=Dc(n,o.bind(i),r);return s(),a}function Tc(t,e){const r=e.split(".");return()=>{let i=t;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function qr(t,e,r=0,i){if(!Rt(t)||t.__v_skip)return t;if(e&&e>0){if(r>=e)return t;r++}if(i=i||new Set,i.has(t))return t;if(i.add(t),ve(t))qr(t.value,e,r,i);else if(mt(t))for(let n=0;n<t.length;n++)qr(t[n],e,r,i);else if(Zu(t)||ri(t))t.forEach(n=>{qr(n,e,r,i)});else if(tc(t))for(const n in t)qr(t[n],e,r,i);return t}function wr(t,e,r,i){const n=t.dirs,o=e&&e.dirs;for(let s=0;s<n.length;s++){const a=n[s];o&&(a.oldValue=o[s].value);let l=a.dir[i];l&&(Wr(),we(l,r,8,[t.el,a,t,e]),Vr())}}const ur=Symbol("_leaveCb"),Mn=Symbol("_enterCb");function pp(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ba(()=>{t.isMounted=!0}),Rc(()=>{t.isUnmounting=!0}),t}const Ce=[Function,Array],Pc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ce,onEnter:Ce,onAfterEnter:Ce,onEnterCancelled:Ce,onBeforeLeave:Ce,onLeave:Ce,onAfterLeave:Ce,onLeaveCancelled:Ce,onBeforeAppear:Ce,onAppear:Ce,onAfterAppear:Ce,onAppearCancelled:Ce},vp={name:"BaseTransition",props:Pc,setup(t,{slots:e}){const r=tv(),i=pp();return()=>{const n=e.default&&Ic(e.default(),!0);if(!n||!n.length)return;let o=n[0];if(n.length>1){for(const h of n)if(h.type!==Ae){o=h;break}}const s=kt(t),{mode:a}=s;if(i.isLeaving)return qo(o);const l=kl(o);if(!l)return qo(o);const u=_s(l,s,i,r);ws(l,u);const c=r.subTree,f=c&&kl(c);if(f&&f.type!==Ae&&!Pr(l,f)){const h=_s(f,s,i,r);if(ws(f,h),a==="out-in")return i.isLeaving=!0,h.afterLeave=()=>{i.isLeaving=!1,r.update.active!==!1&&(r.effect.dirty=!0,r.update())},qo(o);a==="in-out"&&l.type!==Ae&&(h.delayLeave=(d,p,v)=>{const g=Bc(i,f);g[String(f.key)]=f,d[ur]=()=>{p(),d[ur]=void 0,delete u.delayedLeave},u.delayedLeave=v})}return o}}},gp=vp;function Bc(t,e){const{leavingVNodes:r}=t;let i=r.get(e.type);return i||(i=Object.create(null),r.set(e.type,i)),i}function _s(t,e,r,i){const{appear:n,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:v,onAppear:g,onAfterAppear:m,onAppearCancelled:b}=e,C=String(t.key),S=Bc(r,t),w=(x,k)=>{x&&we(x,i,9,k)},y=(x,k)=>{const E=k[1];w(x,k),mt(x)?x.every(O=>O.length<=1)&&E():x.length<=1&&E()},_={mode:o,persisted:s,beforeEnter(x){let k=a;if(!r.isMounted)if(n)k=v||a;else return;x[ur]&&x[ur](!0);const E=S[C];E&&Pr(t,E)&&E.el[ur]&&E.el[ur](),w(k,[x])},enter(x){let k=l,E=u,O=c;if(!r.isMounted)if(n)k=g||l,E=m||u,O=b||c;else return;let D=!1;const T=x[Mn]=R=>{D||(D=!0,R?w(O,[x]):w(E,[x]),_.delayedLeave&&_.delayedLeave(),x[Mn]=void 0)};k?y(k,[x,T]):T()},leave(x,k){const E=String(t.key);if(x[Mn]&&x[Mn](!0),r.isUnmounting)return k();w(f,[x]);let O=!1;const D=x[ur]=T=>{O||(O=!0,k(),T?w(p,[x]):w(d,[x]),x[ur]=void 0,S[E]===t&&delete S[E])};S[E]=t,h?y(h,[x,D]):D()},clone(x){return _s(x,e,r,i)}};return _}function qo(t){if(ko(t))return t=br(t),t.children=null,t}function kl(t){return ko(t)?t.children?t.children[0]:void 0:t}function ws(t,e){t.shapeFlag&6&&t.component?ws(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ic(t,e=!1,r){let i=[],n=0;for(let o=0;o<t.length;o++){let s=t[o];const a=r==null?s.key:String(r)+String(s.key!=null?s.key:o);s.type===le?(s.patchFlag&128&&n++,i=i.concat(Ic(s.children,e,a))):(e||s.type!==Ae)&&i.push(a!=null?br(s,{key:a}):s)}if(n>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function mp(t,e){return St(t)?Zt({name:t.name},e,{setup:t}):t}const jn=t=>!!t.type.__asyncLoader,ko=t=>t.type.__isKeepAlive;function yp(t,e){Oc(t,"a",e)}function bp(t,e){Oc(t,"da",e)}function Oc(t,e,r=ee){const i=t.__wdc||(t.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Eo(e,i,r),r){let n=r.parent;for(;n&&n.parent;)ko(n.parent.vnode)&&xp(i,e,r,n),n=n.parent}}function xp(t,e,r,i){const n=Eo(e,t,i,!0);Ac(()=>{la(i[e],n)},r)}function Eo(t,e,r=ee,i=!1){if(r){const n=r[t]||(r[t]=[]),o=e.__weh||(e.__weh=(...s)=>{if(r.isUnmounted)return;Wr();const a=on(r),l=we(e,r,t,s);return a(),Vr(),l});return i?n.unshift(o):n.push(o),o}}const rr=t=>(e,r=ee)=>(!To||t==="sp")&&Eo(t,(...i)=>e(...i),r),Cp=rr("bm"),ba=rr("m"),Sp=rr("bu"),_p=rr("u"),Rc=rr("bum"),Ac=rr("um"),wp=rr("sp"),kp=rr("rtg"),Ep=rr("rtc");function Mp(t,e=ee){Eo("ec",t,e)}function Xi(t,e,r,i){let n;const o=r;if(mt(t)||Yt(t)){n=new Array(t.length);for(let s=0,a=t.length;s<a;s++)n[s]=e(t[s],s,void 0,o)}else if(typeof t=="number"){n=new Array(t);for(let s=0;s<t;s++)n[s]=e(s+1,s,void 0,o)}else if(Rt(t))if(t[Symbol.iterator])n=Array.from(t,(s,a)=>e(s,a,void 0,o));else{const s=Object.keys(t);n=new Array(s.length);for(let a=0,l=s.length;a<l;a++){const u=s[a];n[a]=e(t[u],u,a,o)}}else n=[];return n}const ks=t=>t?qc(t)?_a(t)||t.proxy:ks(t.parent):null,Ai=Zt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ks(t.parent),$root:t=>ks(t.root),$emit:t=>t.emit,$options:t=>xa(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,ya(t.update)}),$nextTick:t=>t.n||(t.n=_c.bind(t.proxy)),$watch:t=>dp.bind(t)}),Ko=(t,e)=>t!==At&&!t.__isScriptSetup&&_t(t,e),Dp={get({_:t},e){const{ctx:r,setupState:i,data:n,props:o,accessCache:s,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const d=s[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return n[e];case 4:return r[e];case 3:return o[e]}else{if(Ko(i,e))return s[e]=1,i[e];if(n!==At&&_t(n,e))return s[e]=2,n[e];if((u=t.propsOptions[0])&&_t(u,e))return s[e]=3,o[e];if(r!==At&&_t(r,e))return s[e]=4,r[e];Es&&(s[e]=0)}}const c=Ai[e];let f,h;if(c)return e==="$attrs"&&pe(t,"get",e),c(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(r!==At&&_t(r,e))return s[e]=4,r[e];if(h=l.config.globalProperties,_t(h,e))return h[e]},set({_:t},e,r){const{data:i,setupState:n,ctx:o}=t;return Ko(n,e)?(n[e]=r,!0):i!==At&&_t(i,e)?(i[e]=r,!0):_t(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:n,propsOptions:o}},s){let a;return!!r[s]||t!==At&&_t(t,s)||Ko(e,s)||(a=o[0])&&_t(a,s)||_t(i,s)||_t(Ai,s)||_t(n.config.globalProperties,s)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:_t(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function El(t){return mt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Es=!0;function Tp(t){const e=xa(t),r=t.proxy,i=t.ctx;Es=!1,e.beforeCreate&&Ml(e.beforeCreate,t,"bc");const{data:n,computed:o,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:C,unmounted:S,render:w,renderTracked:y,renderTriggered:_,errorCaptured:x,serverPrefetch:k,expose:E,inheritAttrs:O,components:D,directives:T,filters:R}=e;if(u&&Pp(u,i,null),s)for(const W in s){const N=s[W];St(N)&&(i[W]=N.bind(r))}if(n){const W=n.call(r,r);Rt(W)&&(t.data=bo(W))}if(Es=!0,o)for(const W in o){const N=o[W],U=St(N)?N.bind(r,r):St(N.get)?N.get.bind(r,r):_e,Z=!St(N)&&St(N.set)?N.set.bind(r):_e,F=Zc({get:U,set:Z});Object.defineProperty(i,W,{enumerable:!0,configurable:!0,get:()=>F.value,set:tt=>F.value=tt})}if(a)for(const W in a)Lc(a[W],i,r,W);if(l){const W=St(l)?l.call(r):l;Reflect.ownKeys(W).forEach(N=>{Dr(N,W[N])})}c&&Ml(c,t,"c");function H(W,N){mt(N)?N.forEach(U=>W(U.bind(r))):N&&W(N.bind(r))}if(H(Cp,f),H(ba,h),H(Sp,d),H(_p,p),H(yp,v),H(bp,g),H(Mp,x),H(Ep,y),H(kp,_),H(Rc,b),H(Ac,S),H(wp,k),mt(E))if(E.length){const W=t.exposed||(t.exposed={});E.forEach(N=>{Object.defineProperty(W,N,{get:()=>r[N],set:U=>r[N]=U})})}else t.exposed||(t.exposed={});w&&t.render===_e&&(t.render=w),O!=null&&(t.inheritAttrs=O),D&&(t.components=D),T&&(t.directives=T)}function Pp(t,e,r=_e){mt(t)&&(t=Ms(t));for(const i in t){const n=t[i];let o;Rt(n)?"default"in n?o=ke(n.from||i,n.default,!0):o=ke(n.from||i):o=ke(n),ve(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[i]=o}}function Ml(t,e,r){we(mt(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function Lc(t,e,r,i){const n=i.includes(".")?Tc(r,i):()=>r[i];if(Yt(t)){const o=e[t];St(o)&&Ri(n,o)}else if(St(t))Ri(n,t.bind(r));else if(Rt(t))if(mt(t))t.forEach(o=>Lc(o,e,r,i));else{const o=St(t.handler)?t.handler.bind(r):e[t.handler];St(o)&&Ri(n,o,t)}}function xa(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:n,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let l;return a?l=a:!n.length&&!r&&!i?l=e:(l={},n.length&&n.forEach(u=>Qn(l,u,s,!0)),Qn(l,e,s)),Rt(e)&&o.set(e,l),l}function Qn(t,e,r,i=!1){const{mixins:n,extends:o}=e;o&&Qn(t,o,r,!0),n&&n.forEach(s=>Qn(t,s,r,!0));for(const s in e)if(!(i&&s==="expose")){const a=Bp[s]||r&&r[s];t[s]=a?a(t[s],e[s]):e[s]}return t}const Bp={data:Dl,props:Tl,emits:Tl,methods:Mi,computed:Mi,beforeCreate:oe,created:oe,beforeMount:oe,mounted:oe,beforeUpdate:oe,updated:oe,beforeDestroy:oe,beforeUnmount:oe,destroyed:oe,unmounted:oe,activated:oe,deactivated:oe,errorCaptured:oe,serverPrefetch:oe,components:Mi,directives:Mi,watch:Op,provide:Dl,inject:Ip};function Dl(t,e){return e?t?function(){return Zt(St(t)?t.call(this,this):t,St(e)?e.call(this,this):e)}:e:t}function Ip(t,e){return Mi(Ms(t),Ms(e))}function Ms(t){if(mt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function oe(t,e){return t?[...new Set([].concat(t,e))]:e}function Mi(t,e){return t?Zt(Object.create(null),t,e):e}function Tl(t,e){return t?mt(t)&&mt(e)?[...new Set([...t,...e])]:Zt(Object.create(null),El(t),El(e??{})):e}function Op(t,e){if(!t)return e;if(!e)return t;const r=Zt(Object.create(null),t);for(const i in e)r[i]=oe(t[i],e[i]);return r}function zc(){return{app:null,config:{isNativeTag:hd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Rp=0;function Ap(t,e){return function(i,n=null){St(i)||(i=Zt({},i)),n!=null&&!Rt(n)&&(n=null);const o=zc(),s=new WeakSet;let a=!1;const l=o.app={_uid:Rp++,_component:i,_props:n,_container:null,_context:o,_instance:null,version:av,get config(){return o.config},set config(u){},use(u,...c){return s.has(u)||(u&&St(u.install)?(s.add(u),u.install(l,...c)):St(u)&&(s.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!a){const h=Lt(i,n);return h.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),c&&e?e(h,u):t(h,u,f),a=!0,l._container=u,u.__vue_app__=l,_a(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l},runWithContext(u){const c=Li;Li=l;try{return u()}finally{Li=c}}};return l}}let Li=null;function Dr(t,e){if(ee){let r=ee.provides;const i=ee.parent&&ee.parent.provides;i===r&&(r=ee.provides=Object.create(i)),r[t]=e}}function ke(t,e,r=!1){const i=ee||Oe;if(i||Li){const n=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Li._context.provides;if(n&&t in n)return n[t];if(arguments.length>1)return r&&St(e)?e.call(i&&i.proxy):e}}function Lp(t,e,r,i=!1){const n={},o={};Kn(o,Do,1),t.propsDefaults=Object.create(null),Nc(t,e,n,o);for(const s in t.propsOptions[0])s in n||(n[s]=void 0);r?t.props=i?n:Xd(n):t.type.props?t.props=n:t.props=o,t.attrs=o}function zp(t,e,r,i){const{props:n,attrs:o,vnode:{patchFlag:s}}=t,a=kt(n),[l]=t.propsOptions;let u=!1;if((i||s>0)&&!(s&16)){if(s&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(Co(t.emitsOptions,h))continue;const d=e[h];if(l)if(_t(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=ai(h);n[p]=Ds(l,a,p,d,t,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{Nc(t,e,n,o)&&(u=!0);let c;for(const f in a)(!e||!_t(e,f)&&((c=mi(f))===f||!_t(e,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(n[f]=Ds(l,a,f,void 0,t,!0)):delete n[f]);if(o!==a)for(const f in o)(!e||!_t(e,f))&&(delete o[f],u=!0)}u&&qe(t,"set","$attrs")}function Nc(t,e,r,i){const[n,o]=t.propsOptions;let s=!1,a;if(e)for(let l in e){if(Ii(l))continue;const u=e[l];let c;n&&_t(n,c=ai(l))?!o||!o.includes(c)?r[c]=u:(a||(a={}))[c]=u:Co(t.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,s=!0)}if(o){const l=kt(r),u=a||At;for(let c=0;c<o.length;c++){const f=o[c];r[f]=Ds(n,l,f,u[f],t,!_t(u,f))}}return s}function Ds(t,e,r,i,n,o){const s=t[r];if(s!=null){const a=_t(s,"default");if(a&&i===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&St(l)){const{propsDefaults:u}=n;if(r in u)i=u[r];else{const c=on(n);i=u[r]=l.call(null,e),c()}}else i=l}s[0]&&(o&&!a?i=!1:s[1]&&(i===""||i===mi(r))&&(i=!0))}return i}function Gc(t,e,r=!1){const i=e.propsCache,n=i.get(t);if(n)return n;const o=t.props,s={},a=[];let l=!1;if(!St(t)){const c=f=>{l=!0;const[h,d]=Gc(f,e,!0);Zt(s,h),d&&a.push(...d)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!o&&!l)return Rt(t)&&i.set(t,ei),ei;if(mt(o))for(let c=0;c<o.length;c++){const f=ai(o[c]);Pl(f)&&(s[f]=At)}else if(o)for(const c in o){const f=ai(c);if(Pl(f)){const h=o[c],d=s[f]=mt(h)||St(h)?{type:h}:Zt({},h);if(d){const p=Ol(Boolean,d.type),v=Ol(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||_t(d,"default"))&&a.push(f)}}}const u=[s,a];return Rt(t)&&i.set(t,u),u}function Pl(t){return t[0]!=="$"&&!Ii(t)}function Bl(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Il(t,e){return Bl(t)===Bl(e)}function Ol(t,e){return mt(e)?e.findIndex(r=>Il(r,t)):St(e)&&Il(e,t)?0:-1}const Fc=t=>t[0]==="_"||t==="$stable",Ca=t=>mt(t)?t.map(We):[We(t)],Np=(t,e,r)=>{if(e._n)return e;const i=Oi((...n)=>Ca(e(...n)),r);return i._c=!1,i},Hc=(t,e,r)=>{const i=t._ctx;for(const n in t){if(Fc(n))continue;const o=t[n];if(St(o))e[n]=Np(n,o,i);else if(o!=null){const s=Ca(o);e[n]=()=>s}}},Wc=(t,e)=>{const r=Ca(e);t.slots.default=()=>r},Gp=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=kt(e),Kn(e,"_",r)):Hc(e,t.slots={})}else t.slots={},e&&Wc(t,e);Kn(t.slots,Do,1)},Fp=(t,e,r)=>{const{vnode:i,slots:n}=t;let o=!0,s=At;if(i.shapeFlag&32){const a=e._;a?r&&a===1?o=!1:(Zt(n,e),!r&&a===1&&delete n._):(o=!e.$stable,Hc(e,n)),s=e}else e&&(Wc(t,e),s={default:1});if(o)for(const a in n)!Fc(a)&&s[a]==null&&delete n[a]};function Ts(t,e,r,i,n=!1){if(mt(t)){t.forEach((h,d)=>Ts(h,e&&(mt(e)?e[d]:e),r,i,n));return}if(jn(i)&&!n)return;const o=i.shapeFlag&4?_a(i.component)||i.component.proxy:i.el,s=n?null:o,{i:a,r:l}=t,u=e&&e.r,c=a.refs===At?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(Yt(u)?(c[u]=null,_t(f,u)&&(f[u]=null)):ve(u)&&(u.value=null)),St(l))gr(l,a,12,[s,c]);else{const h=Yt(l),d=ve(l);if(h||d){const p=()=>{if(t.f){const v=h?_t(f,l)?f[l]:c[l]:l.value;n?mt(v)&&la(v,o):mt(v)?v.includes(o)||v.push(o):h?(c[l]=[o],_t(f,l)&&(f[l]=c[l])):(l.value=[o],t.k&&(c[t.k]=l.value))}else h?(c[l]=s,_t(f,l)&&(f[l]=s)):d&&(l.value=s,t.k&&(c[t.k]=s))};s?(p.id=-1,fe(p,r)):p()}}}const fe=cp;function Hp(t){return Wp(t)}function Wp(t,e){const r=rc();r.__VUE__=!0;const{insert:i,remove:n,patchProp:o,createElement:s,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=_e,insertStaticContent:p}=t,v=(M,P,A,z=null,G=null,Y=null,j=void 0,V=null,q=!!P.dynamicChildren)=>{if(M===P)return;M&&!Pr(M,P)&&(z=st(M),tt(M,G,Y,!0),M=null),P.patchFlag===-2&&(q=!1,P.dynamicChildren=null);const{type:$,ref:rt,shapeFlag:lt}=P;switch($){case Mo:g(M,P,A,z);break;case Ae:m(M,P,A,z);break;case Yn:M==null&&b(P,A,z,j);break;case le:D(M,P,A,z,G,Y,j,V,q);break;default:lt&1?w(M,P,A,z,G,Y,j,V,q):lt&6?T(M,P,A,z,G,Y,j,V,q):(lt&64||lt&128)&&$.process(M,P,A,z,G,Y,j,V,q,Ct)}rt!=null&&G&&Ts(rt,M&&M.ref,Y,P||M,!P)},g=(M,P,A,z)=>{if(M==null)i(P.el=a(P.children),A,z);else{const G=P.el=M.el;P.children!==M.children&&u(G,P.children)}},m=(M,P,A,z)=>{M==null?i(P.el=l(P.children||""),A,z):P.el=M.el},b=(M,P,A,z)=>{[M.el,M.anchor]=p(M.children,P,A,z,M.el,M.anchor)},C=({el:M,anchor:P},A,z)=>{let G;for(;M&&M!==P;)G=h(M),i(M,A,z),M=G;i(P,A,z)},S=({el:M,anchor:P})=>{let A;for(;M&&M!==P;)A=h(M),n(M),M=A;n(P)},w=(M,P,A,z,G,Y,j,V,q)=>{P.type==="svg"?j="svg":P.type==="math"&&(j="mathml"),M==null?y(P,A,z,G,Y,j,V,q):k(M,P,G,Y,j,V,q)},y=(M,P,A,z,G,Y,j,V)=>{let q,$;const{props:rt,shapeFlag:lt,transition:at,dirs:vt}=M;if(q=M.el=s(M.type,Y,rt&&rt.is,rt),lt&8?c(q,M.children):lt&16&&x(M.children,q,null,z,G,Zo(M,Y),j,V),vt&&wr(M,null,z,"created"),_(q,M,M.scopeId,j,z),rt){for(const Et in rt)Et!=="value"&&!Ii(Et)&&o(q,Et,null,rt[Et],Y,M.children,z,G,K);"value"in rt&&o(q,"value",null,rt.value,Y),($=rt.onVnodeBeforeMount)&&He($,z,M)}vt&&wr(M,null,z,"beforeMount");const yt=Vp(G,at);yt&&at.beforeEnter(q),i(q,P,A),(($=rt&&rt.onVnodeMounted)||yt||vt)&&fe(()=>{$&&He($,z,M),yt&&at.enter(q),vt&&wr(M,null,z,"mounted")},G)},_=(M,P,A,z,G)=>{if(A&&d(M,A),z)for(let Y=0;Y<z.length;Y++)d(M,z[Y]);if(G){let Y=G.subTree;if(P===Y){const j=G.vnode;_(M,j,j.scopeId,j.slotScopeIds,G.parent)}}},x=(M,P,A,z,G,Y,j,V,q=0)=>{for(let $=q;$<M.length;$++){const rt=M[$]=V?cr(M[$]):We(M[$]);v(null,rt,P,A,z,G,Y,j,V)}},k=(M,P,A,z,G,Y,j)=>{const V=P.el=M.el;let{patchFlag:q,dynamicChildren:$,dirs:rt}=P;q|=M.patchFlag&16;const lt=M.props||At,at=P.props||At;let vt;if(A&&kr(A,!1),(vt=at.onVnodeBeforeUpdate)&&He(vt,A,P,M),rt&&wr(P,M,A,"beforeUpdate"),A&&kr(A,!0),$?E(M.dynamicChildren,$,V,A,z,Zo(P,G),Y):j||N(M,P,V,null,A,z,Zo(P,G),Y,!1),q>0){if(q&16)O(V,P,lt,at,A,z,G);else if(q&2&&lt.class!==at.class&&o(V,"class",null,at.class,G),q&4&&o(V,"style",lt.style,at.style,G),q&8){const yt=P.dynamicProps;for(let Et=0;Et<yt.length;Et++){const Pt=yt[Et],Ht=lt[Pt],Qt=at[Pt];(Qt!==Ht||Pt==="value")&&o(V,Pt,Ht,Qt,G,M.children,A,z,K)}}q&1&&M.children!==P.children&&c(V,P.children)}else!j&&$==null&&O(V,P,lt,at,A,z,G);((vt=at.onVnodeUpdated)||rt)&&fe(()=>{vt&&He(vt,A,P,M),rt&&wr(P,M,A,"updated")},z)},E=(M,P,A,z,G,Y,j)=>{for(let V=0;V<P.length;V++){const q=M[V],$=P[V],rt=q.el&&(q.type===le||!Pr(q,$)||q.shapeFlag&70)?f(q.el):A;v(q,$,rt,null,z,G,Y,j,!0)}},O=(M,P,A,z,G,Y,j)=>{if(A!==z){if(A!==At)for(const V in A)!Ii(V)&&!(V in z)&&o(M,V,A[V],null,j,P.children,G,Y,K);for(const V in z){if(Ii(V))continue;const q=z[V],$=A[V];q!==$&&V!=="value"&&o(M,V,$,q,j,P.children,G,Y,K)}"value"in z&&o(M,"value",A.value,z.value,j)}},D=(M,P,A,z,G,Y,j,V,q)=>{const $=P.el=M?M.el:a(""),rt=P.anchor=M?M.anchor:a("");let{patchFlag:lt,dynamicChildren:at,slotScopeIds:vt}=P;vt&&(V=V?V.concat(vt):vt),M==null?(i($,A,z),i(rt,A,z),x(P.children||[],A,rt,G,Y,j,V,q)):lt>0&&lt&64&&at&&M.dynamicChildren?(E(M.dynamicChildren,at,A,G,Y,j,V),(P.key!=null||G&&P===G.subTree)&&Vc(M,P,!0)):N(M,P,A,rt,G,Y,j,V,q)},T=(M,P,A,z,G,Y,j,V,q)=>{P.slotScopeIds=V,M==null?P.shapeFlag&512?G.ctx.activate(P,A,z,j,q):R(P,A,z,G,Y,j,q):L(M,P,q)},R=(M,P,A,z,G,Y,j)=>{const V=M.component=Qp(M,z,G);if(ko(M)&&(V.ctx.renderer=Ct),ev(V),V.asyncDep){if(G&&G.registerDep(V,H),!M.el){const q=V.subTree=Lt(Ae);m(null,q,P,A)}}else H(V,M,P,A,G,Y,j)},L=(M,P,A)=>{const z=P.component=M.component;if(sp(M,P,A))if(z.asyncDep&&!z.asyncResolved){W(z,P,A);return}else z.next=P,tp(z.update),z.effect.dirty=!0,z.update();else P.el=M.el,z.vnode=P},H=(M,P,A,z,G,Y,j)=>{const V=()=>{if(M.isMounted){let{next:rt,bu:lt,u:at,parent:vt,vnode:yt}=M;{const Fe=jc(M);if(Fe){rt&&(rt.el=yt.el,W(M,rt,j)),Fe.asyncDep.then(()=>{M.isUnmounted||V()});return}}let Et=rt,Pt;kr(M,!1),rt?(rt.el=yt.el,W(M,rt,j)):rt=yt,lt&&$o(lt),(Pt=rt.props&&rt.props.onVnodeBeforeUpdate)&&He(Pt,vt,rt,yt),kr(M,!0);const Ht=Uo(M),Qt=M.subTree;M.subTree=Ht,v(Qt,Ht,f(Qt.el),st(Qt),M,G,Y),rt.el=Ht.el,Et===null&&ap(M,Ht.el),at&&fe(at,G),(Pt=rt.props&&rt.props.onVnodeUpdated)&&fe(()=>He(Pt,vt,rt,yt),G)}else{let rt;const{el:lt,props:at}=P,{bm:vt,m:yt,parent:Et}=M,Pt=jn(P);if(kr(M,!1),vt&&$o(vt),!Pt&&(rt=at&&at.onVnodeBeforeMount)&&He(rt,Et,P),kr(M,!0),lt&&ht){const Ht=()=>{M.subTree=Uo(M),ht(lt,M.subTree,M,G,null)};Pt?P.type.__asyncLoader().then(()=>!M.isUnmounted&&Ht()):Ht()}else{const Ht=M.subTree=Uo(M);v(null,Ht,A,z,M,G,Y),P.el=Ht.el}if(yt&&fe(yt,G),!Pt&&(rt=at&&at.onVnodeMounted)){const Ht=P;fe(()=>He(rt,Et,Ht),G)}(P.shapeFlag&256||Et&&jn(Et.vnode)&&Et.vnode.shapeFlag&256)&&M.a&&fe(M.a,G),M.isMounted=!0,P=A=z=null}},q=M.effect=new ca(V,_e,()=>ya($),M.scope),$=M.update=()=>{q.dirty&&q.run()};$.id=M.uid,kr(M,!0),$()},W=(M,P,A)=>{P.component=M;const z=M.vnode.props;M.vnode=P,M.next=null,zp(M,P.props,z,A),Fp(M,P.children,A),Wr(),_l(M),Vr()},N=(M,P,A,z,G,Y,j,V,q=!1)=>{const $=M&&M.children,rt=M?M.shapeFlag:0,lt=P.children,{patchFlag:at,shapeFlag:vt}=P;if(at>0){if(at&128){Z($,lt,A,z,G,Y,j,V,q);return}else if(at&256){U($,lt,A,z,G,Y,j,V,q);return}}vt&8?(rt&16&&K($,G,Y),lt!==$&&c(A,lt)):rt&16?vt&16?Z($,lt,A,z,G,Y,j,V,q):K($,G,Y,!0):(rt&8&&c(A,""),vt&16&&x(lt,A,z,G,Y,j,V,q))},U=(M,P,A,z,G,Y,j,V,q)=>{M=M||ei,P=P||ei;const $=M.length,rt=P.length,lt=Math.min($,rt);let at;for(at=0;at<lt;at++){const vt=P[at]=q?cr(P[at]):We(P[at]);v(M[at],vt,A,null,G,Y,j,V,q)}$>rt?K(M,G,Y,!0,!1,lt):x(P,A,z,G,Y,j,V,q,lt)},Z=(M,P,A,z,G,Y,j,V,q)=>{let $=0;const rt=P.length;let lt=M.length-1,at=rt-1;for(;$<=lt&&$<=at;){const vt=M[$],yt=P[$]=q?cr(P[$]):We(P[$]);if(Pr(vt,yt))v(vt,yt,A,null,G,Y,j,V,q);else break;$++}for(;$<=lt&&$<=at;){const vt=M[lt],yt=P[at]=q?cr(P[at]):We(P[at]);if(Pr(vt,yt))v(vt,yt,A,null,G,Y,j,V,q);else break;lt--,at--}if($>lt){if($<=at){const vt=at+1,yt=vt<rt?P[vt].el:z;for(;$<=at;)v(null,P[$]=q?cr(P[$]):We(P[$]),A,yt,G,Y,j,V,q),$++}}else if($>at)for(;$<=lt;)tt(M[$],G,Y,!0),$++;else{const vt=$,yt=$,Et=new Map;for($=yt;$<=at;$++){const ie=P[$]=q?cr(P[$]):We(P[$]);ie.key!=null&&Et.set(ie.key,$)}let Pt,Ht=0;const Qt=at-yt+1;let Fe=!1,bn=0;const ir=new Array(Qt);for($=0;$<Qt;$++)ir[$]=0;for($=vt;$<=lt;$++){const ie=M[$];if(Ht>=Qt){tt(ie,G,Y,!0);continue}let xe;if(ie.key!=null)xe=Et.get(ie.key);else for(Pt=yt;Pt<=at;Pt++)if(ir[Pt-yt]===0&&Pr(ie,P[Pt])){xe=Pt;break}xe===void 0?tt(ie,G,Y,!0):(ir[xe-yt]=$+1,xe>=bn?bn=xe:Fe=!0,v(ie,P[xe],A,null,G,Y,j,V,q),Ht++)}const $r=Fe?jp(ir):ei;for(Pt=$r.length-1,$=Qt-1;$>=0;$--){const ie=yt+$,xe=P[ie],xn=ie+1<rt?P[ie+1].el:z;ir[$]===0?v(null,xe,A,xn,G,Y,j,V,q):Fe&&(Pt<0||$!==$r[Pt]?F(xe,A,xn,2):Pt--)}}},F=(M,P,A,z,G=null)=>{const{el:Y,type:j,transition:V,children:q,shapeFlag:$}=M;if($&6){F(M.component.subTree,P,A,z);return}if($&128){M.suspense.move(P,A,z);return}if($&64){j.move(M,P,A,Ct);return}if(j===le){i(Y,P,A);for(let lt=0;lt<q.length;lt++)F(q[lt],P,A,z);i(M.anchor,P,A);return}if(j===Yn){C(M,P,A);return}if(z!==2&&$&1&&V)if(z===0)V.beforeEnter(Y),i(Y,P,A),fe(()=>V.enter(Y),G);else{const{leave:lt,delayLeave:at,afterLeave:vt}=V,yt=()=>i(Y,P,A),Et=()=>{lt(Y,()=>{yt(),vt&&vt()})};at?at(Y,yt,Et):Et()}else i(Y,P,A)},tt=(M,P,A,z=!1,G=!1)=>{const{type:Y,props:j,ref:V,children:q,dynamicChildren:$,shapeFlag:rt,patchFlag:lt,dirs:at}=M;if(V!=null&&Ts(V,null,A,M,!0),rt&256){P.ctx.deactivate(M);return}const vt=rt&1&&at,yt=!jn(M);let Et;if(yt&&(Et=j&&j.onVnodeBeforeUnmount)&&He(Et,P,M),rt&6)nt(M.component,A,z);else{if(rt&128){M.suspense.unmount(A,z);return}vt&&wr(M,null,P,"beforeUnmount"),rt&64?M.type.remove(M,P,A,G,Ct,z):$&&(Y!==le||lt>0&&lt&64)?K($,P,A,!1,!0):(Y===le&&lt&384||!G&&rt&16)&&K(q,P,A),z&&ot(M)}(yt&&(Et=j&&j.onVnodeUnmounted)||vt)&&fe(()=>{Et&&He(Et,P,M),vt&&wr(M,null,P,"unmounted")},A)},ot=M=>{const{type:P,el:A,anchor:z,transition:G}=M;if(P===le){et(A,z);return}if(P===Yn){S(M);return}const Y=()=>{n(A),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(M.shapeFlag&1&&G&&!G.persisted){const{leave:j,delayLeave:V}=G,q=()=>j(A,Y);V?V(M.el,Y,q):q()}else Y()},et=(M,P)=>{let A;for(;M!==P;)A=h(M),n(M),M=A;n(P)},nt=(M,P,A)=>{const{bum:z,scope:G,update:Y,subTree:j,um:V}=M;z&&$o(z),G.stop(),Y&&(Y.active=!1,tt(j,M,P,A)),V&&fe(V,P),fe(()=>{M.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},K=(M,P,A,z=!1,G=!1,Y=0)=>{for(let j=Y;j<M.length;j++)tt(M[j],P,A,z,G)},st=M=>M.shapeFlag&6?st(M.component.subTree):M.shapeFlag&128?M.suspense.next():h(M.anchor||M.el);let ft=!1;const gt=(M,P,A)=>{M==null?P._vnode&&tt(P._vnode,null,null,!0):v(P._vnode||null,M,P,null,null,null,A),ft||(ft=!0,_l(),kc(),ft=!1),P._vnode=M},Ct={p:v,um:tt,m:F,r:ot,mt:R,mc:x,pc:N,pbc:E,n:st,o:t};let it,ht;return{render:gt,hydrate:it,createApp:Ap(gt,it)}}function Zo({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function kr({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function Vp(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Vc(t,e,r=!1){const i=t.children,n=e.children;if(mt(i)&&mt(n))for(let o=0;o<i.length;o++){const s=i[o];let a=n[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[o]=cr(n[o]),a.el=s.el),r||Vc(s,a)),a.type===Mo&&(a.el=s.el)}}function jp(t){const e=t.slice(),r=[0];let i,n,o,s,a;const l=t.length;for(i=0;i<l;i++){const u=t[i];if(u!==0){if(n=r[r.length-1],t[n]<u){e[i]=n,r.push(i);continue}for(o=0,s=r.length-1;o<s;)a=o+s>>1,t[r[a]]<u?o=a+1:s=a;u<t[r[o]]&&(o>0&&(e[i]=r[o-1]),r[o]=i)}}for(o=r.length,s=r[o-1];o-- >0;)r[o]=s,s=e[s];return r}function jc(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jc(e)}const Yp=t=>t.__isTeleport,le=Symbol.for("v-fgt"),Mo=Symbol.for("v-txt"),Ae=Symbol.for("v-cmt"),Yn=Symbol.for("v-stc"),zi=[];let Re=null;function Dt(t=!1){zi.push(Re=t?null:[])}function $p(){zi.pop(),Re=zi[zi.length-1]||null}let Ui=1;function Rl(t){Ui+=t}function Yc(t){return t.dynamicChildren=Ui>0?Re||ei:null,$p(),Ui>0&&Re&&Re.push(t),t}function It(t,e,r,i,n,o){return Yc(ut(t,e,r,i,n,o,!0))}function $c(t,e,r,i,n){return Yc(Lt(t,e,r,i,n,!0))}function Ps(t){return t?t.__v_isVNode===!0:!1}function Pr(t,e){return t.type===e.type&&t.key===e.key}const Do="__vInternal",Xc=({key:t})=>t??null,$n=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Yt(t)||ve(t)||St(t)?{i:Oe,r:t,k:e,f:!!r}:t:null);function ut(t,e=null,r=null,i=0,n=null,o=t===le?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Xc(e),ref:e&&$n(e),scopeId:So,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Oe};return a?(Sa(l,r),o&128&&t.normalize(l)):r&&(l.shapeFlag|=Yt(r)?8:16),Ui>0&&!s&&Re&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Re.push(l),l}const Lt=Xp;function Xp(t,e=null,r=null,i=0,n=null,o=!1){if((!t||t===lp)&&(t=Ae),Ps(t)){const a=br(t,e,!0);return r&&Sa(a,r),Ui>0&&!o&&Re&&(a.shapeFlag&6?Re[Re.indexOf(t)]=a:Re.push(a)),a.patchFlag|=-2,a}if(ov(t)&&(t=t.__vccOpts),e){e=Up(e);let{class:a,style:l}=e;a&&!Yt(a)&&(e.class=Gt(a)),Rt(l)&&(mc(l)&&!mt(l)&&(l=Zt({},l)),e.style=nn(l))}const s=Yt(t)?1:up(t)?128:Yp(t)?64:Rt(t)?4:St(t)?2:0;return ut(t,e,r,i,n,s,o,!0)}function Up(t){return t?mc(t)||Do in t?Zt({},t):t:null}function br(t,e,r=!1){const{props:i,ref:n,patchFlag:o,children:s}=t,a=e?Kp(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Xc(a),ref:e&&e.ref?r&&n?mt(n)?n.concat($n(e)):[n,$n(e)]:$n(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==le?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&br(t.ssContent),ssFallback:t.ssFallback&&br(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function qp(t=" ",e=0){return Lt(Mo,null,t,e)}function Uc(t,e){const r=Lt(Yn,null,t);return r.staticCount=e,r}function Ke(t="",e=!1){return e?(Dt(),$c(Ae,null,t)):Lt(Ae,null,t)}function We(t){return t==null||typeof t=="boolean"?Lt(Ae):mt(t)?Lt(le,null,t.slice()):typeof t=="object"?cr(t):Lt(Mo,null,String(t))}function cr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:br(t)}function Sa(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(mt(e))r=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),Sa(t,n()),n._c&&(n._d=!0));return}else{r=32;const n=e._;!n&&!(Do in e)?e._ctx=Oe:n===3&&Oe&&(Oe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else St(e)?(e={default:e,_ctx:Oe},r=32):(e=String(e),i&64?(r=16,e=[qp(e)]):r=8);t.children=e,t.shapeFlag|=r}function Kp(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Gt([e.class,i.class]));else if(n==="style")e.style=nn([e.style,i.style]);else if(vo(n)){const o=e[n],s=i[n];s&&o!==s&&!(mt(o)&&o.includes(s))&&(e[n]=o?[].concat(o,s):s)}else n!==""&&(e[n]=i[n])}return e}function He(t,e,r,i=null){we(t,e,7,[r,i])}const Zp=zc();let Jp=0;function Qp(t,e,r){const i=t.type,n=(e?e.appContext:t.appContext)||Zp,o={uid:Jp++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new kd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gc(i,n),emitsOptions:Mc(i,n),emit:null,emitted:null,propsDefaults:At,inheritAttrs:i.inheritAttrs,ctx:At,data:At,props:At,attrs:At,slots:At,refs:At,setupState:At,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=ip.bind(null,o),t.ce&&t.ce(o),o}let ee=null;const tv=()=>ee||Oe;let to,Bs;{const t=rc(),e=(r,i)=>{let n;return(n=t[r])||(n=t[r]=[]),n.push(i),o=>{n.length>1?n.forEach(s=>s(o)):n[0](o)}};to=e("__VUE_INSTANCE_SETTERS__",r=>ee=r),Bs=e("__VUE_SSR_SETTERS__",r=>To=r)}const on=t=>{const e=ee;return to(t),t.scope.on(),()=>{t.scope.off(),to(e)}},Al=()=>{ee&&ee.scope.off(),to(null)};function qc(t){return t.vnode.shapeFlag&4}let To=!1;function ev(t,e=!1){e&&Bs(e);const{props:r,children:i}=t.vnode,n=qc(t);Lp(t,r,n,e),Gp(t,i);const o=n?rv(t,e):void 0;return e&&Bs(!1),o}function rv(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=yc(new Proxy(t.ctx,Dp));const{setup:i}=r;if(i){const n=t.setupContext=i.length>1?nv(t):null,o=on(t);Wr();const s=gr(i,t,0,[t.props,n]);if(Vr(),o(),Ju(s)){if(s.then(Al,Al),e)return s.then(a=>{Ll(t,a,e)}).catch(a=>{xo(a,t,0)});t.asyncDep=s}else Ll(t,s,e)}else Kc(t,e)}function Ll(t,e,r){St(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Rt(e)&&(t.setupState=Cc(e)),Kc(t,r)}let zl;function Kc(t,e,r){const i=t.type;if(!t.render){if(!e&&zl&&!i.render){const n=i.template||xa(t).template;if(n){const{isCustomElement:o,compilerOptions:s}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,u=Zt(Zt({isCustomElement:o,delimiters:a},s),l);i.render=zl(n,u)}}t.render=i.render||_e}{const n=on(t);Wr();try{Tp(t)}finally{Vr(),n()}}}function iv(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return pe(t,"get","$attrs"),e[r]}}))}function nv(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return iv(t)},slots:t.slots,emit:t.emit,expose:e}}function _a(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Cc(yc(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Ai)return Ai[r](t)},has(e,r){return r in e||r in Ai}}))}function ov(t){return St(t)&&"__vccOpts"in t}const Zc=(t,e)=>Ud(t,e,To);function sv(t,e,r){const i=arguments.length;return i===2?Rt(e)&&!mt(e)?Ps(e)?Lt(t,null,[e]):Lt(t,e):Lt(t,null,e):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&Ps(r)&&(r=[r]),Lt(t,e,r))}const av="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const lv="http://www.w3.org/2000/svg",uv="http://www.w3.org/1998/Math/MathML",fr=typeof document<"u"?document:null,Nl=fr&&fr.createElement("template"),cv={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const n=e==="svg"?fr.createElementNS(lv,t):e==="mathml"?fr.createElementNS(uv,t):fr.createElement(t,r?{is:r}:void 0);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>fr.createTextNode(t),createComment:t=>fr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>fr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,i,n,o){const s=r?r.previousSibling:e.lastChild;if(n&&(n===o||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),r),!(n===o||!(n=n.nextSibling)););else{Nl.innerHTML=i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t;const a=Nl.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,r)}return[s?s.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},or="transition",ki="animation",qi=Symbol("_vtc"),oi=(t,{slots:e})=>sv(gp,fv(t),e);oi.displayName="Transition";const Jc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};oi.props=Zt({},Pc,Jc);const Er=(t,e=[])=>{mt(t)?t.forEach(r=>r(...e)):t&&t(...e)},Gl=t=>t?mt(t)?t.some(e=>e.length>1):t.length>1:!1;function fv(t){const e={};for(const D in t)D in Jc||(e[D]=t[D]);if(t.css===!1)return e;const{name:r="v",type:i,duration:n,enterFromClass:o=`${r}-enter-from`,enterActiveClass:s=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=o,appearActiveClass:u=s,appearToClass:c=a,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:d=`${r}-leave-to`}=t,p=hv(n),v=p&&p[0],g=p&&p[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:C,onLeave:S,onLeaveCancelled:w,onBeforeAppear:y=m,onAppear:_=b,onAppearCancelled:x=C}=e,k=(D,T,R)=>{Mr(D,T?c:a),Mr(D,T?u:s),R&&R()},E=(D,T)=>{D._isLeaving=!1,Mr(D,f),Mr(D,d),Mr(D,h),T&&T()},O=D=>(T,R)=>{const L=D?_:b,H=()=>k(T,D,R);Er(L,[T,H]),Fl(()=>{Mr(T,D?l:o),sr(T,D?c:a),Gl(L)||Hl(T,i,v,H)})};return Zt(e,{onBeforeEnter(D){Er(m,[D]),sr(D,o),sr(D,s)},onBeforeAppear(D){Er(y,[D]),sr(D,l),sr(D,u)},onEnter:O(!1),onAppear:O(!0),onLeave(D,T){D._isLeaving=!0;const R=()=>E(D,T);sr(D,f),vv(),sr(D,h),Fl(()=>{D._isLeaving&&(Mr(D,f),sr(D,d),Gl(S)||Hl(D,i,g,R))}),Er(S,[D,R])},onEnterCancelled(D){k(D,!1),Er(C,[D])},onAppearCancelled(D){k(D,!0),Er(x,[D])},onLeaveCancelled(D){E(D),Er(w,[D])}})}function hv(t){if(t==null)return null;if(Rt(t))return[Jo(t.enter),Jo(t.leave)];{const e=Jo(t);return[e,e]}}function Jo(t){return yd(t)}function sr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[qi]||(t[qi]=new Set)).add(e)}function Mr(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const r=t[qi];r&&(r.delete(e),r.size||(t[qi]=void 0))}function Fl(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let dv=0;function Hl(t,e,r,i){const n=t._endId=++dv,o=()=>{n===t._endId&&i()};if(r)return setTimeout(o,r);const{type:s,timeout:a,propCount:l}=pv(t,e);if(!s)return i();const u=s+"end";let c=0;const f=()=>{t.removeEventListener(u,h),o()},h=d=>{d.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},a+1),t.addEventListener(u,h)}function pv(t,e){const r=window.getComputedStyle(t),i=p=>(r[p]||"").split(", "),n=i(`${or}Delay`),o=i(`${or}Duration`),s=Wl(n,o),a=i(`${ki}Delay`),l=i(`${ki}Duration`),u=Wl(a,l);let c=null,f=0,h=0;e===or?s>0&&(c=or,f=s,h=o.length):e===ki?u>0&&(c=ki,f=u,h=l.length):(f=Math.max(s,u),c=f>0?s>u?or:ki:null,h=c?c===or?o.length:l.length:0);const d=c===or&&/\b(transform|all)(,|$)/.test(i(`${or}Property`).toString());return{type:c,timeout:f,propCount:h,hasTransform:d}}function Wl(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,i)=>Vl(r)+Vl(t[i])))}function Vl(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function vv(){return document.body.offsetHeight}function gv(t,e,r){const i=t[qi];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const jl=Symbol("_vod"),mv=Symbol("_vsh"),yv=Symbol(""),bv=/(^|;)\s*display\s*:/;function xv(t,e,r){const i=t.style,n=Yt(r);let o=!1;if(r&&!n){if(e)if(Yt(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();r[a]==null&&Xn(i,a,"")}else for(const s in e)r[s]==null&&Xn(i,s,"");for(const s in r)s==="display"&&(o=!0),Xn(i,s,r[s])}else if(n){if(e!==r){const s=i[yv];s&&(r+=";"+s),i.cssText=r,o=bv.test(r)}}else e&&t.removeAttribute("style");jl in t&&(t[jl]=o?i.display:"",t[mv]&&(i.display="none"))}const Yl=/\s*!important$/;function Xn(t,e,r){if(mt(r))r.forEach(i=>Xn(t,e,i));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=Cv(t,e);Yl.test(r)?t.setProperty(mi(i),r.replace(Yl,""),"important"):t[i]=r}}const $l=["Webkit","Moz","ms"],Qo={};function Cv(t,e){const r=Qo[e];if(r)return r;let i=ai(e);if(i!=="filter"&&i in t)return Qo[e]=i;i=ec(i);for(let n=0;n<$l.length;n++){const o=$l[n]+i;if(o in t)return Qo[e]=o}return e}const Xl="http://www.w3.org/1999/xlink";function Sv(t,e,r,i,n){if(i&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(Xl,e.slice(6,e.length)):t.setAttributeNS(Xl,e,r);else{const o=wd(e);r==null||o&&!ic(r)?t.removeAttribute(e):t.setAttribute(e,o?"":r)}}function _v(t,e,r,i,n,o,s){if(e==="innerHTML"||e==="textContent"){i&&s(i,n,o),t[e]=r??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const u=a==="OPTION"?t.getAttribute("value")||"":t.value,c=r??"";(u!==c||!("_value"in t))&&(t.value=c),r==null&&t.removeAttribute(e),t._value=r;return}let l=!1;if(r===""||r==null){const u=typeof t[e];u==="boolean"?r=ic(r):r==null&&u==="string"?(r="",l=!0):u==="number"&&(r=0,l=!0)}try{t[e]=r}catch{}l&&t.removeAttribute(e)}function wv(t,e,r,i){t.addEventListener(e,r,i)}function kv(t,e,r,i){t.removeEventListener(e,r,i)}const Ul=Symbol("_vei");function Ev(t,e,r,i,n=null){const o=t[Ul]||(t[Ul]={}),s=o[e];if(i&&s)s.value=i;else{const[a,l]=Mv(e);if(i){const u=o[e]=Pv(i,n);wv(t,a,u,l)}else s&&(kv(t,a,s,l),o[e]=void 0)}}const ql=/(?:Once|Passive|Capture)$/;function Mv(t){let e;if(ql.test(t)){e={};let i;for(;i=t.match(ql);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):mi(t.slice(2)),e]}let ts=0;const Dv=Promise.resolve(),Tv=()=>ts||(Dv.then(()=>ts=0),ts=Date.now());function Pv(t,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;we(Bv(i,r.value),e,5,[i])};return r.value=t,r.attached=Tv(),r}function Bv(t,e){if(mt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const Kl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Iv=(t,e,r,i,n,o,s,a,l)=>{const u=n==="svg";e==="class"?gv(t,i,u):e==="style"?xv(t,r,i):vo(e)?aa(e)||Ev(t,e,r,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ov(t,e,i,u))?_v(t,e,i,o,s,a,l):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Sv(t,e,i,u))};function Ov(t,e,r,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Kl(e)&&St(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Kl(e)&&Yt(r)?!1:e in t}const Rv=Zt({patchProp:Iv},cv);let Zl;function Av(){return Zl||(Zl=Hp(Rv))}const Lv=(...t)=>{const e=Av().createApp(...t),{mount:r}=e;return e.mount=i=>{const n=Nv(i);if(!n)return;const o=e._component;!St(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.innerHTML="";const s=r(n,!1,zv(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),s},e};function zv(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Nv(t){return Yt(t)?document.querySelector(t):t}const Gv="/StickerEditor/assets/1-DOU5pnUw.jpg",Fv=Object.freeze(Object.defineProperty({__proto__:null,default:Gv},Symbol.toStringTag,{value:"Module"})),Hv="/StickerEditor/assets/10-YMO4_2Fq.png",Wv=Object.freeze(Object.defineProperty({__proto__:null,default:Hv},Symbol.toStringTag,{value:"Module"})),Vv="/StickerEditor/assets/2-BOWi-BKK.png",jv=Object.freeze(Object.defineProperty({__proto__:null,default:Vv},Symbol.toStringTag,{value:"Module"})),Yv="/StickerEditor/assets/3-BGbuhfVT.jpg",$v=Object.freeze(Object.defineProperty({__proto__:null,default:Yv},Symbol.toStringTag,{value:"Module"})),Xv="/StickerEditor/assets/4-DDp8jPL9.png",Uv=Object.freeze(Object.defineProperty({__proto__:null,default:Xv},Symbol.toStringTag,{value:"Module"})),qv="/StickerEditor/assets/5-CcsAHtZO.png",Kv=Object.freeze(Object.defineProperty({__proto__:null,default:qv},Symbol.toStringTag,{value:"Module"})),Zv="/StickerEditor/assets/6-f7Ma6H0z.png",Jv=Object.freeze(Object.defineProperty({__proto__:null,default:Zv},Symbol.toStringTag,{value:"Module"})),Qv="/StickerEditor/assets/7-DvOdD5OY.png",tg=Object.freeze(Object.defineProperty({__proto__:null,default:Qv},Symbol.toStringTag,{value:"Module"})),eg="/StickerEditor/assets/8-Bh2lHIfN.png",rg=Object.freeze(Object.defineProperty({__proto__:null,default:eg},Symbol.toStringTag,{value:"Module"})),ig="/StickerEditor/assets/9-CHEbLBCF.png",ng=Object.freeze(Object.defineProperty({__proto__:null,default:ig},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qc=function(t,e){return(Qc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])})(t,e)};function zt(t,e){function r(){this.constructor=t}Qc(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Jl(t,e,r,i){return new(r||(r=Promise))(function(n,o){function s(u){try{l(i.next(u))}catch(c){o(c)}}function a(u){try{l(i.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?n(u.value):(c=u.value,c instanceof r?c:new r(function(f){f(c)})).then(s,a)}l((i=i.apply(t,[])).next())})}function Ql(t,e){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&c[0]?i.return:c[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,c[1])).done)return n;switch(i=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,i=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(n=s.trys,!((n=n.length>0&&n[n.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){s.label=c[1];break}if(c[0]===6&&s.label<n[1]){s.label=n[1],n=c;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(c);break}n[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(f){c=[6,f],i=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function Ki(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}var J=function(){function t(){}return t.createDefs=function(){return document.createElementNS("http://www.w3.org/2000/svg","defs")},t.setAttributes=function(e,r){for(var i=0,n=r;i<n.length;i++){var o=n[i],s=o[0],a=o[1];e.setAttribute(s,a)}},t.createRect=function(e,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.setAttribute("width",e.toString()),n.setAttribute("height",r.toString()),i&&t.setAttributes(n,i),n},t.createLine=function(e,r,i,n,o){var s=document.createElementNS("http://www.w3.org/2000/svg","line");return s.setAttribute("x1",e.toString()),s.setAttribute("y1",r.toString()),s.setAttribute("x2",i.toString()),s.setAttribute("y2",n.toString()),o&&t.setAttributes(s,o),s},t.createPolygon=function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","polygon");return i.setAttribute("points",e),r&&t.setAttributes(i,r),i},t.createCircle=function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",(e/2).toString()),i.setAttribute("cy",(e/2).toString()),i.setAttribute("r",e.toString()),r&&t.setAttributes(i,r),i},t.createEllipse=function(e,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return n.setAttribute("cx",(e/2).toString()),n.setAttribute("cy",(r/2).toString()),n.setAttribute("rx",(e/2).toString()),n.setAttribute("ry",(r/2).toString()),i&&t.setAttributes(n,i),n},t.createGroup=function(e){var r=document.createElementNS("http://www.w3.org/2000/svg","g");return e&&t.setAttributes(r,e),r},t.createTransform=function(){return document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGTransform()},t.createMarker=function(e,r,i,n,o,s,a){var l=document.createElementNS("http://www.w3.org/2000/svg","marker");return t.setAttributes(l,[["id",e],["orient",r],["markerWidth",i.toString()],["markerHeight",n.toString()],["refX",o.toString()],["refY",s.toString()]]),l.appendChild(a),l},t.createText=function(e){var r=document.createElementNS("http://www.w3.org/2000/svg","text");return r.setAttribute("x","0"),r.setAttribute("y","0"),e&&t.setAttributes(r,e),r},t.createTSpan=function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","tspan");return i.textContent=e,r&&t.setAttributes(i,r),i},t.createImage=function(e){var r=document.createElementNS("http://www.w3.org/2000/svg","image");return e&&t.setAttributes(r,e),r},t.createPoint=function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGPoint();return i.x=e,i.y=r,i},t.createPath=function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",e),r&&t.setAttributes(i,r),i},t}(),tu=function(){function t(){}return t.addKey=function(e){t.key=e},Object.defineProperty(t,"isLicensed",{get:function(){return!!t.key&&new RegExp(/^MJS2-[A-Z][0-9]{3}-[A-Z][0-9]{3}-[0-9]{4}$/,"i").test(t.key)},enumerable:!1,configurable:!0}),t}(),og=function(){function t(){this.naturalSize=!1,this.imageType="image/png",this.markersOnly=!1}return t.prototype.rasterize=function(e,r,i){var n=this;return new Promise(function(o){var s=i!==void 0?i:document.createElement("canvas");e===null&&(n.markersOnly=!0,n.naturalSize=!1);var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("width",r.width.baseVal.valueAsString),a.setAttribute("height",r.height.baseVal.valueAsString),a.setAttribute("viewBox","0 0 "+r.viewBox.baseVal.width.toString()+" "+r.viewBox.baseVal.height.toString()),a.innerHTML=r.innerHTML,n.naturalSize===!0?(a.width.baseVal.value=e.naturalWidth,a.height.baseVal.value=e.naturalHeight):n.width!==void 0&&n.height!==void 0&&(a.width.baseVal.value=n.width,a.height.baseVal.value=n.height),s.width=a.width.baseVal.value,s.height=a.height.baseVal.value;var l=a.outerHTML,u=s.getContext("2d");n.markersOnly!==!0&&u.drawImage(e,0,0,s.width,s.height);var c=window.URL,f=new Image(s.width,s.height);f.setAttribute("crossOrigin","anonymous");var h=new Blob([l],{type:"image/svg+xml"}),d=c.createObjectURL(h);f.onload=function(){u.drawImage(f,0,0),c.revokeObjectURL(d);var p=s.toDataURL(n.imageType,n.imageQuality);o(p)},f.src=d})},t}(),eu=function(){},sg=function(){function t(e){this._classNamePrefixBase="__markerjs2_",this.classes=[],this.rules=[],this.settings=this.defaultSettings,this._classNamePrefix=this._classNamePrefixBase+"_"+e+"_"}return Object.defineProperty(t.prototype,"classNamePrefixBase",{get:function(){return this._classNamePrefixBase},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classNamePrefix",{get:function(){return this._classNamePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultSettings",{get:function(){return{canvasBackgroundColor:"#ffffff",toolbarBackgroundColor:"#111111",toolbarBackgroundHoverColor:"#333333",toolbarColor:"#eeeeee",toolbarHeight:40,toolboxColor:"#eeeeee",toolboxAccentColor:"#3080c3",undoButtonVisible:!0,redoButtonVisible:!1,zoomButtonVisible:!1,zoomOutButtonVisible:!1,clearButtonVisible:!1,resultButtonBlockVisible:!0,logoPosition:"left"}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fadeInAnimationClassName",{get:function(){return this.classNamePrefix+"fade_in"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fadeOutAnimationClassName",{get:function(){return this.classNamePrefix+"fade_out"},enumerable:!1,configurable:!0}),t.prototype.addClass=function(e){return this.styleSheet===void 0&&this.addStyleSheet(),e.name=""+this.classNamePrefix+e.localName,this.classes.push(e),this.styleSheet.sheet.insertRule("."+e.name+" {"+e.style+"}",this.styleSheet.sheet.cssRules.length),e},t.prototype.addRule=function(e){this.styleSheet===void 0&&this.addStyleSheet(),this.rules.push(e),this.styleSheet.sheet.insertRule(e.selector+" {"+e.style+"}",this.styleSheet.sheet.cssRules.length)},t.prototype.addStyleSheet=function(){var e;this.styleSheet=document.createElement("style"),((e=this.styleSheetRoot)!==null&&e!==void 0?e:document.head).appendChild(this.styleSheet),this.addRule(new Ie("."+this.classNamePrefix+" h3","font-family: sans-serif")),this.addRule(new Ie("@keyframes "+this.classNamePrefix+"_fade_in_animation_frames",`
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
    `)),this.addRule(new Ie("@keyframes "+this.classNamePrefix+"_fade_out_animation_frames",`
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
    `)),this.addClass(new Ut("fade_in",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_in_animation_frames;
    `)),this.addClass(new Ut("fade_out",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_out_animation_frames;
    `))},t.prototype.removeStyleSheet=function(){var e;this.styleSheet&&(((e=this.styleSheetRoot)!==null&&e!==void 0?e:document.head).removeChild(this.styleSheet),this.styleSheet=void 0)},t}(),Ie=function(t,e){this.selector=t,this.style=e},Ut=function(t,e){this.localName=t,this.style=e},ag=function(){function t(e,r,i,n,o){this.buttons=[],this.markerButtons=[],this.buttonClickListeners=[],this.markerjsContainer=e,this.displayMode=r,this.markerItems=i,this.uiStyleSettings=n,this.styles=o,this.addStyles(),this.adjustLayout=this.adjustLayout.bind(this),this.overflowButtonClicked=this.overflowButtonClicked.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this)}return t.prototype.show=function(e){var r=this;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=e,this.uiContainer.className=this.toolbarStyleClass.name+" "+this.styles.fadeInAnimationClassName+" "+(this.uiStyleSettings.toolbarStyleColorsClassName?this.uiStyleSettings.toolbarStyleColorsClassName:this.toolbarStyleColorsClass.name);var i=document.createElement("div");i.className=this.toolbarBlockStyleClass.name,i.style.whiteSpace="nowrap",this.uiContainer.appendChild(i),this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M10.07 14.27a.997.997 0 011.33.48l2.3 4.99 1.8-.85-2.31-4.98c-.24-.5-.02-1.1.48-1.33l.28-.08 2.3-.45L8 5.12V15.9l1.82-1.47.25-.16m3.57 7.7a.99.99 0 01-1.33-.47l-2.18-4.74-2.51 2.02c-.17.14-.38.22-.62.22a1 1 0 01-1-1V3a1 1 0 011-1c.24 0 .47.09.64.23l.01-.01 11.49 9.64a1.001 1.001 0 01-.44 1.75l-3.16.62 2.2 4.73c.26.5.02 1.09-.48 1.32l-3.62 1.69z"/></svg>',"select","Select mode"),this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M9 3v1H4v2h1v13a2 2 0 002 2h10a2 2 0 002-2V6h1V4h-5V3H9M7 6h10v13H7V6m2 2v9h2V8H9m4 0v9h2V8h-2z"/></svg>',"delete","Delete marker"),this.uiStyleSettings.clearButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M19.36 2.72l1.42 1.42-5.72 5.71c1.07 1.54 1.22 3.39.32 4.59L9.06 8.12c1.2-.9 3.05-.75 4.59.32l5.71-5.72M5.93 17.57c-2.01-2.01-3.24-4.41-3.58-6.65l4.88-2.09 7.44 7.44-2.09 4.88c-2.24-.34-4.64-1.57-6.65-3.58z"/></svg>',"clear","Delete all markers"),this.uiStyleSettings.undoButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M12.5 8c-2.65 0-5.05 1-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>',"undo","Undo"),this.uiStyleSettings.redoButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 017.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/></svg>',"redo","Redo"),this.uiStyleSettings.zoomButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M15.5 14l5 5-1.5 1.5-5-5v-.79l-.27-.28A6.471 6.471 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3 6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.57 4.23l.28.27h.79m-6 0C12 14 14 12 14 9.5S12 5 9.5 5 5 7 5 9.5 7 14 9.5 14m2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"/></svg>',"zoom","Zoom in"),this.uiStyleSettings.zoomButtonVisible&&this.uiStyleSettings.zoomOutButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 009.5 3 6.5 6.5 0 003 9.5 6.5 6.5 0 009.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.5-1.5-5-5m-6 0C7 14 5 12 5 9.5S7 5 9.5 5 14 7 14 9.5 12 14 9.5 14M7 9h5v1H7V9z"/></svg>',"zoom-out","Zoom out"),this.uiStyleSettings.notesButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M18.13 12l1.26-1.26c.44-.44 1-.68 1.61-.74V9l-6-6H5c-1.11 0-2 .89-2 2v14a2 2 0 002 2h6v-1.87l.13-.13H5V5h7v7h6.13M14 4.5l5.5 5.5H14V4.5m5.13 9.33l2.04 2.04L15.04 22H13v-2.04l6.13-6.13m3.72.36l-.98.98-2.04-2.04.98-.98c.19-.2.52-.2.72 0l1.32 1.32c.2.2.2.53 0 .72z"/></svg>',"notes","Notes"),this.markerButtonBlock=document.createElement("div"),this.markerButtonBlock.className=this.toolbarBlockStyleClass.name,this.markerButtonBlock.style.flexGrow="2",this.markerButtonBlock.style.textAlign="center",this.uiContainer.appendChild(this.markerButtonBlock),this.markerButtonOverflowBlock=document.createElement("div"),this.markerButtonOverflowBlock.className=this.toolbarOverflowBlockStyleClass.name+" "+(this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName?this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName:this.toolbarOverflowBlockStyleColorsClass.name),this.markerButtonOverflowBlock.style.display="none",this.uiContainer.appendChild(this.markerButtonOverflowBlock),this.markerItems&&(this.markerItems.forEach(function(o){var s=document.createElement("div");s.className=""+r.toolbarButtonStyleClass.name,s.setAttribute("data-type-name",o.typeName),s.setAttribute("aria-label",o.title),s.setAttribute("title",o.title),s.innerHTML=o.icon,s.addEventListener("click",function(){r.markerToolbarButtonClicked(s,o)}),r.buttons.push(s),r.markerButtons.push(s)}),this.overflowButton=document.createElement("div"),this.overflowButton.className=this.toolbarButtonStyleClass.name+" "+(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name),this.overflowButton.innerHTML='<svg viewBox="0 0 24 24"><path d="M12 16a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2z"/></svg>',this.overflowButton.addEventListener("click",this.overflowButtonClicked),this.markerButtonBlock.appendChild(this.overflowButton));var n=document.createElement("div");n.className=this.toolbarBlockStyleClass.name,n.style.whiteSpace="nowrap",n.style.display=this.uiStyleSettings.resultButtonBlockVisible!==!1?"":"none",this.uiContainer.appendChild(n),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M9 20.42l-6.21-6.21 2.83-2.83L9 14.77l9.88-9.89 2.83 2.83L9 20.42z"/></svg>',"render","Save and close"),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M20 6.91L17.09 4 12 9.09 6.91 4 4 6.91 9.09 12 4 17.09 6.91 20 12 14.91 17.09 20 20 17.09 14.91 12 20 6.91z"/></svg>',"close","Close"),this.markerjsContainer.appendChild(this.uiContainer),this.setSelectMode(),this.setCurrentMarker(),this.adjustLayout()},t.prototype.addButtonClickListener=function(e){this.buttonClickListeners.push(e)},t.prototype.removeButtonClickListener=function(e){this.buttonClickListeners.indexOf(e)>-1&&this.buttonClickListeners.splice(this.buttonClickListeners.indexOf(e),1)},t.prototype.setSelectMode=function(){this.resetButtonStyles(),this.setActiveButton(this.buttons[0])},t.prototype.adjustLayout=function(){if(this.markerButtons&&this.markerButtons.length>0){var e=Math.floor(this.markerButtonBlock.clientWidth/this.uiStyleSettings.toolbarHeight)-1;this.markerButtonBlock.innerHTML="",this.markerButtonOverflowBlock.innerHTML="";for(var r=0;r<this.markerButtons.length;r++)r<e||r===e&&this.markerButtons.length-1===e?this.markerButtonBlock.appendChild(this.markerButtons[r]):(r===e&&this.markerButtonBlock.appendChild(this.overflowButton),this.markerButtonOverflowBlock.appendChild(this.markerButtons[r]))}},t.prototype.overflowButtonClicked=function(){this.markerButtonOverflowBlock.style.display!=="none"?(this.markerButtonOverflowBlock.className=this.markerButtonOverflowBlock.className.replace(this.styles.fadeInAnimationClassName,""),this.markerButtonOverflowBlock.style.display="none"):(this.markerButtonOverflowBlock.className+=" "+this.styles.fadeInAnimationClassName,this.markerButtonOverflowBlock.style.top=this.uiContainer.offsetTop+this.overflowButton.offsetHeight+"px",this.markerButtonOverflowBlock.style.right=this.uiContainer.offsetWidth-this.overflowButton.offsetLeft-this.overflowButton.offsetWidth+2*this.uiContainer.offsetLeft+"px",this.markerButtonOverflowBlock.style.display="inline-block")},t.prototype.resetButtonStyles=function(){var e=this;this.buttons.forEach(function(r){r.className=r.className.replace(e.uiStyleSettings.toolbarButtonStyleColorsClassName?e.uiStyleSettings.toolbarButtonStyleColorsClassName:e.toolbarButtonStyleColorsClass.name,"").trim(),r.className=r.className.replace(e.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?e.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:e.toolbarActiveButtonStyleColorsClass.name,"").trim(),r.className+=" "+(e.uiStyleSettings.toolbarButtonStyleColorsClassName?e.uiStyleSettings.toolbarButtonStyleColorsClassName:e.toolbarButtonStyleColorsClass.name)})},t.prototype.addActionButton=function(e,r,i,n){var o=this,s=document.createElement("div");switch(s.className=""+this.toolbarButtonStyleClass.name,s.innerHTML=r,s.setAttribute("role","button"),s.setAttribute("data-action",i),s.title=n,s.setAttribute("aria-label",n),s.addEventListener("click",function(){o.actionToolbarButtonClicked(s,i)}),i){case"select":s.style.fill=this.uiStyleSettings.selectButtonColor;break;case"delete":case"clear":s.style.fill=this.uiStyleSettings.deleteButtonColor;break;case"undo":case"redo":s.style.fill=this.uiStyleSettings.selectButtonColor;break;case"render":s.style.fill=this.uiStyleSettings.okButtonColor;break;case"close":s.style.fill=this.uiStyleSettings.closeButtonColor}e.appendChild(s),this.buttons.push(s)},t.prototype.addStyles=function(){this.toolbarStyleClass=this.styles.addClass(new Ut("toolbar",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: row;
      justify-content: space-between;      
      height: `+this.uiStyleSettings.toolbarHeight+`px;
      box-sizing: content-box;
      `+(this.displayMode==="inline"?"border-top-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-top-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolbarStyleColorsClass=this.styles.addClass(new Ut("toolbar_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      box-shadow: 0px 3px rgba(33, 33, 33, 0.1);
    `)),this.toolbarBlockStyleClass=this.styles.addClass(new Ut("toolbar-block",`
        display: inline-block;
        box-sizing: content-box;
    `)),this.toolbarOverflowBlockStyleClass=this.styles.addClass(new Ut("toolbar-overflow-block",`
        position: absolute;
        top: `+this.uiStyleSettings.toolbarHeight+`px;
        max-width: `+2*this.uiStyleSettings.toolbarHeight+`px;
        z-index: 10;
        box-sizing: content-box;
      `)),this.toolbarOverflowBlockStyleColorsClass=this.styles.addClass(new Ut("toolbar-overflow-block_colors",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      `));var e=this.uiStyleSettings.toolbarHeight/4;this.toolbarButtonStyleClass=this.styles.addClass(new Ut("toolbar_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*e)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*e)+`px;
      padding: `+e+`px;
      box-sizing: content-box;
    `)),this.toolbarButtonStyleColorsClass=this.styles.addClass(new Ut("toolbar_button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolbarActiveButtonStyleColorsClass=this.styles.addClass(new Ut("toolbar_active_button",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new Ie("."+this.toolbarButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new Ie("."+this.toolbarButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `))},t.prototype.markerToolbarButtonClicked=function(e,r){this.setActiveButton(e),this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(i){return i("marker",r)}),this.markerButtonOverflowBlock.style.display="none"},t.prototype.actionToolbarButtonClicked=function(e,r){this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(i){return i("action",r)}),this.markerButtonOverflowBlock.style.display="none",this.setActiveButton(this.buttons[0])},t.prototype.setActiveButton=function(e){this.resetButtonStyles(),e.className=e.className.replace(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name,"").trim(),e.className+=" "+(this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:this.toolbarActiveButtonStyleColorsClass.name)},t.prototype.setActiveMarkerButton=function(e){var r=this.markerButtons.find(function(i){return i.getAttribute("data-type-name")===e});r&&this.setActiveButton(r)},t.prototype.setCurrentMarker=function(e){var r=this;this.currentMarker=e,this.buttons.filter(function(i){return/delete|notes/.test(i.getAttribute("data-action"))}).forEach(function(i){r.currentMarker===void 0?(i.style.fillOpacity="0.4",i.style.pointerEvents="none"):(i.style.fillOpacity="1",i.style.pointerEvents="all")})},t}(),lg=function(){function t(e,r,i,n){this.panels=[],this.panelButtons=[],this.markerjsContainer=e,this.displayMode=r,this.uiStyleSettings=i,this.styles=n,this.panelButtonClick=this.panelButtonClick.bind(this),this.addStyles()}return t.prototype.addStyles=function(){var e;this.toolboxStyleClass=this.styles.addClass(new Ut("toolbox",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      font-family: sans-serif;
      `+(this.displayMode==="popup"?"height:"+2.5*this.uiStyleSettings.toolbarHeight+"px;":"")+`
      box-sizing: content-box;
      `+(this.displayMode==="popup"?"background-color: "+this.uiStyleSettings.canvasBackgroundColor+";":"")+`
      `+(this.displayMode==="inline"?"border-bottom-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-bottom-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolboxStyleColorsClass=this.styles.addClass(new Ut("toolbox_colors",`
      color: `+this.uiStyleSettings.toolboxColor+`;
    `));var r=this.uiStyleSettings.toolbarHeight/4;this.toolboxButtonRowStyleClass=this.styles.addClass(new Ut("toolbox-button-row",`
      display: flex;
      cursor: default;
      box-sizing: content-box;
    `)),this.toolboxButtonRowStyleColorsClass=this.styles.addClass(new Ut("toolbox-button-row_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
    `)),this.toolboxPanelRowStyleClass=this.styles.addClass(new Ut("toolbox-panel-row",`
      display: flex;
      `+(this.displayMode==="inline"?"position: absolute;":"")+`
      `+(this.displayMode==="inline"?"bottom: "+this.uiStyleSettings.toolbarHeight+"px;":"")+`
      cursor: default;
      height: `+1.5*this.uiStyleSettings.toolbarHeight+`px;
      `+(this.displayMode==="inline"?"width: 100%;":"")+`
      box-sizing: content-box;
    `)),this.toolboxPanelRowStyleColorsClass=this.styles.addClass(new Ut("toolbox-panel-row_colors",`
      background-color: `+((e=this.uiStyleSettings.toolboxBackgroundColor)!==null&&e!==void 0?e:this.uiStyleSettings.toolbarBackgroundHoverColor)+`;
    `)),this.toolboxButtonStyleClass=this.styles.addClass(new Ut("toolbox_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*r)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*r)+`px;
      padding: `+r+`px;
      box-sizing: content-box;
    `)),this.toolboxButtonStyleColorsClass=this.styles.addClass(new Ut("toolbox-button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolboxActiveButtonStyleColorsClass=this.styles.addClass(new Ut("toolbox-active-button_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`;
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.styles.addRule(new Ie("."+this.toolboxButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new Ie("."+this.toolboxButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new Ie("."+this.toolboxPanelRowStyleClass.name+" > div",`
        scrollbar-width: thin;
        `)),this.styles.addRule(new Ie("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar",`
      height: 10px;
      width: 10px;
    `)),this.styles.addRule(new Ie("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-track",`
        background-color: transparent;
        `)),this.styles.addRule(new Ie("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-thumb",`
        background-color: #444;
        border-radius: 20px;
        border: 2px solid #aaa;
        `))},t.prototype.show=function(e){var r;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=e,this.uiContainer.className=this.toolboxStyleClass.name+" "+((r=this.uiStyleSettings.toolboxStyleColorsClassName)!==null&&r!==void 0?r:this.toolboxStyleColorsClass.name),this.markerjsContainer.appendChild(this.uiContainer)},t.prototype.setPanelButtons=function(e){var r,i,n=this;this.panels=e,this.uiContainer!==void 0&&(this.uiContainer.innerHTML="",this.panelRow=document.createElement("div"),this.panelRow.className=this.toolboxPanelRowStyleClass.name+" "+((r=this.uiStyleSettings.toolboxPanelRowStyleColorsClassName)!==null&&r!==void 0?r:this.toolboxPanelRowStyleColorsClass.name),this.uiContainer.appendChild(this.panelRow),this.buttonRow=document.createElement("div"),this.buttonRow.className=this.toolboxButtonRowStyleClass.name+" "+((i=this.uiStyleSettings.toolboxButtonRowStyleColorsClassName)!==null&&i!==void 0?i:this.toolboxButtonRowStyleColorsClass.name)+" ",this.uiContainer.appendChild(this.buttonRow),this.panelButtons.splice(0),this.panels.forEach(function(o){var s;o.uiStyleSettings=n.uiStyleSettings;var a=document.createElement("div");a.className=n.toolboxButtonStyleClass.name+" "+((s=n.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&s!==void 0?s:n.toolboxButtonStyleColorsClass.name),a.innerHTML=o.icon,a.title=o.title,a.setAttribute("role","button"),a.setAttribute("aria-label",o.title),o.id&&a.setAttribute("data-action",o.id),a.addEventListener("click",function(){n.panelButtonClick(o)}),n.panelButtons.push(a),n.buttonRow.appendChild(a)}),this.displayMode==="inline"?this.panelRow.style.display="none":this.panelRow.style.visibility="hidden")},t.prototype.panelButtonClick=function(e){var r=this,i=-1;if(e!==this.activePanel){i=this.panels.indexOf(e),this.panelRow.innerHTML="";var n=e.getUi();n.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.panelRow.appendChild(n),this.panelRow.style.display="flex",this.panelRow.style.visibility="visible",this.panelRow.className=this.panelRow.className.replace(this.styles.fadeOutAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeInAnimationClassName,this.activePanel=e}else this.activePanel=void 0,this.panelRow.className=this.panelRow.className.replace(this.styles.fadeInAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeOutAnimationClassName,setTimeout(function(){r.displayMode==="inline"?r.panelRow.style.display="none":r.panelRow.style.visibility="hidden"},200);this.panelButtons.forEach(function(o,s){var a,l;o.className=r.toolboxButtonStyleClass.name+" "+(s===i?""+((a=r.uiStyleSettings.toolboxActiveButtonStyleColorsClassName)!==null&&a!==void 0?a:r.toolboxActiveButtonStyleColorsClass.name):""+((l=r.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&l!==void 0?l:r.toolboxButtonStyleColorsClass.name))})},t}(),yi=function(){function t(e,r,i){this.title=e,this.icon=r,this._id=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t}(),de=function(t){function e(r,i,n,o,s){var a=t.call(this,r,o||'<svg viewBox="0 0 24 24"><path d="M17.5 12a1.5 1.5 0 01-1.5-1.5A1.5 1.5 0 0117.5 9a1.5 1.5 0 011.5 1.5 1.5 1.5 0 01-1.5 1.5m-3-4A1.5 1.5 0 0113 6.5 1.5 1.5 0 0114.5 5 1.5 1.5 0 0116 6.5 1.5 1.5 0 0114.5 8m-5 0A1.5 1.5 0 018 6.5 1.5 1.5 0 019.5 5 1.5 1.5 0 0111 6.5 1.5 1.5 0 019.5 8m-3 4A1.5 1.5 0 015 10.5 1.5 1.5 0 016.5 9 1.5 1.5 0 018 10.5 1.5 1.5 0 016.5 12M12 3a9 9 0 00-9 9 9 9 0 009 9 1.5 1.5 0 001.5-1.5c0-.39-.15-.74-.39-1-.23-.27-.38-.62-.38-1a1.5 1.5 0 011.5-1.5H16a5 5 0 005-5c0-4.42-4.03-8-9-8z"/></svg>',s||"color-picker-panel")||this;return a.colors=[],a.addTransparent=!1,a.colorBoxes=[],a.colors=i,a.currentColor=n,a.setCurrentColor=a.setCurrentColor.bind(a),a.getColorBox=a.getColorBox.bind(a),a}return zt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.overflow="hidden",i.style.overflowX="scroll",i.style.whiteSpace="nowrap",this.colors.forEach(function(n){var o=r.getColorBox(n);i.appendChild(o),r.colorBoxes.push(o)}),i},e.prototype.getColorBox=function(r){var i=this,n=this.uiStyleSettings.toolbarHeight/4,o=this.uiStyleSettings.toolbarHeight-n,s=document.createElement("div");s.style.display="inline-block",s.style.boxSizing="content-box",s.style.width=o-2+"px",s.style.height=o-2+"px",s.style.padding="1px",s.style.marginRight="2px",s.style.marginBottom="2px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.borderRadius=(o+2)/2+"px",s.style.borderColor=r===this.currentColor?this.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){i.setCurrentColor(r,s)});var a=document.createElement("div");return a.style.display="inline-block",a.style.width=o-2+"px",a.style.height=o-2+"px",a.style.backgroundColor=r,a.style.borderRadius=o/2+"px",r==="transparent"&&(a.style.fill=this.uiStyleSettings.toolboxAccentColor,a.innerHTML=`<svg viewBox="0 0 24 24">
        <path d="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z" />
      </svg>`),s.appendChild(a),s},e.prototype.setCurrentColor=function(r,i){var n=this;this.currentColor=r,this.colorBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onColorChanged&&this.onColorChanged(r)},e}(yi),tf=function(){function t(e,r,i){this._state="new",this._isSelected=!1,this._container=e,this._overlayContainer=r,this.globalSettings=i,this.stateChanged=this.stateChanged.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this)}return Object.defineProperty(t.prototype,"typeName",{get:function(){return Object.getPrototypeOf(this).constructor.typeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"overlayContainer",{get:function(){return this._overlayContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.ownsTarget=function(e){return!1},Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._isSelected},enumerable:!1,configurable:!0}),t.prototype.select=function(){this.container.style.cursor="move",this._isSelected=!0,this.manipulationStartState=this.getState()},t.prototype.deselect=function(){this.container.style.cursor="default",this._isSelected=!1,this.stateChanged()},t.prototype.pointerDown=function(e,r){},t.prototype.dblClick=function(e,r){},t.prototype.manipulate=function(e){},t.prototype.pointerUp=function(e){this.stateChanged()},t.prototype.dispose=function(){},t.prototype.addMarkerVisualToContainer=function(e){this.container.childNodes.length>0?this.container.insertBefore(e,this.container.childNodes[0]):this.container.appendChild(e)},t.prototype.getState=function(){return{typeName:t.typeName,state:this.state,notes:this.notes}},t.prototype.restoreState=function(e){this._state=e.state,this.notes=e.notes},t.prototype.scale=function(e,r){},t.prototype.colorChanged=function(e){this.onColorChanged&&this.onColorChanged(e),this.stateChanged()},t.prototype.fillColorChanged=function(e){this.onFillColorChanged&&this.onFillColorChanged(e),this.stateChanged()},t.prototype.stateChanged=function(){if(this.onStateChanged&&this.state!=="creating"&&this.state!=="new"){var e=this.getState();this.manipulationStartState!==void 0&&(this.manipulationStartState.state="select"),e.state="select",JSON.stringify(this.manipulationStartState)!=JSON.stringify(e)&&this.onStateChanged(this)}},t.typeName="MarkerBase",t}(),ug=function(){function t(){this.findGripByVisual=this.findGripByVisual.bind(this)}return t.prototype.findGripByVisual=function(e){return this.topLeft.ownsTarget(e)?this.topLeft:this.topCenter.ownsTarget(e)?this.topCenter:this.topRight.ownsTarget(e)?this.topRight:this.centerLeft.ownsTarget(e)?this.centerLeft:this.centerRight.ownsTarget(e)?this.centerRight:this.bottomLeft.ownsTarget(e)?this.bottomLeft:this.bottomCenter.ownsTarget(e)?this.bottomCenter:this.bottomRight.ownsTarget(e)?this.bottomRight:void 0},t}(),wa=function(){function t(){this.GRIP_SIZE=10,this.visual=J.createGroup(),this.visual.appendChild(J.createCircle(1.5*this.GRIP_SIZE,[["fill","transparent"]])),this.visual.appendChild(J.createCircle(this.GRIP_SIZE,[["fill","#cccccc"],["fill-opacity","0.7"],["stroke","#333333"],["stroke-width","2"],["stroke-opacity","0.7"]]))}return t.prototype.ownsTarget=function(e){return e===this.visual||e===this.visual.childNodes[0]||e===this.visual.childNodes[1]},t}(),Dn=function(){function t(){}return t.toITransformMatrix=function(e){return{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}},t.toSVGMatrix=function(e,r){return e.a=r.a,e.b=r.b,e.c=r.c,e.d=r.d,e.e=r.e,e.f=r.f,e},t}(),sn=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.left=0,o.top=0,o.width=0,o.height=0,o.defaultSize={x:50,y:20},o.offsetX=0,o.offsetY=0,o.rotationAngle=0,o.CB_DISTANCE=10,o._suppressMarkerCreateEvent=!1,o.container.transform.baseVal.appendItem(J.createTransform()),o.setupControlBox(),o}return zt(e,t),Object.defineProperty(e.prototype,"centerX",{get:function(){return this.left+this.width/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this.top+this.height/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visual",{get:function(){return this._visual},set:function(r){this._visual=r;var i=J.createTransform();this._visual.transform.baseVal.appendItem(i)},enumerable:!1,configurable:!0}),e.prototype.ownsTarget=function(r){return!!t.prototype.ownsTarget.call(this,r)||!!(this.controlGrips.findGripByVisual(r)!==void 0||this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(r))},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.left=r.x,this.top=r.y),this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.manipulationStartWidth=this.width,this.manipulationStartHeight=this.height;var n=this.unrotatePoint(r);if(this.manipulationStartX=n.x,this.manipulationStartY=n.y,this.offsetX=n.x-this.left,this.offsetY=n.y-this.top,this.state!=="new")if(this.select(),this.activeGrip=this.controlGrips.findGripByVisual(i),this.activeGrip!==void 0)this._state="resize";else if(this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(i)){this.activeGrip=this.rotatorGrip;var o=this.rotatePoint({x:this.centerX,y:this.centerY});this.left=o.x-this.width/2,this.top=o.y-this.height/2,this.moveVisual({x:this.left,y:this.top});var s=this.container.transform.baseVal.getItem(0);s.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(s,0),this.adjustControlBox(),this._state="rotate"}else this._state="move"},e.prototype.pointerUp=function(r){var i=this.state;t.prototype.pointerUp.call(this,r),this.state==="creating"&&this.width<10&&this.height<10?(this.width=this.defaultSize.x,this.height=this.defaultSize.y):this.manipulate(r),this._state="select",i==="creating"&&this.onMarkerCreated&&this._suppressMarkerCreateEvent===!1&&this.onMarkerCreated(this)},e.prototype.moveVisual=function(r){this.visual.style.transform="translate("+r.x+"px, "+r.y+"px)"},e.prototype.manipulate=function(r){var i=this.unrotatePoint(r);this.state==="creating"?this.resize(r):this.state==="move"?(this.left=this.manipulationStartLeft+(i.x-this.manipulationStartLeft)-this.offsetX,this.top=this.manipulationStartTop+(i.y-this.manipulationStartTop)-this.offsetY,this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()):this.state==="resize"?this.resize(i):this.state==="rotate"&&this.rotate(r)},e.prototype.resize=function(r){var i=this.manipulationStartLeft,n=this.manipulationStartWidth,o=this.manipulationStartTop,s=this.manipulationStartHeight;switch(this.activeGrip){case this.controlGrips.bottomLeft:case this.controlGrips.centerLeft:case this.controlGrips.topLeft:i=this.manipulationStartLeft+r.x-this.manipulationStartX,n=this.manipulationStartWidth+this.manipulationStartLeft-i;break;case this.controlGrips.bottomRight:case this.controlGrips.centerRight:case this.controlGrips.topRight:case void 0:n=this.manipulationStartWidth+r.x-this.manipulationStartX}switch(this.activeGrip){case this.controlGrips.topCenter:case this.controlGrips.topLeft:case this.controlGrips.topRight:o=this.manipulationStartTop+r.y-this.manipulationStartY,s=this.manipulationStartHeight+this.manipulationStartTop-o;break;case this.controlGrips.bottomCenter:case this.controlGrips.bottomLeft:case this.controlGrips.bottomRight:case void 0:s=this.manipulationStartHeight+r.y-this.manipulationStartY}n>=0?(this.left=i,this.width=n):(this.left=i+n,this.width=-n),s>=0?(this.top=o,this.height=s):(this.top=o+s,this.height=-s),this.setSize()},e.prototype.setSize=function(){this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()},e.prototype.rotate=function(r){if(Math.abs(r.x-this.centerX)>.1){var i=Math.sign(r.x-this.centerX);this.rotationAngle=180*Math.atan((r.y-this.centerY)/(r.x-this.centerX))/Math.PI+90*i,this.applyRotation()}},e.prototype.applyRotation=function(){var r=this.container.transform.baseVal.getItem(0);r.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(r,0)},e.prototype.rotatePoint=function(r){if(this.rotationAngle===0)return r;var i=this.container.getCTM(),n=J.createPoint(r.x,r.y);return{x:(n=n.matrixTransform(i)).x,y:n.y}},e.prototype.unrotatePoint=function(r){if(this.rotationAngle===0)return r;var i=this.container.getCTM();i=i.inverse();var n=J.createPoint(r.x,r.y);return{x:(n=n.matrixTransform(i)).x,y:n.y}},e.prototype.select=function(){t.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},e.prototype.deselect=function(){t.prototype.deselect.call(this),this.controlBox.style.display="none"},e.prototype.setupControlBox=function(){this.controlBox=J.createGroup();var r=J.createTransform();r.setTranslate(-this.CB_DISTANCE/2,-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.appendItem(r),this.container.appendChild(this.controlBox),this.controlRect=J.createRect(this.width+this.CB_DISTANCE,this.height+this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"],["fill","transparent"],["pointer-events","none"]]),this.controlBox.appendChild(this.controlRect),this.globalSettings.disableRotation!==!0&&(this.rotatorGripLine=J.createLine((this.width+2*this.CB_DISTANCE)/2,this.top-this.CB_DISTANCE,(this.width+2*this.CB_DISTANCE)/2,this.top-3*this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.appendChild(this.rotatorGripLine)),this.controlGrips=new ug,this.addControlGrips(),this.controlBox.style.display="none"},e.prototype.adjustControlBox=function(){var r=this.controlBox.transform.baseVal.getItem(0);r.setTranslate(this.left-this.CB_DISTANCE/2,this.top-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.replaceItem(r,0),this.controlRect.setAttribute("width",(this.width+this.CB_DISTANCE).toString()),this.controlRect.setAttribute("height",(this.height+this.CB_DISTANCE).toString()),this.rotatorGripLine!==void 0&&(this.rotatorGripLine.setAttribute("x1",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y1",(-this.CB_DISTANCE/2).toString()),this.rotatorGripLine.setAttribute("x2",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y2",(3*-this.CB_DISTANCE).toString())),this.positionGrips()},e.prototype.addControlGrips=function(){this.controlGrips.topLeft=this.createGrip(),this.controlGrips.topCenter=this.createGrip(),this.controlGrips.topRight=this.createGrip(),this.controlGrips.centerLeft=this.createGrip(),this.controlGrips.centerRight=this.createGrip(),this.controlGrips.bottomLeft=this.createGrip(),this.controlGrips.bottomCenter=this.createGrip(),this.controlGrips.bottomRight=this.createGrip(),this.globalSettings.disableRotation!==!0&&(this.rotatorGrip=this.createGrip()),this.positionGrips()},e.prototype.createGrip=function(){var r=new wa;return r.visual.transform.baseVal.appendItem(J.createTransform()),this.controlBox.appendChild(r.visual),r},e.prototype.positionGrips=function(){var r=this.controlGrips.topLeft.GRIP_SIZE,i=-r/2,n=i,o=(this.width+this.CB_DISTANCE)/2-r/2,s=(this.height+this.CB_DISTANCE)/2-r/2,a=this.height+this.CB_DISTANCE-r/2,l=this.width+this.CB_DISTANCE-r/2;this.positionGrip(this.controlGrips.topLeft.visual,i,n),this.positionGrip(this.controlGrips.topCenter.visual,o,n),this.positionGrip(this.controlGrips.topRight.visual,l,n),this.positionGrip(this.controlGrips.centerLeft.visual,i,s),this.positionGrip(this.controlGrips.centerRight.visual,l,s),this.positionGrip(this.controlGrips.bottomLeft.visual,i,a),this.positionGrip(this.controlGrips.bottomCenter.visual,o,a),this.positionGrip(this.controlGrips.bottomRight.visual,l,a),this.rotatorGrip!==void 0&&this.positionGrip(this.rotatorGrip.visual,o,n-3*this.CB_DISTANCE)},e.prototype.positionGrip=function(r,i,n){var o=r.transform.baseVal.getItem(0);o.setTranslate(i,n),r.transform.baseVal.replaceItem(o,0)},e.prototype.hideControlBox=function(){this.controlBox.style.display="none"},e.prototype.showControlBox=function(){this.controlBox.style.display=""},e.prototype.getState=function(){return Object.assign({left:this.left,top:this.top,width:this.width,height:this.height,rotationAngle:this.rotationAngle,visualTransformMatrix:Dn.toITransformMatrix(this.visual.transform.baseVal.getItem(0).matrix),containerTransformMatrix:Dn.toITransformMatrix(this.container.transform.baseVal.getItem(0).matrix)},t.prototype.getState.call(this))},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r);var i=r;this.left=i.left,this.top=i.top,this.width=i.width,this.height=i.height,this.rotationAngle=i.rotationAngle,this.visual.transform.baseVal.getItem(0).setMatrix(Dn.toSVGMatrix(this.visual.transform.baseVal.getItem(0).matrix,i.visualTransformMatrix)),this.container.transform.baseVal.getItem(0).setMatrix(Dn.toSVGMatrix(this.container.transform.baseVal.getItem(0).matrix,i.containerTransformMatrix))},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i);var n=this.rotatePoint({x:this.left,y:this.top}),o=this.unrotatePoint({x:n.x*r,y:n.y*i});this.left=o.x,this.top=o.y,this.width=this.width*r,this.height=this.height*i,this.adjustControlBox()},e}(tf),ef=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.fillColor="transparent",o.strokeColor="transparent",o.strokeWidth=0,o.strokeDasharray="",o.opacity=1,o.setStrokeColor=o.setStrokeColor.bind(o),o.setFillColor=o.setFillColor.bind(o),o.setStrokeWidth=o.setStrokeWidth.bind(o),o.setStrokeDasharray=o.setStrokeDasharray.bind(o),o.createVisual=o.createVisual.bind(o),o}return zt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual)},e.prototype.createVisual=function(){this.visual=J.createRect(1,1,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},e.prototype.manipulate=function(r){t.prototype.manipulate.call(this,r)},e.prototype.resize=function(r){t.prototype.resize.call(this,r),this.setSize()},e.prototype.setSize=function(){t.prototype.setSize.call(this),J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]])},e.prototype.pointerUp=function(r){t.prototype.pointerUp.call(this,r),this.setSize()},e.prototype.setStrokeColor=function(r){this.strokeColor=r,this.visual&&J.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},e.prototype.setFillColor=function(r){this.fillColor=r,this.visual&&J.setAttributes(this.visual,[["fill",this.fillColor]]),this.stateChanged()},e.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.visual&&J.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},e.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.visual&&J.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},e.prototype.getState=function(){return Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},t.prototype.getState.call(this))},e.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.opacity=i.opacity,this.createVisual(),t.prototype.restoreState.call(this,r),this.setSize()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.setSize()},e.title="Rectangle marker",e}(sn),bi=function(t){function e(r,i,n,o,s){var a=t.call(this,r,o||'<svg viewBox="0 0 24 24"><path d="M3 17h18v-2H3v2m0 3h18v-1H3v1m0-7h18v-3H3v3m0-9v4h18V4H3z"/></svg>',s||"line-width-panel")||this;return a.widths=[],a.widthBoxes=[],a.widths=i,a.currentWidth=n,a.setCurrentWidth=a.setCurrentWidth.bind(a),a}return zt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",this.widths.forEach(function(n){var o=document.createElement("div");o.style.display="flex",o.style.flexGrow="2",o.style.alignItems="center",o.style.justifyContent="space-between",o.style.padding="5px",o.style.borderWidth="2px",o.style.borderStyle="solid",o.style.borderColor=n===r.currentWidth?r.uiStyleSettings.toolboxAccentColor:"transparent",o.addEventListener("click",function(){r.setCurrentWidth(n,o)}),i.appendChild(o);var s=document.createElement("div");s.innerText=n.toString(),s.style.marginRight="5px",o.appendChild(s);var a=document.createElement("div");a.style.minHeight="20px",a.style.flexGrow="2",a.style.display="flex",a.style.alignItems="center";var l=document.createElement("hr");l.style.minWidth="20px",l.style.border="0px",l.style.borderTop=n+"px solid "+r.uiStyleSettings.toolboxColor,l.style.flexGrow="2",a.appendChild(l),o.appendChild(a),r.widthBoxes.push(o)}),i},e.prototype.setCurrentWidth=function(r,i){var n=this;this.currentWidth=r,this.widthBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onWidthChanged&&this.onWidthChanged(this.currentWidth)},e}(yi),an=function(t){function e(r,i,n,o,s){var a=t.call(this,r,o||'<svg viewBox="0 0 24 24"><path d="M3 16h5v-2H3v2m6.5 0h5v-2h-5v2m6.5 0h5v-2h-5v2M3 20h2v-2H3v2m4 0h2v-2H7v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2M3 12h8v-2H3v2m10 0h8v-2h-8v2M3 4v4h18V4H3z"/></svg>',s||"line-style-panel")||this;return a.styles=[],a.styleBoxes=[],a.styles=i,a.currentStyle=n,a.setCurrentStyle=a.setCurrentStyle.bind(a),a}return zt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",this.styles.forEach(function(n){var o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="space-between",o.style.padding="5px",o.style.borderWidth="2px",o.style.borderStyle="solid",o.style.overflow="hidden",o.style.maxWidth=100/r.styles.length-5+"%",o.style.borderColor=n===r.currentStyle?r.uiStyleSettings.toolboxAccentColor:"transparent",o.addEventListener("click",function(){r.setCurrentStyle(n,o)}),i.appendChild(o);var s=document.createElement("div");s.style.minHeight="20px",s.style.flexGrow="2",s.style.overflow="hidden";var a=`<svg width="100" height="20">
      <line x1="0" y1="10" x2="100" y2="10" stroke="`+r.uiStyleSettings.toolboxColor+'" stroke-width="3" '+(n!==""?'stroke-dasharray="'+n+'"':"")+` />
  </svg>`;s.innerHTML=a,o.appendChild(s),r.styleBoxes.push(o)}),i},e.prototype.setCurrentStyle=function(r,i){var n=this;this.currentStyle=r,this.styleBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onStyleChanged&&this.onStyleChanged(this.currentStyle)},e}(yi),es=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.strokeColor=n.defaultColor,o.strokeWidth=n.defaultStrokeWidth,o.strokeDasharray=n.defaultStrokeDasharray,o.strokePanel=new de("Line color",n.defaultColorSet,n.defaultColor),o.strokePanel.onColorChanged=o.setStrokeColor,o.strokeWidthPanel=new bi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.strokeWidthPanel.onWidthChanged=o.setStrokeWidth,o.strokeStylePanel=new an("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),o.strokeStylePanel.onStyleChanged=o.setStrokeDasharray,o}return zt(e,t),Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=t.prototype.getState.call(this);return r.typeName=e.typeName,r},e.typeName="FrameMarker",e.title="Frame marker",e.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4m14 11H6V8h12v9z"/></svg>',e}(ef),cg=function(){this.defaultColorSet=["#EF4444","#10B981","#2563EB","#FFFF00","#7C3AED","#F472B6","#000000","#FFFFFF"],this.defaultColor=this.defaultColorSet[0],this.defaultFillColor=this.defaultColorSet[0],this.defaultStrokeColor=this.defaultColorSet[7],this.defaultHighlightColor=this.defaultColorSet[3],this.defaultStrokeWidth=3,this.defaultStrokeDasharray="",this.defaultHighlightOpacity=.5,this.defaultFontFamily="Helvetica, Arial, sans-serif",this.defaultStrokeWidths=[1,2,3,5,10],this.defaultStrokeDasharrays=["","3","12 3","9 6 3 6"],this.defaultOpacitySteps=[.1,.25,.5,.75,1],this.displayMode="inline",this.defaultFontFamilies=['Times, "Times New Roman", serif',"Helvetica, Arial, sans-serif",'Courier, "Courier New", monospace',"cursive","fantasy"],this.popupMargin=30,this.newFreehandMarkerOnPointerUp=!1,this.defaultColorsFollowCurrentColors=!1,this.freehandPixelRatio=1,this.disableRotation=!1,this.defaultCaptionFontSize="1rem",this.defaultCaptionText="Text",this.wrapText=!1,this.defaultText="Your text here"},rf=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.x1=0,o.y1=0,o.x2=0,o.y2=0,o.defaultLength=50,o.manipulationStartX=0,o.manipulationStartY=0,o.manipulationStartX1=0,o.manipulationStartY1=0,o.manipulationStartX2=0,o.manipulationStartY2=0,o.setupControlBox(),o}return zt(e,t),e.prototype.ownsTarget=function(r){return!!t.prototype.ownsTarget.call(this,r)||!(!this.grip1.ownsTarget(r)&&!this.grip2.ownsTarget(r))},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.manipulationStartX=r.x,this.manipulationStartY=r.y,this.state==="new"&&(this.x1=r.x,this.y1=r.y,this.x2=r.x,this.y2=r.y),this.manipulationStartX1=this.x1,this.manipulationStartY1=this.y1,this.manipulationStartX2=this.x2,this.manipulationStartY2=this.y2,this.state!=="new"&&(this.select(),this.grip1.ownsTarget(i)?this.activeGrip=this.grip1:this.grip2.ownsTarget(i)?this.activeGrip=this.grip2:this.activeGrip=void 0,this.activeGrip?this._state="resize":this._state="move")},e.prototype.pointerUp=function(r){var i=this.state;t.prototype.pointerUp.call(this,r),this.state==="creating"&&Math.abs(this.x1-this.x2)<10&&Math.abs(this.y1-this.y2)<10?(this.x2=this.x1+this.defaultLength,this.adjustVisual(),this.adjustControlBox()):this.manipulate(r),this._state="select",i==="creating"&&this.onMarkerCreated&&this.onMarkerCreated(this)},e.prototype.adjustVisual=function(){},e.prototype.manipulate=function(r){this.state==="creating"?this.resize(r):this.state==="move"?(this.x1=this.manipulationStartX1+r.x-this.manipulationStartX,this.y1=this.manipulationStartY1+r.y-this.manipulationStartY,this.x2=this.manipulationStartX2+r.x-this.manipulationStartX,this.y2=this.manipulationStartY2+r.y-this.manipulationStartY,this.adjustVisual(),this.adjustControlBox()):this.state==="resize"&&this.resize(r)},e.prototype.resize=function(r){switch(this.activeGrip){case this.grip1:this.x1=r.x,this.y1=r.y;break;case this.grip2:case void 0:this.x2=r.x,this.y2=r.y}this.adjustVisual(),this.adjustControlBox()},e.prototype.select=function(){t.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},e.prototype.deselect=function(){t.prototype.deselect.call(this),this.controlBox.style.display="none"},e.prototype.setupControlBox=function(){this.controlBox=J.createGroup(),this.container.appendChild(this.controlBox),this.addControlGrips(),this.controlBox.style.display="none"},e.prototype.adjustControlBox=function(){this.positionGrips()},e.prototype.addControlGrips=function(){this.grip1=this.createGrip(),this.grip2=this.createGrip(),this.positionGrips()},e.prototype.createGrip=function(){var r=new wa;return r.visual.transform.baseVal.appendItem(J.createTransform()),this.controlBox.appendChild(r.visual),r},e.prototype.positionGrips=function(){var r=this.grip1.GRIP_SIZE;this.positionGrip(this.grip1.visual,this.x1-r/2,this.y1-r/2),this.positionGrip(this.grip2.visual,this.x2-r/2,this.y2-r/2)},e.prototype.positionGrip=function(r,i,n){var o=r.transform.baseVal.getItem(0);o.setTranslate(i,n),r.transform.baseVal.replaceItem(o,0)},e.prototype.getState=function(){return Object.assign({x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2},t.prototype.getState.call(this))},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r);var i=r;this.x1=i.x1,this.y1=i.y1,this.x2=i.x2,this.y2=i.y2},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.x1=this.x1*r,this.y1=this.y1*i,this.x2=this.x2*r,this.y2=this.y2*i,this.adjustVisual(),this.adjustControlBox()},e}(tf),ka=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.strokeColor="transparent",o.strokeWidth=0,o.strokeDasharray="",o.setStrokeColor=o.setStrokeColor.bind(o),o.setStrokeWidth=o.setStrokeWidth.bind(o),o.setStrokeDasharray=o.setStrokeDasharray.bind(o),o.strokeColor=n.defaultColor,o.strokeWidth=n.defaultStrokeWidth,o.strokeDasharray=n.defaultStrokeDasharray,o.strokePanel=new de("Line color",n.defaultColorSet,n.defaultColor),o.strokePanel.onColorChanged=o.setStrokeColor,o.strokeWidthPanel=new bi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.strokeWidthPanel.onWidthChanged=o.setStrokeWidth,o.strokeStylePanel=new an("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),o.strokeStylePanel.onStyleChanged=o.setStrokeDasharray,o}return zt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.selectorLine&&r!==this.visibleLine)},e.prototype.createVisual=function(){this.visual=J.createGroup(),this.selectorLine=J.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()]]),this.visibleLine=J.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.visual.appendChild(this.selectorLine),this.visual.appendChild(this.visibleLine),this.addMarkerVisualToContainer(this.visual)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.adjustVisual(),this._state="creating")},e.prototype.adjustVisual=function(){this.selectorLine&&this.visibleLine&&(this.selectorLine.setAttribute("x1",this.x1.toString()),this.selectorLine.setAttribute("y1",this.y1.toString()),this.selectorLine.setAttribute("x2",this.x2.toString()),this.selectorLine.setAttribute("y2",this.y2.toString()),this.visibleLine.setAttribute("x1",this.x1.toString()),this.visibleLine.setAttribute("y1",this.y1.toString()),this.visibleLine.setAttribute("x2",this.x2.toString()),this.visibleLine.setAttribute("y2",this.y2.toString()),J.setAttributes(this.visibleLine,[["stroke",this.strokeColor]]),J.setAttributes(this.visibleLine,[["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.visibleLine,[["stroke-dasharray",this.strokeDasharray.toString()]]))},e.prototype.setStrokeColor=function(r){this.strokeColor=r,this.adjustVisual(),this.colorChanged(r)},e.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.adjustVisual()},e.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.adjustVisual(),this.stateChanged()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r);var i=r;this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.createVisual(),this.adjustVisual()},e.typeName="LineMarker",e.title="Line marker",e.icon='<svg viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>',e}(rf),Ea=function(t){function e(r,i,n,o,s){var a=t.call(this,r,o||'<svg viewBox="0 0 24 24"><path d="M17 8h3v12h1v1h-4v-1h1v-3h-4l-1.5 3H14v1h-4v-1h1l6-12m1 1l-3.5 7H18V9M5 3h5c1.11 0 2 .89 2 2v11H9v-5H6v5H3V5c0-1.11.89-2 2-2m1 2v4h3V5H6z"/></svg>',s||"font-family-panel")||this;return a.fonts=[],a.fontBoxes=[],a.fonts=i,a.currentFont=n,a.setCurrentFont=a.setCurrentFont.bind(a),a}return zt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.overflow="hidden",i.style.flexGrow="2",this.fonts.forEach(function(n){var o=document.createElement("div");o.style.display="inline-block",o.style.alignItems="center",o.style.justifyContent="space-between",o.style.padding="5px",o.style.borderWidth="2px",o.style.borderStyle="solid",o.style.overflow="hidden",o.style.maxWidth=100/r.fonts.length-5+"%",o.style.borderColor=n===r.currentFont?r.uiStyleSettings.toolboxAccentColor:"transparent",o.addEventListener("click",function(){r.setCurrentFont(n,o)}),i.appendChild(o);var s=document.createElement("div");s.style.display="flex",s.style.minHeight="20px",s.style.flexGrow="2",s.style.fontFamily=n,s.style.overflow="hidden";var a=document.createElement("div");a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",a.innerHTML="The quick brown fox jumps over the lazy dog",s.appendChild(a),o.appendChild(s),r.fontBoxes.push(o)}),i},e.prototype.setCurrentFont=function(r,i){var n=this;this.currentFont=r,this.fontBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onFontChanged&&this.onFontChanged(this.currentFont)},e}(yi),Di=function(t){function e(r,i,n){var o,s=t.call(this,r,i,n)||this;return s.color="transparent",s.padding=5,s.DEFAULT_TEXT="your text here",s.isMoved=!1,s.color=n.defaultColor,s.fontFamily=n.defaultFontFamily,s.text=(o=n.defaultText)!==null&&o!==void 0?o:s.DEFAULT_TEXT,s.defaultSize={x:100,y:30},s.setColor=s.setColor.bind(s),s.setFont=s.setFont.bind(s),s.renderText=s.renderText.bind(s),s.sizeText=s.sizeText.bind(s),s.textEditDivClicked=s.textEditDivClicked.bind(s),s.showTextEditor=s.showTextEditor.bind(s),s.setSize=s.setSize.bind(s),s.positionTextEditor=s.positionTextEditor.bind(s),s.wrapText=s.wrapText.bind(s),s.colorPanel=new de("Color",n.defaultColorSet,n.defaultColor),s.colorPanel.onColorChanged=s.setColor,s.fontFamilyPanel=new Ea("Font",n.defaultFontFamilies,n.defaultFontFamily),s.fontFamilyPanel.onFontChanged=s.setFont,s}return zt(e,t),e.prototype.ownsTarget=function(r){if(t.prototype.ownsTarget.call(this,r)||r===this.visual||r===this.textElement||r===this.bgRectangle)return!0;var i=!1;return this.textElement.childNodes.forEach(function(n){n===r&&(i=!0)}),i},e.prototype.createVisual=function(){this.visual=J.createGroup(),this.bgRectangle=J.createRect(1,1,[["fill","transparent"]]),this.visual.appendChild(this.bgRectangle),this.textElement=J.createText([["fill",this.color],["font-family",this.fontFamily],["font-size","16px"],["x","0"],["y","0"]]),this.textElement.transform.baseVal.appendItem(J.createTransform()),this.textElement.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.textElement),this.addMarkerVisualToContainer(this.visual),this.renderText()},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.isMoved=!1,this.pointerDownPoint=r,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},e.prototype.wrapText=function(){function r(u){var c=u[0].length;return u.forEach(function(f){f.length>c&&(c=f.length)}),.35*c/u.length}if(this.text!==""){for(var i=this.text.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/),n=1*this.width/this.height,o=new(Array.bind.apply(Array,Ki([void 0],i))),s=r(o),a=Number.MAX_VALUE,l=function(){var u=o[0];o.forEach(function(c){c.length>u.length&&(u=c)}),(a=u.lastIndexOf(" ",a-1))>0?(o=[],i.forEach(function(c){for(var f=c;f.length>a;){var h=f.lastIndexOf(" ",a);h<0&&(h=f.indexOf(" ")),h>0?(o.push(f.substring(0,h)),f=f.substring(h).trim()):(o.push(f),f="")}o.push(f)}),s=r(o)):s=-1};s>n;)l();return o.join(`\r
`)}return this.text},e.prototype.renderText=function(){var r=this;if(this.textElement){for(;this.textElement.lastChild;)this.textElement.removeChild(this.textElement.lastChild);(this.globalSettings.wrapText?this.wrapText():this.text).split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/).forEach(function(i){r.textElement.appendChild(J.createTSpan(i.trim()===""?" ":i.trim(),[["x","0"],["dy","1.2em"]]))}),setTimeout(this.sizeText,10)}},e.prototype.getTextScale=function(){var r=this.textElement.getBBox(),i=1;if(r.width>0&&r.height>0){var n=(1*this.width-this.width*this.padding*2/100)/r.width,o=(1*this.height-this.height*this.padding*2/100)/r.height;i=Math.min(n,o)}return i},e.prototype.getTextPosition=function(r){var i=window.getComputedStyle(this.textElement).direction==="rtl"?1:-1,n=this.textElement.getBBox(),o=0,s=0;return n.width>0&&n.height>0&&(o=(this.width+i*n.width*r)/2,s=this.height/2-n.height*r/2),{x:o,y:s}},e.prototype.sizeText=function(){var r=this.textElement.getBBox(),i=this.getTextScale(),n=this.getTextPosition(i);n.y-=r.y*i,navigator.userAgent.indexOf("Edge/")>-1?this.textElement.style.transform="translate("+n.x+"px, "+n.y+"px) scale("+i+", "+i+")":(this.textElement.transform.baseVal.getItem(0).setTranslate(n.x,n.y),this.textElement.transform.baseVal.getItem(1).setScale(i,i))},e.prototype.manipulate=function(r){t.prototype.manipulate.call(this,r),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(r.x-this.pointerDownPoint.x)>5||Math.abs(r.y-this.pointerDownPoint.y)>5)},e.prototype.resize=function(r){t.prototype.resize.call(this,r),this.isMoved=!0,this.setSize(),this.globalSettings.wrapText?this.renderText():this.sizeText()},e.prototype.setSize=function(){t.prototype.setSize.call(this),this.visual&&this.bgRectangle&&(J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.bgRectangle,[["width",this.width.toString()],["height",this.height.toString()]]))},e.prototype.pointerUp=function(r){var i=this.state;i==="creating"&&(this._suppressMarkerCreateEvent=!0),t.prototype.pointerUp.call(this,r),this.setSize(),(i==="creating"||!this.isMoved&&Date.now()-this.pointerDownTimestamp>500)&&this.showTextEditor(),this.pointerDownPoint=void 0},e.prototype.showTextEditor=function(){var r=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditor=document.createElement("div"),this.textEditor.style.position="absolute",this.textEditor.style.fontFamily=this.fontFamily,this.textEditor.style.lineHeight="1em",this.textEditor.innerText=this.text,this.textEditor.contentEditable="true",this.textEditor.style.color=this.color,this.textEditor.style.whiteSpace="pre",this.positionTextEditor(),this.textEditor.addEventListener("pointerup",function(i){i.stopPropagation()}),this.globalSettings.wrapText||this.textEditor.addEventListener("input",function(){for(var i=Number.parseFloat(r.textEditor.style.fontSize);r.textEditor.clientWidth>=Number.parseInt(r.textEditor.style.maxWidth)&&i>.9;)i-=.1,r.textEditor.style.fontSize=Math.max(i,.9)+"em"}),this.textEditor.addEventListener("keyup",function(i){i.cancelBubble=!0}),this.textEditor.addEventListener("paste",function(i){if(i.clipboardData){var n=i.clipboardData.getData("text"),o=window.getSelection();if(!o.rangeCount)return!1;o.deleteFromDocument(),o.getRangeAt(0).insertNode(document.createTextNode(n)),i.preventDefault()}}),this.textEditDiv.addEventListener("pointerup",function(){r.textEditDivClicked(r.textEditor.innerText)}),this.textEditDiv.appendChild(this.textEditor),this.overlayContainer.appendChild(this.textEditDiv),this.hideVisual(),this.textEditor.focus(),document.execCommand("selectAll")},e.prototype.positionTextEditor=function(){if(this.state==="edit")if(this.textEditor===void 0)this.showTextEditor();else if(this.globalSettings.wrapText)this.textEditor.style.left=this.left+this.padding+"px",this.textEditor.style.top=this.top+this.padding+"px",this.textEditor.style.width=this.width-2*this.padding+"px",this.textEditor.style.height=this.height-2*this.padding+"px",this.textEditor.style.maxHeight=this.textEditor.style.height,this.textEditor.style.whiteSpace="wrap";else{this.textElement.style.display="";var r=this.getTextScale(),i=this.rotatePoint({x:this.left+this.width/2,y:this.top+this.height/2}),n=this.textElement.getBBox(),o={x:n.width*r,y:n.height*r};i.x-=o.x/2,i.y-=o.y/2,this.textEditor.style.top=i.y+"px",this.textEditor.style.left=i.x+"px",this.textEditor.style.maxWidth=this.overlayContainer.offsetWidth-i.x+"px",this.textEditor.style.fontSize=Math.max(16*r,12)+"px",this.textElement.style.display="none"}},e.prototype.textEditDivClicked=function(r){this.text=r.trim(),this.overlayContainer.innerHTML="",this.renderText(),this.showVisual(),this._suppressMarkerCreateEvent&&(this._suppressMarkerCreateEvent=!1,this.onMarkerCreated&&this.onMarkerCreated(this)),this.stateChanged()},e.prototype.select=function(){t.prototype.select.call(this),this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText)},e.prototype.deselect=function(){this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText),t.prototype.deselect.call(this)},e.prototype.dblClick=function(r,i){t.prototype.dblClick.call(this,r,i),this.showTextEditor()},e.prototype.setColor=function(r){this.textElement&&J.setAttributes(this.textElement,[["fill",r]]),this.color=r,this.textEditor&&(this.textEditor.style.color=this.color),this.colorChanged(r)},e.prototype.setFont=function(r){this.textElement&&J.setAttributes(this.textElement,[["font-family",r]]),this.fontFamily=r,this.textEditor&&(this.textEditor.style.fontFamily=this.fontFamily),this.renderText(),this.stateChanged()},e.prototype.hideVisual=function(){this.textElement.style.display="none",this.hideControlBox()},e.prototype.showVisual=function(){this.state==="edit"&&(this._state="select"),this.textElement.style.display="",this.showControlBox()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({color:this.color,fontFamily:this.fontFamily,padding:this.padding,text:this.text,wrapText:this.globalSettings.wrapText},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){var i=r;this.color=i.color,this.fontFamily=i.fontFamily,this.padding=i.padding,this.text=i.text,this.createVisual(),t.prototype.restoreState.call(this,r),this.setSize(),this.globalSettings.wrapText&&this.renderText()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.setSize(),this.sizeText(),this.positionTextEditor()},e.typeName="TextMarker",e.title="Text marker",e.icon='<svg viewBox="0 0 24 24"><path d="M9.6 14L12 7.7l2.4 6.3M11 5L5.5 19h2.2l1.1-3H15l1.1 3h2.2L13 5h-2z"/></svg>',e}(sn),Ei=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.color="transparent",o.lineWidth=3,o.drawing=!1,o.pixelRatio=1,o.color=n.defaultColor,o.lineWidth=n.defaultStrokeWidth,o.pixelRatio=n.freehandPixelRatio,o.setColor=o.setColor.bind(o),o.addCanvas=o.addCanvas.bind(o),o.finishCreation=o.finishCreation.bind(o),o.setLineWidth=o.setLineWidth.bind(o),o.colorPanel=new de("Color",n.defaultColorSet,n.defaultColor),o.colorPanel.onColorChanged=o.setColor,o.lineWidthPanel=new bi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.lineWidthPanel.onWidthChanged=o.setLineWidth,o}return zt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.drawingImage)},e.prototype.createVisual=function(){this.visual=J.createGroup(),this.drawingImage=J.createImage(),this.visual.appendChild(this.drawingImage);var r=J.createTransform();this.visual.transform.baseVal.appendItem(r),this.addMarkerVisualToContainer(this.visual)},e.prototype.pointerDown=function(r,i){this.state==="new"&&(this.addCanvas(),this.createVisual(),this._state="creating"),this.state==="creating"?(this.canvasContext.strokeStyle=this.color,this.canvasContext.lineWidth=this.lineWidth,this.canvasContext.beginPath(),this.canvasContext.moveTo(r.x,r.y),this.drawing=!0):t.prototype.pointerDown.call(this,r,i)},e.prototype.manipulate=function(r){this.state==="creating"?this.drawing&&(this.canvasContext.lineTo(r.x,r.y),this.canvasContext.stroke()):t.prototype.manipulate.call(this,r)},e.prototype.resize=function(r){t.prototype.resize.call(this,r),J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]])},e.prototype.pointerUp=function(r){this._state==="creating"?this.drawing&&(this.canvasContext.closePath(),this.drawing=!1,this.globalSettings.newFreehandMarkerOnPointerUp&&this.finishCreation()):t.prototype.pointerUp.call(this,r)},e.prototype.addCanvas=function(){this.overlayContainer.innerHTML="",this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.overlayContainer.clientWidth*this.pixelRatio,this.canvasElement.height=this.overlayContainer.clientHeight*this.pixelRatio,this.canvasContext=this.canvasElement.getContext("2d"),this.canvasContext.scale(this.pixelRatio,this.pixelRatio),this.overlayContainer.appendChild(this.canvasElement)},e.prototype.select=function(){this.state==="creating"&&this.finishCreation(),t.prototype.select.call(this)},e.prototype.deselect=function(){this.state==="creating"&&this.finishCreation(),t.prototype.deselect.call(this)},e.prototype.finishCreation=function(){for(var r=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),i=[this.canvasElement.width+1,this.canvasElement.height+1,-1,-1],n=i[0],o=i[1],s=i[2],a=i[3],l=!1,u=0;u<this.canvasElement.height;u++)for(var c=0;c<this.canvasElement.width;c++)r.data[u*this.canvasElement.width*4+4*c+3]>0&&(l=!0,u<o&&(o=u),c<n&&(n=c),u>a&&(a=u),c>s&&(s=c));if(l){this.left=n/this.pixelRatio,this.top=o/this.pixelRatio,this.width=(s-n)/this.pixelRatio,this.height=(a-o)/this.pixelRatio;var f=document.createElement("canvas");f.width=s-n,f.height=a-o,f.getContext("2d").putImageData(this.canvasContext.getImageData(n,o,s-n,a-o),0,0),this.drawingImgUrl=f.toDataURL("image/png"),this.setDrawingImage(),this._state="select",this.onMarkerCreated&&this.onMarkerCreated(this)}this.overlayContainer.innerHTML=""},e.prototype.setDrawingImage=function(){J.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.drawingImage,[["href",this.drawingImgUrl]]),this.moveVisual({x:this.left,y:this.top})},e.prototype.setColor=function(r){this.color=r,this.colorChanged(r)},e.prototype.setLineWidth=function(r){this.lineWidth=r},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return this.state==="new"||this.state==="creating"?[this.colorPanel,this.lineWidthPanel]:[]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({drawingImgUrl:this.drawingImgUrl},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){this.createVisual(),t.prototype.restoreState.call(this,r),this.drawingImgUrl=r.drawingImgUrl,this.setDrawingImage()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.setDrawingImage()},e.typeName="FreehandMarker",e.title="Freehand marker",e.icon='<svg viewBox="0 0 24 24"><path d="M9.75 20.85c1.78-.7 1.39-2.63.49-3.85-.89-1.25-2.12-2.11-3.36-2.94A9.817 9.817 0 014.54 12c-.28-.33-.85-.94-.27-1.06.59-.12 1.61.46 2.13.68.91.38 1.81.82 2.65 1.34l1.01-1.7C8.5 10.23 6.5 9.32 4.64 9.05c-1.06-.16-2.18.06-2.54 1.21-.32.99.19 1.99.77 2.77 1.37 1.83 3.5 2.71 5.09 4.29.34.33.75.72.95 1.18.21.44.16.47-.31.47-1.24 0-2.79-.97-3.8-1.61l-1.01 1.7c1.53.94 4.09 2.41 5.96 1.79m11.09-15.6c.22-.22.22-.58 0-.79l-1.3-1.3a.562.562 0 00-.78 0l-1.02 1.02 2.08 2.08M11 10.92V13h2.08l6.15-6.15-2.08-2.08L11 10.92z"/></svg>',e}(sn),fg=function(t){function e(r,i,n,o){var s=t.call(this,r,n||'<svg viewBox="0 0 24 24"><path d="M8 14v4l-6-6 6-6v4h8V6l6 6-6 6v-4H8z"/></svg>',o||"arrow-type-panel")||this;return s.typeBoxes=[],s.currentType=i,s.setCurrentType=s.setCurrentType.bind(s),s}return zt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2";for(var n=function(a){var l="both";switch(a){case 0:l="both";break;case 1:l="start";break;case 2:l="end";break;case 3:l="none"}var u=document.createElement("div");if(u.style.display="flex",u.style.flexGrow="2",u.style.alignItems="center",u.style.justifyContent="space-between",u.style.padding="5px",u.style.borderWidth="2px",u.style.borderStyle="solid",u.style.borderColor=l===o.currentType?o.uiStyleSettings.toolboxAccentColor:"transparent",u.addEventListener("click",function(){r.setCurrentType(l,u)}),i.appendChild(u),l==="both"||l==="start"){var c=document.createElement("div");c.style.display="flex",c.style.alignItems="center",c.style.minHeight="20px",c.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,5 10,0 10,10" fill="`+(o.uiStyleSettings!==void 0?o.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,c.style.marginLeft="5px",u.appendChild(c)}var f=document.createElement("div");f.style.display="flex",f.style.alignItems="center",f.style.minHeight="20px",f.style.flexGrow="2";var h=document.createElement("hr");if(h.style.minWidth="20px",h.style.border="0px",h.style.borderTop="3px solid "+(o.uiStyleSettings!==void 0?o.uiStyleSettings.toolboxColor:"#eeeeee"),h.style.flexGrow="2",f.appendChild(h),u.appendChild(f),l==="both"||l==="end"){var d=document.createElement("div");d.style.display="flex",d.style.alignItems="center",d.style.minHeight="20px",d.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,0 10,5 0,10" fill="`+(o.uiStyleSettings!==void 0?o.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,d.style.marginRight="5px",u.appendChild(d)}o.typeBoxes.push(u)},o=this,s=0;s<4;s++)n(s);return i},e.prototype.setCurrentType=function(r,i){var n=this;this.currentType=r,this.typeBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings!==void 0?n.uiStyleSettings.toolboxAccentColor:"#3080c3":"transparent"}),this.onArrowTypeChanged&&this.onArrowTypeChanged(this.currentType)},e}(yi),rs=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.arrowType="end",o.arrowBaseHeight=10,o.arrowBaseWidth=10,o.getArrowPoints=o.getArrowPoints.bind(o),o.setArrowType=o.setArrowType.bind(o),o.arrowTypePanel=new fg("Arrow type","end"),o.arrowTypePanel.onArrowTypeChanged=o.setArrowType,o}return zt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.arrow1&&r!==this.arrow2)},e.prototype.getArrowPoints=function(r,i){var n=this.arrowBaseWidth+2*this.strokeWidth,o=this.arrowBaseHeight+2*this.strokeWidth;return r-n/2+","+(i+o/2)+" "+r+","+(i-o/2)+" "+(r+n/2)+","+(i+o/2)},e.prototype.createTips=function(){this.arrow1=J.createPolygon(this.getArrowPoints(this.x1,this.y1),[["fill",this.strokeColor]]),this.arrow1.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.arrow1),this.arrow2=J.createPolygon(this.getArrowPoints(this.x2,this.y2),[["fill",this.strokeColor]]),this.arrow2.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.arrow2)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="creating"&&this.createTips()},e.prototype.adjustVisual=function(){if(t.prototype.adjustVisual.call(this),this.arrow1&&this.arrow2){this.arrow1.style.display=this.arrowType==="both"||this.arrowType==="start"?"":"none",this.arrow2.style.display=this.arrowType==="both"||this.arrowType==="end"?"":"none",J.setAttributes(this.arrow1,[["points",this.getArrowPoints(this.x1,this.y1)],["fill",this.strokeColor]]),J.setAttributes(this.arrow2,[["points",this.getArrowPoints(this.x2,this.y2)],["fill",this.strokeColor]]);var r=0;Math.abs(this.x1-this.x2)>.1&&(r=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2));var i=this.arrow1.transform.baseVal.getItem(0);i.setRotate(r,this.x1,this.y1),this.arrow1.transform.baseVal.replaceItem(i,0);var n=this.arrow2.transform.baseVal.getItem(0);n.setRotate(r+180,this.x2,this.y2),this.arrow2.transform.baseVal.replaceItem(n,0)}},e.prototype.setArrowType=function(r){this.arrowType=r,this.adjustVisual(),this.stateChanged()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel,this.arrowTypePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({arrowType:this.arrowType},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r);var i=r;this.arrowType=i.arrowType,this.createTips(),this.adjustVisual()},e.typeName="ArrowMarker",e.title="Arrow marker",e.icon='<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 7 15.59V9H5v10h10v-2H8.41L19 6.41z"/></svg>',e}(ka),nf=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.fillColor=n.defaultFillColor,o.strokeWidth=0,o.fillPanel=new de("Color",n.defaultColorSet,n.defaultFillColor),o.fillPanel.onColorChanged=o.setFillColor,o}return zt(e,t),Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.fillPanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=t.prototype.getState.call(this);return r.typeName=e.typeName,r},e.typeName="CoverMarker",e.title="Cover marker",e.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4z"/></svg>',e}(ef),of=function(t){function e(r,i,n,o,s){var a=t.call(this,r,o||'<svg viewBox="0 0 24 24"><path d="M17.66 8L12 2.35 6.34 8A8.02 8.02 0 004 13.64c0 2 .78 4.11 2.34 5.67a7.99 7.99 0 0011.32 0c1.56-1.56 2.34-3.67 2.34-5.67S19.22 9.56 17.66 8M6 14c0-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 18 12 18 14H6z"/></svg>',s||"opacity-panel")||this;return a.opacities=[],a.opacityBoxes=[],a.opacities=i,a.currentOpacity=n,a.setCurrentOpacity=a.setCurrentOpacity.bind(a),a}return zt(e,t),e.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",i.style.justifyContent="space-between",this.opacities.forEach(function(n){var o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.padding="5px",o.style.borderWidth="2px",o.style.borderStyle="solid",o.style.borderColor=n===r.currentOpacity?r.uiStyleSettings.toolboxAccentColor:"transparent",o.addEventListener("click",function(){r.setCurrentOpacity(n,o)}),i.appendChild(o);var s=document.createElement("div");s.innerText=100*n+"%",o.appendChild(s),r.opacityBoxes.push(o)}),i},e.prototype.setCurrentOpacity=function(r,i){var n=this;this.currentOpacity=r,this.opacityBoxes.forEach(function(o){o.style.borderColor=o===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onOpacityChanged&&this.onOpacityChanged(this.currentOpacity)},e}(yi),is=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.setOpacity=o.setOpacity.bind(o),o.fillColor=n.defaultHighlightColor,o.strokeWidth=0,o.opacity=n.defaultHighlightOpacity,o.fillPanel=new de("Color",n.defaultColorSet,o.fillColor),o.fillPanel.onColorChanged=o.setFillColor,o.opacityPanel=new of("Opacity",n.defaultOpacitySteps,o.opacity),o.opacityPanel.onOpacityChanged=o.setOpacity,o}return zt(e,t),e.prototype.setOpacity=function(r){this.opacity=r,this.visual&&J.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.fillPanel,this.opacityPanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=t.prototype.getState.call(this);return r.typeName=e.typeName,r},e.typeName="HighlightMarker",e.title="Highlight marker",e.icon='<svg viewBox="0 0 24 24"><path d="M18.5 1.15c-.53 0-1.04.19-1.43.58l-5.81 5.82 5.65 5.65 5.82-5.81c.77-.78.77-2.04 0-2.83l-2.84-2.83c-.39-.39-.89-.58-1.39-.58M10.3 8.5l-5.96 5.96c-.78.78-.78 2.04.02 2.85C3.14 18.54 1.9 19.77.67 21h5.66l.86-.86c.78.76 2.03.75 2.81-.02l5.95-5.96"/></svg>',e}(nf),sf='<svg viewBox="0 0 24 24"><path d="M9.62 12L12 5.67 14.37 12M11 3L5.5 17h2.25l1.12-3h6.25l1.13 3h2.25L13 3h-2z"/></svg>',Ma='<svg viewBox="0 0 24 24"><path d="M19 11.5s-2 2.17-2 3.5a2 2 0 002 2 2 2 0 002-2c0-1.33-2-3.5-2-3.5M5.21 10L10 5.21 14.79 10m1.77-1.06L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.56-.59 1.53 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.59.59-1.56 0-2.12z"/></svg>',ru=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.bgColor="transparent",o.tipPosition={x:0,y:0},o.tipBase1Position={x:0,y:0},o.tipBase2Position={x:0,y:0},o.tipMoving=!1,o.color=n.defaultStrokeColor,o.bgColor=n.defaultFillColor,o.fontFamily=n.defaultFontFamily,o.defaultSize={x:100,y:30},o.setBgColor=o.setBgColor.bind(o),o.getTipPoints=o.getTipPoints.bind(o),o.positionTip=o.positionTip.bind(o),o.setTipPoints=o.setTipPoints.bind(o),o.colorPanel=new de("Text color",n.defaultColorSet,o.color,sf,"text-color-panel"),o.colorPanel.onColorChanged=o.setColor,o.bgColorPanel=new de("Fill color",n.defaultColorSet,o.bgColor,Ma,"fill-color-panel"),o.bgColorPanel.onColorChanged=o.setBgColor,o.fontFamilyPanel=new Ea("Font",n.defaultFontFamilies,n.defaultFontFamily),o.fontFamilyPanel.onFontChanged=o.setFont,o.tipGrip=new wa,o.tipGrip.visual.transform.baseVal.appendItem(J.createTransform()),o.controlBox.appendChild(o.tipGrip.visual),o}return zt(e,t),e.prototype.ownsTarget=function(r){return t.prototype.ownsTarget.call(this,r)||this.tipGrip.ownsTarget(r)||this.tip===r},e.prototype.createTip=function(){J.setAttributes(this.bgRectangle,[["fill",this.bgColor],["rx","10px"]]),this.tip=J.createPolygon(this.getTipPoints(),[["fill",this.bgColor]]),this.visual.appendChild(this.tip)},e.prototype.pointerDown=function(r,i){this.state==="new"&&t.prototype.pointerDown.call(this,r,i),this.state==="creating"?this.createTip():this.tipGrip.ownsTarget(i)?(this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.tipMoving=!0):t.prototype.pointerDown.call(this,r,i)},e.prototype.pointerUp=function(r){if(this.tipMoving)this.tipMoving=!1,this.isMoved=!0,t.prototype.pointerUp.call(this,r);else{var i=this.state==="creating";t.prototype.pointerUp.call(this,r),this.setTipPoints(i),this.positionTip()}},e.prototype.manipulate=function(r){if(this.tipMoving){var i=this.unrotatePoint(r);this.tipPosition={x:i.x-this.manipulationStartLeft,y:i.y-this.manipulationStartTop},this.positionTip()}else t.prototype.manipulate.call(this,r)},e.prototype.setBgColor=function(r){this.bgRectangle&&this.tip&&(J.setAttributes(this.bgRectangle,[["fill",r]]),J.setAttributes(this.tip,[["fill",r]])),this.bgColor=r,this.fillColorChanged(r)},e.prototype.getTipPoints=function(){return this.setTipPoints(this.state==="creating"),this.tipBase1Position.x+","+this.tipBase1Position.y+" "+this.tipBase2Position.x+","+this.tipBase2Position.y+" "+this.tipPosition.x+","+this.tipPosition.y},e.prototype.setTipPoints=function(r){r===void 0&&(r=!1);var i=Math.min(this.height/2,15),n=this.height/5;r&&(this.tipPosition={x:i+n/2,y:this.height+20});var o=Math.atan(this.height/2/(this.width/2));this.tipPosition.x<this.width/2&&this.tipPosition.y<this.height/2?o<Math.atan((this.height/2-this.tipPosition.y)/(this.width/2-this.tipPosition.x))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:i,y:0},this.tipBase2Position={x:i+n,y:0}):(this.tipBase1Position={x:0,y:i},this.tipBase2Position={x:0,y:i+n}):this.tipPosition.x>=this.width/2&&this.tipPosition.y<this.height/2?o<Math.atan((this.height/2-this.tipPosition.y)/(this.tipPosition.x-this.width/2))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-i-n,y:0},this.tipBase2Position={x:this.width-i,y:0}):(this.tipBase1Position={x:this.width,y:i},this.tipBase2Position={x:this.width,y:i+n}):this.tipPosition.x>=this.width/2&&this.tipPosition.y>=this.height/2?o<Math.atan((this.tipPosition.y-this.height/2)/(this.tipPosition.x-this.width/2))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-i-n,y:this.height},this.tipBase2Position={x:this.width-i,y:this.height}):(this.tipBase1Position={x:this.width,y:this.height-i-n},this.tipBase2Position={x:this.width,y:this.height-i}):o<Math.atan((this.tipPosition.y-this.height/2)/(this.width/2-this.tipPosition.x))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:i,y:this.height},this.tipBase2Position={x:i+n,y:this.height}):(this.tipBase1Position={x:0,y:this.height-i},this.tipBase2Position={x:0,y:this.height-i-n})},e.prototype.resize=function(r){t.prototype.resize.call(this,r),this.positionTip()},e.prototype.positionTip=function(){J.setAttributes(this.tip,[["points",this.getTipPoints()]]);var r=this.tipGrip.visual.transform.baseVal.getItem(0);r.setTranslate(this.tipPosition.x,this.tipPosition.y),this.tipGrip.visual.transform.baseVal.replaceItem(r,0)},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.bgColorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),e.prototype.select=function(){this.positionTip(),t.prototype.select.call(this)},e.prototype.getState=function(){var r=Object.assign({bgColor:this.bgColor,tipPosition:this.tipPosition},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){var i=r;this.bgColor=i.bgColor,this.tipPosition=i.tipPosition,t.prototype.restoreState.call(this,r),this.createTip(),this.setTipPoints()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.tipPosition={x:this.tipPosition.x*r,y:this.tipPosition.y*i},this.positionTip()},e.typeName="CalloutMarker",e.title="Callout marker",e.icon='<svg viewBox="0 0 24 24"><path d="M4 2h16a2 2 0 012 2v12a2 2 0 01-2 2h-4l-4 4-4-4H4a2 2 0 01-2-2V4a2 2 0 012-2m0 2v12h4.83L12 19.17 15.17 16H20V4H4m2 3h12v2H6V7m0 4h10v2H6v-2z"/></svg>',e}(Di),Is=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.fillColor="transparent",o.strokeColor="transparent",o.strokeWidth=0,o.strokeDasharray="",o.opacity=1,o.strokeColor=n.defaultColor,o.strokeWidth=n.defaultStrokeWidth,o.strokeDasharray=n.defaultStrokeDasharray,o.fillColor=n.defaultFillColor,o.setStrokeColor=o.setStrokeColor.bind(o),o.setFillColor=o.setFillColor.bind(o),o.setStrokeWidth=o.setStrokeWidth.bind(o),o.setStrokeDasharray=o.setStrokeDasharray.bind(o),o.setOpacity=o.setOpacity.bind(o),o.createVisual=o.createVisual.bind(o),o.strokePanel=new de("Line color",Ki(n.defaultColorSet,["transparent"]),n.defaultColor,void 0,"stroke-color-panel"),o.strokePanel.onColorChanged=o.setStrokeColor,o.fillPanel=new de("Fill color",Ki(n.defaultColorSet,["transparent"]),o.fillColor,Ma,"fill-color-panel"),o.fillPanel.onColorChanged=o.setFillColor,o.strokeWidthPanel=new bi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.strokeWidthPanel.onWidthChanged=o.setStrokeWidth,o.strokeStylePanel=new an("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),o.strokeStylePanel.onStyleChanged=o.setStrokeDasharray,o.opacityPanel=new of("Opacity",n.defaultOpacitySteps,o.opacity),o.opacityPanel.onOpacityChanged=o.setOpacity,o}return zt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual)},e.prototype.createVisual=function(){this.visual=J.createEllipse(this.width/2,this.height/2,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},e.prototype.manipulate=function(r){t.prototype.manipulate.call(this,r)},e.prototype.resize=function(r){t.prototype.resize.call(this,r),this.setSize()},e.prototype.setSize=function(){t.prototype.setSize.call(this),J.setAttributes(this.visual,[["cx",(this.width/2).toString()],["cy",(this.height/2).toString()],["rx",(this.width/2).toString()],["ry",(this.height/2).toString()]])},e.prototype.pointerUp=function(r){t.prototype.pointerUp.call(this,r),this.setSize()},e.prototype.setStrokeColor=function(r){this.strokeColor=r,this.visual&&J.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},e.prototype.setFillColor=function(r){this.fillColor=r,this.visual&&J.setAttributes(this.visual,[["fill",this.fillColor]]),this.fillColorChanged(r),this.stateChanged()},e.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.visual&&J.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},e.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.visual&&J.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},e.prototype.setOpacity=function(r){this.opacity=r,this.visual&&J.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.opacityPanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.opacity=i.opacity,this.createVisual(),t.prototype.restoreState.call(this,r),this.setSize()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.setSize()},e.typeName="EllipseMarker",e.title="Ellipse marker",e.icon='<svg viewBox="0 0 24 24"><path d="M12 4C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',e}(sn),hg=function(t){function e(r,i,n){return t.call(this,r,i,n)||this}return zt(e,t),Object.defineProperty(e.prototype,"tipLength",{get:function(){return 10+3*this.strokeWidth},enumerable:!1,configurable:!0}),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.tip1&&r!==this.tip2)},e.prototype.createTips=function(){this.tip1=J.createLine(this.x1-this.tipLength/2,this.y1,this.x1+this.tipLength/2,this.y1,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip1.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.tip1),this.tip2=J.createLine(this.x2-this.tipLength/2,this.y2,this.x2+this.tipLength/2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip2.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.tip2)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.state==="creating"&&this.createTips()},e.prototype.adjustVisual=function(){if(t.prototype.adjustVisual.call(this),this.tip1&&this.tip2&&(J.setAttributes(this.tip1,[["x1",(this.x1-this.tipLength/2).toString()],["y1",this.y1.toString()],["x2",(this.x1+this.tipLength/2).toString()],["y2",this.y1.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.tip2,[["x1",(this.x2-this.tipLength/2).toString()],["y1",this.y2.toString()],["x2",(this.x2+this.tipLength/2).toString()],["y2",this.y2.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),Math.abs(this.x1-this.x2)>.1)){var r=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2),i=this.tip1.transform.baseVal.getItem(0);i.setRotate(r,this.x1,this.y1),this.tip1.transform.baseVal.replaceItem(i,0);var n=this.tip2.transform.baseVal.getItem(0);n.setRotate(r+180,this.x2,this.y2),this.tip2.transform.baseVal.replaceItem(n,0)}},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=t.prototype.getState.call(this);return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r),this.createTips(),this.adjustVisual()},e.typeName="MeasurementMarker",e.title="Measurement marker",e.icon='<svg viewBox="0 0 24 24"><path d="M1.39 18.36l1.77-1.76L4.58 18l1.06-1.05-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.42 1.41L10.59 12l-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.41 1.41 1.07-1.06-1.42-1.41 1.42-1.42L18 6.7l1.07-1.06-2.47-2.48 1.76-1.77 4.25 4.25L5.64 22.61l-4.25-4.25z"/></svg>',e}(ka),dg=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.strokePanel.colors=n.defaultColorSet,o.fillColor="transparent",o}return zt(e,t),Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=t.prototype.getState.call(this);return r.typeName=e.typeName,r},e.typeName="EllipseFrameMarker",e.title="Ellipse frame marker",e.icon='<svg viewBox="0 0 24 24"><path d="M12 6c4.41 0 8 2.69 8 6s-3.59 6-8 6-8-2.69-8-6 3.59-6 8-6m0-2C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',e}(Is),pg=function(){function t(){this.undoStack=[],this.redoStack=[]}return Object.defineProperty(t.prototype,"isUndoPossible",{get:function(){return this.undoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRedoPossible",{get:function(){return this.redoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"undoStepCount",{get:function(){return this.undoStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"redoStepCount",{get:function(){return this.redoStack.length},enumerable:!1,configurable:!0}),t.prototype.addUndoStep=function(e){this.undoStack.length!==0&&JSON.stringify(this.undoStack[this.undoStack.length-1])===JSON.stringify(e)||(this.undoStack.push(e),JSON.stringify(this.lastRedoStep)!==JSON.stringify(e)&&this.redoStack.splice(0,this.redoStack.length))},t.prototype.replaceLastUndoStep=function(e){this.undoStack.length>0&&(this.undoStack[this.undoStack.length-1]=e)},t.prototype.getLastUndoStep=function(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0},t.prototype.undo=function(){if(this.undoStack.length>1){var e=this.undoStack.pop();return e!==void 0&&this.redoStack.push(e),this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0}},t.prototype.redo=function(){return this.lastRedoStep=this.redoStack.pop(),this.lastRedoStep},t}(),vg=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.strokeColor="transparent",o.strokeWidth=0,o.strokeDasharray="",o.curveX=0,o.curveY=0,o.manipulationStartCurveX=0,o.manipulationStartCurveY=0,o.setStrokeColor=o.setStrokeColor.bind(o),o.setStrokeWidth=o.setStrokeWidth.bind(o),o.setStrokeDasharray=o.setStrokeDasharray.bind(o),o.positionGrips=o.positionGrips.bind(o),o.addControlGrips=o.addControlGrips.bind(o),o.adjustVisual=o.adjustVisual.bind(o),o.setupControlBox=o.setupControlBox.bind(o),o.resize=o.resize.bind(o),o.strokeColor=n.defaultColor,o.strokeWidth=n.defaultStrokeWidth,o.strokeDasharray=n.defaultStrokeDasharray,o.strokePanel=new de("Line color",n.defaultColorSet,n.defaultColor),o.strokePanel.onColorChanged=o.setStrokeColor,o.strokeWidthPanel=new bi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.strokeWidthPanel.onWidthChanged=o.setStrokeWidth,o.strokeStylePanel=new an("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),o.strokeStylePanel.onStyleChanged=o.setStrokeDasharray,o}return zt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.selectorCurve&&r!==this.visibleCurve&&!this.curveGrip.ownsTarget(r))},e.prototype.getPathD=function(){return"M "+this.x1+" "+this.y1+" Q "+this.curveX+" "+this.curveY+", "+this.x2+" "+this.y2},e.prototype.createVisual=function(){this.visual=J.createGroup(),this.selectorCurve=J.createPath(this.getPathD(),[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()],["fill","transparent"]]),this.visibleCurve=J.createPath(this.getPathD(),[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["fill","transparent"]]),this.visual.appendChild(this.selectorCurve),this.visual.appendChild(this.visibleCurve),this.addMarkerVisualToContainer(this.visual)},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.manipulationStartCurveX=this.curveX,this.manipulationStartCurveY=this.curveY,this.state==="new"&&(this.curveX=r.x,this.curveY=r.y),this.state==="new"?(this.createVisual(),this.adjustVisual(),this._state="creating"):this.curveGrip.ownsTarget(i)&&(this.activeGrip=this.curveGrip,this._state="resize")},e.prototype.adjustVisual=function(){this.selectorCurve&&this.visibleCurve&&(this.selectorCurve.setAttribute("d",this.getPathD()),this.visibleCurve.setAttribute("d",this.getPathD()),J.setAttributes(this.visibleCurve,[["stroke",this.strokeColor]]),J.setAttributes(this.visibleCurve,[["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.visibleCurve,[["stroke-dasharray",this.strokeDasharray.toString()]]))},e.prototype.setupControlBox=function(){t.prototype.setupControlBox.call(this),this.curveControlLine1=J.createLine(this.x1,this.y1,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.curveControlLine2=J.createLine(this.x2,this.y2,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.insertBefore(this.curveControlLine1,this.controlBox.firstChild),this.controlBox.insertBefore(this.curveControlLine2,this.controlBox.firstChild)},e.prototype.addControlGrips=function(){this.curveGrip=this.createGrip(),this.curveX=0,this.curveY=0,t.prototype.addControlGrips.call(this)},e.prototype.positionGrips=function(){t.prototype.positionGrips.call(this);var r=this.curveGrip.GRIP_SIZE;this.positionGrip(this.curveGrip.visual,this.curveX-r/2,this.curveY-r/2),this.curveControlLine1&&this.curveControlLine2&&(this.curveControlLine1.setAttribute("x1",this.x1.toString()),this.curveControlLine1.setAttribute("y1",this.y1.toString()),this.curveControlLine1.setAttribute("x2",this.curveX.toString()),this.curveControlLine1.setAttribute("y2",this.curveY.toString()),this.curveControlLine2.setAttribute("x1",this.x2.toString()),this.curveControlLine2.setAttribute("y1",this.y2.toString()),this.curveControlLine2.setAttribute("x2",this.curveX.toString()),this.curveControlLine2.setAttribute("y2",this.curveY.toString()))},e.prototype.manipulate=function(r){this.state==="move"&&(this.curveX=this.manipulationStartCurveX+r.x-this.manipulationStartX,this.curveY=this.manipulationStartCurveY+r.y-this.manipulationStartY),t.prototype.manipulate.call(this,r)},e.prototype.resize=function(r){this.activeGrip===this.curveGrip&&(this.curveX=r.x,this.curveY=r.y),t.prototype.resize.call(this,r),this.state==="creating"&&(this.curveX=this.x1+(this.x2-this.x1)/2,this.curveY=this.y1+(this.y2-this.y1)/2)},e.prototype.setStrokeColor=function(r){this.strokeColor=r,this.adjustVisual(),this.colorChanged(r)},e.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.adjustVisual()},e.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.adjustVisual()},e.prototype.scale=function(r,i){this.curveX=this.curveX*r,this.curveY=this.curveY*i,t.prototype.scale.call(this,r,i)},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,curveX:this.curveX,curveY:this.curveY},t.prototype.getState.call(this));return r.typeName=e.typeName,r},e.prototype.restoreState=function(r){t.prototype.restoreState.call(this,r);var i=r;this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.curveX=i.curveX,this.curveY=i.curveY,this.createVisual(),this.adjustVisual()},e.typeName="CurveMarker",e.title="Curve marker",e.icon='<svg viewBox="0 0 24 24"><path d="M18.5 2A1.5 1.5 0 0120 3.5 1.5 1.5 0 0118.5 5c-.23 0-.45-.05-.65-.15l-3.69 3.7.34.45c2.19-1.26 4.76-2 7.5-2l1 .03v2.01L22 9c-2.58 0-5 .75-7 2.04A3.96 3.96 0 0111.04 15C9.75 17 9 19.42 9 22l.04 1H7.03L7 22c0-2.74.74-5.31 2-7.5l-.45-.34-3.7 3.69c.1.2.15.42.15.65A1.5 1.5 0 013.5 20 1.5 1.5 0 012 18.5 1.5 1.5 0 013.5 17c.23 0 .45.05.65.15l3.69-3.7C7.31 12.78 7 11.92 7 11a4 4 0 014-4c.92 0 1.78.31 2.45.84l3.7-3.69c-.1-.2-.15-.42-.15-.65A1.5 1.5 0 0118.5 2M11 9a2 2 0 00-2 2 2 2 0 002 2 2 2 0 002-2 2 2 0 00-2-2z"/></svg>',e}(rf),gg=function(t){function e(r,i,n){var o=t.call(this,r,i,n)||this;return o.fillColor="transparent",o.strokeColor="transparent",o.strokeWidth=0,o.strokeDasharray="",o.textColor="transparent",o.fontSize="1rem",o.isMoved=!1,o.captionText="Caption",o.PADDING=5,o.captionBoxWidth=0,o.captionBoxHeight=0,o.strokeColor=n.defaultColor,o.strokeWidth=n.defaultStrokeWidth,o.strokeDasharray=n.defaultStrokeDasharray,o.fillColor=n.defaultFillColor,o.textColor=n.defaultStrokeColor,o.fontFamily=n.defaultFontFamily,o.fontSize=n.defaultCaptionFontSize,o.captionText=n.defaultCaptionText,o.setStrokeColor=o.setStrokeColor.bind(o),o.setFillColor=o.setFillColor.bind(o),o.setStrokeWidth=o.setStrokeWidth.bind(o),o.setStrokeDasharray=o.setStrokeDasharray.bind(o),o.createVisual=o.createVisual.bind(o),o.sizeCaption=o.sizeCaption.bind(o),o.setCaptionText=o.setCaptionText.bind(o),o.showTextEditor=o.showTextEditor.bind(o),o.positionTextEditor=o.positionTextEditor.bind(o),o.finishTextEditing=o.finishTextEditing.bind(o),o.setFont=o.setFont.bind(o),o.setTextColor=o.setTextColor.bind(o),o.strokePanel=new de("Line color",Ki(n.defaultColorSet,["transparent"]),o.strokeColor,void 0,"stroke-color-panel"),o.strokePanel.onColorChanged=o.setStrokeColor,o.fillPanel=new de("Fill color",Ki(n.defaultColorSet,["transparent"]),o.fillColor,Ma,"fill-color-panel"),o.fillPanel.onColorChanged=o.setFillColor,o.strokeWidthPanel=new bi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),o.strokeWidthPanel.onWidthChanged=o.setStrokeWidth,o.strokeStylePanel=new an("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),o.strokeStylePanel.onStyleChanged=o.setStrokeDasharray,o.fontFamilyPanel=new Ea("Font",n.defaultFontFamilies,n.defaultFontFamily),o.fontFamilyPanel.onFontChanged=o.setFont,o.textColorPanel=new de("Text color",n.defaultColorSet,o.textColor,sf,"text-color-panel"),o.textColorPanel.onColorChanged=o.setTextColor,o}return zt(e,t),e.prototype.ownsTarget=function(r){return!(!t.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.frame&&r!==this.captionBg&&r!==this.captionElement)},e.prototype.createVisual=function(){this.visual=J.createGroup(),this.addMarkerVisualToContainer(this.visual),this.captionBg=J.createRect(1,1,[["fill",this.fillColor]]),this.visual.appendChild(this.captionBg),this.captionElement=J.createText([["fill",this.textColor],["font-family",this.fontFamily]]),this.captionElement.style.fontSize=this.fontSize,this.captionElement.style.textAnchor="start",this.captionElement.style.dominantBaseline="text-before-edge",this.captionElement.textContent=this.captionText,this.visual.appendChild(this.captionElement),this.frame=J.createRect(this.width,this.height,[["fill","transparent"],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray]]),this.visual.appendChild(this.frame),this.sizeCaption()},e.prototype.setCaptionText=function(r){this.captionText=r,this.captionElement.textContent=this.captionText,this.sizeCaption()},e.prototype.pointerDown=function(r,i){t.prototype.pointerDown.call(this,r,i),this.isMoved=!1,this.pointerDownPoint=r,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},e.prototype.manipulate=function(r){t.prototype.manipulate.call(this,r),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(r.x-this.pointerDownPoint.x)>5||Math.abs(r.y-this.pointerDownPoint.y)>5)},e.prototype.resize=function(r){t.prototype.resize.call(this,r),this.setSize()},e.prototype.sizeCaption=function(){var r=this.captionElement.getBBox();this.captionText.trim()!==""?(this.captionBoxWidth=r.width+2*this.PADDING,this.captionBoxHeight=r.height+2*this.PADDING):(this.captionBoxWidth=0,this.captionBoxHeight=0),J.setAttributes(this.captionBg,[["width",this.captionBoxWidth.toString()],["height",this.captionBoxHeight.toString()],["clip-path","path('M0,0 H"+this.width+" V"+this.height+" H"+-this.width+" Z')"]]),J.setAttributes(this.captionElement,[["x",this.PADDING.toString()],["y",this.PADDING.toString()],["clip-path","path('M0,0 H"+(this.width-this.PADDING)+" V"+this.height+" H"+(-this.width-this.PADDING)+" Z')"]])},e.prototype.showTextEditor=function(){var r=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditBox=document.createElement("input"),this.textEditBox.style.position="absolute",this.textEditBox.style.width=this.width+"px",this.captionBoxHeight>0&&(this.textEditBox.style.height=this.captionBoxHeight+"px"),this.textEditBox.style.fontSize=this.fontSize,this.textEditBox.style.fontFamily=this.fontFamily,this.textEditBox.style.backgroundColor=this.fillColor,this.textEditBox.style.color=this.textColor,this.textEditBox.style.borderWidth="0",this.textEditBox.setAttribute("value",this.captionText),this.textEditBox.select(),this.textEditDiv.appendChild(this.textEditBox),this.overlayContainer.appendChild(this.textEditDiv),this.textEditBox.addEventListener("pointerup",function(i){i.stopPropagation()}),this.textEditBox.addEventListener("keypress",function(i){i.key==="Enter"&&r.finishTextEditing(r.textEditBox.value)}),this.textEditBox.addEventListener("keyup",function(i){i.cancelBubble=!0}),this.textEditBox.addEventListener("blur",function(){r.finishTextEditing(r.textEditBox.value)}),this.textEditDiv.addEventListener("pointerup",function(){r.finishTextEditing(r.textEditBox.value)}),this.positionTextEditor(),this.textEditBox.focus()},e.prototype.positionTextEditor=function(){this.state==="edit"&&(this.textEditBox===void 0?this.showTextEditor():(this.textEditBox.style.left=this.left+"px",this.textEditBox.style.top=this.top+"px",this.textEditBox.style.transform="rotate("+this.rotationAngle+"deg)",this.textEditBox.style.transformOrigin=this.width/2+"px "+this.height/2+"px"))},e.prototype.finishTextEditing=function(r){this.setCaptionText(r.trim()),this.overlayContainer.innerHTML="",this.stateChanged()},e.prototype.setFont=function(r){this.captionElement&&J.setAttributes(this.captionElement,[["font-family",r]]),this.fontFamily=r,this.textEditBox&&(this.textEditBox.style.fontFamily=this.fontFamily),this.sizeCaption(),this.stateChanged()},e.prototype.setTextColor=function(r){this.captionElement&&J.setAttributes(this.captionElement,[["fill",r]]),this.textColor=r,this.textEditBox&&(this.textEditBox.style.color=this.textColor),this.stateChanged()},e.prototype.setSize=function(){t.prototype.setSize.call(this),J.setAttributes(this.frame,[["width",this.width.toString()],["height",this.height.toString()]]),this.sizeCaption()},e.prototype.pointerUp=function(r){t.prototype.pointerUp.call(this,r),this.setSize(),!this.isMoved&&Date.now()-this.pointerDownTimestamp>500&&this.showTextEditor(),this.pointerDownPoint=void 0},e.prototype.dblClick=function(r,i){t.prototype.dblClick.call(this,r,i),this.showTextEditor()},e.prototype.setStrokeColor=function(r){this.strokeColor=r,this.frame&&J.setAttributes(this.frame,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},e.prototype.setFillColor=function(r){this.fillColor=r,this.captionBg&&J.setAttributes(this.captionBg,[["fill",this.fillColor]]),this.fillColorChanged(r),this.stateChanged()},e.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.frame&&J.setAttributes(this.frame,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},e.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.frame&&J.setAttributes(this.frame,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.fontFamilyPanel,this.textColorPanel]},enumerable:!1,configurable:!0}),e.prototype.getState=function(){var r=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:1,textColor:this.textColor,fontFamily:this.fontFamily,fontSize:this.fontSize,captionText:this.captionText},t.prototype.getState.call(this));return r.typeName=this.typeName,r},e.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.textColor=i.textColor,this.fontFamily=i.fontFamily,this.captionText=i.captionText,this.fontSize=i.fontSize,this.createVisual(),t.prototype.restoreState.call(this,r),this.setSize()},e.prototype.scale=function(r,i){t.prototype.scale.call(this,r,i),this.setSize()},e.typeName="CaptionFrameMarker",e.title="Caption frame marker",e.icon='<svg viewBox="0 0 24 24"><path d="M5 3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2H5m0 2h14v14H5V5m2 2v2h10V7H7z"/></svg>',e}(sn),Pe=function(){function t(e,r){r===void 0&&(r=!1),this.cancelable=!1,this._defaultPrevented=!1,this.markerArea=e,this.cancelable=r}return Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this._defaultPrevented=!0},t}(),mg=function(t){function e(r,i,n){var o=t.call(this,r,!1)||this;return o.dataUrl=i,o.state=n,o}return zt(e,t),e}(Pe),Ue=function(t){function e(r,i,n){n===void 0&&(n=!1);var o=t.call(this,r,n)||this;return o.marker=i,o}return zt(e,t),e}(Pe),yg=function(){function t(){this.render=[],this.beforeclose=[],this.close=[],this.show=[],this.restorestate=[],this.statechange=[],this.markerselect=[],this.markerdeselect=[],this.markercreating=[],this.markercreate=[],this.markerbeforedelete=[],this.markerdelete=[],this.markerchange=[],this.focus=[],this.blur=[]}return t.prototype.addEventListener=function(e,r){this[e].push(r)},t.prototype.removeEventListener=function(e,r){var i=this[e].indexOf(r);i>-1&&this[e].splice(i,1)},t}(),bg=function(){function t(e){this.touchPoints=0,this._availableMarkerTypes=this.DEFAULT_MARKER_TYPES,this.mode="select",this.markers=[],this.isDragging=!1,this.renderEventListeners=[],this.closeEventListeners=[],this.settings=new cg,this._isOpen=!1,this.undoRedoManager=new pg,this.renderAtNaturalSize=!1,this.renderImageType="image/png",this.renderMarkersOnly=!1,this.zoomSteps=[1,1.5,2,4],this._zoomLevel=1,this._isResizing=!1,this.prevPanPoint={x:0,y:0},this.eventListeners=new yg,this._silentRenderMode=!1,this._isFocused=!1,this._instanceNo=t.instanceCounter++,this.styles=new sg(this.instanceNo),this.uiStyleSettings=this.styles.settings,this.target=e,this.targetRoot=document.body,this.width=e.clientWidth,this.height=e.clientHeight,this.styles.removeStyleSheet(),this.open=this.open.bind(this),this.setTopLeft=this.setTopLeft.bind(this),this.toolbarButtonClicked=this.toolbarButtonClicked.bind(this),this.createNewMarker=this.createNewMarker.bind(this),this.addNewMarker=this.addNewMarker.bind(this),this.markerCreated=this.markerCreated.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onDblClick=this.onDblClick.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.overrideOverflow=this.overrideOverflow.bind(this),this.restoreOverflow=this.restoreOverflow.bind(this),this.close=this.close.bind(this),this.closeUI=this.closeUI.bind(this),this.addCloseEventListener=this.addCloseEventListener.bind(this),this.removeCloseEventListener=this.removeCloseEventListener.bind(this),this.addRenderEventListener=this.addRenderEventListener.bind(this),this.removeRenderEventListener=this.removeRenderEventListener.bind(this),this.clientToLocalCoordinates=this.clientToLocalCoordinates.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.deleteSelectedMarker=this.deleteSelectedMarker.bind(this),this.setWindowHeight=this.setWindowHeight.bind(this),this.removeMarker=this.removeMarker.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this),this.onPopupTargetResize=this.onPopupTargetResize.bind(this),this.showNotesEditor=this.showNotesEditor.bind(this),this.hideNotesEditor=this.hideNotesEditor.bind(this),this.stepZoom=this.stepZoom.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.markerStateChanged=this.markerStateChanged.bind(this),this.switchToSelectMode=this.switchToSelectMode.bind(this),this.addDefs=this.addDefs.bind(this),this.addDefsToImage=this.addDefsToImage.bind(this),this.addMarkerEvents=this.addMarkerEvents.bind(this)}return Object.defineProperty(t.prototype,"ALL_MARKER_TYPES",{get:function(){return[es,Ei,rs,Di,dg,Is,is,ru,hg,nf,ka,vg,gg]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"DEFAULT_MARKER_TYPES",{get:function(){return[es,Ei,rs,Di,Is,is,ru]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BASIC_MARKER_TYPES",{get:function(){return[es,Ei,rs,Di,is]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableMarkerTypes",{get:function(){return this._availableMarkerTypes},set:function(e){var r=this;this._availableMarkerTypes.splice(0),e.forEach(function(i){if(typeof i=="string"){var n=r.ALL_MARKER_TYPES.find(function(o){return o.typeName===i});n!==void 0&&r._availableMarkerTypes.push(n)}else r._availableMarkerTypes.push(i)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentMarker",{get:function(){return this._currentMarker},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUndoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isUndoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRedoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isRedoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoomLevel",{get:function(){return this._zoomLevel},set:function(e){this._zoomLevel=e,this.editorCanvas&&this.contentDiv&&(this.editorCanvas.style.transform="scale("+this._zoomLevel+")",this.contentDiv.scrollTo({left:(this.editorCanvas.clientWidth*this._zoomLevel-this.contentDiv.clientWidth)/2,top:(this.editorCanvas.clientHeight*this._zoomLevel-this.contentDiv.clientHeight)/2}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instanceNo",{get:function(){return this._instanceNo},enumerable:!1,configurable:!0}),t.prototype.open=function(){this.setupResizeObserver(),this.setEditingTarget(),this.setTopLeft(),this.initMarkerCanvas(),this.initOverlay(),this.attachEvents(),this.settings.displayMode==="popup"&&this.onPopupTargetResize(),tu.isLicensed||this.addLogo(),this._isOpen=!0,this._isFocused=!0},t.prototype.show=function(){var e=this;this.styles.styleSheetRoot===void 0&&eu.styleSheetRoot!==void 0&&(this.styles.styleSheetRoot=eu.styleSheetRoot),this.markers.splice(0),this.setWindowHeight(),this.showUI(),this.open(),this.eventListeners.show.forEach(function(r){return r(new Pe(e))})},t.prototype.render=function(){return Jl(this,void 0,void 0,function(){var e;return Ql(this,function(r){switch(r.label){case 0:return this.setCurrentMarker(),(e=new og).naturalSize=this.renderAtNaturalSize,e.imageType=this.renderImageType,e.imageQuality=this.renderImageQuality,e.markersOnly=this.renderMarkersOnly,e.width=this.renderWidth,e.height=this.renderHeight,[4,e.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 1:return r.sent(),[4,e.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 2:return[2,r.sent()]}})})},t.prototype.close=function(e){var r=this;if(e===void 0&&(e=!1),this.isOpen){var i=!1;e||this.eventListeners.beforeclose.forEach(function(n){var o=new Pe(r,!0);n(o),o.defaultPrevented&&(i=!0)}),i||(this.coverDiv&&this.closeUI(),this.targetObserver&&(this.targetObserver.unobserve(this.target),this.targetObserver.unobserve(this.editorCanvas)),this.settings.displayMode==="popup"&&window.removeEventListener("resize",this.setWindowHeight),this.eventListeners.close.forEach(function(n){return n(new Pe(r))}),this.detachEvents(),this._isOpen=!1)}},t.prototype.addMarkersToToolbar=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];(e=this._availableMarkerTypes).push.apply(e,r)},t.prototype.addRenderEventListener=function(e){this.addEventListener("render",function(r){e(r.dataUrl,r.state)})},t.prototype.removeRenderEventListener=function(e){},t.prototype.addCloseEventListener=function(e){this.addEventListener("close",function(){e()})},t.prototype.removeCloseEventListener=function(e){},t.prototype.setupResizeObserver=function(){var e=this;this.settings.displayMode==="inline"?window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){e.resize(e.target.clientWidth,e.target.clientHeight)}),this.targetObserver.observe(this.target)):this.settings.displayMode==="popup"&&(window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){return e.onPopupTargetResize()}),this.targetObserver.observe(this.editorCanvas)),window.addEventListener("resize",this.setWindowHeight))},t.prototype.onPopupTargetResize=function(){var e=1*this.target.clientWidth/this.target.clientHeight,r=this.editorCanvas.clientWidth/e>this.editorCanvas.clientHeight?this.editorCanvas.clientHeight*e:this.editorCanvas.clientWidth,i=r<this.editorCanvas.clientWidth?this.editorCanvas.clientHeight:this.editorCanvas.clientWidth/e;this.resize(r,i)},t.prototype.setWindowHeight=function(){this.windowHeight=window.innerHeight},t.prototype.resize=function(e,r){this._isResizing=!0;var i=e/this.imageWidth,n=r/this.imageHeight;this.imageWidth=Math.round(e),this.imageHeight=Math.round(r),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px",this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.settings.displayMode!=="popup"?this.coverDiv.style.width=this.imageWidth.toString()+"px":(this.setTopLeft(),this.positionMarkerImage()),this.toolbar!==void 0&&this.toolbar.adjustLayout(),this.positionLogo(),this.scaleMarkers(i,n),this._isResizing=!1},t.prototype.scaleMarkers=function(e,r){var i,n=this;this._currentMarker&&this._currentMarker instanceof Di?this._currentMarker.scale(e,r):(i=this._currentMarker,this.setCurrentMarker()),this.markers.forEach(function(o){o!==n._currentMarker&&o.scale(e,r)}),i!==void 0&&this.setCurrentMarker(i)},t.prototype.setEditingTarget=function(){this.imageWidth=Math.round(this.target.clientWidth),this.imageHeight=Math.round(this.target.clientHeight),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px"},t.prototype.setTopLeft=function(){var e=this.editingTarget.getBoundingClientRect(),r=this.editorCanvas.getBoundingClientRect();this.left=e.left-r.left,this.top=e.top-r.top},t.prototype.initMarkerCanvas=function(){this.markerImageHolder=document.createElement("div"),this.markerImageHolder.style.setProperty("touch-action","pinch-zoom"),this.markerImage=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.markerImage.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImage.style.pointerEvents="auto",this.markerImageHolder.style.position="absolute",this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.markerImageHolder.style.transformOrigin="top left",this.positionMarkerImage(),this.markerImageHolder.appendChild(this.markerImage),this.editorCanvas.appendChild(this.markerImageHolder)},t.prototype.addDefs=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];this.defs=J.createDefs(),this.addDefsToImage(),(e=this.defs).append.apply(e,r)},t.prototype.addDefsToImage=function(){this.defs&&this.markerImage.insertBefore(this.defs,this.markerImage.firstChild)},t.prototype.initOverlay=function(){this.overlayContainer=document.createElement("div"),this.overlayContainer.style.position="absolute",this.overlayContainer.style.left="0px",this.overlayContainer.style.top="0px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.overlayContainer.style.display="flex",this.markerImageHolder.appendChild(this.overlayContainer)},t.prototype.positionMarkerImage=function(){this.markerImageHolder.style.top=this.top/this.zoomLevel+"px",this.markerImageHolder.style.left=this.left/this.zoomLevel+"px"},t.prototype.attachEvents=function(){this.markerImage.addEventListener("pointerdown",this.onPointerDown),this.markerImage.addEventListener("touchmove",function(e){return e.preventDefault()}),this.markerImage.addEventListener("dblclick",this.onDblClick),this.attachWindowEvents()},t.prototype.attachWindowEvents=function(){window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerOut),window.addEventListener("pointerout",this.onPointerOut),window.addEventListener("pointerleave",this.onPointerUp),window.addEventListener("resize",this.onWindowResize),window.addEventListener("keyup",this.onKeyUp)},t.prototype.detachEvents=function(){this.markerImage.removeEventListener("pointerdown",this.onPointerDown),this.markerImage.removeEventListener("dblclick",this.onDblClick),this.detachWindowEvents()},t.prototype.detachWindowEvents=function(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerOut),window.removeEventListener("pointerout",this.onPointerOut),window.removeEventListener("pointerleave",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("keyup",this.onKeyUp)},t.prototype.addLogo=function(){this.logoUI=document.createElement("div"),this.logoUI.style.display="inline-block",this.logoUI.style.margin="0px",this.logoUI.style.padding="0px",this.logoUI.style.fill="#333333";var e=document.createElement("a");e.href="https://markerjs.com/",e.target="_blank",e.innerHTML='<svg viewBox="0 0 112 96" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="#e5f20d" fill-opacity=".647" d="M0 40.386h111.96V95.62H0z"/><path d="M93.61 61.452c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.591 1.048-1.481 0-2.222-.74-2.222-2.22 0-16.617-.533-29.347-1.604-38.192-1.068-8.842-2.92-13.265-5.552-13.265-4.443 0-10.94 15.509-19.497 46.52v.124c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.592 1.048-1.48 0-2.22-.74-2.22-2.22 0-3.29.165-8.392.493-15.302.33-7.732.494-13.82.494-18.262 0-6.17-.186-10.55-.556-13.142-.37-2.591-1.172-3.887-2.406-3.887-2.796 0-6.333 5.12-10.612 15.363C38.494 34.367 34.01 46.44 29.32 60.34l-1.11 3.209a5.714 5.714 0 01-1.42 2.097c-.617.578-1.295.864-2.036.864-.987 0-1.644-.081-1.974-.247-.328-.162-.533-.656-.617-1.48-.41-4.03-.74-9.418-.987-16.165-.163-1.728-.329-4.566-.494-8.515-.822-13.901-1.562-23.3-2.221-28.196-.657-4.893-.987-7.628-.987-8.205 0-.657.33-1.44.987-2.345.659-.903 1.276-1.357 1.85-1.357 1.319 0 2.387.947 3.21 2.838.411.906.863 4.526 1.357 10.859.493 6.335.905 14.19 1.233 23.568l.617 18.88c4.527-13.983 9.216-26.673 14.068-38.068C45.65 6.686 50.093.988 54.123.988c2.715 0 4.566 1.974 5.553 5.923.987 3.949 1.481 9.667 1.481 17.152 0 3.949-.081 9.625-.247 17.029l-.123 5.676c3.373-11.762 6.725-21.634 10.057-29.615 3.331-7.979 6.685-11.97 10.056-11.97 8.475 0 12.71 18.757 12.71 56.269z" fill-rule="nonzero"/></svg>',e.title="Powered by marker.js",e.style.display="grid",e.style.alignItems="center",e.style.justifyItems="center",e.style.padding="3px",e.style.width="20px",e.style.height="20px",this.logoUI.appendChild(e),this.editorCanvas.appendChild(this.logoUI),this.logoUI.style.position="absolute",this.logoUI.style.pointerEvents="all",this.positionLogo()},t.prototype.positionLogo=function(){this.logoUI&&(this.uiStyleSettings.logoPosition!=="right"?this.logoUI.style.left=this.markerImageHolder.offsetLeft+10+"px":this.logoUI.style.left=this.markerImageHolder.offsetLeft+this.markerImageHolder.offsetWidth-this.logoUI.clientWidth-10+"px",this.logoUI.style.top=this.markerImageHolder.offsetTop+this.markerImageHolder.offsetHeight-this.logoUI.clientHeight-10+"px")},t.prototype.overrideOverflow=function(){this.scrollXState=window.scrollX,this.scrollYState=window.scrollY,this.bodyOverflowState=document.body.style.overflow,window.scroll({top:0,left:0}),document.body.style.overflow="hidden"},t.prototype.restoreOverflow=function(){document.body.style.overflow=this.bodyOverflowState,window.scroll({top:this.scrollYState,left:this.scrollXState})},t.prototype.showUI=function(){var e;switch(this.settings.displayMode==="popup"&&this.overrideOverflow(),this.coverDiv=document.createElement("div"),this.coverDiv.style.visibility=this._silentRenderMode?"hidden":"visible",this.coverDiv.className=this.styles.classNamePrefixBase+" "+this.styles.classNamePrefix,this.coverDiv.style.fontSize="16px",this.coverDiv.style.userSelect="none",this.settings.displayMode){case"inline":this.coverDiv.style.position="absolute";var r=this.settings.uiOffsetTop!==void 0?this.target.offsetTop+this.settings.uiOffsetTop:this.target.offsetTop>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0,i=this.target.offsetLeft+((e=this.settings.uiOffsetLeft)!==null&&e!==void 0?e:0);this.coverDiv.style.top=r+"px",this.coverDiv.style.left=i+"px",this.coverDiv.style.width=this.target.offsetWidth.toString()+"px",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"5";break;case"popup":this.coverDiv.style.position="fixed",this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=window.innerHeight+"px",this.coverDiv.style.backgroundColor="rgba(0, 0, 0, 0.75)",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"1000",this.coverDiv.style.display="flex"}this.targetRoot.appendChild(this.coverDiv),this.uiDiv=document.createElement("div"),this.uiDiv.style.display="flex",this.uiDiv.style.flexDirection="column",this.uiDiv.style.flexGrow="2",this.uiDiv.style.margin=this.settings.displayMode==="popup"?this.settings.popupMargin+"px":"0px",this.settings.displayMode==="popup"&&(this.uiDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px"),this.uiDiv.style.border="0px",this.coverDiv.appendChild(this.uiDiv),this.toolbar=new ag(this.uiDiv,this.settings.displayMode,this._availableMarkerTypes,this.uiStyleSettings,this.styles),this.toolbar.addButtonClickListener(this.toolbarButtonClicked),this.toolbar.show(this._silentRenderMode||this.uiStyleSettings.hideToolbar?"hidden":"visible"),this.contentDiv=document.createElement("div"),this.contentDiv.style.display="flex",this.contentDiv.style.flexDirection="row",this.contentDiv.style.flexGrow="2",this.contentDiv.style.flexShrink="1",this.settings.displayMode==="popup"&&(this.contentDiv.style.backgroundColor=this.uiStyleSettings.canvasBackgroundColor,this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.uiStyleSettings.toolbarHeight+"px",this.contentDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px)"),this.contentDiv.style.overflow="auto",this.uiDiv.appendChild(this.contentDiv),this.editorCanvas=document.createElement("div"),this.editorCanvas.style.flexGrow="2",this.editorCanvas.style.flexShrink="1",this.editorCanvas.style.position="relative",this.editorCanvas.style.overflow="hidden",this.editorCanvas.style.display="flex",this.settings.displayMode==="popup"&&(this.editorCanvas.style.alignItems="center",this.editorCanvas.style.justifyContent="center"),this.editorCanvas.style.pointerEvents="none",this.editorCanvas.style.transformOrigin="left top",this.editorCanvas.style.transform="scale("+this.zoomLevel+")",this.contentDiv.appendChild(this.editorCanvas),this.editingTarget=this.target instanceof HTMLImageElement?document.createElement("img"):document.createElement("canvas"),this.settings.displayMode==="inline"&&this.settings.uiOffsetTop===void 0&&this.target.offsetTop<this.styles.settings.toolbarHeight&&(this.editingTarget.style.marginTop=this.target.offsetTop-this.styles.settings.toolbarHeight+"px"),this.editorCanvas.appendChild(this.editingTarget),this.toolbox=new lg(this.uiDiv,this.settings.displayMode,this.uiStyleSettings,this.styles),this.toolbox.show(this._silentRenderMode||this.uiStyleSettings.hideToolbox?"hidden":"visible")},t.prototype.closeUI=function(){this.settings.displayMode==="popup"&&this.restoreOverflow(),this.targetRoot.removeChild(this.coverDiv),this.coverDiv.remove(),this.coverDiv=null},t.prototype.removeMarker=function(e){this.markerImage.removeChild(e.container),this.markers.indexOf(e)>-1&&this.markers.splice(this.markers.indexOf(e),1),e.dispose()},t.prototype.switchToSelectMode=function(){this.mode="select",this.hideNotesEditor(),this._currentMarker!==void 0&&(this._currentMarker.state!=="new"?this._currentMarker.select():(this.removeMarker(this._currentMarker),this.setCurrentMarker(),this.markerImage.style.cursor="default"),this.addUndoStep())},t.prototype.toolbarButtonClicked=function(e,r){if(e==="marker"&&r!==void 0)this.createNewMarker(r);else if(e==="action")switch(r){case"select":this.switchToSelectMode(),this.switchToSelectMode();break;case"delete":this.deleteSelectedMarker();break;case"clear":this.clear();break;case"undo":this.undo();break;case"redo":this.redo();break;case"zoom":this.stepZoom();break;case"zoom-out":this.zoomLevel=1;break;case"notes":this.notesArea===void 0?(this.switchToSelectMode(),this.zoomLevel=1,this.showNotesEditor()):this.switchToSelectMode();break;case"close":this.close();break;case"render":this.switchToSelectMode(),this.startRenderAndClose()}},t.prototype.deleteSelectedMarker=function(){var e=this;if(this._currentMarker!==void 0){var r=!1;if(this.eventListeners.markerbeforedelete.forEach(function(n){var o=new Ue(e,e._currentMarker,!0);n(o),o.defaultPrevented&&(r=!0)}),!r){var i=this._currentMarker;this._currentMarker.dispose(),this.markerImage.removeChild(this._currentMarker.container),this.markers.splice(this.markers.indexOf(this._currentMarker),1),this.setCurrentMarker(),this.addUndoStep(),this.eventListeners.markerdelete.forEach(function(n){return n(new Ue(e,i))})}}},t.prototype.clear=function(){var e=this,r=!1;if(this.markers.length>0&&(this.eventListeners.markerbeforedelete.forEach(function(s){var a=new Ue(e,void 0,!0);s(a),a.defaultPrevented&&(r=!0)}),!r)){this.setCurrentMarker();for(var i=function(s){var a=n.markers[s];n.setCurrentMarker(n.markers[s]),n._currentMarker.dispose(),n.markerImage.removeChild(n._currentMarker.container),n.markers.splice(n.markers.indexOf(n._currentMarker),1),n.eventListeners.markerdelete.forEach(function(l){return l(new Ue(e,a))})},n=this,o=this.markers.length-1;o>=0;o--)i(o);this.addUndoStep()}},Object.defineProperty(t.prototype,"isNotesAreaOpen",{get:function(){return this.notesArea!==void 0},enumerable:!1,configurable:!0}),t.prototype.showNotesEditor=function(){var e;this._currentMarker!==void 0&&(this.overlayContainer.innerHTML="",this.notesArea=document.createElement("textarea"),this.notesArea.className=this.uiStyleSettings.notesAreaStyleClassName,this.notesArea.style.pointerEvents="auto",this.notesArea.style.alignSelf="stretch",this.notesArea.style.width="100%",this.notesArea.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.notesArea.value=(e=this._currentMarker.notes)!==null&&e!==void 0?e:"",this.overlayContainer.appendChild(this.notesArea))},t.prototype.hideNotesEditor=function(){this.isNotesAreaOpen&&(this._currentMarker!==void 0&&(this._currentMarker.notes=this.notesArea.value.trim()!==""?this.notesArea.value:void 0),this.overlayContainer.removeChild(this.notesArea),this.notesArea=void 0)},t.prototype.selectLastMarker=function(){this.markers.length>0?this.setCurrentMarker(this.markers[this.markers.length-1]):this.setCurrentMarker()},t.prototype.addUndoStep=function(){var e=this;if(this._currentMarker===void 0||this._currentMarker.state!=="edit"){var r=this.getState(),i=this.undoRedoManager.getLastUndoStep();if(!i||i.width===r.width&&i.height===r.height){var n=this.undoRedoManager.undoStepCount;this.undoRedoManager.addUndoStep(r),n<this.undoRedoManager.undoStepCount&&this.eventListeners.statechange.forEach(function(o){return o(new Pe(e))})}else this.undoRedoManager.replaceLastUndoStep(r)}},t.prototype.undo=function(){this.switchToSelectMode(),this.addUndoStep(),this.undoStep()},t.prototype.undoStep=function(){var e=this,r=this.undoRedoManager.undo();r!==void 0&&(this.restoreState(r),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(i){return i(new Pe(e))}))},t.prototype.redo=function(){this.switchToSelectMode(),this.redoStep()},t.prototype.redoStep=function(){var e=this,r=this.undoRedoManager.redo();r!==void 0&&(this.restoreState(r),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(i){return i(new Pe(e))}))},t.prototype.stepZoom=function(){var e=this.zoomSteps.indexOf(this.zoomLevel);this.zoomLevel=e<this.zoomSteps.length-1?this.zoomSteps[e+1]:this.zoomSteps[0]},t.prototype.panTo=function(e){this.contentDiv.scrollBy({left:this.prevPanPoint.x-e.x,top:this.prevPanPoint.y-e.y}),this.prevPanPoint=e},t.prototype.startRenderAndClose=function(){return Jl(this,void 0,void 0,function(){var e,r,i=this;return Ql(this,function(n){switch(n.label){case 0:return[4,this.render()];case 1:return e=n.sent(),r=this.getState(),this.eventListeners.render.forEach(function(o){return o(new mg(i,e,r))}),this.close(!0),[2]}})})},t.prototype.getState=function(e){e===!0&&this.setCurrentMarker();var r={width:this.imageWidth,height:this.imageHeight,markers:[]};return this.markers.forEach(function(i){return r.markers.push(i.getState())}),r},t.prototype.restoreState=function(e){var r=this;for(this.markers.splice(0);this.markerImage.lastChild;)this.markerImage.removeChild(this.markerImage.lastChild);e.markers.forEach(function(i){var n=r._availableMarkerTypes.find(function(s){return s.typeName===i.typeName});if(n!==void 0){var o=r.addNewMarker(n);o.restoreState(i),r.addMarkerEvents(o),r.markers.push(o)}}),e.width&&e.height&&(e.width!==this.imageWidth||e.height!==this.imageHeight)&&this.scaleMarkers(this.imageWidth/e.width,this.imageHeight/e.height),this.eventListeners.restorestate.forEach(function(i){return i(new Pe(r))})},t.prototype.addNewMarker=function(e){var r=J.createGroup();return this.markerImage.appendChild(r),new e(r,this.overlayContainer,this.settings)},t.prototype.createNewMarker=function(e){var r,i=this;(r=typeof e=="string"?this._availableMarkerTypes.find(function(n){return n.typeName===e}):e)&&(this.setCurrentMarker(),this.addUndoStep(),this._currentMarker=this.addNewMarker(r),this.addMarkerEvents(this._currentMarker),this.markerImage.style.cursor="crosshair",this.toolbar.setActiveMarkerButton(r.typeName),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this.eventListeners.markercreating.forEach(function(n){return n(new Ue(i,i._currentMarker))}))},t.prototype.addMarkerEvents=function(e){e.onMarkerCreated=this.markerCreated,e.onColorChanged=this.colorChanged,e.onFillColorChanged=this.fillColorChanged,e.onStateChanged=this.markerStateChanged},t.prototype.markerCreated=function(e){var r=this;this.mode="select",this.markerImage.style.cursor="default",this.markers.push(e),this.setCurrentMarker(e),e instanceof Ei&&this.settings.newFreehandMarkerOnPointerUp?this.createNewMarker(Ei):this.toolbar.setSelectMode(),this.addUndoStep(),this.eventListeners.markercreate.forEach(function(i){return i(new Ue(r,e))})},t.prototype.colorChanged=function(e){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultColor=e,this.settings.defaultStrokeColor=e)},t.prototype.fillColorChanged=function(e){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultFillColor=e)},t.prototype.markerStateChanged=function(e){var r=this;this.eventListeners.markerchange.forEach(function(i){return i(new Ue(r,e))})},t.prototype.setCurrentMarker=function(e){var r=this;this._currentMarker!==e&&this._currentMarker!==void 0&&(this._currentMarker.deselect(),this.toolbar.setCurrentMarker(),this.toolbox.setPanelButtons([]),this._isResizing||this.eventListeners.markerdeselect.forEach(function(i){return i(new Ue(r,r._currentMarker))})),this._currentMarker=e,this._currentMarker===void 0||this._currentMarker.isSelected||(this._currentMarker.state!=="new"&&this._currentMarker.select(),this.toolbar.setCurrentMarker(this._currentMarker),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this._isResizing||this.eventListeners.markerselect.forEach(function(i){return i(new Ue(r,r._currentMarker))}))},t.prototype.onPointerDown=function(e){if(this._isFocused||this.focus(),this.touchPoints++,this.touchPoints===1||e.pointerType!=="touch")if(this._currentMarker===void 0||this._currentMarker.state!=="new"&&this._currentMarker.state!=="creating"){if(this.mode==="select"){var r=this.markers.find(function(i){return i.ownsTarget(e.target)});r!==void 0?(this.setCurrentMarker(r),this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(e.clientX,e.clientY),e.target)):(this.setCurrentMarker(),this.isDragging=!0,this.prevPanPoint={x:e.clientX,y:e.clientY})}}else this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(e.clientX,e.clientY))},t.prototype.onDblClick=function(e){if(this._isFocused||this.focus(),this.mode==="select"){var r=this.markers.find(function(i){return i.ownsTarget(e.target)});r!==void 0&&r!==this._currentMarker&&this.setCurrentMarker(r),this._currentMarker!==void 0?this._currentMarker.dblClick(this.clientToLocalCoordinates(e.clientX,e.clientY),e.target):this.setCurrentMarker()}},t.prototype.onPointerMove=function(e){this.touchPoints!==1&&e.pointerType==="touch"||(this._currentMarker!==void 0||this.isDragging)&&(this._currentMarker!==void 0&&this._currentMarker.state==="edit"||e.preventDefault(),this._currentMarker!==void 0?this._currentMarker.manipulate(this.clientToLocalCoordinates(e.clientX,e.clientY)):this.zoomLevel>1&&this.panTo({x:e.clientX,y:e.clientY}))},t.prototype.onPointerUp=function(e){this.touchPoints>0&&this.touchPoints--,this.touchPoints===0&&this.isDragging&&this._currentMarker!==void 0&&this._currentMarker.pointerUp(this.clientToLocalCoordinates(e.clientX,e.clientY)),this.isDragging=!1,this.addUndoStep()},t.prototype.onPointerOut=function(){this.touchPoints>0&&this.touchPoints--},t.prototype.onKeyUp=function(e){this._currentMarker===void 0||this.notesArea!==void 0||e.key!=="Delete"&&e.key!=="Backspace"||this.deleteSelectedMarker()},t.prototype.clientToLocalCoordinates=function(e,r){var i=this.markerImage.getBoundingClientRect(),n=i.width/this.imageWidth/this.zoomLevel,o=i.height/this.imageHeight/this.zoomLevel;return{x:(e-i.left)/this.zoomLevel/n,y:(r-i.top)/this.zoomLevel/o}},t.prototype.onWindowResize=function(){this.positionUI()},t.prototype.positionUI=function(){switch(this.setTopLeft(),this.settings.displayMode){case"inline":var e=this.target.getClientRects(),r=e.length>0&&e.item(0)&&e.item(0).y>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0;this.coverDiv.style.top=r+"px",this.coverDiv.style.left=this.target.offsetLeft.toString()+"px";break;case"popup":this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=this.windowHeight+"px",this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.styles.settings.toolbarHeight+"px"}this.positionMarkerImage(),this.positionLogo()},t.prototype.addLicenseKey=function(e){tu.addKey(e)},t.prototype.addEventListener=function(e,r){this.eventListeners.addEventListener(e,r)},t.prototype.removeEventListener=function(e,r){this.eventListeners.removeEventListener(e,r)},t.prototype.renderState=function(e){this._silentRenderMode=!0,this.settings.displayMode="inline",this.isOpen||this.show(),this.restoreState(e),this.startRenderAndClose(),this._silentRenderMode=!1},Object.defineProperty(t.prototype,"isFocused",{get:function(){return this._isFocused},enumerable:!1,configurable:!0}),t.prototype.focus=function(){var e=this;this._isFocused||(this.attachWindowEvents(),this._isFocused=!0,this._previousCurrentMarker!==void 0&&this.setCurrentMarker(this._previousCurrentMarker),this.eventListeners.focus.forEach(function(r){return r(new Pe(e))}))},t.prototype.blur=function(){var e=this;this._isFocused&&(this.detachWindowEvents(),this._isFocused=!1,this._previousCurrentMarker=this._currentMarker,this.setCurrentMarker(),this.eventListeners.blur.forEach(function(r){return r(new Pe(e))}))},t.instanceCounter=0,t}();function xg(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.map(function(i){return i.split(" ").map(function(n){return n?""+t+n:""}).join(" ")}).join(" ")}function Cg(t,e){return e.replace(/([^}{]*){/gm,function(r,i){return i.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function Ze(t,e){return function(r){r&&(t[e]=r)}}function af(t,e,r){return function(i){i&&(t[e][r]=i)}}function iu(t,e){return function(r){var i=r.prototype;t.forEach(function(n){e(i,n)})}}function Sg(t,e){return e===void 0&&(e={}),function(r,i){t.forEach(function(n){var o=e[n]||n;o in r||(r[o]=function(){for(var s,a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var u=(s=this[i])[n].apply(s,a);return u===this[i]?this:u})})}}var _g="function",wg="object",kg="string",Eg="number",Da="undefined",lf=typeof window!==Da,Mg=typeof document!==Da&&document,Dg=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],jt=1e-7,Tn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Tg(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}function eo(t,e,r,i){return(t*i+e*r)/(r+i)}function ln(t){return typeof t===Da}function Ne(t){return t&&typeof t===wg}function $t(t){return Array.isArray(t)}function ge(t){return typeof t===kg}function ui(t){return typeof t===Eg}function Ta(t){return typeof t===_g}function Pg(t,e){var r=t===""||t==" ",i=e===""||e==" ";return i&&r||t===e}function uf(t,e,r,i,n){var o=Pa(t,e,r);return o?r:Bg(t,e,r+1,i,n)}function Pa(t,e,r){if(!t.ignore)return null;var i=e.slice(Math.max(r-3,0),r+3).join("");return new RegExp(t.ignore).exec(i)}function Bg(t,e,r,i,n){for(var o=function(u){var c=e[u].trim();if(c===t.close&&!Pa(t,e,u))return{value:u};var f=u,h=me(n,function(d){var p=d.open;return p===c});if(h&&(f=uf(h,e,u,i,n)),f===-1)return s=u,"break";u=f,s=u},s,a=r;a<i;++a){var l=o(a);if(a=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Ba(t,e){var r=ge(e)?{separator:e}:e,i=r.separator,n=i===void 0?",":i,o=r.isSeparateFirst,s=r.isSeparateOnlyOpenClose,a=r.isSeparateOpenClose,l=a===void 0?s:a,u=r.openCloseCharacters,c=u===void 0?Dg:u,f=c.map(function(_){var x=_.open,k=_.close;return x===k?x:x+"|"+k}).join("|"),h="(\\s*"+n+"\\s*|"+f+"|\\s+)",d=new RegExp(h,"g"),p=t.split(d).filter(function(_){return _&&_!=="undefined"}),v=p.length,g=[],m=[];function b(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var C=function(_){var x=p[_].trim(),k=_,E=me(c,function(T){var R=T.open;return R===x}),O=me(c,function(T){var R=T.close;return R===x});if(E){if(k=uf(E,p,_,v,c),k!==-1&&l)return b()&&o||(g.push(p.slice(_,k+1).join("")),_=k,o)?(S=_,"break"):(S=_,"continue")}else if(O&&!Pa(O,p,_)){var D=Tg(c);return D.splice(c.indexOf(O),1),{value:Ba(t,{separator:n,isSeparateFirst:o,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:D})}}else if(Pg(x,n)&&!s)return b(),o?(S=_,"break"):(S=_,"continue");k===-1&&(k=v-1),m.push(p.slice(_,k+1).join("")),_=k,S=_},S,w=0;w<v;++w){var y=C(w);if(w=S,typeof y=="object")return y.value;if(y==="break")break}return m.length&&g.push(m.join("")),g}function xr(t){return Ba(t,"")}function Ar(t){return Ba(t,",")}function cf(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function un(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var r=e[1],i=e[2],n=e[3];return{prefix:r,unit:n,value:parseFloat(i)}}function Ig(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,r){return r.toUpperCase()})}function Un(t,e){return t.replace(/([a-z])([A-Z])/g,function(r,i,n){return""+i+e+n.toLowerCase()})}function Zi(){return Date.now?Date.now():new Date().getTime()}function tr(t,e,r){r===void 0&&(r=-1);for(var i=t.length,n=0;n<i;++n)if(e(t[n],n,t))return n;return r}function me(t,e,r){var i=tr(t,e);return i>-1?t[i]:r}var ff=function(){var t=Zi(),e=lf&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(r){var i=Zi(),n=setTimeout(function(){r(i-t)},1e3/60);return n}}(),Og=function(){var t=lf&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function er(t){return Object.keys(t)}function Rg(t){var e=er(t);return e.map(function(r){return t[r]})}function Mt(t,e){var r=un(t),i=r.value,n=r.unit;if(Ne(e)){var o=e[n];if(o){if(Ta(o))return o(i);if(Tn[n])return Tn[n](i,o)}}else if(n==="%")return i*e/100;return Tn[n]?Tn[n](i):i}function Os(t,e,r){return Math.max(e,Math.min(t,r))}function nu(t,e,r,i){return i===void 0&&(i=t[0]/t[1]),[[bt(e[0],jt),bt(e[0]/i,jt)],[bt(e[1]*i,jt),bt(e[1],jt)]].filter(function(n){return n.every(function(o,s){var a=e[s],l=bt(a,jt);return r?o<=a||o<=l:o>=a||o>=l})})[0]||t}function hf(t,e,r,i){if(!i)return t.map(function(d,p){return Os(d,e[p],r[p])});var n=t[0],o=t[1],s=i===!0?n/o:i,a=nu(t,e,!1,s),l=a[0],u=a[1],c=nu(t,r,!0,s),f=c[0],h=c[1];return n<l||o<u?(n=l,o=u):(n>f||o>h)&&(n=f,o=h),[n,o]}function Ag(t){for(var e=t.length,r=0,i=e-1;i>=0;--i)r+=t[i];return r}function Rs(t){for(var e=t.length,r=0,i=e-1;i>=0;--i)r+=t[i];return e?r/e:0}function Ft(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=Math.atan2(i,r);return n>=0?n:n+Math.PI*2}function Lg(t){return[0,1].map(function(e){return Rs(t.map(function(r){return r[e]}))})}function ou(t){var e=Lg(t),r=Ft(e,t[0]),i=Ft(e,t[1]);return r<i&&i-r<Math.PI||r>i&&i-r<-Math.PI?1:-1}function Je(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function bt(t,e){if(!e)return t;var r=1/e;return Math.round(t/e)/r}function su(t,e){return t.forEach(function(r,i){t[i]=bt(t[i],e)}),t}function zg(t){for(var e=[],r=0;r<t;++r)e.push(r);return e}function df(t){return t.reduce(function(e,r){return e.concat(r)},[])}function pf(t,e){t.indexOf(e)===-1&&t.push(e)}function qt(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function vf(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function gf(t,e){if(t.classList)t.classList.remove(e);else{var r=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(r," ")}}function Jt(t,e,r,i){t.addEventListener(e,r,i)}function Xt(t,e,r,i){t.removeEventListener(e,r,i)}function xi(t){return(t==null?void 0:t.ownerDocument)||Mg}function Ia(t){return xi(t).documentElement}function _r(t){return xi(t).body}function mr(t){var e;return((e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function mf(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Ci(t){return Ne(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var Ng=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(r){return this.values[this.keys.indexOf(r)]},e.set=function(r,i){var n=this.keys,o=this.values,s=n.indexOf(r),a=s===-1?n.length:s;n[a]=r,o[a]=i},t}(),Gg=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(r){return this.object[r]},e.set=function(r,i){this.object[r]=i},t}(),Fg=typeof Map=="function",Hg=function(){function t(){}var e=t.prototype;return e.connect=function(r,i){this.prev=r,this.next=i,r&&(r.next=this),i&&(i.prev=this)},e.disconnect=function(){var r=this.prev,i=this.next;r&&(r.next=i),i&&(i.prev=r)},e.getIndex=function(){for(var r=this,i=-1;r;)r=r.prev,++i;return i},t}();function Wg(t,e){var r=[],i=[];return t.forEach(function(n){var o=n[0],s=n[1],a=new Hg;r[o]=a,i[s]=a}),r.forEach(function(n,o){n.connect(r[o-1])}),t.filter(function(n,o){return!e[o]}).map(function(n,o){var s=n[0],a=n[1];if(s===a)return[0,0];var l=r[s],u=i[a-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,r[0]);var f=l.getIndex();return[c,f]})}var Vg=function(){function t(r,i,n,o,s,a,l,u){this.prevList=r,this.list=i,this.added=n,this.removed=o,this.changed=s,this.maintained=a,this.changedBeforeAdded=l,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var r=Wg(this.changedBeforeAdded,this.fixed),i=this.changed,n=[];this.cacheOrdered=r.filter(function(o,s){var a=o[0],l=o[1],u=i[s],c=u[0],f=u[1];if(a!==l)return n.push([c,f]),!0}),this.cachePureChanged=n},t}();function cn(t,e,r){var i=Fg?Map:r?Gg:Ng,n=r||function(b){return b},o=[],s=[],a=[],l=t.map(n),u=e.map(n),c=new i,f=new i,h=[],d=[],p={},v=[],g=0,m=0;return l.forEach(function(b,C){c.set(b,C)}),u.forEach(function(b,C){f.set(b,C)}),l.forEach(function(b,C){var S=f.get(b);typeof S>"u"?(++m,s.push(C)):p[S]=m}),u.forEach(function(b,C){var S=c.get(b);typeof S>"u"?(o.push(C),++g):(a.push([S,C]),m=p[C]||0,h.push([S-m,C-g]),d.push(C===S),S!==C&&v.push([S,C]))}),s.reverse(),new Vg(t,e,o,s,v,a,h,d)}var jg=function(){function t(r,i){r===void 0&&(r=[]),this.findKeyCallback=i,this.list=[].slice.call(r)}var e=t.prototype;return e.update=function(r){var i=[].slice.call(r),n=cn(this.list,i,this.findKeyCallback);return this.list=i,n},t}(),As=function(t,e){return As=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},As(t,e)};function fn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");As(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var je=function(){return je=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},je.apply(this,arguments)};function yf(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function au(t,e,r){for(var i=0,n=e.length,o;i<n;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function lu(t){var e=0;return t.map(function(r){return r==null?"$compat".concat(++e):"".concat(r)})}function bf(t){var e=[];return t.forEach(function(r){e=e.concat($t(r)?bf(r):r)}),e}function ns(t,e){if(!e)return t;for(var r in e)ln(t[r])&&(t[r]=e[r]);return t}function ro(t,e){if(t===e)return!1;for(var r in t)if(!(r in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1}function uu(t){var e=t.className,r=yf(t,["className"]);return e!=null&&(r.class=e),delete r.style,delete r.children,r}function cu(t){var e={},r={};for(var i in t)i.indexOf("on")===0?r[i]=t[i]:e[i]=t[i];return[e,r]}function Po(t){if(!t)return null;var e=t.b;return Ci(e)?e:Po(t.c)}function xf(t){var e=t.parentNode;e&&e.removeChild(t)}function Cf(t){t.forEach(function(e){e()})}function Yg(){return this.constructor(this.props,this.context)}var Oa=0,Bo=function(){function t(r,i,n,o,s,a,l){l===void 0&&(l={}),this.t=r,this.d=i,this.k=n,this.i=o,this.c=s,this.ref=a,this.ps=l,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(r,i,n,o,s){var a=this,l=a.d,u=Rg(i).filter(function(p){return p.$_req}),c=bf(u.map(function(p){return p.$_subs})),f=me(c,function(p){return p.d===l});if(a.b&&!ge(n)&&!s&&!a.s(n.props,o)&&!f){var h=c.reduce(function(p,v){var g=v.d;return p[0]?p[0].d===g&&p.push(v):g>l&&p.push(v),p},[]);return h.forEach(function(p){hn(p,p._ps,[p.o],r,i,!0)}),!1}a.o=n,a.ss(o);var d=a.ps;return ge(n)||(a.ps=n.props,a.ref=n.ref),Ra(this),a.r(r,i,a.b?d:{},o),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var r=this,i=r.ref,n=r.fr;i&&i(n?n.current:r.b)},t}();function Sf(){return Object.__CROACT_CURRENT_INSTNACE__}function $g(){return Oa}function Xg(t){Oa=t}function Ra(t){return Object.__CROACT_CURRENT_INSTNACE__=t,Oa=0,t}var Aa=function(){function t(r,i){r===void 0&&(r={}),this.props=r,this.context=i,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(r,i){return this.props!==r||this.state!==i},e.setState=function(r,i,n){var o=this;o.$_timer||(o.$_state={}),clearTimeout(o.$_timer),o.$_timer=0,o.$_state=je(je({},o.$_state),r),n?o.$_setState(i,n):o.$_timer=window.setTimeout(function(){o.$_timer=0,o.$_setState(i,n)})},e.forceUpdate=function(r){this.setState({},r,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(r,i){},e.componentWillUnmount=function(){},e.$_setState=function(r,i){var n=[],o=this.$_p,s=hn(o.c,[o],[o.o],n,o._cs,je(je({},this.state),this.$_state),i);s&&(r&&n.push(r),Cf(n),Ra(null))},t}(),_f=function(t){fn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var r=e.prototype;return r.shouldComponentUpdate=function(i,n){return ro(this.props,i)||ro(this.state,n)},e}(Aa);function wf(t){var e=function(r){e.current=r};return e.current=t,e}function Ug(t){return t._fr=!0,t}function qg(t,e,r,i){var n,o;return!((n=t==null?void 0:t.prototype)===null||n===void 0)&&n.render?o=new t(e,r):(o=new Aa(e,r),o.constructor=t,t._fr?(i.fr=wf(),o.render=function(){return this.constructor(this.props,i.fr)}):o.render=Yg),o.$_p=i,o}var Kg=function(t){fn(e,t);function e(i,n,o,s,a,l,u){u===void 0&&(u={});var c=t.call(this,i,n,o,s,a,l,ns(u,i.defaultProps))||this;return c.typ="comp",c._usefs=[],c._uefs=[],c._defs=[],c}var r=e.prototype;return r.s=function(i,n){var o=this.b;return o.shouldComponentUpdate(ns(i,this.t.defaultProps),n||o.state)!==!1},r.r=function(i,n,o){var s,a,l=this,u=l.t;l.ps=ns(l.ps,l.t.defaultProps);var c=l.ps,f=!l.b,h=u.contextType,d=l.b,p=h==null?void 0:h.get(l);l._cs=n,f?(d=qg(u,c,p,l),l.b=d):(d.props=c,d.context=p);var v=d.state;l._usefs=[],l._uefs=[];var g=d.render();((a=(s=g==null?void 0:g.props)===null||s===void 0?void 0:s.children)===null||a===void 0?void 0:a.length)===0&&(g.props.children=l.ps.children);var m=je(je({},n),d.$_cs);hn(l,l._ps,g?[g]:[],i,m),f?l._uefs.push(function(){h==null||h.register(l),d.componentDidMount()}):l._uefs.push(function(){d.componentDidUpdate(o,v)}),i.push(function(){l._usefs.forEach(function(b){b()}),f?l.md():l.ud(),l._defs=l._uefs.map(function(b){return b()})})},r.ss=function(i){var n=this.b;!n||!i||(n.state=i)},r.un=function(){var i,n=this;n._ps.forEach(function(s){s.un()});var o=n.t;(i=o.contextType)===null||i===void 0||i.unregister(n),clearTimeout(n.b.$_timer),n._defs.forEach(function(s){s&&s()}),n.b.componentWillUnmount()},e}(Bo);function Zg(t,e,r){var i=La(uu(t),uu(e)),n=i.added,o=i.removed,s=i.changed;for(var a in n)r.setAttribute(a,n[a]);for(var l in s)r.setAttribute(l,s[l][1]);for(var u in o)r.removeAttribute(u)}function Jg(t,e,r){var i=La(t,e),n=i.added,o=i.removed;for(var s in o)r.e(s,!0);for(var a in n)r.e(a)}function La(t,e){var r=er(t),i=er(e),n=cn(r,i,function(l){return l}),o={},s={},a={};return n.added.forEach(function(l){var u=i[l];o[u]=e[u]}),n.removed.forEach(function(l){var u=r[l];s[u]=t[u]}),n.maintained.forEach(function(l){var u=l[0],c=r[u],f=[t[c],e[c]];t[c]!==e[c]&&(a[c]=f)}),{added:o,removed:s,changed:a}}function Qg(t,e,r){var i=r.style,n=La(t,e),o=n.added,s=n.removed,a=n.changed;for(var l in o){var u=Un(l,"-");i.setProperty(u,o[l])}for(var l in a){var c=Un(l,"-");i.setProperty(c,a[l][1])}for(var l in s){var f=Un(l,"-");i.removeProperty(f)}}function t0(t){return t.replace(/^on/g,"").toLowerCase()}var e0=function(t){fn(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.typ="elem",i._es={},i._svg=!1,i}var r=e.prototype;return r.e=function(i,n){var o=this,s=o._es,a=o.b,l=t0(i);n?(Xt(a,l,s[i]),delete s[i]):(s[i]=function(u){var c,f;(f=(c=o.ps)[i])===null||f===void 0||f.call(c,u)},Jt(a,l,s[i]))},r.s=function(i){return ro(this.ps,i)},r.r=function(i,n,o){var s,a=this,l=!a.b,u=a.ps;if(l){var c=Po(a.c),f=!1;a._svg||a.t==="svg"?f=!0:f=c&&c.ownerSVGElement,a._svg=f;var h=(s=a._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],d=a.t;if(h)a._hyd=[].slice.call(h.children||[]);else{var p=xi(c);f?h=p.createElementNS("http://www.w3.org/2000/svg",d):h=p.createElement(d)}a.b=h}hn(a,a._ps,u.children,i,n);var v=a.b,g=cu(o),m=g[0],b=g[1],C=cu(u),S=C[0],w=C[1];return Zg(m,S,v),Jg(b,w,a),Qg(o.style||{},u.style||{},v),i.push(function(){l?a.md():a.ud()}),!0},r.un=function(){var i=this,n=i._es,o=i.b;for(var s in n)Xt(o,s,n[s]);i._ps.forEach(function(a){a.un()}),i._es={},i._sel||xf(o)},e}(Bo);function Ji(t){if(!t||Ci(t))return t;var e=t.$_p._ps;return e.length?Ji(e[0].b):null}function kf(t){if(t){if(t.b&&Ci(t.b))return t;var e=t._ps;return e.length?kf(e[0]):null}}function Le(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=e||{},o=n.key,s=n.ref,a=yf(n,["key","ref"]);return{type:t,key:o,ref:s,props:je(je({},a),{children:df(r).filter(function(l){return l!=null&&l!==!1})})}}var Ef=function(t){fn(e,t);function e(i,n){n===void 0&&(n=0);var o=t.call(this,"container",n,"container",0,null)||this;return o.typ="container",o.b=i,o}var r=e.prototype;return r.r=function(){return!0},r.un=function(){},e}(Bo),r0=function(t){fn(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.typ="text",i}var r=e.prototype;return r.r=function(i){var n,o=this,s=!o.b;if(s){var a=Po(o.c),l=(n=o._hyd)===null||n===void 0?void 0:n.splice(0,1)[0];o.b=l||xi(a).createTextNode(o.t.replace("text_",""))}return i.push(function(){s?o.md():o.ud()}),!0},r.un=function(){xf(this.b)},e}(Bo);function i0(t,e,r){var i=r.map(function(l){return ge(l)?null:l.key}),n=lu(e.map(function(l){return l.k})),o=lu(i),s=cn(n,o,function(l){return l});s.removed.forEach(function(l){e.splice(l,1)[0].un()}),s.ordered.forEach(function(l){var u=l[0],c=l[1],f=e.splice(u,1)[0];e.splice(c,0,f);var h=Ji(f.b),d=Ji(e[c+1]&&e[c+1].b);h&&h.parentNode.insertBefore(h,d)}),s.added.forEach(function(l){e.splice(l,0,fu(r[l],i[l],l,t))});var a=s.maintained.filter(function(l){l[0];var u=l[1],c=r[u],f=e[u],h=ge(c)?"text_".concat(c):c.type;return h!==f.t?(f.un(),e.splice(u,1,fu(c,i[u],u,t)),!0):(f.i=u,!1)});return au(au([],s.added,!0),a.map(function(l){l[0];var u=l[1];return u}))}function n0(t,e){for(var r=t._ps,i=r.length,n=e.i+1;n<i;++n){var o=Ji(r[n].b);if(o)return o}return null}function fu(t,e,r,i){var n=i.d+1;if(ge(t)||ui(t))return new r0("text_".concat(t),n,e,r,i,null,{});var o=t.type,s=typeof o=="string"?e0:Kg;return new s(o,n,e,r,i,t.ref,t.props)}function hn(t,e,r,i,n,o,s){var a=i0(t,e,r),l=t._hyd,u=e.filter(function(f,h){return f._hyd=l,f.u(i,n,r[h],o,s)});t.typ==="container"&&t._sel&&e.forEach(function(f){var h=kf(f);h&&(h._sel=!0)}),t._hyd=null;var c=Po(t);return c&&a.reverse().forEach(function(f){var h=e[f],d=Ji(h.b);if(d&&c!==d&&!d.parentNode){var p=n0(t,h);c.insertBefore(d,p)}}),u.length>0}function o0(t,e,r,i){r===void 0&&(r=e.__CROACT__),i===void 0&&(i={});var n=!!r;r||(r=new Ef(e));var o=[];return hn(r,r._ps,t?[t]:[],o,i,void 0,void 0),Cf(o),Ra(null),n||(e.__CROACT__=r),r}function hu(t,e,r){return!r&&t&&(r=new Ef(e.parentElement),r._hyd=[e],r._sel=!0),o0(t,e,r),r}function Mf(t){var e=Sf(),r=e._hs||(e._hs=[]),i=$g(),n=r[i];if(Xg(i+1),n){if(!ro(n.deps,t.deps))return n.updated=!1,n;r[i]=t}else r.push(t);return t.value=t.func(),t.updated=!0,t}function s0(t,e){var r=Mf({func:t,deps:e});return r.value}function a0(t){return s0(function(){return wf(t)},[])}function Df(t,e,r){var i=Sf(),n=Mf({func:function(){return t},deps:e}),o=r?i._usefs:i._uefs;n.updated?o.push(function(){return n.effect&&n.effect(),n.effect=t(),n.effect}):o.push(function(){return n.effect})}function l0(t,e,r){Df(function(){t==null||t(e())},r,!0)}function za(t,e){for(var r=t.length,i=0;i<r;++i)if(e(t[i],i))return!0;return!1}function Tf(t,e){for(var r=t.length,i=0;i<r;++i)if(e(t[i],i))return t[i];return null}function Pf(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Na(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function u0(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function c0(t,e){var r=Na("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return r?r[3]:""}function Ls(t){return t.replace(/_/g,".")}function Ti(t,e){var r=null,i="-1";return za(t,function(n){var o=Na("("+n.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!o||n.brand?!1:(r=n,i=o[3]||"-1",n.versionAlias?i=n.versionAlias:n.versionTest&&(i=c0(n.versionTest.toLowerCase(),e)||i),i=Ls(i),!0)}),{preset:r,version:i}}function Pn(t,e){var r={brand:"",version:"-1"};return za(t,function(i){var n=Bf(e,i);return n?(r.brand=i.id,r.version=i.versionAlias||n.version,r.version!=="-1"):!1}),r}function Bf(t,e){return Tf(t,function(r){var i=r.brand;return Na(""+e.test,i.toLowerCase())})}var If=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Of=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],zs=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Rf=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Af=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Lf(t){return!!Ti(Rf,t).preset}function f0(t){var e=Pf(t),r=!!/mobi/g.exec(e),i={name:"unknown",version:"-1",majorVersion:-1,webview:Lf(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},n={name:"unknown",version:"-1",majorVersion:-1},o=Ti(If,e),s=o.preset,a=o.version,l=Ti(Af,e),u=l.preset,c=l.version,f=Ti(Of,e);if(i.chromium=!!f.preset,i.chromiumVersion=f.version,!i.chromium){var h=Ti(zs,e);i.webkit=!!h.preset,i.webkitVersion=h.version}return u&&(n.name=u.id,n.version=c,n.majorVersion=parseInt(c,10)),s&&(i.name=s.id,i.version=a,i.webview&&n.name==="ios"&&i.name!=="safari"&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:n,isMobile:r,isHints:!1}}function h0(t){var e=navigator.userAgentData,r=(e.uaList||e.brands).slice(),i=e.mobile||!1,n=r[0],o=(e.platform||navigator.platform).toLowerCase(),s={name:n.brand,version:n.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Pn(Rf,r).brand||Lf(Pf())},a={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&za(zs,function(h){return Bf(r,h)});var l=Pn(Of,r);if(s.chromium=!!l.brand,s.chromiumVersion=l.version,!s.chromium){var u=Pn(zs,r);s.webkit=!!u.brand,s.webkitVersion=u.version}var c=Tf(Af,function(h){return new RegExp(""+h.test,"g").exec(o)});a.name=c?c.id:"";{var f=Pn(If,r);s.name=f.brand||s.name,s.version=f.brand&&t?t.uaFullVersion:f.version}return s.webkit&&(a.name=i?"ios":"mac"),a.name==="ios"&&s.webview&&(s.version="-1"),a.version=Ls(a.version),s.version=Ls(s.version),a.majorVersion=parseInt(a.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:a,isMobile:i,isHints:!0}}function d0(t){return u0()?h0():f0(t)}function p0(t,e,r,i,n,o){for(var s=0;s<n;++s){var a=r+s*n,l=i+s*n;t[a]+=t[l]*o,e[a]+=e[l]*o}}function v0(t,e,r,i,n){for(var o=0;o<n;++o){var s=r+o*n,a=i+o*n,l=t[s],u=e[s];t[s]=t[a],t[a]=l,e[s]=e[a],e[a]=u}}function g0(t,e,r,i,n){for(var o=0;o<i;++o){var s=r+o*i;t[s]/=n,e[s]/=n}}function zf(t,e,r){for(var i=t.slice(),n=0;n<r;++n)i[n*r+e-1]=0,i[(e-1)*r+n]=0;return i[(e-1)*(r+1)]=1,i}function $e(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var r=t.slice(),i=Ot(e),n=0;n<e;++n){var o=e*n+n;if(!bt(r[o],jt)){for(var s=n+1;s<e;++s)if(r[e*n+s]){v0(r,i,n,s,e);break}}if(!bt(r[o],jt))return[];g0(r,i,n,e,r[o]);for(var s=0;s<e;++s){var a=s,l=s+n*e,u=r[l];!bt(u,jt)||n===s||p0(r,i,a,n,e,-u)}}return i}function m0(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var r=[],i=0;i<e;++i)for(var n=0;n<e;++n)r[n*e+i]=t[e*i+n];return r}function Nf(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var r=[],i=t[e*e-1],n=0;n<e-1;++n)r[n]=t[e*(e-1)+n]/i;return r[e-1]=0,r}function y0(t,e){for(var r=Ot(e),i=0;i<e-1;++i)r[e*(e-1)+i]=t[i]||0;return r}function Nr(t,e){for(var r=t.slice(),i=t.length;i<e-1;++i)r[i]=0;return r[e-1]=1,r}function Ge(t,e,r){if(e===void 0&&(e=Math.sqrt(t.length)),e===r)return t;for(var i=Ot(r),n=Math.min(e,r),o=0;o<n-1;++o){for(var s=0;s<n-1;++s)i[o*r+s]=t[o*e+s];i[(o+1)*r-1]=t[(o+1)*e-1],i[(r-1)*r+o]=t[(e-1)*e+o]}return i[r*r-1]=t[e*e-1],i}function io(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=Ot(t);return e.forEach(function(n){i=Tt(i,n,t)}),i}function Tt(t,e,r){r===void 0&&(r=Math.sqrt(t.length));var i=[],n=t.length/r,o=e.length/n;if(n){if(!o)return t}else return e;for(var s=0;s<r;++s)for(var a=0;a<o;++a){i[a*r+s]=0;for(var l=0;l<n;++l)i[a*r+s]+=t[l*r+s]*e[a*n+l]}return i}function wt(t,e){for(var r=Math.min(t.length,e.length),i=t.slice(),n=0;n<r;++n)i[n]=i[n]+e[n];return i}function pt(t,e){for(var r=Math.min(t.length,e.length),i=t.slice(),n=0;n<r;++n)i[n]=i[n]-e[n];return i}function b0(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Gf(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function re(t,e,r){r===void 0&&(r=e.length);var i=Tt(t,e,r),n=i[r-1];return i.map(function(o){return o/n})}function x0(t,e){return Tt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function C0(t,e){return Tt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function S0(t,e){return Tt(t,pn(e,4))}function Bn(t,e){var r=e[0],i=r===void 0?1:r,n=e[1],o=n===void 0?1:n,s=e[2],a=s===void 0?1:s;return Tt(t,[i,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1],4)}function dn(t,e){return re(pn(e,3),Nr(t,3))}function os(t,e){var r=e[0],i=r===void 0?0:r,n=e[1],o=n===void 0?0:n,s=e[2],a=s===void 0?0:s;return Tt(t,[1,0,0,0,0,1,0,0,0,0,1,0,i,o,a,1],4)}function du(t,e){return Tt(t,e,4)}function pn(t,e){var r=Math.cos(t),i=Math.sin(t),n=Ot(e);return n[0]=r,n[1]=i,n[e]=-i,n[e+1]=r,n}function Ot(t){for(var e=t*t,r=[],i=0;i<e;++i)r[i]=i%(t+1)?0:1;return r}function Ga(t,e){for(var r=Ot(e),i=Math.min(t.length,e-1),n=0;n<i;++n)r[(e+1)*n]=t[n];return r}function Gr(t,e){for(var r=Ot(e),i=Math.min(t.length,e-1),n=0;n<i;++n)r[e*(e-1)+n]=t[n];return r}function Fa(t,e,r,i,n,o,s,a){var l=t[0],u=t[1],c=e[0],f=e[1],h=r[0],d=r[1],p=i[0],v=i[1],g=n[0],m=n[1],b=o[0],C=o[1],S=s[0],w=s[1],y=a[0],_=a[1],x=[l,0,c,0,h,0,p,0,u,0,f,0,d,0,v,0,1,0,1,0,1,0,1,0,0,l,0,c,0,h,0,p,0,u,0,f,0,d,0,v,0,1,0,1,0,1,0,1,-g*l,-m*l,-b*c,-C*c,-S*h,-w*h,-y*p,-_*p,-g*u,-m*u,-b*f,-C*f,-S*d,-w*d,-y*v,-_*v],k=$e(x,8);if(!k.length)return[];var E=Tt(k,[g,m,b,C,S,w,y,_],8);return E[8]=1,Ge(m0(E),3,4)}var Ni=function(){return Ni=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ni.apply(this,arguments)};function _0(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Qi(t,e){return e===void 0&&(e=0),Ur(ci(t,e))}function w0(t,e){var r=re(t,[e[0],e[1]||0,e[2]||0,1],4),i=r[3]||1;return[r[0]/i,r[1]/i,r[2]/i]}function Ur(t){var e=_0();return t.forEach(function(r){var i=r.matrixFunction,n=r.functionValue;i&&(e=i(e,n))}),e}function ci(t,e){e===void 0&&(e=0);var r=$t(t)?t:xr(t);return r.map(function(i){var n=cf(i),o=n.prefix,s=n.value,a=null,l=o,u="";if(o==="translate"||o==="translateX"||o==="translate3d"){var c=Ne(e)?Ni(Ni({},e),{"o%":e["%"]}):{"%":e,"o%":e},f=Ar(s).map(function(T,R){return R===0&&"x%"in c?c["%"]=e["x%"]:R===1&&"y%"in c?c["%"]=e["y%"]:c["%"]=e["o%"],Mt(T,c)}),h=f[0],d=f[1],p=d===void 0?0:d,v=f[2],g=v===void 0?0:v;a=os,u=[h,p,g]}else if(o==="translateY"){var m=Ne(e)?Ni({"%":e["y%"]},e):{"%":e},p=Mt(s,m);a=os,u=[0,p,0]}else if(o==="translateZ"){var g=parseFloat(s);a=os,u=[0,0,g]}else if(o==="scale"||o==="scale3d"){var b=Ar(s).map(function(T){return parseFloat(T)}),C=b[0],S=b[1],w=S===void 0?C:S,y=b[2],_=y===void 0?1:y;a=Bn,u=[C,w,_]}else if(o==="scaleX"){var C=parseFloat(s);a=Bn,u=[C,1,1]}else if(o==="scaleY"){var w=parseFloat(s);a=Bn,u=[1,w,1]}else if(o==="scaleZ"){var _=parseFloat(s);a=Bn,u=[1,1,_]}else if(o==="rotate"||o==="rotateZ"||o==="rotateX"||o==="rotateY"){var x=un(s),k=x.unit,E=x.value,O=k==="rad"?E:E*Math.PI/180;o==="rotate"||o==="rotateZ"?(l="rotateZ",a=S0):o==="rotateX"?a=x0:o==="rotateY"&&(a=C0),u=O}else if(o==="matrix3d")a=du,u=Ar(s).map(function(T){return parseFloat(T)});else if(o==="matrix"){var D=Ar(s).map(function(T){return parseFloat(T)});a=du,u=[D[0],D[1],0,0,D[2],D[3],0,0,0,0,1,0,D[4],D[5],0,1]}else l="";return{name:o,functionName:l,value:s,matrixFunction:a,functionValue:u}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ns=function(t,e){return Ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ns(t,e)};function k0(t,e){Ns(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ff=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),Hf=function(t){k0(e,t);function e(r){return r===void 0&&(r=[]),t.call(this,r,Ff)||this}return e}(jg);function E0(t,e){return cn(t,e,Ff)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gs=function(){return Gs=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Gs.apply(this,arguments)};function M0(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}var Io=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(r,i){if(Ne(r))for(var n in r)this.on(n,r[n]);else this._addEvent(r,i,{});return this},e.off=function(r,i){if(!r)this._events={};else if(Ne(r))for(var n in r)this.off(n);else if(!i)this._events[r]=[];else{var o=this._events[r];if(o){var s=tr(o,function(a){return a.listener===i});s>-1&&o.splice(s,1)}}return this},e.once=function(r,i){var n=this;return i&&this._addEvent(r,i,{once:!0}),new Promise(function(o){n._addEvent(r,o,{once:!0})})},e.emit=function(r,i){var n=this;i===void 0&&(i={});var o=this._events[r];if(!r||!o)return!0;var s=!1;return i.eventType=r,i.stop=function(){s=!0},i.currentTarget=this,M0(o).forEach(function(a){a.listener(i),a.once&&n.off(r,a.listener)}),!s},e.trigger=function(r,i){return i===void 0&&(i={}),this.emit(r,i)},e._addEvent=function(r,i,n){var o=this._events;o[r]=o[r]||[];var s=o[r];s.push(Gs({listener:i},n))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fs=function(t,e){return Fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Fs(t,e)};function D0(t,e){Fs(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Kr=function(){return Kr=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Kr.apply(this,arguments)};function T0(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function pu(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function In(t){if(t){if(ge(t))return document.querySelector(t)}else return null;if(Ta(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var P0=function(t){D0(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i._startRect=null,i._startPos=[],i._prevTime=0,i._timer=0,i._prevScrollPos=[0,0],i._isWait=!1,i._flag=!1,i._currentOptions=null,i._lock=!1,i._unregister=null,i._onScroll=function(){var n=i._currentOptions;i._lock||!n||i.emit("scrollDrag",{next:function(o){i.checkScroll({container:n.container,inputEvent:o})}})},i}var r=e.prototype;return r.dragStart=function(i,n){var o=In(n.container);if(!o){this._flag=!1;return}var s=0,a=0,l=0,u=0;if(o===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=o.getBoundingClientRect();s=c.top,a=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[i.clientX,i.clientY],this._startRect={top:s,left:a,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],n),this._currentOptions=n,this._registerScrollEvent(n)},r.drag=function(i,n){if(clearTimeout(this._timer),!!this._flag){var o=i.clientX,s=i.clientY,a=n.threshold,l=a===void 0?0:a,u=this,c=u._startRect,f=u._startPos;this._currentOptions=n;var h=[0,0];return c.top>s-l?(f[1]>c.top||s<f[1])&&(h[1]=-1):c.top+c.height<s+l&&(f[1]<c.top+c.height||s>f[1])&&(h[1]=1),c.left>o-l?(f[0]>c.left||o<f[0])&&(h[0]=-1):c.left+c.width<o+l&&(f[0]<c.left+c.width||o>f[0])&&(h[0]=1),!h[0]&&!h[1]?!1:this._continueDrag(Kr(Kr({},n),{direction:h,inputEvent:i,isDrag:!0}))}},r.checkScroll=function(i){var n=this;if(this._isWait)return!1;var o=i.prevScrollPos,s=o===void 0?this._prevScrollPos:o,a=i.direction,l=i.throttleTime,u=l===void 0?0:l,c=i.inputEvent,f=i.isDrag,h=this._getScrollPosition(a||[0,0],i),d=h[0]-s[0],p=h[1]-s[1],v=a||[d?Math.abs(d)/d:0,p?Math.abs(p)/p:0];return this._prevScrollPos=h,this._lock=!1,!d&&!p?!1:(this.emit("move",{offsetX:v[0]?d:0,offsetY:v[1]?p:0,inputEvent:c}),u&&f&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){n._continueDrag(i)},u)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(i,n){var o=n.container,s=n.getScrollPosition,a=s===void 0?T0:s;return a({container:In(o),direction:i})},r._continueDrag=function(i){var n=this,o,s=i.container,a=i.direction,l=i.throttleTime,u=i.useScroll,c=i.isDrag,f=i.inputEvent;if(!(!this._flag||c&&this._isWait)){var h=Zi(),d=Math.max(l+this._prevTime-h,0);if(d>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){n._continueDrag(i)},d),!1;this._prevTime=h;var p=this._getScrollPosition(a,i);this._prevScrollPos=p,c&&(this._isWait=!0),u||(this._lock=!0);var v={container:In(s),direction:a,inputEvent:f};return(o=i.requestScroll)===null||o===void 0||o.call(i,v),this.emit("scroll",v),this._isWait=!1,u||this.checkScroll(Kr(Kr({},i),{prevScrollPos:p,direction:a,inputEvent:f}))}},r._registerScrollEvent=function(i){this._unregisterScrollEvent();var n=i.checkScrollEvent;if(n){var o=n===!0?pu:n,s=In(i.container);n===!0&&(s===document.body||s===document.documentElement)?this._unregister=pu(window,this._onScroll):this._unregister=o(s,this._onScroll)}},r._unregisterScrollEvent=function(){var i;(i=this._unregister)===null||i===void 0||i.call(this),this._unregister=null},e}(Io);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function B0(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}function he(t){return bt(t,jt)}function I0(t,e){return t.every(function(r,i){return he(r-e[i])===0})}function O0(t,e){return!he(t[0]-e[0])&&!he(t[1]-e[1])}function Wf(t){return t.length<3?0:Math.abs(Ag(t.map(function(e,r){var i=t[r+1]||t[0];return e[0]*i[1]-i[0]*e[1]})))/2}function vu(t,e){var r=e.width,i=e.height,n=e.left,o=e.top,s=Fr(t),a=s.minX,l=s.minY,u=s.maxX,c=s.maxY,f=r/(u-a),h=i/(c-l);return t.map(function(d){return[n+(d[0]-a)*f,o+(d[1]-l)*h]})}function Fr(t){var e=t.map(function(i){return i[0]}),r=t.map(function(i){return i[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,r)}}function Hs(t,e,r){var i=t[0],n=t[1],o=Fr(e),s=o.minX,a=o.maxX,l=[[s,n],[a,n]],u=no(l[0],l[1]),c=Ws(e),f=[];if(c.forEach(function(p){var v=no(p[0],p[1]),g=p[0];if(I0(u,v))f.push({pos:t,line:p,type:"line"});else{var m=Vf(Ha(u,v),[l,p]);m.forEach(function(b){p.some(function(C){return O0(C,b)})?f.push({pos:b,line:p,type:"point"}):he(g[1]-n)!==0&&f.push({pos:b,line:p,type:"intersection"})})}}),me(f,function(p){return p[0]===i}))return!0;var h=0,d={};return f.forEach(function(p){var v=p.pos,g=p.type,m=p.line;if(!(v[0]>i))if(g==="intersection")++h;else{if(g==="line")return;if(g==="point"){var b=me(m,function(w){return w[1]!==n}),C=d[v[0]],S=b[1]>n?1:-1;C?C!==S&&++h:d[v[0]]=S}}}),h%2===1}function no(t,e){var r=t[0],i=t[1],n=e[0],o=e[1],s=n-r,a=o-i;Math.abs(s)<jt&&(s=0),Math.abs(a)<jt&&(a=0);var l=0,u=0,c=0;return s?a?(l=-a/s,u=1,c=-l*r-i):(u=1,c=-i):a&&(l=-1,c=r),[l,u,c]}function Ha(t,e){var r=t[0],i=t[1],n=t[2],o=e[0],s=e[1],a=e[2],l=r===0&&o===0,u=i===0&&s===0,c=[];if(l&&u)return[];if(l){var f=-n/i,h=-a/s;return f!==h?[]:[[-1/0,f],[1/0,f]]}else if(u){var d=-n/r,p=-a/o;return d!==p?[]:[[d,-1/0],[d,1/0]]}else if(r===0){var v=-n/i,g=-(s*v+a)/o;c=[[g,v]]}else if(o===0){var v=-a/s,g=-(i*v+n)/r;c=[[g,v]]}else if(i===0){var g=-n/r,v=-(o*g+a)/s;c=[[g,v]]}else if(s===0){var g=-a/o,v=-(r*g+n)/i;c=[[g,v]]}else{var g=(i*a-s*n)/(s*r-i*o),v=-(r*g+n)/i;c=[[g,v]]}return c.map(function(m){return[m[0],m[1]]})}function Vf(t,e){var r=e.map(function(f){return[0,1].map(function(h){return[Math.min(f[0][h],f[1][h]),Math.max(f[0][h],f[1][h])]})}),i=[];if(t.length===2){var n=t[0],o=n[0],s=n[1];if(he(o-t[1][0])){if(!he(s-t[1][1])){var u=Math.max.apply(Math,r.map(function(f){return f[0][0]})),c=Math.min.apply(Math,r.map(function(f){return f[0][1]}));if(he(u-c)>0)return[];i=[[u,s],[c,s]]}}else{var a=Math.max.apply(Math,r.map(function(f){return f[1][0]})),l=Math.min.apply(Math,r.map(function(f){return f[1][1]}));if(he(a-l)>0)return[];i=[[o,a],[o,l]]}}return i.length||(i=t.filter(function(f){var h=f[0],d=f[1];return r.every(function(p){return 0<=he(h-p[0][0])&&0<=he(p[0][1]-h)&&0<=he(d-p[1][0])&&0<=he(p[1][1]-d)})})),i.map(function(f){return[he(f[0]),he(f[1])]})}function Ws(t){return B0(t.slice(1),[t[0]]).map(function(e,r){return[t[r],e]})}function R0(t,e){var r=t.slice(),i=e.slice();ou(r)===-1&&r.reverse(),ou(i)===-1&&i.reverse();var n=Ws(r),o=Ws(i),s=n.map(function(c){return no(c[0],c[1])}),a=o.map(function(c){return no(c[0],c[1])}),l=[];s.forEach(function(c,f){var h=n[f],d=[];a.forEach(function(p,v){var g=Ha(c,p),m=Vf(g,[h,o[v]]);d.push.apply(d,m.map(function(b){return{index1:f,index2:v,pos:b,type:"intersection"}}))}),d.sort(function(p,v){return Je(h[0],p.pos)-Je(h[0],v.pos)}),l.push.apply(l,d),Hs(h[1],i)&&l.push({index1:f,index2:-1,pos:h[1],type:"inside"})}),o.forEach(function(c,f){if(Hs(c[1],r)){var h=!1,d=tr(l,function(p){var v=p.index2;return v===f?(h=!0,!1):!!h});d===-1&&(h=!1,d=tr(l,function(p){var v=p.index1,g=p.index2;return v===-1&&g+1===f?(h=!0,!1):!!h})),d===-1?l.push({index1:-1,index2:f,pos:c[1],type:"inside"}):l.splice(d,0,{index1:-1,index2:f,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var f=c.pos,h=f[0]+"x"+f[1];return u[h]?!1:(u[h]=!0,!0)})}function A0(t,e){var r=R0(t,e);return r.map(function(i){var n=i.pos;return n})}function L0(t,e){var r=A0(t,e);return Wf(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vs=function(t,e){return Vs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Vs(t,e)};function z0(t,e){Vs(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Wt=function(){return Wt=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Wt.apply(this,arguments)};function N0(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=Math.atan2(i,r);return n>=0?n:n+Math.PI*2}function ss(t){return N0([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function G0(t){return t.touches&&t.touches.length>=2}function On(t){return t?t.touches?H0(t.touches):[jf(t)]:[]}function F0(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function gu(t,e,r){var i=r.length,n=Gi(t,i),o=n.clientX,s=n.clientY,a=n.originalClientX,l=n.originalClientY,u=Gi(e,i),c=u.clientX,f=u.clientY,h=Gi(r,i),d=h.clientX,p=h.clientY,v=o-c,g=s-f,m=o-d,b=s-p;return{clientX:a,clientY:l,deltaX:v,deltaY:g,distX:m,distY:b}}function as(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function H0(t){for(var e=Math.min(t.length,2),r=[],i=0;i<e;++i)r.push(jf(t[i]));return r}function jf(t){return{clientX:t.clientX,clientY:t.clientY}}function Gi(t,e){e===void 0&&(e=t.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},i=Math.min(t.length,e),n=0;n<i;++n){var o=t[n];r.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,r.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,r.clientX+=o.clientX,r.clientY+=o.clientY}return e?{clientX:r.clientX/e,clientY:r.clientY/e,originalClientX:r.originalClientX/e,originalClientY:r.originalClientY/e}:r}var ls=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),ss(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),ss(e)-ss(this.startClients)},t.prototype.getPosition=function(e,r){e===void 0&&(e=this.prevClients);var i=gu(e||this.prevClients,this.prevClients,this.startClients),n=i.deltaX,o=i.deltaY;return this.movement+=Math.sqrt(n*n+o*o),this.prevClients=e,i},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var r=this.prevClients,i=this.startClients,n=Math.min(this.length,r.length),o=[],s=0;s<n;++s)o[s]=gu([e[s]],[r[s]],[i[s]]);return o},t.prototype.getMovement=function(e){var r=this.movement;if(!e)return r;var i=Gi(e,this.length),n=Gi(this.prevClients,this.length),o=i.clientX-n.clientX,s=i.clientY-n.clientY;return Math.sqrt(o*o+s*s)+r},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),as(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),as(e)/as(this.startClients)},t.prototype.move=function(e,r){this.startClients.forEach(function(i){i.clientX-=e,i.clientY-=r}),this.prevClients.forEach(function(i){i.clientX-=e,i.clientY-=r})},t}(),mu=["textarea","input"],W0=function(t){z0(e,t);function e(r,i){i===void 0&&(i={});var n=t.call(this)||this;n.options={},n.flag=!1,n.pinchFlag=!1,n.data={},n.isDrag=!1,n.isPinch=!1,n.clientStores=[],n.targets=[],n.prevTime=0,n.doubleFlag=!1,n._useMouse=!1,n._useTouch=!1,n._useDrag=!1,n._dragFlag=!1,n._isTrusted=!1,n._isMouseEvent=!1,n._isSecondaryButton=!1,n._preventMouseEvent=!1,n._prevInputEvent=null,n._isDragAPI=!1,n._isIdle=!0,n._preventMouseEventId=0,n._window=window,n.onDragStart=function(h,d){if(d===void 0&&(d=!0),!(!n.flag&&h.cancelable===!1)){var p=h.type.indexOf("drag")>=-1;if(!(n.flag&&p)){n._isDragAPI=!0;var v=n.options,g=v.container,m=v.pinchOutside,b=v.preventWheelClick,C=v.preventRightClick,S=v.preventDefault,w=v.checkInput,y=v.dragFocusedInput,_=v.preventClickEventOnDragStart,x=v.preventClickEventOnDrag,k=v.preventClickEventByCondition,E=n._useTouch,O=!n.flag;if(n._isSecondaryButton=h.which===3||h.button===2,b&&(h.which===2||h.button===1)||C&&(h.which===3||h.button===2))return n.stop(),!1;if(O){var D=n._window.document.activeElement,T=h.target;if(T){var R=T.tagName.toLowerCase(),L=mu.indexOf(R)>-1,H=T.isContentEditable;if(L||H){if(w||!y&&D===T)return!1;if(D&&(D===T||H&&D.isContentEditable&&D.contains(T)))if(y)T.blur();else return!1}else if((S||h.type==="touchstart")&&D){var W=D.tagName.toLowerCase();(D.isContentEditable||mu.indexOf(W)>-1)&&D.blur()}(_||x||k)&&Jt(n._window,"click",n._onClick,!0)}n.clientStores=[new ls(On(h))],n._isIdle=!1,n.flag=!0,n.isDrag=!1,n._isTrusted=d,n._dragFlag=!0,n._prevInputEvent=h,n.data={},n.doubleFlag=Zi()-n.prevTime<200,n._isMouseEvent=F0(h),!n._isMouseEvent&&n._preventMouseEvent&&n._allowMouseEvent();var N=n._preventMouseEvent||n.emit("dragStart",Wt(Wt({data:n.data,datas:n.data,inputEvent:h,isMouseEvent:n._isMouseEvent,isSecondaryButton:n._isSecondaryButton,isTrusted:d,isDouble:n.doubleFlag},n.getCurrentStore().getPosition()),{preventDefault:function(){h.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));N===!1&&n.stop(),n._isMouseEvent&&n.flag&&S&&h.preventDefault()}if(!n.flag)return!1;var U=0;if(O?(n._attchDragEvent(),E&&m&&(U=setTimeout(function(){Jt(g,"touchstart",n.onDragStart,{passive:!1})}))):E&&m&&Xt(g,"touchstart",n.onDragStart),n.flag&&G0(h)){if(clearTimeout(U),O&&h.touches.length!==h.changedTouches.length)return;n.pinchFlag||n.onPinchStart(h)}}}},n.onDrag=function(h,d){if(n.flag){var p=n.options.preventDefault;!n._isMouseEvent&&p&&h.preventDefault(),n._prevInputEvent=h;var v=On(h),g=n.moveClients(v,h,!1);if(n._dragFlag){if(n.pinchFlag||g.deltaX||g.deltaY){var m=n._preventMouseEvent||n.emit("drag",Wt(Wt({},g),{isScroll:!!d,inputEvent:h}));if(m===!1){n.stop();return}}n.pinchFlag&&n.onPinch(h,v)}n.getCurrentStore().getPosition(v,!0)}},n.onDragEnd=function(h){if(n.flag){var d=n.options,p=d.pinchOutside,v=d.container,g=d.preventClickEventOnDrag,m=d.preventClickEventOnDragStart,b=d.preventClickEventByCondition,C=n.isDrag;(g||m||b)&&requestAnimationFrame(function(){n._allowClickEvent()}),!b&&!m&&g&&!C&&n._allowClickEvent(),n._useTouch&&p&&Xt(v,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(h);var S=h!=null&&h.touches?On(h):[],w=S.length;w===0||!n.options.keepDragging?n.flag=!1:n._addStore(new ls(S));var y=n._getPosition(),_=Zi(),x=!C&&n.doubleFlag;n._prevInputEvent=null,n.prevTime=C||x?0:_,n.flag||(n._dettachDragEvent(),n._preventMouseEvent||n.emit("dragEnd",Wt({data:n.data,datas:n.data,isDouble:x,isDrag:C,isClick:!C,isMouseEvent:n._isMouseEvent,isSecondaryButton:n._isSecondaryButton,inputEvent:h,isTrusted:n._isTrusted},y)),n.clientStores=[],n._isMouseEvent||(n._preventMouseEvent=!0,clearTimeout(n._preventMouseEventId),n._preventMouseEventId=setTimeout(function(){n._preventMouseEvent=!1},200)),n._isIdle=!0)}},n.onBlur=function(){n.onDragEnd()},n._allowClickEvent=function(){Xt(n._window,"click",n._onClick,!0)},n._onClick=function(h){n._allowClickEvent(),n._allowMouseEvent();var d=n.options.preventClickEventByCondition;d!=null&&d(h)||(h.stopPropagation(),h.preventDefault())},n._onContextMenu=function(h){var d=n.options;d.preventRightClick?n.onDragEnd(h):h.preventDefault()},n._passCallback=function(){};var o=[].concat(r),s=o[0];n._window=mf(s)?s:mr(s),n.options=Wt({checkInput:!1,container:s&&!("document"in s)?mr(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var a=n.options,l=a.container,u=a.events,c=a.checkWindowBlur;if(n._useDrag=u.indexOf("drag")>-1,n._useTouch=u.indexOf("touch")>-1,n._useMouse=u.indexOf("mouse")>-1,n.targets=o,n._useDrag&&o.forEach(function(h){Jt(h,"dragstart",n.onDragStart)}),n._useMouse&&(o.forEach(function(h){Jt(h,"mousedown",n.onDragStart),Jt(h,"mousemove",n._passCallback)}),Jt(l,"contextmenu",n._onContextMenu)),c&&Jt(mr(),"blur",n.onBlur),n._useTouch){var f={passive:!1};o.forEach(function(h){Jt(h,"touchstart",n.onDragStart,f),Jt(h,"touchmove",n._passCallback,f)})}return n}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(i,n){return i+n.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(r,i,n,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(r,i),o&&this.onDrag(n,!0))},e.prototype.move=function(r,i){var n=r[0],o=r[1],s=this.getCurrentStore(),a=s.prevClients;return this.moveClients(a.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+n,clientY:c+o,originalClientX:u,originalClientY:c}}),i,!0)},e.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},e.prototype.setEventData=function(r){var i=this.data;for(var n in r)i[n]=r[n];return this},e.prototype.setEventDatas=function(r){return this.setEventData(r)},e.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),Wt(Wt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var r=this,i=this.targets,n=this.options.container;this.off(),Xt(this._window,"blur",this.onBlur),this._useDrag&&i.forEach(function(o){Xt(o,"dragstart",r.onDragStart)}),this._useMouse&&(i.forEach(function(o){Xt(o,"mousedown",r.onDragStart)}),Xt(n,"contextmenu",this._onContextMenu)),this._useTouch&&(i.forEach(function(o){Xt(o,"touchstart",r.onDragStart)}),Xt(n,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(r){var i=this,n=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>n)){var o=new ls(On(r));this.pinchFlag=!0,this._addStore(o);var s=this.emit("pinchStart",Wt(Wt({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(r,i){if(!(!this.flag||!this.pinchFlag||i.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Wt(Wt({data:this.data,datas:this.data,movement:this.getMovement(i),angle:n.getAngle(i),rotation:n.getRotation(i),touches:n.getPositions(i),scale:n.getScale(i),distance:n.getDistance(i)},n.getPosition(i)),{inputEvent:r,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(r){if(this.pinchFlag){var i=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",Wt(Wt({data:this.data,datas:this.data,isPinch:i,touches:n.getPositions()},n.getPosition()),{inputEvent:r}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(r,i,n){var o=this._getPosition(r,n),s=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!s&&this.isDrag&&(a=!0),Wt(Wt({data:this.data,datas:this.data},o),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:i,isTrusted:this._isTrusted,isFirstDrag:a})},e.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},e.prototype._getPosition=function(r,i){var n=this.getCurrentStore(),o=n.getPosition(r,i),s=this.clientStores.slice(1).reduce(function(u,c){var f=c.getPosition();return u.distX+=f.distX,u.distY+=f.distY,u},o),a=s.distX,l=s.distY;return Wt(Wt({},o),{distX:a,distY:l})},e.prototype._attchDragEvent=function(){var r=this._window,i=this.options.container,n={passive:!1};this._isDragAPI&&(Jt(i,"dragover",this.onDrag,n),Jt(r,"dragend",this.onDragEnd)),this._useMouse&&(Jt(i,"mousemove",this.onDrag),Jt(r,"mouseup",this.onDragEnd)),this._useTouch&&(Jt(i,"touchmove",this.onDrag,n),Jt(r,"touchend",this.onDragEnd,n),Jt(r,"touchcancel",this.onDragEnd,n))},e.prototype._dettachDragEvent=function(){var r=this._window,i=this.options.container;this._isDragAPI&&(Xt(i,"dragover",this.onDrag),Xt(r,"dragend",this.onDragEnd)),this._useMouse&&(Xt(i,"mousemove",this.onDrag),Xt(r,"mouseup",this.onDragEnd)),this._useTouch&&(Xt(i,"touchstart",this.onDragStart),Xt(i,"touchmove",this.onDrag),Xt(r,"touchend",this.onDragEnd),Xt(r,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(Io);function V0(t){for(var e=5381,r=t.length;r;)e=e*33^t.charCodeAt(--r);return e>>>0}var j0=V0;function Y0(t){return j0(t).toString(36)}function $0(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function X0(t,e,r){return r.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(i,n){var o=n.trim();return(o?Ar(o):[""]).map(function(s){var a=s.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(t))):a?".".concat(t," ").concat(a):".".concat(t)}).join(", ")+" {"})}function U0(t,e,r,i,n){var o=xi(i),s=o.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),r.nonce&&s.setAttribute("nonce",r.nonce),s.innerHTML=X0(t,e,r),(n||o.head||o.body).appendChild(s),s}function q0(t){var e="rCS"+Y0(t);return{className:e,inject:function(r,i){i===void 0&&(i={});var n=$0(r),o=(n||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!o)o=U0(e,t,i,r,n);else{var s=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var a,l=parseFloat(o.getAttribute("data-styled-count"))||0;l<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(l-1))}}}}}var js=function(){return js=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},js.apply(this,arguments)};function K0(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function Yf(t,e){var r=q0(e),i=r.className;return Ug(function(n,o){var s=n.className,a=s===void 0?"":s;n.cspNonce;var l=K0(n,["className","cspNonce"]),u=a0();return l0(o,function(){return u.current},[]),Df(function(){var c=r.inject(u.current,{nonce:n.cspNonce});return function(){c.destroy()}},[]),Le(t,js({ref:u,"data-styled-id":i,className:"".concat(a," ").concat(i)},l))})}var Ys=function(t,e){return Ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},Ys(t,e)};function vn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ys(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var B=function(){return B=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},B.apply(this,arguments)};function Z0(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function J0(t,e,r,i){var n=arguments.length,o=n<3?e:i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,r,o):s(e,r))||o);return n>3&&o&&Object.defineProperty(e,r,o),o}function Q0(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,o=[],s;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o}function Q(t,e,r){if(arguments.length===2)for(var i=0,n=e.length,o;i<n;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function gn(t,e){return B({events:[],props:[],name:t},e)}var tm=["n","w","s","e"],Wa=["n","w","s","e","nw","ne","sw","se"];function em(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function rm(t){var e=em(1,t),r=Math.round(t/45)*45%180,i="ns-resize";return r===135?i="nwse-resize":r===45?i="nesw-resize":r===90&&(i="ew-resize"),"cursor:".concat(i,";cursor: url('").concat(e,"') 16 16, ").concat(i,";")}var Si=d0(),$f=Si.browser.webkit,Xf=$f&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),Uf=Si.browser.name,qf=parseInt(Si.browser.version,10),im=Uf==="chrome",nm=Si.browser.chromium,om=parseInt(Si.browser.chromiumVersion,10)||0,sm=im&&qf>=109||nm&&om>=109,am=Uf==="firefox",lm=parseInt(Si.browser.webkitVersion,10)>=612||qf>=15,Va="moveable-",um=Wa.map(function(t){var e="",r="",i="center",n="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(o,";"),n="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",n="top"),t.indexOf("w")>-1&&(r="left: ".concat(o,";"),i="right"),t.indexOf("e")>-1&&(r="left: 0px;",i="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(r).concat(e,`
        transform-origin: `).concat(i," ").concat(n,`;
    }`)}).join(`
`),cm=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(um,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(rm(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Xf?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),fm=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],$s=1e-4,ce=1e-7,Rn=1e-9,Xs=Math.pow(10,10),yu=-Xs,hm={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},ja={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Kf={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Zf=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function mn(t,e,r,i,n,o){var s,a;o===void 0&&(o="draggable");var l=(a=(s=e.gestos[o])===null||s===void 0?void 0:s.move(r,t.inputEvent))!==null&&a!==void 0?a:{},u=l.originalDatas||l.datas,c=u[o]||(u[o]={});return B(B({},l),{isPinch:!!i,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var fi=function(){function t(e){var r;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[e]={},r)}return t.prototype.dragStart=function(e,r){this.isDrag=!1,this.isFlag=!1;var i=r.originalDatas;return this.datas=i,i[this.ableName]||(i[this.ableName]={}),B(B({},this.move(e,r.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,r){return this.move([e[0]-this.prevX,e[1]-this.prevY],r)},t.prototype.move=function(e,r){var i,n,o=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],i=e[0],n=e[1],this.isFlag=!0;else{var s=this.isDrag;i=this.prevX+e[0],n=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(o=!0)}return this.prevX=i,this.prevY=n,{type:"drag",clientX:i,clientY:n,inputEvent:r,isFirstDrag:o,isDrag:this.isDrag,distX:i-this.startX,distY:n-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function si(t,e,r,i){var n=t.length===16,o=n?4:3,s=Yr(t,r,i,o),a=I(s,4),l=I(a[0],2),u=l[0],c=l[1],f=I(a[1],2),h=f[0],d=f[1],p=I(a[2],2),v=p[0],g=p[1],m=I(a[3],2),b=m[0],C=m[1],S=I(Nt(t,e,o),2),w=S[0],y=S[1],_=Math.min(u,h,v,b),x=Math.min(c,d,g,C),k=Math.max(u,h,v,b),E=Math.max(c,d,g,C);u=u-_||0,h=h-_||0,v=v-_||0,b=b-_||0,c=c-x||0,d=d-x||0,g=g-x||0,C=C-x||0,w=w-_||0,y=y-x||0;var O=t[0],D=t[o+1],T=ae(O*D);return{left:_,top:x,right:k,bottom:E,origin:[w,y],pos1:[u,c],pos2:[h,d],pos3:[v,g],pos4:[b,C],direction:T}}function Jf(t,e){var r=e.clientX,i=e.clientY,n=e.datas,o=t.state,s=o.moveableClientRect,a=o.rootMatrix,l=o.is3d,u=o.pos1,c=s.left,f=s.top,h=l?4:3,d=I(pt(pi(a,[r-c,i-f],h),u),2),p=d[0],v=d[1],g=I(Xe({datas:n,distX:p,distY:v}),2),m=g[0],b=g[1];return[m,b]}function jr(t,e){var r=e.datas,i=t.state,n=i.allMatrix,o=i.beforeMatrix,s=i.is3d,a=i.left,l=i.top,u=i.origin,c=i.offsetMatrix,f=i.targetMatrix,h=i.transformOrigin,d=s?4:3;r.is3d=s,r.matrix=n,r.targetMatrix=f,r.beforeMatrix=o,r.offsetMatrix=c,r.transformOrigin=h,r.inverseMatrix=$e(n,d),r.inverseBeforeMatrix=$e(o,d),r.absoluteOrigin=Nr(wt([a,l],u),d),r.startDragBeforeDist=re(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=re(r.inverseMatrix,r.absoluteOrigin,d)}function dm(t){return si(t.datas.beforeTransform,[50,50],100,100).direction}function Oo(t,e,r){var i=e.datas,n=e.originalDatas.beforeRenderable,o=i.transformIndex,s=n.nextTransforms,a=s.length,l=n.nextTransformAppendedIndexes,u=-1;o===-1?(r==="translate"?u=0:r==="rotate"&&(u=tr(s,function(d){return d.match(/scale\(/g)})),u===-1&&(u=s.length),i.transformIndex=u):me(l,function(d){return d.index===o&&d.functionName===r})?u=o:u=o+l.filter(function(d){return d.index<o}).length;var c=G1(s,t.state,u),f=c.targetFunction,h=r==="rotate"?"rotateZ":r;i.beforeFunctionTexts=c.beforeFunctionTexts,i.afterFunctionTexts=c.afterFunctionTexts,i.beforeTransform=c.beforeFunctionMatrix,i.beforeTransform2=c.beforeFunctionMatrix2,i.targetTansform=c.targetFunctionMatrix,i.afterTransform=c.afterFunctionMatrix,i.afterTransform2=c.afterFunctionMatrix2,i.targetAllTransform=c.allFunctionMatrix,f.functionName===h?(i.afterFunctionTexts.splice(0,1),i.isAppendTransform=!1):a>u&&(i.isAppendTransform=!0,n.nextTransformAppendedIndexes=Q(Q([],I(l),!1),[{functionName:r,index:u,isAppend:!0}],!1))}function Ro(t,e,r){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?r:e," ").concat(t.afterFunctionTexts.join(" "))}function pm(t){var e=t.datas,r=t.distX,i=t.distY,n=I(th({datas:e,distX:r,distY:i}),2),o=n[0],s=n[1],a=Qf(e,y0([o,s],4));return re(a,Nr([0,0,0],4),4)}function Qf(t,e,r){var i=t.beforeTransform,n=t.afterTransform,o=t.beforeTransform2,s=t.afterTransform2,a=t.targetAllTransform,l=r?Tt(a,e,4):Tt(e,a,4),u=Tt($e(r?o:i,4),l,4),c=Tt(u,$e(r?s:n,4),4);return c}function th(t){var e=t.datas,r=t.distX,i=t.distY,n=e.inverseBeforeMatrix,o=e.is3d,s=e.startDragBeforeDist,a=e.absoluteOrigin,l=o?4:3;return pt(re(n,wt(a,[r,i]),l),s)}function Xe(t,e){var r=t.datas,i=t.distX,n=t.distY,o=r.inverseBeforeMatrix,s=r.inverseMatrix,a=r.is3d,l=r.startDragBeforeDist,u=r.startDragDist,c=r.absoluteOrigin,f=a?4:3;return pt(re(e?o:s,wt(c,[i,n]),f),e?l:u)}function vm(t,e){var r=t.datas,i=t.distX,n=t.distY;r.beforeMatrix;var o=r.matrix,s=r.is3d;r.startDragBeforeDist;var a=r.startDragDist,l=r.absoluteOrigin,u=s?4:3;return pt(re(o,wt(a,[i,n]),u),l)}function gm(t,e,r,i,n,o){return i===void 0&&(i=e),n===void 0&&(n=r),o===void 0&&(o=[0,0]),t?t.map(function(s,a){var l=un(s),u=l.value,c=l.unit,f=a?n:i,h=a?r:e;if(s==="%"||isNaN(u)){var d=f?o[a]/f:0;return h*d}else if(c!=="%")return u;return h*u/100}):o}function eh(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function mm(t,e){return eh(e).map(function(r){return t[r]})}function us(t,e){var r=(e+1)/2;return[eo(t[0][0],t[1][0],r,1-r),eo(t[0][1],t[1][1],r,1-r)]}function Kt(t,e){var r=us([t[0],t[1]],e[0]),i=us([t[2],t[3]],e[0]);return us([r,i],e[1])}function ym(t,e,r,i,n,o){var s=Yr(e,r,i,n),a=Kt(s,o),l=t[0]-a[0],u=t[1]-a[1];return[l,u]}function yn(t,e,r,i){return Tt(t,Hi(e,i,r),i)}function bm(t,e,r,i){var n=t.transformOrigin,o=t.offsetMatrix,s=t.is3d,a=s?4:3,l;if(ge(r)){var u=e.beforeTransform,c=e.afterTransform;i?l=Ge(Qi(r),4,a):l=Ge(Tt(Tt(u,Qi([r]),4),c,4),4,a)}else l=r;return yn(o,l,n,a)}function xm(t,e){var r=t.transformOrigin,i=t.offsetMatrix,n=t.is3d,o=t.targetMatrix,s=t.targetAllTransform,a=n?4:3;return yn(i,Tt(s||o,Ga(e,a),a),r,a)}function Ao(t,e){var r=_i(e);return{setTransform:function(i,n){n===void 0&&(n=-1),r.startTransforms=$t(i)?i:xr(i),Us(t,e,n)},setTransformIndex:function(i){Us(t,e,i)}}}function Lo(t,e,r){var i=_i(e),n=i.startTransforms;Us(t,e,tr(n,function(o){return o.indexOf("".concat(r,"("))===0}))}function Us(t,e,r){var i=_i(e),n=e.datas;if(n.transformIndex=r,r!==-1){var o=i.startTransforms[r];if(o){var s=t.state,a=ci([o],{"x%":function(l){return l/100*s.offsetWidth},"y%":function(l){return l/100*s.offsetHeight}});n.startValue=a[0].functionValue}}}function Ya(t,e){var r=_i(t);r.nextTransforms=xr(e)}function _i(t){return t.originalDatas.beforeRenderable}function oo(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function An(t){return(oo(t)||[]).join(" ")}function Ln(t){return _i(t).nextStyle}function rh(t,e,r,i,n){Ya(n,e);var o=se.drag(t,mn(n,t.state,r,i)),s=o?o.transform:e;return B(B({transform:e,drag:o},ue({transform:s},n)),{afterTransform:s})}function $a(t,e,r,i,n,o){var s=bm(t.state,n,e,o),a=_m(t,r,i,s);return a}function ih(t,e,r,i,n,o,s){var a=$a(t,e,r,n,o,s),l=t.state,u=l.left,c=l.top,f=t.props.groupable,h=f?u:0,d=f?c:0,p=pt(i,a);return pt(p,[h,d])}function Cm(t,e,r,i,n,o,s){var a=ih(t,e,r,i,n,o,s);return a}function Sm(t,e,r){return[e?-1+t[0]/(e/2):0,r?-1+t[1]/(r/2):0]}function _m(t,e,r,i){i===void 0&&(i=t.state.allMatrix);var n=t.state,o=n.width,s=n.height,a=n.is3d,l=a?4:3,u=[o/2*(1+e[0])+r[0],s/2*(1+e[1])+r[1]];return Nt(i,u,l)}function wm(t,e,r){var i=r.fixedDirection,n=r.fixedPosition,o=r.fixedOffset;return ih(t,"rotate(".concat(e,"deg)"),i,n,o,r)}function km(t,e,r,i,n,o){var s=t.props.groupable,a=t.state,l=a.transformOrigin,u=a.offsetMatrix,c=a.is3d,f=a.width,h=a.height,d=a.left,p=a.top,v=o.fixedDirection,g=o.nextTargetMatrix||a.targetMatrix,m=c?4:3,b=gm(n,e,r,f,h,l),C=s?d:0,S=s?p:0,w=yn(u,g,b,m),y=ym(i,w,e,r,m,v);return pt(y,[C,S])}function Em(t,e){return Kt(De(t.state),e)}function Mm(t,e){var r=t.targetGesto,i=t.controlGesto,n;return r!=null&&r.isFlag()&&(n=r.getEventData()[e]),!n&&(i!=null&&i.isFlag())&&(n=i.getEventData()[e]),n||{}}function Dm(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Tm(t){var e=t("scale"),r=t("rotate"),i=t("translate"),n=[];return i&&i!=="0px"&&i!=="none"&&n.push("translate(".concat(i.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&n.push("rotate(".concat(r,")")),e&&e!=="1"&&e!=="none"&&n.push("scale(".concat(e.split(/\s+/).join(","),")")),n}function nh(t,e,r){for(var i=t,n=[],o=Ia(t)||_r(t),s=!r&&t===e||t===o,a=s,l=!1,u=3,c,f,h,d=!1,p=en(e,e,!0).offsetParent,v=1;i&&!a;){a=s;var g=ye(i),m=g("position"),b=Dh(i),C=m==="fixed",S=Tm(g),w=b0(E1(b)),y=void 0,_=!1,x=!1,k=0,E=0,O=0,D=0,T={hasTransform:!1,fixedContainer:null};C&&(d=!0,T=B1(i),p=T.fixedContainer);var R=w.length;!l&&(R===16||S.length)&&(l=!0,u=4,ta(n),h&&(h=Ge(h,3,4))),l&&R===9&&(w=Ge(w,3,4));var L=P1(i,t),H=L.tagName,W=L.hasOffset,N=L.isSVG,U=L.origin,Z=L.targetOrigin,F=L.offset,tt=I(F,2),ot=tt[0],et=tt[1];H==="svg"&&!i.ownerSVGElement&&h&&(n.push({type:"target",target:i,matrix:I1(i,u)}),n.push({type:"offset",target:i,matrix:Ot(u)}));var nt=parseFloat(g("zoom"))||1;if(C)y=T.fixedContainer,_=!0;else{var K=en(i,e,!1,!0,g),st=K.offsetZoom;if(y=K.offsetParent,_=K.isEnd,x=K.isStatic,v*=st,(K.isCustomElement||st!==1)&&x)ot-=y.offsetLeft,et-=y.offsetTop;else if(am||sm){var ft=K.parentSlotElement;if(ft){for(var gt=y,Ct=0,it=0;gt&&Dm(gt);)Ct+=gt.offsetLeft,it+=gt.offsetTop,gt=gt.offsetParent;ot-=Ct,et-=it}}}if($f&&!lm&&W&&!N&&x&&(m==="relative"||m==="static")&&(ot-=y.offsetLeft,et-=y.offsetTop,s=s||_),C)W&&T.hasTransform&&(O=y.clientLeft,D=y.clientTop);else if(W&&p!==y&&(k=y.clientLeft,E=y.clientTop),W&&y===o){var ht=Th(i,!1);ot+=ht[0],et+=ht[1]}if(n.push({type:"target",target:i,matrix:Hi(w,u,U)}),S.length&&(n.push({type:"offset",target:i,matrix:Ot(u)}),n.push({type:"target",target:i,matrix:Hi(Qi(S),u,U)})),W){var M=i===t,P=M?0:i.scrollLeft,A=M?0:i.scrollTop;n.push({type:"offset",target:i,matrix:Gr([ot-P+k-O,et-A+E-D],u)})}else n.push({type:"offset",target:i,origin:U});if(nt!==1&&n.push({type:"zoom",target:i,matrix:Hi(Ga([nt,nt],u),u,[0,0])}),h||(h=w),c||(c=U),f||(f=Z),a||C)break;i=y,s=_,(!r||i===o)&&(a=s)}return h||(h=Ot(u)),c||(c=[0,0]),f||(f=[0,0]),{zoom:v,offsetContainer:p,matrixes:n,targetMatrix:h,transformOrigin:c,targetOrigin:f,is3d:l,hasFixed:d}}var Br=null,Ir=null,Zr=null;function hi(t){t?(window.Map&&(Br=new Map,Ir=new Map),Zr=[]):(Br=null,Zr=null,Ir=null)}function Pm(t){var e=Ir==null?void 0:Ir.get(t);if(e)return e;var r=Wi(t,!0);return Ir&&Ir.set(t,r),r}function Bm(t,e){if(Zr){var r=me(Zr,function(n){return n[0][0]==t&&n[0][1]==e});if(r)return r[1]}var i=nh(t,e,!0);return Zr&&Zr.push([[t,e],i]),i}function ye(t){var e=Br==null?void 0:Br.get(t);if(!e){var r=mr(t).getComputedStyle(t);if(!Br)return function(o){return r[o]};e={style:r,cached:{}},Br.set(t,e)}var i=e.cached,n=e.style;return function(o){return o in i||(i[o]=n[o]),i[o]}}function ze(t,e,r){var i=r.originalDatas;i.groupable=i.groupable||{};var n=i.groupable;n.childDatas=n.childDatas||[];var o=n.childDatas;return t.moveables.map(function(s,a){return o[a]=o[a]||{},o[a][e]=o[a][e]||{},B(B({},r),{isRequestChild:!0,datas:o[a][e],originalDatas:o[a]})})}function cs(t,e,r,i,n,o,s){var a=!!r.match(/Start$/g),l=!!r.match(/End$/g),u=n.isPinch,c=n.datas,f=ze(t,e.name,n),h=t.moveables,d=[],p=f.map(function(v,g){var m=h[g],b=m.state,C=b.gestos,S=v;if(a)S=new fi(s).dragStart(i,v),d.push(S);else{if(C[s]||(C[s]=c.childGestos[g]),!C[s])return;S=mn(v,b,i,u,o,s),d.push(S)}var w=e[r](m,B(B({},S),{parentFlag:!0}));return l&&(C[s]=null),w});return a&&(c.childGestos=h.map(function(v){return v.state.gestos[s]})),{eventParams:p,childEvents:d}}function Qe(t,e,r,i,n,o){n===void 0&&(n=function(c,f){return f});var s=!!r.match(/End$/g),a=ze(t,e.name,i),l=t.moveables,u=a.map(function(c,f){var h=l[f],d=c;d=n(h,c);var p=e[r](h,B(B({},d),{parentFlag:!0}));return p&&o&&o(h,c,p,f),s&&(h.state.gestos={}),p});return u}function so(t,e,r,i){var n=r.fixedDirection,o=r.fixedPosition,s=i.datas.startPositions||De(e.state),a=Kt(s,n),l=I(re(pn(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),u=l[0],c=l[1];return i.datas.originalX=u,i.datas.originalY=c,i}function oh(t,e,r,i){var n=t.getState(),o=n.renderPoses,s=n.rotation,a=n.direction,l=Hr(t.props,e).zoom,u=Fi(s/Math.PI*180),c={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var h=f.renderDirectionMap;r.forEach(function(p){var v=p.dir;c[v]=!0});var d=ae(a);return r.map(function(p){var v=p.data,g=p.classNames,m=p.dir,b=ja[m];if(!b||!c[m])return null;h[m]=!0;var C=(bt(u,15)+d*Kf[m]+720)%180,S={};return er(v).forEach(function(w){S["data-".concat(w)]=v[w]}),i.createElement("div",B({className:dt.apply(void 0,Q(["control","direction",m,e],I(g),!1)),"data-rotation":C,"data-direction":m},S,{key:"direction-".concat(m),style:co.apply(void 0,Q([s,l],I(b.map(function(w){return o[w]})),!1))}))})}function sh(t,e,r,i){var n=Hr(t.props,r),o=n.renderDirections,s=o===void 0?e:o,a=n.displayAroundControls;if(!s)return[];var l=s===!0?Wa:s;return Q(Q([],I(a?ch(t,i,r,l):[]),!1),I(oh(t,r,l.map(function(u){return{data:{},classNames:[],dir:u}}),i)),!1)}function tn(t,e,r,i,n,o){for(var s=[],a=6;a<arguments.length;a++)s[a-6]=arguments[a];var l=Ft(r,i),u=e?bt(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(o),className:dt.apply(void 0,Q(["line","direction",e?"edge":"",e],I(s),!1)),"data-rotation":u,"data-line-key":o,"data-direction":e,style:Bi(r,i,n,l)})}function ah(t,e,r,i,n){var o=r===!0?tm:r;return o.map(function(s,a){var l=I(ja[s],2),u=l[0],c=l[1];if(c!=null)return tn(t,s,i[u],i[c],n,"".concat(e,"Edge").concat(a),e)}).filter(Boolean)}function lh(t){return function(e,r){var i=Hr(e.props,t).edge;return i&&(i===!0||i.length)?Q(Q([],I(ah(r,t,i,e.getState().renderPoses,e.props.zoom)),!1),I(Im(e,t,r)),!1):uh(e,t,r)}}function uh(t,e,r){return sh(t,Wa,e,r)}function Im(t,e,r){return sh(t,["nw","ne","sw","se"],e,r)}function ch(t,e,r,i){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var o=t.getState(),s=o.renderPoses,a=o.rotation,l=o.direction,u=n.renderDirectionMap,c=t.props.zoom,f=ae(l),h=a/Math.PI*180;return(i||er(u)).map(function(d){var p=ja[d];if(!p)return null;var v=(bt(h,15)+f*Kf[d]+720)%180,g=["around-control"];return r&&g.push("direction",r),e.createElement("div",{className:dt.apply(void 0,Q([],I(g),!1)),"data-rotation":v,"data-direction":d,key:"direction-around-".concat(d),style:co.apply(void 0,Q([a,c],I(p.map(function(m){return s[m]})),!1))})})}function Xa(t,e,r){var i=t||{},n=i.position,o=n===void 0?"client":n,s=i.left,a=s===void 0?-1/0:s,l=i.top,u=l===void 0?-1/0:l,c=i.right,f=c===void 0?1/0:c,h=i.bottom,d=h===void 0?1/0:h,p={position:o,left:a,top:u,right:f,bottom:d};return{vertical:bu(p,e,!0),horizontal:bu(p,r,!1)}}function zo(t,e){var r=t.state,i=r.containerClientRect,n=i.clientHeight,o=i.clientWidth,s=i.clientLeft,a=i.clientTop,l=r.snapOffset,u=l.left,c=l.top,f=l.right,h=l.bottom,d=e||t.props.bounds||{},p=d.position||"client",v=p==="css",g=d.left,m=g===void 0?-1/0:g,b=d.top,C=b===void 0?-1/0:b,S=d.right,w=S===void 0?v?-1/0:1/0:S,y=d.bottom,_=y===void 0?v?-1/0:1/0:y;return v&&(w=o+f-u-w,_=n+h-c-_),{left:m+u-s,right:w+u-s,top:C+c-a,bottom:_+c-a}}function Om(t,e,r){var i=zo(t),n=i.left,o=i.top,s=i.right,a=i.bottom,l=I(r,2),u=l[0],c=l[1],f=I(pt(r,e),2),h=f[0],d=f[1];X(h)<ce&&(h=0),X(d)<ce&&(d=0);var p=d>0,v=h>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(h===0&&d===0)return{vertical:g,horizontal:m};if(h===0)p?a<c&&(m.pos=a,m.offset=c-a):o>c&&(m.pos=o,m.offset=c-o);else if(d===0)v?s<u&&(g.pos=s,g.offset=u-s):n>u&&(g.pos=n,g.offset=u-n);else{var b=d/h,C=r[1]-b*u,S=0,w=0,y=!1;v&&s<=u?(S=b*s+C,w=s,y=!0):!v&&u<=n&&(S=b*n+C,w=n,y=!0),y&&(S<o||S>a)&&(y=!1),y||(p&&a<=c?(S=a,w=(S-C)/b,y=!0):!p&&c<=o&&(S=o,w=(S-C)/b,y=!0)),y&&(g.isBound=!0,g.pos=w,g.offset=u-w,m.isBound=!0,m.pos=S,m.offset=c-S)}return{vertical:g,horizontal:m}}function bu(t,e,r){var i=t[r?"left":"top"],n=t[r?"right":"bottom"],o=Math.min.apply(Math,Q([],I(e),!1)),s=Math.max.apply(Math,Q([],I(e),!1)),a=[];return i+1>o&&a.push({direction:"start",isBound:!0,offset:o-i,pos:i}),n-1<s&&a.push({direction:"end",isBound:!0,offset:s-n,pos:n}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(l,u){return X(u.offset)-X(l.offset)})}function xu(t,e,r){var i=r?t.map(function(n){return dn(n,r)}):t;return i.some(function(n){return n[0]<e.left&&X(n[0]-e.left)>.1||n[0]>e.right&&X(n[0]-e.right)>.1||n[1]<e.top&&X(n[1]-e.top)>.1||n[1]>e.bottom&&X(n[1]-e.bottom)>.1})}function Rm(t,e,r){var i=Me(t),n=Math.sqrt(i*i-e*e)||0;return[n,-n].sort(function(o,s){return X(o-t[r?0:1])-X(s-t[r?0:1])}).map(function(o){return Ft([0,0],r?[o,e]:[e,o])})}function Am(t,e,r,i,n){if(!t.props.bounds)return[];var o=n*Math.PI/180,s=zo(t),a=s.left,l=s.top,u=s.right,c=s.bottom,f=a-i[0],h=u-i[0],d=l-i[1],p=c-i[1],v={left:f,top:d,right:h,bottom:p};if(!xu(r,v,0))return[];var g=[];return[[f,0],[h,0],[d,1],[p,1]].forEach(function(m){var b=I(m,2),C=b[0],S=b[1];r.forEach(function(w){var y=Ft([0,0],w);g.push.apply(g,Q([],I(Rm(w,C,S).map(function(_){return o+_-y}).filter(function(_){return!xu(e,v,_)}).map(function(_){return bt(_*180/Math.PI,ce)})),!1))})}),g}var Lm=["left","right","center"],zm=["top","bottom","middle"],Cu={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Cr={start:"left",end:"right",center:"center"},Sr={start:"top",end:"bottom",center:"middle"};function Jr(){return{left:!1,top:!1,right:!1,bottom:!1}}function wi(t,e){var r=t.props,i=r.snappable,n=r.bounds,o=r.innerBounds,s=r.verticalGuidelines,a=r.horizontalGuidelines,l=r.snapGridWidth,u=r.snapGridHeight,c=t.state,f=c.guidelines,h=c.enableSnap;return!i||!h||e&&i!==!0&&i.indexOf(e)<0?!1:!!(l||u||n||o||f&&f.length||s&&s.length||a&&a.length)}function Ua(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function Nm(t,e){var r=Ua(t),i={};for(var n in r)n in e&&r[n]&&(i[n]=e[n]);return i}function qa(t,e){var r=Nm(t,e),i=zm.filter(function(o){return o in r}),n=Lm.filter(function(o){return o in r});return{horizontalNames:i,verticalNames:n,horizontal:i.map(function(o){return r[o]}),vertical:n.map(function(o){return r[o]})}}function Gm(t,e,r){var i=Nt(t,[e.clientLeft,e.clientTop],r);return[e.left+i[0],e.top+i[1]]}function Fm(t){var e=I(t,2),r=e[0],i=e[1],n=i[0]-r[0],o=i[1]-r[1];Math.abs(n)<jt&&(n=0),Math.abs(o)<jt&&(o=0);var s=0,a=0,l=0;return n?o?(s=-o/n,a=1,l=s*r[0]-r[1]):(a=1,l=-r[1]):(s=-1,l=r[0]),[s,a,l].map(function(u){return bt(u,jt)})}var fh="snapRotationThreshold",hh="snapRotationDegrees",dh="snapHorizontalThreshold",ph="snapVerticalThreshold";function No(t,e,r,i,n,o,s){var a;i===void 0&&(i=[]),n===void 0&&(n=[]);var l=t.props,u=((a=t.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],c=Lu(s,l[dh],5),f=Lu(o,l[ph],5);return vh(t.state.guidelines,e,r,i,n,c,f,u)}function vh(t,e,r,i,n,o,s,a){return{vertical:_u(t,"vertical",e,s*a[0],i),horizontal:_u(t,"horizontal",r,o*a[1],n)}}function Hm(t,e,r){var i=I(r,2),n=i[0],o=i[1],s=I(e,2),a=s[0],l=s[1],u=I(pt(r,e),2),c=u[0],f=u[1],h=f>0,d=c>0;c=fo(c),f=fo(f);var p={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(c===0&&f===0)return{vertical:p,horizontal:v};var g=No(t,c?[n]:[],f?[o]:[],[],[],void 0,void 0),m=g.vertical,b=g.horizontal;m.posInfos.filter(function(H){var W=H.pos;return d?W>=a:W<=a}),b.posInfos.filter(function(H){var W=H.pos;return h?W>=l:W<=l}),m.isSnap=m.posInfos.length>0,b.isSnap=b.posInfos.length>0;var C=qs(m),S=C.isSnap,w=C.guideline,y=qs(b),_=y.isSnap,x=y.guideline,k=_?x.pos[1]:0,E=S?w.pos[0]:0;if(c===0)_&&(v.isSnap=!0,v.pos=x.pos[1],v.offset=o-v.pos);else if(f===0)S&&(p.isSnap=!0,p.pos=E,p.offset=n-E);else{var O=f/c,D=r[1]-O*n,T=0,R=0,L=!1;S?(R=E,T=O*R+D,L=!0):_&&(T=k,R=(T-D)/O,L=!0),L&&(p.isSnap=!0,p.pos=R,p.offset=n-R,v.isSnap=!0,v.pos=T,v.offset=o-T)}return{vertical:p,horizontal:v}}function dr(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function Su(t,e,r,i){var n=qa(t.props.snapDirections,e),o=No(t,n.vertical,n.horizontal,n.verticalNames.map(function(l){return dr(l)}),n.horizontalNames.map(function(l){return dr(l)}),r,i),s=dr(n.horizontalNames[o.horizontal.index]),a=dr(n.verticalNames[o.vertical.index]);return{vertical:B(B({},o.vertical),{direction:a}),horizontal:B(B({},o.horizontal),{direction:s})}}function qs(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],i=r.guidelineInfos[0],n=i.offset,o=i.dist,s=i.guideline;return{isSnap:e,offset:n,dist:o,pos:r.pos,guideline:s}}function _u(t,e,r,i,n){var o,s;if(n===void 0&&(n=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=e==="vertical",l=a?0:1,u=r.map(function(f,h){var d=n[h]||"",p=t.map(function(v){var g=v.pos,m=f-g[l];return{offset:m,dist:X(m),guideline:v,direction:d}}).filter(function(v){var g=v.guideline,m=v.dist,b=g.type;return!(b!==e||m>i)}).sort(function(v,g){return v.dist-g.dist});return{pos:f,index:h,guidelineInfos:p,direction:d}}).filter(function(f){return f.guidelineInfos.length>0}).sort(function(f,h){return f.guidelineInfos[0].dist-h.guidelineInfos[0].dist}),c=u.length>0;return{isSnap:c,index:c?u[0].index:-1,direction:(s=(o=u[0])===null||o===void 0?void 0:o.direction)!==null&&s!==void 0?s:"",posInfos:u}}function Wm(t,e,r,i,n){var o=[];r[0]&&r[1]?o=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(h,d,p){var v=p[d+1]||p[0];o.push(h),o.push([(h[0]+v[0])/2,(h[1]+v[1])/2])}):t.props.keepRatio?o.push([-1,-1],[-1,1],[1,-1],[1,1],r):(o.push.apply(o,Q([],I(mm([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),o.length>1&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]));var s=o.map(function(h){return Kt(e,h)}),a=s.map(function(h){return h[0]}),l=s.map(function(h){return h[1]}),u=No(t,a,l,o.map(function(h){return dr(h[0])}),o.map(function(h){return dr(h[1])}),i,n),c=dr(o.map(function(h){return h[0]})[u.vertical.index]),f=dr(o.map(function(h){return h[1]})[u.horizontal.index]);return{vertical:B(B({},u.vertical),{direction:c}),horizontal:B(B({},u.horizontal),{direction:f})}}function gh(t,e){var r=X(t.offset),i=X(e.offset);return t.isBound&&e.isBound?i-r:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?i-r:t.isSnap?-1:e.isSnap||r<ce?1:i<ce?-1:r-i}function ao(t,e){return t.slice().sort(function(r,i){var n=r.sign[e],o=i.sign[e],s=r.offset[e],a=i.offset[e];if(n){if(!o)return-1}else return 1;return gh({isBound:r.isBound,isSnap:r.isSnap,offset:s},{isBound:i.isBound,isSnap:i.isSnap,offset:a})})[0]}function Vm(t,e,r){var i=[];if(r)X(e[0])!==1||X(e[1])!==1?i.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):i.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),i.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var n=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(a){var l=[s*n[0],a*n[1]];e[0]===l[0]&&e[1]===l[1]||i.push([e,l])})})}else if(t[0]){var o=X(e[0])===1?[1]:[1,-1];o.forEach(function(s){i.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var o=X(e[1])===1?[1]:[1,-1];o.forEach(function(a){i.push([[-1,e[1]],[-1,a*t[1]]],[[0,e[1]],[0,a*t[1]]],[[1,e[1]],[1,a*t[1]]])})}return i}function mh(t,e){var r=Rs([e[0][0],e[1][0]]),i=Rs([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:i<=t[1]}}function Ka(t,e){var r=I(e,2),i=r[0],n=r[1],o=n[0]-i[0],s=n[1]-i[1];X(o)<ce&&(o=0),X(s)<ce&&(s=0);var a,l;if(!o)a=i[0],l=t[0];else if(!s)a=i[1],l=t[1];else{var u=s/o;a=u*(t[0]-i[0])+i[1],l=t[1]}return a-l}function yh(t,e,r,i){return i===void 0&&(i=ce),t.every(function(n){var o=Ka(n,e),s=o<=0;return s===r||X(o)<=i})}function wu(t,e,r,i,n){return n===void 0&&(n=0),i&&e-n<=t||!i&&t<=r+n?{isBound:!0,offset:i?e-t:r-t}:{isBound:!1,offset:0}}function jm(t,e){var r=e.line,i=e.centerSign,n=e.verticalSign,o=e.horizontalSign,s=e.lineConstants,a=t.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=a.left,u=a.top,c=a.width,f=a.height,h=[[l,u],[l,u+f]],d=[[l,u],[l+c,u]],p=[[l+c,u],[l+c,u+f]],v=[[l,u+f],[l+c,u+f]];if(yh([[l,u],[l+c,u],[l,u+f],[l+c,u+f]],r,i))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=pr(r,s,d,n),m=pr(r,s,v,n),b=pr(r,s,h,o),C=pr(r,s,p,o),S=g.isBound&&m.isBound,w=g.isBound||m.isBound,y=b.isBound&&C.isBound,_=b.isBound||C.isBound,x=di(g.offset,m.offset),k=di(b.offset,C.offset),E=[0,0],O=!1,D=!1;return X(k)<X(x)?(E=[x,0],O=w,D=S):(E=[0,k],O=_,D=y),{isAllBound:D,isVerticalBound:w,isHorizontalBound:_,isBound:O,offset:E}}function pr(t,e,r,i,n,o){var s=I(e,2),a=s[0],l=s[1],u=t[0],c=r[0],f=r[1],h=fo(f[1]-c[1]),d=fo(f[0]-c[0]),p=l,v=a,g=-a/l;if(d){if(!h){if(o&&!p)return{isBound:!1,offset:0};if(v){var S=(c[1]-u[1])/g+u[0];return wu(S,c[0],f[0],i,n)}else{var b=c[1]-u[1],C=X(b)<=(n||0);return{isBound:C,offset:C?b:0}}}}else{if(o&&!v)return{isBound:!1,offset:0};if(p){var m=g*(c[0]-u[0])+u[1];return wu(m,c[1],f[1],i,n)}else{var b=c[0]-u[0],C=X(b)<=(n||0);return{isBound:C,offset:C?b:0}}}return{isBound:!1,offset:0}}function bh(t,e,r){return e.map(function(i){var n=jm(t,i),o=n.isBound,s=n.offset,a=n.isVerticalBound,l=n.isHorizontalBound,u=i.multiple,c=Xe({datas:r,distX:s[0],distY:s[1]}).map(function(f,h){return f*(u[h]?2/u[h]:0)});return{sign:u,isBound:o,isVerticalBound:a,isHorizontalBound:l,isSnap:!1,offset:c}})}function Ym(t,e,r){var i,n=Za(t,e,[0,0],!1).map(function(h){return B(B({},h),{multiple:h.multiple.map(function(d){return X(d)*2})})}),o=bh(t,n,r),s=ao(o,0),a=ao(o,1),l=0,u=0,c=s.isVerticalBound||a.isVerticalBound,f=s.isHorizontalBound||a.isHorizontalBound;return(c||f)&&(i=I(vm({datas:r,distX:-s.offset[0],distY:-a.offset[1]}),2),l=i[0],u=i[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:f,offset:u}}}function $m(t,e){var r=[],i=t[0],n=t[1];return i&&n?r.push([[0,n*2],t,[-i,n]],[[i*2,0],t,[i,-n]]):i?(r.push([[i*2,0],[i,1],[i,-1]]),e&&r.push([[0,-1],[i,-1],[-i,-1]],[[0,1],[i,1],[-i,1]])):n?(r.push([[0,n*2],[1,n],[-1,n]]),e&&r.push([[-1,0],[-1,n],[-1,-n]],[[1,0],[1,n],[1,-n]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function Za(t,e,r,i){var n=t.state,o=n.allMatrix,s=n.is3d,a=Yr(o,100,100,s?4:3),l=Kt(a,[0,0]);return $m(r,i).map(function(u){var c=I(u,3),f=c[0],h=c[1],d=c[2],p=[Kt(a,h),Kt(a,d)],v=Fm(p),g=mh(l,p),m=g.vertical,b=g.horizontal,C=Ka(l,p)<=0;return{multiple:f,centerSign:C,verticalSign:m,horizontalSign:b,lineConstants:v,line:[Kt(e,h),Kt(e,d)]}})}function ku(t,e,r,i){var n=i?t.map(function(o){return dn(o,i)}):t;return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].some(function(o){var s=Ka(r,o)<=0;return!yh(e,o,s)})}function Xm(t){var e=I(t,2),r=e[0],i=e[1],n=i[0]-r[0],o=i[1]-r[1];if(!n)return X(r[0]);if(!o)return X(r[1]);var s=o/n;return X((-s*r[0]+r[1])/Math.sqrt(Math.pow(s,2)+1))}function Um(t){var e=I(t,2),r=e[0],i=e[1],n=i[0]-r[0],o=i[1]-r[1];if(!n)return[r[0],0];if(!o)return[0,r[1]];var s=o/n,a=-s*r[0]+r[1];return[-a/(s+1/s),a/(s*s+1)]}function qm(t,e,r,i,n){var o=t.props.innerBounds,s=n*Math.PI/180;if(!o)return[];var a=o.left,l=o.top,u=o.width,c=o.height,f=a-i[0],h=a+u-i[0],d=l-i[1],p=l+c-i[1],v=[[f,d],[h,d],[f,p],[h,p]],g=Kt(r,[0,0]);if(!ku(r,v,g,0))return[];var m=[],b=v.map(function(C){return[Me(C),Ft([0,0],C)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(C){var S=Ft([0,0],Um(C)),w=Xm(C);m.push.apply(m,Q([],I(b.filter(function(y){var _=I(y,1),x=_[0];return x&&w<=x}).map(function(y){var _=I(y,2),x=_[0],k=_[1],E=Math.acos(x?w/x:0),O=k+E,D=k-E;return[s+O-S,s+D-S]}).reduce(function(y,_){return y.push.apply(y,Q([],I(_),!1)),y},[]).filter(function(y){return!ku(e,v,g,y)}).map(function(y){return bt(y*180/Math.PI,ce)})),!1))}),m}function Km(t){var e=t.props.innerBounds,r=Jr();if(!e)return{boundMap:r,vertical:[],horizontal:[]};var i=t.getRect(),n=i.pos1,o=i.pos2,s=i.pos3,a=i.pos4,l=[n,o,s,a],u=Kt(l,[0,0]),c=e.left,f=e.top,h=e.width,d=e.height,p=[[c,f],[c,f+d]],v=[[c,f],[c+h,f]],g=[[c+h,f],[c+h,f+d]],m=[[c,f+d],[c+h,f+d]],b=Za(t,l,[0,0],!1),C=[],S=[];return b.forEach(function(w){var y=w.line,_=w.lineConstants,x=mh(u,y),k=x.horizontal,E=x.vertical,O=pr(y,_,v,E,1,!0),D=pr(y,_,m,E,1,!0),T=pr(y,_,p,k,1,!0),R=pr(y,_,g,k,1,!0);O.isBound&&!r.top&&(C.push(f),r.top=!0),D.isBound&&!r.bottom&&(C.push(f+d),r.bottom=!0),T.isBound&&!r.left&&(S.push(c),r.left=!0),R.isBound&&!r.right&&(S.push(c+h),r.right=!0)}),{boundMap:r,horizontal:C,vertical:S}}function Zm(t,e,r,i){var n=e[0]-t[0],o=e[1]-t[1];if(X(n)<jt&&(n=0),X(o)<jt&&(o=0),!n)return i?[0,0]:[0,r];if(!o)return i?[r,0]:[0,0];var s=o/n,a=t[1]-s*t[0];if(i){var l=s*(e[0]+r)+a;return[r,l-e[1]]}else{var u=(e[1]+r-a)/s;return[u-e[0],r]}}function Ks(t,e,r,i,n){var o=Zm(t,e,r,i);if(!o)return{isOutside:!1,offset:[0,0]};var s=Je(t,e),a=Je(o,t),l=Je(o,e),u=a>s||l>s,c=I(Xe({datas:n,distX:o[0],distY:o[1]}),2),f=c[0],h=c[1];return{offset:[f,h],isOutside:u}}function lo(t,e){return t.isBound?t.offset:e.isSnap?qs(e).offset:0}function Jm(t,e,r,i,n){var o=I(e,2),s=o[0],a=o[1],l=I(r,2),u=l[0],c=l[1],f=I(i,2),h=f[0],d=f[1],p=I(n,2),v=p[0],g=p[1],m=-v,b=-g;if(t&&s&&a){m=0,b=0;var C=[];if(u&&c?C.push([0,g],[v,0]):u?C.push([v,0]):c?C.push([0,g]):h&&d?C.push([0,g],[v,0]):h?C.push([v,0]):d&&C.push([0,g]),C.length){C.sort(function(_,x){return Me(pt([s,a],_))-Me(pt([s,a],x))});var S=C[0];if(S[0]&&X(s)>jt)m=-S[0],b=a*X(s+m)/X(s)-a;else if(S[1]&&X(a)>jt){var w=a;b=-S[1],m=s*X(a+b)/X(w)-s}if(t&&c&&u)if(X(m)>jt&&X(m)<X(v)){var y=X(v)/X(m);m*=y,b*=y}else if(X(b)>jt&&X(b)<X(g)){var y=X(g)/X(b);m*=y,b*=y}else m=di(-v,m),b=di(-g,b)}}else m=s||u?-v:0,b=a||c?-g:0;return[m,b]}function Qm(t,e,r,i,n,o){if(!wi(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=tl(o.absolutePoses,[e,r]),a=Ee(s),l=a.left,u=a.right,c=a.top,f=a.bottom,h={horizontal:s.map(function(R){return R[1]}),vertical:s.map(function(R){return R[0]})},d=Ua(t.props.snapDirections),p=qa(d,{left:l,right:u,top:c,bottom:f,center:(l+u)/2,middle:(c+f)/2}),v=Go(t,n,p,h),g=v.vertical,m=v.horizontal,b=Ym(t,s,o),C=b.vertical,S=b.horizontal,w=g.isSnap,y=m.isSnap,_=g.isBound||C.isBound,x=m.isBound||S.isBound,k=di(g.offset,C.offset),E=di(m.offset,S.offset),O=I(Jm(i,[e,r],[_,x],[w,y],[k,E]),2),D=O[0],T=O[1];return[{isBound:_,isSnap:w,offset:D},{isBound:x,isSnap:y,offset:T}]}function Go(t,e,r,i){i===void 0&&(i=r);var n=Xa(zo(t),i.vertical,i.horizontal),o=n.horizontal,s=n.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:No(t,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),l=a.horizontal,u=a.vertical,c=lo(o[0],l),f=lo(s[0],u),h=X(c),d=X(f);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:h,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:d,bounds:s,snap:u}}}function Eu(t,e,r,i,n,o,s){s===void 0&&(s=[1,1]);var a=Xa(e,r,i),l=a.horizontal,u=a.vertical,c=vh(t,r,i,[],[],n,o,s),f=c.horizontal,h=c.vertical,d=lo(l[0],f),p=lo(u[0],h),v=X(d),g=X(p);return{horizontal:{isBound:l[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:d,dist:v,bounds:l,snap:f},vertical:{isBound:u[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:p,dist:g,bounds:u,snap:h}}}function t1(t,e,r,i){var n=Ft(t,e)/Math.PI*180,o=r.vertical,s=o.isBound,a=o.isSnap,l=o.dist,u=r.horizontal,c=u.isBound,f=u.isSnap,h=u.dist,d=n%180,p=d<3||d>177,v=d>87&&d<93;return h<l&&(s||a&&!v&&(!i||!p))?"vertical":c||f&&!p&&(!i||!v)?"horizontal":""}function e1(t,e,r,i,n,o){return r.map(function(s){var a=I(s,2),l=a[0],u=a[1],c=Kt(e,l),f=Kt(e,u),h=i?r1(t,c,f,n):Go(t,n,{vertical:[f[0]],horizontal:[f[1]]}),d=h.horizontal,p=d.offset,v=d.isBound,g=d.isSnap,m=h.vertical,b=m.offset,C=m.isBound,S=m.isSnap,w=pt(u,l);if(!b&&!p)return{isBound:C||v,isSnap:S||g,sign:w,offset:[0,0]};var y=t1(c,f,h,i);if(!y)return{sign:w,isBound:!1,isSnap:!1,offset:[0,0]};var _=y==="vertical",x=[0,0];return!i&&X(u[0])===1&&X(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?x=Xe({datas:o,distX:-b,distY:-p}):x=Ks(c,f,-(_?b:p),_,o).offset,x=x.map(function(k,E){return k*(w[E]?2/w[E]:0)}),{sign:w,isBound:_?C:v,isSnap:_?S:g,offset:x}})}function Mu(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function r1(t,e,r,i){var n=Om(t,e,r),o=n.horizontal,s=n.vertical,a=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Hm(t,e,r),l=a.horizontal,u=a.vertical,c=Mu(o,l),f=Mu(s,u),h=X(c),d=X(f);return{horizontal:{isBound:o.isBound,isSnap:l.isSnap,offset:c,dist:h},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:f,dist:d}}}function i1(t,e,r,i,n){var o=[-r[0],-r[1]],s=t.state,a=s.width,l=s.height,u=t.props.bounds,c=1/0,f=1/0;if(u){var h=[[r[0],-r[1]],[-r[0],r[1]]],d=u.left,p=d===void 0?-1/0:d,v=u.top,g=v===void 0?-1/0:v,m=u.right,b=m===void 0?1/0:m,C=u.bottom,S=C===void 0?1/0:C;h.forEach(function(w){var y=w[0]!==o[0],_=w[1]!==o[1],x=Kt(e,w),k=Ft(i,x)*360/Math.PI;if(_){var E=x.slice();(X(k-360)<2||X(k-180)<2)&&(E[1]=i[1]);var O=Ks(i,E,(i[1]<x[1]?S:g)-x[1],!1,n),D=I(O.offset,2),T=D[1],R=O.isOutside;isNaN(T)||(f=l+(R?1:-1)*X(T))}if(y){var E=x.slice();(X(k-90)<2||X(k-270)<2)&&(E[0]=i[0]);var L=Ks(i,E,(i[0]<x[0]?b:p)-x[0],!0,n),H=I(L.offset,1),W=H[0],N=L.isOutside;isNaN(W)||(c=a+(N?1:-1)*X(W))}})}return{maxWidth:c,maxHeight:f}}var se={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var r=t.props,i=r.hideThrottleDragRotateLine,n=r.throttleDragRotate,o=r.zoom,s=t.getState(),a=s.dragInfo,l=s.beforeOrigin;if(i||!n||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var c=Me(u),f=Ft(u,[0,0]);return[e.createElement("div",{className:dt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(f,"rad) scaleY(").concat(o,")")}})]},dragStart:function(t,e){var r=e.datas,i=e.parentEvent,n=e.parentGesto,o=t.state,s=o.gestos,a=o.style;if(s.draggable)return!1;s.draggable=n||t.targetGesto,r.datas={},r.left=parseFloat(a.left||"")||0,r.top=parseFloat(a.top||"")||0,r.bottom=parseFloat(a.bottom||"")||0,r.right=parseFloat(a.right||"")||0,r.startValue=[0,0],jr(t,e),Lo(t,e,"translate"),S1(t,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=xt(t,e,B({set:function(c){r.startValue=c}},Ao(t,e))),u=i||ct(t,"onDragStart",l);return u!==!1?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,r.isPinch=!1),r.isDrag?l:!1},drag:function(t,e){if(e){Oo(t,e,"translate");var r=e.datas,i=e.parentEvent,n=e.parentFlag,o=e.isPinch,s=e.deltaOffset,a=e.useSnap,l=e.isRequest,u=e.isGroup,c=e.parentThrottleDrag,f=e.distX,h=e.distY,d=r.isDrag,p=r.prevDist,v=r.prevBeforeDist,g=r.startValue;if(d){s&&(f+=s[0],h+=s[1]);var m=t.props,b=m.parentMoveable,C=u?0:m.throttleDrag||c||0,S=i?0:m.throttleDragRotate||0,w=0,y=!1,_=!1,x=!1,k=!1;if(!i&&S>0&&(f||h)){var E=m.startDragRotate||0,O=bt(E+Ft([0,0],[f,h])*180/Math.PI,S)-E,D=h*Math.abs(Math.cos((O-90)/180*Math.PI)),T=f*Math.abs(Math.cos(O/180*Math.PI)),R=Me([T,D]);w=O*Math.PI/180,f=R*Math.cos(w),h=R*Math.sin(w)}if(!o&&!i&&!n){var L=I(Qm(t,f,h,S,!a&&l||s,r),2),H=L[0],W=L[1];y=H.isSnap,_=H.isBound,x=W.isSnap,k=W.isBound;var N=H.offset,U=W.offset;f+=N,h+=U}var Z=wt(th({datas:r,distX:f,distY:h}),g),F=wt(pm({datas:r,distX:f,distY:h}),g);su(F,ce),su(Z,ce),S||(!y&&!_&&(F[0]=bt(F[0],C),Z[0]=bt(Z[0],C)),!x&&!k&&(F[1]=bt(F[1],C),Z[1]=bt(Z[1],C)));var tt=pt(Z,g),ot=pt(F,g),et=pt(ot,p),nt=pt(tt,v);r.prevDist=ot,r.prevBeforeDist=tt,r.passDelta=et,r.passDist=ot;var K=r.left+tt[0],st=r.top+tt[1],ft=r.right-tt[0],gt=r.bottom-tt[1],Ct=Ro(r,"translate(".concat(F[0],"px, ").concat(F[1],"px)"),"translate(".concat(ot[0],"px, ").concat(ot[1],"px)"));if(Ya(e,Ct),t.state.dragInfo.dist=i?[0,0]:ot,!(!i&&!b&&et.every(function(A){return!A})&&nt.some(function(A){return!A}))){var it=t.state,ht=it.width,M=it.height,P=xt(t,e,B({transform:Ct,dist:ot,delta:et,translate:F,beforeDist:tt,beforeDelta:nt,beforeTranslate:Z,left:K,top:st,right:ft,bottom:gt,width:ht,height:M,isPinch:o},ue({transform:Ct},e)));return!i&&ct(t,"onDrag",P),P}}}},dragAfter:function(t,e){var r=e.datas,i=r.deltaOffset;return i[0]||i[1]?(r.deltaOffset=[0,0],this.drag(t,B(B({},e),{deltaOffset:i}))):!1},dragEnd:function(t,e){var r=e.parentEvent,i=e.datas;if(t.state.dragInfo=null,!!i.isDrag){i.isDrag=!1;var n=be(t,e,{});return!r&&ct(t,"onDragEnd",n),n}},dragGroupStart:function(t,e){var r,i,n=e.datas,o=e.clientX,s=e.clientY,a=this.dragStart(t,e);if(!a)return!1;var l=cs(t,this,"dragStart",[o||0,s||0],e,!1,"draggable"),u=l.childEvents,c=l.eventParams,f=B(B({},a),{targets:t.props.targets,events:c}),h=ct(t,"onDragGroupStart",f);n.isDrag=h!==!1;var d=(i=(r=u[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&i!==void 0?i:[0,0];return n.throttleOffset=[d[0]%1,d[1]%1],n.isDrag?a:!1},dragGroup:function(t,e){var r=e.datas;if(r.isDrag){var i=this.drag(t,B(B({},e),{parentThrottleDrag:t.props.throttleDrag})),n=e.datas.passDelta,o=cs(t,this,"drag",n,e,!1,"draggable").eventParams;if(i){var s=B({targets:t.props.targets,events:o},i);return ct(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var r=e.isDrag,i=e.datas;if(i.isDrag){this.dragEnd(t,e);var n=cs(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return ct(t,"onDragGroupEnd",be(t,e,{targets:t.props.targets,events:n})),r}},request:function(t){var e={},r=t.getRect(),i=0,n=0,o=!1;return{isControl:!1,requestStart:function(s){return o=s.useSnap,{datas:e,useSnap:o}},request:function(s){return"x"in s?i=s.x-r.left:"deltaX"in s&&(i+=s.deltaX),"y"in s?n=s.y-r.top:"deltaY"in s&&(n+=s.deltaY),{datas:e,distX:i,distY:n,useSnap:o}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:o}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function xh(t,e){var r=Kt(t,e),i=[0,0];return{fixedPosition:r,fixedDirection:e,fixedOffset:i}}function n1(t,e){var r=t.allMatrix,i=t.is3d,n=t.width,o=t.height,s=i?4:3,a=[n/2*(1+e[0]),o/2*(1+e[1])],l=Nt(r,a,s),u=[0,0];return{fixedPosition:l,fixedDirection:e,fixedOffset:u}}function Ch(t,e){var r=t.allMatrix,i=t.is3d,n=t.width,o=t.height,s=i?4:3,a=Sm(e,n,o),l=Nt(r,e,s),u=[n?0:e[0],o?0:e[1]];return{fixedPosition:l,fixedDirection:a,fixedOffset:u}}var Du=il("resizable"),Zs={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:lh("resizable"),dragControlCondition:Du,viewClassName:rl("resizable"),dragControlStart:function(t,e){var r,i=e.inputEvent,n=e.isPinch,o=e.isGroup,s=e.parentDirection,a=e.parentGesto,l=e.datas,u=e.parentFixedDirection,c=e.parentEvent,f=Rh(s,n,i,l),h=t.state,d=h.target,p=h.width,v=h.height,g=h.gestos;if(!f||!d||g.resizable)return!1;g.resizable=a||t.controlGesto,!n&&jr(t,e),l.datas={},l.direction=f,l.startOffsetWidth=p,l.startOffsetHeight=v,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=h.inlineCSSWidth||h.cssWidth,l.startHeight=h.inlineCSSHeight||h.cssHeight,l.maxSize=[1/0,1/0],o||(l.minSize=[h.minOffsetWidth,h.minOffsetHeight],l.maxSize=[h.maxOffsetWidth,h.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";l.transformOrigin=m&&ge(m)?m.split(" "):m,l.startOffsetMatrix=h.offsetMatrix,l.startTransformOrigin=h.transformOrigin,l.isWidth=(r=e==null?void 0:e.parentIsWidth)!==null&&r!==void 0?r:!f[0]&&!f[1]||f[0]||!f[1];function b(k){l.ratio=k&&isFinite(k)?k:0}l.startPositions=De(t.state);function C(k){var E=xh(l.startPositions,k);l.fixedDirection=E.fixedDirection,l.fixedPosition=E.fixedPosition,l.fixedOffset=E.fixedOffset}function S(k){var E=Ch(t.state,k);l.fixedDirection=E.fixedDirection,l.fixedPosition=E.fixedPosition,l.fixedOffset=E.fixedOffset}function w(k){l.minSize=[Mt("".concat(k[0]),0)||0,Mt("".concat(k[1]),0)||0]}function y(k){var E=[k[0]||1/0,k[1]||1/0];(!ui(E[0])||isFinite(E[0]))&&(E[0]=Mt("".concat(E[0]),0)||1/0),(!ui(E[1])||isFinite(E[1]))&&(E[1]=Mt("".concat(E[1]),0)||1/0),l.maxSize=E}b(p/v),C(u||[-f[0],-f[1]]),l.setFixedDirection=C,l.setFixedPosition=S,l.setMin=w,l.setMax=y;var _=xt(t,e,{direction:f,startRatio:l.ratio,set:function(k){var E=I(k,2),O=E[0],D=E[1];l.startWidth=O,l.startHeight=D},setMin:w,setMax:y,setRatio:b,setFixedDirection:C,setFixedPosition:S,setOrigin:function(k){l.transformOrigin=k},dragStart:se.dragStart(t,new fi().dragStart([0,0],e))}),x=c||ct(t,"onResizeStart",_);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,x!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:f}),l.isResize?_:!1},dragControl:function(t,e){var r,i=e.datas,n=e.parentFlag,o=e.isPinch,s=e.parentKeepRatio,a=e.dragClient,l=e.parentDist,u=e.useSnap,c=e.isRequest,f=e.isGroup,h=e.parentEvent,d=e.resolveMatrix,p=i.isResize,v=i.transformOrigin,g=i.startWidth,m=i.startHeight,b=i.prevWidth,C=i.prevHeight,S=i.minSize,w=i.maxSize,y=i.ratio,_=i.startOffsetWidth,x=i.startOffsetHeight,k=i.isWidth;if(!p)return;if(d){var E=t.state.is3d,O=i.startOffsetMatrix,D=i.startTransformOrigin,T=E?4:3,R=Qi(oo(e)),L=Math.sqrt(R.length);T!==L&&(R=Ge(R,L,T));var H=yn(O,R,D,T),W=Yr(H,_,x,T);i.startPositions=W,i.nextTargetMatrix=R,i.nextAllMatrix=H}var N=Hr(t.props,"resizable"),U=N.resizeFormat,Z=N.throttleResize,F=Z===void 0?n?0:1:Z,tt=N.parentMoveable,ot=N.keepRatioFinally,et=i.direction,nt=et,K=0,st=0;!et[0]&&!et[1]&&(nt=[1,1]);var ft=y&&(s??N.keepRatio)||!1;function gt(){var lt=i.fixedDirection,at=Fh(nt,ft,i,e);K=at.distWidth,st=at.distHeight;var vt=nt[0]-lt[0]||ft?Math.max(_+K,ce):_,yt=nt[1]-lt[1]||ft?Math.max(x+st,ce):x;return ft&&_&&x&&(k?yt=vt/y:vt=yt*y),[vt,yt]}var Ct=I(gt(),2),it=Ct[0],ht=Ct[1];h||(i.setFixedDirection(i.fixedDirection),ct(t,"onBeforeResize",xt(t,e,{startFixedDirection:i.startFixedDirection,startFixedPosition:i.startFixedPosition,setFixedDirection:function(lt){var at;return i.setFixedDirection(lt),at=I(gt(),2),it=at[0],ht=at[1],[it,ht]},setFixedPosition:function(lt){var at;return i.setFixedPosition(lt),at=I(gt(),2),it=at[0],ht=at[1],[it,ht]},boundingWidth:it,boundingHeight:ht,setSize:function(lt){var at;at=I(lt,2),it=at[0],ht=at[1]}},!0)));var M=a;a||(!n&&o?M=Em(t,[0,0]):M=i.fixedPosition);var P=[0,0];o||(P=x1(t,it,ht,et,M,!u&&c,i)),l&&(!l[0]&&(P[0]=0),!l[1]&&(P[1]=0));function A(){var lt;U&&(lt=I(U([it,ht]),2),it=lt[0],ht=lt[1]),it=bt(it,F),ht=bt(ht,F)}if(ft){nt[0]&&nt[1]&&P[0]&&P[1]&&(X(P[0])>X(P[1])?P[1]=0:P[0]=0);var z=!P[0]&&!P[1];z&&A(),nt[0]&&!nt[1]||P[0]&&!P[1]||z&&k?(it+=P[0],ht=it/y):(!nt[0]&&nt[1]||!P[0]&&P[1]||z&&!k)&&(ht+=P[1],it=ht*y)}else it+=P[0],ht+=P[1],it=Math.max(0,it),ht=Math.max(0,ht);r=I(hf([it,ht],S,w,ft?y:!1),2),it=r[0],ht=r[1],A(),ft&&(f||ot)&&(k?ht=it/y:it=ht*y),K=it-_,st=ht-x;var G=[K-b,st-C];i.prevWidth=K,i.prevHeight=st;var Y=km(t,it,ht,M,v,i);if(!(!tt&&G.every(function(lt){return!lt})&&Y.every(function(lt){return!lt}))){var j=se.drag(t,mn(e,t.state,Y,!!o,!1,"draggable")),V=j.transform,q=g+K,$=m+st,rt=xt(t,e,B({width:q,height:$,offsetWidth:Math.round(it),offsetHeight:Math.round(ht),startRatio:y,boundingWidth:it,boundingHeight:ht,direction:et,dist:[K,st],delta:G,isPinch:!!o,drag:j},Lh({style:{width:"".concat(q,"px"),height:"".concat($,"px")},transform:V},j,e)));return!h&&ct(t,"onResize",rt),rt}},dragControlAfter:function(t,e){var r=e.datas,i=r.isResize,n=r.startOffsetWidth,o=r.startOffsetHeight,s=r.prevWidth,a=r.prevHeight;if(!(!i||t.props.checkResizableError===!1)){var l=t.state,u=l.width,c=l.height,f=u-(n+s),h=c-(o+a),d=X(f)>3,p=X(h)>3;if(d&&(r.startWidth+=f,r.startOffsetWidth+=f,r.prevWidth+=f),p&&(r.startHeight+=h,r.startOffsetHeight+=h,r.prevHeight+=h),d||p)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var r=e.datas,i=e.parentEvent;if(r.isResize){r.isResize=!1;var n=be(t,e,{});return!i&&ct(t,"onResizeEnd",n),n}},dragGroupControlCondition:Du,dragGroupControlStart:function(t,e){var r=e.datas,i=this.dragControlStart(t,B(B({},e),{isGroup:!0}));if(!i)return!1;var n=ze(t,"resizable",e),o=r.startOffsetWidth,s=r.startOffsetHeight;function a(){var d=r.minSize;n.forEach(function(p){var v=p.datas,g=v.minSize,m=v.startOffsetWidth,b=v.startOffsetHeight,C=o*(m?g[0]/m:0),S=s*(b?g[1]/b:0);d[0]=Math.max(d[0],C),d[1]=Math.max(d[1],S)})}function l(){var d=r.maxSize;n.forEach(function(p){var v=p.datas,g=v.maxSize,m=v.startOffsetWidth,b=v.startOffsetHeight,C=o*(m?g[0]/m:0),S=s*(b?g[1]/b:0);d[0]=Math.min(d[0],C),d[1]=Math.min(d[1],S)})}var u=Qe(t,this,"dragControlStart",e,function(d,p){return so(t,d,r,p)});a(),l();var c=function(d){i.setFixedDirection(d),u.forEach(function(p,v){p.setFixedDirection(d),so(t,p.moveable,r,n[v])})};r.setFixedDirection=c;var f=B(B({},i),{targets:t.props.targets,events:u.map(function(d){return B(B({},d),{setMin:function(p){d.setMin(p),a()},setMax:function(p){d.setMax(p),l()}})}),setFixedDirection:c,setMin:function(d){i.setMin(d),a()},setMax:function(d){i.setMax(d),l()}}),h=ct(t,"onResizeGroupStart",f);return r.isResize=h!==!1,r.isResize?i:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var i=Hr(t.props,"resizable");Ho(t,"onBeforeResize",function(d){ct(t,"onBeforeResizeGroup",xt(t,e,B(B({},d),{targets:i.targets}),!0))});var n=this.dragControl(t,B(B({},e),{isGroup:!0}));if(n){var o=n.boundingWidth,s=n.boundingHeight,a=n.dist,l=i.keepRatio,u=[o/(o-a[0]),s/(s-a[1])],c=r.fixedPosition,f=Qe(t,this,"dragControl",e,function(d,p){var v=I(re(pn(t.rotation/180*Math.PI,3),[p.datas.originalX*u[0],p.datas.originalY*u[1],1],3),2),g=v[0],m=v[1];return B(B({},p),{parentDist:null,parentScale:u,dragClient:wt(c,[g,m]),parentKeepRatio:l})}),h=B({targets:i.targets,events:f},n);return ct(t,"onResizeGroup",h),h}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,i=e.datas;if(i.isResize){this.dragControlEnd(t,e);var n=Qe(t,this,"dragControlEnd",e),o=be(t,e,{targets:t.props.targets,events:n});return ct(t,"onResizeGroupEnd",o),r}},request:function(t){var e={},r=0,i=0,n=!1,o=t.getRect();return{isControl:!0,requestStart:function(s){var a;return n=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(a=s==null?void 0:s.horizontal)!==null&&a!==void 0?a:!0,useSnap:n}},request:function(s){return"offsetWidth"in s?r=s.offsetWidth-o.offsetWidth:"deltaWidth"in s&&(r+=s.deltaWidth),"offsetHeight"in s?i=s.offsetHeight-o.offsetHeight:"deltaHeight"in s&&(i+=s.deltaHeight),{datas:e,parentDist:[r,i],parentKeepRatio:s.keepRatio,useSnap:n}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:n}}}},unset:function(t){t.state.gestos.resizable=null}};function fs(t,e,r,i,n){var o=t.props.groupable,s=t.state,a=s.is3d?4:3,l=e.origin,u=Nt(t.state.rootMatrix,pt([l[0],l[1]],o?[0,0]:[s.left,s.top]),a),c=wt([n.left,n.top],u);e.startAbsoluteOrigin=c,e.prevDeg=Ft(c,[r,i])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Je(c,[r,i])}function qn(t,e,r){var i=r.defaultDeg,n=r.prevDeg,o=n%360,s=Math.floor(n/360);o<0&&(o+=360),o>t&&o>270&&t<90?++s:o<t&&o<90&&t>270&&--s;var a=e*(s*360+t-i);return r.prevDeg=i+a,a}function hs(t,e,r,i){return qn(Ft(i.startAbsoluteOrigin,[t,e])/Math.PI*180,r,i)}function ds(t,e,r,i,n,o){var s=t.props.throttleRotate,a=s===void 0?0:s,l=r.prevSnapDeg,u=0,c=!1;if(o){var f=b1(t,e,i,n+i);c=f.isSnap,u=n+f.dist}c||(u=bt(n+i,a));var h=u-n;return r.prevSnapDeg=h,[h-l,h,u]}function Sh(t,e,r){var i=I(e,4),n=i[0],o=i[1],s=i[2],a=i[3];if(t==="none")return[];if($t(t))return t.map(function(g){return Sh(g,[n,o,s,a],r)[0]});var l=I((t||"top").split("-"),2),u=l[0],c=l[1],f=[n,o];u==="left"?f=[s,n]:u==="right"?f=[o,a]:u==="bottom"&&(f=[a,s]);var h=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],d=Ih(f,r);if(c){var p=c==="top"||c==="left",v=u==="bottom"||u==="left";h=f[p&&!v||!p&&v?0:1]}return[[h,d]]}function Js(t,e){if(e.isRequest)return e.requestAble==="rotatable";var r=e.inputEvent.target;if(qt(r,dt("rotation-control"))||t.props.rotateAroundControls&&qt(r,dt("around-control"))||qt(r,dt("control"))&&qt(r,dt("rotatable")))return!0;var i=t.props.rotationTarget;return i?nl(i,!0).some(function(n){return n?r===n||r.contains(n):!1}):!1}var o1=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,s1={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[o1],viewClassName:function(t){return t.isDragging("rotatable")?dt("view-rotation-dragging"):""},render:function(t,e){var r=Hr(t.props,"rotatable"),i=r.rotatable,n=r.rotationPosition,o=r.zoom,s=r.renderDirections,a=r.rotateAroundControls,l=r.resolveAblesWithRotatable,u=t.getState(),c=u.renderPoses,f=u.direction;if(!i)return null;var h=Sh(n,c,f),d=[];if(h.forEach(function(m,b){var C=I(m,2),S=C[0],w=C[1];d.push(e.createElement("div",{key:"rotation".concat(b),className:dt("rotation"),style:{transform:"translate(-50%) translate(".concat(S[0],"px, ").concat(S[1],"px) rotate(").concat(w,"rad)")}},e.createElement("div",{className:dt("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:dt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}),s){var p=er(l||{}),v={};p.forEach(function(m){l[m].forEach(function(b){v[b]=m})});var g=[];$t(s)&&(g=s.map(function(m){var b=v[m];return{data:b?{resolve:b}:{},classNames:b?["move"]:[],dir:m}})),d.push.apply(d,Q([],I(oh(t,"rotatable",g,e)),!1))}return a&&d.push.apply(d,Q([],I(ch(t,e)),!1)),d},dragControlCondition:Js,dragControlStart:function(t,e){var r,i,n=e.datas,o=e.clientX,s=e.clientY,a=e.parentRotate,l=e.parentFlag,u=e.isPinch,c=e.isRequest,f=t.state,h=f.target,d=f.left,p=f.top,v=f.direction,g=f.beforeDirection,m=f.targetTransform,b=f.moveableClientRect,C=f.offsetMatrix,S=f.targetMatrix,w=f.allMatrix,y=f.width,_=f.height;if(!c&&!h)return!1;var x=t.getRect();n.rect=x,n.transform=m,n.left=d,n.top=p;var k=function(nt){var K=Ch(t.state,nt);n.fixedDirection=K.fixedDirection,n.fixedOffset=K.fixedOffset,n.fixedPosition=K.fixedPosition,F&&F.setFixedPosition(nt)},E=function(nt){var K=n1(t.state,nt);n.fixedDirection=K.fixedDirection,n.fixedOffset=K.fixedOffset,n.fixedPosition=K.fixedPosition,F&&F.setFixedDirection(nt)},O=o,D=s;if(c||u||l){var T=a||0;n.beforeInfo={origin:x.beforeOrigin,prevDeg:T,defaultDeg:T,prevSnapDeg:0,startDist:0},n.afterInfo=B(B({},n.beforeInfo),{origin:x.origin}),n.absoluteInfo=B(B({},n.beforeInfo),{origin:x.origin,startValue:T})}else{var R=(i=e.inputEvent)===null||i===void 0?void 0:i.target;if(R){var L=R.getAttribute("data-direction")||"",H=hm[L];if(H){n.isControl=!0,n.isAroundControl=qt(R,dt("around-control")),n.controlDirection=H;var W=R.getAttribute("data-resolve");W&&(n.resolveAble=W);var N=A1(f.rootMatrix,f.renderPoses,b);r=I(Kt(N,H),2),O=r[0],D=r[1]}}n.beforeInfo={origin:x.beforeOrigin},n.afterInfo={origin:x.origin},n.absoluteInfo={origin:x.origin,startValue:x.rotation};var U=k;k=function(nt){var K=f.is3d?4:3,st=I(wt(Nf(S,K),nt),2),ft=st[0],gt=st[1],Ct=re(C,Nr([ft,gt],K)),it=re(w,Nr([nt[0],nt[1]],K));U(nt);var ht=f.posDelta;n.beforeInfo.origin=pt(Ct,ht),n.afterInfo.origin=pt(it,ht),n.absoluteInfo.origin=pt(it,ht),fs(t,n.beforeInfo,O,D,b),fs(t,n.afterInfo,O,D,b),fs(t,n.absoluteInfo,O,D,b)},E=function(nt){var K=Kt([[0,0],[y,0],[0,_],[y,_]],nt);k(K)}}n.startClientX=O,n.startClientY=D,n.direction=v,n.beforeDirection=g,n.startValue=0,n.datas={},Lo(t,e,"rotate");var Z=!1,F=!1;if(n.isControl&&n.resolveAble){var tt=n.resolveAble;tt==="resizable"&&(F=Zs.dragControlStart(t,B(B({},new fi("resizable").dragStart([0,0],e)),{parentPosition:n.controlPosition,parentFixedPosition:n.fixedPosition})))}F||(Z=se.dragStart(t,new fi().dragStart([0,0],e))),k(L1(t));var ot=xt(t,e,B(B({set:function(nt){n.startValue=nt*Math.PI/180},setFixedDirection:E,setFixedPosition:k},Ao(t,e)),{dragStart:Z,resizeStart:F})),et=ct(t,"onRotateStart",ot);return n.isRotate=et!==!1,f.snapRenderInfo={request:e.isRequest},n.isRotate?ot:!1},dragControl:function(t,e){var r,i,n,o=e.datas,s=e.clientDistX,a=e.clientDistY,l=e.parentRotate,u=e.parentFlag,c=e.isPinch,f=e.groupDelta,h=e.resolveMatrix,d=o.beforeDirection,p=o.beforeInfo,v=o.afterInfo,g=o.absoluteInfo,m=o.isRotate,b=o.startValue,C=o.rect,S=o.startClientX,w=o.startClientY;if(m){Oo(t,e,"rotate");var y=dm(e),_=d*y,x=t.props.parentMoveable,k=0,E,O,D=0,T,R,L=0,H,W,N=180/Math.PI*b,U=g.startValue,Z=!1,F=S+s,tt=w+a;if(!u&&"parentDist"in e){var ot=e.parentDist;E=ot,T=ot,H=ot}else c||u?(E=qn(l,d,p),T=qn(l,_,v),H=qn(l,_,g)):(E=hs(F,tt,d,p),T=hs(F,tt,_,v),H=hs(F,tt,_,g),Z=!0);if(O=N+E,R=N+T,W=U+H,ct(t,"onBeforeRotate",xt(t,e,{beforeRotation:O,rotation:R,absoluteRotation:W,setRotation:function(M){T=M-N,E=T,H=T}},!0)),r=I(ds(t,C,p,E,N,Z),3),k=r[0],E=r[1],O=r[2],i=I(ds(t,C,v,T,N,Z),3),D=i[0],T=i[1],R=i[2],n=I(ds(t,C,g,H,U,Z),3),L=n[0],H=n[1],W=n[2],!(!L&&!D&&!k&&!x&&!h)){var et=Ro(o,"rotate(".concat(R,"deg)"),"rotate(".concat(T,"deg)"));h&&(o.fixedPosition=$a(t,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var nt=wm(t,T,o),K=pt(wt(f||[0,0],nt),o.prevInverseDist||[0,0]);o.prevInverseDist=nt,o.requestValue=null;var st=rh(t,et,K,c,e),ft=st,gt=Je([F,tt],g.startAbsoluteOrigin)-g.startDist,Ct=void 0;if(o.resolveAble==="resizable"){var it=Zs.dragControl(t,B(B({},mn(e,t.state,[e.deltaX,e.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:gt}));it&&(Ct=it,ft=Lh(ft,it,e))}var ht=xt(t,e,B(B({delta:D,dist:T,rotate:R,rotation:R,beforeDist:E,beforeDelta:k,beforeRotate:O,beforeRotation:O,absoluteDist:H,absoluteDelta:L,absoluteRotate:W,absoluteRotation:W,isPinch:!!c,resize:Ct},st),ft));return ct(t,"onRotate",ht),ht}}},dragControlEnd:function(t,e){var r=e.datas;if(r.isRotate){r.isRotate=!1;var i=be(t,e,{});return ct(t,"onRotateEnd",i),i}},dragGroupControlCondition:Js,dragGroupControlStart:function(t,e){var r=e.datas,i=t.state,n=i.left,o=i.top,s=i.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(r.beforeDirection*t.rotation);var l=Qe(t,this,"dragControlStart",e,function(f,h){var d=f.state,p=d.left,v=d.top,g=d.beforeOrigin,m=wt(pt([p,v],[n,o]),pt(g,s));return h.datas.startGroupClient=m,h.datas.groupClient=m,B(B({},h),{parentRotate:0})}),u=B(B({},a),{targets:t.props.targets,events:l}),c=ct(t,"onRotateGroupStart",u);return r.isRotate=c!==!1,r.isRotate?a:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){Ho(t,"onBeforeRotate",function(u){ct(t,"onBeforeRotateGroup",xt(t,e,B(B({},u),{targets:t.props.targets}),!0))});var i=this.dragControl(t,e);if(i){var n=r.beforeDirection,o=i.beforeDist,s=o/180*Math.PI,a=Qe(t,this,"dragControl",e,function(u,c){var f=c.datas.startGroupClient,h=I(c.datas.groupClient,2),d=h[0],p=h[1],v=I(dn(f,s*n),2),g=v[0],m=v[1],b=[g-d,m-p];return c.datas.groupClient=[g,m],B(B({},c),{parentRotate:o,groupDelta:b})});t.rotation=n*i.beforeRotation;var l=B({targets:t.props.targets,events:a,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},i);return ct(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,i=e.datas;if(i.isRotate){this.dragControlEnd(t,e);var n=Qe(t,this,"dragControlEnd",e),o=be(t,e,{targets:t.props.targets,events:n});return ct(t,"onRotateGroupEnd",o),r}},request:function(t){var e={},r=0,i=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(n){return"deltaRotate"in n?r+=n.deltaRotate:"rotate"in n&&(r=n.rotate-i),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function a1(t,e){var r,i=t.direction,n=t.classNames,o=t.size,s=t.pos,a=t.zoom,l=t.key,u=i==="horizontal",c=u?"Y":"X";return e.createElement("div",{key:l,className:n.join(" "),style:(r={},r[u?"width":"height"]="".concat(o),r.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(a,")"),r)})}function Ja(t,e){return a1(B(B({},t),{classNames:Q([dt("line","guideline",t.direction)],I(t.classNames),!1).filter(function(r){return r}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(r){return"".concat(bt(r,.1),"px")})}),e)}function Tu(t,e,r,i,n,o,s,a){var l=t.props.zoom;return r.map(function(u,c){var f=u.type,h=u.pos,d=[0,0];return d[s]=i,d[s?0:1]=-n+h,Ja({key:"".concat(e,"TargetGuideline").concat(c),classNames:[dt("target","bold",f)],posValue:d,sizeValue:o,zoom:l,direction:e},a)})}function Pu(t,e,r,i,n,o){var s=t.props,a=s.zoom,l=s.isDisplayInnerSnapDigit,u=e==="horizontal"?Cr:Sr,c=n[u.start],f=n[u.end];return r.filter(function(h){var d=h.hide,p=h.elementRect;if(d)return!1;if(l&&p){var v=p.rect;if(v[u.start]<=c&&f<=v[u.end])return!1}return!0}).map(function(h,d){var p=h.pos,v=h.size,g=h.element,m=h.className,b=[-i[0]+p[0],-i[1]+p[1]];return Ja({key:"".concat(e,"-default-guideline-").concat(d),classNames:g?[dt("bold"),m]:[dt("normal"),m],direction:e,posValue:b,sizeValue:v,zoom:a},o)})}function Pi(t,e,r,i,n,o,s,a){var l,u=t.props,c=u.snapDigit,f=c===void 0?0:c,h=u.isDisplaySnapDigit,d=h===void 0?!0:h,p=u.snapDistFormat,v=p===void 0?function(w,y){return w}:p,g=u.zoom,m=e==="horizontal"?"X":"Y",b=e==="vertical"?"height":"width",C=Math.abs(n),S=d?parseFloat(C.toFixed(f)):0;return a.createElement("div",{key:"".concat(e,"-").concat(r,"-guideline-").concat(i),className:dt("guideline-group",e),style:(l={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},l[b]="".concat(C,"px"),l)},Ja({direction:e,classNames:[dt(r),s],size:"100%",posValue:[0,0],sizeValue:C,zoom:g},a),a.createElement("div",{className:dt("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},S>0?v(S,e):""))}function l1(t,e,r,i){var n=t==="vertical"?0:1,o=t==="vertical"?1:0,s=n?Cr:Sr,a=r[s.start],l=r[s.end];return zh(e,function(u){return u.pos[n]}).map(function(u){var c=[],f=[],h=[];return u.forEach(function(d){var p,v,g=d.element,m=d.elementRect.rect;if(m[s.end]<a)c.push(d);else if(l<m[s.start])f.push(d);else if(m[s.start]<=a&&l<=m[s.end]&&i){var b=d.pos,C={element:g,rect:B(B({},m),(p={},p[s.end]=m[s.start],p))},S={element:g,rect:B(B({},m),(v={},v[s.start]=m[s.end],v))},w=[0,0],y=[0,0];w[n]=b[n],w[o]=b[o],y[n]=b[n],y[o]=b[o]+d.size,c.push({type:t,pos:w,size:0,elementRect:C,direction:"",elementDirection:"end"}),f.push({type:t,pos:y,size:0,elementRect:S,direction:"",elementDirection:"start"})}}),c.sort(function(d,p){return p.pos[o]-d.pos[o]}),f.sort(function(d,p){return d.pos[o]-p.pos[o]}),{total:u,start:c,end:f,inner:h}})}function u1(t,e,r,i,n){var o=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(a){var l=e.filter(function(g){return g.type===a}),u=a==="vertical"?1:0,c=u?0:1,f=l1(a,l,i,o),h=u?Sr:Cr,d=u?Cr:Sr,p=i[h.start],v=i[h.end];f.forEach(function(g){var m=g.total,b=g.start,C=g.end,S=g.inner,w=r[c]+m[0].pos[c]-i[d.start],y=i;b.forEach(function(_){var x=_.elementRect.rect,k=y[h.start]-x[h.end];if(k>0){var E=[0,0];E[u]=r[u]+y[h.start]-p-k,E[c]=w,s.push(Pi(t,a,"dashed",s.length,k,E,_.className,n))}y=x}),y=i,C.forEach(function(_){var x=_.elementRect.rect,k=x[h.start]-y[h.end];if(k>0){var E=[0,0];E[u]=r[u]+y[h.end]-p,E[c]=w,s.push(Pi(t,a,"dashed",s.length,k,E,_.className,n))}y=x}),S.forEach(function(_){var x=_.elementRect.rect,k=p-x[h.start],E=x[h.end]-v,O=[0,0],D=[0,0];O[u]=r[u]-k,O[c]=w,D[u]=r[u]+v-p,D[c]=w,s.push(Pi(t,a,"dashed",s.length,k,O,_.className,n)),s.push(Pi(t,a,"dashed",s.length,E,D,_.className,n))})})}),s}function c1(t,e,r,i,n){var o=[];return["horizontal","vertical"].forEach(function(s){var a=e.filter(function(g){return g.type===s}).slice(0,1),l=s==="vertical"?0:1,u=l?0:1,c=l?Sr:Cr,f=l?Cr:Sr,h=i[c.start],d=i[c.end],p=i[f.start],v=i[f.end];a.forEach(function(g){var m=g.gap,b=g.gapRects,C=Math.max.apply(Math,Q([p],I(b.map(function(y){var _=y.rect;return _[f.start]})),!1)),S=Math.min.apply(Math,Q([v],I(b.map(function(y){var _=y.rect;return _[f.end]})),!1)),w=(C+S)/2;C===S||w===(p+v)/2||b.forEach(function(y){var _=y.rect,x=y.className,k=[r[0],r[1]];if(_[c.end]<h)k[l]+=_[c.end]-h;else if(d<_[c.start])k[l]+=_[c.start]-h-m;else return;k[u]+=w-p,o.push(Pi(t,l?"vertical":"horizontal","gap",o.length,m,k,x,n))})})}),o}function Qs(t){var e,r,i=t.state,n=i.containerClientRect,o=i.hasFixed,s=n.overflow,a=n.scrollHeight,l=n.scrollWidth,u=n.clientHeight,c=n.clientWidth,f=n.clientLeft,h=n.clientTop,d=t.props,p=d.snapGap,v=p===void 0?!0:p,g=d.verticalGuidelines,m=d.horizontalGuidelines,b=d.snapThreshold,C=b===void 0?5:b,S=d.maxSnapElementGuidelineDistance,w=S===void 0?1/0:S,y=d.isDisplayGridGuidelines,_=Ee(De(t.state)),x=_.top,k=_.left,E=_.bottom,O=_.right,D={top:x,left:k,bottom:E,right:O,center:(k+O)/2,middle:(x+E)/2},T=p1(t),R=Q([],I(T),!1),L=((r=(e=i.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&r!==void 0?r:[1,1]).map(function(U){return U*C});v&&R.push.apply(R,Q([],I(f1(t,D,L)),!1));var H=B({},i.snapOffset||{left:0,top:0,bottom:0,right:0});if(R.push.apply(R,Q([],I(d1(t,s?l:c,s?a:u,f,h,H,y)),!1)),o){var W=n.left,N=n.top;H.left+=W,H.top+=N,H.right+=W,H.bottom+=N}return R.push.apply(R,Q([],I(wh(m||!1,g||!1,s?l:c,s?a:u,f,h,H)),!1)),R=R.filter(function(U){var Z=U.element,F=U.elementRect,tt=U.type;if(!Z||!F)return!0;var ot=F.rect;return _h(D,ot,tt,w)}),R}function f1(t,e,r){var i=t.props,n=i.maxSnapElementGuidelineDistance,o=n===void 0?1/0:n,s=i.maxSnapElementGapDistance,a=s===void 0?1/0:s,l=t.state.elementRects,u=[];return[["vertical",Cr,Sr],["horizontal",Sr,Cr]].forEach(function(c){var f=I(c,3),h=f[0],d=f[1],p=f[2],v=e[d.start],g=e[d.end],m=e[d.center],b=e[p.start],C=e[p.end],S={left:r[0],top:r[1]};function w(x){var k=x.rect,E=S[d.start];return k[d.end]<v+E?v-k[d.end]:g-E<k[d.start]?k[d.start]-g:-1}var y=l.filter(function(x){var k=x.rect;return k[p.start]>C||k[p.end]<b?!1:w(x)>0}).sort(function(x,k){return w(x)-w(k)}),_=[];y.forEach(function(x){y.forEach(function(k){if(x!==k){var E=x.rect,O=k.rect,D=E[p.start],T=E[p.end],R=O[p.start],L=O[p.end];D>L||R>T||_.push([x,k])}})}),_.forEach(function(x){var k=I(x,2),E=k[0],O=k[1],D=E.rect,T=O.rect,R=D[d.start],L=D[d.end],H=T[d.start],W=T[d.end],N=S[d.start],U=0,Z=0,F=!1,tt=!1,ot=!1;if(L<=v&&g<=H){if(tt=!0,U=(H-L-(g-v))/2,Z=L+U+(g-v)/2,X(Z-m)>N)return}else if(L<H&&W<v+N){if(F=!0,U=H-L,Z=W+U,X(Z-v)>N)return}else if(L<H&&g-N<R){if(ot=!0,U=H-L,Z=R-U,X(Z-g)>N)return}else return;U&&_h(e,T,h,o)&&(U>a||u.push({type:h,pos:h==="vertical"?[Z,0]:[0,Z],element:O.element,size:0,className:O.className,isStart:F,isCenter:tt,isEnd:ot,gap:U,hide:!0,gapRects:[E,O],direction:"",elementDirection:""}))})}),u}function h1(t,e,r,i){var n,o,s=t.props,a=t.state,l=s.snapGridAll,u=s.snapGridWidth,c=u===void 0?0:u,f=s.snapGridHeight,h=f===void 0?0:f,d=a.snapRenderInfo,p=d&&(((n=d.direction)===null||n===void 0?void 0:n[0])||((o=d.direction)===null||o===void 0?void 0:o[1])),v=t.moveables;if(l&&v&&p&&(c||h)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=t.getRect(),m=g.children,b=d.direction;if(m){var C=b.map(function(w,y){var _=y===0?{snapSize:c,posName:"left",sizeName:"width",clientOffset:i.left-e}:{snapSize:h,posName:"top",sizeName:"height",clientOffset:i.top-r},x=_.snapSize,k=_.posName,E=_.sizeName,O=_.clientOffset;if(!x)return{dir:w,multiple:1,snapSize:x,snapOffset:0};var D=g[E],T=g[k],R=df(m.map(function(F){return[F[k]-T,F[E],D-F[E]-F[k]+T]})).filter(function(F){return F}).sort(function(F,tt){return F-tt}),L=R[0],H=R.map(function(F){return bt(F/L,.1)*x}),W=1,N=bt(D/L,.1);for(W=1;W<=10&&!H.every(function(F){return F*W%1===0});++W);var U=(-w+1)/2,Z=eo(T-O,T-O+D,U,1-U);return{multiple:N*W,dir:w,snapSize:x,snapOffset:Math.round(Z/x)}}),S=C.map(function(w){return w.multiple||1});a.snapThresholdInfo.multiples=S,a.snapThresholdInfo.offset=C.map(function(w){return w.snapOffset}),C.forEach(function(w,y){w.snapSize})}}else a.snapThresholdInfo=null}function d1(t,e,r,i,n,o,s){i===void 0&&(i=0),n===void 0&&(n=0);var a=t.props,l=t.state,u=a.snapGridWidth,c=u===void 0?0:u,f=a.snapGridHeight,h=f===void 0?0:f,d=[],p=o.left,v=o.top,g=[0,0];h1(t,i,n,o);var m=l.snapThresholdInfo,b=c,C=h;if(m&&(c*=m.multiples[0]||1,h*=m.multiples[1]||1,g=m.offset),h){for(var S=function(y){d.push({type:"horizontal",pos:[p,bt(g[1]*C+y-n+v,.1)],className:dt("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},w=0;w<=r*2;w+=h)S(w);for(var w=-h;w>=-r;w-=h)S(w)}if(c){for(var S=function(_){d.push({type:"vertical",pos:[bt(g[0]*b+_-i+p,.1),v],className:dt("grid-guideline"),size:r,hide:!s,direction:"",grid:!0})},w=0;w<=e*2;w+=c)S(w);for(var w=-c;w>=-e;w-=c)S(w)}return d}function _h(t,e,r,i){return r==="horizontal"?X(t.right-e.left)<=i||X(t.left-e.right)<=i||t.left<=e.right&&e.left<=t.right:r==="vertical"?X(t.bottom-e.top)<=i||X(t.top-e.bottom)<=i||t.top<=e.bottom&&e.top<=t.bottom:!0}function p1(t){var e=t.state,r=t.props.elementGuidelines,i=r===void 0?[]:r;if(!i.length)return e.elementRects=[],[];var n=(e.elementRects||[]).filter(function(h){return!h.refresh}),o=i.map(function(h){return Ne(h)&&"element"in h?B(B({},h),{element:Ye(h.element,!0)}):{element:Ye(h,!0)}}).filter(function(h){return h.element}),s=E0(n.map(function(h){return h.element}),o.map(function(h){return h.element})),a=s.maintained,l=s.added,u=[];a.forEach(function(h){var d=I(h,2),p=d[0],v=d[1];u[v]=n[p]}),v1(t,l.map(function(h){return o[h]})).map(function(h,d){u[l[d]]=h}),e.elementRects=u;var c=Ua(t.props.elementSnapDirections),f=[];return u.forEach(function(h){var d=h.element,p=h.top,v=p===void 0?c.top:p,g=h.left,m=g===void 0?c.left:g,b=h.right,C=b===void 0?c.right:b,S=h.bottom,w=S===void 0?c.bottom:S,y=h.center,_=y===void 0?c.center:y,x=h.middle,k=x===void 0?c.middle:x,E=h.className,O=h.rect,D=qa({top:v,right:C,left:m,bottom:w,center:_,middle:k},O),T=D.horizontal,R=D.vertical,L=D.horizontalNames,H=D.verticalNames,W=O.top,N=O.left,U=O.right-N,Z=O.bottom-W,F=[U,Z];R.forEach(function(tt,ot){f.push({type:"vertical",element:d,pos:[bt(tt,.1),W],size:Z,sizes:F,className:E,elementRect:h,elementDirection:Cu[H[ot]]||H[ot],direction:""})}),T.forEach(function(tt,ot){f.push({type:"horizontal",element:d,pos:[N,bt(tt,.1)],size:U,sizes:F,className:E,elementRect:h,elementDirection:Cu[L[ot]]||L[ot],direction:""})})}),f}function Bu(t,e){return t?t.map(function(r){var i=Ne(r)?r:{pos:r},n=i.pos;return ui(n)?i:B(B({},i),{pos:Mt(n,e)})}):[]}function wh(t,e,r,i,n,o,s){n===void 0&&(n=0),o===void 0&&(o=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var a=[],l=s.left,u=s.top,c=s.bottom,f=s.right,h=r+f-l,d=i+c-u;return Bu(t,d).forEach(function(p){a.push({type:"horizontal",pos:[l,bt(p.pos-o+u,.1)],size:h,className:p.className,direction:""})}),Bu(e,h).forEach(function(p){a.push({type:"vertical",pos:[bt(p.pos-n+l,.1),u],size:d,className:p.className,direction:""})}),a}function v1(t,e){if(!e.length)return[];var r=t.props.groupable,i=t.state,n=i.containerClientRect,o=i.rootMatrix,s=i.is3d,a=i.offsetDelta,l=s?4:3,u=I(Gm(o,n,l),2),c=u[0],f=u[1],h=r?0:a[0],d=r?0:a[1];return e.map(function(p){var v=p.element.getBoundingClientRect(),g=v.left-c-h,m=v.top-f-d,b=m+v.height,C=g+v.width,S=I(pi(o,[g,m],l),2),w=S[0],y=S[1],_=I(pi(o,[C,b],l),2),x=_[0],k=_[1];return B(B({},p),{rect:{left:w,right:x,top:y,bottom:k,center:(w+x)/2,middle:(y+k)/2}})})}function zn(t){var e=t.state,r=e.container,i=t.props.snapContainer||r;if(e.snapContainer===i&&e.guidelines&&e.guidelines.length)return!1;var n=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(r!==i){var s=Ye(i,!0);if(s){var a=Wi(s),l=zu(e,[a.left-n.left,a.top-n.top]),u=zu(e,[a.right-n.right,a.bottom-n.bottom]);o.left=bt(l[0],1e-5),o.top=bt(l[1],1e-5),o.right=bt(u[0],1e-5),o.bottom=bt(u[1],1e-5)}}return e.snapContainer=i,e.snapOffset=o,e.guidelines=Qs(t),e.enableSnap=!0,!0}function kh(t,e,r,i,n,o){var s=Yr(t,e,r,o?4:3),a=Kt(s,i);return tl(s,pt(n,a))}function Iu(t){return t?t/X(t):0}function g1(t,e,r,i,n,o){var s=o.fixedDirection,a=Vm(r,s,i),l=Za(t,e,r,i),u=Q(Q([],I(e1(t,e,a,i,n,o)),!1),I(bh(t,l,o)),!1),c=ao(u,0),f=ao(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function m1(t,e,r,i,n,o,s,a,l){var u=Kt(e,s),c=Go(t,a,{vertical:[u[0]],horizontal:[u[1]]}),f=c.horizontal.offset,h=c.vertical.offset;if(bt(h,$s)||bt(f,$s)){var d=I(Xe({datas:l,distX:-h,distY:-f}),2),p=d[0],v=d[1],g=Math.min(n||1/0,r+s[0]*p),m=Math.min(o||1/0,i+s[1]*v);return[g-r,m-i]}return[0,0]}function Eh(t,e,r,i,n,o,s,a){for(var l=De(t.state),u=t.props.keepRatio,c=0,f=0,h=0;h<2;++h){var d=e(c,f),p=g1(t,d,n,u,s,a),v=p.width,g=p.height,m=v.isBound,b=g.isBound,C=v.offset,S=g.offset;if(h===1&&(m||(C=0),b||(S=0)),h===0&&s&&!m&&!b)return[0,0];if(u){var w=X(C)*(r?1/r:1),y=X(S)*(i?1/i:1),_=m&&b?w<y:b||!m&&w<y;_?C=r*S/i:S=i*C/r}c+=C,f+=S}if(!u&&n[0]&&n[1]){var x=i1(t,l,n,o,a),k=x.maxWidth,E=x.maxHeight,O=I(m1(t,e(c,f).map(function(R){return R.map(function(L){return bt(L,$s)})}),r+c,i+f,k,E,n,s,a),2),C=O[0],S=O[1];c+=C,f+=S}return[c,f]}function Fi(t){return t<0&&(t=t%360+360),t%=360,t}function y1(t,e){e=Fi(e);var r=Math.floor(t/360),i=r*360+360-e,n=r*360+e;return X(t-i)<X(t-n)?i:n}function ps(t,e){t=Fi(t),e=Fi(e);var r=Fi(t-e);return Math.min(r,360-r)}function b1(t,e,r,i){var n,o=t.props,s=(n=o[fh])!==null&&n!==void 0?n:5,a=o[hh];if(wi(t,"rotatable")){var l=e.pos1,u=e.pos2,c=e.pos3,f=e.pos4,h=e.origin,d=r*Math.PI/180,p=[l,u,c,f].map(function(S){return pt(S,h)}),v=p.map(function(S){return dn(S,d)}),g=Q(Q([],I(Am(t,p,v,h,r)),!1),I(qm(t,p,v,h,r)),!1);g.sort(function(S,w){return X(S-r)-X(w-r)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:r}}if(a!=null&&a.length&&s){var b=a.slice().sort(function(S,w){return ps(S,i)-ps(w,i)}),C=b[0];if(ps(C,i)<=s)return{isSnap:!0,dist:r+y1(i,C)-i}}return{isSnap:!1,dist:r}}function x1(t,e,r,i,n,o,s){if(!wi(t,"resizable"))return[0,0];var a=s.fixedDirection,l=s.nextAllMatrix,u=t.state,c=u.allMatrix,f=u.is3d;return Eh(t,function(h,d){return kh(l||c,e+h,r+d,a,n,f)},e,r,i,n,o,s)}function C1(t,e,r,i,n){if(!wi(t,"scalable"))return[0,0];var o=n.startOffsetWidth,s=n.startOffsetHeight,a=n.fixedPosition,l=n.fixedDirection,u=n.is3d,c=Eh(t,function(f,h){return kh(xm(n,wt(e,[f/o,h/s])),o,s,l,a,u)},o,s,r,a,i,n);return[c[0]/o,c[1]/s]}function S1(t,e){e.absolutePoses=De(t.state)}function Ou(t){var e=[];return t.forEach(function(r){r.guidelineInfos.forEach(function(i){var n=i.guideline;me(e,function(o){return o.guideline===n})||(n.direction="",e.push({guideline:n,posInfo:r}))})}),e.map(function(r){var i=r.guideline,n=r.posInfo;return B(B({},i),{direction:n.direction})})}function Ru(t,e,r,i,n,o){var s=Xa(zo(t,o),e,r),a=s.vertical,l=s.horizontal,u=Jr();a.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.left=!0),p.direction==="end"&&(u.right=!0),i.push({type:"bounds",pos:p.pos}))}),l.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.top=!0),p.direction==="end"&&(u.bottom=!0),n.push({type:"bounds",pos:p.pos}))});var c=Km(t),f=c.boundMap,h=c.vertical,d=c.horizontal;return h.forEach(function(p){tr(i,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||i.push({type:"bounds",pos:p})}),d.forEach(function(p){tr(n,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),{boundMap:u,innerBoundMap:f}}var _1=il("",["resizable","scalable"]),w1={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",fh,hh,dh,ph,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var r=t.state,i=r.top,n=r.left,o=r.pos1,s=r.pos2,a=r.pos3,l=r.pos4,u=r.snapRenderInfo,c=t.props.snapRenderThreshold,f=c===void 0?1:c;if(!u||!u.render||!wi(t,""))return ti(t,"boundMap",Jr(),function(et){return JSON.stringify(et)}),ti(t,"innerBoundMap",Jr(),function(et){return JSON.stringify(et)}),[];r.guidelines=Qs(t);var h=Math.min(o[0],s[0],a[0],l[0]),d=Math.min(o[1],s[1],a[1],l[1]),p=u.externalPoses||[],v=De(t.state),g=[],m=[],b=[],C=[],S=[],w=Ee(v),y=w.width,_=w.height,x=w.top,k=w.left,E=w.bottom,O=w.right,D={left:k,right:O,top:x,bottom:E,center:(k+O)/2,middle:(x+E)/2},T=p.length>0,R=T?Ee(p):{};if(!u.request){if(u.direction&&S.push(Wm(t,v,u.direction,f,f)),u.snap){var L=Ee(v);u.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),S.push(Su(t,L,f,f))}T&&(u.center&&(R.middle=(R.top+R.bottom)/2,R.center=(R.left+R.right)/2),S.push(Su(t,R,f,f))),S.forEach(function(et){var nt=et.vertical.posInfos,K=et.horizontal.posInfos;g.push.apply(g,Q([],I(nt.filter(function(st){var ft=st.guidelineInfos;return ft.some(function(gt){var Ct=gt.guideline;return!Ct.hide})}).map(function(st){return{type:"snap",pos:st.pos}})),!1)),m.push.apply(m,Q([],I(K.filter(function(st){var ft=st.guidelineInfos;return ft.some(function(gt){var Ct=gt.guideline;return!Ct.hide})}).map(function(st){return{type:"snap",pos:st.pos}})),!1)),b.push.apply(b,Q([],I(Ou(nt)),!1)),C.push.apply(C,Q([],I(Ou(K)),!1))})}var H=Ru(t,[k,O],[x,E],g,m),W=H.boundMap,N=H.innerBoundMap;T&&Ru(t,[R.left,R.right],[R.top,R.bottom],g,m,u.externalBounds);var U=Q(Q([],I(b),!1),I(C),!1),Z=U.filter(function(et){return et.element&&!et.gapRects}),F=U.filter(function(et){return et.gapRects}).sort(function(et,nt){return et.gap-nt.gap});ct(t,"onSnap",{guidelines:U.filter(function(et){var nt=et.element;return!nt}),elements:Z,gaps:F},!0);var tt=ti(t,"boundMap",W,function(et){return JSON.stringify(et)},Jr()),ot=ti(t,"innerBoundMap",N,function(et){return JSON.stringify(et)},Jr());return(W===tt||N===ot)&&ct(t,"onBound",{bounds:W,innerBounds:N},!0),Q(Q(Q(Q(Q(Q([],I(u1(t,Z,[h,d],D,e)),!1),I(c1(t,F,[h,d],D,e)),!1),I(Pu(t,"horizontal",C,[n,i],D,e)),!1),I(Pu(t,"vertical",b,[n,i],D,e)),!1),I(Tu(t,"horizontal",m,h,i,y,0,e)),!1),I(Tu(t,"vertical",g,d,n,_,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},zn(t)},drag:function(t){var e=t.state;zn(t)||(e.guidelines=Qs(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(_1(t,e)||Js(t,e))return!0;if(!e.isRequest&&e.inputEvent)return qt(e.inputEvent.target,dt("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,zn(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,zn(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function k1(t,e){return[t[0]*e[0],t[1]*e[1]]}function dt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xg.apply(void 0,Q([Va],I(t),!1))}function Mh(t){t()}function E1(t){return!t||t==="none"?[1,0,0,1,0,0]:Ne(t)?t:Qi(t)}function Hi(t,e,r){return io(e,Gr(r,e),t,Gr(r.map(function(i){return-i}),e))}function M1(t,e,r){if(e==="%"){var i=Qa(t.ownerSVGElement);return i[r?"width":"height"]/100}return 1}function D1(t){var e=T1(el(t,":before"));return e.map(function(r,i){var n=un(r),o=n.value,s=n.unit;return o*M1(t,s,i===0)})}function uo(t){return t?t.split(" "):["0","0"]}function T1(t){return uo(t.transformOrigin)}function Dh(t){var e=ye(t),r=e("transform");if(r&&r!=="none")return r;if("transform"in t){var i=t.transform,n=i.baseVal;if(!n)return"";var o=n.length;if(!o)return"";for(var s=[],a=function(u){var c=n[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return c[f]}).join(", "),")"))},l=0;l<o;++l)a(l);return s.join(" ")}return""}function en(t,e,r,i,n){var o,s,a=Ia(t)||_r(t),l=!1,u,c;if(!t||r)u=t;else{var f=(o=t==null?void 0:t.assignedSlot)===null||o===void 0?void 0:o.parentElement,h=t.parentElement;f?(l=!0,c=h,u=f):u=h}for(var d=!1,p=t===e||u===e,v="relative",g=1,m=parseFloat(n==null?void 0:n("zoom"))||1,b=n==null?void 0:n("position");u&&u!==a;){e===u&&(p=!0);var C=ye(u),S=u.tagName.toLowerCase(),w=Dh(u),y=C("willChange"),_=parseFloat(C("zoom"))||1;if(v=C("position"),i&&_!==1){g=_;break}if(!r&&i&&m!==1&&b&&b!=="absolute"||S==="svg"||S==="foreignobject"||v!=="static"||w&&w!=="none"||y==="transform")break;var x=(s=t==null?void 0:t.assignedSlot)===null||s===void 0?void 0:s.parentNode,k=u.parentNode;x&&(l=!0,c=k);var E=k;if(E&&E.nodeType===11){u=E.host,d=!0,v=ye(u)("position");break}u=E,v="relative"}return{offsetZoom:g,hasSlot:l,parentSlotElement:c,isCustomElement:d,isStatic:v==="static",isEnd:p||!u||u===a,offsetParent:u||a}}function P1(t,e){var r,i=t.tagName.toLowerCase(),n=t.offsetLeft,o=t.offsetTop,s=ye(t),a=ln(n),l=!a,u,c;return!l&&(i!=="svg"||t.ownerSVGElement)?(u=Xf?D1(t):uo(s("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice(),l=!0,i==="svg"?(n=0,o=0):(r=I(O1(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),n=r[0],o=r[1],u[0]=r[2],u[1]=r[3])):(u=uo(s("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice()),{tagName:i,isSVG:a,hasOffset:l,offset:[n||0,o||0],origin:u,targetOrigin:c}}function Th(t,e){var r=ye(t),i=ye(_r(t)),n=i("position");if(!e&&(!n||n==="static"))return[0,0];var o=parseInt(i("marginLeft"),10),s=parseInt(i("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(s=0),(r("left")!=="auto"||r("right")!=="auto")&&(o=0)),[o,s]}function ta(t){t.forEach(function(e){var r=e.matrix;r&&(e.matrix=Ge(r,3,4))})}function B1(t){for(var e=t.parentElement,r=!1,i=_r(t);e;){var n=el(e).transform;if(n&&n!=="none"){r=!0;break}if(e===i)break;e=e.parentElement}return{fixedContainer:e||i,hasTransform:r}}function Fo(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Gf(t,!e).join(","),")")}function Qa(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var i=t.viewBox,n=i&&i.baseVal||{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width||e,height:n.height||r,clientWidth:e,clientHeight:r}}function I1(t,e){var r,i=Qa(t),n=i.width,o=i.height,s=i.clientWidth,a=i.clientHeight,l=s/n,u=a/o,c=t.preserveAspectRatio.baseVal,f=c.align,h=c.meetOrSlice,d=[0,0],p=[l,u],v=[0,0];if(f!==1){var g=(f-2)%3,m=Math.floor((f-2)/3);d[0]=n*g/2,d[1]=o*m/2;var b=h===2?Math.max(u,l):Math.min(l,u);p[0]=b,p[1]=b,v[0]=(s-n)/2*g,v[1]=(a-o)/2*m}var C=Ga(p,e);return r=I(v,2),C[e*(e-1)]=r[0],C[e*(e-1)+1]=r[1],Hi(C,e,d)}function O1(t,e,r){var i=t.tagName.toLowerCase();if(!t.getBBox||!r&&i==="g")return[0,0,0,0];var n=ye(t),o=n("transform-box")==="fill-box",s=t.getBBox(),a=Qa(t.ownerSVGElement),l=s.x,u=s.y;i==="foreignobject"&&!l&&!u&&(l=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var c=l-a.x,f=u-a.y,h=o?e[0]:e[0]-c,d=o?e[1]:e[1]-f;return[c,f,h,d]}function Nt(t,e,r){return re(t,Nr(e,r),r)}function Yr(t,e,r,i){return[[0,0],[e,0],[0,r],[e,r]].map(function(n){return Nt(t,n,i)})}function Ee(t){var e=t.map(function(u){return u[0]}),r=t.map(function(u){return u[1]}),i=Math.min.apply(Math,Q([],I(e),!1)),n=Math.min.apply(Math,Q([],I(r),!1)),o=Math.max.apply(Math,Q([],I(e),!1)),s=Math.max.apply(Math,Q([],I(r),!1)),a=o-i,l=s-n;return{left:i,top:n,right:o,bottom:s,width:a,height:l}}function Au(t,e,r,i){var n=Yr(t,e,r,i);return Ee(n)}function R1(t,e,r,i,n){var o,s=t.target,a=t.origin,l=e.matrix,u=Bh(s),c=u.offsetWidth,f=u.offsetHeight,h=r.getBoundingClientRect(),d=[0,0];r===_r(r)&&(d=Th(s,!0));for(var p=s.getBoundingClientRect(),v=p.left-h.left+r.scrollLeft-(r.clientLeft||0)+d[0],g=p.top-h.top+r.scrollTop-(r.clientTop||0)+d[1],m=p.width,b=p.height,C=io(i,n,l),S=Au(C,c,f,i),w=S.left,y=S.top,_=S.width,x=S.height,k=Nt(C,a,i),E=pt(k,[w,y]),O=[v+E[0]*m/_,g+E[1]*b/x],D=[0,0],T=0;++T<10;){var R=$e(n,i);o=I(pt(Nt(R,O,i),Nt(R,k,i)),2),D[0]=o[0],D[1]=o[1];var L=io(i,n,Gr(D,i),l),H=Au(L,c,f,i),W=H.left,N=H.top,U=W-v,Z=N-g;if(X(U)<2&&X(Z)<2)break;O[0]-=U,O[1]-=Z}return D.map(function(F){return Math.round(F)})}function A1(t,e,r){var i=t.length===16,n=i?4:3,o=e.map(function(l){return Nt(t,l,n)}),s=r.left,a=r.top;return o.map(function(l){return[l[0]+s,l[1]+a]})}function Me(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ph(t,e){return Me([e[0]-t[0],e[1]-t[1]])}function Bi(t,e,r,i){r===void 0&&(r=1),i===void 0&&(i=Ft(t,e));var n=Ph(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(i,"rad) scaleY(").concat(r,")"),width:"".concat(n,"px")}}function co(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r.length,o=r.reduce(function(a,l){return a+l[0]},0)/n,s=r.reduce(function(a,l){return a+l[1]},0)/n;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Hr(t,e){var r=t[e];return Ne(r)?B(B({},t),r):t}function Bh(t){var e=t&&!ln(t.offsetWidth),r=0,i=0,n=0,o=0,s=0,a=0,l=0,u=0,c=0,f=0,h=0,d=0,p=1/0,v=1/0,g=1/0,m=1/0,b=0,C=0,S=!1;if(t)if(!e&&t.ownerSVGElement){var w=t.getBBox();S=!0,r=w.width,i=w.height,s=r,a=i,l=r,u=i,n=r,o=i}else{var y=ye(t),_=t.style,x=y("boxSizing")==="border-box",k=parseFloat(y("borderLeftWidth"))||0,E=parseFloat(y("borderRightWidth"))||0,O=parseFloat(y("borderTopWidth"))||0,D=parseFloat(y("borderBottomWidth"))||0,T=parseFloat(y("paddingLeft"))||0,R=parseFloat(y("paddingRight"))||0,L=parseFloat(y("paddingTop"))||0,H=parseFloat(y("paddingBottom"))||0,W=T+R,N=L+H,U=k+E,Z=O+D,F=W+U,tt=N+Z,ot=y("position"),et=0,nt=0;if("clientLeft"in t){var K=null;if(ot==="absolute"){var st=en(t,_r(t));K=st.offsetParent}else K=t.parentElement;if(K){var ft=ye(K);et=parseFloat(ft("width")),nt=parseFloat(ft("height"))}}c=Math.max(W,Mt(y("minWidth"),et)||0),f=Math.max(N,Mt(y("minHeight"),nt)||0),p=Mt(y("maxWidth"),et),v=Mt(y("maxHeight"),nt),isNaN(p)&&(p=1/0),isNaN(v)&&(v=1/0),b=Mt(_.width,0)||0,C=Mt(_.height,0)||0,s=parseFloat(y("width"))||0,a=parseFloat(y("height"))||0,l=X(s-b)<1?Os(c,b||s,p):s,u=X(a-C)<1?Os(f,C||a,v):a,r=l,i=u,n=l,o=u,x?(g=p,m=v,h=c,d=f,l=r-F,u=i-tt):(g=p+F,m=v+tt,h=c+F,d=f+tt,r=l+F,i=u+tt),n=l+W,o=u+N}return{svg:S,offsetWidth:r,offsetHeight:i,clientWidth:n,clientHeight:o,contentWidth:l,contentHeight:u,inlineCSSWidth:b,inlineCSSHeight:C,cssWidth:s,cssHeight:a,minWidth:c,minHeight:f,maxWidth:p,maxHeight:v,minOffsetWidth:h,minOffsetHeight:d,maxOffsetWidth:g,maxOffsetHeight:m}}function Ih(t,e){return Ft(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Nn(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Oh(t,e){var r=t===_r(t)||t===Ia(t),i={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return r&&(i.clientHeight=Math.max(e.height,i.clientHeight),i.scrollHeight=Math.max(e.height,i.scrollHeight)),i.overflow=ye(t)("overflow")!=="visible",B(B({},e),i)}function vs(t,e,r,i){var n=t.left,o=t.right,s=t.top,a=t.bottom,l=e.top,u=e.left,c={left:u+n,top:l+s,right:u+o,bottom:l+a,width:o-n,height:a-s};return r&&i?Oh(r,c):c}function Wi(t,e){var r=0,i=0,n=0,o=0;if(t){var s=t.getBoundingClientRect();r=s.left,i=s.top,n=s.width,o=s.height}var a={left:r,top:i,width:n,height:o,right:r+n,bottom:i+o};return t&&e?Oh(t,a):a}function L1(t){var e=t.props,r=e.groupable,i=e.svgOrigin,n=t.getState(),o=n.offsetWidth,s=n.offsetHeight,a=n.svg,l=n.transformOrigin;return!r&&a&&i?ol(i,o,s):l}function Rh(t,e,r,i){var n;if(t)n=t;else if(e)n=[0,0];else{var o=r.target;n=Ah(o,i)}return n}function Ah(t,e){if(t){var r=t.getAttribute("data-rotation")||"",i=t.getAttribute("data-direction");if(e.deg=r,!!i){var n=[0,0];return i.indexOf("w")>-1&&(n[0]=-1),i.indexOf("e")>-1&&(n[0]=1),i.indexOf("n")>-1&&(n[1]=-1),i.indexOf("s")>-1&&(n[1]=1),n}}}function tl(t,e){return[wt(e,t[0]),wt(e,t[1]),wt(e,t[2]),wt(e,t[3])]}function De(t){var e=t.left,r=t.top,i=t.pos1,n=t.pos2,o=t.pos3,s=t.pos4;return tl([i,n,o,s],[e,r])}function ea(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(t)})}function Qr(t,e){var r=e?"controlGesto":"targetGesto",i=t[r];(i==null?void 0:i.isIdle())===!1&&ea(t,e),i==null||i.unset(),t[r]=null}function ue(t,e){if(e){var r=_i(e);r.nextStyle=B(B({},r.nextStyle),t)}return{style:t,cssText:er(t).map(function(i){return"".concat(Un(i,"-"),": ").concat(t[i],";")}).join("")}}function Lh(t,e,r){var i=e.afterTransform||e.transform;return B(B({},ue(B(B(B({},t.style),e.style),{transform:i}),r)),{afterTransform:i,transform:t.transform})}function xt(t,e,r,i){var n=e.datas;n.datas||(n.datas={});var o=B(B({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:n.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){n.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return n.isStartEvent?i||(n.lastEvent=o):n.isStartEvent=!0,o}function be(t,e,r){var i=e.datas,n="isDrag"in r?r.isDrag:e.isDrag;return i.datas||(i.datas={}),B(B({isDrag:n},r),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:i.lastEvent,isDouble:e.isDouble,datas:i.datas,isFirstDrag:!!e.isFirstDrag})}function Ho(t,e,r){t._emitter.on(e,r)}function ct(t,e,r,i,n){return t.triggerEvent(e,r,i,n)}function el(t,e){return mr(t).getComputedStyle(t,e)}function Gn(t,e,r){var i={},n={};return t.filter(function(o){var s=o.name;if(i[s]||!e.some(function(a){return o[a]}))return!1;if(!r&&o.ableGroup){if(n[o.ableGroup])return!1;n[o.ableGroup]=!0}return i[s]=!0,!0})}function ra(t,e){return t===e||t==null&&e==null}function Lu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,i=0;i<r;++i){var n=t[i];if(!ln(n))return n}return t[r]}function zh(t,e){var r=[],i=[];return t.forEach(function(n,o){var s=e(n,o,t),a=i.indexOf(s),l=r[a]||[];a===-1&&(i.push(s),r.push(l)),l.push(n)}),r}function z1(t,e){var r=[],i={};return t.forEach(function(n,o){var s=e(n,o,t),a=i[s];a||(a=[],i[s]=a,r.push(a)),a.push(n)}),r}function Nh(t){return t.reduce(function(e,r){return e.concat(r)},[])}function di(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(r,i){return X(i)-X(r)}),t[0]}function pi(t,e,r){return re($e(t,r),Nr(e,r),r)}function N1(t,e){var r,i=t.is3d,n=t.rootMatrix,o=i?4:3;return r=I(pi(n,[e.distX,e.distY],o),2),e.distX=r[0],e.distY=r[1],e}function Se(t,e,r,i){if(!r[0]&&!r[1])return e;var n=Nt(t,[Iu(r[0]||1),0],i),o=Nt(t,[0,Iu(r[1]||1)],i),s=Nt(t,[r[0]/Me(n),r[1]/Me(o)],i);return wt(e,s)}function Be(t,e,r){return r?"".concat(t/e*100,"%"):"".concat(t,"px")}function fo(t){return X(t)<=ce?0:t}function rl(t){return function(e){if(!e.isDragging(t))return"";var r=Mm(e,t),i=r.deg;return i?dt("view-control-rotation".concat(i)):""}}function il(t,e){return e===void 0&&(e=[t]),function(r,i){if(i.isRequest)return e.some(function(o){return i.requestAble===o})?i.parentDirection:!1;var n=i.inputEvent.target;return qt(n,dt("direction"))&&(!t||qt(n,dt(t)))}}function G1(t,e,r){var i,n=ci(t,{"x%":function(w){return w/100*e.offsetWidth},"y%":function(w){return w/100*e.offsetHeight}}),o=t.slice(0,r<0?void 0:r),s=t.slice(0,r<0?void 0:r+1),a=t[r]||"",l=r<0?[]:t.slice(r),u=r<0?[]:t.slice(r+1),c=n.slice(0,r<0?void 0:r),f=n.slice(0,r<0?void 0:r+1),h=(i=n[r])!==null&&i!==void 0?i:ci([""])[0],d=r<0?[]:n.slice(r),p=r<0?[]:n.slice(r+1),v=h?[h]:[],g=Ur(c),m=Ur(f),b=Ur(d),C=Ur(p),S=Tt(g,b,4);return{transforms:t,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:Ur(v),afterFunctionMatrix:b,afterFunctionMatrix2:C,allFunctionMatrix:S,beforeFunctions:c,beforeFunctions2:f,targetFunction:v[0],afterFunctions:d,afterFunctions2:p,beforeFunctionTexts:o,beforeFunctionTexts2:s,targetFunctionText:a,afterFunctionTexts:l,afterFunctionTexts2:u}}function F1(t){return!t||!Ne(t)||Ci(t)?!1:$t(t)||"length"in t}function Ye(t,e){return t?Ci(t)?t:ge(t)?e?document.querySelector(t):t:Ta(t)?t():mf(t)?t:"current"in t?t.current:t:null}function nl(t,e){if(!t)return[];var r=F1(t)?[].slice.call(t):[t];return r.reduce(function(i,n){return ge(n)&&e?Q(Q([],I(i),!1),I([].slice.call(document.querySelectorAll(n))),!1):($t(n)?i.push(nl(n,e)):i.push(Ye(n,e)),i)},[])}function H1(t,e,r){var i=Ft(t,e)/Math.PI*180;return i=r>=0?i:180-i,i=i>=0?i:360+i,i}function zu(t,e){var r=t.rootMatrix,i=t.is3d,n=i?4:3,o=$e(r,n);return i||(o=Ge(o,3,4)),o[12]=0,o[13]=0,o[14]=0,w0(o,e)}function Gh(t,e,r,i,n){var o=I(t,2),s=o[0],a=o[1],l=0,u=0;if(n&&s&&a){var c=Ft([0,0],e),f=Ft([0,0],i),h=Me(e),d=Math.cos(c-f)*h;if(!i[0])u=d,l=u*r;else if(!i[1])l=d,u=l/r;else{var p=i[0]*s,v=i[1]*a,g=Math.atan2(p+e[0],v+e[1]),m=Math.atan2(p,v);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var b=0;X(g-m)<Math.PI/2||X(g-m)>Math.PI/2*3||(m+=Math.PI),b=g-m,b>Math.PI*2?b-=Math.PI*2:b>Math.PI?b=2*Math.PI-b:b<-Math.PI&&(b=-2*Math.PI-b);var C=Me([p+e[0],v+e[1]])*Math.cos(b);l=C*Math.sin(m)-p,u=C*Math.cos(m)-v,i[0]<0&&(l*=-1),i[1]<0&&(u*=-1)}}else l=i[0]*e[0],u=i[1]*e[1];return[l,u]}function Fh(t,e,r,i){var n,o=r.ratio,s=r.startOffsetWidth,a=r.startOffsetHeight,l=0,u=0,c=i.distX,f=i.distY,h=i.pinchScale,d=i.parentDistance,p=i.parentDist,v=i.parentScale,g=r.fixedDirection,m=[0,1].map(function(_){return X(t[_]-g[_])}),b=[0,1].map(function(_){var x=m[_];return x!==0&&(x=2/x),x});if(p)l=p[0],u=p[1],e&&(l?u||(u=l/o):l=u*o);else if(ui(h))l=(h-1)*s,u=(h-1)*a;else if(v)l=(v[0]-1)*s,u=(v[1]-1)*a;else if(d){var C=s*m[0],S=a*m[1],w=Me([C,S]);l=d/w*C*b[0],u=d/w*S*b[1]}else{var y=Xe({datas:r,distX:c,distY:f});y=b.map(function(_,x){return y[x]*_}),n=I(Gh([s,a],y,o,t,e),2),l=n[0],u=n[1]}return{distWidth:l,distHeight:u}}function ia(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var r=I(t.split(" "),2),i=r[0],n=r[1],o=ia(i||""),s=ia(n||""),a=B(B({},o),s),l={x:"50%",y:"50%"};return a.x&&(l.x=a.x),a.y&&(l.y=a.y),a.value&&(a.x&&!a.y&&(l.y=a.value),!a.x&&a.y&&(l.x=a.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function ol(t,e,r){var i=ia(t,!0),n=i.x,o=i.y;return[Mt(n,e)||0,Mt(o,r)||0]}function W1(t,e,r){var i=t.map(function(o){return pt(o,e)}),n=i.map(function(o){return dn(o,r)});return{prev:i,next:n,result:n.map(function(o){return wt(o,e)})}}function Hh(t,e){return t.length===e.length&&t.every(function(r,i){var n=e[i],o=$t(r),s=$t(n);return o&&s?Hh(r,n):!o&&!s?r===n:!1})}function ti(t,e,r,i,n){var o=t._store,s=o[e];if(!(e in o))if(n!=null)o[e]=n,s=n;else return o[e]=r,r;return s===r||i(s)===i(r)?s:(o[e]=r,r)}function ae(t){return t>=0?1:-1}function X(t){return Math.abs(t)}function gs(t,e){return zg(t).map(function(r){return e(r)})}function Wh(t){return ui(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var V1=gn("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,i=e.targets,n=e.angle,o=e.originalDatas,s=t.props,a=s.pinchable,l=s.ables;if(!a)return!1;var u="onPinch".concat(i?"Group":"","Start"),c="drag".concat(i?"Group":"","ControlStart"),f=(a===!0?t.controlAbles:l.filter(function(v){return a.indexOf(v.name)>-1})).filter(function(v){return v.canPinch&&v[c]}),h=xt(t,e,{});i&&(h.targets=i);var d=ct(t,u,h);r.isPinch=d!==!1,r.ables=f;var p=r.isPinch;return p?(f.forEach(function(v){if(o[v.name]=o[v.name]||{},!!v[c]){var g=B(B({},e),{datas:o[v.name],parentRotate:n,isPinch:!0});v[c](t,g)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p):!1},pinch:function(t,e){var r=e.datas,i=e.scale,n=e.distance,o=e.originalDatas,s=e.inputEvent,a=e.targets,l=e.angle;if(r.isPinch){var u=n*(1-1/i),c=xt(t,e,{});a&&(c.targets=a);var f="onPinch".concat(a?"Group":"");ct(t,f,c);var h=r.ables,d="drag".concat(a?"Group":"","Control");return h.forEach(function(p){p[d]&&p[d](t,B(B({},e),{datas:o[p.name],inputEvent:s,resolveMatrix:!0,pinchScale:i,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(t,e){var r=e.datas,i=e.isPinch,n=e.inputEvent,o=e.targets,s=e.originalDatas;if(r.isPinch){var a="onPinch".concat(o?"Group":"","End"),l=be(t,e,{isDrag:i});o&&(l.targets=o),ct(t,a,l);var u=r.ables,c="drag".concat(o?"Group":"","ControlEnd");return u.forEach(function(f){f[c]&&f[c](t,B(B({},e),{isDrag:i,datas:s[f.name],inputEvent:n,isPinch:!0}))}),i}},pinchGroupStart:function(t,e){return this.pinchStart(t,B(B({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,B(B({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,B(B({},e),{targets:t.props.targets}))}}),Nu=il("scalable"),j1={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:lh("scalable"),dragControlCondition:Nu,viewClassName:rl("scalable"),dragControlStart:function(t,e){var r=e.datas,i=e.isPinch,n=e.inputEvent,o=e.parentDirection,s=Rh(o,i,n,r),a=t.state,l=a.width,u=a.height,c=a.targetTransform,f=a.target,h=a.pos1,d=a.pos2,p=a.pos4;if(!s||!f)return!1;i||jr(t,e),r.datas={},r.transform=c,r.prevDist=[1,1],r.direction=s,r.startOffsetWidth=l,r.startOffsetHeight=u,r.startValue=[1,1];var v=!s[0]&&!s[1]||s[0]||!s[1];Lo(t,e,"scale"),r.isWidth=v;function g(y){r.ratio=y&&isFinite(y)?y:0}r.startPositions=De(t.state);function m(y){var _=xh(r.startPositions,y);r.fixedDirection=_.fixedDirection,r.fixedPosition=_.fixedPosition,r.fixedOffset=_.fixedOffset}r.setFixedDirection=m,g(Je(h,d)/Je(d,p)),m([-s[0],-s[1]]);var b=function(y){r.minScaleSize=y},C=function(y){r.maxScaleSize=y};b([-1/0,-1/0]),C([1/0,1/0]);var S=xt(t,e,B(B({direction:s,set:function(y){r.startValue=y},setRatio:g,setFixedDirection:m,setMinScaleSize:b,setMaxScaleSize:C},Ao(t,e)),{dragStart:se.dragStart(t,new fi().dragStart([0,0],e))})),w=ct(t,"onScaleStart",S);return r.startFixedDirection=r.fixedDirection,w!==!1&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),r.isScale?S:!1},dragControl:function(t,e){Oo(t,e,"scale");var r=e.datas,i=e.parentKeepRatio,n=e.parentFlag,o=e.isPinch,s=e.dragClient,a=e.isRequest,l=e.useSnap,u=e.resolveMatrix,c=r.prevDist,f=r.direction,h=r.startOffsetWidth,d=r.startOffsetHeight,p=r.isScale,v=r.startValue,g=r.isWidth,m=r.ratio;if(!p)return!1;var b=t.props,C=b.throttleScale,S=b.parentMoveable,w=f;!f[0]&&!f[1]&&(w=[1,1]);var y=m&&(i??b.keepRatio)||!1,_=t.state,x=[v[0],v[1]];function k(){var it=Fh(w,y,r,e),ht=it.distWidth,M=it.distHeight,P=h?(h+ht)/h:1,A=d?(d+M)/d:1;v[0]||(x[0]=ht/h),v[1]||(x[1]=M/d);var z=(w[0]||y?P:1)*x[0],G=(w[1]||y?A:1)*x[1];return z===0&&(z=ae(c[0])*Rn),G===0&&(G=ae(c[1])*Rn),[z,G]}var E=k();if(!o&&t.props.groupable){var O=_.snapRenderInfo||{},D=O.direction;$t(D)&&(D[0]||D[1])&&(_.snapRenderInfo={direction:f,request:e.isRequest})}ct(t,"onBeforeScale",xt(t,e,{scale:E,setFixedDirection:function(it){return r.setFixedDirection(it),E=k(),E},startFixedDirection:r.startFixedDirection,setScale:function(it){E=it}},!0));var T=[E[0]/x[0],E[1]/x[1]],R=s,L=[0,0],H=ae(T[0]*T[1]),W=!s&&!n&&o;if(W||u?R=$a(t,r.targetAllTransform,[0,0],[0,0],r):s||(R=r.fixedPosition),o||(L=C1(t,T,f,!l&&a,r)),y){w[0]&&w[1]&&L[0]&&L[1]&&(Math.abs(L[0]*h)>Math.abs(L[1]*d)?L[1]=0:L[0]=0);var N=!L[0]&&!L[1];if(N&&(g?T[0]=bt(T[0]*x[0],C)/x[0]:T[1]=bt(T[1]*x[1],C)/x[1]),w[0]&&!w[1]||L[0]&&!L[1]||N&&g){T[0]+=L[0];var U=h*T[0]*x[0]/m;T[1]=ae(H*T[0])*X(U/d/x[1])}else if(!w[0]&&w[1]||!L[0]&&L[1]||N&&!g){T[1]+=L[1];var Z=d*T[1]*x[1]*m;T[0]=ae(H*T[1])*X(Z/h/x[0])}}else T[0]+=L[0],T[1]+=L[1],L[0]||(T[0]=bt(T[0]*x[0],C)/x[0]),L[1]||(T[1]=bt(T[1]*x[1],C)/x[1]);T[0]===0&&(T[0]=ae(c[0])*Rn),T[1]===0&&(T[1]=ae(c[1])*Rn),E=k1(T,[x[0],x[1]]);var F=[h,d],tt=[h*E[0],d*E[1]];tt=hf(tt,r.minScaleSize,r.maxScaleSize,y?m:!1),E=gs(2,function(it){return F[it]?tt[it]/F[it]:tt[it]}),T=gs(2,function(it){return E[it]/x[it]});var ot=gs(2,function(it){return c[it]?T[it]/c[it]:T[it]}),et="scale(".concat(T.join(", "),")"),nt="scale(".concat(E.join(", "),")"),K=Ro(r,nt,et),st=!v[0]||!v[1],ft=Cm(t,st?nt:et,r.fixedDirection,R,r.fixedOffset,r,st),gt=W?ft:pt(ft,r.prevInverseDist||[0,0]);if(r.prevDist=T,r.prevInverseDist=ft,E[0]===c[0]&&E[1]===c[1]&&gt.every(function(it){return!it})&&!S&&!W)return!1;var Ct=xt(t,e,B({offsetWidth:h,offsetHeight:d,direction:f,scale:E,dist:T,delta:ot,isPinch:!!o},rh(t,K,gt,o,e)));return ct(t,"onScale",Ct),Ct},dragControlEnd:function(t,e){var r=e.datas;if(!r.isScale)return!1;r.isScale=!1;var i=be(t,e,{});return ct(t,"onScaleEnd",i),i},dragGroupControlCondition:Nu,dragGroupControlStart:function(t,e){var r=e.datas,i=this.dragControlStart(t,e);if(!i)return!1;var n=ze(t,"resizable",e);r.moveableScale=t.scale;var o=Qe(t,this,"dragControlStart",e,function(u,c){return so(t,u,r,c)}),s=function(u){i.setFixedDirection(u),o.forEach(function(c,f){c.setFixedDirection(u),so(t,c.moveable,r,n[f])})};r.setFixedDirection=s;var a=B(B({},i),{targets:t.props.targets,events:o,setFixedDirection:s}),l=ct(t,"onScaleGroupStart",a);return r.isScale=l!==!1,r.isScale?a:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){Ho(t,"onBeforeScale",function(c){ct(t,"onBeforeScaleGroup",xt(t,e,B(B({},c),{targets:t.props.targets}),!0))});var i=this.dragControl(t,e);if(i){var n=i.dist,o=r.moveableScale;t.scale=[n[0]*o[0],n[1]*o[1]];var s=t.props.keepRatio,a=r.fixedPosition,l=Qe(t,this,"dragControl",e,function(c,f){var h=I(re(pn(t.rotation/180*Math.PI,3),[f.datas.originalX*n[0],f.datas.originalY*n[1],1],3),2),d=h[0],p=h[1];return B(B({},f),{parentDist:null,parentScale:n,parentKeepRatio:s,dragClient:wt(a,[d,p])})}),u=B({targets:t.props.targets,events:l},i);return ct(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,i=e.datas;if(i.isScale){this.dragControlEnd(t,e);var n=Qe(t,this,"dragControlEnd",e),o=be(t,e,{targets:t.props.targets,events:n});return ct(t,"onScaleGroupEnd",o),r}},request:function(){var t={},e=0,r=0,i=!1;return{isControl:!0,requestStart:function(n){return i=n.useSnap,{datas:t,parentDirection:n.direction||[1,1],useSnap:i}},request:function(n){return e+=n.deltaWidth,r+=n.deltaHeight,{datas:t,parentDist:[e,r],parentKeepRatio:n.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}}};function ar(t,e){return t.map(function(r,i){return eo(r,e[i],1,2)})}function Gu(t,e,r){var i=Ft(t,e),n=Ft(t,r),o=n-i;return o>=0?o:o+2*Math.PI}function Y1(t,e){var r=Gu(t[0],t[1],t[2]),i=Gu(e[0],e[1],e[2]),n=Math.PI;return!(r>=n&&i<=n||r<=n&&i>=n)}var $1={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:rl("warpable"),render:function(t,e){var r=t.props,i=r.resizable,n=r.scalable,o=r.warpable,s=r.zoom;if(i||n||!o)return[];var a=t.state,l=a.pos1,u=a.pos2,c=a.pos3,f=a.pos4,h=ar(l,u),d=ar(u,l),p=ar(l,c),v=ar(c,l),g=ar(c,f),m=ar(f,c),b=ar(u,f),C=ar(f,u);return Q([e.createElement("div",{className:dt("line"),key:"middeLine1",style:Bi(h,g,s)}),e.createElement("div",{className:dt("line"),key:"middeLine2",style:Bi(d,m,s)}),e.createElement("div",{className:dt("line"),key:"middeLine3",style:Bi(p,b,s)}),e.createElement("div",{className:dt("line"),key:"middeLine4",style:Bi(v,C,s)})],I(uh(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var r=e.inputEvent.target;return qt(r,dt("direction"))&&qt(r,dt("warpable"))},dragControlStart:function(t,e){var r=e.datas,i=e.inputEvent,n=t.props.target,o=i.target,s=Ah(o,r);if(!s||!n)return!1;var a=t.state,l=a.transformOrigin,u=a.is3d,c=a.targetTransform,f=a.targetMatrix,h=a.width,d=a.height,p=a.left,v=a.top;r.datas={},r.targetTransform=c,r.warpTargetMatrix=u?f:Ge(f,3,4),r.targetInverseMatrix=zf($e(r.warpTargetMatrix,4),3,4),r.direction=s,r.left=p,r.top=v,r.poses=[[0,0],[h,0],[0,d],[h,d]].map(function(b){return pt(b,l)}),r.nextPoses=r.poses.map(function(b){var C=I(b,2),S=C[0],w=C[1];return re(r.warpTargetMatrix,[S,w,0,1],4)}),r.startValue=Ot(4),r.prevMatrix=Ot(4),r.absolutePoses=De(a),r.posIndexes=eh(s),jr(t,e),Lo(t,e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:s};var g=xt(t,e,B({set:function(b){r.startValue=b}},Ao(t,e))),m=ct(t,"onWarpStart",g);return m!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,i=e.isRequest,n=e.distX,o=e.distY,s=r.targetInverseMatrix,a=r.prevMatrix,l=r.isWarp,u=r.startValue,c=r.poses,f=r.posIndexes,h=r.absolutePoses;if(!l)return!1;if(Oo(t,e,"matrix3d"),wi(t,"warpable")){var d=f.map(function(k){return h[k]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=Go(t,i,{horizontal:d.map(function(k){return k[1]+o}),vertical:d.map(function(k){return k[0]+n})}),v=p.horizontal,g=p.vertical;o-=v.offset,n-=g.offset}var m=Xe({datas:r,distX:n,distY:o},!0),b=r.nextPoses.slice();if(f.forEach(function(k){b[k]=wt(b[k],m)}),!fm.every(function(k){return Y1(k.map(function(E){return c[E]}),k.map(function(E){return b[E]}))}))return!1;var C=Fa(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!C.length)return!1;var S=Tt(s,C,4),w=Qf(r,S,!0),y=Tt($e(a,4),w,4);r.prevMatrix=w;var _=Tt(u,w,4),x=Ro(r,"matrix3d(".concat(_.join(", "),")"),"matrix3d(".concat(w.join(", "),")"));return Ya(e,x),ct(t,"onWarp",xt(t,e,B({delta:y,matrix:_,dist:w,multiply:Tt,transform:x},ue({transform:x},e)))),!0},dragControlEnd:function(t,e){var r=e.datas,i=e.isDrag;return r.isWarp?(r.isWarp=!1,ct(t,"onWarpEnd",be(t,e,{})),i):!1}},X1=dt("area-pieces"),Fn=dt("area-piece"),Vh=dt("avoid"),U1=dt("view-dragging");function ms(t){var e=t.areaElement;if(e){var r=t.state,i=r.width,n=r.height;gf(e,Vh),e.style.cssText+="left: 0px; top: 0px; width: ".concat(i,"px; height: ").concat(n,"px")}}function Fu(t){return t.createElement("div",{key:"area_pieces",className:X1},t.createElement("div",{className:Fn}),t.createElement("div",{className:Fn}),t.createElement("div",{className:Fn}),t.createElement("div",{className:Fn}))}var jh={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var r=t.props,i=r.target,n=r.dragArea,o=r.groupable,s=r.passDragArea,a=t.getState(),l=a.width,u=a.height,c=a.renderPoses,f=s?dt("area","pass"):dt("area");if(o)return[e.createElement("div",{key:"area",ref:Ze(t,"areaElement"),className:f}),Fu(e)];if(!i||!n)return[];var h=Fa([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),d=h.length?Fo(h,!0):"none";return[e.createElement("div",{key:"area",ref:Ze(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:d}}),Fu(e)]},dragStart:function(t,e){var r=e.datas,i=e.clientX,n=e.clientY,o=e.inputEvent;if(!o)return!1;r.isDragArea=!1;var s=t.areaElement,a=t.state,l=a.moveableClientRect,u=a.renderPoses,c=a.rootMatrix,f=a.is3d,h=l.left,d=l.top,p=Ee(u),v=p.left,g=p.top,m=p.width,b=p.height,C=f?4:3,S=I(pi(c,[i-h,n-d],C),2),w=S[0],y=S[1];w-=v,y-=g;var _=[{left:v,top:g,width:m,height:y-10},{left:v,top:g,width:w-10,height:b},{left:v,top:g+y+10,width:m,height:b-y-10},{left:v+w+10,top:g,width:m-w-10,height:b}],x=[].slice.call(s.nextElementSibling.children);_.forEach(function(k,E){x[E].style.cssText="left: ".concat(k.left,"px;top: ").concat(k.top,"px; width: ").concat(k.width,"px; height: ").concat(k.height,"px;")}),vf(s,Vh),a.disableNativeEvent=!0},drag:function(t,e){var r=e.datas,i=e.inputEvent;if(this.enableNativeEvent(t),!i)return!1;r.isDragArea||(r.isDragArea=!0,ms(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var r=e.inputEvent,i=e.datas;if(!r)return!1;i.isDragArea||ms(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){ms(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&ff(function(){e.disableNativeEvent=!1})}},q1=gn("origin",{props:["origin","svgOrigin"],render:function(t,e){var r=t.props,i=r.zoom,n=r.svgOrigin,o=r.groupable,s=t.getState(),a=s.beforeOrigin,l=s.rotation,u=s.svg,c=s.allMatrix,f=s.is3d,h=s.left,d=s.top,p=s.offsetWidth,v=s.offsetHeight,g;if(!o&&u&&n){var m=I(ol(n,p,v),2),b=m[0],C=m[1],S=f?4:3,w=Nt(c,[b,C],S);g=co(l,i,pt(w,[h,d]))}else g=co(l,i,a);return[e.createElement("div",{className:dt("control","origin"),style:g,key:"beforeOrigin"})]}});function K1(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Z1={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var r=t.props,i=r.scrollContainer,n=i===void 0?t.getContainer():i,o=r.scrollOptions,s=new P0,a=Ye(n,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var l=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(c){var f=c.container,h=c.direction,d=xt(t,e,{scrollContainer:f,direction:h}),p=u?"onScrollGroup":"onScroll";u&&(d.targets=u),ct(t,p,d)}).on("move",function(c){var f=c.offsetX,h=c.offsetY,d=c.inputEvent;t[l].scrollBy(f,h,d.inputEvent,!1)}).on("scrollDrag",function(c){var f=c.next;f(t[l].getCurrentEvent())}),s.dragStart(e,B({container:a},o))},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var i=t.props,n=i.scrollContainer,o=n===void 0?t.getContainer():n,s=i.scrollThreshold,a=s===void 0?0:s,l=i.scrollThrottleTime,u=l===void 0?0:l,c=i.getScrollPosition,f=c===void 0?K1:c,h=i.scrollOptions;return r.drag(e,B({container:o,threshold:a,throttleTime:u,getScrollPosition:function(d){return f({scrollContainer:d.container,direction:d.direction})}},h)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,B(B({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,B(B({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,B(B({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,B(B({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,B(B({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,B(B({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,B(B({},e),{targets:t.props.targets}))},unset:function(t){var e,r=t.state;(e=r.dragScroll)===null||e===void 0||e.dragEnd(),r.dragScroll=null}},Yh={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},J1=gn("padding",{props:["padding"],render:function(t,e){var r=t.props;if(r.dragArea)return[];var i=Wh(r.padding||{}),n=i.left,o=i.top,s=i.right,a=i.bottom,l=t.getState(),u=l.renderPoses,c=l.pos1,f=l.pos2,h=l.pos3,d=l.pos4,p=[c,f,h,d],v=[];return n>0&&v.push([0,2]),o>0&&v.push([0,1]),s>0&&v.push([1,3]),a>0&&v.push([2,3]),v.map(function(g,m){var b=I(g,2),C=b[0],S=b[1],w=p[C],y=p[S],_=u[C],x=u[S],k=Fa([0,0],[100,0],[0,100],[100,100],w,y,_,x);if(k.length)return e.createElement("div",{key:"padding".concat(m),className:dt("padding"),style:{transform:Fo(k,!0)}})})}}),Hu=["nw","ne","se","sw"];function Hn(t,e){var r=t[0]+t[1],i=r>e?e/r:1;return t[0]*=i,t[1]=e-t[1]*i,t}var Q1=[1,2,5,6],ty=[0,3,4,7],Or=[1,-1,-1,1],Rr=[1,1,-1,-1];function sl(t,e,r,i,n,o,s,a){n===void 0&&(n=0),o===void 0&&(o=0),s===void 0&&(s=r),a===void 0&&(a=i);var l=[],u=!1,c=t.filter(function(h){return!h.virtual}),f=c.map(function(h){var d=h.horizontal,p=h.vertical,v=h.pos;if(p&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,p===1?v[1]-o:a-v[1]);return l.push(Be(g,i,e)),g}else{var g=Math.max(0,d===1?v[0]-n:s-v[0]);return l.push(Be(g,r,e)),g}});return{radiusPoses:c,styles:l,raws:f}}function $h(t){for(var e=[0,0],r=[0,0],i=t.length,n=0;n<i;++n){var o=t[n];o.sub&&(o.horizontal&&(e[1]===0&&(e[0]=n),e[1]=n-e[0]+1,r[0]=n+1),o.vertical&&(r[1]===0&&(r[0]=n),r[1]=n-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function Xh(t,e,r,i,n,o,s){var a,l,u,c;o===void 0&&(o=[0,0]),s===void 0&&(s=!1);var f=t.indexOf("/"),h=(f>-1?t.slice(0,f):t).length,d=t.slice(0,h),p=t.slice(h+1),v=d.length,g=p.length,m=g>0,b=I(d,4),C=b[0],S=C===void 0?"0px":C,w=b[1],y=w===void 0?S:w,_=b[2],x=_===void 0?S:_,k=b[3],E=k===void 0?y:k,O=I(p,4),D=O[0],T=D===void 0?S:D,R=O[1],L=R===void 0?m?T:y:R,H=O[2],W=H===void 0?m?T:x:H,N=O[3],U=N===void 0?m?L:E:N,Z=[S,y,x,E].map(function(K){return Mt(K,e)}),F=[T,L,W,U].map(function(K){return Mt(K,r)}),tt=Z.slice(),ot=F.slice();a=I(Hn([tt[0],tt[1]],e),2),tt[0]=a[0],tt[1]=a[1],l=I(Hn([tt[3],tt[2]],e),2),tt[3]=l[0],tt[2]=l[1],u=I(Hn([ot[0],ot[3]],r),2),ot[0]=u[0],ot[3]=u[1],c=I(Hn([ot[1],ot[2]],r),2),ot[1]=c[0],ot[2]=c[1];var et=s?tt:tt.slice(0,Math.max(o[0],v)),nt=s?ot:ot.slice(0,Math.max(o[1],g));return Q(Q([],I(et.map(function(K,st){var ft=Hu[st];return{virtual:st>=v,horizontal:Or[st],vertical:0,pos:[i+K,n+(Rr[st]===-1?r:0)],sub:!0,raw:Z[st],direction:ft}})),!1),I(nt.map(function(K,st){var ft=Hu[st];return{virtual:st>=g,horizontal:0,vertical:Rr[st],pos:[i+(Or[st]===-1?e:0),n+K],sub:!0,raw:F[st],direction:ft}})),!1)}function ey(t,e,r,i,n){n===void 0&&(n=e.length);var o=$h(t.slice(i)),s=o.horizontalRange,a=o.verticalRange,l=r-i,u=0;if(l===0)u=n;else if(l>0&&l<s[1])u=s[1]-l;else if(l>=a[0])u=a[0]+a[1]-l;else return;t.splice(r,u),e.splice(r,u)}function ry(t,e,r,i,n,o,s,a,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var f=$h(t.slice(r)),h=f.horizontalRange,d=f.verticalRange;if(i>-1)for(var p=Or[i]===1?o-u:a-o,v=h[1];v<=i;++v){var g=Rr[v]===1?c:l,m=0;if(i===v?m=o:v===0?m=u+p:Or[v]===-1&&(m=a-(e[r][0]-u)),t.splice(r+v,0,{horizontal:Or[v],vertical:0,pos:[m,g]}),e.splice(r+v,0,[m,g]),v===0)break}else if(n>-1){var b=Rr[n]===1?s-c:l-s;if(h[1]===0&&d[1]===0){var C=[u+b,c];t.push({horizontal:Or[0],vertical:0,pos:C}),e.push(C)}for(var S=d[0],v=d[1];v<=n;++v){var m=Or[v]===1?u:a,g=0;if(n===v?g=s:v===0?g=c+b:Rr[v]===1?g=e[r+S][1]:Rr[v]===-1&&(g=l-(e[r+S][1]-c)),t.push({horizontal:0,vertical:Rr[v],pos:[m,g]}),e.push([m,g]),v===0)break}}}function iy(t,e){e===void 0&&(e=t.map(function(n){return n.raw}));var r=t.map(function(n,o){return n.horizontal?e[o]:null}).filter(function(n){return n!=null}),i=t.map(function(n,o){return n.vertical?e[o]:null}).filter(function(n){return n!=null});return{horizontals:r,verticals:i}}var ny=[[0,-1,"n"],[1,0,"e"]],oy=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function al(t,e,r){var i=t.props.clipRelative,n=t.state,o=n.width,s=n.height,a=e,l=a.type,u=a.poses,c=l==="rect",f=l==="circle";if(l==="polygon")return r.map(function(y){return"".concat(Be(y[0],o,i)," ").concat(Be(y[1],s,i))});if(c||l==="inset"){var h=r[1][1],d=r[3][0],p=r[7][0],v=r[5][1];if(c)return[h,d,v,p].map(function(y){return"".concat(y,"px")});var g=[h,o-d,s-v,p].map(function(y,_){return Be(y,_%2?o:s,i)});if(r.length>8){var m=I(pt(r[4],r[0]),2),b=m[0],C=m[1];g.push.apply(g,Q(["round"],I(sl(u.slice(8).map(function(y,_){return B(B({},y),{pos:r[_]})}),i,b,C,p,h,d,v).styles),!1))}return g}else if(f||l==="ellipse"){var S=r[0],w=Be(X(r[1][1]-S[1]),f?Math.sqrt((o*o+s*s)/2):s,i),g=f?[w]:[Be(X(r[2][0]-S[0]),o,i),w];return g.push("at",Be(S[0],o,i),Be(S[1],s,i)),g}}function ho(t,e,r,i){var n=[i,(i+e)/2,e],o=[t,(t+r)/2,r];return oy.map(function(s){var a=I(s,3),l=a[0],u=a[1],c=a[2],f=n[l+1],h=o[u+1];return{vertical:X(u),horizontal:X(l),direction:c,pos:[f,h]}})}function Uh(t){var e=[1/0,-1/0],r=[1/0,-1/0];return t.forEach(function(i){var n=i.pos;e[0]=Math.min(e[0],n[0]),e[1]=Math.max(e[1],n[0]),r[0]=Math.min(r[0],n[1]),r[1]=Math.max(r[1],n[1])}),[X(e[1]-e[0]),X(r[1]-r[0])]}function Wu(t,e,r,i,n){var o,s,a,l,u,c,f,h,d;if(t){var p=n;if(!p){var v=ye(t),g=v("clipPath");p=g!=="none"?g:v("clip")}if(!((!p||p==="none"||p==="auto")&&(p=i,!p))){var m=cf(p),b=m.prefix,C=b===void 0?p:b,S=m.value,w=S===void 0?"":S,y=C==="circle",_=" ";if(C==="polygon"){var x=Ar(w||"0% 0%, 100% 0%, 100% 100%, 0% 100%");_=",";var k=x.map(function(q){var $=I(q.split(" "),2),rt=$[0],lt=$[1];return{vertical:1,horizontal:1,pos:[Mt(rt,e),Mt(lt,r)]}}),E=Fr(k.map(function(q){return q.pos}));return{type:C,clipText:p,poses:k,splitter:_,left:E.minX,right:E.maxX,top:E.minY,bottom:E.maxY}}else if(y||C==="ellipse"){var O="",D="",T=0,R=0,x=xr(w);if(y){var L="";o=I(x,4),s=o[0],L=s===void 0?"50%":s,a=o[2],O=a===void 0?"50%":a,l=o[3],D=l===void 0?"50%":l,T=Mt(L,Math.sqrt((e*e+r*r)/2)),R=T}else{var H="",W="";u=I(x,5),c=u[0],H=c===void 0?"50%":c,f=u[1],W=f===void 0?"50%":f,h=u[3],O=h===void 0?"50%":h,d=u[4],D=d===void 0?"50%":d,T=Mt(H,e),R=Mt(W,r)}var N=[Mt(O,e),Mt(D,r)],k=Q([{vertical:1,horizontal:1,pos:N,direction:"nesw"}],I(ny.slice(0,y?1:2).map(function(rt){return{vertical:X(rt[1]),horizontal:rt[0],direction:rt[2],sub:!0,pos:[N[0]+rt[0]*T,N[1]+rt[1]*R]}})),!1);return{type:C,clipText:p,radiusX:T,radiusY:R,left:N[0]-T,top:N[1]-R,right:N[0]+T,bottom:N[1]+R,poses:k,splitter:_}}else if(C==="inset"){var x=xr(w||"0 0 0 0"),U=x.indexOf("round"),Z=(U>-1?x.slice(0,U):x).length,F=x.slice(Z+1),tt=I(x.slice(0,Z),4),ot=tt[0],et=tt[1],nt=et===void 0?ot:et,K=tt[2],st=K===void 0?ot:K,ft=tt[3],gt=ft===void 0?nt:ft,Ct=I([ot,st].map(function(rt){return Mt(rt,r)}),2),it=Ct[0],ht=Ct[1],M=I([gt,nt].map(function(rt){return Mt(rt,e)}),2),P=M[0],A=M[1],z=e-A,G=r-ht,Y=Xh(F,z-P,G-it,P,it),k=Q(Q([],I(ho(it,z,G,P)),!1),I(Y),!1);return{type:"inset",clipText:p,poses:k,top:it,left:P,right:z,bottom:G,radius:F,splitter:_}}else if(C==="rect"){var x=Ar(w||"0px, ".concat(e,"px, ").concat(r,"px, 0px"));_=",";var j=I(x.map(function(vt){var yt=un(vt).value;return yt}),4),V=j[0],A=j[1],ht=j[2],P=j[3],k=ho(V,A,ht,P);return{type:"rect",clipText:p,poses:k,top:V,right:A,bottom:ht,left:P,values:x,splitter:_}}}}}function sy(t,e,r,i,n){var o=t[e],s=o.direction,a=o.sub,l=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(i&&e<8){var c=u.filter(function(T){return T==="w"||T==="e"}),f=u.filter(function(T){return T==="n"||T==="s"}),h=c[0],d=f[0];l[e]=r;var p=I(Uh(t),2),v=p[0],g=p[1],m=v&&g?v/g:0;if(m&&n){var b=(e+4)%8,C=t[b].pos,S=[0,0];s.indexOf("w")>-1?S[0]=-1:s.indexOf("e")>-1&&(S[0]=1),s.indexOf("n")>-1?S[1]=-1:s.indexOf("s")>-1&&(S[1]=1);var w=Gh([v,g],r,m,S,!0),y=v+w[0],_=g+w[1],x=C[1],k=C[1],E=C[0],O=C[0];S[0]===-1?E=O-y:S[0]===1?O=E+y:(E=E-y/2,O=O+y/2),S[1]===-1?x=k-_:(S[1]===1||(x=k-_/2),k=x+_);var D=ho(x,O,k,E);t.forEach(function(T,R){l[R][0]=D[R].pos[0]-T.pos[0],l[R][1]=D[R].pos[1]-T.pos[1]})}else t.forEach(function(T,R){var L=T.direction;L&&(L.indexOf(h)>-1&&(l[R][0]=r[0]),L.indexOf(d)>-1&&(l[R][1]=r[1]))}),h&&(l[1][0]=r[0]/2,l[5][0]=r[0]/2),d&&(l[3][1]=r[1]/2,l[7][1]=r[1]/2)}else s&&!a?u.forEach(function(T){var R=T==="n"||T==="s";t.forEach(function(L,H){var W=L.direction,N=L.horizontal,U=L.vertical;!W||W.indexOf(T)===-1||(l[H]=[R||!N?0:r[0],!R||!U?0:r[1]])})}):l[e]=r;return l}function ay(t,e){var r=I(Jf(t,e),2),i=r[0],n=r[1],o=e.datas,s=o.clipPath,a=o.clipIndex,l=s,u=l.type,c=l.poses,f=l.splitter,h=c.map(function(b){return b.pos});if(u==="polygon")h.splice(a,0,[i,n]);else if(u==="inset"){var d=Q1.indexOf(a),p=ty.indexOf(a),v=c.length;if(ry(c,h,8,d,p,i,n,h[4][0],h[4][1],h[0][0],h[0][1]),v===c.length)return}else return;var g=al(t,s,h),m="".concat(u,"(").concat(g.join(f),")");ct(t,"onClip",xt(t,e,B({clipEventType:"added",clipType:u,poses:h,clipStyles:g,clipStyle:m,distX:0,distY:0},ue({clipPath:m},e))))}function ly(t,e){var r=e.datas,i=r.clipPath,n=r.clipIndex,o=i,s=o.type,a=o.poses,l=o.splitter,u=a.map(function(d){return d.pos}),c=u.length;if(s==="polygon")a.splice(n,1),u.splice(n,1);else if(s==="inset"){if(n<8||(ey(a,u,n,8,c),c===a.length))return}else return;var f=al(t,i,u),h="".concat(s,"(").concat(f.join(l),")");ct(t,"onClip",xt(t,e,B({clipEventType:"removed",clipType:s,poses:u,clipStyles:f,clipStyle:h,distX:0,distY:0},ue({clipPath:h},e))))}var uy={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var r=t.props,i=r.customClipPath,n=r.defaultClipPath,o=r.clipArea,s=r.zoom,a=r.groupable,l=t.getState(),u=l.target,c=l.width,f=l.height,h=l.allMatrix,d=l.is3d,p=l.left,v=l.top,g=l.pos1,m=l.pos2,b=l.pos3,C=l.pos4,S=l.clipPathState,w=l.snapBoundInfos,y=l.rotation;if(!u||a)return[];var _=Wu(u,c,f,n||"inset",S||i);if(!_)return[];var x=d?4:3,k=_.type,E=_.poses,O=E.map(function(A){var z=Nt(h,A.pos,x);return[z[0]-p,z[1]-v]}),D=[],T=[],R=k==="rect",L=k==="inset",H=k==="polygon";if(R||L||H){var W=L?O.slice(0,8):O;T=W.map(function(A,z){var G=z===0?W[W.length-1]:W[z-1],Y=Ft(G,A),j=Ph(G,A);return e.createElement("div",{key:"clipLine".concat(z),className:dt("line","clip-line","snap-control"),"data-clip-index":z,style:{width:"".concat(j,"px"),transform:"translate(".concat(G[0],"px, ").concat(G[1],"px) rotate(").concat(Y,"rad) scaleY(").concat(s,")")}})})}if(D=O.map(function(A,z){return e.createElement("div",{key:"clipControl".concat(z),className:dt("control","clip-control","snap-control"),"data-clip-index":z,style:{transform:"translate(".concat(A[0],"px, ").concat(A[1],"px) rotate(").concat(y,"rad) scale(").concat(s,")")}})}),L&&D.push.apply(D,Q([],I(O.slice(8).map(function(A,z){return e.createElement("div",{key:"clipRadiusControl".concat(z),className:dt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+z,style:{transform:"translate(".concat(A[0],"px, ").concat(A[1],"px) rotate(").concat(y,"rad) scale(").concat(s,")")}})})),!1)),k==="circle"||k==="ellipse"){var N=_.left,U=_.top,Z=_.radiusX,F=_.radiusY,tt=I(pt(Nt(h,[N,U],x),Nt(h,[0,0],x)),2),ot=tt[0],et=tt[1],nt="none";if(!o){for(var K=Math.max(10,Z/5,F/5),st=[],ft=0;ft<=K;++ft){var gt=Math.PI*2/K*ft;st.push([Z+(Z-s)*Math.cos(gt),F+(F-s)*Math.sin(gt)])}st.push([Z,-2]),st.push([-2,-2]),st.push([-2,F*2+2]),st.push([Z*2+2,F*2+2]),st.push([Z*2+2,-2]),st.push([Z,-2]),nt="polygon(".concat(st.map(function(A){return"".concat(A[0],"px ").concat(A[1],"px")}).join(", "),")")}D.push(e.createElement("div",{key:"clipEllipse",className:dt("clip-ellipse","snap-control"),style:{width:"".concat(Z*2,"px"),height:"".concat(F*2,"px"),clipPath:nt,transform:"translate(".concat(-p+ot,"px, ").concat(-v+et,"px) ").concat(Fo(h))}}))}if(o){var Ct=Ee(Q([g,m,b,C],I(O),!1)),it=Ct.width,ht=Ct.height,M=Ct.left,P=Ct.top;if(H||R||L){var st=L?O.slice(0,8):O;D.push(e.createElement("div",{key:"clipArea",className:dt("clip-area","snap-control"),style:{width:"".concat(it,"px"),height:"".concat(ht,"px"),transform:"translate(".concat(M,"px, ").concat(P,"px)"),clipPath:"polygon(".concat(st.map(function(z){return"".concat(z[0]-M,"px ").concat(z[1]-P,"px")}).join(", "),")")}}))}}return w&&["vertical","horizontal"].forEach(function(A){var z=w[A],G=A==="horizontal";z.isSnap&&T.push.apply(T,Q([],I(z.snap.posInfos.map(function(Y,j){var V=Y.pos,q=pt(Nt(h,G?[0,V]:[V,0],x),[p,v]),$=pt(Nt(h,G?[c,V]:[V,f],x),[p,v]);return tn(e,"",q,$,s,"clip".concat(A,"snap").concat(j),"guideline")})),!1)),z.isBound&&T.push.apply(T,Q([],I(z.bounds.map(function(Y,j){var V=Y.pos,q=pt(Nt(h,G?[0,V]:[V,0],x),[p,v]),$=pt(Nt(h,G?[c,V]:[V,f],x),[p,v]);return tn(e,"",q,$,s,"clip".concat(A,"bounds").concat(j),"guideline","bounds","bold")})),!1))}),Q(Q([],I(D),!1),I(T),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var r=t.props,i=r.dragWithClip,n=i===void 0?!0:i;return n?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,B(B({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,i=t.props,n=i.defaultClipPath,o=i.customClipPath,s=r.target,a=r.width,l=r.height,u=e.inputEvent?e.inputEvent.target:null,c=u&&u.getAttribute("class")||"",f=e.datas,h=Wu(s,a,l,n||"inset",o);if(!h)return!1;var d=h.clipText,p=h.type,v=h.poses,g=ct(t,"onClipStart",xt(t,e,{clipType:p,clipStyle:d,poses:v.map(function(m){return m.pos})}));return g===!1?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,f.clipPath=h,f.isClipStart=!0,r.clipPathState=d,jr(t,e),!0)},dragControl:function(t,e){var r,i,n,o=e.datas,s=e.originalDatas,a=e.isDragTarget;if(!o.isClipStart)return!1;var l=o,u=l.isControl,c=l.isLine,f=l.isArea,h=l.clipIndex,d=l.clipPath;if(!d)return!1;var p=Hr(t.props,"clippable"),v=p.keepRatio,g=0,m=0,b=s.draggable,C=Xe(e);a&&b?(r=I(b.prevBeforeDist,2),g=r[0],m=r[1]):(i=I(C,2),g=i[0],m=i[1]);var S=[g,m],w=t.state,y=w.width,_=w.height,x=!f&&!u&&!c,k=d.type,E=d.poses,O=d.splitter,D=E.map(function(Bt){return Bt.pos});x&&(g=-g,m=-m);var T=!u||E[h].direction==="nesw",R=k==="inset"||k==="rect",L=E.map(function(){return[0,0]});if(u&&!T){var H=E[h],W=H.horizontal,N=H.vertical,U=[g*X(W),m*X(N)];L=sy(E,h,U,R,v)}else T&&(L=D.map(function(){return[g,m]}));var Z=D.map(function(Bt,ne){return wt(Bt,L[ne])}),F=Q([],I(Z),!1);w.snapBoundInfos=null;var tt=d.type==="circle",ot=d.type==="ellipse";if(tt||ot){var et=Ee(Z),nt=X(et.bottom-et.top),K=X(ot?et.right-et.left:nt),st=Z[0][1]+nt,ft=Z[0][0]-K,gt=Z[0][0]+K;tt&&(F.push([gt,et.bottom]),L.push([1,0])),F.push([et.left,st]),L.push([0,1]),F.push([ft,et.bottom]),L.push([1,0])}var Ct=wh((p.clipHorizontalGuidelines||[]).map(function(Bt){return Mt("".concat(Bt),_)}),(p.clipVerticalGuidelines||[]).map(function(Bt){return Mt("".concat(Bt),y)}),y,_),it=[],ht=[];if(tt||ot)it=[F[4][0],F[2][0]],ht=[F[1][1],F[3][1]];else if(R){var M=[F[0],F[2],F[4],F[6]],P=[L[0],L[2],L[4],L[6]];it=M.filter(function(Bt,ne){return P[ne][0]}).map(function(Bt){return Bt[0]}),ht=M.filter(function(Bt,ne){return P[ne][1]}).map(function(Bt){return Bt[1]})}else it=F.filter(function(Bt,ne){return L[ne][0]}).map(function(Bt){return Bt[0]}),ht=F.filter(function(Bt,ne){return L[ne][1]}).map(function(Bt){return Bt[1]});var A=[0,0],z=Eu(Ct,p.clipTargetBounds&&{left:0,top:0,right:y,bottom:_},it,ht,5,5),G=z.horizontal,Y=z.vertical,j=G.offset,V=Y.offset;if(G.isBound&&(A[1]+=j),Y.isBound&&(A[0]+=V),(ot||tt)&&L[0][0]===0&&L[0][1]===0){var et=Ee(Z),q=et.bottom-et.top,$=ot?et.right-et.left:q,rt=Y.isBound?X(V):Y.snapIndex===0?-V:V,lt=G.isBound?X(j):G.snapIndex===0?-j:j;$-=rt,q-=lt,tt&&(q=gh(Y,G)>0?q:$,$=q);var at=F[0];F[1][1]=at[1]-q,F[2][0]=at[0]+$,F[3][1]=at[1]+q,F[4][0]=at[0]-$}else if(R&&v&&u){var vt=I(Uh(E),2),yt=vt[0],Et=vt[1],Pt=yt&&Et?yt/Et:0,Ht=E[h],Qt=Ht.direction||"",Fe=F[1][1],st=F[5][1],ft=F[7][0],gt=F[3][0];X(j)<=X(V)?j=ae(j)*X(V)/Pt:V=ae(V)*X(j)*Pt,Qt.indexOf("w")>-1?ft-=V:Qt.indexOf("e")>-1?gt-=V:(ft+=V/2,gt-=V/2),Qt.indexOf("n")>-1?Fe-=j:Qt.indexOf("s")>-1?st-=j:(Fe+=j/2,st-=j/2);var bn=ho(Fe,gt,st,ft);F.forEach(function(dl,fd){var jo;jo=I(bn[fd].pos,2),dl[0]=jo[0],dl[1]=jo[1]})}else F.forEach(function(Bt,ne){var hl=L[ne];hl[0]&&(Bt[0]-=V),hl[1]&&(Bt[1]-=j)});var ir=al(t,d,Z),$r="".concat(k,"(").concat(ir.join(O),")");if(w.clipPathState=$r,tt||ot)it=[F[4][0],F[2][0]],ht=[F[1][1],F[3][1]];else if(R){var M=[F[0],F[2],F[4],F[6]];it=M.map(function(ne){return ne[0]}),ht=M.map(function(ne){return ne[1]})}else it=F.map(function(Bt){return Bt[0]}),ht=F.map(function(Bt){return Bt[1]});if(w.snapBoundInfos=Eu(Ct,p.clipTargetBounds&&{left:0,top:0,right:y,bottom:_},it,ht,1,1),b){var ie=w.is3d,xe=w.allMatrix,xn=ie?4:3,Vo=A;a&&(Vo=[S[0]+A[0]-C[0],S[1]+A[1]-C[1]]),b.deltaOffset=Tt(xe,[Vo[0],Vo[1],0,0],xn)}return ct(t,"onClip",xt(t,e,B({clipEventType:"changed",clipType:k,poses:Z,clipStyle:$r,clipStyles:ir,distX:g,distY:m},ue((n={},n[k==="rect"?"clip":"clipPath"]=$r,n),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,i=e.datas,n=e.isDouble,o=i.isLine,s=i.isClipStart,a=i.isControl;return s?(ct(t,"onClipEnd",be(t,e,{})),n&&(a?ly(t,e):o&&ay(t,e)),n||r):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},cy={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":qt(e.inputEvent.target,dt("origin"))},dragControlStart:function(t,e){var r=e.datas;jr(t,e);var i=xt(t,e,{dragStart:se.dragStart(t,new fi().dragStart([0,0],e))}),n=ct(t,"onDragOriginStart",i);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,n===!1?(r.isDragOrigin=!1,!1):i},dragControl:function(t,e){var r=e.datas,i=e.isPinch,n=e.isRequest;if(!r.isDragOrigin)return!1;var o=I(Xe(e),2),s=o[0],a=o[1],l=t.state,u=l.width,c=l.height,f=l.offsetMatrix,h=l.targetMatrix,d=l.is3d,p=t.props.originRelative,v=p===void 0?!0:p,g=d?4:3,m=[s,a];if(n){var b=e.distOrigin;(b[0]||b[1])&&(m=b)}var C=wt(r.startOrigin,m),S=wt(r.startTargetOrigin,m),w=pt(m,r.prevOrigin),y=yn(f,h,C,g),_=t.getRect(),x=Ee(Yr(y,u,c,g)),k=[_.left-x.left,_.top-x.top];r.prevOrigin=m;var E=[Be(S[0],u,v),Be(S[1],c,v)].join(" "),O=se.drag(t,mn(e,t.state,k,!!i)),D=xt(t,e,B(B({width:u,height:c,origin:C,dist:m,delta:w,transformOrigin:E,drag:O},ue({transformOrigin:E,transform:O.transform},e)),{afterTransform:O.transform}));return ct(t,"onDragOrigin",D),D},dragControlEnd:function(t,e){var r=e.datas;return r.isDragOrigin?(ct(t,"onDragOriginEnd",be(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);return!!r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return r?(t.transformOrigin=r.transformOrigin,!0):!1},request:function(t){var e={},r=t.getRect(),i=0,n=0,o=r.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaOrigin"in a?(s[0]+=a.deltaOrigin[0],s[1]+=a.deltaOrigin[1]):"origin"in a?(s[0]=a.origin[0]-o[0],s[1]=a.origin[1]-o[1]):("x"in a?i=a.x-r.left:"deltaX"in a&&(i+=a.deltaX),"y"in a?n=a.y-r.top:"deltaY"in a&&(n+=a.deltaY)),{datas:e,distX:i,distY:n,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function fy(t,e,r,i){var n=t.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,o=t.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,s=-1;if(e===0&&(n===0?s=0:n===1&&(s=1)),e===2&&(n<=2?s=2:n<=3&&(s=3)),e===3&&(o===0?s=4:o<4&&(s=7)),e===1&&(o<=1?s=5:o<=2&&(s=6)),!(s===-1||!t[s].virtual)){var a=t[s];hy(t,s),s<4?a.pos[0]=r:a.pos[1]=i}}function hy(t,e){e<4?t.slice(0,e+1).forEach(function(r){r.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(r){r.virtual=!1}))}function dy(t,e){e<4?t.slice(e,4).forEach(function(r){r.virtual=!0}):t.slice(e).forEach(function(r){r.virtual=!0})}function Vu(t,e,r,i,n){i===void 0&&(i=[0,0]);var o=[];return!t||t==="0px"?o=[]:o=xr(t),Xh(o,e,r,0,0,i,n)}function ju(t,e,r,i,n){var o=t.state,s=o.width,a=o.height,l=sl(n,t.props.roundRelative,s,a),u=l.raws,c=l.styles,f=l.radiusPoses,h=iy(f,u),d=h.horizontals,p=h.verticals,v=c.join(" ");o.borderRadiusState=v;var g=xt(t,e,B({horizontals:d,verticals:p,borderRadius:v,width:s,height:a,delta:i,dist:r},ue({borderRadius:v},e)));return ct(t,"onRound",g),g}function Yu(t){var e,r,i=t.getState().style,n=i.borderRadius||"";if(!n&&t.props.groupable){var o=t.moveables[0],s=t.getTargets()[0];s&&((o==null?void 0:o.props.target)===s?(n=(r=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&r!==void 0?r:"",i.borderRadius=n):(n=el(s).borderRadius,i.borderRadius=n))}return n}var py={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?dt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var r=t.getState(),i=r.target,n=r.width,o=r.height,s=r.allMatrix,a=r.is3d,l=r.left,u=r.top,c=r.borderRadiusState,f=t.props,h=f.minRoundControls,d=h===void 0?[0,0]:h,p=f.maxRoundControls,v=p===void 0?[4,4]:p,g=f.zoom,m=f.roundPadding,b=m===void 0?0:m,C=f.isDisplayShadowRoundControls,S=f.groupable;if(!i)return null;var w=c||Yu(t),y=a?4:3,_=Vu(w,n,o,d,!0);if(!_)return null;var x=0,k=0,E=S?[0,0]:[l,u];return _.map(function(O,D){var T=O.horizontal,R=O.vertical,L=O.direction||"",H=Q([],I(O.pos),!1);k+=Math.abs(T),x+=Math.abs(R),T&&L.indexOf("n")>-1&&(H[1]-=b),R&&L.indexOf("w")>-1&&(H[0]-=b),T&&L.indexOf("s")>-1&&(H[1]+=b),R&&L.indexOf("e")>-1&&(H[0]+=b);var W=pt(Nt(s,H,y),E),N=C&&C!=="horizontal",U=O.vertical?x<=v[1]&&(N||!O.virtual):k<=v[0]&&(C||!O.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(D),className:dt("control","border-radius",O.vertical?"vertical":"",O.virtual?"virtual":""),"data-radius-index":D,style:{display:U?"block":"none",transform:"translate(".concat(W[0],"px, ").concat(W[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var r=e.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var r=e.inputEvent,i=e.datas,n=r.target,o=n.getAttribute("class")||"",s=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,l=s?parseInt(n.getAttribute("data-radius-index"),10):-1,u=-1;if(a){var c=n.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!a)return!1;var f=xt(t,e,{}),h=ct(t,"onRoundStart",f);if(h===!1)return!1;i.lineIndex=u,i.controlIndex=l,i.isControl=s,i.isLine=a,jr(t,e);var d=t.props,p=d.roundRelative,v=d.minRoundControls,g=v===void 0?[0,0]:v,m=t.state,b=m.width,C=m.height;i.isRound=!0,i.prevDist=[0,0];var S=Yu(t),w=Vu(S||"",b,C,g,!0)||[];return i.controlPoses=w,m.borderRadiusState=sl(w,p,b,C).styles.join(" "),f},dragControl:function(t,e){var r=e.datas,i=r.controlPoses;if(!r.isRound||!r.isControl||!i.length)return!1;var n=r.controlIndex,o=I(Xe(e),2),s=o[0],a=o[1],l=[s,a],u=pt(l,r.prevDist),c=t.props.maxRoundControls,f=c===void 0?[4,4]:c,h=t.state,d=h.width,p=h.height,v=i[n],g=v.vertical,m=v.horizontal,b=i.map(function(S){var w=S.horizontal,y=S.vertical,_=[w*m*l[0],y*g*l[1]];if(w){if(f[0]===1)return _;if(f[0]<4&&w!==m)return _}else{if(f[1]===0)return _[1]=y*m*l[0]/d*p,_;if(g){if(f[1]===1)return _;if(f[1]<4&&y!==g)return _}}return[0,0]});b[n]=l;var C=i.map(function(S,w){return B(B({},S),{pos:wt(S.pos,b[w])})});return n<4?C.slice(0,n+1).forEach(function(S){S.virtual=!1}):C.slice(4,n+1).forEach(function(S){S.virtual=!1}),r.prevDist=[s,a],ju(t,e,l,u,C)},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var i=e.datas,n=e.isDouble;if(!i.isRound)return!1;var o=i.isControl,s=i.controlIndex,a=i.isLine,l=i.lineIndex,u=i.controlPoses,c=u.filter(function(m){var b=m.virtual;return b}).length,f=t.props.roundClickable,h=f===void 0?!0:f;if(n&&h){if(o&&(h===!0||h==="control"))dy(u,s);else if(a&&(h===!0||h==="line")){var d=I(Jf(t,e),2),p=d[0],v=d[1];fy(u,l,p,v)}c!==u.filter(function(m){var b=m.virtual;return b}).length&&ju(t,e,[0,0],[0,0],u)}var g=be(t,e,{});return ct(t,"onRoundEnd",g),r.borderRadiusState="",g},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);if(!r)return!1;var i=t.moveables,n=t.props.targets,o=ze(t,"roundable",e),s=B({targets:t.props.targets,events:o.map(function(a,l){return B(B({},a),{target:n[l],moveable:i[l],currentTarget:i[l]})})},r);return ct(t,"onRoundGroupStart",s),r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);if(!r)return!1;var i=t.moveables,n=t.props.targets,o=ze(t,"roundable",e),s=B({targets:t.props.targets,events:o.map(function(a,l){return B(B(B({},a),{target:n[l],moveable:i[l],currentTarget:i[l]}),ue({borderRadius:r.borderRadius},a))})},r);return ct(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var r=t.moveables,i=t.props.targets,n=ze(t,"roundable",e);Ho(t,"onRound",function(a){var l=B({targets:t.props.targets,events:n.map(function(u,c){return B(B(B({},u),{target:i[c],moveable:r[c],currentTarget:r[c]}),ue({borderRadius:a.borderRadius},u))})},a);ct(t,"onRoundGroup",l)});var o=this.dragControlEnd(t,e);if(!o)return!1;var s=B({targets:t.props.targets,events:n.map(function(a,l){var u;return B(B({},a),{target:i[l],moveable:r[l],currentTarget:r[l],lastEvent:(u=a.datas)===null||u===void 0?void 0:u.lastEvent})})},o);return ct(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function vy(t,e){var r=e?4:3,i=Ot(r),n="matrix".concat(e?"3d":"","(").concat(i.join(","),")");return t===n||t==="matrix(1,0,0,1,0,0)"}var qh={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var r=t.state,i=r.is3d,n=r.targetMatrix,o=r.inlineTransform,s=i?"matrix3d(".concat(n.join(","),")"):"matrix(".concat(Gf(n,!0),")"),a=!o||o==="none"?s:o;e.datas.startTransforms=vy(a,i)?[]:xr(a)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return xt(t,e,{setTransform:function(r){e.datas.startTransforms=$t(r)?r:xr(r)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return xt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),ct(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),ct(t,"onBeforeRender",xt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),ct(t,"onBeforeRenderEnd",xt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var i=ze(t,"beforeRenderable",e),n=t.moveables,o=i.map(function(s,a){var l=n[a];return r.setTransform(l,s),r.resetStyle(s),r.fillDragStartParams(l,s)});ct(t,"onBeforeRenderGroupStart",xt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var i=ze(t,"beforeRenderable",e),n=t.moveables,o=i.map(function(s,a){var l=n[a];return r.resetStyle(s),r.fillDragParams(l,s)});ct(t,"onBeforeRenderGroup",xt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),ct(t,"onBeforeRenderGroupEnd",xt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Kh={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){ct(t,"onRenderStart",xt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){ct(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){ct(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){ct(t,"onRenderGroupStart",xt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,i=ze(t,"beforeRenderable",e),n=t.moveables,o=i.map(function(s,a){var l=n[a];return r.fillDragParams(l,s)});ct(t,"onRenderGroup",xt(t,e,B(B({isPinch:!!e.isPinch,targets:t.props.targets,transform:An(e),transformObject:{}},ue(Ln(e))),{events:o})))},dragGroupEnd:function(t,e){var r=this,i=ze(t,"beforeRenderable",e),n=t.moveables,o=i.map(function(s,a){var l=n[a];return r.fillDragEndParams(l,s)});ct(t,"onRenderGroupEnd",xt(t,e,B({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o,transformObject:{},transform:An(e)},ue(Ln(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var r={};return ci(oo(e)||[]).forEach(function(i){r[i.name]=i.functionValue}),xt(t,e,B({isPinch:!!e.isPinch,transformObject:r,transform:An(e)},ue(Ln(e))))},fillDragEndParams:function(t,e){var r={};return ci(oo(e)||[]).forEach(function(i){r[i.name]=i.functionValue}),xt(t,e,B({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:r,transform:An(e)},ue(Ln(e))))}};function Vi(t,e,r,i,n,o,s){o.clientDistX=o.distX,o.clientDistY=o.distY;var a=n==="Start",l=n==="End",u=n==="After",c=t.state.target,f=o.isRequest,h=i.indexOf("Control")>-1;if(!c||a&&h&&!f&&t.areaElement===o.inputEvent.target)return!1;var d=Q([],I(e),!1);if(f){var p=o.requestAble;d.some(function(D){return D.name===p})||d.push.apply(d,Q([],I(t.props.ables.filter(function(D){return D.name===p})),!1))}if(!d.length||d.every(function(D){return D.dragRelation}))return!1;var v=o.inputEvent,g;l&&v&&(g=document.elementFromPoint(o.clientX,o.clientY)||v.target);var m=!1,b=function(){var D;m=!0,(D=o.stop)===null||D===void 0||D.call(o)},C=a&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());C&&t.updateRect(n,!0,!1);var S=o.datas,w=h?"controlGesto":"targetGesto",y=t[w],_=function(D,T,R){if(!(T in D)||y!==t[w])return!1;var L=D.name,H=S[L]||(S[L]={});if(a&&(H.isEventStart=!R||!D[R]||D[R](t,o)),!H.isEventStart)return!1;var W=D[T](t,B(B({},o),{stop:b,datas:H,originalDatas:S,inputTarget:g}));return t._emitter.off(),a&&W===!1&&(H.isEventStart=!1),W};C&&d.forEach(function(D){D.unset&&D.unset(t)}),_(qh,"drag".concat(i).concat(n));var x=0,k=0;r.forEach(function(D){if(m)return!1;var T="".concat(D).concat(i).concat(n),R="".concat(D).concat(i,"Condition");n===""&&!f&&N1(t.state,o);var L=d.filter(function(N){return N[T]});L=L.filter(function(N,U){return N.name&&L.indexOf(N)===U});var H=L.filter(function(N){return _(N,T,R)}),W=H.length;m&&++x,W&&++k,!m&&a&&L.length&&!W&&(x+=L.filter(function(N){var U=N.name,Z=S[U];return Z.isEventStart?N.dragRelation!=="strong":!1}).length?1:0)}),(!u||k)&&_(Kh,"drag".concat(i).concat(n));var E=y!==t[w]||x===r.length;if((l||m||E)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(D){D.state.gestos={}}),d.forEach(function(D){D.unset&&D.unset(t)})),a&&!E&&!f&&k&&t.props.preventDefault&&(o==null||o.preventDefault()),t.isUnmounted||E)return!1;if(!a&&k&&!s||l){var O=t.props.flushSync||Mh;O(function(){t.updateRect(l?n:"",!0,!1),t.forceUpdate()})}return!a&&!l&&!u&&k&&!s&&Vi(t,e,r,i,n+"After",o),!0}function ll(t,e){return function(r,i){var n;i===void 0&&(i=r.inputEvent.target);var o=i,s=t.areaElement,a=t._dragTarget;return!a||!e&&(!((n=t.controlGesto)===null||n===void 0)&&n.isFlag())?!1:o===a||a.contains(o)||o===s||!t.isMoveableElement(o)&&!t.controlBox.contains(o)||qt(o,"moveable-area")||qt(o,"moveable-padding")||qt(o,"moveable-edgeDraggable")}}function Zh(t,e,r){var i=t.controlBox,n=[],o=t.props,s=o.dragArea,a=t.state.target,l=o.dragTarget;n.push(i),(!s||l)&&n.push(e),!s&&l&&a&&e!==a&&o.dragTargetSelf&&n.push(a);var u=ll(t);return Qh(t,n,"targetAbles",r,{dragStart:u,pinchStart:u})}function Jh(t,e){var r=t.controlBox,i=[];i.push(r);var n=ll(t,!0),o=function(s,a){if(a===void 0&&(a=s.inputEvent.target),a===r)return!0;var l=n(s,a);return!l};return Qh(t,i,"controlAbles",e,{dragStart:o,pinchStart:o})}function Qh(t,e,r,i,n){n===void 0&&(n={});var o=r==="targetAbles",s=t.props,a=s.pinchOutside,l=s.pinchThreshold,u=s.preventClickEventOnDrag,c=s.preventClickDefault,f=s.checkInput,h=s.dragFocusedInput,d=s.preventDefault,p=d===void 0?!0:d,v=s.preventRightClick,g=v===void 0?!0:v,m=s.preventWheelClick,b=m===void 0?!0:m,C=s.dragContainer,S=Ye(C,!0),w={preventDefault:p,preventRightClick:g,preventWheelClick:b,container:S||mr(t.getControlBoxElement()),pinchThreshold:l,pinchOutside:a,preventClickEventOnDrag:o?u:!1,preventClickEventOnDragStart:o?c:!1,preventClickEventByCondition:o?null:function(x){return t.controlBox.contains(x.target)},checkInput:o?f:!1,dragFocusedInput:h},y=new W0(e,w),_=i==="Control";return["drag","pinch"].forEach(function(x){["Start","","End"].forEach(function(k){y.on("".concat(x).concat(k),function(E){var O,D=E.eventType,T=x==="drag"&&E.isPinch;if(n[D]&&!n[D](E)){E.stop();return}if(!T){var R=x==="drag"?[x]:["drag",x],L=Q([],I(t[r]),!1),H=Vi(t,L,R,i,k,E);H?(t.props.stopPropagation||k==="Start"&&_)&&((O=E==null?void 0:E.inputEvent)===null||O===void 0||O.stopPropagation()):E.stop()}})})}),y}var gy=function(){function t(e,r,i){var n=this;this.target=e,this.moveable=r,this.eventName=i,this.ables=[],this._onEvent=function(o){var s=n.eventName,a=n.moveable;a.state.disableNativeEvent||n.ables.forEach(function(l){l[s](a,{inputEvent:o})})},e.addEventListener(i.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function my(t,e,r,i){var n;r===void 0&&(r=e);var o=nh(t,e),s=o.matrixes,a=o.is3d,l=o.targetMatrix,u=o.transformOrigin,c=o.targetOrigin,f=o.offsetContainer,h=o.hasFixed,d=o.zoom,p=Bm(f,r),v=p.matrixes,g=p.is3d,m=p.offsetContainer,b=p.zoom,C=i,S=4,w=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,y=l,_=Ot(S),x=Ot(S),k=Ot(S),E=Ot(S),O=s.length,D=v.map(function(U){return B(B({},U),{matrix:U.matrix?Q([],I(U.matrix),!1):void 0})}).reverse();s.reverse(),!a&&C&&(y=Ge(y,3,4),ta(s)),!g&&C&&ta(D),D.forEach(function(U){x=Tt(x,U.matrix,S)});var T=r||_r(t),R=((n=D[0])===null||n===void 0?void 0:n.target)||en(T,T,!0).offsetParent,L=D.slice(1).reduce(function(U,Z){return Tt(U,Z.matrix,S)},Ot(S));s.forEach(function(U,Z){if(O-2===Z&&(k=_.slice()),O-1===Z&&(E=_.slice()),!U.matrix){var F=s[Z+1],tt=R1(U,F,R,S,Tt(L,_,S));U.matrix=Gr(tt,S)}_=Tt(_,U.matrix,S)});var H=!w&&a;y||(y=Ot(H?4:3));var W=Fo(w&&y.length===16?Ge(y,4,3):y,H),N=x;return x=zf(x,S,S),{hasZoom:d!==1||b!==1,hasFixed:h,matrixes:s,rootMatrix:x,originalRootMatrix:N,beforeMatrix:k,offsetMatrix:E,allMatrix:_,targetMatrix:y,targetTransform:W,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:c,is3d:C,offsetContainer:f,offsetRootContainer:m}}function yy(t,e,r,i){r===void 0&&(r=e);var n=0,o=0,s=0,a={},l=Bh(t);if(t&&(n=l.offsetWidth,o=l.offsetHeight),t){var u=my(t,e,r,i),c=si(u.allMatrix,u.transformOrigin,n,o);a=B(B({},u),c);var f=si(u.allMatrix,[50,50],100,100);s=Ih([f.pos1,f.pos2],f.direction)}var h=4;return B(B(B({hasZoom:!1,width:n,height:o,rotation:s},l),{originalRootMatrix:Ot(h),rootMatrix:Ot(h),beforeMatrix:Ot(h),offsetMatrix:Ot(h),allMatrix:Ot(h),targetMatrix:Ot(h),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!i,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function na(t,e,r,i,n,o){o===void 0&&(o=[]);var s=1,a=[0,0],l=Nn(),u=Nn(),c=Nn(),f=Nn(),h=[0,0],d={},p=yy(e,r,n,!0);if(e){var v=ye(e);o.forEach(function(D){d[D]=v(D)});var g=p.is3d?4:3,m=si(p.offsetMatrix,wt(p.transformOrigin,Nf(p.targetMatrix,g)),p.width,p.height);s=m.direction,a=wt(m.origin,[m.left-p.left,m.top-p.top]),f=Wi(p.offsetRootContainer);var b=en(i,i,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var C=si(Tt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),S=si(p.originalRootMatrix,uo(ye(b)("transformOrigin")).map(function(D){return parseFloat(D)}),b.offsetWidth,b.offsetHeight);if(l=vs(C,f),c=vs(S,f,b,!0),t){var w=C.left,y=C.top;u=vs({left:w,top:y,bottom:y,right:y},f)}}else{l=Wi(e),c=Pm(b),t&&(u=Wi(t));var _=c.left,x=c.top,k=c.clientLeft,E=c.clientTop,O=[l.left-_,l.top-x];h=pt(pi(p.rootMatrix,O,4),[k+p.left,E+p.top])}}return B({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:f,beforeDirection:s,beforeOrigin:a,originalBeforeOrigin:a,target:e,style:d,offsetDelta:h},p)}function $u(t){var e=t.pos1,r=t.pos2,i=t.pos3,n=t.pos4;if(!e||!r||!i||!n)return null;var o=Fr([e,r,i,n]),s=[o.minX,o.minY],a=pt(t.origin,s);return e=pt(e,s),r=pt(r,s),i=pt(i,s),n=pt(n,s),B(B({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:r,pos3:i,pos4:n,origin:a,beforeOrigin:a,isPersisted:!0})}var vi=function(t){vn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state=B({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},na(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new Io,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var i=r.props.parentMoveable;if(i){i.checkUpdateRect();return}Og(r._observerId),r._observerId=ff(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(i){i.stopPropagation(),i.preventDefault()},r}return e.prototype.render=function(){var r=this.props,i=this.getState(),n=r.parentPosition,o=r.className,s=r.target,a=r.zoom,l=r.cspNonce,u=r.translateZ,c=r.cssStyled,f=r.groupable,h=r.linePadding,d=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=I(n||[0,0],2),v=p[0],g=p[1],m=i.left,b=i.top,C=i.target,S=i.direction,w=i.hasFixed,y=i.offsetDelta,_=r.targets,x=this.isDragging(),k={};this.getEnabledAbles().forEach(function(L){k["data-able-".concat(L.name.toLowerCase())]=!0});var E=this._getAbleClassName(),O=_&&_.length&&(C||f)||s||!this._hasFirstTarget&&this.state.isPersisted,D=this.controlBox||this.props.firstRenderState||this.props.persistData,T=[m-v,b-g];!f&&r.useAccuratePosition&&(T[0]+=y[0],T[1]+=y[1]);var R={position:w?"fixed":"absolute",display:O?"block":"none",visibility:D?"visible":"hidden",transform:"translate3d(".concat(T[0],"px, ").concat(T[1],"px, ").concat(u,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return h&&(R["--moveable-line-padding"]=h),d&&(R["--moveable-control-padding"]=d),Le(c,B({cspNonce:l,ref:Ze(this,"controlBox"),className:"".concat(dt("control-box",S===-1?"reverse":"",x?"dragging":"")," ").concat(E," ").concat(o)},k,{onClick:this._onPreventClick,style:R}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,i=r.parentMoveable,n=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!n&&!i&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},e.prototype.componentWillUnmount=function(){var r,i;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(i=this._mutationObserver)===null||i===void 0||i.disconnect();var n=this._viewContainer;n&&this._changeAbleViewClassNames([]),Qr(this,!1),Qr(this,!0);var o=this.events;for(var s in o){var a=o[s];a&&a.destroy()}},e.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},e.prototype.getAble=function(r){var i=this.props.ables||[];return me(i,function(n){return n.name===r})},e.prototype.getContainer=function(){var r=this.props,i=r.parentMoveable,n=r.wrapperMoveable,o=r.container;return o||n&&n.getContainer()||i&&i.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(r){var i;return r&&(((i=r.getAttribute)===null||i===void 0?void 0:i.call(r,"class"))||"").indexOf(Va)>-1},e.prototype.dragStart=function(r,i){i===void 0&&(i=r.target);var n=this.targetGesto,o=this.controlGesto;return n&&ll(this)({inputEvent:r},i)?n.isFlag()||n.triggerDragStart(r):o&&this.isMoveableElement(i)&&(o.isFlag()||o.triggerDragStart(r)),this},e.prototype.hitTest=function(r){var i=this.state,n=i.target,o=i.pos1,s=i.pos2,a=i.pos3,l=i.pos4,u=i.targetClientRect;if(!n)return 0;var c;if(Ci(r)){var f=r.getBoundingClientRect();c={left:f.left,top:f.top,width:f.width,height:f.height}}else c=B({width:0,height:0},r);var h=c.left,d=c.top,p=c.width,v=c.height,g=vu([o,s,l,a],u),m=L0(g,[[h,d],[h+p,d],[h+p,d+v],[h,d+v]]),b=Wf(g);return!m||!b?0:Math.min(100,m/b*100)},e.prototype.isInside=function(r,i){var n=this.state,o=n.target,s=n.pos1,a=n.pos2,l=n.pos3,u=n.pos4,c=n.targetClientRect;return o?Hs([r,i],vu([s,a,u,l],c)):!1},e.prototype.updateRect=function(r,i,n){n===void 0&&(n=!0);var o=this.props,s=!o.parentPosition&&!o.wrapperMoveable;s&&hi(!0);var a=o.parentMoveable,l=this.state,u=l.target||o.target,c=this.getContainer(),f=a?a._rootContainer:this._rootContainer,h=na(this.controlBox,u,c,c,f||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&o.persistData){var d=$u(o.persistData);for(var p in d)h[p]=d[p]}s&&hi(),this.updateState(h,a?!1:n)},e.prototype.isDragging=function(r){var i,n,o=this.targetGesto,s=this.controlGesto;if(o!=null&&o.isFlag()){if(!r)return!0;var a=o.getEventData();return!!(!((i=a[r])===null||i===void 0)&&i.isEventStart)}if(s!=null&&s.isFlag()){if(!r)return!0;var a=s.getEventData();return!!(!((n=a[r])===null||n===void 0)&&n.isEventStart)}return!1},e.prototype.updateTarget=function(r){this.updateRect(r,!0)},e.prototype.getRect=function(){var r=this.state,i=De(this.state),n=I(i,4),o=n[0],s=n[1],a=n[2],l=n[3],u=Ee(i),c=r.width,f=r.height,h=u.width,d=u.height,p=u.left,v=u.top,g=[r.left,r.top],m=wt(g,r.origin),b=wt(g,r.beforeOrigin),C=r.transformOrigin;return{width:h,height:d,left:p,top:v,pos1:o,pos2:s,pos3:a,pos4:l,offsetWidth:c,offsetHeight:f,beforeOrigin:b,origin:m,transformOrigin:C,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(r){if(!r||r==="target"){var i=this.targetGesto;(i==null?void 0:i.isIdle())===!1&&ea(this,!1),i==null||i.stop()}if(!r||r==="control"){var i=this.controlGesto;(i==null?void 0:i.isIdle())===!1&&ea(this,!0),i==null||i.stop()}},e.prototype.getRotation=function(){var r=this.state,i=r.pos1,n=r.pos2,o=r.direction;return H1(i,n,o)},e.prototype.request=function(r,i,n){i===void 0&&(i={});var o=this,s=o.props,a=s.parentMoveable||s.wrapperMoveable||o,l=a.props.ables,u=s.groupable,c=me(l,function(m){return m.name===r});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var f=c.request(o),h=n||i.isInstant,d=f.isControl?"controlAbles":"targetAbles",p="".concat(u?"Group":"").concat(f.isControl?"Control":""),v=Q([],I(a[d]),!1),g={request:function(m){return Vi(o,v,["drag"],p,"",B(B({},f.request(m)),{requestAble:r,isRequest:!0}),h),g},requestEnd:function(){return Vi(o,v,["drag"],p,"End",B(B({},f.requestEnd()),{requestAble:r,isRequest:!0}),h),g}};return Vi(o,v,["drag"],p,"Start",B(B({},f.requestStart(i)),{requestAble:r,isRequest:!0}),h),h?g.request(i).requestEnd():g},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var r=this.getState(),i=this.props,n=i.padding,o=r.originalBeforeOrigin,s=r.transformOrigin,a=r.allMatrix,l=r.is3d,u=r.pos1,c=r.pos2,f=r.pos3,h=r.pos4,d=r.left,p=r.top,v=r.isPersisted,g=i.zoom||1;if(!n&&g<=1){r.renderPoses=[u,c,f,h],r.renderLines=[[u,c],[c,h],[h,f],[f,u]];return}var m=Wh(n||{}),b=m.left,C=m.top,S=m.bottom,w=m.right,y=l?4:3,_=[];v?_=s:this.controlBox&&i.groupable?_=o:_=wt(o,[d,p]);var x=io(y,Gr(_.map(function(R){return-R}),y),a,Gr(s,y)),k=Se(x,u,[-b,-C],y),E=Se(x,c,[w,-C],y),O=Se(x,f,[-b,S],y),D=Se(x,h,[w,S],y);if(r.renderPoses=[k,E,O,D],r.renderLines=[[k,E],[E,D],[D,O],[O,k]],g){var T=g/2;r.renderLines=[[Se(x,u,[-b-T,-C],y),Se(x,c,[w+T,-C],y)],[Se(x,c,[w,-C-T],y),Se(x,h,[w,S+T],y)],[Se(x,h,[w+T,S],y),Se(x,f,[-b-T,S],y)],[Se(x,f,[-b,S+T],y),Se(x,u,[-b,-C-T],y)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,i=r.target,n=r.container,o=r.parentMoveable,s=this.state,a=s.target,l=s.container;if(!(!a&&!i)){this.updateAbles();var u=!ra(a,i),c=u||!ra(l,n);if(c){var f=n||this.controlBox;f&&this.unsetAbles(),this.updateState({target:i,container:n}),!o&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(r,i){var n=this.props;if(this._emitter.trigger(r,i),n.parentMoveable&&i.isRequest&&!i.isRequestChild)return n.parentMoveable.triggerEvent(r,i,!0);var o=n[r];return o&&o(i)},e.prototype.useCSS=function(r,i){var n=this.props.customStyledMap,o=r+i;return n[o]||(n[o]=Yf(r,i)),n[o]},e.prototype.getState=function(){var r,i=this.props;(i.target||!((r=i.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var n=this.controlBox,o=i.persistData,s=i.firstRenderState;if(s&&!n)return s;if(!this._hasFirstTarget&&o){var a=$u(o);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(i){i.unset&&i.unset(r)})},e.prototype.updateAbles=function(r,i){r===void 0&&(r=this.props.ables),i===void 0&&(i="");var n=this.props,o=n.triggerAblesSimultaneously,s=this.getEnabledAbles(r),a="drag".concat(i,"Start"),l="pinch".concat(i,"Start"),u="drag".concat(i,"ControlStart"),c=Gn(s,[a,l],o),f=Gn(s,[u],o);this.enabledAbles=s,this.targetAbles=c,this.controlAbles=f},e.prototype.updateState=function(r,i){if(i){if(this.isUnmounted)return;this.setState(r)}else{var n=this.state;for(var o in r)n[o]=r[o]}},e.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var i=this.props;return r.filter(function(n){return n&&(n.always&&i[n.name]!==!1||i[n.name])})},e.prototype.renderAbles=function(){var r=this,i=this.props,n=i.triggerAblesSimultaneously,o={createElement:Le};return this.renderState={},z1(Nh(Gn(this.getEnabledAbles(),["render"],n).map(function(s){var a=s.render;return a(r,o)||[]})).filter(function(s){return s}),function(s){var a=s.key;return a}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(i,n){var o,s,a=(s=(o=n.requestStyle)===null||o===void 0?void 0:o.call(n))!==null&&s!==void 0?s:[];return Q(Q([],I(i),!1),I(a),!1)},Q([],I(this.props.requestStyles||[]),!1));return r},e.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},e.prototype._updateEvents=function(){var r=this.targetAbles.length,i=this.controlAbles.length,n=this._dragTarget,o=!r&&this.targetGesto||this._isTargetChanged(!0);o&&(Qr(this,!1),this.updateState({gestos:{}})),i||Qr(this,!0),n&&r&&!this.targetGesto&&(this.targetGesto=Zh(this,n,"")),!this.controlGesto&&i&&(this.controlGesto=Jh(this,"Control"))},e.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=Ye(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var r=this.props,i=r,n=i.zoom,o=i.hideDefaultLines,s=i.hideChildMoveableDefaultLines,a=i.parentMoveable;if(o||a&&s)return[];var l=this.getState(),u={createElement:Le};return l.renderLines.map(function(c,f){return tn(u,"",c[0],c[1],n,"render-line-".concat(f))})},e.prototype._isTargetChanged=function(r){var i=this.props,n=i.dragTarget||i.target,o=this._prevOriginalDragTarget,s=this._prevDragArea,a=i.dragArea,l=!a&&o!==n,u=(r||a)&&s!==a;return l||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var r=this,i=this.props,n=i.dragArea?this.areaElement:this.state.target,o=this.events,s=er(o);if(this._isTargetChanged())for(var a in o){var l=o[a];l&&l.destroy(),o[a]=null}if(n){var u=this.enabledAbles;s.forEach(function(c){var f=Gn(u,[c]),h=f.length>0,d=o[c];if(!h){d&&(d.destroy(),o[c]=null);return}d||(d=new gy(n,r,c),o[c]=d),d.setAbles(f)})}},e.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=Ye(r,!0))},e.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=Ye(r,!0));var i=this._viewContainer;i&&this._changeAbleViewClassNames(Q(Q([],I(this._getAbleViewClassNames()),!1),[this.isDragging()?U1:""],!1))},e.prototype._changeAbleViewClassNames=function(r){var i=this._viewContainer,n=zh(r.filter(Boolean),function(u){return u}).map(function(u){var c=I(u,1),f=c[0];return f}),o=this._viewClassNames,s=cn(o,n),a=s.removed,l=s.added;a.forEach(function(u){gf(i,o[u])}),l.forEach(function(u){vf(i,n[u])}),this._viewClassNames=n},e.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(i){var n;return((n=i.viewClassName)===null||n===void 0?void 0:n.call(i,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(r){var i=this;r===void 0&&(r="");var n=this.getEnabledAbles(),o=this.targetGesto,s=this.controlGesto,a=o!=null&&o.isFlag()?o.getEventData():{},l=s!=null&&s.isFlag()?s.getEventData():{};return n.map(function(u){var c,f,h,d=u.name,p=((c=u.className)===null||c===void 0?void 0:c.call(u,i))||"";return(!((f=a[d])===null||f===void 0)&&f.isEventStart||!((h=l[d])===null||h===void 0)&&h.isEventStart)&&(p+=" ".concat(dt("".concat(d).concat(r,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(r){var i,n=this.props,o=n.target,s=mr(this.getControlBoxElement());if(!s.ResizeObserver||!o||!n.useResizeObserver){(i=this._reiszeObserver)===null||i===void 0||i.disconnect();return}if(!(r.target===o&&this._reiszeObserver)){var a=new s.ResizeObserver(this.checkUpdateRect);a.observe(o,{box:"border-box"}),this._reiszeObserver=a}},e.prototype._updateMutationObserver=function(r){var i=this,n,o=this.props,s=o.target,a=mr(this.getControlBoxElement());if(!a.MutationObserver||!s||!o.useMutationObserver){(n=this._mutationObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===s&&this._mutationObserver)){var l=new a.MutationObserver(function(u){var c,f;try{for(var h=Q0(u),d=h.next();!d.done;d=h.next()){var p=d.value;p.type==="attributes"&&p.attributeName==="style"&&i.checkUpdateRect()}}catch(v){c={error:v}}finally{try{d&&!d.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}});l.observe(s,{attributes:!0}),this._mutationObserver=l}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Mh,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(_f),ul={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var r,i=t.props,n=i.targets||[],o=t.getState(),s=o.left,a=o.top,l=o.isPersisted,u=i.zoom||1,c=t.renderGroupRects,f=((r=i.persistData)===null||r===void 0?void 0:r.children)||[];l?n=f.map(function(){return null}):f=[];var h=ti(t,"parentPosition",[s,a],function(p){return p.join(",")}),d=ti(t,"requestStyles",t.getRequestChildStyles(),function(p){return p.join(",")});return t.moveables=t.moveables.slice(0,n.length),Q(Q([],I(n.map(function(p,v){return e.createElement(vi,{key:"moveable"+v,ref:af(t,"moveables",v),target:p,origin:!1,requestStyles:d,cssStyled:i.cssStyled,customStyledMap:i.customStyledMap,useResizeObserver:i.useResizeObserver,useMutationObserver:i.useMutationObserver,hideChildMoveableDefaultLines:i.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,a],persistData:f[v],zoom:u})})),!1),I(Nh(c.map(function(p,v){var g=p.pos1,m=p.pos2,b=p.pos3,C=p.pos4,S=[g,m,b,C];return[[0,1],[1,3],[3,2],[2,0]].map(function(w,y){var _=I(w,2),x=_[0],k=_[1];return tn(e,"",pt(S[x],h),pt(S[k],h),u,"group-rect-".concat(v,"-").concat(y))})}))),!1)}},by=gn("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.props.target,i=e.inputEvent,n=e.inputTarget,o=t.isMoveableElement(n),s=!o&&t.controlBox.contains(n);if(!(!i||!n||e.isDrag||t.isMoveableElement(n)||s)){var a=r.contains(n);ct(t,"onClick",xt(t,e,{isDouble:e.isDouble,inputTarget:n,isTarget:r===n,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var r=e.inputEvent,i=e.inputTarget;if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||e.datas.inputTarget===i)){var n=t.props.targets,o=n.indexOf(i),s=o>-1,a=!1;o===-1&&(o=tr(n,function(l){return l.contains(i)}),a=o>-1),ct(t,"onClickGroup",xt(t,e,{isDouble:e.isDouble,targets:n,inputTarget:i,targetIndex:o,isTarget:s,containsTarget:a,moveableTarget:n[o]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Xr(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),B(B({},t),{datas:e})}var xy=gn("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var r=t.props,i=r.edgeDraggable;return i?ah(e,"edgeDraggable",i,t.getState().renderPoses,r.zoom):[]},dragCondition:function(t,e){var r,i=t.props,n=(r=e.inputEvent)===null||r===void 0?void 0:r.target;return!i.edgeDraggable||!n?!1:!i.draggable&&qt(n,dt("direction"))&&qt(n,dt("edge"))&&qt(n,dt("edgeDraggable"))},dragStart:function(t,e){return se.dragStart(t,Xr(e))},drag:function(t,e){return se.drag(t,Xr(e))},dragEnd:function(t,e){return se.dragEnd(t,Xr(e))},dragGroupCondition:function(t,e){var r,i=t.props,n=(r=e.inputEvent)===null||r===void 0?void 0:r.target;return!i.edgeDraggable||!n?!1:!i.draggable&&qt(n,dt("direction"))&&qt(n,dt("line"))},dragGroupStart:function(t,e){return se.dragGroupStart(t,Xr(e))},dragGroup:function(t,e){return se.dragGroup(t,Xr(e))},dragGroupEnd:function(t,e){return se.dragGroupEnd(t,Xr(e))},unset:function(t){return se.unset(t)}}),td={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},cl=[qh,Yh,w1,V1,se,xy,Zs,j1,$1,s1,Z1,J1,q1,cy,uy,py,ul,td,by,jh,Kh],Cy=cl.reduce(function(t,e){return(e.events||[]).forEach(function(r){pf(t,r)}),t},[]),Sy=cl.reduce(function(t,e){return(e.props||[]).forEach(function(r){pf(t,r)}),t},[]);function Xu(t,e){var r=I(t,3),i=r[0],n=r[1],o=r[2];return(i*e[0]+n*e[1]+o)/Math.sqrt(i*i+n*n)}function Wn(t,e){var r=I(t,2),i=r[0],n=r[1];return-i*e[0]-n*e[1]}function Uu(t,e){return Math.max.apply(Math,Q([],I(t.map(function(r){var i=I(r,4),n=i[0],o=i[1],s=i[2],a=i[3];return Math.max(n[e],o[e],s[e],a[e])})),!1))}function qu(t,e){return Math.min.apply(Math,Q([],I(t.map(function(r){var i=I(r,4),n=i[0],o=i[1],s=i[2],a=i[3];return Math.min(n[e],o[e],s[e],a[e])})),!1))}function _y(t,e){var r,i,n,o=[0,0],s=[0,0],a=[0,0],l=[0,0],u=0,c=0;if(!t.length)return{pos1:o,pos2:s,pos3:a,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:e};var f=bt(e,ce);if(f%90){var h=f/180*Math.PI,d=Math.tan(h),p=-1/d,v=[Xs,yu],g=[[0,0],[0,0]],m=[Xs,yu],b=[[0,0],[0,0]];t.forEach(function(ot){ot.forEach(function(et){var nt=Xu([-d,1,0],et),K=Xu([-p,1,0],et);v[0]>nt&&(g[0]=et,v[0]=nt),v[1]<nt&&(g[1]=et,v[1]=nt),m[0]>K&&(b[0]=et,m[0]=K),m[1]<K&&(b[1]=et,m[1]=K)})});var C=I(g,2),S=C[0],w=C[1],y=I(b,2),_=y[0],x=y[1],k=[-d,1,Wn([-d,1],S)],E=[-d,1,Wn([-d,1],w)],O=[-p,1,Wn([-p,1],_)],D=[-p,1,Wn([-p,1],x)];r=I([[k,O],[k,D],[E,O],[E,D]].map(function(ot){var et=I(ot,2),nt=et[0],K=et[1];return Ha(nt,K)[0]}),4),o=r[0],s=r[1],a=r[2],l=r[3],u=m[1]-m[0],c=v[1]-v[0]}else{var T=qu(t,0),R=qu(t,1),L=Uu(t,0),H=Uu(t,1);if(o=[T,R],s=[L,R],a=[T,H],l=[L,H],u=L-T,c=H-R,f%180){var W=[a,o,l,s];i=I(W,4),o=i[0],s=i[1],a=i[2],l=i[3],u=H-R,c=L-T}}if(f%360>180){var W=[l,a,s,o];n=I(W,4),o=n[0],s=n[1],a=n[2],l=n[3]}var N=Fr([o,s,a,l]),U=N.minX,Z=N.minY,F=N.maxX,tt=N.maxY;return{pos1:o,pos2:s,pos3:a,pos4:l,width:u,height:c,minX:U,minY:Z,maxX:F,maxY:tt,rotation:e}}function ed(t,e){var r=e.map(function(i){if($t(i)){var n=ed(t,i),o=n.length;return o>1?n:o===1?n[0]:null}else{var s=me(t,function(a){var l=a.manager;return l.props.target===i});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return r.length===1&&$t(r[0])?r[0]:r}var wy=function(t){vn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.differ=new Hf,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(r,i,n){var o;n===void 0&&(n=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;hi(!0),this.moveables.forEach(function(ft){ft.updateRect(r,!1,!1)});var a=this.props,l=this.moveables,u=s.target||a.target,c=l.map(function(ft){return{finded:!1,manager:ft}}),f=this.props.targetGroups||[],h=ed(c,f),d=a.useDefaultGroupRotate;h.push.apply(h,Q([],I(c.filter(function(ft){var gt=ft.finded;return!gt}).map(function(ft){var gt=ft.manager;return gt})),!1));var p=[],v=!i||r!==""&&a.updateGroup,g=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(o=a.persistData)===null||o===void 0?void 0:o.rotation;m!=null&&(g=m)}function b(ft,gt,Ct){var it=ft.map(function(Y){if($t(Y)){var j=b(Y,gt),V=[j.pos1,j.pos2,j.pos3,j.pos4];return p.push(j),{poses:V,rotation:j.rotation}}else return{poses:De(Y.state),rotation:Y.getRotation()}}),ht=it.map(function(Y){var j=Y.rotation;return j}),M=0,P=ht[0],A=ht.every(function(Y){return Math.abs(P-Y)<.1});v?M=!d&&A?P:g:M=!d&&!Ct&&A?P:gt;var z=it.map(function(Y){var j=Y.poses;return j}),G=_y(z,M);return G}var C=b(h,this.rotation,!0);v&&(this.rotation=C.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=p;var S=this.transformOrigin,w=this.rotation,y=this.scale,_=C.width,x=C.height,k=C.minX,E=C.minY,O=W1([[0,0],[_,0],[0,x],[_,x]],ol(S,_,x),this.rotation/180*Math.PI),D=Fr(O.result),T=D.minX,R=D.minY,L=" rotate(".concat(w,"deg)")+" scale(".concat(ae(y[0]),", ").concat(ae(y[1]),")"),H="translate(".concat(-T,"px, ").concat(-R,"px)").concat(L);this.controlBox.style.transform="translate3d(".concat(k,"px, ").concat(E,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(S,";")+"width:".concat(_,"px;height:").concat(x,"px;")+"transform: ".concat(H),s.width=_,s.height=x;var W=this.getContainer(),N=na(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||W,[]),U=[N.left,N.top],Z=I(De(N),4),F=Z[0],tt=Z[1],ot=Z[2],et=Z[3],nt=Fr([F,tt,ot,et]),K=[nt.minX,nt.minY],st=ae(y[0]*y[1]);N.pos1=pt(F,K),N.pos2=pt(tt,K),N.pos3=pt(ot,K),N.pos4=pt(et,K),N.left=k-N.left+K[0],N.top=E-N.top+K[1],N.origin=pt(wt(U,N.origin),K),N.beforeOrigin=pt(wt(U,N.beforeOrigin),K),N.originalBeforeOrigin=wt(U,N.originalBeforeOrigin),N.transformOrigin=pt(wt(U,N.transformOrigin),K),u.style.transform="translate(".concat(-T-K[0],"px, ").concat(-R-K[1],"px)")+L,hi(),this.updateState(B(B({},N),{posDelta:K,direction:st,beforeDirection:st}),n)},e.prototype.getRect=function(){return B(B({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},e.prototype.triggerEvent=function(r,i,n){if(n||r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,i);this._emitter.trigger(r,i)},e.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(i,n){var o,s,a=(s=(o=n.requestChildStyle)===null||o===void 0?void 0:o.call(n))!==null&&s!==void 0?s:[];return Q(Q([],I(i),!1),I(a),!1)},[]);return r},e.prototype.getMoveables=function(){return Q([],I(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Q(Q([],I(this.props.ables),!1),[ul],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Ye(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var r=this.state,i=this.props,n=this._prevDragTarget,o=i.dragTarget||this.areaElement,s=i.targets,a=this.differ.update(s),l=a.added,u=a.changed,c=a.removed,f=l.length||c.length;(f||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Qr(this,!1),Qr(this,!0),this.updateState({gestos:{}})),n!==o&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=Zh(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Jh(this,"GroupControl")));var h=!ra(r.container,i.container);h&&(r.container=i.container),(h||f||this.transformOrigin!==(i.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!Hh(this._targetGroups,i.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},e.prototype._updateObserver=function(){},e.defaultProps=B(B({},vi.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(vi),ky=function(t){vn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.moveables=[],r}return e.prototype.render=function(){var r=this,i,n=this.props,o=n.cspNonce,s=n.cssStyled,a=n.persistData,l=n.targets||[],u=l.length,c=this.isUnmounted||!u,f=(i=a==null?void 0:a.children)!==null&&i!==void 0?i:[];return c&&!u&&f.length?l=f.map(function(){return null}):c||(f=[]),Le(s,{cspNonce:o,ref:Ze(this,"controlBox"),className:dt("control-box")},l.map(function(h,d){var p,v,g=(v=(p=n.individualGroupableProps)===null||p===void 0?void 0:p.call(n,h,d))!==null&&v!==void 0?v:{};return Le(vi,B({key:"moveable"+d,ref:af(r,"moveables",d)},n,g,{target:h,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[d]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(r,i,n){n===void 0&&(n=!0),hi(!0),this.moveables.forEach(function(o){o.updateRect(r,i,n)}),hi()},e.prototype.getRect=function(){return B(B({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},e.prototype.request=function(r,i,n){i===void 0&&(i={});var o=this.moveables.map(function(l){return l.request(r,B(B({},i),{isInstant:!1}),!1)}),s=n||i.isInstant,a={request:function(l){return o.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return o.forEach(function(l){return l.requestEnd()}),this}};return s?a.request(i).requestEnd():a},e.prototype.dragStart=function(r,i){i===void 0&&(i=r.target);var n=i,o=me(this.moveables,function(s){var a=s.getTargets()[0],l=s.getControlBoxElement(),u=s.getDragElement();return!a||!u?!1:u===n||u.contains(n)||u!==a&&a===n||a.contains(n)||l===n||l.contains(n)});return o&&o.dragStart(r,i),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Q([],I(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(vi);function rd(t,e){var r=[];return t.forEach(function(i){if(i){if(ge(i)){e[i]&&r.push.apply(r,Q([],I(e[i]),!1));return}$t(i)?r.push.apply(r,Q([],I(rd(i,e)),!1)):r.push(i)}}),r}function id(t,e){var r=[];return t.forEach(function(i){if(i){if(ge(i)){e[i]&&r.push.apply(r,Q([],I(e[i]),!1));return}$t(i)?r.push(id(i,e)):r.push(i)}}),r}function nd(t,e){return t.length!==e.length||t.some(function(r,i){var n=e[i];return!r&&!n?!1:r!=n?$t(r)&&$t(n)?nd(r,n):!0:!1})}var Ey=function(t){vn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new Hf,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return e.makeStyled=function(){var r={},i=this.getTotalAbles();i.forEach(function(o){var s=o.css;s&&s.forEach(function(a){r[a]=!0})});var n=er(r).join(`
`);this.defaultStyled=Yf("div",Cg(Va,cm+n))},e.getTotalAbles=function(){return Q([Yh,ul,td,jh],I(this.defaultAbles),!1)},e.prototype.render=function(){var r,i=this.constructor;i.defaultStyled||i.makeStyled();var n=this.props,o=n.ables,s=n.props,a=Z0(n,["ables","props"]),l=I(this._updateRefs(!0),2),u=l[0],c=l[1],f=rd(u,c),h=f.length>1,d=i.getTotalAbles(),p=Q(Q([],I(d),!1),I(o||[]),!1),v=B(B(B({},a),s||{}),{ables:p,cssStyled:i.defaultStyled,customStyledMap:i.customStyledMap});this._elementTargets=f;var g=null,m=this.moveable,b=a.persistData;if(b!=null&&b.children&&(h=!0),a.individualGroupable)return Le(ky,B({key:"individual-group",ref:Ze(this,"moveable")},v,{target:null,targets:f}));if(h){var C=id(u,c);if(m&&!m.props.groupable&&!m.props.individualGroupable){var S=m.props.target;S&&f.indexOf(S)>-1&&(g=B({},m.state))}return Le(wy,B({key:"group",ref:Ze(this,"moveable")},v,(r=a.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:f,targetGroups:C,firstRenderState:g}))}else{var w=f[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var y=m.moveables||[],_=me(y,function(x){return x.props.target===w});_&&(g=B({},_.state))}return Le(vi,B({key:"single",ref:Ze(this,"moveable")},v,{target:w,firstRenderState:g}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var r,i;return(i=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&i!==void 0?i:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var r=this,i;return this._onChangeTargets=function(){r._onChangeTargets=null,i()},new Promise(function(n){i=n})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(r){var i=this.refTargets,n=nl(this.props.target||this.props.targets),o=typeof document<"u",s=nd(i,n),a=this.selectorMap,l={};return this.refTargets.forEach(function u(c){if(ge(c)){var f=a[c];f?l[c]=a[c]:o&&(s=!0,l[c]=[].slice.call(document.querySelectorAll(c)))}else $t(c)&&c.forEach(u)}),this._tmpRefTargets=n,this._tmpSelectorMap=l,[n,l,!r&&s]},e.prototype._checkChangeTargets=function(){var r,i,n;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var o=this._differ.update(this._elementTargets),s=o.added,a=o.removed,l=s.length||a.length;l&&((i=(r=this.props).onChangeTargets)===null||i===void 0||i.call(r,{moveable:this.moveable,targets:this._elementTargets}),(n=this._onChangeTargets)===null||n===void 0||n.call(this));var u=I(this._updateRefs(),3),c=u[0],f=u[1],h=u[2];this.refTargets=c,this.selectorMap=f,h&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,J0([Sg(Zf)],e.prototype,"moveable",void 0),e}(_f),My=function(t){vn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=cl,e}(Ey),oa=function(t,e){return oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},oa(t,e)};function fl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oa(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var rn=function(){return rn=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},rn.apply(this,arguments)};function Dy(t,e,r,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,r,o):s(e,r))||o);return n>3&&o&&Object.defineProperty(e,r,o),o}var Ty=function(t){fl(e,t);function e(i){var n=t.call(this,i)||this;return n.state={},n.state=n.props,n}var r=e.prototype;return r.render=function(){return Le(My,rn({ref:Ze(this,"moveable")},this.state))},e}(Aa),po=Sy,od=Zf,sd=Cy,Py=function(t){fl(e,t);function e(i,n){n===void 0&&(n={});var o=t.call(this)||this;o.containerProvider=null,o.selfElement=null,o._warp=!1;var s=rn({},n),a={};sd.forEach(function(c){a[Ig("on ".concat(c))]=function(f){return o.trigger(c,f)}});var l;n.warpSelf?(delete n.warpSelf,o._warp=!0,l=i):(l=xi(i).createElement("div"),i.appendChild(l)),o.containerProvider=hu(Le(Ty,rn({ref:Ze(o,"innerMoveable")},s,a)),l),o.selfElement=l;var u=s.target;return $t(u)&&u.length>1&&o.updateRect(),o}var r=e.prototype;return r.setState=function(i,n){this.innerMoveable.setState(i,n)},r.forceUpdate=function(i){this.innerMoveable.forceUpdate(i)},r.dragStart=function(i,n){n===void 0&&(n=i.target);var o=this.innerMoveable;o.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(i,n)},r.destroy=function(){var i,n=this.selfElement;hu(null,n,this.containerProvider),this._warp||(i=n==null?void 0:n.parentElement)===null||i===void 0||i.removeChild(n),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},e=Dy([iu(od,function(i,n){i[n]||(i[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=this.getMoveable();if(!(!a||!a[n]))return a[n].apply(a,o)})}),iu(po,function(i,n){Object.defineProperty(i,n,{get:function(){return this.getMoveable().props[n]},set:function(o){var s;this.setState((s={},s[n]=o,s))},enumerable:!0,configurable:!0})})],e),e}(Io),By=function(t){fl(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Py);const ad={};od.forEach(t=>{ad[t]=function(...e){return this.$_moveable[t](...e)}});const ld={};po.forEach(t=>{ld[t]=function(e){this.$_moveable[t]=e}});const Iy=mp({name:"moveable",methods:ad,props:po,watch:ld,mounted(){const t={},e=this.$props;po.forEach(o=>{const s=e[o];ln(s)||(t[o]=e[o])});const i=this.$refs.moveableElement,n=new By(i,{...t,warpSelf:!0});sd.forEach(o=>{n.on(o,s=>{this.$emit(o,{...s})})}),this.$_moveable=n},beforeUnmount(){this.$_moveable.destroy()}}),Oy=Iy,Ry=(t,e)=>{const r=t.__vccOpts||t;for(const[i,n]of e)r[i]=n;return r},Ay={ref:"moveableElement"};function Ly(t,e,r,i,n,o){return Dt(),It("div",Ay,null,512)}const zy=Ry(Oy,[["render",Ly]]),Ku="/StickerEditor/assets/1-DOU5pnUw.jpg",Wo=(t,e)=>{const r=t.__vccOpts||t;for(const[i,n]of e)r[i]=n;return r},Ny=t=>(_o("data-v-6fb331ac"),t=t(),wo(),t),Gy={class:"flex flex-col items-center justify-center min-h-screen"},Fy={class:"bg-white shadow-2xl rounded-3xl p-8 transition-all duration-300"},Hy={class:"relative group"},Wy=["src"],Vy=["data-id","onMousedown"],jy=["src"],Yy=["onClick"],$y=Uc('<svg width="4vw" height="4vh" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6fb331ac><path d="M9.17065 4C9.58249 2.83481 10.6937 2 11.9999 2C13.3062 2 14.4174 2.83481 14.8292 4" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" data-v-6fb331ac></path><path d="M20.5 6H3.49988" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" data-v-6fb331ac></path><path d="M18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5M18.8334 8.5L18.6334 11.5" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" data-v-6fb331ac></path><path d="M9.5 11L10 16" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" data-v-6fb331ac></path><path d="M14.5 11L14 16" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" data-v-6fb331ac></path></svg>',1),Xy=[$y],Uy={class:"mt-8 flex items-center justify-center space-x-4"},qy=Ny(()=>ut("label",{for:"file-upload",class:"btn btn-secondary"}," Import ",-1)),Ky=["href"],Zy=1,Jy=0,Qy={__name:"Editor",setup(t,{expose:e}){let r=Vt(null),i=Vt(null),n=null;const o=ke("selectedImage"),s=ke("savedImages"),a=ke("images"),l=Vt([]),u=Vt(null),c=Zc(()=>l.value.length>0),f=async()=>{try{const y=await C();r.value.src=y,i.value.href=y,m()}catch(y){console.error("Merge failed",y)}},h=y=>{const _=r.value.getBoundingClientRect(),E={id:Date.now(),src:y,style:{position:"absolute",leftPercent:50,topPercent:50,widthPercent:150/_.width*100,heightPercent:150/_.height*100,transform:"translate(-50%, -50%) rotate(0deg) scale(1, 1)"}};l.value.push(E),_c(()=>{u.value=E.id})},d=({target:y,clientX:_,clientY:x})=>{const k=l.value.find(E=>E.id===parseInt(y.dataset.id));if(k&&r.value){const E=r.value.getBoundingClientRect(),O=y.getBoundingClientRect();let D=_-E.left,T=x-E.top;D=Math.max(O.width/2,Math.min(D,E.width-O.width/2)),T=Math.max(O.height/2,Math.min(T,E.height-O.height/2)),k.style.leftPercent=D/E.width*100,k.style.topPercent=T/E.height*100}},p=({target:y,width:_,height:x})=>{const k=l.value.find(E=>E.id===parseInt(y.dataset.id));if(k&&r.value){const E=r.value.getBoundingClientRect(),O=_/E.width*100,D=x/E.height*100;k.style.widthPercent=O,k.style.heightPercent=D}},v=({target:y,rotate:_,transform:x})=>{const k=l.value.find(E=>E.id===parseInt(y.dataset.id));if(k){const O=k.style.transform.match(/scale\(([-\d.]+),\s*([-\d.]+)\)/),D=O?O[1]:"1",T=O?O[2]:"1";k.style.transform=`translate(-50%, -50%) rotate(${_}deg) scale(${D}, ${T})`}},g=y=>{l.value=l.value.filter(_=>_.id!==y),u.value===y&&(u.value=null)},m=()=>{l.value=[],u.value=null},b=y=>{u.value=y},C=()=>new Promise((y,_)=>{const x=document.createElement("canvas"),k=x.getContext("2d"),E=new Image;E.onload=()=>{x.width=E.width,x.height=E.height,k.drawImage(E,0,0),console.log("Canvas size:",{width:x.width,height:x.height}),console.log("Original image size:",{width:E.width,height:E.height});const O=l.value.map(D=>new Promise(T=>{const R=new Image;R.onload=()=>T(R),R.onerror=()=>T(null),R.src=D.src}));Promise.all(O).then(D=>{D.forEach((T,R)=>{if(T){const L=l.value[R],H=L.style.leftPercent,W=L.style.topPercent,N=L.style.widthPercent,U=L.style.heightPercent;console.log(`Sticker ${R+1} size before merge:`,{widthPercent:N,heightPercent:U});const Z=H/100*x.width,F=W/100*x.height,tt=N/100*x.width,ot=U/100*x.height;let et=0,nt=1,K=1;const st=L.style.transform.match(/rotate\(([-\d.]+)deg\) scale\(([-\d.]+),\s*([-\d.]+)\)/);st&&(et=parseFloat(st[1]),nt=parseFloat(st[2]),K=parseFloat(st[3])),console.log(`Sticker ${R+1} scale factors:`,{scaleX:nt,scaleY:K}),k.save(),k.translate(Z,F),k.rotate(et*Math.PI/180);const ft=tt*nt,gt=ot*K;console.log(`Sticker ${R+1} size after merge:`,{finalWidth:ft,finalHeight:gt}),k.drawImage(T,-ft/2,-gt/2,ft,gt),k.restore()}}),y(x.toDataURL("image/png"))})},E.onerror=_,E.src=r.value.src}),S=async()=>{try{const y=await C();m();const _=new bg(r.value);_.availableMarkerTypes=_.ALL_MARKER_TYPES,_.uiStyleSettings.redoButtonVisible=!0,_.uiStyleSettings.zoomButtonVisible=!0,_.uiStyleSettings.zoomOutButtonVisible=!0,_.uiStyleSettings.clearButtonVisible=!0,_.settings.displayMode="popup",_.settings.defaultColor=["#000000"],_.settings.defaultFontFamilies=["Poetsen One","Indie Flower","Dela Gothic One","DynaPuff","Pixelify Sans","Gluten","Teko"],_.addRenderEventListener(x=>{s.value.push(x),r.value.src=x,i.value.href=x}),r.value.src=y,i.value.href=y,_.show()}catch(y){console.error("Merge failed",y)}},w=y=>{const _=y.target.files[0],x=new FileReader;x.onload=()=>{n=x.result,r.value.src=n,i.value.href=n,a.value.push({src:n,alt:_.name}),emit("newImage",n)},_&&x.readAsDataURL(_)};return ba(()=>{const y=document.createElement("canvas"),_=y.getContext("2d"),x=new Image;x.src=Ku,x.onload=()=>{y.width=x.width,y.height=x.height,_.drawImage(x,0,0),n=y.toDataURL("image/png"),i.value.href=n}}),Ri(l,y=>{console.log(`Total stickers on canvas: ${y.length}`)},{deep:!0}),Ri(o,y=>{y&&(r.value.src=y,i.value.href=y)}),e({addSticker:h}),(y,_)=>(Dt(),It("div",Gy,[ut("div",Fy,[ut("div",Hy,[ut("img",{class:"w-auto min-w-[30vw] max-w-[60vw] h-auto max-h-[75vh] object-contain rounded-2xl",ref_key:"imgRef",ref:r,src:hr(o)||hr(Ku),alt:"Selected image"},null,8,Wy),(Dt(!0),It(le,null,Xi(l.value,x=>(Dt(),It("div",{key:x.id,style:nn({position:"absolute",left:`${x.style.leftPercent}%`,top:`${x.style.topPercent}%`,width:`${x.style.widthPercent}%`,height:`${x.style.heightPercent}%`,transform:x.style.transform}),"data-id":x.id,class:"sticker",onMousedown:k=>b(x.id)},[ut("img",{src:x.src,class:"w-full h-full object-contain"},null,8,jy),ut("button",{onClick:k=>g(x.id),class:"delete-btn"},Xy,8,Yy)],44,Vy))),128)),u.value?(Dt(),$c(hr(zy),{key:0,class:"moveable",target:`.sticker[data-id='${u.value}']`,draggable:!0,rotatable:!0,resizable:!0,origin:!1,keepRatio:!0,throttleDrag:Zy,throttleResize:Jy,renderDirections:["nw","ne","sw","se"],rotationPosition:"top",onDrag:d,onResize:p,onRotate:v},null,8,["target"])):Ke("",!0)])]),ut("div",Uy,[c.value?(Dt(),It("button",{key:0,onClick:f,class:"btn btn-primary"},"Confirm")):Ke("",!0),c.value?(Dt(),It("button",{key:1,onClick:m,class:"btn btn-secondary"},"Cancel")):Ke("",!0),qy,ut("input",{id:"file-upload",type:"file",onChange:w,accept:"image/*",class:"hidden"},null,32),ut("button",{onClick:S,class:"btn btn-secondary"}," Edit "),ut("a",{ref_key:"downloadButton",ref:i,href:hr(n),download:"image.png",class:"btn btn-primary"}," Download ",8,Ky)])]))}},tb=Wo(Qy,[["__scopeId","data-v-6fb331ac"]]),eb="/StickerEditor/assets/1-0XuTPjLX.png",rb="/StickerEditor/assets/2-_Rhau_vo.png",ib="/StickerEditor/assets/3-BXcWFjNm.png",nb="/StickerEditor/assets/4-CnaXBGn_.png",ob="/StickerEditor/assets/5-BPu4JRbl.png",sb="/StickerEditor/assets/6-5kuDDrRc.png",ab="/StickerEditor/assets/7-DfN-oFdh.png",lb="/StickerEditor/assets/8-Bj-yLTE5.png",ub="/StickerEditor/assets/9-Kmg3Xvyw.png",cb="/StickerEditor/assets/1-Ou9kq26v.png",fb="/StickerEditor/assets/10-DPzYjYHE.png",hb="/StickerEditor/assets/11-B9PiGc_V.png",db="/StickerEditor/assets/12-BbYRcrUk.png",pb="/StickerEditor/assets/13-DJwzk_nl.png",vb="/StickerEditor/assets/14-CS5Kdzt3.png",gb="/StickerEditor/assets/15-DXyN3WUN.png",mb="/StickerEditor/assets/16-C3Y3DpeW.png",yb="/StickerEditor/assets/2-y8hTwTlL.png",bb="/StickerEditor/assets/3-BzoEux2N.png",xb="/StickerEditor/assets/4-DtsCYvVE.png",Cb="/StickerEditor/assets/5-C2G1UFD-.png",Sb="/StickerEditor/assets/6-UwhDRNRc.png",_b="/StickerEditor/assets/7-2SRv9blB.png",wb="/StickerEditor/assets/8-Dlvo-EYw.png",kb="/StickerEditor/assets/9-BcT3doT3.png",Eb="/StickerEditor/assets/1-C_dVzUJw.png",Mb="/StickerEditor/assets/10-DM-uAshQ.png",Db="/StickerEditor/assets/11-dAYIZZHJ.png",Tb="/StickerEditor/assets/12-B0u8bVQV.png",Pb="/StickerEditor/assets/2-CR4zqjtb.png",Bb="/StickerEditor/assets/3-BB2ak2Rb.png",Ib="/StickerEditor/assets/4-BcNxVwD9.png",Ob="/StickerEditor/assets/5-Cctr_rhW.png",Rb="/StickerEditor/assets/6-DlO3oQAX.png",Ab="/StickerEditor/assets/7-DHblHS9_.png",Lb="/StickerEditor/assets/8-DFf9YKOS.png",zb="/StickerEditor/assets/9-xsCYuuWp.png",Nb="/StickerEditor/assets/1-0XuTPjLX.png",Gb="/StickerEditor/assets/add2-RRQ8YQ0u.png",Fb="/StickerEditor/assets/add3-DWmAwVb9.png",Hb="/StickerEditor/assets/add4-DrcPqAIq.png",Wb="/StickerEditor/assets/add5-BIXogDIN.png",Vb="/StickerEditor/assets/add6-D0aQ2SaT.png",jb=t=>(_o("data-v-f64bc0ee"),t=t(),wo(),t),Yb={class:"relative flex"},$b={class:"flex space-x-5"},Xb={class:"text-[2.5vh] font-semibold text-gray-800"},Ub=["onClick"],qb=["onWheel"],Kb=["src","alt","onClick"],Zb=jb(()=>ut("svg",{class:"w-[2.5vh] h-[2.5vh] text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[ut("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),Jb=[Zb],Qb={__name:"Sticker",props:{showCloseButton:{type:Boolean,default:!0}},emits:["close"],setup(t,{emit:e}){function r(p,v){return new URL(Object.assign({"../../../assets/Images/sticker/Comic Stickers/1.png":eb,"../../../assets/Images/sticker/Comic Stickers/2.png":rb,"../../../assets/Images/sticker/Comic Stickers/3.png":ib,"../../../assets/Images/sticker/Comic Stickers/4.png":nb,"../../../assets/Images/sticker/Comic Stickers/5.png":ob,"../../../assets/Images/sticker/Comic Stickers/6.png":sb,"../../../assets/Images/sticker/Comic Stickers/7.png":ab,"../../../assets/Images/sticker/Comic Stickers/8.png":lb,"../../../assets/Images/sticker/Comic Stickers/9.png":ub,"../../../assets/Images/sticker/Reaction Stickers/1.png":cb,"../../../assets/Images/sticker/Reaction Stickers/10.png":fb,"../../../assets/Images/sticker/Reaction Stickers/11.png":hb,"../../../assets/Images/sticker/Reaction Stickers/12.png":db,"../../../assets/Images/sticker/Reaction Stickers/13.png":pb,"../../../assets/Images/sticker/Reaction Stickers/14.png":vb,"../../../assets/Images/sticker/Reaction Stickers/15.png":gb,"../../../assets/Images/sticker/Reaction Stickers/16.png":mb,"../../../assets/Images/sticker/Reaction Stickers/2.png":yb,"../../../assets/Images/sticker/Reaction Stickers/3.png":bb,"../../../assets/Images/sticker/Reaction Stickers/4.png":xb,"../../../assets/Images/sticker/Reaction Stickers/5.png":Cb,"../../../assets/Images/sticker/Reaction Stickers/6.png":Sb,"../../../assets/Images/sticker/Reaction Stickers/7.png":_b,"../../../assets/Images/sticker/Reaction Stickers/8.png":wb,"../../../assets/Images/sticker/Reaction Stickers/9.png":kb,"../../../assets/Images/sticker/Sticker Frames/1.png":Eb,"../../../assets/Images/sticker/Sticker Frames/10.png":Mb,"../../../assets/Images/sticker/Sticker Frames/11.png":Db,"../../../assets/Images/sticker/Sticker Frames/12.png":Tb,"../../../assets/Images/sticker/Sticker Frames/2.png":Pb,"../../../assets/Images/sticker/Sticker Frames/3.png":Bb,"../../../assets/Images/sticker/Sticker Frames/4.png":Ib,"../../../assets/Images/sticker/Sticker Frames/5.png":Ob,"../../../assets/Images/sticker/Sticker Frames/6.png":Rb,"../../../assets/Images/sticker/Sticker Frames/7.png":Ab,"../../../assets/Images/sticker/Sticker Frames/8.png":Lb,"../../../assets/Images/sticker/Sticker Frames/9.png":zb,"../../../assets/Images/sticker/add1.png":Nb,"../../../assets/Images/sticker/add2.png":Gb,"../../../assets/Images/sticker/add3.png":Fb,"../../../assets/Images/sticker/add4.png":Hb,"../../../assets/Images/sticker/add5.png":Wb,"../../../assets/Images/sticker/add6.png":Vb})[`../../../assets/Images/sticker/${p}/${v}.png`],import.meta.url).href}const i={comic:["1","2","3","4","5","6","7","8","9"],frames:["1","2","3","4","5","6","7","8","9","10","11","12"],reactions:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"]},n=Vt({comic:i.comic.map(p=>({src:r("Comic Stickers",p),alt:`Comic Stickers ${p}`})),frames:i.frames.map(p=>({src:r("Sticker Frames",p),alt:`Sticker Frames ${p}`})),reactions:i.reactions.map(p=>({src:r("Reaction Stickers",p),alt:`Reaction Stickers ${p}`}))}),o=ke("handleStickerSelected"),s=p=>{o(p)},a=(p,v)=>{if(h[v])return;p.preventDefault();const g=p.currentTarget;g.scrollLeft+=p.deltaY},l=t,u=e,c=Vt(!1);function f(){c.value=!0,setTimeout(()=>{u("close")},200)}const h=bo({comic:!1,frames:!1,reactions:!1});function d(p){h[p]=!h[p]}return(p,v)=>(Dt(),It("div",Yb,[ut("div",{class:Gt(["transition-all duration-300 ease-in-out","mx-auto overflow-y-auto",c.value?"w-0":"w-[20vw]",l.showCloseButton?"bg-Secondary h-screen":"bg-Background my-4 rounded-xl shadow-[0_-1px_40px_-15px] shadow-slate-800/50 h-[95vh]"])},[(Dt(!0),It(le,null,Xi(Object.keys(n.value),(g,m)=>(Dt(),It("div",{key:m,class:"p-[1.5vh] space-y-[1vh] relative"},[ut("div",$b,[ut("h2",Xb,vl(g.toUpperCase()),1),ut("button",{onClick:b=>d(g),class:"bg-blue-500 text-white px-1 py-1 text-xs rounded-full shadow-md hover:bg-blue-600 transition-colors duration-300"},vl(h[g]?"Collapse":"Expand"),9,Ub)]),ut("div",{class:Gt([h[g]?"grid grid-cols-2 gap-4":"flex items-center space-x-[1vw]","py-[1vh] transition-all duration-300",h[g]?"overflow-y-auto":"overflow-x-auto"]),onWheel:b=>a(b,g)},[(Dt(!0),It(le,null,Xi(n.value[g],(b,C)=>(Dt(),It("div",{key:C,class:"flex justify-center items-center flex-shrink-0 transition-transform duration-300 ease-in-out hover:scale-110 hover:brightness-125"},[ut("img",{class:Gt([h[g]?"w-full h-auto":"w-[5vw] h-[5vw] max-w-[72px] max-h-[72px]","rounded-md object-fill cursor-pointer shadow-sm hover:shadow-md transition-shadow duration-300"]),src:b.src,alt:b.alt,onClick:S=>s(b.src),loading:"lazy"},null,10,Kb)]))),128))],42,qb)]))),128))],2),Lt(oi,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-x-4","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition ease-in duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 translate-x-14"},{default:Oi(()=>[l.showCloseButton?(Dt(),It("button",{key:0,class:"absolute top-[2vh] right-0 p-[1vh] bg-white rounded-l-md shadow-md hover:bg-gray-100 transition-colors duration-300",onClick:f},Jb)):Ke("",!0)]),_:1})]))}},tx=Wo(Qb,[["__scopeId","data-v-f64bc0ee"]]),ud=t=>(_o("data-v-39371fb0"),t=t(),wo(),t),ex={class:"relative flex"},rx=ud(()=>ut("div",{class:"whitespace-nowrap overflow-hidden"},[ut("label",{for:"name"},"Image")],-1)),ix=["onClick"],nx=["src","alt"],ox=ud(()=>ut("svg",{class:"icon-svg",width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[ut("path",{d:"M14 8L10 12L14 16",stroke:"#200E32","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),sx=[ox],ax={__name:"Image",props:{showCloseButton:{type:Boolean,default:!0}},emits:["close"],setup(t,{emit:e}){const r=t,i=e,n=Vt(!1);function o(){n.value=!0,setTimeout(()=>{i("close")},200)}const s=ke("images"),a=u=>{i("selectImage",u)},l=u=>{u.preventDefault();const c=u.currentTarget;c.scrollLeft+=u.deltaY};return(u,c)=>(Dt(),It("div",ex,[ut("div",{class:Gt(["transition-all duration-300 ease-in-out","mx-auto",n.value?"w-0":"w-[20vw]",r.showCloseButton?"bg-Secondary h-screen":"bg-Background my-4 rounded-xl shadow-[0_-1px_40px_-15px] shadow-slate-800/50 h-[95vh]"])},[rx,ut("div",{class:"min-h-[95vh] w-[full] overflow-x-hidden flex items-center justify-start rounded-xl",onWheel:l},[(Dt(!0),It(le,null,Xi(hr(s),(f,h)=>(Dt(),It("div",{key:h,class:"object-fill flex justify-center items-center cursor-pointer",onClick:d=>a(f.src)},[ut("img",{class:"min-w-[8vw]",src:f.src,alt:f.alt},null,8,nx)],8,ix))),128))],32)],2),r.showCloseButton?(Dt(),It("div",{key:0,class:Gt(["absolute top-4 transition-all duration-300 ease-in-out",n.value?"right-[calc(100%-3vw)]":"right-0"])},[ut("button",{class:"cursor-pointer p-1 bg-Background rounded-l-xl hover:bg-Main",onClick:o},sx)],2)):Ke("",!0)]))}},lx=Wo(ax,[["__scopeId","data-v-39371fb0"]]),cd=t=>(_o("data-v-0c7fefca"),t=t(),wo(),t),ux={class:"relative flex"},cx=cd(()=>ut("div",{class:"whitespace-nowrap overflow-hidden"},[ut("label",{for:"name"},"Saved")],-1)),fx={class:""},hx=["onClick"],dx=["src"],px=cd(()=>ut("svg",{class:"icon-svg",width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[ut("path",{d:"M14 8L10 12L14 16",stroke:"#200E32","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),vx=[px],gx={__name:"Saved",props:{showCloseButton:{type:Boolean,default:!0}},emits:["close"],setup(t,{emit:e}){const r=t,i=e,n=Vt(!1);function o(){n.value=!0,setTimeout(()=>{i("close")},200)}const s=ke("savedImages"),a=l=>{i("selectImage",l)};return ke("getImageUrl"),(l,u)=>(Dt(),It("div",ux,[ut("div",{class:Gt(["transition-all duration-300 ease-in-out","mx-auto",n.value?"w-0":"w-[20vw]",r.showCloseButton?"bg-Secondary h-screen":"bg-Background my-4 rounded-xl shadow-[0_-1px_40px_-15px] shadow-slate-800/50 h-[95vh]"])},[cx,ut("div",fx,[(Dt(!0),It(le,null,Xi(hr(s),(c,f)=>(Dt(),It("div",{key:f,class:"object-fill flex justify-center items-center cursor-pointer",onClick:h=>a(c)},[ut("img",{class:"max-w-[8vw]",src:c,alt:"Saved Image"},null,8,dx)],8,hx))),128))])],2),r.showCloseButton?(Dt(),It("div",{key:0,class:Gt(["absolute top-4 transition-all duration-300 ease-in-out",n.value?"right-[calc(100%-3vw)]":"right-0"])},[ut("button",{class:"cursor-pointer p-1 bg-Background rounded-l-xl hover:bg-Main",onClick:o},vx)],2)):Ke("",!0)]))}},mx=Wo(gx,[["__scopeId","data-v-0c7fefca"]]),yx={class:"w-full h-screen flex-col justify-center items-center pt-10"},bx={class:"text-center flex flex-col justify-center items-center"},xx=Uc('<svg width="2vw" height="4vh" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 16C9.85038 16.6303 10.8846 17 12 17C13.1154 17 14.1496 16.6303 15 16" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path><ellipse cx="15" cy="10.5" rx="1" ry="1.5" fill="#1C274C"></ellipse><ellipse cx="9" cy="10.5" rx="1" ry="1.5" fill="#1C274C"></ellipse><path d="M15 22H12C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8M15 22C18.866 22 22 18.866 22 15M15 22C15 20.1387 15 19.2081 15.2447 18.4549C15.7393 16.9327 16.9327 15.7393 18.4549 15.2447C19.2081 15 20.1387 15 22 15M22 12V15" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path></svg>',1),Cx=[xx],Sx={class:"text-center flex flex-col justify-center items-center"},_x=ut("svg",{width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[ut("circle",{cx:"16",cy:"8",r:"2",stroke:"#1C274C","stroke-width":"1.5"}),ut("path",{d:"M5 13.307L5.81051 12.5542C6.73658 11.6941 8.18321 11.7424 9.04988 12.6623L11.6974 15.4727C12.2356 16.0439 13.1166 16.1209 13.7457 15.6516C14.6522 14.9753 15.9144 15.0522 16.7322 15.8334L19 18",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),ut("path",{d:"M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})],-1),wx=[_x],kx={class:"text-center flex flex-col justify-center items-center"},Ex=ut("svg",{width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[ut("path",{d:"M9.5 14.4L10.9286 16L14.5 12",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),ut("path",{d:"M2 11.9997C2 7.28562 2 4.9286 3.46447 3.46413C4.70529 2.22331 6.58687 2.03382 10 2.00488M22 11.9997C22 7.28562 22 4.9286 20.5355 3.46413C19.2947 2.22331 17.4131 2.03382 14 2.00488",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),ut("path",{d:"M10 22C7.19974 22 5.79961 22 4.73005 21.455C3.78924 20.9757 3.02433 20.2108 2.54497 19.27C2 18.2004 2 16.8003 2 14C2 11.1997 2 9.79961 2.54497 8.73005C3.02433 7.78924 3.78924 7.02433 4.73005 6.54497C5.79961 6 7.19974 6 10 6H14C16.8003 6 18.2004 6 19.27 6.54497C20.2108 7.02433 20.9757 7.78924 21.455 8.73005C22 9.79961 22 11.1997 22 14C22 16.8003 22 18.2004 21.455 19.27C20.9757 20.2108 20.2108 20.9757 19.27 21.455C18.2004 22 16.8003 22 14 22",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})],-1),Mx=[Ex],Dx={class:"text-center flex flex-col justify-center items-center"},Tx=ut("svg",{width:"2vw",height:"4vh",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[ut("path",{d:"M12 17V11",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),ut("circle",{cx:"1",cy:"1",r:"1",transform:"matrix(1 0 0 -1 11 9)",fill:"#1C274C"}),ut("path",{d:"M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})],-1),Px=[Tx],Bx={__name:"AsideNav",emits:["selectedImage"],setup(t,{emit:e}){const r=Vt(!1),i=Vt(!1),n=Vt(!1),o=Vt(null),s=Vt("bg-Background"),a=ke("selectedImage"),l=e;function u(p){p==="sticker"?(r.value=!0,i.value=!1,n.value=!1):p==="image"?(r.value=!1,i.value=!0,n.value=!1):p==="saved"&&(r.value=!1,i.value=!1,n.value=!0),d(),l("popup-toggled",r.value||i.value||n.value,300)}function c(p){!r.value&&!i.value&&!n.value&&(o.value=p)}function f(){o.value=null}function h(p){p==="sticker"?r.value=!1:p==="image"?i.value=!1:p==="saved"&&(n.value=!1),d(),l("popup-toggled",!1,0)}function d(){s.value=(r.value||i.value||n.value,"bg-Background")}return(p,v)=>(Dt(),It("div",{class:Gt([s.value,"min-h-screen w-[5vw] flex flex-row fixed"])},[ut("ul",yx,[ut("li",bx,[ut("div",{class:Gt([r.value?"bg-Secondary":"bg-transparent","group flex flex-col justify-center items-center pt-4 pb-1 cursor-pointer relative w-full transition-all duration-300 ease-in-out"]),onClick:v[0]||(v[0]=g=>u("sticker")),onMouseenter:v[1]||(v[1]=g=>c("sticker")),onMouseleave:f},[ut("button",{class:Gt(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",o.value==="sticker"&&!r.value?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_0px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent",r.value?"bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":""])},Cx,2),ut("span",{class:Gt(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":o.value==="sticker"||r.value,"opacity-0":o.value!=="sticker"&&!r.value}])}," Sticker ",2)],34)]),ut("li",Sx,[ut("div",{class:Gt([i.value?"bg-Secondary":"bg-transparent","group flex flex-col justify-center items-center pt-4 pb-1 cursor-pointer relative w-full transition-all duration-300 ease-in-out"]),onClick:v[2]||(v[2]=g=>u("image")),onMouseenter:v[3]||(v[3]=g=>c("image")),onMouseleave:f},[ut("button",{class:Gt(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",o.value==="image"&&!i.value?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_0px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent",i.value?"bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":""])},wx,2),ut("span",{class:Gt(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":o.value==="image"||i.value,"opacity-0":o.value!=="image"&&!i.value}])}," Image ",2)],34)]),ut("li",kx,[ut("div",{class:Gt([n.value?"bg-Secondary":"bg-transparent","group flex flex-col justify-center items-center pt-4 pb-1 cursor-pointer relative w-full transition-all duration-300 ease-in-out"]),onClick:v[4]||(v[4]=g=>u("saved")),onMouseenter:v[5]||(v[5]=g=>c("saved")),onMouseleave:f},[ut("button",{class:Gt(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",o.value==="saved"&&!n.value?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_0px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent",n.value?"bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":""])},Mx,2),ut("span",{class:Gt(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":o.value==="saved"||n.value,"opacity-0":o.value!=="saved"&&!n.value}])}," Saved ",2)],34)]),ut("li",Dx,[ut("div",{class:"group flex flex-col justify-center items-center pt-4 pb-1 cursor-pointer relative w-full",onClick:v[6]||(v[6]=g=>u("info")),onMouseenter:v[7]||(v[7]=g=>c("info")),onMouseleave:f},[ut("button",{class:Gt(["transition-all duration-300 ease-in-out","p-1 flex justify-center items-center",o.value==="info"?"bg-Background hover:bg-Tertiary rounded-xl shadow-[0_1px_10px_-1px] shadow-slate-800 transform scale-110":"bg-transparent hover:bg-Tertiary hover:rounded-xl"])},Px,2),ut("span",{class:Gt(["mt-1 transition-all duration-300 ease-in-out",{"opacity-100":o.value==="info","opacity-0":o.value!=="info"}])}," Info ",2)],32)])]),Lt(oi,{name:"slide-fade"},{default:Oi(()=>[r.value||o.value==="sticker"&&!r.value&&!i.value&&!n.value?(Dt(),It("div",{key:0,class:"absolute left-[5vw] top-0",onMouseenter:v[9]||(v[9]=g=>c("sticker")),onMouseleave:f,onClick:v[10]||(v[10]=g=>u("sticker"))},[Lt(tx,{showCloseButton:r.value,onClose:v[8]||(v[8]=()=>h("sticker"))},null,8,["showCloseButton"])],32)):Ke("",!0)]),_:1}),Lt(oi,{name:"slide-fade"},{default:Oi(()=>[i.value||o.value==="image"&&!r.value&&!i.value&&!n.value?(Dt(),It("div",{key:0,class:"absolute left-[5vw] top-0",onMouseenter:v[13]||(v[13]=g=>c("image")),onMouseleave:f,onClick:v[14]||(v[14]=g=>u("image"))},[Lt(lx,{showCloseButton:i.value,onClose:v[11]||(v[11]=()=>h("image")),onSelectImage:v[12]||(v[12]=g=>a.value=g)},null,8,["showCloseButton"])],32)):Ke("",!0)]),_:1}),Lt(oi,{name:"slide-fade"},{default:Oi(()=>[n.value||o.value==="saved"&&!r.value&&!i.value&&!n.value?(Dt(),It("div",{key:0,class:"absolute left-[5vw] top-0",onMouseenter:v[17]||(v[17]=g=>c("saved")),onMouseleave:f,onClick:v[18]||(v[18]=g=>u("saved"))},[Lt(mx,{showCloseButton:n.value,onClose:v[15]||(v[15]=()=>h("saved")),onSelectImage:v[16]||(v[16]=g=>a.value=g)},null,8,["showCloseButton"])],32)):Ke("",!0)]),_:1})],2))}},Ix={class:"flex bg-Background min-h-screen"},Ox={class:"w-[5vw] flex-shrink-0 z-10"},Rx={class:"w-full max-w-4xl flex justify-center items-center"},Ax={__name:"ImageEditor",setup(t){function e(d){var v;return(v=Object.assign({"../assets/Images/gallery/1.jpg":Fv,"../assets/Images/gallery/10.png":Wv,"../assets/Images/gallery/2.png":jv,"../assets/Images/gallery/3.jpg":$v,"../assets/Images/gallery/4.png":Uv,"../assets/Images/gallery/5.png":Kv,"../assets/Images/gallery/6.png":Jv,"../assets/Images/gallery/7.png":tg,"../assets/Images/gallery/8.png":rg,"../assets/Images/gallery/9.png":ng})[`../assets/Images/gallery/${d}`])==null?void 0:v.default}let i=Vt(["1.jpg","2.png","3.jpg","4.png","5.png","6.png","7.png","8.png","9.png","10.png"].map((d,p)=>({src:e(d),alt:`Images ${p+1}`}))),n=Vt(!1),o=Vt(null);const s=Vt([]),a=Vt(null),l=Vt(!1),u=Vt(0),c=d=>{i.value.unshift({src:d,alt:"New Image"})},f=d=>{a.value&&a.value.addSticker(d)},h=(d,p)=>{l.value=d,u.value=p};return Dr("handleAsidePopupToggle",h),Dr("handleStickerSelected",f),Dr("images",i),Dr("selectedImage",o),Dr("typeButton",n),Dr("savedImages",s),(d,p)=>(Dt(),It("div",Ix,[ut("aside",Ox,[Lt(Bx,{onPopupToggled:h})]),ut("main",{class:"flex-grow flex justify-center items-center transition-all duration-300 ease-in-out",style:nn({marginLeft:l.value?`${u.value}px`:"0"})},[ut("section",Rx,[Lt(tb,{ref_key:"editorRef",ref:a,"selected-image":hr(o),onNewImage:c},null,8,["selected-image"])])],4)]))}},Lx={__name:"App",setup(t){return(e,r)=>(Dt(),It("main",null,[Lt(Ax)]))}};Lv(Lx).mount("#app");
