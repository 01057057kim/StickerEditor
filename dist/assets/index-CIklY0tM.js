(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Kr(i,t){const e=new Set(i.split(","));return t?s=>e.has(s.toLowerCase()):s=>e.has(s)}const q={},Fe=[],Lt=()=>{},Cl=()=>!1,Vs=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),qr=i=>i.startsWith("onUpdate:"),mt=Object.assign,Jr=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},xl=Object.prototype.hasOwnProperty,z=(i,t)=>xl.call(i,t),D=Array.isArray,We=i=>zs(i)==="[object Map]",jo=i=>zs(i)==="[object Set]",N=i=>typeof i=="function",ot=i=>typeof i=="string",Ke=i=>typeof i=="symbol",st=i=>i!==null&&typeof i=="object",Vo=i=>(st(i)||N(i))&&N(i.then)&&N(i.catch),zo=Object.prototype.toString,zs=i=>zo.call(i),Sl=i=>zs(i).slice(8,-1),$o=i=>zs(i)==="[object Object]",Zr=i=>ot(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,gi=Kr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$s=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},_l=/-(\w)/g,Ue=$s(i=>i.replace(_l,(t,e)=>e?e.toUpperCase():"")),kl=/\B([A-Z])/g,qe=$s(i=>i.replace(kl,"-$1").toLowerCase()),Go=$s(i=>i.charAt(0).toUpperCase()+i.slice(1)),ar=$s(i=>i?`on${Go(i)}`:""),ge=(i,t)=>!Object.is(i,t),Ui=(i,t)=>{for(let e=0;e<i.length;e++)i[e](t)},us=(i,t,e)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value:e})},kr=i=>{const t=parseFloat(i);return isNaN(t)?i:t};let Nn;const Uo=()=>Nn||(Nn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gs(i){if(D(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=ot(s)?Ml(s):Gs(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(ot(i)||st(i))return i}const El=/;(?![^(]*\))/g,Pl=/:([^]+)/,Al=/\/\*[^]*?\*\//g;function Ml(i){const t={};return i.replace(Al,"").split(El).forEach(e=>{if(e){const s=e.split(Pl);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Qr(i){let t="";if(ot(i))t=i;else if(D(i))for(let e=0;e<i.length;e++){const s=Qr(i[e]);s&&(t+=s+" ")}else if(st(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const Tl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bl=Kr(Tl);function Xo(i){return!!i||i===""}const Fn=i=>ot(i)?i:i==null?"":D(i)||st(i)&&(i.toString===zo||!N(i.toString))?JSON.stringify(i,Yo,2):String(i),Yo=(i,t)=>t&&t.__v_isRef?Yo(i,t.value):We(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,n],r)=>(e[lr(s,r)+" =>"]=n,e),{})}:jo(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>lr(e))}:Ke(t)?lr(t):st(t)&&!D(t)&&!$o(t)?String(t):t,lr=(i,t="")=>{var e;return Ke(i)?`Symbol(${(e=i.description)!=null?e:t})`:i};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ft;class Rl{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ft,!t&&Ft&&(this.index=(Ft.scopes||(Ft.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=Ft;try{return Ft=this,t()}finally{Ft=e}}}on(){Ft=this}off(){Ft=this.parent}stop(t){if(this._active){let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function Ll(i,t=Ft){t&&t.active&&t.effects.push(i)}function Il(){return Ft}let _e;class tn{constructor(t,e,s,n){this.fn=t,this.trigger=e,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Ll(this,n)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Ae();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(Ol(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Me()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=fe,e=_e;try{return fe=!0,_e=this,this._runnings++,Wn(this),this.fn()}finally{Hn(this),this._runnings--,_e=e,fe=t}}stop(){var t;this.active&&(Wn(this),Hn(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function Ol(i){return i.value}function Wn(i){i._trackId++,i._depsLength=0}function Hn(i){if(i.deps.length>i._depsLength){for(let t=i._depsLength;t<i.deps.length;t++)Ko(i.deps[t],i);i.deps.length=i._depsLength}}function Ko(i,t){const e=i.get(t);e!==void 0&&t._trackId!==e&&(i.delete(t),i.size===0&&i.cleanup())}let fe=!0,Er=0;const qo=[];function Ae(){qo.push(fe),fe=!1}function Me(){const i=qo.pop();fe=i===void 0?!0:i}function en(){Er++}function sn(){for(Er--;!Er&&Pr.length;)Pr.shift()()}function Jo(i,t,e){if(t.get(i)!==i._trackId){t.set(i,i._trackId);const s=i.deps[i._depsLength];s!==t?(s&&Ko(s,i),i.deps[i._depsLength++]=t):i._depsLength++}}const Pr=[];function Zo(i,t,e){en();for(const s of i.keys()){let n;s._dirtyLevel<t&&(n??(n=i.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=t),s._shouldSchedule&&(n??(n=i.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&Pr.push(s.scheduler)))}sn()}const Qo=(i,t)=>{const e=new Map;return e.cleanup=i,e.computed=t,e},Ar=new WeakMap,ke=Symbol(""),Mr=Symbol("");function kt(i,t,e){if(fe&&_e){let s=Ar.get(i);s||Ar.set(i,s=new Map);let n=s.get(e);n||s.set(e,n=Qo(()=>s.delete(e))),Jo(_e,n)}}function ne(i,t,e,s,n,r){const o=Ar.get(i);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&D(i)){const l=Number(s);o.forEach((c,u)=>{(u==="length"||!Ke(u)&&u>=l)&&a.push(c)})}else switch(e!==void 0&&a.push(o.get(e)),t){case"add":D(i)?Zr(e)&&a.push(o.get("length")):(a.push(o.get(ke)),We(i)&&a.push(o.get(Mr)));break;case"delete":D(i)||(a.push(o.get(ke)),We(i)&&a.push(o.get(Mr)));break;case"set":We(i)&&a.push(o.get(ke));break}en();for(const l of a)l&&Zo(l,4);sn()}const Dl=Kr("__proto__,__v_isRef,__isVue"),ta=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(Ke)),jn=Nl();function Nl(){const i={};return["includes","indexOf","lastIndexOf"].forEach(t=>{i[t]=function(...e){const s=$(this);for(let r=0,o=this.length;r<o;r++)kt(s,"get",r+"");const n=s[t](...e);return n===-1||n===!1?s[t](...e.map($)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{i[t]=function(...e){Ae(),en();const s=$(this)[t].apply(this,e);return sn(),Me(),s}}),i}function Fl(i){const t=$(this);return kt(t,"has",i),t.hasOwnProperty(i)}class ea{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(n?r?Jl:na:r?ra:sa).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=D(t);if(!n){if(o&&z(jn,e))return Reflect.get(jn,e,s);if(e==="hasOwnProperty")return Fl}const a=Reflect.get(t,e,s);return(Ke(e)?ta.has(e):Dl(e))||(n||kt(t,"get",e),r)?a:yt(a)?o&&Zr(e)?a:a.value:st(a)?n?oa(a):on(a):a}}class ia extends ea{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(!this._isShallow){const l=Xe(r);if(!ds(s)&&!Xe(s)&&(r=$(r),s=$(s)),!D(t)&&yt(r)&&!yt(s))return l?!1:(r.value=s,!0)}const o=D(t)&&Zr(e)?Number(e)<t.length:z(t,e),a=Reflect.set(t,e,s,n);return t===$(n)&&(o?ge(s,r)&&ne(t,"set",e,s):ne(t,"add",e,s)),a}deleteProperty(t,e){const s=z(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&ne(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!Ke(e)||!ta.has(e))&&kt(t,"has",e),s}ownKeys(t){return kt(t,"iterate",D(t)?"length":ke),Reflect.ownKeys(t)}}class Wl extends ea{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Hl=new ia,jl=new Wl,Vl=new ia(!0),rn=i=>i,Us=i=>Reflect.getPrototypeOf(i);function Di(i,t,e=!1,s=!1){i=i.__v_raw;const n=$(i),r=$(t);e||(ge(t,r)&&kt(n,"get",t),kt(n,"get",r));const{has:o}=Us(n),a=s?rn:e?ln:Ci;if(o.call(n,t))return a(i.get(t));if(o.call(n,r))return a(i.get(r));i!==n&&i.get(t)}function Ni(i,t=!1){const e=this.__v_raw,s=$(e),n=$(i);return t||(ge(i,n)&&kt(s,"has",i),kt(s,"has",n)),i===n?e.has(i):e.has(i)||e.has(n)}function Fi(i,t=!1){return i=i.__v_raw,!t&&kt($(i),"iterate",ke),Reflect.get(i,"size",i)}function Vn(i){i=$(i);const t=$(this);return Us(t).has.call(t,i)||(t.add(i),ne(t,"add",i,i)),this}function zn(i,t){t=$(t);const e=$(this),{has:s,get:n}=Us(e);let r=s.call(e,i);r||(i=$(i),r=s.call(e,i));const o=n.call(e,i);return e.set(i,t),r?ge(t,o)&&ne(e,"set",i,t):ne(e,"add",i,t),this}function $n(i){const t=$(this),{has:e,get:s}=Us(t);let n=e.call(t,i);n||(i=$(i),n=e.call(t,i)),s&&s.call(t,i);const r=t.delete(i);return n&&ne(t,"delete",i,void 0),r}function Gn(){const i=$(this),t=i.size!==0,e=i.clear();return t&&ne(i,"clear",void 0,void 0),e}function Wi(i,t){return function(s,n){const r=this,o=r.__v_raw,a=$(o),l=t?rn:i?ln:Ci;return!i&&kt(a,"iterate",ke),o.forEach((c,u)=>s.call(n,l(c),l(u),r))}}function Hi(i,t,e){return function(...s){const n=this.__v_raw,r=$(n),o=We(r),a=i==="entries"||i===Symbol.iterator&&o,l=i==="keys"&&o,c=n[i](...s),u=e?rn:t?ln:Ci;return!t&&kt(r,"iterate",l?Mr:ke),{next(){const{value:f,done:w}=c.next();return w?{value:f,done:w}:{value:a?[u(f[0]),u(f[1])]:u(f),done:w}},[Symbol.iterator](){return this}}}}function le(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function zl(){const i={get(r){return Di(this,r)},get size(){return Fi(this)},has:Ni,add:Vn,set:zn,delete:$n,clear:Gn,forEach:Wi(!1,!1)},t={get(r){return Di(this,r,!1,!0)},get size(){return Fi(this)},has:Ni,add:Vn,set:zn,delete:$n,clear:Gn,forEach:Wi(!1,!0)},e={get(r){return Di(this,r,!0)},get size(){return Fi(this,!0)},has(r){return Ni.call(this,r,!0)},add:le("add"),set:le("set"),delete:le("delete"),clear:le("clear"),forEach:Wi(!0,!1)},s={get(r){return Di(this,r,!0,!0)},get size(){return Fi(this,!0)},has(r){return Ni.call(this,r,!0)},add:le("add"),set:le("set"),delete:le("delete"),clear:le("clear"),forEach:Wi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=Hi(r,!1,!1),e[r]=Hi(r,!0,!1),t[r]=Hi(r,!1,!0),s[r]=Hi(r,!0,!0)}),[i,e,t,s]}const[$l,Gl,Ul,Xl]=zl();function nn(i,t){const e=t?i?Xl:Ul:i?Gl:$l;return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(z(e,n)&&n in s?e:s,n,r)}const Yl={get:nn(!1,!1)},Kl={get:nn(!1,!0)},ql={get:nn(!0,!1)},sa=new WeakMap,ra=new WeakMap,na=new WeakMap,Jl=new WeakMap;function Zl(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ql(i){return i.__v_skip||!Object.isExtensible(i)?0:Zl(Sl(i))}function on(i){return Xe(i)?i:an(i,!1,Hl,Yl,sa)}function th(i){return an(i,!1,Vl,Kl,ra)}function oa(i){return an(i,!0,jl,ql,na)}function an(i,t,e,s,n){if(!st(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=n.get(i);if(r)return r;const o=Ql(i);if(o===0)return i;const a=new Proxy(i,o===2?s:e);return n.set(i,a),a}function He(i){return Xe(i)?He(i.__v_raw):!!(i&&i.__v_isReactive)}function Xe(i){return!!(i&&i.__v_isReadonly)}function ds(i){return!!(i&&i.__v_isShallow)}function aa(i){return He(i)||Xe(i)}function $(i){const t=i&&i.__v_raw;return t?$(t):i}function la(i){return Object.isExtensible(i)&&us(i,"__v_skip",!0),i}const Ci=i=>st(i)?on(i):i,ln=i=>st(i)?oa(i):i;class ha{constructor(t,e,s,n){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new tn(()=>t(this._value),()=>Xi(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=s}get value(){const t=$(this);return(!t._cacheable||t.effect.dirty)&&ge(t._value,t._value=t.effect.run())&&Xi(t,4),ca(t),t.effect._dirtyLevel>=2&&Xi(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function eh(i,t,e=!1){let s,n;const r=N(i);return r?(s=i,n=Lt):(s=i.get,n=i.set),new ha(s,n,r||!n,e)}function ca(i){var t;fe&&_e&&(i=$(i),Jo(_e,(t=i.dep)!=null?t:i.dep=Qo(()=>i.dep=void 0,i instanceof ha?i:void 0)))}function Xi(i,t=4,e){i=$(i);const s=i.dep;s&&Zo(s,t)}function yt(i){return!!(i&&i.__v_isRef===!0)}function Tt(i){return ih(i,!1)}function ih(i,t){return yt(i)?i:new sh(i,t)}class sh{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:$(t),this._value=e?t:Ci(t)}get value(){return ca(this),this._value}set value(t){const e=this.__v_isShallow||ds(t)||Xe(t);t=e?t:$(t),ge(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Ci(t),Xi(this,4))}}function ft(i){return yt(i)?i.value:i}const rh={get:(i,t,e)=>ft(Reflect.get(i,t,e)),set:(i,t,e,s)=>{const n=i[t];return yt(n)&&!yt(e)?(n.value=e,!0):Reflect.set(i,t,e,s)}};function ua(i){return He(i)?i:new Proxy(i,rh)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function pe(i,t,e,s){try{return s?i(...s):i()}catch(n){Xs(n,t,e)}}function $t(i,t,e,s){if(N(i)){const r=pe(i,t,e,s);return r&&Vo(r)&&r.catch(o=>{Xs(o,t,e)}),r}const n=[];for(let r=0;r<i.length;r++)n.push($t(i[r],t,e,s));return n}function Xs(i,t,e,s=!0){const n=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${e}`;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](i,o,a)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){pe(l,null,10,[i,o,a]);return}}nh(i,e,n,s)}function nh(i,t,e,s=!0){console.error(i)}let xi=!1,Tr=!1;const pt=[];let Jt=0;const je=[];let ce=null,we=0;const da=Promise.resolve();let hn=null;function oh(i){const t=hn||da;return i?t.then(this?i.bind(this):i):t}function ah(i){let t=Jt+1,e=pt.length;for(;t<e;){const s=t+e>>>1,n=pt[s],r=Si(n);r<i||r===i&&n.pre?t=s+1:e=s}return t}function cn(i){(!pt.length||!pt.includes(i,xi&&i.allowRecurse?Jt+1:Jt))&&(i.id==null?pt.push(i):pt.splice(ah(i.id),0,i),fa())}function fa(){!xi&&!Tr&&(Tr=!0,hn=da.then(ga))}function lh(i){const t=pt.indexOf(i);t>Jt&&pt.splice(t,1)}function hh(i){D(i)?je.push(...i):(!ce||!ce.includes(i,i.allowRecurse?we+1:we))&&je.push(i),fa()}function Un(i,t,e=xi?Jt+1:0){for(;e<pt.length;e++){const s=pt[e];if(s&&s.pre){if(i&&s.id!==i.uid)continue;pt.splice(e,1),e--,s()}}}function pa(i){if(je.length){const t=[...new Set(je)].sort((e,s)=>Si(e)-Si(s));if(je.length=0,ce){ce.push(...t);return}for(ce=t,we=0;we<ce.length;we++)ce[we]();ce=null,we=0}}const Si=i=>i.id==null?1/0:i.id,ch=(i,t)=>{const e=Si(i)-Si(t);if(e===0){if(i.pre&&!t.pre)return-1;if(t.pre&&!i.pre)return 1}return e};function ga(i){Tr=!1,xi=!0,pt.sort(ch);try{for(Jt=0;Jt<pt.length;Jt++){const t=pt[Jt];t&&t.active!==!1&&pe(t,null,14)}}finally{Jt=0,pt.length=0,pa(),xi=!1,hn=null,(pt.length||je.length)&&ga()}}function uh(i,t,...e){if(i.isUnmounted)return;const s=i.vnode.props||q;let n=e;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:w}=s[u]||q;w&&(n=e.map(g=>ot(g)?g.trim():g)),f&&(n=e.map(kr))}let a,l=s[a=ar(t)]||s[a=ar(Ue(t))];!l&&r&&(l=s[a=ar(qe(t))]),l&&$t(l,i,6,n);const c=s[a+"Once"];if(c){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,$t(c,i,6,n)}}function ma(i,t,e=!1){const s=t.emitsCache,n=s.get(i);if(n!==void 0)return n;const r=i.emits;let o={},a=!1;if(!N(i)){const l=c=>{const u=ma(c,t,!0);u&&(a=!0,mt(o,u))};!e&&t.mixins.length&&t.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!r&&!a?(st(i)&&s.set(i,null),null):(D(r)?r.forEach(l=>o[l]=null):mt(o,r),st(i)&&s.set(i,o),o)}function Ys(i,t){return!i||!Vs(t)?!1:(t=t.slice(2).replace(/Once$/,""),z(i,t[0].toLowerCase()+t.slice(1))||z(i,qe(t))||z(i,t))}let Bt=null,Ks=null;function fs(i){const t=Bt;return Bt=i,Ks=i&&i.type.__scopeId||null,t}function dh(i){Ks=i}function fh(){Ks=null}function ph(i,t=Bt,e){if(!t||i._n)return i;const s=(...n)=>{s._d&&io(-1);const r=fs(t);let o;try{o=i(...n)}finally{fs(r),s._d&&io(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function hr(i){const{type:t,vnode:e,proxy:s,withProxy:n,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:w,setupState:g,ctx:v,inheritAttrs:P}=i;let T,B;const j=fs(i);try{if(e.shapeFlag&4){const F=n||s,G=F;T=qt(u.call(G,F,f,r,g,w,v)),B=l}else{const F=t;T=qt(F.length>1?F(r,{attrs:l,slots:a,emit:c}):F(r,null)),B=t.props?l:gh(l)}}catch(F){vi.length=0,Xs(F,i,1),T=St(Ee)}let I=T;if(B&&P!==!1){const F=Object.keys(B),{shapeFlag:G}=I;F.length&&G&7&&(o&&F.some(qr)&&(B=mh(B,o)),I=Ye(I,B))}return e.dirs&&(I=Ye(I),I.dirs=I.dirs?I.dirs.concat(e.dirs):e.dirs),e.transition&&(I.transition=e.transition),T=I,fs(j),T}const gh=i=>{let t;for(const e in i)(e==="class"||e==="style"||Vs(e))&&((t||(t={}))[e]=i[e]);return t},mh=(i,t)=>{const e={};for(const s in i)(!qr(s)||!(s.slice(9)in t))&&(e[s]=i[s]);return e};function yh(i,t,e){const{props:s,children:n,component:r}=i,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return s?Xn(s,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const w=u[f];if(o[w]!==s[w]&&!Ys(c,w))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Xn(s,o,c):!0:!!o;return!1}function Xn(i,t,e){const s=Object.keys(t);if(s.length!==Object.keys(i).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==i[r]&&!Ys(e,r))return!0}return!1}function vh({vnode:i,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===i&&(s.el=i.el),s===i)(i=t.vnode).el=e,t=t.parent;else break}}const bh=Symbol.for("v-ndc"),wh=i=>i.__isSuspense;function Ch(i,t){t&&t.pendingBranch?D(i)?t.effects.push(...i):t.effects.push(i):hh(i)}const xh=Symbol.for("v-scx"),Sh=()=>Qt(xh),ji={};function Yi(i,t,e){return ya(i,t,e)}function ya(i,t,{immediate:e,deep:s,flush:n,once:r,onTrack:o,onTrigger:a}=q){if(t&&r){const L=t;t=(...U)=>{L(...U),G()}}const l=wt,c=L=>s===!0?L:xe(L,s===!1?1:void 0);let u,f=!1,w=!1;if(yt(i)?(u=()=>i.value,f=ds(i)):He(i)?(u=()=>c(i),f=!0):D(i)?(w=!0,f=i.some(L=>He(L)||ds(L)),u=()=>i.map(L=>{if(yt(L))return L.value;if(He(L))return c(L);if(N(L))return pe(L,l,2)})):N(i)?t?u=()=>pe(i,l,2):u=()=>(g&&g(),$t(i,l,3,[v])):u=Lt,t&&s){const L=u;u=()=>xe(L())}let g,v=L=>{g=I.onStop=()=>{pe(L,l,4),g=I.onStop=void 0}},P;if(Qs)if(v=Lt,t?e&&$t(t,l,3,[u(),w?[]:void 0,v]):u(),n==="sync"){const L=Sh();P=L.__watcherHandles||(L.__watcherHandles=[])}else return Lt;let T=w?new Array(i.length).fill(ji):ji;const B=()=>{if(!(!I.active||!I.dirty))if(t){const L=I.run();(s||f||(w?L.some((U,rt)=>ge(U,T[rt])):ge(L,T)))&&(g&&g(),$t(t,l,3,[L,T===ji?void 0:w&&T[0]===ji?[]:T,v]),T=L)}else I.run()};B.allowRecurse=!!t;let j;n==="sync"?j=B:n==="post"?j=()=>Ct(B,l&&l.suspense):(B.pre=!0,l&&(B.id=l.uid),j=()=>cn(B));const I=new tn(u,Lt,j),F=Il(),G=()=>{I.stop(),F&&Jr(F.effects,I)};return t?e?B():T=I.run():n==="post"?Ct(I.run.bind(I),l&&l.suspense):I.run(),P&&P.push(G),G}function _h(i,t,e){const s=this.proxy,n=ot(i)?i.includes(".")?va(s,i):()=>s[i]:i.bind(s,s);let r;N(t)?r=t:(r=t.handler,e=t);const o=Mi(this),a=ya(n,r.bind(s),e);return o(),a}function va(i,t){const e=t.split(".");return()=>{let s=i;for(let n=0;n<e.length&&s;n++)s=s[e[n]];return s}}function xe(i,t,e=0,s){if(!st(i)||i.__v_skip)return i;if(t&&t>0){if(e>=t)return i;e++}if(s=s||new Set,s.has(i))return i;if(s.add(i),yt(i))xe(i.value,t,e,s);else if(D(i))for(let n=0;n<i.length;n++)xe(i[n],t,e,s);else if(jo(i)||We(i))i.forEach(n=>{xe(n,t,e,s)});else if($o(i))for(const n in i)xe(i[n],t,e,s);return i}function kh(i,t){if(Bt===null)return i;const e=tr(Bt)||Bt.proxy,s=i.dirs||(i.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,a,l=q]=t[n];r&&(N(r)&&(r={mounted:r,updated:r}),r.deep&&xe(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return i}function ve(i,t,e,s){const n=i.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Ae(),$t(l,e,8,[i.el,a,i,t]),Me())}}const Ki=i=>!!i.type.__asyncLoader,ba=i=>i.type.__isKeepAlive;function Eh(i,t){wa(i,"a",t)}function Ph(i,t){wa(i,"da",t)}function wa(i,t,e=wt){const s=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(qs(t,s,e),e){let n=e.parent;for(;n&&n.parent;)ba(n.parent.vnode)&&Ah(s,t,e,n),n=n.parent}}function Ah(i,t,e,s){const n=qs(t,i,s,!0);xa(()=>{Jr(s[t],n)},e)}function qs(i,t,e=wt,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...o)=>{if(e.isUnmounted)return;Ae();const a=Mi(e),l=$t(t,e,i,o);return a(),Me(),l});return s?n.unshift(r):n.push(r),r}}const oe=i=>(t,e=wt)=>(!Qs||i==="sp")&&qs(i,(...s)=>t(...s),e),Mh=oe("bm"),Ca=oe("m"),Th=oe("bu"),Bh=oe("u"),Rh=oe("bum"),xa=oe("um"),Lh=oe("sp"),Ih=oe("rtg"),Oh=oe("rtc");function Dh(i,t=wt){qs("ec",i,t)}function ps(i,t,e,s){let n;const r=e&&e[s];if(D(i)||ot(i)){n=new Array(i.length);for(let o=0,a=i.length;o<a;o++)n[o]=t(i[o],o,void 0,r&&r[o])}else if(typeof i=="number"){n=new Array(i);for(let o=0;o<i;o++)n[o]=t(o+1,o,void 0,r&&r[o])}else if(st(i))if(i[Symbol.iterator])n=Array.from(i,(o,a)=>t(o,a,void 0,r&&r[a]));else{const o=Object.keys(i);n=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];n[a]=t(i[c],c,a,r&&r[a])}}else n=[];return e&&(e[s]=n),n}const Br=i=>i?Ia(i)?tr(i)||i.proxy:Br(i.parent):null,mi=mt(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Br(i.parent),$root:i=>Br(i.root),$emit:i=>i.emit,$options:i=>un(i),$forceUpdate:i=>i.f||(i.f=()=>{i.effect.dirty=!0,cn(i.update)}),$nextTick:i=>i.n||(i.n=oh.bind(i.proxy)),$watch:i=>_h.bind(i)}),cr=(i,t)=>i!==q&&!i.__isScriptSetup&&z(i,t),Nh={get({_:i},t){const{ctx:e,setupState:s,data:n,props:r,accessCache:o,type:a,appContext:l}=i;let c;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(cr(s,t))return o[t]=1,s[t];if(n!==q&&z(n,t))return o[t]=2,n[t];if((c=i.propsOptions[0])&&z(c,t))return o[t]=3,r[t];if(e!==q&&z(e,t))return o[t]=4,e[t];Rr&&(o[t]=0)}}const u=mi[t];let f,w;if(u)return t==="$attrs"&&kt(i,"get",t),u(i);if((f=a.__cssModules)&&(f=f[t]))return f;if(e!==q&&z(e,t))return o[t]=4,e[t];if(w=l.config.globalProperties,z(w,t))return w[t]},set({_:i},t,e){const{data:s,setupState:n,ctx:r}=i;return cr(n,t)?(n[t]=e,!0):s!==q&&z(s,t)?(s[t]=e,!0):z(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(r[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:s,appContext:n,propsOptions:r}},o){let a;return!!e[o]||i!==q&&z(i,o)||cr(t,o)||(a=r[0])&&z(a,o)||z(s,o)||z(mi,o)||z(n.config.globalProperties,o)},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:z(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function Yn(i){return D(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let Rr=!0;function Fh(i){const t=un(i),e=i.proxy,s=i.ctx;Rr=!1,t.beforeCreate&&Kn(t.beforeCreate,i,"bc");const{data:n,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:w,beforeUpdate:g,updated:v,activated:P,deactivated:T,beforeDestroy:B,beforeUnmount:j,destroyed:I,unmounted:F,render:G,renderTracked:L,renderTriggered:U,errorCaptured:rt,serverPrefetch:J,expose:Et,inheritAttrs:Qe,components:Ri,directives:Li,filters:sr}=t;if(c&&Wh(c,s,null),o)for(const et in o){const K=o[et];N(K)&&(s[et]=K.bind(e))}if(n){const et=n.call(e,e);st(et)&&(i.data=on(et))}if(Rr=!0,r)for(const et in r){const K=r[et],me=N(K)?K.bind(e,e):N(K.get)?K.get.bind(e,e):Lt,Ii=!N(K)&&N(K.set)?K.set.bind(e):Lt,ye=yc({get:me,set:Ii});Object.defineProperty(s,et,{enumerable:!0,configurable:!0,get:()=>ye.value,set:Gt=>ye.value=Gt})}if(a)for(const et in a)Sa(a[et],s,e,et);if(l){const et=N(l)?l.call(e):l;Reflect.ownKeys(et).forEach(K=>{Re(K,et[K])})}u&&Kn(u,i,"c");function vt(et,K){D(K)?K.forEach(me=>et(me.bind(e))):K&&et(K.bind(e))}if(vt(Mh,f),vt(Ca,w),vt(Th,g),vt(Bh,v),vt(Eh,P),vt(Ph,T),vt(Dh,rt),vt(Oh,L),vt(Ih,U),vt(Rh,j),vt(xa,F),vt(Lh,J),D(Et))if(Et.length){const et=i.exposed||(i.exposed={});Et.forEach(K=>{Object.defineProperty(et,K,{get:()=>e[K],set:me=>e[K]=me})})}else i.exposed||(i.exposed={});G&&i.render===Lt&&(i.render=G),Qe!=null&&(i.inheritAttrs=Qe),Ri&&(i.components=Ri),Li&&(i.directives=Li)}function Wh(i,t,e=Lt){D(i)&&(i=Lr(i));for(const s in i){const n=i[s];let r;st(n)?"default"in n?r=Qt(n.from||s,n.default,!0):r=Qt(n.from||s):r=Qt(n),yt(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Kn(i,t,e){$t(D(i)?i.map(s=>s.bind(t.proxy)):i.bind(t.proxy),t,e)}function Sa(i,t,e,s){const n=s.includes(".")?va(e,s):()=>e[s];if(ot(i)){const r=t[i];N(r)&&Yi(n,r)}else if(N(i))Yi(n,i.bind(e));else if(st(i))if(D(i))i.forEach(r=>Sa(r,t,e,s));else{const r=N(i.handler)?i.handler.bind(e):t[i.handler];N(r)&&Yi(n,r,i)}}function un(i){const t=i.type,{mixins:e,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=i.appContext,a=r.get(t);let l;return a?l=a:!n.length&&!e&&!s?l=t:(l={},n.length&&n.forEach(c=>gs(l,c,o,!0)),gs(l,t,o)),st(t)&&r.set(t,l),l}function gs(i,t,e,s=!1){const{mixins:n,extends:r}=t;r&&gs(i,r,e,!0),n&&n.forEach(o=>gs(i,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=Hh[o]||e&&e[o];i[o]=a?a(i[o],t[o]):t[o]}return i}const Hh={data:qn,props:Jn,emits:Jn,methods:si,computed:si,beforeCreate:bt,created:bt,beforeMount:bt,mounted:bt,beforeUpdate:bt,updated:bt,beforeDestroy:bt,beforeUnmount:bt,destroyed:bt,unmounted:bt,activated:bt,deactivated:bt,errorCaptured:bt,serverPrefetch:bt,components:si,directives:si,watch:Vh,provide:qn,inject:jh};function qn(i,t){return t?i?function(){return mt(N(i)?i.call(this,this):i,N(t)?t.call(this,this):t)}:t:i}function jh(i,t){return si(Lr(i),Lr(t))}function Lr(i){if(D(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function bt(i,t){return i?[...new Set([].concat(i,t))]:t}function si(i,t){return i?mt(Object.create(null),i,t):t}function Jn(i,t){return i?D(i)&&D(t)?[...new Set([...i,...t])]:mt(Object.create(null),Yn(i),Yn(t??{})):t}function Vh(i,t){if(!i)return t;if(!t)return i;const e=mt(Object.create(null),i);for(const s in t)e[s]=bt(i[s],t[s]);return e}function _a(){return{app:null,config:{isNativeTag:Cl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zh=0;function $h(i,t){return function(s,n=null){N(s)||(s=mt({},s)),n!=null&&!st(n)&&(n=null);const r=_a(),o=new WeakSet;let a=!1;const l=r.app={_uid:zh++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:vc,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&N(c.install)?(o.add(c),c.install(l,...u)):N(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,f){if(!a){const w=St(s,n);return w.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),u&&t?t(w,c):i(w,c,f),a=!0,l._container=c,c.__vue_app__=l,tr(w.component)||w.component.proxy}},unmount(){a&&(i(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){const u=yi;yi=l;try{return c()}finally{yi=u}}};return l}}let yi=null;function Re(i,t){if(wt){let e=wt.provides;const s=wt.parent&&wt.parent.provides;s===e&&(e=wt.provides=Object.create(s)),e[i]=t}}function Qt(i,t,e=!1){const s=wt||Bt;if(s||yi){const n=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:yi._context.provides;if(n&&i in n)return n[i];if(arguments.length>1)return e&&N(t)?t.call(s&&s.proxy):t}}function Gh(i,t,e,s=!1){const n={},r={};us(r,Zs,1),i.propsDefaults=Object.create(null),ka(i,t,n,r);for(const o in i.propsOptions[0])o in n||(n[o]=void 0);e?i.props=s?n:th(n):i.type.props?i.props=n:i.props=r,i.attrs=r}function Uh(i,t,e,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=i,a=$(n),[l]=i.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=i.vnode.dynamicProps;for(let f=0;f<u.length;f++){let w=u[f];if(Ys(i.emitsOptions,w))continue;const g=t[w];if(l)if(z(r,w))g!==r[w]&&(r[w]=g,c=!0);else{const v=Ue(w);n[v]=Ir(l,a,v,g,i,!1)}else g!==r[w]&&(r[w]=g,c=!0)}}}else{ka(i,t,n,r)&&(c=!0);let u;for(const f in a)(!t||!z(t,f)&&((u=qe(f))===f||!z(t,u)))&&(l?e&&(e[f]!==void 0||e[u]!==void 0)&&(n[f]=Ir(l,a,f,void 0,i,!0)):delete n[f]);if(r!==a)for(const f in r)(!t||!z(t,f))&&(delete r[f],c=!0)}c&&ne(i,"set","$attrs")}function ka(i,t,e,s){const[n,r]=i.propsOptions;let o=!1,a;if(t)for(let l in t){if(gi(l))continue;const c=t[l];let u;n&&z(n,u=Ue(l))?!r||!r.includes(u)?e[u]=c:(a||(a={}))[u]=c:Ys(i.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=$(e),c=a||q;for(let u=0;u<r.length;u++){const f=r[u];e[f]=Ir(n,l,f,c[f],i,!z(c,f))}}return o}function Ir(i,t,e,s,n,r){const o=i[e];if(o!=null){const a=z(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&N(l)){const{propsDefaults:c}=n;if(e in c)s=c[e];else{const u=Mi(n);s=c[e]=l.call(null,t),u()}}else s=l}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===qe(e))&&(s=!0))}return s}function Ea(i,t,e=!1){const s=t.propsCache,n=s.get(i);if(n)return n;const r=i.props,o={},a=[];let l=!1;if(!N(i)){const u=f=>{l=!0;const[w,g]=Ea(f,t,!0);mt(o,w),g&&a.push(...g)};!e&&t.mixins.length&&t.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!r&&!l)return st(i)&&s.set(i,Fe),Fe;if(D(r))for(let u=0;u<r.length;u++){const f=Ue(r[u]);Zn(f)&&(o[f]=q)}else if(r)for(const u in r){const f=Ue(u);if(Zn(f)){const w=r[u],g=o[f]=D(w)||N(w)?{type:w}:mt({},w);if(g){const v=eo(Boolean,g.type),P=eo(String,g.type);g[0]=v>-1,g[1]=P<0||v<P,(v>-1||z(g,"default"))&&a.push(f)}}}const c=[o,a];return st(i)&&s.set(i,c),c}function Zn(i){return i[0]!=="$"&&!gi(i)}function Qn(i){return i===null?"null":typeof i=="function"?i.name||"":typeof i=="object"&&i.constructor&&i.constructor.name||""}function to(i,t){return Qn(i)===Qn(t)}function eo(i,t){return D(t)?t.findIndex(e=>to(e,i)):N(t)&&to(t,i)?0:-1}const Pa=i=>i[0]==="_"||i==="$stable",dn=i=>D(i)?i.map(qt):[qt(i)],Xh=(i,t,e)=>{if(t._n)return t;const s=ph((...n)=>dn(t(...n)),e);return s._c=!1,s},Aa=(i,t,e)=>{const s=i._ctx;for(const n in i){if(Pa(n))continue;const r=i[n];if(N(r))t[n]=Xh(n,r,s);else if(r!=null){const o=dn(r);t[n]=()=>o}}},Ma=(i,t)=>{const e=dn(t);i.slots.default=()=>e},Yh=(i,t)=>{if(i.vnode.shapeFlag&32){const e=t._;e?(i.slots=$(t),us(t,"_",e)):Aa(t,i.slots={})}else i.slots={},t&&Ma(i,t);us(i.slots,Zs,1)},Kh=(i,t,e)=>{const{vnode:s,slots:n}=i;let r=!0,o=q;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:(mt(n,t),!e&&a===1&&delete n._):(r=!t.$stable,Aa(t,n)),o=t}else t&&(Ma(i,t),o={default:1});if(r)for(const a in n)!Pa(a)&&o[a]==null&&delete n[a]};function Or(i,t,e,s,n=!1){if(D(i)){i.forEach((w,g)=>Or(w,t&&(D(t)?t[g]:t),e,s,n));return}if(Ki(s)&&!n)return;const r=s.shapeFlag&4?tr(s.component)||s.component.proxy:s.el,o=n?null:r,{i:a,r:l}=i,c=t&&t.r,u=a.refs===q?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(ot(c)?(u[c]=null,z(f,c)&&(f[c]=null)):yt(c)&&(c.value=null)),N(l))pe(l,a,12,[o,u]);else{const w=ot(l),g=yt(l);if(w||g){const v=()=>{if(i.f){const P=w?z(f,l)?f[l]:u[l]:l.value;n?D(P)&&Jr(P,r):D(P)?P.includes(r)||P.push(r):w?(u[l]=[r],z(f,l)&&(f[l]=u[l])):(l.value=[r],i.k&&(u[i.k]=l.value))}else w?(u[l]=o,z(f,l)&&(f[l]=o)):g&&(l.value=o,i.k&&(u[i.k]=o))};o?(v.id=-1,Ct(v,e)):v()}}}const Ct=Ch;function qh(i){return Jh(i)}function Jh(i,t){const e=Uo();e.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:w,setScopeId:g=Lt,insertStaticContent:v}=i,P=(h,d,p,m=null,y=null,S=null,k=void 0,x=null,_=!!d.dynamicChildren)=>{if(h===d)return;h&&!ei(h,d)&&(m=Oi(h),Gt(h,y,S,!0),h=null),d.patchFlag===-2&&(_=!1,d.dynamicChildren=null);const{type:b,ref:E,shapeFlag:R}=d;switch(b){case Js:T(h,d,p,m);break;case Ee:B(h,d,p,m);break;case dr:h==null&&j(d,p,m,k);break;case xt:Ri(h,d,p,m,y,S,k,x,_);break;default:R&1?G(h,d,p,m,y,S,k,x,_):R&6?Li(h,d,p,m,y,S,k,x,_):(R&64||R&128)&&b.process(h,d,p,m,y,S,k,x,_,Te)}E!=null&&y&&Or(E,h&&h.ref,S,d||h,!d)},T=(h,d,p,m)=>{if(h==null)s(d.el=a(d.children),p,m);else{const y=d.el=h.el;d.children!==h.children&&c(y,d.children)}},B=(h,d,p,m)=>{h==null?s(d.el=l(d.children||""),p,m):d.el=h.el},j=(h,d,p,m)=>{[h.el,h.anchor]=v(h.children,d,p,m,h.el,h.anchor)},I=({el:h,anchor:d},p,m)=>{let y;for(;h&&h!==d;)y=w(h),s(h,p,m),h=y;s(d,p,m)},F=({el:h,anchor:d})=>{let p;for(;h&&h!==d;)p=w(h),n(h),h=p;n(d)},G=(h,d,p,m,y,S,k,x,_)=>{d.type==="svg"?k="svg":d.type==="math"&&(k="mathml"),h==null?L(d,p,m,y,S,k,x,_):J(h,d,y,S,k,x,_)},L=(h,d,p,m,y,S,k,x)=>{let _,b;const{props:E,shapeFlag:R,transition:M,dirs:O}=h;if(_=h.el=o(h.type,S,E&&E.is,E),R&8?u(_,h.children):R&16&&rt(h.children,_,null,m,y,ur(h,S),k,x),O&&ve(h,null,m,"created"),U(_,h,h.scopeId,k,m),E){for(const X in E)X!=="value"&&!gi(X)&&r(_,X,null,E[X],S,h.children,m,y,ee);"value"in E&&r(_,"value",null,E.value,S),(b=E.onVnodeBeforeMount)&&Xt(b,m,h)}O&&ve(h,null,m,"beforeMount");const H=Zh(y,M);H&&M.beforeEnter(_),s(_,d,p),((b=E&&E.onVnodeMounted)||H||O)&&Ct(()=>{b&&Xt(b,m,h),H&&M.enter(_),O&&ve(h,null,m,"mounted")},y)},U=(h,d,p,m,y)=>{if(p&&g(h,p),m)for(let S=0;S<m.length;S++)g(h,m[S]);if(y){let S=y.subTree;if(d===S){const k=y.vnode;U(h,k,k.scopeId,k.slotScopeIds,y.parent)}}},rt=(h,d,p,m,y,S,k,x,_=0)=>{for(let b=_;b<h.length;b++){const E=h[b]=x?ue(h[b]):qt(h[b]);P(null,E,d,p,m,y,S,k,x)}},J=(h,d,p,m,y,S,k)=>{const x=d.el=h.el;let{patchFlag:_,dynamicChildren:b,dirs:E}=d;_|=h.patchFlag&16;const R=h.props||q,M=d.props||q;let O;if(p&&be(p,!1),(O=M.onVnodeBeforeUpdate)&&Xt(O,p,d,h),E&&ve(d,h,p,"beforeUpdate"),p&&be(p,!0),b?Et(h.dynamicChildren,b,x,p,m,ur(d,y),S):k||K(h,d,x,null,p,m,ur(d,y),S,!1),_>0){if(_&16)Qe(x,d,R,M,p,m,y);else if(_&2&&R.class!==M.class&&r(x,"class",null,M.class,y),_&4&&r(x,"style",R.style,M.style,y),_&8){const H=d.dynamicProps;for(let X=0;X<H.length;X++){const Z=H[X],at=R[Z],It=M[Z];(It!==at||Z==="value")&&r(x,Z,at,It,y,h.children,p,m,ee)}}_&1&&h.children!==d.children&&u(x,d.children)}else!k&&b==null&&Qe(x,d,R,M,p,m,y);((O=M.onVnodeUpdated)||E)&&Ct(()=>{O&&Xt(O,p,d,h),E&&ve(d,h,p,"updated")},m)},Et=(h,d,p,m,y,S,k)=>{for(let x=0;x<d.length;x++){const _=h[x],b=d[x],E=_.el&&(_.type===xt||!ei(_,b)||_.shapeFlag&70)?f(_.el):p;P(_,b,E,null,m,y,S,k,!0)}},Qe=(h,d,p,m,y,S,k)=>{if(p!==m){if(p!==q)for(const x in p)!gi(x)&&!(x in m)&&r(h,x,p[x],null,k,d.children,y,S,ee);for(const x in m){if(gi(x))continue;const _=m[x],b=p[x];_!==b&&x!=="value"&&r(h,x,b,_,k,d.children,y,S,ee)}"value"in m&&r(h,"value",p.value,m.value,k)}},Ri=(h,d,p,m,y,S,k,x,_)=>{const b=d.el=h?h.el:a(""),E=d.anchor=h?h.anchor:a("");let{patchFlag:R,dynamicChildren:M,slotScopeIds:O}=d;O&&(x=x?x.concat(O):O),h==null?(s(b,p,m),s(E,p,m),rt(d.children||[],p,E,y,S,k,x,_)):R>0&&R&64&&M&&h.dynamicChildren?(Et(h.dynamicChildren,M,p,y,S,k,x),(d.key!=null||y&&d===y.subTree)&&Ta(h,d,!0)):K(h,d,p,E,y,S,k,x,_)},Li=(h,d,p,m,y,S,k,x,_)=>{d.slotScopeIds=x,h==null?d.shapeFlag&512?y.ctx.activate(d,p,m,k,_):sr(d,p,m,y,S,k,_):Bn(h,d,_)},sr=(h,d,p,m,y,S,k)=>{const x=h.component=uc(h,m,y);if(ba(h)&&(x.ctx.renderer=Te),dc(x),x.asyncDep){if(y&&y.registerDep(x,vt),!h.el){const _=x.subTree=St(Ee);B(null,_,d,p)}}else vt(x,h,d,p,y,S,k)},Bn=(h,d,p)=>{const m=d.component=h.component;if(yh(h,d,p))if(m.asyncDep&&!m.asyncResolved){et(m,d,p);return}else m.next=d,lh(m.update),m.effect.dirty=!0,m.update();else d.el=h.el,m.vnode=d},vt=(h,d,p,m,y,S,k)=>{const x=()=>{if(h.isMounted){let{next:E,bu:R,u:M,parent:O,vnode:H}=h;{const Be=Ba(h);if(Be){E&&(E.el=H.el,et(h,E,k)),Be.asyncDep.then(()=>{h.isUnmounted||x()});return}}let X=E,Z;be(h,!1),E?(E.el=H.el,et(h,E,k)):E=H,R&&Ui(R),(Z=E.props&&E.props.onVnodeBeforeUpdate)&&Xt(Z,O,E,H),be(h,!0);const at=hr(h),It=h.subTree;h.subTree=at,P(It,at,f(It.el),Oi(It),h,y,S),E.el=at.el,X===null&&vh(h,at.el),M&&Ct(M,y),(Z=E.props&&E.props.onVnodeUpdated)&&Ct(()=>Xt(Z,O,E,H),y)}else{let E;const{el:R,props:M}=d,{bm:O,m:H,parent:X}=h,Z=Ki(d);if(be(h,!1),O&&Ui(O),!Z&&(E=M&&M.onVnodeBeforeMount)&&Xt(E,X,d),be(h,!0),R&&or){const at=()=>{h.subTree=hr(h),or(R,h.subTree,h,y,null)};Z?d.type.__asyncLoader().then(()=>!h.isUnmounted&&at()):at()}else{const at=h.subTree=hr(h);P(null,at,p,m,h,y,S),d.el=at.el}if(H&&Ct(H,y),!Z&&(E=M&&M.onVnodeMounted)){const at=d;Ct(()=>Xt(E,X,at),y)}(d.shapeFlag&256||X&&Ki(X.vnode)&&X.vnode.shapeFlag&256)&&h.a&&Ct(h.a,y),h.isMounted=!0,d=p=m=null}},_=h.effect=new tn(x,Lt,()=>cn(b),h.scope),b=h.update=()=>{_.dirty&&_.run()};b.id=h.uid,be(h,!0),b()},et=(h,d,p)=>{d.component=h;const m=h.vnode.props;h.vnode=d,h.next=null,Uh(h,d.props,m,p),Kh(h,d.children,p),Ae(),Un(h),Me()},K=(h,d,p,m,y,S,k,x,_=!1)=>{const b=h&&h.children,E=h?h.shapeFlag:0,R=d.children,{patchFlag:M,shapeFlag:O}=d;if(M>0){if(M&128){Ii(b,R,p,m,y,S,k,x,_);return}else if(M&256){me(b,R,p,m,y,S,k,x,_);return}}O&8?(E&16&&ee(b,y,S),R!==b&&u(p,R)):E&16?O&16?Ii(b,R,p,m,y,S,k,x,_):ee(b,y,S,!0):(E&8&&u(p,""),O&16&&rt(R,p,m,y,S,k,x,_))},me=(h,d,p,m,y,S,k,x,_)=>{h=h||Fe,d=d||Fe;const b=h.length,E=d.length,R=Math.min(b,E);let M;for(M=0;M<R;M++){const O=d[M]=_?ue(d[M]):qt(d[M]);P(h[M],O,p,null,y,S,k,x,_)}b>E?ee(h,y,S,!0,!1,R):rt(d,p,m,y,S,k,x,_,R)},Ii=(h,d,p,m,y,S,k,x,_)=>{let b=0;const E=d.length;let R=h.length-1,M=E-1;for(;b<=R&&b<=M;){const O=h[b],H=d[b]=_?ue(d[b]):qt(d[b]);if(ei(O,H))P(O,H,p,null,y,S,k,x,_);else break;b++}for(;b<=R&&b<=M;){const O=h[R],H=d[M]=_?ue(d[M]):qt(d[M]);if(ei(O,H))P(O,H,p,null,y,S,k,x,_);else break;R--,M--}if(b>R){if(b<=M){const O=M+1,H=O<E?d[O].el:m;for(;b<=M;)P(null,d[b]=_?ue(d[b]):qt(d[b]),p,H,y,S,k,x,_),b++}}else if(b>M)for(;b<=R;)Gt(h[b],y,S,!0),b++;else{const O=b,H=b,X=new Map;for(b=H;b<=M;b++){const Pt=d[b]=_?ue(d[b]):qt(d[b]);Pt.key!=null&&X.set(Pt.key,b)}let Z,at=0;const It=M-H+1;let Be=!1,In=0;const ti=new Array(It);for(b=0;b<It;b++)ti[b]=0;for(b=O;b<=R;b++){const Pt=h[b];if(at>=It){Gt(Pt,y,S,!0);continue}let Ut;if(Pt.key!=null)Ut=X.get(Pt.key);else for(Z=H;Z<=M;Z++)if(ti[Z-H]===0&&ei(Pt,d[Z])){Ut=Z;break}Ut===void 0?Gt(Pt,y,S,!0):(ti[Ut-H]=b+1,Ut>=In?In=Ut:Be=!0,P(Pt,d[Ut],p,null,y,S,k,x,_),at++)}const On=Be?Qh(ti):Fe;for(Z=On.length-1,b=It-1;b>=0;b--){const Pt=H+b,Ut=d[Pt],Dn=Pt+1<E?d[Pt+1].el:m;ti[b]===0?P(null,Ut,p,Dn,y,S,k,x,_):Be&&(Z<0||b!==On[Z]?ye(Ut,p,Dn,2):Z--)}}},ye=(h,d,p,m,y=null)=>{const{el:S,type:k,transition:x,children:_,shapeFlag:b}=h;if(b&6){ye(h.component.subTree,d,p,m);return}if(b&128){h.suspense.move(d,p,m);return}if(b&64){k.move(h,d,p,Te);return}if(k===xt){s(S,d,p);for(let R=0;R<_.length;R++)ye(_[R],d,p,m);s(h.anchor,d,p);return}if(k===dr){I(h,d,p);return}if(m!==2&&b&1&&x)if(m===0)x.beforeEnter(S),s(S,d,p),Ct(()=>x.enter(S),y);else{const{leave:R,delayLeave:M,afterLeave:O}=x,H=()=>s(S,d,p),X=()=>{R(S,()=>{H(),O&&O()})};M?M(S,H,X):X()}else s(S,d,p)},Gt=(h,d,p,m=!1,y=!1)=>{const{type:S,props:k,ref:x,children:_,dynamicChildren:b,shapeFlag:E,patchFlag:R,dirs:M}=h;if(x!=null&&Or(x,null,p,h,!0),E&256){d.ctx.deactivate(h);return}const O=E&1&&M,H=!Ki(h);let X;if(H&&(X=k&&k.onVnodeBeforeUnmount)&&Xt(X,d,h),E&6)wl(h.component,p,m);else{if(E&128){h.suspense.unmount(p,m);return}O&&ve(h,null,d,"beforeUnmount"),E&64?h.type.remove(h,d,p,y,Te,m):b&&(S!==xt||R>0&&R&64)?ee(b,d,p,!1,!0):(S===xt&&R&384||!y&&E&16)&&ee(_,d,p),m&&Rn(h)}(H&&(X=k&&k.onVnodeUnmounted)||O)&&Ct(()=>{X&&Xt(X,d,h),O&&ve(h,null,d,"unmounted")},p)},Rn=h=>{const{type:d,el:p,anchor:m,transition:y}=h;if(d===xt){bl(p,m);return}if(d===dr){F(h);return}const S=()=>{n(p),y&&!y.persisted&&y.afterLeave&&y.afterLeave()};if(h.shapeFlag&1&&y&&!y.persisted){const{leave:k,delayLeave:x}=y,_=()=>k(p,S);x?x(h.el,S,_):_()}else S()},bl=(h,d)=>{let p;for(;h!==d;)p=w(h),n(h),h=p;n(d)},wl=(h,d,p)=>{const{bum:m,scope:y,update:S,subTree:k,um:x}=h;m&&Ui(m),y.stop(),S&&(S.active=!1,Gt(k,h,d,p)),x&&Ct(x,d),Ct(()=>{h.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},ee=(h,d,p,m=!1,y=!1,S=0)=>{for(let k=S;k<h.length;k++)Gt(h[k],d,p,m,y)},Oi=h=>h.shapeFlag&6?Oi(h.component.subTree):h.shapeFlag&128?h.suspense.next():w(h.anchor||h.el);let rr=!1;const Ln=(h,d,p)=>{h==null?d._vnode&&Gt(d._vnode,null,null,!0):P(d._vnode||null,h,d,null,null,null,p),rr||(rr=!0,Un(),pa(),rr=!1),d._vnode=h},Te={p:P,um:Gt,m:ye,r:Rn,mt:sr,mc:rt,pc:K,pbc:Et,n:Oi,o:i};let nr,or;return t&&([nr,or]=t(Te)),{render:Ln,hydrate:nr,createApp:$h(Ln,nr)}}function ur({type:i,props:t},e){return e==="svg"&&i==="foreignObject"||e==="mathml"&&i==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function be({effect:i,update:t},e){i.allowRecurse=t.allowRecurse=e}function Zh(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function Ta(i,t,e=!1){const s=i.children,n=t.children;if(D(s)&&D(n))for(let r=0;r<s.length;r++){const o=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=ue(n[r]),a.el=o.el),e||Ta(o,a)),a.type===Js&&(a.el=o.el)}}function Qh(i){const t=i.slice(),e=[0];let s,n,r,o,a;const l=i.length;for(s=0;s<l;s++){const c=i[s];if(c!==0){if(n=e[e.length-1],i[n]<c){t[s]=n,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,i[e[a]]<c?r=a+1:o=a;c<i[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function Ba(i){const t=i.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ba(t)}const tc=i=>i.__isTeleport,xt=Symbol.for("v-fgt"),Js=Symbol.for("v-txt"),Ee=Symbol.for("v-cmt"),dr=Symbol.for("v-stc"),vi=[];let Vt=null;function ct(i=!1){vi.push(Vt=i?null:[])}function ec(){vi.pop(),Vt=vi[vi.length-1]||null}let _i=1;function io(i){_i+=i}function Ra(i){return i.dynamicChildren=_i>0?Vt||Fe:null,ec(),_i>0&&Vt&&Vt.push(i),i}function gt(i,t,e,s,n,r){return Ra(Y(i,t,e,s,n,r,!0))}function ic(i,t,e,s,n){return Ra(St(i,t,e,s,n,!0))}function sc(i){return i?i.__v_isVNode===!0:!1}function ei(i,t){return i.type===t.type&&i.key===t.key}const Zs="__vInternal",La=({key:i})=>i??null,qi=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?ot(i)||yt(i)||N(i)?{i:Bt,r:i,k:t,f:!!e}:i:null);function Y(i,t=null,e=null,s=0,n=null,r=i===xt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&La(t),ref:t&&qi(t),scopeId:Ks,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Bt};return a?(fn(l,e),r&128&&i.normalize(l)):e&&(l.shapeFlag|=ot(e)?8:16),_i>0&&!o&&Vt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Vt.push(l),l}const St=rc;function rc(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===bh)&&(i=Ee),sc(i)){const a=Ye(i,t,!0);return e&&fn(a,e),_i>0&&!r&&Vt&&(a.shapeFlag&6?Vt[Vt.indexOf(i)]=a:Vt.push(a)),a.patchFlag|=-2,a}if(mc(i)&&(i=i.__vccOpts),t){t=nc(t);let{class:a,style:l}=t;a&&!ot(a)&&(t.class=Qr(a)),st(l)&&(aa(l)&&!D(l)&&(l=mt({},l)),t.style=Gs(l))}const o=ot(i)?1:wh(i)?128:tc(i)?64:st(i)?4:N(i)?2:0;return Y(i,t,e,s,n,o,r,!0)}function nc(i){return i?aa(i)||Zs in i?mt({},i):i:null}function Ye(i,t,e=!1){const{props:s,ref:n,patchFlag:r,children:o}=i,a=t?lc(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:i.type,props:a,key:a&&La(a),ref:t&&t.ref?e&&n?D(n)?n.concat(qi(t)):[n,qi(t)]:qi(t):n,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:o,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==xt?r===-1?16:r|16:r,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:i.transition,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Ye(i.ssContent),ssFallback:i.ssFallback&&Ye(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce}}function oc(i=" ",t=0){return St(Js,null,i,t)}function ac(i="",t=!1){return t?(ct(),ic(Ee,null,i)):St(Ee,null,i)}function qt(i){return i==null||typeof i=="boolean"?St(Ee):D(i)?St(xt,null,i.slice()):typeof i=="object"?ue(i):St(Js,null,String(i))}function ue(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Ye(i)}function fn(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(D(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),fn(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!(Zs in t)?t._ctx=Bt:n===3&&Bt&&(Bt.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else N(t)?(t={default:t,_ctx:Bt},e=32):(t=String(t),s&64?(e=16,t=[oc(t)]):e=8);i.children=t,i.shapeFlag|=e}function lc(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=Qr([t.class,s.class]));else if(n==="style")t.style=Gs([t.style,s.style]);else if(Vs(n)){const r=t[n],o=s[n];o&&r!==o&&!(D(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function Xt(i,t,e,s=null){$t(i,t,7,[e,s])}const hc=_a();let cc=0;function uc(i,t,e){const s=i.type,n=(t?t.appContext:i.appContext)||hc,r={uid:cc++,vnode:i,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Rl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ea(s,n),emitsOptions:ma(s,n),emit:null,emitted:null,propsDefaults:q,inheritAttrs:s.inheritAttrs,ctx:q,data:q,props:q,attrs:q,slots:q,refs:q,setupState:q,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=uh.bind(null,r),i.ce&&i.ce(r),r}let wt=null,ms,Dr;{const i=Uo(),t=(e,s)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};ms=t("__VUE_INSTANCE_SETTERS__",e=>wt=e),Dr=t("__VUE_SSR_SETTERS__",e=>Qs=e)}const Mi=i=>{const t=wt;return ms(i),i.scope.on(),()=>{i.scope.off(),ms(t)}},so=()=>{wt&&wt.scope.off(),ms(null)};function Ia(i){return i.vnode.shapeFlag&4}let Qs=!1;function dc(i,t=!1){t&&Dr(t);const{props:e,children:s}=i.vnode,n=Ia(i);Gh(i,e,n,t),Yh(i,s);const r=n?fc(i,t):void 0;return t&&Dr(!1),r}function fc(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=la(new Proxy(i.ctx,Nh));const{setup:s}=e;if(s){const n=i.setupContext=s.length>1?gc(i):null,r=Mi(i);Ae();const o=pe(s,i,0,[i.props,n]);if(Me(),r(),Vo(o)){if(o.then(so,so),t)return o.then(a=>{ro(i,a,t)}).catch(a=>{Xs(a,i,0)});i.asyncDep=o}else ro(i,o,t)}else Oa(i,t)}function ro(i,t,e){N(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:st(t)&&(i.setupState=ua(t)),Oa(i,e)}let no;function Oa(i,t,e){const s=i.type;if(!i.render){if(!t&&no&&!s.render){const n=s.template||un(i).template;if(n){const{isCustomElement:r,compilerOptions:o}=i.appContext.config,{delimiters:a,compilerOptions:l}=s,c=mt(mt({isCustomElement:r,delimiters:a},o),l);s.render=no(n,c)}}i.render=s.render||Lt}{const n=Mi(i);Ae();try{Fh(i)}finally{Me(),n()}}}function pc(i){return i.attrsProxy||(i.attrsProxy=new Proxy(i.attrs,{get(t,e){return kt(i,"get","$attrs"),t[e]}}))}function gc(i){const t=e=>{i.exposed=e||{}};return{get attrs(){return pc(i)},slots:i.slots,emit:i.emit,expose:t}}function tr(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(ua(la(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in mi)return mi[e](i)},has(t,e){return e in t||e in mi}}))}function mc(i){return N(i)&&"__vccOpts"in i}const yc=(i,t)=>eh(i,t,Qs),vc="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const bc="http://www.w3.org/2000/svg",wc="http://www.w3.org/1998/Math/MathML",de=typeof document<"u"?document:null,oo=de&&de.createElement("template"),Cc={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,s)=>{const n=t==="svg"?de.createElementNS(bc,i):t==="mathml"?de.createElementNS(wc,i):de.createElement(i,e?{is:e}:void 0);return i==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:i=>de.createTextNode(i),createComment:i=>de.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>de.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,s,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{oo.innerHTML=s==="svg"?`<svg>${i}</svg>`:s==="mathml"?`<math>${i}</math>`:i;const a=oo.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},xc=Symbol("_vtc");function Sc(i,t,e){const s=i[xc];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const ao=Symbol("_vod"),_c=Symbol("_vsh"),kc=Symbol(""),Ec=/(^|;)\s*display\s*:/;function Pc(i,t,e){const s=i.style,n=ot(e);let r=!1;if(e&&!n){if(t)if(ot(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&Ji(s,a,"")}else for(const o in t)e[o]==null&&Ji(s,o,"");for(const o in e)o==="display"&&(r=!0),Ji(s,o,e[o])}else if(n){if(t!==e){const o=s[kc];o&&(e+=";"+o),s.cssText=e,r=Ec.test(e)}}else t&&i.removeAttribute("style");ao in i&&(i[ao]=r?s.display:"",i[_c]&&(s.display="none"))}const lo=/\s*!important$/;function Ji(i,t,e){if(D(e))e.forEach(s=>Ji(i,t,s));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const s=Ac(i,t);lo.test(e)?i.setProperty(qe(s),e.replace(lo,""),"important"):i[s]=e}}const ho=["Webkit","Moz","ms"],fr={};function Ac(i,t){const e=fr[t];if(e)return e;let s=Ue(t);if(s!=="filter"&&s in i)return fr[t]=s;s=Go(s);for(let n=0;n<ho.length;n++){const r=ho[n]+s;if(r in i)return fr[t]=r}return t}const co="http://www.w3.org/1999/xlink";function Mc(i,t,e,s,n){if(s&&t.startsWith("xlink:"))e==null?i.removeAttributeNS(co,t.slice(6,t.length)):i.setAttributeNS(co,t,e);else{const r=Bl(t);e==null||r&&!Xo(e)?i.removeAttribute(t):i.setAttribute(t,r?"":e)}}function Tc(i,t,e,s,n,r,o){if(t==="innerHTML"||t==="textContent"){s&&o(s,n,r),i[t]=e??"";return}const a=i.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?i.getAttribute("value")||"":i.value,u=e??"";(c!==u||!("_value"in i))&&(i.value=u),e==null&&i.removeAttribute(t),i._value=e;return}let l=!1;if(e===""||e==null){const c=typeof i[t];c==="boolean"?e=Xo(e):e==null&&c==="string"?(e="",l=!0):c==="number"&&(e=0,l=!0)}try{i[t]=e}catch{}l&&i.removeAttribute(t)}function Le(i,t,e,s){i.addEventListener(t,e,s)}function Bc(i,t,e,s){i.removeEventListener(t,e,s)}const uo=Symbol("_vei");function Rc(i,t,e,s,n=null){const r=i[uo]||(i[uo]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=Lc(t);if(s){const c=r[t]=Dc(s,n);Le(i,a,c,l)}else o&&(Bc(i,a,o,l),r[t]=void 0)}}const fo=/(?:Once|Passive|Capture)$/;function Lc(i){let t;if(fo.test(i)){t={};let s;for(;s=i.match(fo);)i=i.slice(0,i.length-s[0].length),t[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):qe(i.slice(2)),t]}let pr=0;const Ic=Promise.resolve(),Oc=()=>pr||(Ic.then(()=>pr=0),pr=Date.now());function Dc(i,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;$t(Nc(s,e.value),t,5,[s])};return e.value=i,e.attached=Oc(),e}function Nc(i,t){if(D(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const po=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,Fc=(i,t,e,s,n,r,o,a,l)=>{const c=n==="svg";t==="class"?Sc(i,s,c):t==="style"?Pc(i,e,s):Vs(t)?qr(t)||Rc(i,t,e,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Wc(i,t,s,c))?Tc(i,t,s,r,o,a,l):(t==="true-value"?i._trueValue=s:t==="false-value"&&(i._falseValue=s),Mc(i,t,s,c))};function Wc(i,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in i&&po(t)&&N(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=i.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return po(t)&&ot(e)?!1:t in i}const go=i=>{const t=i.props["onUpdate:modelValue"]||!1;return D(t)?e=>Ui(t,e):t};function Hc(i){i.target.composing=!0}function mo(i){const t=i.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const gr=Symbol("_assign"),jc={created(i,{modifiers:{lazy:t,trim:e,number:s}},n){i[gr]=go(n);const r=s||n.props&&n.props.type==="number";Le(i,t?"change":"input",o=>{if(o.target.composing)return;let a=i.value;e&&(a=a.trim()),r&&(a=kr(a)),i[gr](a)}),e&&Le(i,"change",()=>{i.value=i.value.trim()}),t||(Le(i,"compositionstart",Hc),Le(i,"compositionend",mo),Le(i,"change",mo))},mounted(i,{value:t}){i.value=t??""},beforeUpdate(i,{value:t,modifiers:{lazy:e,trim:s,number:n}},r){if(i[gr]=go(r),i.composing)return;const o=n||i.type==="number"?kr(i.value):i.value,a=t??"";o!==a&&(document.activeElement===i&&i.type!=="range"&&(e||s&&i.value.trim()===a)||(i.value=a))}},Vc=mt({patchProp:Fc},Cc);let yo;function zc(){return yo||(yo=qh(Vc))}const $c=(...i)=>{const t=zc().createApp(...i),{mount:e}=t;return t.mount=s=>{const n=Uc(s);if(!n)return;const r=t._component;!N(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.innerHTML="";const o=e(n,!1,Gc(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function Gc(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function Uc(i){return ot(i)?document.querySelector(i):i}const Xc="/StickerEditor/assets/add1-DpgXoKJM.png",Yc="/StickerEditor/assets/add2-RRQ8YQ0u.png",Kc="/StickerEditor/assets/add3-DWmAwVb9.png",qc="/StickerEditor/assets/add4-DrcPqAIq.png",Jc="/StickerEditor/assets/add5-BIXogDIN.png",Zc="/StickerEditor/assets/add6-D0aQ2SaT.png",Qc={class:"bg-Surface left-0 h-screen w-[22vw] py-5"},tu={class:"max-h-[95vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},eu=["src","alt","onClick"],iu={__name:"AsideLeft",setup(i){let t=Tt([{src:Xc,alt:"add on 1"},{src:Yc,alt:"add on 2"},{src:Kc,alt:"add on 3"},{src:qc,alt:"add on 4"},{src:Jc,alt:"add on 5"},{src:Zc,alt:"add on 6"}]);const e=Qt("handleStickerSelected"),s=n=>{e(n)};return(n,r)=>(ct(),gt("div",Qc,[Y("div",tu,[(ct(!0),gt(xt,null,ps(ft(t),(o,a)=>(ct(),gt("div",{key:a,class:"object-fill flex justify-center items-center"},[Y("img",{class:"max-w-[8vw] cursor-pointer hover:opacity-60 transition-opacity duration-200",src:o.src,alt:o.alt,onClick:l=>s(o.src)},null,8,eu)]))),128))])]))}},su={class:"flex flex-col gap-5"},ru={class:"bg-Surface h-[50vh] w-[22vw] relative rounded-bl-xl",ref:"parentContainer"},nu=Y("label",{Class:"text-Primary font-semibold flex justify-center mb-2 mt-2 text-xl"},"Gallery",-1),ou={class:"max-h-[42vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},au=["onClick"],lu=["src","alt"],hu={class:"bg-Surface h-[50vh] w-[22vw] relative rounded-tl-xl",ref:"parentContainer"},cu=Y("label",{Class:"text-Primary font-semibold flex justify-center mb-2 mt-2 text-xl"},"Saved image",-1),uu={class:"max-h-[42vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},du=["onClick"],fu=["src"],pu={__name:"AsideRight",emits:["selectImage"],setup(i,{emit:t}){const e=Qt("images"),s=Qt("savedImages"),n=t,r=o=>{n("selectImage",o)};return(o,a)=>(ct(),gt("div",su,[Y("div",ru,[nu,Y("div",ou,[(ct(!0),gt(xt,null,ps(ft(e),(l,c)=>(ct(),gt("div",{key:c,class:"object-fill flex justify-center items-center",onClick:u=>r(l.src)},[Y("img",{class:"min-w-[8vw]",src:l.src,alt:l.alt},null,8,lu)],8,au))),128))])],512),Y("div",hu,[cu,Y("div",uu,[(ct(!0),gt(xt,null,ps(ft(s),(l,c)=>(ct(),gt("div",{key:c,class:"object-fill flex justify-center items-center",onClick:u=>r(l)},[Y("img",{class:"max-w-[8vw]",src:l,alt:"Saved Image"},null,8,fu)],8,du))),128))])],512)]))}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Da=function(i,t){return(Da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,s){e.__proto__=s}||function(e,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])})(i,t)};function Q(i,t){function e(){this.constructor=i}Da(i,t),i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function vo(i,t,e,s){return new(e||(e=Promise))(function(n,r){function o(c){try{l(s.next(c))}catch(u){r(u)}}function a(c){try{l(s.throw(c))}catch(u){r(u)}}function l(c){var u;c.done?n(c.value):(u=c.value,u instanceof e?u:new e(function(f){f(u)})).then(o,a)}l((s=s.apply(i,t||[])).next())})}function bo(i,t){var e,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(l){return function(c){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,s&&(n=2&u[0]?s.return:u[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,u[1])).done)return n;switch(s=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,s=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!((n=n.length>0&&n[n.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){o.label=u[1];break}if(u[0]===6&&o.label<n[1]){o.label=n[1],n=u;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(u);break}n[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(i,o)}catch(f){u=[6,f],s=0}finally{e=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}function ki(){for(var i=0,t=0,e=arguments.length;t<e;t++)i+=arguments[t].length;var s=Array(i),n=0;for(t=0;t<e;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,n++)s[n]=r[o];return s}var C=function(){function i(){}return i.createDefs=function(){return document.createElementNS("http://www.w3.org/2000/svg","defs")},i.setAttributes=function(t,e){for(var s=0,n=e;s<n.length;s++){var r=n[s],o=r[0],a=r[1];t.setAttribute(o,a)}},i.createRect=function(t,e,s){var n=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.setAttribute("width",t.toString()),n.setAttribute("height",e.toString()),s&&i.setAttributes(n,s),n},i.createLine=function(t,e,s,n,r){var o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",t.toString()),o.setAttribute("y1",e.toString()),o.setAttribute("x2",s.toString()),o.setAttribute("y2",n.toString()),r&&i.setAttributes(o,r),o},i.createPolygon=function(t,e){var s=document.createElementNS("http://www.w3.org/2000/svg","polygon");return s.setAttribute("points",t),e&&i.setAttributes(s,e),s},i.createCircle=function(t,e){var s=document.createElementNS("http://www.w3.org/2000/svg","circle");return s.setAttribute("cx",(t/2).toString()),s.setAttribute("cy",(t/2).toString()),s.setAttribute("r",t.toString()),e&&i.setAttributes(s,e),s},i.createEllipse=function(t,e,s){var n=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return n.setAttribute("cx",(t/2).toString()),n.setAttribute("cy",(e/2).toString()),n.setAttribute("rx",(t/2).toString()),n.setAttribute("ry",(e/2).toString()),s&&i.setAttributes(n,s),n},i.createGroup=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","g");return t&&i.setAttributes(e,t),e},i.createTransform=function(){return document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGTransform()},i.createMarker=function(t,e,s,n,r,o,a){var l=document.createElementNS("http://www.w3.org/2000/svg","marker");return i.setAttributes(l,[["id",t],["orient",e],["markerWidth",s.toString()],["markerHeight",n.toString()],["refX",r.toString()],["refY",o.toString()]]),l.appendChild(a),l},i.createText=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","text");return e.setAttribute("x","0"),e.setAttribute("y","0"),t&&i.setAttributes(e,t),e},i.createTSpan=function(t,e){var s=document.createElementNS("http://www.w3.org/2000/svg","tspan");return s.textContent=t,e&&i.setAttributes(s,e),s},i.createImage=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","image");return t&&i.setAttributes(e,t),e},i.createPoint=function(t,e){var s=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGPoint();return s.x=t,s.y=e,s},i.createPath=function(t,e){var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",t),e&&i.setAttributes(s,e),s},i}(),wo=function(){function i(){}return i.addKey=function(t){i.key=t},Object.defineProperty(i,"isLicensed",{get:function(){return!!i.key&&new RegExp(/^MJS2-[A-Z][0-9]{3}-[A-Z][0-9]{3}-[0-9]{4}$/,"i").test(i.key)},enumerable:!1,configurable:!0}),i}(),gu=function(){function i(){this.naturalSize=!1,this.imageType="image/png",this.markersOnly=!1}return i.prototype.rasterize=function(t,e,s){var n=this;return new Promise(function(r){var o=s!==void 0?s:document.createElement("canvas");t===null&&(n.markersOnly=!0,n.naturalSize=!1);var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("width",e.width.baseVal.valueAsString),a.setAttribute("height",e.height.baseVal.valueAsString),a.setAttribute("viewBox","0 0 "+e.viewBox.baseVal.width.toString()+" "+e.viewBox.baseVal.height.toString()),a.innerHTML=e.innerHTML,n.naturalSize===!0?(a.width.baseVal.value=t.naturalWidth,a.height.baseVal.value=t.naturalHeight):n.width!==void 0&&n.height!==void 0&&(a.width.baseVal.value=n.width,a.height.baseVal.value=n.height),o.width=a.width.baseVal.value,o.height=a.height.baseVal.value;var l=a.outerHTML,c=o.getContext("2d");n.markersOnly!==!0&&c.drawImage(t,0,0,o.width,o.height);var u=window.URL,f=new Image(o.width,o.height);f.setAttribute("crossOrigin","anonymous");var w=new Blob([l],{type:"image/svg+xml"}),g=u.createObjectURL(w);f.onload=function(){c.drawImage(f,0,0),u.revokeObjectURL(g);var v=o.toDataURL(n.imageType,n.imageQuality);r(v)},f.src=g})},i}(),Co=function(){},mu=function(){function i(t){this._classNamePrefixBase="__markerjs2_",this.classes=[],this.rules=[],this.settings=this.defaultSettings,this._classNamePrefix=this._classNamePrefixBase+"_"+t+"_"}return Object.defineProperty(i.prototype,"classNamePrefixBase",{get:function(){return this._classNamePrefixBase},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"classNamePrefix",{get:function(){return this._classNamePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultSettings",{get:function(){return{canvasBackgroundColor:"#ffffff",toolbarBackgroundColor:"#111111",toolbarBackgroundHoverColor:"#333333",toolbarColor:"#eeeeee",toolbarHeight:40,toolboxColor:"#eeeeee",toolboxAccentColor:"#3080c3",undoButtonVisible:!0,redoButtonVisible:!1,zoomButtonVisible:!1,zoomOutButtonVisible:!1,clearButtonVisible:!1,resultButtonBlockVisible:!0,logoPosition:"left"}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fadeInAnimationClassName",{get:function(){return this.classNamePrefix+"fade_in"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fadeOutAnimationClassName",{get:function(){return this.classNamePrefix+"fade_out"},enumerable:!1,configurable:!0}),i.prototype.addClass=function(t){return this.styleSheet===void 0&&this.addStyleSheet(),t.name=""+this.classNamePrefix+t.localName,this.classes.push(t),this.styleSheet.sheet.insertRule("."+t.name+" {"+t.style+"}",this.styleSheet.sheet.cssRules.length),t},i.prototype.addRule=function(t){this.styleSheet===void 0&&this.addStyleSheet(),this.rules.push(t),this.styleSheet.sheet.insertRule(t.selector+" {"+t.style+"}",this.styleSheet.sheet.cssRules.length)},i.prototype.addStyleSheet=function(){var t;this.styleSheet=document.createElement("style"),((t=this.styleSheetRoot)!==null&&t!==void 0?t:document.head).appendChild(this.styleSheet),this.addRule(new jt("."+this.classNamePrefix+" h3","font-family: sans-serif")),this.addRule(new jt("@keyframes "+this.classNamePrefix+"_fade_in_animation_frames",`
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
    `)),this.addRule(new jt("@keyframes "+this.classNamePrefix+"_fade_out_animation_frames",`
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
    `)),this.addClass(new nt("fade_in",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_in_animation_frames;
    `)),this.addClass(new nt("fade_out",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_out_animation_frames;
    `))},i.prototype.removeStyleSheet=function(){var t;this.styleSheet&&(((t=this.styleSheetRoot)!==null&&t!==void 0?t:document.head).removeChild(this.styleSheet),this.styleSheet=void 0)},i}(),jt=function(i,t){this.selector=i,this.style=t},nt=function(i,t){this.localName=i,this.style=t},yu=function(){function i(t,e,s,n,r){this.buttons=[],this.markerButtons=[],this.buttonClickListeners=[],this.markerjsContainer=t,this.displayMode=e,this.markerItems=s,this.uiStyleSettings=n,this.styles=r,this.addStyles(),this.adjustLayout=this.adjustLayout.bind(this),this.overflowButtonClicked=this.overflowButtonClicked.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this)}return i.prototype.show=function(t){var e=this;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=t,this.uiContainer.className=this.toolbarStyleClass.name+" "+this.styles.fadeInAnimationClassName+" "+(this.uiStyleSettings.toolbarStyleColorsClassName?this.uiStyleSettings.toolbarStyleColorsClassName:this.toolbarStyleColorsClass.name);var s=document.createElement("div");s.className=this.toolbarBlockStyleClass.name,s.style.whiteSpace="nowrap",this.uiContainer.appendChild(s),this.addActionButton(s,'<svg viewBox="0 0 24 24"><path d="M10.07 14.27a.997.997 0 011.33.48l2.3 4.99 1.8-.85-2.31-4.98c-.24-.5-.02-1.1.48-1.33l.28-.08 2.3-.45L8 5.12V15.9l1.82-1.47.25-.16m3.57 7.7a.99.99 0 01-1.33-.47l-2.18-4.74-2.51 2.02c-.17.14-.38.22-.62.22a1 1 0 01-1-1V3a1 1 0 011-1c.24 0 .47.09.64.23l.01-.01 11.49 9.64a1.001 1.001 0 01-.44 1.75l-3.16.62 2.2 4.73c.26.5.02 1.09-.48 1.32l-3.62 1.69z"/></svg>',"select","Select mode"),this.addActionButton(s,'<svg viewBox="0 0 24 24"><path d="M9 3v1H4v2h1v13a2 2 0 002 2h10a2 2 0 002-2V6h1V4h-5V3H9M7 6h10v13H7V6m2 2v9h2V8H9m4 0v9h2V8h-2z"/></svg>',"delete","Delete marker"),this.uiStyleSettings.clearButtonVisible&&this.addActionButton(s,'<svg viewBox="0 0 24 24"><path d="M19.36 2.72l1.42 1.42-5.72 5.71c1.07 1.54 1.22 3.39.32 4.59L9.06 8.12c1.2-.9 3.05-.75 4.59.32l5.71-5.72M5.93 17.57c-2.01-2.01-3.24-4.41-3.58-6.65l4.88-2.09 7.44 7.44-2.09 4.88c-2.24-.34-4.64-1.57-6.65-3.58z"/></svg>',"clear","Delete all markers"),this.uiStyleSettings.undoButtonVisible&&this.addActionButton(s,'<svg viewBox="0 0 24 24"><path d="M12.5 8c-2.65 0-5.05 1-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>',"undo","Undo"),this.uiStyleSettings.redoButtonVisible&&this.addActionButton(s,'<svg viewBox="0 0 24 24"><path d="M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 017.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/></svg>',"redo","Redo"),this.uiStyleSettings.zoomButtonVisible&&this.addActionButton(s,'<svg viewBox="0 0 24 24"><path d="M15.5 14l5 5-1.5 1.5-5-5v-.79l-.27-.28A6.471 6.471 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3 6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.57 4.23l.28.27h.79m-6 0C12 14 14 12 14 9.5S12 5 9.5 5 5 7 5 9.5 7 14 9.5 14m2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"/></svg>',"zoom","Zoom in"),this.uiStyleSettings.zoomButtonVisible&&this.uiStyleSettings.zoomOutButtonVisible&&this.addActionButton(s,'<svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 009.5 3 6.5 6.5 0 003 9.5 6.5 6.5 0 009.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.5-1.5-5-5m-6 0C7 14 5 12 5 9.5S7 5 9.5 5 14 7 14 9.5 12 14 9.5 14M7 9h5v1H7V9z"/></svg>',"zoom-out","Zoom out"),this.uiStyleSettings.notesButtonVisible&&this.addActionButton(s,'<svg viewBox="0 0 24 24"><path d="M18.13 12l1.26-1.26c.44-.44 1-.68 1.61-.74V9l-6-6H5c-1.11 0-2 .89-2 2v14a2 2 0 002 2h6v-1.87l.13-.13H5V5h7v7h6.13M14 4.5l5.5 5.5H14V4.5m5.13 9.33l2.04 2.04L15.04 22H13v-2.04l6.13-6.13m3.72.36l-.98.98-2.04-2.04.98-.98c.19-.2.52-.2.72 0l1.32 1.32c.2.2.2.53 0 .72z"/></svg>',"notes","Notes"),this.markerButtonBlock=document.createElement("div"),this.markerButtonBlock.className=this.toolbarBlockStyleClass.name,this.markerButtonBlock.style.flexGrow="2",this.markerButtonBlock.style.textAlign="center",this.uiContainer.appendChild(this.markerButtonBlock),this.markerButtonOverflowBlock=document.createElement("div"),this.markerButtonOverflowBlock.className=this.toolbarOverflowBlockStyleClass.name+" "+(this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName?this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName:this.toolbarOverflowBlockStyleColorsClass.name),this.markerButtonOverflowBlock.style.display="none",this.uiContainer.appendChild(this.markerButtonOverflowBlock),this.markerItems&&(this.markerItems.forEach(function(r){var o=document.createElement("div");o.className=""+e.toolbarButtonStyleClass.name,o.setAttribute("data-type-name",r.typeName),o.setAttribute("aria-label",r.title),o.setAttribute("title",r.title),o.innerHTML=r.icon,o.addEventListener("click",function(){e.markerToolbarButtonClicked(o,r)}),e.buttons.push(o),e.markerButtons.push(o)}),this.overflowButton=document.createElement("div"),this.overflowButton.className=this.toolbarButtonStyleClass.name+" "+(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name),this.overflowButton.innerHTML='<svg viewBox="0 0 24 24"><path d="M12 16a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2z"/></svg>',this.overflowButton.addEventListener("click",this.overflowButtonClicked),this.markerButtonBlock.appendChild(this.overflowButton));var n=document.createElement("div");n.className=this.toolbarBlockStyleClass.name,n.style.whiteSpace="nowrap",n.style.display=this.uiStyleSettings.resultButtonBlockVisible!==!1?"":"none",this.uiContainer.appendChild(n),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M9 20.42l-6.21-6.21 2.83-2.83L9 14.77l9.88-9.89 2.83 2.83L9 20.42z"/></svg>',"render","Save and close"),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M20 6.91L17.09 4 12 9.09 6.91 4 4 6.91 9.09 12 4 17.09 6.91 20 12 14.91 17.09 20 20 17.09 14.91 12 20 6.91z"/></svg>',"close","Close"),this.markerjsContainer.appendChild(this.uiContainer),this.setSelectMode(),this.setCurrentMarker(),this.adjustLayout()},i.prototype.addButtonClickListener=function(t){this.buttonClickListeners.push(t)},i.prototype.removeButtonClickListener=function(t){this.buttonClickListeners.indexOf(t)>-1&&this.buttonClickListeners.splice(this.buttonClickListeners.indexOf(t),1)},i.prototype.setSelectMode=function(){this.resetButtonStyles(),this.setActiveButton(this.buttons[0])},i.prototype.adjustLayout=function(){if(this.markerButtons&&this.markerButtons.length>0){var t=Math.floor(this.markerButtonBlock.clientWidth/this.uiStyleSettings.toolbarHeight)-1;this.markerButtonBlock.innerHTML="",this.markerButtonOverflowBlock.innerHTML="";for(var e=0;e<this.markerButtons.length;e++)e<t||e===t&&this.markerButtons.length-1===t?this.markerButtonBlock.appendChild(this.markerButtons[e]):(e===t&&this.markerButtonBlock.appendChild(this.overflowButton),this.markerButtonOverflowBlock.appendChild(this.markerButtons[e]))}},i.prototype.overflowButtonClicked=function(){this.markerButtonOverflowBlock.style.display!=="none"?(this.markerButtonOverflowBlock.className=this.markerButtonOverflowBlock.className.replace(this.styles.fadeInAnimationClassName,""),this.markerButtonOverflowBlock.style.display="none"):(this.markerButtonOverflowBlock.className+=" "+this.styles.fadeInAnimationClassName,this.markerButtonOverflowBlock.style.top=this.uiContainer.offsetTop+this.overflowButton.offsetHeight+"px",this.markerButtonOverflowBlock.style.right=this.uiContainer.offsetWidth-this.overflowButton.offsetLeft-this.overflowButton.offsetWidth+2*this.uiContainer.offsetLeft+"px",this.markerButtonOverflowBlock.style.display="inline-block")},i.prototype.resetButtonStyles=function(){var t=this;this.buttons.forEach(function(e){e.className=e.className.replace(t.uiStyleSettings.toolbarButtonStyleColorsClassName?t.uiStyleSettings.toolbarButtonStyleColorsClassName:t.toolbarButtonStyleColorsClass.name,"").trim(),e.className=e.className.replace(t.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?t.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:t.toolbarActiveButtonStyleColorsClass.name,"").trim(),e.className+=" "+(t.uiStyleSettings.toolbarButtonStyleColorsClassName?t.uiStyleSettings.toolbarButtonStyleColorsClassName:t.toolbarButtonStyleColorsClass.name)})},i.prototype.addActionButton=function(t,e,s,n){var r=this,o=document.createElement("div");switch(o.className=""+this.toolbarButtonStyleClass.name,o.innerHTML=e,o.setAttribute("role","button"),o.setAttribute("data-action",s),o.title=n,o.setAttribute("aria-label",n),o.addEventListener("click",function(){r.actionToolbarButtonClicked(o,s)}),s){case"select":o.style.fill=this.uiStyleSettings.selectButtonColor;break;case"delete":case"clear":o.style.fill=this.uiStyleSettings.deleteButtonColor;break;case"undo":case"redo":o.style.fill=this.uiStyleSettings.selectButtonColor;break;case"render":o.style.fill=this.uiStyleSettings.okButtonColor;break;case"close":o.style.fill=this.uiStyleSettings.closeButtonColor}t.appendChild(o),this.buttons.push(o)},i.prototype.addStyles=function(){this.toolbarStyleClass=this.styles.addClass(new nt("toolbar",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: row;
      justify-content: space-between;      
      height: `+this.uiStyleSettings.toolbarHeight+`px;
      box-sizing: content-box;
      `+(this.displayMode==="inline"?"border-top-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-top-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolbarStyleColorsClass=this.styles.addClass(new nt("toolbar_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      box-shadow: 0px 3px rgba(33, 33, 33, 0.1);
    `)),this.toolbarBlockStyleClass=this.styles.addClass(new nt("toolbar-block",`
        display: inline-block;
        box-sizing: content-box;
    `)),this.toolbarOverflowBlockStyleClass=this.styles.addClass(new nt("toolbar-overflow-block",`
        position: absolute;
        top: `+this.uiStyleSettings.toolbarHeight+`px;
        max-width: `+2*this.uiStyleSettings.toolbarHeight+`px;
        z-index: 10;
        box-sizing: content-box;
      `)),this.toolbarOverflowBlockStyleColorsClass=this.styles.addClass(new nt("toolbar-overflow-block_colors",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      `));var t=this.uiStyleSettings.toolbarHeight/4;this.toolbarButtonStyleClass=this.styles.addClass(new nt("toolbar_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*t)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*t)+`px;
      padding: `+t+`px;
      box-sizing: content-box;
    `)),this.toolbarButtonStyleColorsClass=this.styles.addClass(new nt("toolbar_button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolbarActiveButtonStyleColorsClass=this.styles.addClass(new nt("toolbar_active_button",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new jt("."+this.toolbarButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new jt("."+this.toolbarButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `))},i.prototype.markerToolbarButtonClicked=function(t,e){this.setActiveButton(t),this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(s){return s("marker",e)}),this.markerButtonOverflowBlock.style.display="none"},i.prototype.actionToolbarButtonClicked=function(t,e){this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(s){return s("action",e)}),this.markerButtonOverflowBlock.style.display="none",this.setActiveButton(this.buttons[0])},i.prototype.setActiveButton=function(t){this.resetButtonStyles(),t.className=t.className.replace(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name,"").trim(),t.className+=" "+(this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:this.toolbarActiveButtonStyleColorsClass.name)},i.prototype.setActiveMarkerButton=function(t){var e=this.markerButtons.find(function(s){return s.getAttribute("data-type-name")===t});e&&this.setActiveButton(e)},i.prototype.setCurrentMarker=function(t){var e=this;this.currentMarker=t,this.buttons.filter(function(s){return/delete|notes/.test(s.getAttribute("data-action"))}).forEach(function(s){e.currentMarker===void 0?(s.style.fillOpacity="0.4",s.style.pointerEvents="none"):(s.style.fillOpacity="1",s.style.pointerEvents="all")})},i}(),vu=function(){function i(t,e,s,n){this.panels=[],this.panelButtons=[],this.markerjsContainer=t,this.displayMode=e,this.uiStyleSettings=s,this.styles=n,this.panelButtonClick=this.panelButtonClick.bind(this),this.addStyles()}return i.prototype.addStyles=function(){var t;this.toolboxStyleClass=this.styles.addClass(new nt("toolbox",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      font-family: sans-serif;
      `+(this.displayMode==="popup"?"height:"+2.5*this.uiStyleSettings.toolbarHeight+"px;":"")+`
      box-sizing: content-box;
      `+(this.displayMode==="popup"?"background-color: "+this.uiStyleSettings.canvasBackgroundColor+";":"")+`
      `+(this.displayMode==="inline"?"border-bottom-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-bottom-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolboxStyleColorsClass=this.styles.addClass(new nt("toolbox_colors",`
      color: `+this.uiStyleSettings.toolboxColor+`;
    `));var e=this.uiStyleSettings.toolbarHeight/4;this.toolboxButtonRowStyleClass=this.styles.addClass(new nt("toolbox-button-row",`
      display: flex;
      cursor: default;
      box-sizing: content-box;
    `)),this.toolboxButtonRowStyleColorsClass=this.styles.addClass(new nt("toolbox-button-row_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
    `)),this.toolboxPanelRowStyleClass=this.styles.addClass(new nt("toolbox-panel-row",`
      display: flex;
      `+(this.displayMode==="inline"?"position: absolute;":"")+`
      `+(this.displayMode==="inline"?"bottom: "+this.uiStyleSettings.toolbarHeight+"px;":"")+`
      cursor: default;
      height: `+1.5*this.uiStyleSettings.toolbarHeight+`px;
      `+(this.displayMode==="inline"?"width: 100%;":"")+`
      box-sizing: content-box;
    `)),this.toolboxPanelRowStyleColorsClass=this.styles.addClass(new nt("toolbox-panel-row_colors",`
      background-color: `+((t=this.uiStyleSettings.toolboxBackgroundColor)!==null&&t!==void 0?t:this.uiStyleSettings.toolbarBackgroundHoverColor)+`;
    `)),this.toolboxButtonStyleClass=this.styles.addClass(new nt("toolbox_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*e)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*e)+`px;
      padding: `+e+`px;
      box-sizing: content-box;
    `)),this.toolboxButtonStyleColorsClass=this.styles.addClass(new nt("toolbox-button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolboxActiveButtonStyleColorsClass=this.styles.addClass(new nt("toolbox-active-button_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`;
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.styles.addRule(new jt("."+this.toolboxButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new jt("."+this.toolboxButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new jt("."+this.toolboxPanelRowStyleClass.name+" > div",`
        scrollbar-width: thin;
        `)),this.styles.addRule(new jt("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar",`
      height: 10px;
      width: 10px;
    `)),this.styles.addRule(new jt("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-track",`
        background-color: transparent;
        `)),this.styles.addRule(new jt("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-thumb",`
        background-color: #444;
        border-radius: 20px;
        border: 2px solid #aaa;
        `))},i.prototype.show=function(t){var e;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=t,this.uiContainer.className=this.toolboxStyleClass.name+" "+((e=this.uiStyleSettings.toolboxStyleColorsClassName)!==null&&e!==void 0?e:this.toolboxStyleColorsClass.name),this.markerjsContainer.appendChild(this.uiContainer)},i.prototype.setPanelButtons=function(t){var e,s,n=this;this.panels=t,this.uiContainer!==void 0&&(this.uiContainer.innerHTML="",this.panelRow=document.createElement("div"),this.panelRow.className=this.toolboxPanelRowStyleClass.name+" "+((e=this.uiStyleSettings.toolboxPanelRowStyleColorsClassName)!==null&&e!==void 0?e:this.toolboxPanelRowStyleColorsClass.name),this.uiContainer.appendChild(this.panelRow),this.buttonRow=document.createElement("div"),this.buttonRow.className=this.toolboxButtonRowStyleClass.name+" "+((s=this.uiStyleSettings.toolboxButtonRowStyleColorsClassName)!==null&&s!==void 0?s:this.toolboxButtonRowStyleColorsClass.name)+" ",this.uiContainer.appendChild(this.buttonRow),this.panelButtons.splice(0),this.panels.forEach(function(r){var o;r.uiStyleSettings=n.uiStyleSettings;var a=document.createElement("div");a.className=n.toolboxButtonStyleClass.name+" "+((o=n.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&o!==void 0?o:n.toolboxButtonStyleColorsClass.name),a.innerHTML=r.icon,a.title=r.title,a.setAttribute("role","button"),a.setAttribute("aria-label",r.title),r.id&&a.setAttribute("data-action",r.id),a.addEventListener("click",function(){n.panelButtonClick(r)}),n.panelButtons.push(a),n.buttonRow.appendChild(a)}),this.displayMode==="inline"?this.panelRow.style.display="none":this.panelRow.style.visibility="hidden")},i.prototype.panelButtonClick=function(t){var e=this,s=-1;if(t!==this.activePanel){s=this.panels.indexOf(t),this.panelRow.innerHTML="";var n=t.getUi();n.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.panelRow.appendChild(n),this.panelRow.style.display="flex",this.panelRow.style.visibility="visible",this.panelRow.className=this.panelRow.className.replace(this.styles.fadeOutAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeInAnimationClassName,this.activePanel=t}else this.activePanel=void 0,this.panelRow.className=this.panelRow.className.replace(this.styles.fadeInAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeOutAnimationClassName,setTimeout(function(){e.displayMode==="inline"?e.panelRow.style.display="none":e.panelRow.style.visibility="hidden"},200);this.panelButtons.forEach(function(r,o){var a,l;r.className=e.toolboxButtonStyleClass.name+" "+(o===s?""+((a=e.uiStyleSettings.toolboxActiveButtonStyleColorsClassName)!==null&&a!==void 0?a:e.toolboxActiveButtonStyleColorsClass.name):""+((l=e.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&l!==void 0?l:e.toolboxButtonStyleColorsClass.name))})},i}(),Je=function(){function i(t,e,s){this.title=t,this.icon=e,this._id=s}return Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),i}(),_t=function(i){function t(e,s,n,r,o){var a=i.call(this,e,r||'<svg viewBox="0 0 24 24"><path d="M17.5 12a1.5 1.5 0 01-1.5-1.5A1.5 1.5 0 0117.5 9a1.5 1.5 0 011.5 1.5 1.5 1.5 0 01-1.5 1.5m-3-4A1.5 1.5 0 0113 6.5 1.5 1.5 0 0114.5 5 1.5 1.5 0 0116 6.5 1.5 1.5 0 0114.5 8m-5 0A1.5 1.5 0 018 6.5 1.5 1.5 0 019.5 5 1.5 1.5 0 0111 6.5 1.5 1.5 0 019.5 8m-3 4A1.5 1.5 0 015 10.5 1.5 1.5 0 016.5 9 1.5 1.5 0 018 10.5 1.5 1.5 0 016.5 12M12 3a9 9 0 00-9 9 9 9 0 009 9 1.5 1.5 0 001.5-1.5c0-.39-.15-.74-.39-1-.23-.27-.38-.62-.38-1a1.5 1.5 0 011.5-1.5H16a5 5 0 005-5c0-4.42-4.03-8-9-8z"/></svg>',o||"color-picker-panel")||this;return a.colors=[],a.addTransparent=!1,a.colorBoxes=[],a.colors=s,a.currentColor=n,a.setCurrentColor=a.setCurrentColor.bind(a),a.getColorBox=a.getColorBox.bind(a),a}return Q(t,i),t.prototype.getUi=function(){var e=this,s=document.createElement("div");return s.style.overflow="hidden",s.style.overflowX="scroll",s.style.whiteSpace="nowrap",this.colors.forEach(function(n){var r=e.getColorBox(n);s.appendChild(r),e.colorBoxes.push(r)}),s},t.prototype.getColorBox=function(e){var s=this,n=this.uiStyleSettings.toolbarHeight/4,r=this.uiStyleSettings.toolbarHeight-n,o=document.createElement("div");o.style.display="inline-block",o.style.boxSizing="content-box",o.style.width=r-2+"px",o.style.height=r-2+"px",o.style.padding="1px",o.style.marginRight="2px",o.style.marginBottom="2px",o.style.borderWidth="2px",o.style.borderStyle="solid",o.style.borderRadius=(r+2)/2+"px",o.style.borderColor=e===this.currentColor?this.uiStyleSettings.toolboxAccentColor:"transparent",o.addEventListener("click",function(){s.setCurrentColor(e,o)});var a=document.createElement("div");return a.style.display="inline-block",a.style.width=r-2+"px",a.style.height=r-2+"px",a.style.backgroundColor=e,a.style.borderRadius=r/2+"px",e==="transparent"&&(a.style.fill=this.uiStyleSettings.toolboxAccentColor,a.innerHTML=`<svg viewBox="0 0 24 24">
        <path d="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z" />
      </svg>`),o.appendChild(a),o},t.prototype.setCurrentColor=function(e,s){var n=this;this.currentColor=e,this.colorBoxes.forEach(function(r){r.style.borderColor=r===s?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onColorChanged&&this.onColorChanged(e)},t}(Je),Na=function(){function i(t,e,s){this._state="new",this._isSelected=!1,this._container=t,this._overlayContainer=e,this.globalSettings=s,this.stateChanged=this.stateChanged.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this)}return Object.defineProperty(i.prototype,"typeName",{get:function(){return Object.getPrototypeOf(this).constructor.typeName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"overlayContainer",{get:function(){return this._overlayContainer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toolboxPanels",{get:function(){return[]},enumerable:!1,configurable:!0}),i.prototype.ownsTarget=function(t){return!1},Object.defineProperty(i.prototype,"isSelected",{get:function(){return this._isSelected},enumerable:!1,configurable:!0}),i.prototype.select=function(){this.container.style.cursor="move",this._isSelected=!0,this.manipulationStartState=this.getState()},i.prototype.deselect=function(){this.container.style.cursor="default",this._isSelected=!1,this.stateChanged()},i.prototype.pointerDown=function(t,e){},i.prototype.dblClick=function(t,e){},i.prototype.manipulate=function(t){},i.prototype.pointerUp=function(t){this.stateChanged()},i.prototype.dispose=function(){},i.prototype.addMarkerVisualToContainer=function(t){this.container.childNodes.length>0?this.container.insertBefore(t,this.container.childNodes[0]):this.container.appendChild(t)},i.prototype.getState=function(){return{typeName:i.typeName,state:this.state,notes:this.notes}},i.prototype.restoreState=function(t){this._state=t.state,this.notes=t.notes},i.prototype.scale=function(t,e){},i.prototype.colorChanged=function(t){this.onColorChanged&&this.onColorChanged(t),this.stateChanged()},i.prototype.fillColorChanged=function(t){this.onFillColorChanged&&this.onFillColorChanged(t),this.stateChanged()},i.prototype.stateChanged=function(){if(this.onStateChanged&&this.state!=="creating"&&this.state!=="new"){var t=this.getState();this.manipulationStartState!==void 0&&(this.manipulationStartState.state="select"),t.state="select",JSON.stringify(this.manipulationStartState)!=JSON.stringify(t)&&this.onStateChanged(this)}},i.typeName="MarkerBase",i}(),bu=function(){function i(){this.findGripByVisual=this.findGripByVisual.bind(this)}return i.prototype.findGripByVisual=function(t){return this.topLeft.ownsTarget(t)?this.topLeft:this.topCenter.ownsTarget(t)?this.topCenter:this.topRight.ownsTarget(t)?this.topRight:this.centerLeft.ownsTarget(t)?this.centerLeft:this.centerRight.ownsTarget(t)?this.centerRight:this.bottomLeft.ownsTarget(t)?this.bottomLeft:this.bottomCenter.ownsTarget(t)?this.bottomCenter:this.bottomRight.ownsTarget(t)?this.bottomRight:void 0},i}(),pn=function(){function i(){this.GRIP_SIZE=10,this.visual=C.createGroup(),this.visual.appendChild(C.createCircle(1.5*this.GRIP_SIZE,[["fill","transparent"]])),this.visual.appendChild(C.createCircle(this.GRIP_SIZE,[["fill","#cccccc"],["fill-opacity","0.7"],["stroke","#333333"],["stroke-width","2"],["stroke-opacity","0.7"]]))}return i.prototype.ownsTarget=function(t){return t===this.visual||t===this.visual.childNodes[0]||t===this.visual.childNodes[1]},i}(),Vi=function(){function i(){}return i.toITransformMatrix=function(t){return{a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}},i.toSVGMatrix=function(t,e){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t},i}(),Ti=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.left=0,r.top=0,r.width=0,r.height=0,r.defaultSize={x:50,y:20},r.offsetX=0,r.offsetY=0,r.rotationAngle=0,r.CB_DISTANCE=10,r._suppressMarkerCreateEvent=!1,r.container.transform.baseVal.appendItem(C.createTransform()),r.setupControlBox(),r}return Q(t,i),Object.defineProperty(t.prototype,"centerX",{get:function(){return this.left+this.width/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this.top+this.height/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visual",{get:function(){return this._visual},set:function(e){this._visual=e;var s=C.createTransform();this._visual.transform.baseVal.appendItem(s)},enumerable:!1,configurable:!0}),t.prototype.ownsTarget=function(e){return!!i.prototype.ownsTarget.call(this,e)||!!(this.controlGrips.findGripByVisual(e)!==void 0||this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(e))},t.prototype.pointerDown=function(e,s){i.prototype.pointerDown.call(this,e,s),this.state==="new"&&(this.left=e.x,this.top=e.y),this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.manipulationStartWidth=this.width,this.manipulationStartHeight=this.height;var n=this.unrotatePoint(e);if(this.manipulationStartX=n.x,this.manipulationStartY=n.y,this.offsetX=n.x-this.left,this.offsetY=n.y-this.top,this.state!=="new")if(this.select(),this.activeGrip=this.controlGrips.findGripByVisual(s),this.activeGrip!==void 0)this._state="resize";else if(this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(s)){this.activeGrip=this.rotatorGrip;var r=this.rotatePoint({x:this.centerX,y:this.centerY});this.left=r.x-this.width/2,this.top=r.y-this.height/2,this.moveVisual({x:this.left,y:this.top});var o=this.container.transform.baseVal.getItem(0);o.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(o,0),this.adjustControlBox(),this._state="rotate"}else this._state="move"},t.prototype.pointerUp=function(e){var s=this.state;i.prototype.pointerUp.call(this,e),this.state==="creating"&&this.width<10&&this.height<10?(this.width=this.defaultSize.x,this.height=this.defaultSize.y):this.manipulate(e),this._state="select",s==="creating"&&this.onMarkerCreated&&this._suppressMarkerCreateEvent===!1&&this.onMarkerCreated(this)},t.prototype.moveVisual=function(e){this.visual.style.transform="translate("+e.x+"px, "+e.y+"px)"},t.prototype.manipulate=function(e){var s=this.unrotatePoint(e);this.state==="creating"?this.resize(e):this.state==="move"?(this.left=this.manipulationStartLeft+(s.x-this.manipulationStartLeft)-this.offsetX,this.top=this.manipulationStartTop+(s.y-this.manipulationStartTop)-this.offsetY,this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()):this.state==="resize"?this.resize(s):this.state==="rotate"&&this.rotate(e)},t.prototype.resize=function(e){var s=this.manipulationStartLeft,n=this.manipulationStartWidth,r=this.manipulationStartTop,o=this.manipulationStartHeight;switch(this.activeGrip){case this.controlGrips.bottomLeft:case this.controlGrips.centerLeft:case this.controlGrips.topLeft:s=this.manipulationStartLeft+e.x-this.manipulationStartX,n=this.manipulationStartWidth+this.manipulationStartLeft-s;break;case this.controlGrips.bottomRight:case this.controlGrips.centerRight:case this.controlGrips.topRight:case void 0:n=this.manipulationStartWidth+e.x-this.manipulationStartX}switch(this.activeGrip){case this.controlGrips.topCenter:case this.controlGrips.topLeft:case this.controlGrips.topRight:r=this.manipulationStartTop+e.y-this.manipulationStartY,o=this.manipulationStartHeight+this.manipulationStartTop-r;break;case this.controlGrips.bottomCenter:case this.controlGrips.bottomLeft:case this.controlGrips.bottomRight:case void 0:o=this.manipulationStartHeight+e.y-this.manipulationStartY}n>=0?(this.left=s,this.width=n):(this.left=s+n,this.width=-n),o>=0?(this.top=r,this.height=o):(this.top=r+o,this.height=-o),this.setSize()},t.prototype.setSize=function(){this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()},t.prototype.rotate=function(e){if(Math.abs(e.x-this.centerX)>.1){var s=Math.sign(e.x-this.centerX);this.rotationAngle=180*Math.atan((e.y-this.centerY)/(e.x-this.centerX))/Math.PI+90*s,this.applyRotation()}},t.prototype.applyRotation=function(){var e=this.container.transform.baseVal.getItem(0);e.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(e,0)},t.prototype.rotatePoint=function(e){if(this.rotationAngle===0)return e;var s=this.container.getCTM(),n=C.createPoint(e.x,e.y);return{x:(n=n.matrixTransform(s)).x,y:n.y}},t.prototype.unrotatePoint=function(e){if(this.rotationAngle===0)return e;var s=this.container.getCTM();s=s.inverse();var n=C.createPoint(e.x,e.y);return{x:(n=n.matrixTransform(s)).x,y:n.y}},t.prototype.select=function(){i.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},t.prototype.deselect=function(){i.prototype.deselect.call(this),this.controlBox.style.display="none"},t.prototype.setupControlBox=function(){this.controlBox=C.createGroup();var e=C.createTransform();e.setTranslate(-this.CB_DISTANCE/2,-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.appendItem(e),this.container.appendChild(this.controlBox),this.controlRect=C.createRect(this.width+this.CB_DISTANCE,this.height+this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"],["fill","transparent"],["pointer-events","none"]]),this.controlBox.appendChild(this.controlRect),this.globalSettings.disableRotation!==!0&&(this.rotatorGripLine=C.createLine((this.width+2*this.CB_DISTANCE)/2,this.top-this.CB_DISTANCE,(this.width+2*this.CB_DISTANCE)/2,this.top-3*this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.appendChild(this.rotatorGripLine)),this.controlGrips=new bu,this.addControlGrips(),this.controlBox.style.display="none"},t.prototype.adjustControlBox=function(){var e=this.controlBox.transform.baseVal.getItem(0);e.setTranslate(this.left-this.CB_DISTANCE/2,this.top-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.replaceItem(e,0),this.controlRect.setAttribute("width",(this.width+this.CB_DISTANCE).toString()),this.controlRect.setAttribute("height",(this.height+this.CB_DISTANCE).toString()),this.rotatorGripLine!==void 0&&(this.rotatorGripLine.setAttribute("x1",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y1",(-this.CB_DISTANCE/2).toString()),this.rotatorGripLine.setAttribute("x2",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y2",(3*-this.CB_DISTANCE).toString())),this.positionGrips()},t.prototype.addControlGrips=function(){this.controlGrips.topLeft=this.createGrip(),this.controlGrips.topCenter=this.createGrip(),this.controlGrips.topRight=this.createGrip(),this.controlGrips.centerLeft=this.createGrip(),this.controlGrips.centerRight=this.createGrip(),this.controlGrips.bottomLeft=this.createGrip(),this.controlGrips.bottomCenter=this.createGrip(),this.controlGrips.bottomRight=this.createGrip(),this.globalSettings.disableRotation!==!0&&(this.rotatorGrip=this.createGrip()),this.positionGrips()},t.prototype.createGrip=function(){var e=new pn;return e.visual.transform.baseVal.appendItem(C.createTransform()),this.controlBox.appendChild(e.visual),e},t.prototype.positionGrips=function(){var e=this.controlGrips.topLeft.GRIP_SIZE,s=-e/2,n=s,r=(this.width+this.CB_DISTANCE)/2-e/2,o=(this.height+this.CB_DISTANCE)/2-e/2,a=this.height+this.CB_DISTANCE-e/2,l=this.width+this.CB_DISTANCE-e/2;this.positionGrip(this.controlGrips.topLeft.visual,s,n),this.positionGrip(this.controlGrips.topCenter.visual,r,n),this.positionGrip(this.controlGrips.topRight.visual,l,n),this.positionGrip(this.controlGrips.centerLeft.visual,s,o),this.positionGrip(this.controlGrips.centerRight.visual,l,o),this.positionGrip(this.controlGrips.bottomLeft.visual,s,a),this.positionGrip(this.controlGrips.bottomCenter.visual,r,a),this.positionGrip(this.controlGrips.bottomRight.visual,l,a),this.rotatorGrip!==void 0&&this.positionGrip(this.rotatorGrip.visual,r,n-3*this.CB_DISTANCE)},t.prototype.positionGrip=function(e,s,n){var r=e.transform.baseVal.getItem(0);r.setTranslate(s,n),e.transform.baseVal.replaceItem(r,0)},t.prototype.hideControlBox=function(){this.controlBox.style.display="none"},t.prototype.showControlBox=function(){this.controlBox.style.display=""},t.prototype.getState=function(){return Object.assign({left:this.left,top:this.top,width:this.width,height:this.height,rotationAngle:this.rotationAngle,visualTransformMatrix:Vi.toITransformMatrix(this.visual.transform.baseVal.getItem(0).matrix),containerTransformMatrix:Vi.toITransformMatrix(this.container.transform.baseVal.getItem(0).matrix)},i.prototype.getState.call(this))},t.prototype.restoreState=function(e){i.prototype.restoreState.call(this,e);var s=e;this.left=s.left,this.top=s.top,this.width=s.width,this.height=s.height,this.rotationAngle=s.rotationAngle,this.visual.transform.baseVal.getItem(0).setMatrix(Vi.toSVGMatrix(this.visual.transform.baseVal.getItem(0).matrix,s.visualTransformMatrix)),this.container.transform.baseVal.getItem(0).setMatrix(Vi.toSVGMatrix(this.container.transform.baseVal.getItem(0).matrix,s.containerTransformMatrix))},t.prototype.scale=function(e,s){i.prototype.scale.call(this,e,s);var n=this.rotatePoint({x:this.left,y:this.top}),r=this.unrotatePoint({x:n.x*e,y:n.y*s});this.left=r.x,this.top=r.y,this.width=this.width*e,this.height=this.height*s,this.adjustControlBox()},t}(Na),Fa=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.fillColor="transparent",r.strokeColor="transparent",r.strokeWidth=0,r.strokeDasharray="",r.opacity=1,r.setStrokeColor=r.setStrokeColor.bind(r),r.setFillColor=r.setFillColor.bind(r),r.setStrokeWidth=r.setStrokeWidth.bind(r),r.setStrokeDasharray=r.setStrokeDasharray.bind(r),r.createVisual=r.createVisual.bind(r),r}return Q(t,i),t.prototype.ownsTarget=function(e){return!(!i.prototype.ownsTarget.call(this,e)&&e!==this.visual)},t.prototype.createVisual=function(){this.visual=C.createRect(1,1,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(e,s){i.prototype.pointerDown.call(this,e,s),this.state==="new"&&(this.createVisual(),this.moveVisual(e),this._state="creating")},t.prototype.manipulate=function(e){i.prototype.manipulate.call(this,e)},t.prototype.resize=function(e){i.prototype.resize.call(this,e),this.setSize()},t.prototype.setSize=function(){i.prototype.setSize.call(this),C.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]])},t.prototype.pointerUp=function(e){i.prototype.pointerUp.call(this,e),this.setSize()},t.prototype.setStrokeColor=function(e){this.strokeColor=e,this.visual&&C.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(e),this.stateChanged()},t.prototype.setFillColor=function(e){this.fillColor=e,this.visual&&C.setAttributes(this.visual,[["fill",this.fillColor]]),this.stateChanged()},t.prototype.setStrokeWidth=function(e){this.strokeWidth=e,this.visual&&C.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(e){this.strokeDasharray=e,this.visual&&C.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},t.prototype.getState=function(){return Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},i.prototype.getState.call(this))},t.prototype.restoreState=function(e){var s=e;this.fillColor=s.fillColor,this.strokeColor=s.strokeColor,this.strokeWidth=s.strokeWidth,this.strokeDasharray=s.strokeDasharray,this.opacity=s.opacity,this.createVisual(),i.prototype.restoreState.call(this,e),this.setSize()},t.prototype.scale=function(e,s){i.prototype.scale.call(this,e,s),this.setSize()},t.title="Rectangle marker",t}(Ti),Ze=function(i){function t(e,s,n,r,o){var a=i.call(this,e,r||'<svg viewBox="0 0 24 24"><path d="M3 17h18v-2H3v2m0 3h18v-1H3v1m0-7h18v-3H3v3m0-9v4h18V4H3z"/></svg>',o||"line-width-panel")||this;return a.widths=[],a.widthBoxes=[],a.widths=s,a.currentWidth=n,a.setCurrentWidth=a.setCurrentWidth.bind(a),a}return Q(t,i),t.prototype.getUi=function(){var e=this,s=document.createElement("div");return s.style.display="flex",s.style.overflow="hidden",s.style.flexGrow="2",this.widths.forEach(function(n){var r=document.createElement("div");r.style.display="flex",r.style.flexGrow="2",r.style.alignItems="center",r.style.justifyContent="space-between",r.style.padding="5px",r.style.borderWidth="2px",r.style.borderStyle="solid",r.style.borderColor=n===e.currentWidth?e.uiStyleSettings.toolboxAccentColor:"transparent",r.addEventListener("click",function(){e.setCurrentWidth(n,r)}),s.appendChild(r);var o=document.createElement("div");o.innerText=n.toString(),o.style.marginRight="5px",r.appendChild(o);var a=document.createElement("div");a.style.minHeight="20px",a.style.flexGrow="2",a.style.display="flex",a.style.alignItems="center";var l=document.createElement("hr");l.style.minWidth="20px",l.style.border="0px",l.style.borderTop=n+"px solid "+e.uiStyleSettings.toolboxColor,l.style.flexGrow="2",a.appendChild(l),r.appendChild(a),e.widthBoxes.push(r)}),s},t.prototype.setCurrentWidth=function(e,s){var n=this;this.currentWidth=e,this.widthBoxes.forEach(function(r){r.style.borderColor=r===s?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onWidthChanged&&this.onWidthChanged(this.currentWidth)},t}(Je),Bi=function(i){function t(e,s,n,r,o){var a=i.call(this,e,r||'<svg viewBox="0 0 24 24"><path d="M3 16h5v-2H3v2m6.5 0h5v-2h-5v2m6.5 0h5v-2h-5v2M3 20h2v-2H3v2m4 0h2v-2H7v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2M3 12h8v-2H3v2m10 0h8v-2h-8v2M3 4v4h18V4H3z"/></svg>',o||"line-style-panel")||this;return a.styles=[],a.styleBoxes=[],a.styles=s,a.currentStyle=n,a.setCurrentStyle=a.setCurrentStyle.bind(a),a}return Q(t,i),t.prototype.getUi=function(){var e=this,s=document.createElement("div");return s.style.display="flex",s.style.overflow="hidden",s.style.flexGrow="2",this.styles.forEach(function(n){var r=document.createElement("div");r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="space-between",r.style.padding="5px",r.style.borderWidth="2px",r.style.borderStyle="solid",r.style.overflow="hidden",r.style.maxWidth=100/e.styles.length-5+"%",r.style.borderColor=n===e.currentStyle?e.uiStyleSettings.toolboxAccentColor:"transparent",r.addEventListener("click",function(){e.setCurrentStyle(n,r)}),s.appendChild(r);var o=document.createElement("div");o.style.minHeight="20px",o.style.flexGrow="2",o.style.overflow="hidden";var a=`<svg width="100" height="20">
      <line x1="0" y1="10" x2="100" y2="10" stroke="`+e.uiStyleSettings.toolboxColor+'" stroke-width="3" '+(n!==""?'stroke-dasharray="'+n+'"':"")+` />
  </svg>`;o.innerHTML=a,r.appendChild(o),e.styleBoxes.push(r)}),s},t.prototype.setCurrentStyle=function(e,s){var n=this;this.currentStyle=e,this.styleBoxes.forEach(function(r){r.style.borderColor=r===s?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onStyleChanged&&this.onStyleChanged(this.currentStyle)},t}(Je),mr=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.strokeColor=n.defaultColor,r.strokeWidth=n.defaultStrokeWidth,r.strokeDasharray=n.defaultStrokeDasharray,r.strokePanel=new _t("Line color",n.defaultColorSet,n.defaultColor),r.strokePanel.onColorChanged=r.setStrokeColor,r.strokeWidthPanel=new Ze("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),r.strokeWidthPanel.onWidthChanged=r.setStrokeWidth,r.strokeStylePanel=new Bi("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),r.strokeStylePanel.onStyleChanged=r.setStrokeDasharray,r}return Q(t,i),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=i.prototype.getState.call(this);return e.typeName=t.typeName,e},t.typeName="FrameMarker",t.title="Frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4m14 11H6V8h12v9z"/></svg>',t}(Fa),wu=function(){this.defaultColorSet=["#EF4444","#10B981","#2563EB","#FFFF00","#7C3AED","#F472B6","#000000","#FFFFFF"],this.defaultColor=this.defaultColorSet[0],this.defaultFillColor=this.defaultColorSet[0],this.defaultStrokeColor=this.defaultColorSet[7],this.defaultHighlightColor=this.defaultColorSet[3],this.defaultStrokeWidth=3,this.defaultStrokeDasharray="",this.defaultHighlightOpacity=.5,this.defaultFontFamily="Helvetica, Arial, sans-serif",this.defaultStrokeWidths=[1,2,3,5,10],this.defaultStrokeDasharrays=["","3","12 3","9 6 3 6"],this.defaultOpacitySteps=[.1,.25,.5,.75,1],this.displayMode="inline",this.defaultFontFamilies=['Times, "Times New Roman", serif',"Helvetica, Arial, sans-serif",'Courier, "Courier New", monospace',"cursive","fantasy"],this.popupMargin=30,this.newFreehandMarkerOnPointerUp=!1,this.defaultColorsFollowCurrentColors=!1,this.freehandPixelRatio=1,this.disableRotation=!1,this.defaultCaptionFontSize="1rem",this.defaultCaptionText="Text",this.wrapText=!1,this.defaultText="Your text here"},Wa=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.x1=0,r.y1=0,r.x2=0,r.y2=0,r.defaultLength=50,r.manipulationStartX=0,r.manipulationStartY=0,r.manipulationStartX1=0,r.manipulationStartY1=0,r.manipulationStartX2=0,r.manipulationStartY2=0,r.setupControlBox(),r}return Q(t,i),t.prototype.ownsTarget=function(e){return!!i.prototype.ownsTarget.call(this,e)||!(!this.grip1.ownsTarget(e)&&!this.grip2.ownsTarget(e))},t.prototype.pointerDown=function(e,s){i.prototype.pointerDown.call(this,e,s),this.manipulationStartX=e.x,this.manipulationStartY=e.y,this.state==="new"&&(this.x1=e.x,this.y1=e.y,this.x2=e.x,this.y2=e.y),this.manipulationStartX1=this.x1,this.manipulationStartY1=this.y1,this.manipulationStartX2=this.x2,this.manipulationStartY2=this.y2,this.state!=="new"&&(this.select(),this.grip1.ownsTarget(s)?this.activeGrip=this.grip1:this.grip2.ownsTarget(s)?this.activeGrip=this.grip2:this.activeGrip=void 0,this.activeGrip?this._state="resize":this._state="move")},t.prototype.pointerUp=function(e){var s=this.state;i.prototype.pointerUp.call(this,e),this.state==="creating"&&Math.abs(this.x1-this.x2)<10&&Math.abs(this.y1-this.y2)<10?(this.x2=this.x1+this.defaultLength,this.adjustVisual(),this.adjustControlBox()):this.manipulate(e),this._state="select",s==="creating"&&this.onMarkerCreated&&this.onMarkerCreated(this)},t.prototype.adjustVisual=function(){},t.prototype.manipulate=function(e){this.state==="creating"?this.resize(e):this.state==="move"?(this.x1=this.manipulationStartX1+e.x-this.manipulationStartX,this.y1=this.manipulationStartY1+e.y-this.manipulationStartY,this.x2=this.manipulationStartX2+e.x-this.manipulationStartX,this.y2=this.manipulationStartY2+e.y-this.manipulationStartY,this.adjustVisual(),this.adjustControlBox()):this.state==="resize"&&this.resize(e)},t.prototype.resize=function(e){switch(this.activeGrip){case this.grip1:this.x1=e.x,this.y1=e.y;break;case this.grip2:case void 0:this.x2=e.x,this.y2=e.y}this.adjustVisual(),this.adjustControlBox()},t.prototype.select=function(){i.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},t.prototype.deselect=function(){i.prototype.deselect.call(this),this.controlBox.style.display="none"},t.prototype.setupControlBox=function(){this.controlBox=C.createGroup(),this.container.appendChild(this.controlBox),this.addControlGrips(),this.controlBox.style.display="none"},t.prototype.adjustControlBox=function(){this.positionGrips()},t.prototype.addControlGrips=function(){this.grip1=this.createGrip(),this.grip2=this.createGrip(),this.positionGrips()},t.prototype.createGrip=function(){var e=new pn;return e.visual.transform.baseVal.appendItem(C.createTransform()),this.controlBox.appendChild(e.visual),e},t.prototype.positionGrips=function(){var e=this.grip1.GRIP_SIZE;this.positionGrip(this.grip1.visual,this.x1-e/2,this.y1-e/2),this.positionGrip(this.grip2.visual,this.x2-e/2,this.y2-e/2)},t.prototype.positionGrip=function(e,s,n){var r=e.transform.baseVal.getItem(0);r.setTranslate(s,n),e.transform.baseVal.replaceItem(r,0)},t.prototype.getState=function(){return Object.assign({x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2},i.prototype.getState.call(this))},t.prototype.restoreState=function(e){i.prototype.restoreState.call(this,e);var s=e;this.x1=s.x1,this.y1=s.y1,this.x2=s.x2,this.y2=s.y2},t.prototype.scale=function(e,s){i.prototype.scale.call(this,e,s),this.x1=this.x1*e,this.y1=this.y1*s,this.x2=this.x2*e,this.y2=this.y2*s,this.adjustVisual(),this.adjustControlBox()},t}(Na),gn=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.strokeColor="transparent",r.strokeWidth=0,r.strokeDasharray="",r.setStrokeColor=r.setStrokeColor.bind(r),r.setStrokeWidth=r.setStrokeWidth.bind(r),r.setStrokeDasharray=r.setStrokeDasharray.bind(r),r.strokeColor=n.defaultColor,r.strokeWidth=n.defaultStrokeWidth,r.strokeDasharray=n.defaultStrokeDasharray,r.strokePanel=new _t("Line color",n.defaultColorSet,n.defaultColor),r.strokePanel.onColorChanged=r.setStrokeColor,r.strokeWidthPanel=new Ze("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),r.strokeWidthPanel.onWidthChanged=r.setStrokeWidth,r.strokeStylePanel=new Bi("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),r.strokeStylePanel.onStyleChanged=r.setStrokeDasharray,r}return Q(t,i),t.prototype.ownsTarget=function(e){return!(!i.prototype.ownsTarget.call(this,e)&&e!==this.visual&&e!==this.selectorLine&&e!==this.visibleLine)},t.prototype.createVisual=function(){this.visual=C.createGroup(),this.selectorLine=C.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()]]),this.visibleLine=C.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.visual.appendChild(this.selectorLine),this.visual.appendChild(this.visibleLine),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(e,s){i.prototype.pointerDown.call(this,e,s),this.state==="new"&&(this.createVisual(),this.adjustVisual(),this._state="creating")},t.prototype.adjustVisual=function(){this.selectorLine&&this.visibleLine&&(this.selectorLine.setAttribute("x1",this.x1.toString()),this.selectorLine.setAttribute("y1",this.y1.toString()),this.selectorLine.setAttribute("x2",this.x2.toString()),this.selectorLine.setAttribute("y2",this.y2.toString()),this.visibleLine.setAttribute("x1",this.x1.toString()),this.visibleLine.setAttribute("y1",this.y1.toString()),this.visibleLine.setAttribute("x2",this.x2.toString()),this.visibleLine.setAttribute("y2",this.y2.toString()),C.setAttributes(this.visibleLine,[["stroke",this.strokeColor]]),C.setAttributes(this.visibleLine,[["stroke-width",this.strokeWidth.toString()]]),C.setAttributes(this.visibleLine,[["stroke-dasharray",this.strokeDasharray.toString()]]))},t.prototype.setStrokeColor=function(e){this.strokeColor=e,this.adjustVisual(),this.colorChanged(e)},t.prototype.setStrokeWidth=function(e){this.strokeWidth=e,this.adjustVisual()},t.prototype.setStrokeDasharray=function(e){this.strokeDasharray=e,this.adjustVisual(),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray},i.prototype.getState.call(this));return e.typeName=t.typeName,e},t.prototype.restoreState=function(e){i.prototype.restoreState.call(this,e);var s=e;this.strokeColor=s.strokeColor,this.strokeWidth=s.strokeWidth,this.strokeDasharray=s.strokeDasharray,this.createVisual(),this.adjustVisual()},t.typeName="LineMarker",t.title="Line marker",t.icon='<svg viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>',t}(Wa),mn=function(i){function t(e,s,n,r,o){var a=i.call(this,e,r||'<svg viewBox="0 0 24 24"><path d="M17 8h3v12h1v1h-4v-1h1v-3h-4l-1.5 3H14v1h-4v-1h1l6-12m1 1l-3.5 7H18V9M5 3h5c1.11 0 2 .89 2 2v11H9v-5H6v5H3V5c0-1.11.89-2 2-2m1 2v4h3V5H6z"/></svg>',o||"font-family-panel")||this;return a.fonts=[],a.fontBoxes=[],a.fonts=s,a.currentFont=n,a.setCurrentFont=a.setCurrentFont.bind(a),a}return Q(t,i),t.prototype.getUi=function(){var e=this,s=document.createElement("div");return s.style.overflow="hidden",s.style.flexGrow="2",this.fonts.forEach(function(n){var r=document.createElement("div");r.style.display="inline-block",r.style.alignItems="center",r.style.justifyContent="space-between",r.style.padding="5px",r.style.borderWidth="2px",r.style.borderStyle="solid",r.style.overflow="hidden",r.style.maxWidth=100/e.fonts.length-5+"%",r.style.borderColor=n===e.currentFont?e.uiStyleSettings.toolboxAccentColor:"transparent",r.addEventListener("click",function(){e.setCurrentFont(n,r)}),s.appendChild(r);var o=document.createElement("div");o.style.display="flex",o.style.minHeight="20px",o.style.flexGrow="2",o.style.fontFamily=n,o.style.overflow="hidden";var a=document.createElement("div");a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",a.innerHTML="The quick brown fox jumps over the lazy dog",o.appendChild(a),r.appendChild(o),e.fontBoxes.push(r)}),s},t.prototype.setCurrentFont=function(e,s){var n=this;this.currentFont=e,this.fontBoxes.forEach(function(r){r.style.borderColor=r===s?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onFontChanged&&this.onFontChanged(this.currentFont)},t}(Je),ri=function(i){function t(e,s,n){var r,o=i.call(this,e,s,n)||this;return o.color="transparent",o.padding=5,o.DEFAULT_TEXT="your text here",o.isMoved=!1,o.color=n.defaultColor,o.fontFamily=n.defaultFontFamily,o.text=(r=n.defaultText)!==null&&r!==void 0?r:o.DEFAULT_TEXT,o.defaultSize={x:100,y:30},o.setColor=o.setColor.bind(o),o.setFont=o.setFont.bind(o),o.renderText=o.renderText.bind(o),o.sizeText=o.sizeText.bind(o),o.textEditDivClicked=o.textEditDivClicked.bind(o),o.showTextEditor=o.showTextEditor.bind(o),o.setSize=o.setSize.bind(o),o.positionTextEditor=o.positionTextEditor.bind(o),o.wrapText=o.wrapText.bind(o),o.colorPanel=new _t("Color",n.defaultColorSet,n.defaultColor),o.colorPanel.onColorChanged=o.setColor,o.fontFamilyPanel=new mn("Font",n.defaultFontFamilies,n.defaultFontFamily),o.fontFamilyPanel.onFontChanged=o.setFont,o}return Q(t,i),t.prototype.ownsTarget=function(e){if(i.prototype.ownsTarget.call(this,e)||e===this.visual||e===this.textElement||e===this.bgRectangle)return!0;var s=!1;return this.textElement.childNodes.forEach(function(n){n===e&&(s=!0)}),s},t.prototype.createVisual=function(){this.visual=C.createGroup(),this.bgRectangle=C.createRect(1,1,[["fill","transparent"]]),this.visual.appendChild(this.bgRectangle),this.textElement=C.createText([["fill",this.color],["font-family",this.fontFamily],["font-size","16px"],["x","0"],["y","0"]]),this.textElement.transform.baseVal.appendItem(C.createTransform()),this.textElement.transform.baseVal.appendItem(C.createTransform()),this.visual.appendChild(this.textElement),this.addMarkerVisualToContainer(this.visual),this.renderText()},t.prototype.pointerDown=function(e,s){i.prototype.pointerDown.call(this,e,s),this.isMoved=!1,this.pointerDownPoint=e,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(e),this._state="creating")},t.prototype.wrapText=function(){function e(c){var u=c[0].length;return c.forEach(function(f){f.length>u&&(u=f.length)}),.35*u/c.length}if(this.text!==""){for(var s=this.text.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/),n=1*this.width/this.height,r=new(Array.bind.apply(Array,ki([void 0],s))),o=e(r),a=Number.MAX_VALUE,l=function(){var c=r[0];r.forEach(function(u){u.length>c.length&&(c=u)}),(a=c.lastIndexOf(" ",a-1))>0?(r=[],s.forEach(function(u){for(var f=u;f.length>a;){var w=f.lastIndexOf(" ",a);w<0&&(w=f.indexOf(" ")),w>0?(r.push(f.substring(0,w)),f=f.substring(w).trim()):(r.push(f),f="")}r.push(f)}),o=e(r)):o=-1};o>n;)l();return r.join(`\r
`)}return this.text},t.prototype.renderText=function(){var e=this;if(this.textElement){for(;this.textElement.lastChild;)this.textElement.removeChild(this.textElement.lastChild);(this.globalSettings.wrapText?this.wrapText():this.text).split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/).forEach(function(s){e.textElement.appendChild(C.createTSpan(s.trim()===""?" ":s.trim(),[["x","0"],["dy","1.2em"]]))}),setTimeout(this.sizeText,10)}},t.prototype.getTextScale=function(){var e=this.textElement.getBBox(),s=1;if(e.width>0&&e.height>0){var n=(1*this.width-this.width*this.padding*2/100)/e.width,r=(1*this.height-this.height*this.padding*2/100)/e.height;s=Math.min(n,r)}return s},t.prototype.getTextPosition=function(e){var s=window.getComputedStyle(this.textElement).direction==="rtl"?1:-1,n=this.textElement.getBBox(),r=0,o=0;return n.width>0&&n.height>0&&(r=(this.width+s*n.width*e)/2,o=this.height/2-n.height*e/2),{x:r,y:o}},t.prototype.sizeText=function(){var e=this.textElement.getBBox(),s=this.getTextScale(),n=this.getTextPosition(s);n.y-=e.y*s,navigator.userAgent.indexOf("Edge/")>-1?this.textElement.style.transform="translate("+n.x+"px, "+n.y+"px) scale("+s+", "+s+")":(this.textElement.transform.baseVal.getItem(0).setTranslate(n.x,n.y),this.textElement.transform.baseVal.getItem(1).setScale(s,s))},t.prototype.manipulate=function(e){i.prototype.manipulate.call(this,e),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(e.x-this.pointerDownPoint.x)>5||Math.abs(e.y-this.pointerDownPoint.y)>5)},t.prototype.resize=function(e){i.prototype.resize.call(this,e),this.isMoved=!0,this.setSize(),this.globalSettings.wrapText?this.renderText():this.sizeText()},t.prototype.setSize=function(){i.prototype.setSize.call(this),this.visual&&this.bgRectangle&&(C.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),C.setAttributes(this.bgRectangle,[["width",this.width.toString()],["height",this.height.toString()]]))},t.prototype.pointerUp=function(e){var s=this.state;s==="creating"&&(this._suppressMarkerCreateEvent=!0),i.prototype.pointerUp.call(this,e),this.setSize(),(s==="creating"||!this.isMoved&&Date.now()-this.pointerDownTimestamp>500)&&this.showTextEditor(),this.pointerDownPoint=void 0},t.prototype.showTextEditor=function(){var e=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditor=document.createElement("div"),this.textEditor.style.position="absolute",this.textEditor.style.fontFamily=this.fontFamily,this.textEditor.style.lineHeight="1em",this.textEditor.innerText=this.text,this.textEditor.contentEditable="true",this.textEditor.style.color=this.color,this.textEditor.style.whiteSpace="pre",this.positionTextEditor(),this.textEditor.addEventListener("pointerup",function(s){s.stopPropagation()}),this.globalSettings.wrapText||this.textEditor.addEventListener("input",function(){for(var s=Number.parseFloat(e.textEditor.style.fontSize);e.textEditor.clientWidth>=Number.parseInt(e.textEditor.style.maxWidth)&&s>.9;)s-=.1,e.textEditor.style.fontSize=Math.max(s,.9)+"em"}),this.textEditor.addEventListener("keyup",function(s){s.cancelBubble=!0}),this.textEditor.addEventListener("paste",function(s){if(s.clipboardData){var n=s.clipboardData.getData("text"),r=window.getSelection();if(!r.rangeCount)return!1;r.deleteFromDocument(),r.getRangeAt(0).insertNode(document.createTextNode(n)),s.preventDefault()}}),this.textEditDiv.addEventListener("pointerup",function(){e.textEditDivClicked(e.textEditor.innerText)}),this.textEditDiv.appendChild(this.textEditor),this.overlayContainer.appendChild(this.textEditDiv),this.hideVisual(),this.textEditor.focus(),document.execCommand("selectAll")},t.prototype.positionTextEditor=function(){if(this.state==="edit")if(this.textEditor===void 0)this.showTextEditor();else if(this.globalSettings.wrapText)this.textEditor.style.left=this.left+this.padding+"px",this.textEditor.style.top=this.top+this.padding+"px",this.textEditor.style.width=this.width-2*this.padding+"px",this.textEditor.style.height=this.height-2*this.padding+"px",this.textEditor.style.maxHeight=this.textEditor.style.height,this.textEditor.style.whiteSpace="wrap";else{this.textElement.style.display="";var e=this.getTextScale(),s=this.rotatePoint({x:this.left+this.width/2,y:this.top+this.height/2}),n=this.textElement.getBBox(),r={x:n.width*e,y:n.height*e};s.x-=r.x/2,s.y-=r.y/2,this.textEditor.style.top=s.y+"px",this.textEditor.style.left=s.x+"px",this.textEditor.style.maxWidth=this.overlayContainer.offsetWidth-s.x+"px",this.textEditor.style.fontSize=Math.max(16*e,12)+"px",this.textElement.style.display="none"}},t.prototype.textEditDivClicked=function(e){this.text=e.trim(),this.overlayContainer.innerHTML="",this.renderText(),this.showVisual(),this._suppressMarkerCreateEvent&&(this._suppressMarkerCreateEvent=!1,this.onMarkerCreated&&this.onMarkerCreated(this)),this.stateChanged()},t.prototype.select=function(){i.prototype.select.call(this),this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText)},t.prototype.deselect=function(){this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText),i.prototype.deselect.call(this)},t.prototype.dblClick=function(e,s){i.prototype.dblClick.call(this,e,s),this.showTextEditor()},t.prototype.setColor=function(e){this.textElement&&C.setAttributes(this.textElement,[["fill",e]]),this.color=e,this.textEditor&&(this.textEditor.style.color=this.color),this.colorChanged(e)},t.prototype.setFont=function(e){this.textElement&&C.setAttributes(this.textElement,[["font-family",e]]),this.fontFamily=e,this.textEditor&&(this.textEditor.style.fontFamily=this.fontFamily),this.renderText(),this.stateChanged()},t.prototype.hideVisual=function(){this.textElement.style.display="none",this.hideControlBox()},t.prototype.showVisual=function(){this.state==="edit"&&(this._state="select"),this.textElement.style.display="",this.showControlBox()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=Object.assign({color:this.color,fontFamily:this.fontFamily,padding:this.padding,text:this.text,wrapText:this.globalSettings.wrapText},i.prototype.getState.call(this));return e.typeName=t.typeName,e},t.prototype.restoreState=function(e){var s=e;this.color=s.color,this.fontFamily=s.fontFamily,this.padding=s.padding,this.text=s.text,this.createVisual(),i.prototype.restoreState.call(this,e),this.setSize(),this.globalSettings.wrapText&&this.renderText()},t.prototype.scale=function(e,s){i.prototype.scale.call(this,e,s),this.setSize(),this.sizeText(),this.positionTextEditor()},t.typeName="TextMarker",t.title="Text marker",t.icon='<svg viewBox="0 0 24 24"><path d="M9.6 14L12 7.7l2.4 6.3M11 5L5.5 19h2.2l1.1-3H15l1.1 3h2.2L13 5h-2z"/></svg>',t}(Ti),ii=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.color="transparent",r.lineWidth=3,r.drawing=!1,r.pixelRatio=1,r.color=n.defaultColor,r.lineWidth=n.defaultStrokeWidth,r.pixelRatio=n.freehandPixelRatio,r.setColor=r.setColor.bind(r),r.addCanvas=r.addCanvas.bind(r),r.finishCreation=r.finishCreation.bind(r),r.setLineWidth=r.setLineWidth.bind(r),r.colorPanel=new _t("Color",n.defaultColorSet,n.defaultColor),r.colorPanel.onColorChanged=r.setColor,r.lineWidthPanel=new Ze("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),r.lineWidthPanel.onWidthChanged=r.setLineWidth,r}return Q(t,i),t.prototype.ownsTarget=function(e){return!(!i.prototype.ownsTarget.call(this,e)&&e!==this.visual&&e!==this.drawingImage)},t.prototype.createVisual=function(){this.visual=C.createGroup(),this.drawingImage=C.createImage(),this.visual.appendChild(this.drawingImage);var e=C.createTransform();this.visual.transform.baseVal.appendItem(e),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(e,s){this.state==="new"&&(this.addCanvas(),this.createVisual(),this._state="creating"),this.state==="creating"?(this.canvasContext.strokeStyle=this.color,this.canvasContext.lineWidth=this.lineWidth,this.canvasContext.beginPath(),this.canvasContext.moveTo(e.x,e.y),this.drawing=!0):i.prototype.pointerDown.call(this,e,s)},t.prototype.manipulate=function(e){this.state==="creating"?this.drawing&&(this.canvasContext.lineTo(e.x,e.y),this.canvasContext.stroke()):i.prototype.manipulate.call(this,e)},t.prototype.resize=function(e){i.prototype.resize.call(this,e),C.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),C.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]])},t.prototype.pointerUp=function(e){this._state==="creating"?this.drawing&&(this.canvasContext.closePath(),this.drawing=!1,this.globalSettings.newFreehandMarkerOnPointerUp&&this.finishCreation()):i.prototype.pointerUp.call(this,e)},t.prototype.addCanvas=function(){this.overlayContainer.innerHTML="",this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.overlayContainer.clientWidth*this.pixelRatio,this.canvasElement.height=this.overlayContainer.clientHeight*this.pixelRatio,this.canvasContext=this.canvasElement.getContext("2d"),this.canvasContext.scale(this.pixelRatio,this.pixelRatio),this.overlayContainer.appendChild(this.canvasElement)},t.prototype.select=function(){this.state==="creating"&&this.finishCreation(),i.prototype.select.call(this)},t.prototype.deselect=function(){this.state==="creating"&&this.finishCreation(),i.prototype.deselect.call(this)},t.prototype.finishCreation=function(){for(var e=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),s=[this.canvasElement.width+1,this.canvasElement.height+1,-1,-1],n=s[0],r=s[1],o=s[2],a=s[3],l=!1,c=0;c<this.canvasElement.height;c++)for(var u=0;u<this.canvasElement.width;u++)e.data[c*this.canvasElement.width*4+4*u+3]>0&&(l=!0,c<r&&(r=c),u<n&&(n=u),c>a&&(a=c),u>o&&(o=u));if(l){this.left=n/this.pixelRatio,this.top=r/this.pixelRatio,this.width=(o-n)/this.pixelRatio,this.height=(a-r)/this.pixelRatio;var f=document.createElement("canvas");f.width=o-n,f.height=a-r,f.getContext("2d").putImageData(this.canvasContext.getImageData(n,r,o-n,a-r),0,0),this.drawingImgUrl=f.toDataURL("image/png"),this.setDrawingImage(),this._state="select",this.onMarkerCreated&&this.onMarkerCreated(this)}this.overlayContainer.innerHTML=""},t.prototype.setDrawingImage=function(){C.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]]),C.setAttributes(this.drawingImage,[["href",this.drawingImgUrl]]),this.moveVisual({x:this.left,y:this.top})},t.prototype.setColor=function(e){this.color=e,this.colorChanged(e)},t.prototype.setLineWidth=function(e){this.lineWidth=e},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return this.state==="new"||this.state==="creating"?[this.colorPanel,this.lineWidthPanel]:[]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=Object.assign({drawingImgUrl:this.drawingImgUrl},i.prototype.getState.call(this));return e.typeName=t.typeName,e},t.prototype.restoreState=function(e){this.createVisual(),i.prototype.restoreState.call(this,e),this.drawingImgUrl=e.drawingImgUrl,this.setDrawingImage()},t.prototype.scale=function(e,s){i.prototype.scale.call(this,e,s),this.setDrawingImage()},t.typeName="FreehandMarker",t.title="Freehand marker",t.icon='<svg viewBox="0 0 24 24"><path d="M9.75 20.85c1.78-.7 1.39-2.63.49-3.85-.89-1.25-2.12-2.11-3.36-2.94A9.817 9.817 0 014.54 12c-.28-.33-.85-.94-.27-1.06.59-.12 1.61.46 2.13.68.91.38 1.81.82 2.65 1.34l1.01-1.7C8.5 10.23 6.5 9.32 4.64 9.05c-1.06-.16-2.18.06-2.54 1.21-.32.99.19 1.99.77 2.77 1.37 1.83 3.5 2.71 5.09 4.29.34.33.75.72.95 1.18.21.44.16.47-.31.47-1.24 0-2.79-.97-3.8-1.61l-1.01 1.7c1.53.94 4.09 2.41 5.96 1.79m11.09-15.6c.22-.22.22-.58 0-.79l-1.3-1.3a.562.562 0 00-.78 0l-1.02 1.02 2.08 2.08M11 10.92V13h2.08l6.15-6.15-2.08-2.08L11 10.92z"/></svg>',t}(Ti),Cu=function(i){function t(e,s,n,r){var o=i.call(this,e,n||'<svg viewBox="0 0 24 24"><path d="M8 14v4l-6-6 6-6v4h8V6l6 6-6 6v-4H8z"/></svg>',r||"arrow-type-panel")||this;return o.typeBoxes=[],o.currentType=s,o.setCurrentType=o.setCurrentType.bind(o),o}return Q(t,i),t.prototype.getUi=function(){var e=this,s=document.createElement("div");s.style.display="flex",s.style.overflow="hidden",s.style.flexGrow="2";for(var n=function(a){var l="both";switch(a){case 0:l="both";break;case 1:l="start";break;case 2:l="end";break;case 3:l="none"}var c=document.createElement("div");if(c.style.display="flex",c.style.flexGrow="2",c.style.alignItems="center",c.style.justifyContent="space-between",c.style.padding="5px",c.style.borderWidth="2px",c.style.borderStyle="solid",c.style.borderColor=l===r.currentType?r.uiStyleSettings.toolboxAccentColor:"transparent",c.addEventListener("click",function(){e.setCurrentType(l,c)}),s.appendChild(c),l==="both"||l==="start"){var u=document.createElement("div");u.style.display="flex",u.style.alignItems="center",u.style.minHeight="20px",u.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,5 10,0 10,10" fill="`+(r.uiStyleSettings!==void 0?r.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,u.style.marginLeft="5px",c.appendChild(u)}var f=document.createElement("div");f.style.display="flex",f.style.alignItems="center",f.style.minHeight="20px",f.style.flexGrow="2";var w=document.createElement("hr");if(w.style.minWidth="20px",w.style.border="0px",w.style.borderTop="3px solid "+(r.uiStyleSettings!==void 0?r.uiStyleSettings.toolboxColor:"#eeeeee"),w.style.flexGrow="2",f.appendChild(w),c.appendChild(f),l==="both"||l==="end"){var g=document.createElement("div");g.style.display="flex",g.style.alignItems="center",g.style.minHeight="20px",g.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,0 10,5 0,10" fill="`+(r.uiStyleSettings!==void 0?r.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,g.style.marginRight="5px",c.appendChild(g)}r.typeBoxes.push(c)},r=this,o=0;o<4;o++)n(o);return s},t.prototype.setCurrentType=function(e,s){var n=this;this.currentType=e,this.typeBoxes.forEach(function(r){r.style.borderColor=r===s?n.uiStyleSettings!==void 0?n.uiStyleSettings.toolboxAccentColor:"#3080c3":"transparent"}),this.onArrowTypeChanged&&this.onArrowTypeChanged(this.currentType)},t}(Je),yr=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.arrowType="end",r.arrowBaseHeight=10,r.arrowBaseWidth=10,r.getArrowPoints=r.getArrowPoints.bind(r),r.setArrowType=r.setArrowType.bind(r),r.arrowTypePanel=new Cu("Arrow type","end"),r.arrowTypePanel.onArrowTypeChanged=r.setArrowType,r}return Q(t,i),t.prototype.ownsTarget=function(e){return!(!i.prototype.ownsTarget.call(this,e)&&e!==this.arrow1&&e!==this.arrow2)},t.prototype.getArrowPoints=function(e,s){var n=this.arrowBaseWidth+2*this.strokeWidth,r=this.arrowBaseHeight+2*this.strokeWidth;return e-n/2+","+(s+r/2)+" "+e+","+(s-r/2)+" "+(e+n/2)+","+(s+r/2)},t.prototype.createTips=function(){this.arrow1=C.createPolygon(this.getArrowPoints(this.x1,this.y1),[["fill",this.strokeColor]]),this.arrow1.transform.baseVal.appendItem(C.createTransform()),this.visual.appendChild(this.arrow1),this.arrow2=C.createPolygon(this.getArrowPoints(this.x2,this.y2),[["fill",this.strokeColor]]),this.arrow2.transform.baseVal.appendItem(C.createTransform()),this.visual.appendChild(this.arrow2)},t.prototype.pointerDown=function(e,s){i.prototype.pointerDown.call(this,e,s),this.state==="creating"&&this.createTips()},t.prototype.adjustVisual=function(){if(i.prototype.adjustVisual.call(this),this.arrow1&&this.arrow2){this.arrow1.style.display=this.arrowType==="both"||this.arrowType==="start"?"":"none",this.arrow2.style.display=this.arrowType==="both"||this.arrowType==="end"?"":"none",C.setAttributes(this.arrow1,[["points",this.getArrowPoints(this.x1,this.y1)],["fill",this.strokeColor]]),C.setAttributes(this.arrow2,[["points",this.getArrowPoints(this.x2,this.y2)],["fill",this.strokeColor]]);var e=0;Math.abs(this.x1-this.x2)>.1&&(e=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2));var s=this.arrow1.transform.baseVal.getItem(0);s.setRotate(e,this.x1,this.y1),this.arrow1.transform.baseVal.replaceItem(s,0);var n=this.arrow2.transform.baseVal.getItem(0);n.setRotate(e+180,this.x2,this.y2),this.arrow2.transform.baseVal.replaceItem(n,0)}},t.prototype.setArrowType=function(e){this.arrowType=e,this.adjustVisual(),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel,this.arrowTypePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=Object.assign({arrowType:this.arrowType},i.prototype.getState.call(this));return e.typeName=t.typeName,e},t.prototype.restoreState=function(e){i.prototype.restoreState.call(this,e);var s=e;this.arrowType=s.arrowType,this.createTips(),this.adjustVisual()},t.typeName="ArrowMarker",t.title="Arrow marker",t.icon='<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 7 15.59V9H5v10h10v-2H8.41L19 6.41z"/></svg>',t}(gn),Ha=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.fillColor=n.defaultFillColor,r.strokeWidth=0,r.fillPanel=new _t("Color",n.defaultColorSet,n.defaultFillColor),r.fillPanel.onColorChanged=r.setFillColor,r}return Q(t,i),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.fillPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=i.prototype.getState.call(this);return e.typeName=t.typeName,e},t.typeName="CoverMarker",t.title="Cover marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4z"/></svg>',t}(Fa),ja=function(i){function t(e,s,n,r,o){var a=i.call(this,e,r||'<svg viewBox="0 0 24 24"><path d="M17.66 8L12 2.35 6.34 8A8.02 8.02 0 004 13.64c0 2 .78 4.11 2.34 5.67a7.99 7.99 0 0011.32 0c1.56-1.56 2.34-3.67 2.34-5.67S19.22 9.56 17.66 8M6 14c0-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 18 12 18 14H6z"/></svg>',o||"opacity-panel")||this;return a.opacities=[],a.opacityBoxes=[],a.opacities=s,a.currentOpacity=n,a.setCurrentOpacity=a.setCurrentOpacity.bind(a),a}return Q(t,i),t.prototype.getUi=function(){var e=this,s=document.createElement("div");return s.style.display="flex",s.style.overflow="hidden",s.style.flexGrow="2",s.style.justifyContent="space-between",this.opacities.forEach(function(n){var r=document.createElement("div");r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.padding="5px",r.style.borderWidth="2px",r.style.borderStyle="solid",r.style.borderColor=n===e.currentOpacity?e.uiStyleSettings.toolboxAccentColor:"transparent",r.addEventListener("click",function(){e.setCurrentOpacity(n,r)}),s.appendChild(r);var o=document.createElement("div");o.innerText=100*n+"%",r.appendChild(o),e.opacityBoxes.push(r)}),s},t.prototype.setCurrentOpacity=function(e,s){var n=this;this.currentOpacity=e,this.opacityBoxes.forEach(function(r){r.style.borderColor=r===s?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onOpacityChanged&&this.onOpacityChanged(this.currentOpacity)},t}(Je),vr=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.setOpacity=r.setOpacity.bind(r),r.fillColor=n.defaultHighlightColor,r.strokeWidth=0,r.opacity=n.defaultHighlightOpacity,r.fillPanel=new _t("Color",n.defaultColorSet,r.fillColor),r.fillPanel.onColorChanged=r.setFillColor,r.opacityPanel=new ja("Opacity",n.defaultOpacitySteps,r.opacity),r.opacityPanel.onOpacityChanged=r.setOpacity,r}return Q(t,i),t.prototype.setOpacity=function(e){this.opacity=e,this.visual&&C.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.fillPanel,this.opacityPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=i.prototype.getState.call(this);return e.typeName=t.typeName,e},t.typeName="HighlightMarker",t.title="Highlight marker",t.icon='<svg viewBox="0 0 24 24"><path d="M18.5 1.15c-.53 0-1.04.19-1.43.58l-5.81 5.82 5.65 5.65 5.82-5.81c.77-.78.77-2.04 0-2.83l-2.84-2.83c-.39-.39-.89-.58-1.39-.58M10.3 8.5l-5.96 5.96c-.78.78-.78 2.04.02 2.85C3.14 18.54 1.9 19.77.67 21h5.66l.86-.86c.78.76 2.03.75 2.81-.02l5.95-5.96"/></svg>',t}(Ha),Va='<svg viewBox="0 0 24 24"><path d="M9.62 12L12 5.67 14.37 12M11 3L5.5 17h2.25l1.12-3h6.25l1.13 3h2.25L13 3h-2z"/></svg>',yn='<svg viewBox="0 0 24 24"><path d="M19 11.5s-2 2.17-2 3.5a2 2 0 002 2 2 2 0 002-2c0-1.33-2-3.5-2-3.5M5.21 10L10 5.21 14.79 10m1.77-1.06L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.56-.59 1.53 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.59.59-1.56 0-2.12z"/></svg>',xo=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.bgColor="transparent",r.tipPosition={x:0,y:0},r.tipBase1Position={x:0,y:0},r.tipBase2Position={x:0,y:0},r.tipMoving=!1,r.color=n.defaultStrokeColor,r.bgColor=n.defaultFillColor,r.fontFamily=n.defaultFontFamily,r.defaultSize={x:100,y:30},r.setBgColor=r.setBgColor.bind(r),r.getTipPoints=r.getTipPoints.bind(r),r.positionTip=r.positionTip.bind(r),r.setTipPoints=r.setTipPoints.bind(r),r.colorPanel=new _t("Text color",n.defaultColorSet,r.color,Va,"text-color-panel"),r.colorPanel.onColorChanged=r.setColor,r.bgColorPanel=new _t("Fill color",n.defaultColorSet,r.bgColor,yn,"fill-color-panel"),r.bgColorPanel.onColorChanged=r.setBgColor,r.fontFamilyPanel=new mn("Font",n.defaultFontFamilies,n.defaultFontFamily),r.fontFamilyPanel.onFontChanged=r.setFont,r.tipGrip=new pn,r.tipGrip.visual.transform.baseVal.appendItem(C.createTransform()),r.controlBox.appendChild(r.tipGrip.visual),r}return Q(t,i),t.prototype.ownsTarget=function(e){return i.prototype.ownsTarget.call(this,e)||this.tipGrip.ownsTarget(e)||this.tip===e},t.prototype.createTip=function(){C.setAttributes(this.bgRectangle,[["fill",this.bgColor],["rx","10px"]]),this.tip=C.createPolygon(this.getTipPoints(),[["fill",this.bgColor]]),this.visual.appendChild(this.tip)},t.prototype.pointerDown=function(e,s){this.state==="new"&&i.prototype.pointerDown.call(this,e,s),this.state==="creating"?this.createTip():this.tipGrip.ownsTarget(s)?(this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.tipMoving=!0):i.prototype.pointerDown.call(this,e,s)},t.prototype.pointerUp=function(e){if(this.tipMoving)this.tipMoving=!1,this.isMoved=!0,i.prototype.pointerUp.call(this,e);else{var s=this.state==="creating";i.prototype.pointerUp.call(this,e),this.setTipPoints(s),this.positionTip()}},t.prototype.manipulate=function(e){if(this.tipMoving){var s=this.unrotatePoint(e);this.tipPosition={x:s.x-this.manipulationStartLeft,y:s.y-this.manipulationStartTop},this.positionTip()}else i.prototype.manipulate.call(this,e)},t.prototype.setBgColor=function(e){this.bgRectangle&&this.tip&&(C.setAttributes(this.bgRectangle,[["fill",e]]),C.setAttributes(this.tip,[["fill",e]])),this.bgColor=e,this.fillColorChanged(e)},t.prototype.getTipPoints=function(){return this.setTipPoints(this.state==="creating"),this.tipBase1Position.x+","+this.tipBase1Position.y+" "+this.tipBase2Position.x+","+this.tipBase2Position.y+" "+this.tipPosition.x+","+this.tipPosition.y},t.prototype.setTipPoints=function(e){e===void 0&&(e=!1);var s=Math.min(this.height/2,15),n=this.height/5;e&&(this.tipPosition={x:s+n/2,y:this.height+20});var r=Math.atan(this.height/2/(this.width/2));this.tipPosition.x<this.width/2&&this.tipPosition.y<this.height/2?r<Math.atan((this.height/2-this.tipPosition.y)/(this.width/2-this.tipPosition.x))?(n=this.width/5,s=Math.min(this.width/2,15),this.tipBase1Position={x:s,y:0},this.tipBase2Position={x:s+n,y:0}):(this.tipBase1Position={x:0,y:s},this.tipBase2Position={x:0,y:s+n}):this.tipPosition.x>=this.width/2&&this.tipPosition.y<this.height/2?r<Math.atan((this.height/2-this.tipPosition.y)/(this.tipPosition.x-this.width/2))?(n=this.width/5,s=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-s-n,y:0},this.tipBase2Position={x:this.width-s,y:0}):(this.tipBase1Position={x:this.width,y:s},this.tipBase2Position={x:this.width,y:s+n}):this.tipPosition.x>=this.width/2&&this.tipPosition.y>=this.height/2?r<Math.atan((this.tipPosition.y-this.height/2)/(this.tipPosition.x-this.width/2))?(n=this.width/5,s=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-s-n,y:this.height},this.tipBase2Position={x:this.width-s,y:this.height}):(this.tipBase1Position={x:this.width,y:this.height-s-n},this.tipBase2Position={x:this.width,y:this.height-s}):r<Math.atan((this.tipPosition.y-this.height/2)/(this.width/2-this.tipPosition.x))?(n=this.width/5,s=Math.min(this.width/2,15),this.tipBase1Position={x:s,y:this.height},this.tipBase2Position={x:s+n,y:this.height}):(this.tipBase1Position={x:0,y:this.height-s},this.tipBase2Position={x:0,y:this.height-s-n})},t.prototype.resize=function(e){i.prototype.resize.call(this,e),this.positionTip()},t.prototype.positionTip=function(){C.setAttributes(this.tip,[["points",this.getTipPoints()]]);var e=this.tipGrip.visual.transform.baseVal.getItem(0);e.setTranslate(this.tipPosition.x,this.tipPosition.y),this.tipGrip.visual.transform.baseVal.replaceItem(e,0)},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.bgColorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),t.prototype.select=function(){this.positionTip(),i.prototype.select.call(this)},t.prototype.getState=function(){var e=Object.assign({bgColor:this.bgColor,tipPosition:this.tipPosition},i.prototype.getState.call(this));return e.typeName=t.typeName,e},t.prototype.restoreState=function(e){var s=e;this.bgColor=s.bgColor,this.tipPosition=s.tipPosition,i.prototype.restoreState.call(this,e),this.createTip(),this.setTipPoints()},t.prototype.scale=function(e,s){i.prototype.scale.call(this,e,s),this.tipPosition={x:this.tipPosition.x*e,y:this.tipPosition.y*s},this.positionTip()},t.typeName="CalloutMarker",t.title="Callout marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 2h16a2 2 0 012 2v12a2 2 0 01-2 2h-4l-4 4-4-4H4a2 2 0 01-2-2V4a2 2 0 012-2m0 2v12h4.83L12 19.17 15.17 16H20V4H4m2 3h12v2H6V7m0 4h10v2H6v-2z"/></svg>',t}(ri),Nr=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.fillColor="transparent",r.strokeColor="transparent",r.strokeWidth=0,r.strokeDasharray="",r.opacity=1,r.strokeColor=n.defaultColor,r.strokeWidth=n.defaultStrokeWidth,r.strokeDasharray=n.defaultStrokeDasharray,r.fillColor=n.defaultFillColor,r.setStrokeColor=r.setStrokeColor.bind(r),r.setFillColor=r.setFillColor.bind(r),r.setStrokeWidth=r.setStrokeWidth.bind(r),r.setStrokeDasharray=r.setStrokeDasharray.bind(r),r.setOpacity=r.setOpacity.bind(r),r.createVisual=r.createVisual.bind(r),r.strokePanel=new _t("Line color",ki(n.defaultColorSet,["transparent"]),n.defaultColor,void 0,"stroke-color-panel"),r.strokePanel.onColorChanged=r.setStrokeColor,r.fillPanel=new _t("Fill color",ki(n.defaultColorSet,["transparent"]),r.fillColor,yn,"fill-color-panel"),r.fillPanel.onColorChanged=r.setFillColor,r.strokeWidthPanel=new Ze("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),r.strokeWidthPanel.onWidthChanged=r.setStrokeWidth,r.strokeStylePanel=new Bi("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),r.strokeStylePanel.onStyleChanged=r.setStrokeDasharray,r.opacityPanel=new ja("Opacity",n.defaultOpacitySteps,r.opacity),r.opacityPanel.onOpacityChanged=r.setOpacity,r}return Q(t,i),t.prototype.ownsTarget=function(e){return!(!i.prototype.ownsTarget.call(this,e)&&e!==this.visual)},t.prototype.createVisual=function(){this.visual=C.createEllipse(this.width/2,this.height/2,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(e,s){i.prototype.pointerDown.call(this,e,s),this.state==="new"&&(this.createVisual(),this.moveVisual(e),this._state="creating")},t.prototype.manipulate=function(e){i.prototype.manipulate.call(this,e)},t.prototype.resize=function(e){i.prototype.resize.call(this,e),this.setSize()},t.prototype.setSize=function(){i.prototype.setSize.call(this),C.setAttributes(this.visual,[["cx",(this.width/2).toString()],["cy",(this.height/2).toString()],["rx",(this.width/2).toString()],["ry",(this.height/2).toString()]])},t.prototype.pointerUp=function(e){i.prototype.pointerUp.call(this,e),this.setSize()},t.prototype.setStrokeColor=function(e){this.strokeColor=e,this.visual&&C.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(e),this.stateChanged()},t.prototype.setFillColor=function(e){this.fillColor=e,this.visual&&C.setAttributes(this.visual,[["fill",this.fillColor]]),this.fillColorChanged(e),this.stateChanged()},t.prototype.setStrokeWidth=function(e){this.strokeWidth=e,this.visual&&C.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(e){this.strokeDasharray=e,this.visual&&C.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},t.prototype.setOpacity=function(e){this.opacity=e,this.visual&&C.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.opacityPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},i.prototype.getState.call(this));return e.typeName=t.typeName,e},t.prototype.restoreState=function(e){var s=e;this.fillColor=s.fillColor,this.strokeColor=s.strokeColor,this.strokeWidth=s.strokeWidth,this.strokeDasharray=s.strokeDasharray,this.opacity=s.opacity,this.createVisual(),i.prototype.restoreState.call(this,e),this.setSize()},t.prototype.scale=function(e,s){i.prototype.scale.call(this,e,s),this.setSize()},t.typeName="EllipseMarker",t.title="Ellipse marker",t.icon='<svg viewBox="0 0 24 24"><path d="M12 4C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',t}(Ti),xu=function(i){function t(e,s,n){return i.call(this,e,s,n)||this}return Q(t,i),Object.defineProperty(t.prototype,"tipLength",{get:function(){return 10+3*this.strokeWidth},enumerable:!1,configurable:!0}),t.prototype.ownsTarget=function(e){return!(!i.prototype.ownsTarget.call(this,e)&&e!==this.tip1&&e!==this.tip2)},t.prototype.createTips=function(){this.tip1=C.createLine(this.x1-this.tipLength/2,this.y1,this.x1+this.tipLength/2,this.y1,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip1.transform.baseVal.appendItem(C.createTransform()),this.visual.appendChild(this.tip1),this.tip2=C.createLine(this.x2-this.tipLength/2,this.y2,this.x2+this.tipLength/2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip2.transform.baseVal.appendItem(C.createTransform()),this.visual.appendChild(this.tip2)},t.prototype.pointerDown=function(e,s){i.prototype.pointerDown.call(this,e,s),this.state==="creating"&&this.createTips()},t.prototype.adjustVisual=function(){if(i.prototype.adjustVisual.call(this),this.tip1&&this.tip2&&(C.setAttributes(this.tip1,[["x1",(this.x1-this.tipLength/2).toString()],["y1",this.y1.toString()],["x2",(this.x1+this.tipLength/2).toString()],["y2",this.y1.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),C.setAttributes(this.tip2,[["x1",(this.x2-this.tipLength/2).toString()],["y1",this.y2.toString()],["x2",(this.x2+this.tipLength/2).toString()],["y2",this.y2.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),Math.abs(this.x1-this.x2)>.1)){var e=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2),s=this.tip1.transform.baseVal.getItem(0);s.setRotate(e,this.x1,this.y1),this.tip1.transform.baseVal.replaceItem(s,0);var n=this.tip2.transform.baseVal.getItem(0);n.setRotate(e+180,this.x2,this.y2),this.tip2.transform.baseVal.replaceItem(n,0)}},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=i.prototype.getState.call(this);return e.typeName=t.typeName,e},t.prototype.restoreState=function(e){i.prototype.restoreState.call(this,e),this.createTips(),this.adjustVisual()},t.typeName="MeasurementMarker",t.title="Measurement marker",t.icon='<svg viewBox="0 0 24 24"><path d="M1.39 18.36l1.77-1.76L4.58 18l1.06-1.05-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.42 1.41L10.59 12l-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.41 1.41 1.07-1.06-1.42-1.41 1.42-1.42L18 6.7l1.07-1.06-2.47-2.48 1.76-1.77 4.25 4.25L5.64 22.61l-4.25-4.25z"/></svg>',t}(gn),Su=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.strokePanel.colors=n.defaultColorSet,r.fillColor="transparent",r}return Q(t,i),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=i.prototype.getState.call(this);return e.typeName=t.typeName,e},t.typeName="EllipseFrameMarker",t.title="Ellipse frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M12 6c4.41 0 8 2.69 8 6s-3.59 6-8 6-8-2.69-8-6 3.59-6 8-6m0-2C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',t}(Nr),_u=function(){function i(){this.undoStack=[],this.redoStack=[]}return Object.defineProperty(i.prototype,"isUndoPossible",{get:function(){return this.undoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRedoPossible",{get:function(){return this.redoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoStepCount",{get:function(){return this.undoStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoStepCount",{get:function(){return this.redoStack.length},enumerable:!1,configurable:!0}),i.prototype.addUndoStep=function(t){this.undoStack.length!==0&&JSON.stringify(this.undoStack[this.undoStack.length-1])===JSON.stringify(t)||(this.undoStack.push(t),JSON.stringify(this.lastRedoStep)!==JSON.stringify(t)&&this.redoStack.splice(0,this.redoStack.length))},i.prototype.replaceLastUndoStep=function(t){this.undoStack.length>0&&(this.undoStack[this.undoStack.length-1]=t)},i.prototype.getLastUndoStep=function(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0},i.prototype.undo=function(){if(this.undoStack.length>1){var t=this.undoStack.pop();return t!==void 0&&this.redoStack.push(t),this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0}},i.prototype.redo=function(){return this.lastRedoStep=this.redoStack.pop(),this.lastRedoStep},i}(),ku=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.strokeColor="transparent",r.strokeWidth=0,r.strokeDasharray="",r.curveX=0,r.curveY=0,r.manipulationStartCurveX=0,r.manipulationStartCurveY=0,r.setStrokeColor=r.setStrokeColor.bind(r),r.setStrokeWidth=r.setStrokeWidth.bind(r),r.setStrokeDasharray=r.setStrokeDasharray.bind(r),r.positionGrips=r.positionGrips.bind(r),r.addControlGrips=r.addControlGrips.bind(r),r.adjustVisual=r.adjustVisual.bind(r),r.setupControlBox=r.setupControlBox.bind(r),r.resize=r.resize.bind(r),r.strokeColor=n.defaultColor,r.strokeWidth=n.defaultStrokeWidth,r.strokeDasharray=n.defaultStrokeDasharray,r.strokePanel=new _t("Line color",n.defaultColorSet,n.defaultColor),r.strokePanel.onColorChanged=r.setStrokeColor,r.strokeWidthPanel=new Ze("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),r.strokeWidthPanel.onWidthChanged=r.setStrokeWidth,r.strokeStylePanel=new Bi("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),r.strokeStylePanel.onStyleChanged=r.setStrokeDasharray,r}return Q(t,i),t.prototype.ownsTarget=function(e){return!(!i.prototype.ownsTarget.call(this,e)&&e!==this.visual&&e!==this.selectorCurve&&e!==this.visibleCurve&&!this.curveGrip.ownsTarget(e))},t.prototype.getPathD=function(){return"M "+this.x1+" "+this.y1+" Q "+this.curveX+" "+this.curveY+", "+this.x2+" "+this.y2},t.prototype.createVisual=function(){this.visual=C.createGroup(),this.selectorCurve=C.createPath(this.getPathD(),[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()],["fill","transparent"]]),this.visibleCurve=C.createPath(this.getPathD(),[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["fill","transparent"]]),this.visual.appendChild(this.selectorCurve),this.visual.appendChild(this.visibleCurve),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(e,s){i.prototype.pointerDown.call(this,e,s),this.manipulationStartCurveX=this.curveX,this.manipulationStartCurveY=this.curveY,this.state==="new"&&(this.curveX=e.x,this.curveY=e.y),this.state==="new"?(this.createVisual(),this.adjustVisual(),this._state="creating"):this.curveGrip.ownsTarget(s)&&(this.activeGrip=this.curveGrip,this._state="resize")},t.prototype.adjustVisual=function(){this.selectorCurve&&this.visibleCurve&&(this.selectorCurve.setAttribute("d",this.getPathD()),this.visibleCurve.setAttribute("d",this.getPathD()),C.setAttributes(this.visibleCurve,[["stroke",this.strokeColor]]),C.setAttributes(this.visibleCurve,[["stroke-width",this.strokeWidth.toString()]]),C.setAttributes(this.visibleCurve,[["stroke-dasharray",this.strokeDasharray.toString()]]))},t.prototype.setupControlBox=function(){i.prototype.setupControlBox.call(this),this.curveControlLine1=C.createLine(this.x1,this.y1,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.curveControlLine2=C.createLine(this.x2,this.y2,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.insertBefore(this.curveControlLine1,this.controlBox.firstChild),this.controlBox.insertBefore(this.curveControlLine2,this.controlBox.firstChild)},t.prototype.addControlGrips=function(){this.curveGrip=this.createGrip(),this.curveX=0,this.curveY=0,i.prototype.addControlGrips.call(this)},t.prototype.positionGrips=function(){i.prototype.positionGrips.call(this);var e=this.curveGrip.GRIP_SIZE;this.positionGrip(this.curveGrip.visual,this.curveX-e/2,this.curveY-e/2),this.curveControlLine1&&this.curveControlLine2&&(this.curveControlLine1.setAttribute("x1",this.x1.toString()),this.curveControlLine1.setAttribute("y1",this.y1.toString()),this.curveControlLine1.setAttribute("x2",this.curveX.toString()),this.curveControlLine1.setAttribute("y2",this.curveY.toString()),this.curveControlLine2.setAttribute("x1",this.x2.toString()),this.curveControlLine2.setAttribute("y1",this.y2.toString()),this.curveControlLine2.setAttribute("x2",this.curveX.toString()),this.curveControlLine2.setAttribute("y2",this.curveY.toString()))},t.prototype.manipulate=function(e){this.state==="move"&&(this.curveX=this.manipulationStartCurveX+e.x-this.manipulationStartX,this.curveY=this.manipulationStartCurveY+e.y-this.manipulationStartY),i.prototype.manipulate.call(this,e)},t.prototype.resize=function(e){this.activeGrip===this.curveGrip&&(this.curveX=e.x,this.curveY=e.y),i.prototype.resize.call(this,e),this.state==="creating"&&(this.curveX=this.x1+(this.x2-this.x1)/2,this.curveY=this.y1+(this.y2-this.y1)/2)},t.prototype.setStrokeColor=function(e){this.strokeColor=e,this.adjustVisual(),this.colorChanged(e)},t.prototype.setStrokeWidth=function(e){this.strokeWidth=e,this.adjustVisual()},t.prototype.setStrokeDasharray=function(e){this.strokeDasharray=e,this.adjustVisual()},t.prototype.scale=function(e,s){this.curveX=this.curveX*e,this.curveY=this.curveY*s,i.prototype.scale.call(this,e,s)},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,curveX:this.curveX,curveY:this.curveY},i.prototype.getState.call(this));return e.typeName=t.typeName,e},t.prototype.restoreState=function(e){i.prototype.restoreState.call(this,e);var s=e;this.strokeColor=s.strokeColor,this.strokeWidth=s.strokeWidth,this.strokeDasharray=s.strokeDasharray,this.curveX=s.curveX,this.curveY=s.curveY,this.createVisual(),this.adjustVisual()},t.typeName="CurveMarker",t.title="Curve marker",t.icon='<svg viewBox="0 0 24 24"><path d="M18.5 2A1.5 1.5 0 0120 3.5 1.5 1.5 0 0118.5 5c-.23 0-.45-.05-.65-.15l-3.69 3.7.34.45c2.19-1.26 4.76-2 7.5-2l1 .03v2.01L22 9c-2.58 0-5 .75-7 2.04A3.96 3.96 0 0111.04 15C9.75 17 9 19.42 9 22l.04 1H7.03L7 22c0-2.74.74-5.31 2-7.5l-.45-.34-3.7 3.69c.1.2.15.42.15.65A1.5 1.5 0 013.5 20 1.5 1.5 0 012 18.5 1.5 1.5 0 013.5 17c.23 0 .45.05.65.15l3.69-3.7C7.31 12.78 7 11.92 7 11a4 4 0 014-4c.92 0 1.78.31 2.45.84l3.7-3.69c-.1-.2-.15-.42-.15-.65A1.5 1.5 0 0118.5 2M11 9a2 2 0 00-2 2 2 2 0 002 2 2 2 0 002-2 2 2 0 00-2-2z"/></svg>',t}(Wa),Eu=function(i){function t(e,s,n){var r=i.call(this,e,s,n)||this;return r.fillColor="transparent",r.strokeColor="transparent",r.strokeWidth=0,r.strokeDasharray="",r.textColor="transparent",r.fontSize="1rem",r.isMoved=!1,r.captionText="Caption",r.PADDING=5,r.captionBoxWidth=0,r.captionBoxHeight=0,r.strokeColor=n.defaultColor,r.strokeWidth=n.defaultStrokeWidth,r.strokeDasharray=n.defaultStrokeDasharray,r.fillColor=n.defaultFillColor,r.textColor=n.defaultStrokeColor,r.fontFamily=n.defaultFontFamily,r.fontSize=n.defaultCaptionFontSize,r.captionText=n.defaultCaptionText,r.setStrokeColor=r.setStrokeColor.bind(r),r.setFillColor=r.setFillColor.bind(r),r.setStrokeWidth=r.setStrokeWidth.bind(r),r.setStrokeDasharray=r.setStrokeDasharray.bind(r),r.createVisual=r.createVisual.bind(r),r.sizeCaption=r.sizeCaption.bind(r),r.setCaptionText=r.setCaptionText.bind(r),r.showTextEditor=r.showTextEditor.bind(r),r.positionTextEditor=r.positionTextEditor.bind(r),r.finishTextEditing=r.finishTextEditing.bind(r),r.setFont=r.setFont.bind(r),r.setTextColor=r.setTextColor.bind(r),r.strokePanel=new _t("Line color",ki(n.defaultColorSet,["transparent"]),r.strokeColor,void 0,"stroke-color-panel"),r.strokePanel.onColorChanged=r.setStrokeColor,r.fillPanel=new _t("Fill color",ki(n.defaultColorSet,["transparent"]),r.fillColor,yn,"fill-color-panel"),r.fillPanel.onColorChanged=r.setFillColor,r.strokeWidthPanel=new Ze("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),r.strokeWidthPanel.onWidthChanged=r.setStrokeWidth,r.strokeStylePanel=new Bi("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),r.strokeStylePanel.onStyleChanged=r.setStrokeDasharray,r.fontFamilyPanel=new mn("Font",n.defaultFontFamilies,n.defaultFontFamily),r.fontFamilyPanel.onFontChanged=r.setFont,r.textColorPanel=new _t("Text color",n.defaultColorSet,r.textColor,Va,"text-color-panel"),r.textColorPanel.onColorChanged=r.setTextColor,r}return Q(t,i),t.prototype.ownsTarget=function(e){return!(!i.prototype.ownsTarget.call(this,e)&&e!==this.visual&&e!==this.frame&&e!==this.captionBg&&e!==this.captionElement)},t.prototype.createVisual=function(){this.visual=C.createGroup(),this.addMarkerVisualToContainer(this.visual),this.captionBg=C.createRect(1,1,[["fill",this.fillColor]]),this.visual.appendChild(this.captionBg),this.captionElement=C.createText([["fill",this.textColor],["font-family",this.fontFamily]]),this.captionElement.style.fontSize=this.fontSize,this.captionElement.style.textAnchor="start",this.captionElement.style.dominantBaseline="text-before-edge",this.captionElement.textContent=this.captionText,this.visual.appendChild(this.captionElement),this.frame=C.createRect(this.width,this.height,[["fill","transparent"],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray]]),this.visual.appendChild(this.frame),this.sizeCaption()},t.prototype.setCaptionText=function(e){this.captionText=e,this.captionElement.textContent=this.captionText,this.sizeCaption()},t.prototype.pointerDown=function(e,s){i.prototype.pointerDown.call(this,e,s),this.isMoved=!1,this.pointerDownPoint=e,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(e),this._state="creating")},t.prototype.manipulate=function(e){i.prototype.manipulate.call(this,e),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(e.x-this.pointerDownPoint.x)>5||Math.abs(e.y-this.pointerDownPoint.y)>5)},t.prototype.resize=function(e){i.prototype.resize.call(this,e),this.setSize()},t.prototype.sizeCaption=function(){var e=this.captionElement.getBBox();this.captionText.trim()!==""?(this.captionBoxWidth=e.width+2*this.PADDING,this.captionBoxHeight=e.height+2*this.PADDING):(this.captionBoxWidth=0,this.captionBoxHeight=0),C.setAttributes(this.captionBg,[["width",this.captionBoxWidth.toString()],["height",this.captionBoxHeight.toString()],["clip-path","path('M0,0 H"+this.width+" V"+this.height+" H"+-this.width+" Z')"]]),C.setAttributes(this.captionElement,[["x",this.PADDING.toString()],["y",this.PADDING.toString()],["clip-path","path('M0,0 H"+(this.width-this.PADDING)+" V"+this.height+" H"+(-this.width-this.PADDING)+" Z')"]])},t.prototype.showTextEditor=function(){var e=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditBox=document.createElement("input"),this.textEditBox.style.position="absolute",this.textEditBox.style.width=this.width+"px",this.captionBoxHeight>0&&(this.textEditBox.style.height=this.captionBoxHeight+"px"),this.textEditBox.style.fontSize=this.fontSize,this.textEditBox.style.fontFamily=this.fontFamily,this.textEditBox.style.backgroundColor=this.fillColor,this.textEditBox.style.color=this.textColor,this.textEditBox.style.borderWidth="0",this.textEditBox.setAttribute("value",this.captionText),this.textEditBox.select(),this.textEditDiv.appendChild(this.textEditBox),this.overlayContainer.appendChild(this.textEditDiv),this.textEditBox.addEventListener("pointerup",function(s){s.stopPropagation()}),this.textEditBox.addEventListener("keypress",function(s){s.key==="Enter"&&e.finishTextEditing(e.textEditBox.value)}),this.textEditBox.addEventListener("keyup",function(s){s.cancelBubble=!0}),this.textEditBox.addEventListener("blur",function(){e.finishTextEditing(e.textEditBox.value)}),this.textEditDiv.addEventListener("pointerup",function(){e.finishTextEditing(e.textEditBox.value)}),this.positionTextEditor(),this.textEditBox.focus()},t.prototype.positionTextEditor=function(){this.state==="edit"&&(this.textEditBox===void 0?this.showTextEditor():(this.textEditBox.style.left=this.left+"px",this.textEditBox.style.top=this.top+"px",this.textEditBox.style.transform="rotate("+this.rotationAngle+"deg)",this.textEditBox.style.transformOrigin=this.width/2+"px "+this.height/2+"px"))},t.prototype.finishTextEditing=function(e){this.setCaptionText(e.trim()),this.overlayContainer.innerHTML="",this.stateChanged()},t.prototype.setFont=function(e){this.captionElement&&C.setAttributes(this.captionElement,[["font-family",e]]),this.fontFamily=e,this.textEditBox&&(this.textEditBox.style.fontFamily=this.fontFamily),this.sizeCaption(),this.stateChanged()},t.prototype.setTextColor=function(e){this.captionElement&&C.setAttributes(this.captionElement,[["fill",e]]),this.textColor=e,this.textEditBox&&(this.textEditBox.style.color=this.textColor),this.stateChanged()},t.prototype.setSize=function(){i.prototype.setSize.call(this),C.setAttributes(this.frame,[["width",this.width.toString()],["height",this.height.toString()]]),this.sizeCaption()},t.prototype.pointerUp=function(e){i.prototype.pointerUp.call(this,e),this.setSize(),!this.isMoved&&Date.now()-this.pointerDownTimestamp>500&&this.showTextEditor(),this.pointerDownPoint=void 0},t.prototype.dblClick=function(e,s){i.prototype.dblClick.call(this,e,s),this.showTextEditor()},t.prototype.setStrokeColor=function(e){this.strokeColor=e,this.frame&&C.setAttributes(this.frame,[["stroke",this.strokeColor]]),this.colorChanged(e),this.stateChanged()},t.prototype.setFillColor=function(e){this.fillColor=e,this.captionBg&&C.setAttributes(this.captionBg,[["fill",this.fillColor]]),this.fillColorChanged(e),this.stateChanged()},t.prototype.setStrokeWidth=function(e){this.strokeWidth=e,this.frame&&C.setAttributes(this.frame,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(e){this.strokeDasharray=e,this.frame&&C.setAttributes(this.frame,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.fontFamilyPanel,this.textColorPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var e=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:1,textColor:this.textColor,fontFamily:this.fontFamily,fontSize:this.fontSize,captionText:this.captionText},i.prototype.getState.call(this));return e.typeName=this.typeName,e},t.prototype.restoreState=function(e){var s=e;this.fillColor=s.fillColor,this.strokeColor=s.strokeColor,this.strokeWidth=s.strokeWidth,this.strokeDasharray=s.strokeDasharray,this.textColor=s.textColor,this.fontFamily=s.fontFamily,this.captionText=s.captionText,this.fontSize=s.fontSize,this.createVisual(),i.prototype.restoreState.call(this,e),this.setSize()},t.prototype.scale=function(e,s){i.prototype.scale.call(this,e,s),this.setSize()},t.typeName="CaptionFrameMarker",t.title="Caption frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M5 3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2H5m0 2h14v14H5V5m2 2v2h10V7H7z"/></svg>',t}(Ti),Wt=function(){function i(t,e){e===void 0&&(e=!1),this.cancelable=!1,this._defaultPrevented=!1,this.markerArea=t,this.cancelable=e}return Object.defineProperty(i.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),i.prototype.preventDefault=function(){this._defaultPrevented=!0},i}(),Pu=function(i){function t(e,s,n){var r=i.call(this,e,!1)||this;return r.dataUrl=s,r.state=n,r}return Q(t,i),t}(Wt),ie=function(i){function t(e,s,n){n===void 0&&(n=!1);var r=i.call(this,e,n)||this;return r.marker=s,r}return Q(t,i),t}(Wt),Au=function(){function i(){this.render=[],this.beforeclose=[],this.close=[],this.show=[],this.restorestate=[],this.statechange=[],this.markerselect=[],this.markerdeselect=[],this.markercreating=[],this.markercreate=[],this.markerbeforedelete=[],this.markerdelete=[],this.markerchange=[],this.focus=[],this.blur=[]}return i.prototype.addEventListener=function(t,e){this[t].push(e)},i.prototype.removeEventListener=function(t,e){var s=this[t].indexOf(e);s>-1&&this[t].splice(s,1)},i}(),Mu=function(){function i(t){this.touchPoints=0,this._availableMarkerTypes=this.DEFAULT_MARKER_TYPES,this.mode="select",this.markers=[],this.isDragging=!1,this.renderEventListeners=[],this.closeEventListeners=[],this.settings=new wu,this._isOpen=!1,this.undoRedoManager=new _u,this.renderAtNaturalSize=!1,this.renderImageType="image/png",this.renderMarkersOnly=!1,this.zoomSteps=[1,1.5,2,4],this._zoomLevel=1,this._isResizing=!1,this.prevPanPoint={x:0,y:0},this.eventListeners=new Au,this._silentRenderMode=!1,this._isFocused=!1,this._instanceNo=i.instanceCounter++,this.styles=new mu(this.instanceNo),this.uiStyleSettings=this.styles.settings,this.target=t,this.targetRoot=document.body,this.width=t.clientWidth,this.height=t.clientHeight,this.styles.removeStyleSheet(),this.open=this.open.bind(this),this.setTopLeft=this.setTopLeft.bind(this),this.toolbarButtonClicked=this.toolbarButtonClicked.bind(this),this.createNewMarker=this.createNewMarker.bind(this),this.addNewMarker=this.addNewMarker.bind(this),this.markerCreated=this.markerCreated.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onDblClick=this.onDblClick.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.overrideOverflow=this.overrideOverflow.bind(this),this.restoreOverflow=this.restoreOverflow.bind(this),this.close=this.close.bind(this),this.closeUI=this.closeUI.bind(this),this.addCloseEventListener=this.addCloseEventListener.bind(this),this.removeCloseEventListener=this.removeCloseEventListener.bind(this),this.addRenderEventListener=this.addRenderEventListener.bind(this),this.removeRenderEventListener=this.removeRenderEventListener.bind(this),this.clientToLocalCoordinates=this.clientToLocalCoordinates.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.deleteSelectedMarker=this.deleteSelectedMarker.bind(this),this.setWindowHeight=this.setWindowHeight.bind(this),this.removeMarker=this.removeMarker.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this),this.onPopupTargetResize=this.onPopupTargetResize.bind(this),this.showNotesEditor=this.showNotesEditor.bind(this),this.hideNotesEditor=this.hideNotesEditor.bind(this),this.stepZoom=this.stepZoom.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.markerStateChanged=this.markerStateChanged.bind(this),this.switchToSelectMode=this.switchToSelectMode.bind(this),this.addDefs=this.addDefs.bind(this),this.addDefsToImage=this.addDefsToImage.bind(this),this.addMarkerEvents=this.addMarkerEvents.bind(this)}return Object.defineProperty(i.prototype,"ALL_MARKER_TYPES",{get:function(){return[mr,ii,yr,ri,Su,Nr,vr,xo,xu,Ha,gn,ku,Eu]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"DEFAULT_MARKER_TYPES",{get:function(){return[mr,ii,yr,ri,Nr,vr,xo]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"BASIC_MARKER_TYPES",{get:function(){return[mr,ii,yr,ri,vr]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"availableMarkerTypes",{get:function(){return this._availableMarkerTypes},set:function(t){var e=this;this._availableMarkerTypes.splice(0),t.forEach(function(s){if(typeof s=="string"){var n=e.ALL_MARKER_TYPES.find(function(r){return r.typeName===s});n!==void 0&&e._availableMarkerTypes.push(n)}else e._availableMarkerTypes.push(s)})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentMarker",{get:function(){return this._currentMarker},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isUndoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isUndoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRedoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isRedoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zoomLevel",{get:function(){return this._zoomLevel},set:function(t){this._zoomLevel=t,this.editorCanvas&&this.contentDiv&&(this.editorCanvas.style.transform="scale("+this._zoomLevel+")",this.contentDiv.scrollTo({left:(this.editorCanvas.clientWidth*this._zoomLevel-this.contentDiv.clientWidth)/2,top:(this.editorCanvas.clientHeight*this._zoomLevel-this.contentDiv.clientHeight)/2}))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"instanceNo",{get:function(){return this._instanceNo},enumerable:!1,configurable:!0}),i.prototype.open=function(){this.setupResizeObserver(),this.setEditingTarget(),this.setTopLeft(),this.initMarkerCanvas(),this.initOverlay(),this.attachEvents(),this.settings.displayMode==="popup"&&this.onPopupTargetResize(),wo.isLicensed||this.addLogo(),this._isOpen=!0,this._isFocused=!0},i.prototype.show=function(){var t=this;this.styles.styleSheetRoot===void 0&&Co.styleSheetRoot!==void 0&&(this.styles.styleSheetRoot=Co.styleSheetRoot),this.markers.splice(0),this.setWindowHeight(),this.showUI(),this.open(),this.eventListeners.show.forEach(function(e){return e(new Wt(t))})},i.prototype.render=function(){return vo(this,void 0,void 0,function(){var t;return bo(this,function(e){switch(e.label){case 0:return this.setCurrentMarker(),(t=new gu).naturalSize=this.renderAtNaturalSize,t.imageType=this.renderImageType,t.imageQuality=this.renderImageQuality,t.markersOnly=this.renderMarkersOnly,t.width=this.renderWidth,t.height=this.renderHeight,[4,t.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 1:return e.sent(),[4,t.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 2:return[2,e.sent()]}})})},i.prototype.close=function(t){var e=this;if(t===void 0&&(t=!1),this.isOpen){var s=!1;t||this.eventListeners.beforeclose.forEach(function(n){var r=new Wt(e,!0);n(r),r.defaultPrevented&&(s=!0)}),s||(this.coverDiv&&this.closeUI(),this.targetObserver&&(this.targetObserver.unobserve(this.target),this.targetObserver.unobserve(this.editorCanvas)),this.settings.displayMode==="popup"&&window.removeEventListener("resize",this.setWindowHeight),this.eventListeners.close.forEach(function(n){return n(new Wt(e))}),this.detachEvents(),this._isOpen=!1)}},i.prototype.addMarkersToToolbar=function(){for(var t,e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];(t=this._availableMarkerTypes).push.apply(t,e)},i.prototype.addRenderEventListener=function(t){this.addEventListener("render",function(e){t(e.dataUrl,e.state)})},i.prototype.removeRenderEventListener=function(t){},i.prototype.addCloseEventListener=function(t){this.addEventListener("close",function(){t()})},i.prototype.removeCloseEventListener=function(t){},i.prototype.setupResizeObserver=function(){var t=this;this.settings.displayMode==="inline"?window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){t.resize(t.target.clientWidth,t.target.clientHeight)}),this.targetObserver.observe(this.target)):this.settings.displayMode==="popup"&&(window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){return t.onPopupTargetResize()}),this.targetObserver.observe(this.editorCanvas)),window.addEventListener("resize",this.setWindowHeight))},i.prototype.onPopupTargetResize=function(){var t=1*this.target.clientWidth/this.target.clientHeight,e=this.editorCanvas.clientWidth/t>this.editorCanvas.clientHeight?this.editorCanvas.clientHeight*t:this.editorCanvas.clientWidth,s=e<this.editorCanvas.clientWidth?this.editorCanvas.clientHeight:this.editorCanvas.clientWidth/t;this.resize(e,s)},i.prototype.setWindowHeight=function(){this.windowHeight=window.innerHeight},i.prototype.resize=function(t,e){this._isResizing=!0;var s=t/this.imageWidth,n=e/this.imageHeight;this.imageWidth=Math.round(t),this.imageHeight=Math.round(e),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px",this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.settings.displayMode!=="popup"?this.coverDiv.style.width=this.imageWidth.toString()+"px":(this.setTopLeft(),this.positionMarkerImage()),this.toolbar!==void 0&&this.toolbar.adjustLayout(),this.positionLogo(),this.scaleMarkers(s,n),this._isResizing=!1},i.prototype.scaleMarkers=function(t,e){var s,n=this;this._currentMarker&&this._currentMarker instanceof ri?this._currentMarker.scale(t,e):(s=this._currentMarker,this.setCurrentMarker()),this.markers.forEach(function(r){r!==n._currentMarker&&r.scale(t,e)}),s!==void 0&&this.setCurrentMarker(s)},i.prototype.setEditingTarget=function(){this.imageWidth=Math.round(this.target.clientWidth),this.imageHeight=Math.round(this.target.clientHeight),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px"},i.prototype.setTopLeft=function(){var t=this.editingTarget.getBoundingClientRect(),e=this.editorCanvas.getBoundingClientRect();this.left=t.left-e.left,this.top=t.top-e.top},i.prototype.initMarkerCanvas=function(){this.markerImageHolder=document.createElement("div"),this.markerImageHolder.style.setProperty("touch-action","pinch-zoom"),this.markerImage=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.markerImage.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImage.style.pointerEvents="auto",this.markerImageHolder.style.position="absolute",this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.markerImageHolder.style.transformOrigin="top left",this.positionMarkerImage(),this.markerImageHolder.appendChild(this.markerImage),this.editorCanvas.appendChild(this.markerImageHolder)},i.prototype.addDefs=function(){for(var t,e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];this.defs=C.createDefs(),this.addDefsToImage(),(t=this.defs).append.apply(t,e)},i.prototype.addDefsToImage=function(){this.defs&&this.markerImage.insertBefore(this.defs,this.markerImage.firstChild)},i.prototype.initOverlay=function(){this.overlayContainer=document.createElement("div"),this.overlayContainer.style.position="absolute",this.overlayContainer.style.left="0px",this.overlayContainer.style.top="0px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.overlayContainer.style.display="flex",this.markerImageHolder.appendChild(this.overlayContainer)},i.prototype.positionMarkerImage=function(){this.markerImageHolder.style.top=this.top/this.zoomLevel+"px",this.markerImageHolder.style.left=this.left/this.zoomLevel+"px"},i.prototype.attachEvents=function(){this.markerImage.addEventListener("pointerdown",this.onPointerDown),this.markerImage.addEventListener("touchmove",function(t){return t.preventDefault()}),this.markerImage.addEventListener("dblclick",this.onDblClick),this.attachWindowEvents()},i.prototype.attachWindowEvents=function(){window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerOut),window.addEventListener("pointerout",this.onPointerOut),window.addEventListener("pointerleave",this.onPointerUp),window.addEventListener("resize",this.onWindowResize),window.addEventListener("keyup",this.onKeyUp)},i.prototype.detachEvents=function(){this.markerImage.removeEventListener("pointerdown",this.onPointerDown),this.markerImage.removeEventListener("dblclick",this.onDblClick),this.detachWindowEvents()},i.prototype.detachWindowEvents=function(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerOut),window.removeEventListener("pointerout",this.onPointerOut),window.removeEventListener("pointerleave",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("keyup",this.onKeyUp)},i.prototype.addLogo=function(){this.logoUI=document.createElement("div"),this.logoUI.style.display="inline-block",this.logoUI.style.margin="0px",this.logoUI.style.padding="0px",this.logoUI.style.fill="#333333";var t=document.createElement("a");t.href="https://markerjs.com/",t.target="_blank",t.innerHTML='<svg viewBox="0 0 112 96" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="#e5f20d" fill-opacity=".647" d="M0 40.386h111.96V95.62H0z"/><path d="M93.61 61.452c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.591 1.048-1.481 0-2.222-.74-2.222-2.22 0-16.617-.533-29.347-1.604-38.192-1.068-8.842-2.92-13.265-5.552-13.265-4.443 0-10.94 15.509-19.497 46.52v.124c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.592 1.048-1.48 0-2.22-.74-2.22-2.22 0-3.29.165-8.392.493-15.302.33-7.732.494-13.82.494-18.262 0-6.17-.186-10.55-.556-13.142-.37-2.591-1.172-3.887-2.406-3.887-2.796 0-6.333 5.12-10.612 15.363C38.494 34.367 34.01 46.44 29.32 60.34l-1.11 3.209a5.714 5.714 0 01-1.42 2.097c-.617.578-1.295.864-2.036.864-.987 0-1.644-.081-1.974-.247-.328-.162-.533-.656-.617-1.48-.41-4.03-.74-9.418-.987-16.165-.163-1.728-.329-4.566-.494-8.515-.822-13.901-1.562-23.3-2.221-28.196-.657-4.893-.987-7.628-.987-8.205 0-.657.33-1.44.987-2.345.659-.903 1.276-1.357 1.85-1.357 1.319 0 2.387.947 3.21 2.838.411.906.863 4.526 1.357 10.859.493 6.335.905 14.19 1.233 23.568l.617 18.88c4.527-13.983 9.216-26.673 14.068-38.068C45.65 6.686 50.093.988 54.123.988c2.715 0 4.566 1.974 5.553 5.923.987 3.949 1.481 9.667 1.481 17.152 0 3.949-.081 9.625-.247 17.029l-.123 5.676c3.373-11.762 6.725-21.634 10.057-29.615 3.331-7.979 6.685-11.97 10.056-11.97 8.475 0 12.71 18.757 12.71 56.269z" fill-rule="nonzero"/></svg>',t.title="Powered by marker.js",t.style.display="grid",t.style.alignItems="center",t.style.justifyItems="center",t.style.padding="3px",t.style.width="20px",t.style.height="20px",this.logoUI.appendChild(t),this.editorCanvas.appendChild(this.logoUI),this.logoUI.style.position="absolute",this.logoUI.style.pointerEvents="all",this.positionLogo()},i.prototype.positionLogo=function(){this.logoUI&&(this.uiStyleSettings.logoPosition!=="right"?this.logoUI.style.left=this.markerImageHolder.offsetLeft+10+"px":this.logoUI.style.left=this.markerImageHolder.offsetLeft+this.markerImageHolder.offsetWidth-this.logoUI.clientWidth-10+"px",this.logoUI.style.top=this.markerImageHolder.offsetTop+this.markerImageHolder.offsetHeight-this.logoUI.clientHeight-10+"px")},i.prototype.overrideOverflow=function(){this.scrollXState=window.scrollX,this.scrollYState=window.scrollY,this.bodyOverflowState=document.body.style.overflow,window.scroll({top:0,left:0}),document.body.style.overflow="hidden"},i.prototype.restoreOverflow=function(){document.body.style.overflow=this.bodyOverflowState,window.scroll({top:this.scrollYState,left:this.scrollXState})},i.prototype.showUI=function(){var t;switch(this.settings.displayMode==="popup"&&this.overrideOverflow(),this.coverDiv=document.createElement("div"),this.coverDiv.style.visibility=this._silentRenderMode?"hidden":"visible",this.coverDiv.className=this.styles.classNamePrefixBase+" "+this.styles.classNamePrefix,this.coverDiv.style.fontSize="16px",this.coverDiv.style.userSelect="none",this.settings.displayMode){case"inline":this.coverDiv.style.position="absolute";var e=this.settings.uiOffsetTop!==void 0?this.target.offsetTop+this.settings.uiOffsetTop:this.target.offsetTop>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0,s=this.target.offsetLeft+((t=this.settings.uiOffsetLeft)!==null&&t!==void 0?t:0);this.coverDiv.style.top=e+"px",this.coverDiv.style.left=s+"px",this.coverDiv.style.width=this.target.offsetWidth.toString()+"px",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"5";break;case"popup":this.coverDiv.style.position="fixed",this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=window.innerHeight+"px",this.coverDiv.style.backgroundColor="rgba(0, 0, 0, 0.75)",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"1000",this.coverDiv.style.display="flex"}this.targetRoot.appendChild(this.coverDiv),this.uiDiv=document.createElement("div"),this.uiDiv.style.display="flex",this.uiDiv.style.flexDirection="column",this.uiDiv.style.flexGrow="2",this.uiDiv.style.margin=this.settings.displayMode==="popup"?this.settings.popupMargin+"px":"0px",this.settings.displayMode==="popup"&&(this.uiDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px"),this.uiDiv.style.border="0px",this.coverDiv.appendChild(this.uiDiv),this.toolbar=new yu(this.uiDiv,this.settings.displayMode,this._availableMarkerTypes,this.uiStyleSettings,this.styles),this.toolbar.addButtonClickListener(this.toolbarButtonClicked),this.toolbar.show(this._silentRenderMode||this.uiStyleSettings.hideToolbar?"hidden":"visible"),this.contentDiv=document.createElement("div"),this.contentDiv.style.display="flex",this.contentDiv.style.flexDirection="row",this.contentDiv.style.flexGrow="2",this.contentDiv.style.flexShrink="1",this.settings.displayMode==="popup"&&(this.contentDiv.style.backgroundColor=this.uiStyleSettings.canvasBackgroundColor,this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.uiStyleSettings.toolbarHeight+"px",this.contentDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px)"),this.contentDiv.style.overflow="auto",this.uiDiv.appendChild(this.contentDiv),this.editorCanvas=document.createElement("div"),this.editorCanvas.style.flexGrow="2",this.editorCanvas.style.flexShrink="1",this.editorCanvas.style.position="relative",this.editorCanvas.style.overflow="hidden",this.editorCanvas.style.display="flex",this.settings.displayMode==="popup"&&(this.editorCanvas.style.alignItems="center",this.editorCanvas.style.justifyContent="center"),this.editorCanvas.style.pointerEvents="none",this.editorCanvas.style.transformOrigin="left top",this.editorCanvas.style.transform="scale("+this.zoomLevel+")",this.contentDiv.appendChild(this.editorCanvas),this.editingTarget=this.target instanceof HTMLImageElement?document.createElement("img"):document.createElement("canvas"),this.settings.displayMode==="inline"&&this.settings.uiOffsetTop===void 0&&this.target.offsetTop<this.styles.settings.toolbarHeight&&(this.editingTarget.style.marginTop=this.target.offsetTop-this.styles.settings.toolbarHeight+"px"),this.editorCanvas.appendChild(this.editingTarget),this.toolbox=new vu(this.uiDiv,this.settings.displayMode,this.uiStyleSettings,this.styles),this.toolbox.show(this._silentRenderMode||this.uiStyleSettings.hideToolbox?"hidden":"visible")},i.prototype.closeUI=function(){this.settings.displayMode==="popup"&&this.restoreOverflow(),this.targetRoot.removeChild(this.coverDiv),this.coverDiv.remove(),this.coverDiv=null},i.prototype.removeMarker=function(t){this.markerImage.removeChild(t.container),this.markers.indexOf(t)>-1&&this.markers.splice(this.markers.indexOf(t),1),t.dispose()},i.prototype.switchToSelectMode=function(){this.mode="select",this.hideNotesEditor(),this._currentMarker!==void 0&&(this._currentMarker.state!=="new"?this._currentMarker.select():(this.removeMarker(this._currentMarker),this.setCurrentMarker(),this.markerImage.style.cursor="default"),this.addUndoStep())},i.prototype.toolbarButtonClicked=function(t,e){if(t==="marker"&&e!==void 0)this.createNewMarker(e);else if(t==="action")switch(e){case"select":this.switchToSelectMode(),this.switchToSelectMode();break;case"delete":this.deleteSelectedMarker();break;case"clear":this.clear();break;case"undo":this.undo();break;case"redo":this.redo();break;case"zoom":this.stepZoom();break;case"zoom-out":this.zoomLevel=1;break;case"notes":this.notesArea===void 0?(this.switchToSelectMode(),this.zoomLevel=1,this.showNotesEditor()):this.switchToSelectMode();break;case"close":this.close();break;case"render":this.switchToSelectMode(),this.startRenderAndClose()}},i.prototype.deleteSelectedMarker=function(){var t=this;if(this._currentMarker!==void 0){var e=!1;if(this.eventListeners.markerbeforedelete.forEach(function(n){var r=new ie(t,t._currentMarker,!0);n(r),r.defaultPrevented&&(e=!0)}),!e){var s=this._currentMarker;this._currentMarker.dispose(),this.markerImage.removeChild(this._currentMarker.container),this.markers.splice(this.markers.indexOf(this._currentMarker),1),this.setCurrentMarker(),this.addUndoStep(),this.eventListeners.markerdelete.forEach(function(n){return n(new ie(t,s))})}}},i.prototype.clear=function(){var t=this,e=!1;if(this.markers.length>0&&(this.eventListeners.markerbeforedelete.forEach(function(o){var a=new ie(t,void 0,!0);o(a),a.defaultPrevented&&(e=!0)}),!e)){this.setCurrentMarker();for(var s=function(o){var a=n.markers[o];n.setCurrentMarker(n.markers[o]),n._currentMarker.dispose(),n.markerImage.removeChild(n._currentMarker.container),n.markers.splice(n.markers.indexOf(n._currentMarker),1),n.eventListeners.markerdelete.forEach(function(l){return l(new ie(t,a))})},n=this,r=this.markers.length-1;r>=0;r--)s(r);this.addUndoStep()}},Object.defineProperty(i.prototype,"isNotesAreaOpen",{get:function(){return this.notesArea!==void 0},enumerable:!1,configurable:!0}),i.prototype.showNotesEditor=function(){var t;this._currentMarker!==void 0&&(this.overlayContainer.innerHTML="",this.notesArea=document.createElement("textarea"),this.notesArea.className=this.uiStyleSettings.notesAreaStyleClassName,this.notesArea.style.pointerEvents="auto",this.notesArea.style.alignSelf="stretch",this.notesArea.style.width="100%",this.notesArea.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.notesArea.value=(t=this._currentMarker.notes)!==null&&t!==void 0?t:"",this.overlayContainer.appendChild(this.notesArea))},i.prototype.hideNotesEditor=function(){this.isNotesAreaOpen&&(this._currentMarker!==void 0&&(this._currentMarker.notes=this.notesArea.value.trim()!==""?this.notesArea.value:void 0),this.overlayContainer.removeChild(this.notesArea),this.notesArea=void 0)},i.prototype.selectLastMarker=function(){this.markers.length>0?this.setCurrentMarker(this.markers[this.markers.length-1]):this.setCurrentMarker()},i.prototype.addUndoStep=function(){var t=this;if(this._currentMarker===void 0||this._currentMarker.state!=="edit"){var e=this.getState(),s=this.undoRedoManager.getLastUndoStep();if(!s||s.width===e.width&&s.height===e.height){var n=this.undoRedoManager.undoStepCount;this.undoRedoManager.addUndoStep(e),n<this.undoRedoManager.undoStepCount&&this.eventListeners.statechange.forEach(function(r){return r(new Wt(t))})}else this.undoRedoManager.replaceLastUndoStep(e)}},i.prototype.undo=function(){this.switchToSelectMode(),this.addUndoStep(),this.undoStep()},i.prototype.undoStep=function(){var t=this,e=this.undoRedoManager.undo();e!==void 0&&(this.restoreState(e),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(s){return s(new Wt(t))}))},i.prototype.redo=function(){this.switchToSelectMode(),this.redoStep()},i.prototype.redoStep=function(){var t=this,e=this.undoRedoManager.redo();e!==void 0&&(this.restoreState(e),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(s){return s(new Wt(t))}))},i.prototype.stepZoom=function(){var t=this.zoomSteps.indexOf(this.zoomLevel);this.zoomLevel=t<this.zoomSteps.length-1?this.zoomSteps[t+1]:this.zoomSteps[0]},i.prototype.panTo=function(t){this.contentDiv.scrollBy({left:this.prevPanPoint.x-t.x,top:this.prevPanPoint.y-t.y}),this.prevPanPoint=t},i.prototype.startRenderAndClose=function(){return vo(this,void 0,void 0,function(){var t,e,s=this;return bo(this,function(n){switch(n.label){case 0:return[4,this.render()];case 1:return t=n.sent(),e=this.getState(),this.eventListeners.render.forEach(function(r){return r(new Pu(s,t,e))}),this.close(!0),[2]}})})},i.prototype.getState=function(t){t===!0&&this.setCurrentMarker();var e={width:this.imageWidth,height:this.imageHeight,markers:[]};return this.markers.forEach(function(s){return e.markers.push(s.getState())}),e},i.prototype.restoreState=function(t){var e=this;for(this.markers.splice(0);this.markerImage.lastChild;)this.markerImage.removeChild(this.markerImage.lastChild);t.markers.forEach(function(s){var n=e._availableMarkerTypes.find(function(o){return o.typeName===s.typeName});if(n!==void 0){var r=e.addNewMarker(n);r.restoreState(s),e.addMarkerEvents(r),e.markers.push(r)}}),t.width&&t.height&&(t.width!==this.imageWidth||t.height!==this.imageHeight)&&this.scaleMarkers(this.imageWidth/t.width,this.imageHeight/t.height),this.eventListeners.restorestate.forEach(function(s){return s(new Wt(e))})},i.prototype.addNewMarker=function(t){var e=C.createGroup();return this.markerImage.appendChild(e),new t(e,this.overlayContainer,this.settings)},i.prototype.createNewMarker=function(t){var e,s=this;(e=typeof t=="string"?this._availableMarkerTypes.find(function(n){return n.typeName===t}):t)&&(this.setCurrentMarker(),this.addUndoStep(),this._currentMarker=this.addNewMarker(e),this.addMarkerEvents(this._currentMarker),this.markerImage.style.cursor="crosshair",this.toolbar.setActiveMarkerButton(e.typeName),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this.eventListeners.markercreating.forEach(function(n){return n(new ie(s,s._currentMarker))}))},i.prototype.addMarkerEvents=function(t){t.onMarkerCreated=this.markerCreated,t.onColorChanged=this.colorChanged,t.onFillColorChanged=this.fillColorChanged,t.onStateChanged=this.markerStateChanged},i.prototype.markerCreated=function(t){var e=this;this.mode="select",this.markerImage.style.cursor="default",this.markers.push(t),this.setCurrentMarker(t),t instanceof ii&&this.settings.newFreehandMarkerOnPointerUp?this.createNewMarker(ii):this.toolbar.setSelectMode(),this.addUndoStep(),this.eventListeners.markercreate.forEach(function(s){return s(new ie(e,t))})},i.prototype.colorChanged=function(t){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultColor=t,this.settings.defaultStrokeColor=t)},i.prototype.fillColorChanged=function(t){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultFillColor=t)},i.prototype.markerStateChanged=function(t){var e=this;this.eventListeners.markerchange.forEach(function(s){return s(new ie(e,t))})},i.prototype.setCurrentMarker=function(t){var e=this;this._currentMarker!==t&&this._currentMarker!==void 0&&(this._currentMarker.deselect(),this.toolbar.setCurrentMarker(),this.toolbox.setPanelButtons([]),this._isResizing||this.eventListeners.markerdeselect.forEach(function(s){return s(new ie(e,e._currentMarker))})),this._currentMarker=t,this._currentMarker===void 0||this._currentMarker.isSelected||(this._currentMarker.state!=="new"&&this._currentMarker.select(),this.toolbar.setCurrentMarker(this._currentMarker),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this._isResizing||this.eventListeners.markerselect.forEach(function(s){return s(new ie(e,e._currentMarker))}))},i.prototype.onPointerDown=function(t){if(this._isFocused||this.focus(),this.touchPoints++,this.touchPoints===1||t.pointerType!=="touch")if(this._currentMarker===void 0||this._currentMarker.state!=="new"&&this._currentMarker.state!=="creating"){if(this.mode==="select"){var e=this.markers.find(function(s){return s.ownsTarget(t.target)});e!==void 0?(this.setCurrentMarker(e),this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(t.clientX,t.clientY),t.target)):(this.setCurrentMarker(),this.isDragging=!0,this.prevPanPoint={x:t.clientX,y:t.clientY})}}else this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(t.clientX,t.clientY))},i.prototype.onDblClick=function(t){if(this._isFocused||this.focus(),this.mode==="select"){var e=this.markers.find(function(s){return s.ownsTarget(t.target)});e!==void 0&&e!==this._currentMarker&&this.setCurrentMarker(e),this._currentMarker!==void 0?this._currentMarker.dblClick(this.clientToLocalCoordinates(t.clientX,t.clientY),t.target):this.setCurrentMarker()}},i.prototype.onPointerMove=function(t){this.touchPoints!==1&&t.pointerType==="touch"||(this._currentMarker!==void 0||this.isDragging)&&(this._currentMarker!==void 0&&this._currentMarker.state==="edit"||t.preventDefault(),this._currentMarker!==void 0?this._currentMarker.manipulate(this.clientToLocalCoordinates(t.clientX,t.clientY)):this.zoomLevel>1&&this.panTo({x:t.clientX,y:t.clientY}))},i.prototype.onPointerUp=function(t){this.touchPoints>0&&this.touchPoints--,this.touchPoints===0&&this.isDragging&&this._currentMarker!==void 0&&this._currentMarker.pointerUp(this.clientToLocalCoordinates(t.clientX,t.clientY)),this.isDragging=!1,this.addUndoStep()},i.prototype.onPointerOut=function(){this.touchPoints>0&&this.touchPoints--},i.prototype.onKeyUp=function(t){this._currentMarker===void 0||this.notesArea!==void 0||t.key!=="Delete"&&t.key!=="Backspace"||this.deleteSelectedMarker()},i.prototype.clientToLocalCoordinates=function(t,e){var s=this.markerImage.getBoundingClientRect(),n=s.width/this.imageWidth/this.zoomLevel,r=s.height/this.imageHeight/this.zoomLevel;return{x:(t-s.left)/this.zoomLevel/n,y:(e-s.top)/this.zoomLevel/r}},i.prototype.onWindowResize=function(){this.positionUI()},i.prototype.positionUI=function(){switch(this.setTopLeft(),this.settings.displayMode){case"inline":var t=this.target.getClientRects(),e=t.length>0&&t.item(0)&&t.item(0).y>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0;this.coverDiv.style.top=e+"px",this.coverDiv.style.left=this.target.offsetLeft.toString()+"px";break;case"popup":this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=this.windowHeight+"px",this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.styles.settings.toolbarHeight+"px"}this.positionMarkerImage(),this.positionLogo()},i.prototype.addLicenseKey=function(t){wo.addKey(t)},i.prototype.addEventListener=function(t,e){this.eventListeners.addEventListener(t,e)},i.prototype.removeEventListener=function(t,e){this.eventListeners.removeEventListener(t,e)},i.prototype.renderState=function(t){this._silentRenderMode=!0,this.settings.displayMode="inline",this.isOpen||this.show(),this.restoreState(t),this.startRenderAndClose(),this._silentRenderMode=!1},Object.defineProperty(i.prototype,"isFocused",{get:function(){return this._isFocused},enumerable:!1,configurable:!0}),i.prototype.focus=function(){var t=this;this._isFocused||(this.attachWindowEvents(),this._isFocused=!0,this._previousCurrentMarker!==void 0&&this.setCurrentMarker(this._previousCurrentMarker),this.eventListeners.focus.forEach(function(e){return e(new Wt(t))}))},i.prototype.blur=function(){var t=this;this._isFocused&&(this.detachWindowEvents(),this._isFocused=!1,this._previousCurrentMarker=this._currentMarker,this.setCurrentMarker(),this.eventListeners.blur.forEach(function(e){return e(new Wt(t))}))},i.instanceCounter=0,i}();const So="/StickerEditor/assets/testimg-DOU5pnUw.jpg",Tu=(i,t)=>{const e=i.__vccOpts||i;for(const[s,n]of t)e[s]=n;return e},Bu=i=>(dh("data-v-d74cbcff"),i=i(),fh(),i),Ru={class:"flex flex-col"},Lu={class:"bg-Surface w-[52vw] h-auto flex items-center justify-center rounded-xl p-10 relative"},Iu=["src"],Ou=["src","onMousedown","onTouchstart"],Du={class:"mt-5 flex items-center justify-center gap-5"},Nu=Bu(()=>Y("label",{for:"file-upload",class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh] content-center text-center hover:cursor-pointer"},"Import",-1)),Fu=["href"],Wu={__name:"Editor",setup(i,{expose:t}){let e=Tt(null),s=Tt(null),n=null;const r=Qt("selectedImage"),o=Qt("savedImages"),a=Qt("images"),l=Tt([]),c=g=>{l.value.push({src:g,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"70%",cursor:"move"}})},u=()=>new Promise((g,v)=>{const P=document.createElement("canvas"),T=P.getContext("2d"),B=new Image;B.src=e.value.src,B.onload=()=>{P.width=B.width,P.height=B.height,T.drawImage(B,0,0);let j=0;if(l.value.forEach(I=>{const F=new Image;F.src=I.src,F.onload=()=>{const G=B.width/e.value.clientWidth,L=B.height/e.value.clientHeight,U=parseFloat(I.style.left)*G,rt=parseFloat(I.style.top)*L,J=parseFloat(I.style.width)*G;if(T.drawImage(F,U,rt,J,J),j++,j===l.value.length){const Et=P.toDataURL("image/png");g(Et)}},F.onerror=v}),l.value.length===0){const I=P.toDataURL("image/png");g(I)}},B.onerror=v}),f=async()=>{try{const g=await u();console.log("Merge successful");const v=new Mu(e.value);v.availableMarkerTypes=v.ALL_MARKER_TYPES,v.uiStyleSettings.redoButtonVisible=!0,v.uiStyleSettings.zoomButtonVisible=!0,v.uiStyleSettings.zoomOutButtonVisible=!0,v.uiStyleSettings.clearButtonVisible=!0,v.settings.displayMode="popup",v.settings.defaultColor=["#000000"],v.settings.defaultFontFamilies=["Poetsen One","Indie Flower","Dela Gothic One","DynaPuff","Pixelify Sans","Gluten","Teko"],v.addRenderEventListener(P=>{o.value.push(P),e.value.src=P,s.value.href=P}),e.value.src=g,s.value.href=g,v.show()}catch(g){console.error("Merge failed",g)}},w=g=>{const v=g.target.files[0],P=new FileReader;P.onload=()=>{n=P.result,e.value.src=n,s.value.href=n,a.value.push({src:n,alt:v.name}),emit("newImage",n)},v&&P.readAsDataURL(v)};return Ca(()=>{const g=document.createElement("canvas"),v=g.getContext("2d"),P=new Image;P.src=So,P.onload=()=>{g.width=P.width,g.height=P.height,v.drawImage(P,0,0),n=g.toDataURL("image/png"),s.value.href=n}}),Yi(r,g=>{g&&(e.value.src=g,s.value.href=g)}),t({addSticker:c}),(g,v)=>(ct(),gt("div",Ru,[Y("div",Lu,[Y("img",{class:"w-auto max-w-[48vw] h-auto min-h-[60vh] max-h-[75vh] object-fill rounded-xl",ref_key:"imgRef",ref:e,src:ft(r)||ft(So),alt:"Test img"},null,8,Iu),(ct(!0),gt(xt,null,ps(l.value,(P,T)=>(ct(),gt("img",{key:T,src:P.src,style:Gs(P.style),onMousedown:B=>g.startDrag(B,T),onTouchstart:B=>g.startDrag(B,T)},null,44,Ou))),128))]),Y("div",Du,[Nu,Y("input",{id:"file-upload",type:"file",onChange:w,accept:"image/*",class:"hidden"},null,32),Y("button",{class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh]",onClick:f},"Edit"),Y("a",{class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh] flex items-center justify-center",ref_key:"downloadButton",ref:s,href:ft(n),download:"image.png"},"Download",8,Fu)])]))}},Hu=Tu(Wu,[["__scopeId","data-v-d74cbcff"]]),ju="/StickerEditor/assets/out2-CcsAHtZO.png",Vu="/StickerEditor/assets/out3-DDp8jPL9.png",zu="/StickerEditor/assets/out6-DvOdD5OY.png",$u="/StickerEditor/assets/out5-f7Ma6H0z.png",Gu="/StickerEditor/assets/out7-Bh2lHIfN.png",Uu="/StickerEditor/assets/out8-CHEbLBCF.png",Xu="/StickerEditor/assets/out9-YMO4_2Fq.png",Yu="/StickerEditor/assets/out10-CvLObVeK.png",Ku="/StickerEditor/assets/out11-CT18JE_v.png",qu="/StickerEditor/assets/out12-CN1wM1JI.png",Ju={class:"bg-Background h-screen gap-10 mx-auto grid grid-rows-3 relative"},Zu={class:"row-span-1 w-[400px] absolute left-0"},Qu={class:"row-span-1 flex items-center justify-center min-h-screen absolute left-1/4 right-1/4"},td={class:"row-span-1 h-screen flex justify-end absolute right-0"},ed={__name:"ImageEditor",setup(i){let t=Tt([{src:ju,alt:"add on 1"},{src:Vu,alt:"add on 2"},{src:$u,alt:"add on 3"},{src:zu,alt:"add on 4"},{src:Gu,alt:"add on 5"},{src:Uu,alt:"add on 6"},{src:Xu,alt:"add on 7"},{src:Yu,alt:"add on 8"},{src:Ku,alt:"add on 9"},{src:qu,alt:"add on 10"}]),e=Tt(!1),s=Tt(null);const n=Tt([]),r=Tt(null),o=l=>{t.value.unshift({src:l,alt:"New Image"})};return Re("handleStickerSelected",l=>{r.value&&r.value.addSticker(l)}),Re("images",t),Re("selectedImage",s),Re("typeButton",e),Re("savedImages",n),(l,c)=>(ct(),gt("section",Ju,[Y("aside",Zu,[St(iu)]),Y("main",Qu,[St(Hu,{ref_key:"editorRef",ref:r,"selected-image":ft(s),onNewImage:o},null,8,["selected-image"])]),Y("aside",td,[St(pu,{onSelectImage:c[0]||(c[0]=u=>yt(s)?s.value=u:s=u)})])]))}},Ie="4.32.2";let _o=!1,bi,za,$a,Fr,Ga,Ua,Xa,Ya,Ka;function id(i,t={auto:!1}){if(_o)throw new Error(`you must \`import 'openai/shims/${i.kind}'\` before importing anything else from openai`);if(bi)throw new Error(`can't \`import 'openai/shims/${i.kind}'\` after \`import 'openai/shims/${bi}'\``);_o=t.auto,bi=i.kind,za=i.fetch,i.Request,i.Response,i.Headers,$a=i.FormData,i.Blob,Fr=i.File,Ga=i.ReadableStream,Ua=i.getMultipartRequestOptions,Xa=i.getDefaultAgent,Ya=i.fileFromPath,Ka=i.isFsReadStream}class sd{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function rd({manuallyImported:i}={}){const t=i?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let e,s,n,r;try{e=fetch,s=Request,n=Response,r=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:e,Request:s,Response:n,Headers:r,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(o,a)=>({...a,body:new sd(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}bi||id(rd(),{auto:!0});class V extends Error{}class ut extends V{constructor(t,e,s,n){super(`${ut.makeMessage(t,e,s)}`),this.status=t,this.headers=n;const r=e;this.error=r,this.code=r==null?void 0:r.code,this.param=r==null?void 0:r.param,this.type=r==null?void 0:r.type}static makeMessage(t,e,s){const n=e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):s;return t&&n?`${t} ${n}`:t?`${t} status code (no body)`:n||"(no status code or body)"}static generate(t,e,s,n){if(!t)return new er({cause:Hr(e)});const r=e==null?void 0:e.error;return t===400?new qa(t,r,s,n):t===401?new Ja(t,r,s,n):t===403?new Za(t,r,s,n):t===404?new Qa(t,r,s,n):t===409?new tl(t,r,s,n):t===422?new el(t,r,s,n):t===429?new il(t,r,s,n):t>=500?new sl(t,r,s,n):new ut(t,r,s,n)}}class Rt extends ut{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class er extends ut{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,e&&(this.cause=e)}}class vn extends er{constructor({message:t}={}){super({message:t??"Request timed out."})}}class qa extends ut{constructor(){super(...arguments),this.status=400}}class Ja extends ut{constructor(){super(...arguments),this.status=401}}class Za extends ut{constructor(){super(...arguments),this.status=403}}class Qa extends ut{constructor(){super(...arguments),this.status=404}}class tl extends ut{constructor(){super(...arguments),this.status=409}}class el extends ut{constructor(){super(...arguments),this.status=422}}class il extends ut{constructor(){super(...arguments),this.status=429}}class sl extends ut{}class Zt{constructor(t,e){this.iterator=t,this.controller=e}static fromSSEResponse(t,e){let s=!1;async function*n(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let r=!1;try{for await(const o of nd(t,e))if(!r){if(o.data.startsWith("[DONE]")){r=!0;continue}if(o.event===null){let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(a&&a.error)throw new ut(void 0,a.error,void 0,void 0);yield a}else{let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(o.event=="error")throw new ut(void 0,a.error,a.message,void 0);yield{event:o.event,data:a}}}r=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{r||e.abort()}}return new Zt(n,e)}static fromReadableStream(t,e){let s=!1;async function*n(){const o=new Pe,a=rl(t);for await(const l of a)for(const c of o.decode(l))yield c;for(const l of o.flush())yield l}async function*r(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const a of n())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{o||e.abort()}}return new Zt(r,e)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],s=this.iterator(),n=r=>({next:()=>{if(r.length===0){const o=s.next();t.push(o),e.push(o)}return r.shift()}});return[new Zt(()=>n(t),this.controller),new Zt(()=>n(e),this.controller)]}toReadableStream(){const t=this;let e;const s=new TextEncoder;return new Ga({async start(){e=t[Symbol.asyncIterator]()},async pull(n){try{const{value:r,done:o}=await e.next();if(o)return n.close();const a=s.encode(JSON.stringify(r)+`
`);n.enqueue(a)}catch(r){n.error(r)}},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}}async function*nd(i,t){if(!i.body)throw t.abort(),new V("Attempted to iterate over a response with no body");const e=new ld,s=new Pe,n=rl(i.body);for await(const r of od(n))for(const o of s.decode(r)){const a=e.decode(o);a&&(yield a)}for(const r of s.flush()){const o=e.decode(r);o&&(yield o)}}async function*od(i){let t=new Uint8Array;for await(const e of i){if(e==null)continue;const s=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let n=new Uint8Array(t.length+s.length);n.set(t),n.set(s,t.length),t=n;let r;for(;(r=ad(t))!==-1;)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}function ad(i){for(let s=0;s<i.length-2;s++){if(i[s]===10&&i[s+1]===10||i[s]===13&&i[s+1]===13)return s+2;if(i[s]===13&&i[s+1]===10&&s+3<i.length&&i[s+2]===13&&i[s+3]===10)return s+4}return-1}class ld{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,s,n]=hd(t,":");return n.startsWith(" ")&&(n=n.substring(1)),e==="event"?this.event=n:e==="data"&&this.data.push(n),null}}class Pe{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let e=this.decodeText(t);if(this.trailingCR&&(e="\r"+e,this.trailingCR=!1),e.endsWith("\r")&&(this.trailingCR=!0,e=e.slice(0,-1)),!e)return[];const s=Pe.NEWLINE_CHARS.has(e[e.length-1]||"");let n=e.split(Pe.NEWLINE_REGEXP);return s&&n.pop(),n.length===1&&!s?(this.buffer.push(n[0]),[]):(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),s||(this.buffer=[n.pop()||""]),n)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new V(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new V(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new V("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}Pe.NEWLINE_CHARS=new Set([`
`,"\r"]);Pe.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function hd(i,t){const e=i.indexOf(t);return e!==-1?[i.substring(0,e),t,i.substring(e+t.length)]:[i,"",""]}function rl(i){if(i[Symbol.asyncIterator])return i;const t=i.getReader();return{async next(){try{const e=await t.read();return e!=null&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const nl=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function",ol=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&al(i),al=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",cd=i=>ol(i)||nl(i)||Ka(i);async function ll(i,t,e){var n;if(i=await i,e??(e=ol(i)?{lastModified:i.lastModified,type:i.type}:{}),nl(i)){const r=await i.blob();return t||(t=new URL(i.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new Fr([r],t,e)}const s=await ud(i);if(t||(t=fd(i)??"unknown_file"),!e.type){const r=(n=s[0])==null?void 0:n.type;typeof r=="string"&&(e={...e,type:r})}return new Fr(s,t,e)}async function ud(i){var e;let t=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)t.push(i);else if(al(i))t.push(await i.arrayBuffer());else if(pd(i))for await(const s of i)t.push(s);else throw new Error(`Unexpected data type: ${typeof i}; constructor: ${(e=i==null?void 0:i.constructor)==null?void 0:e.name}; props: ${dd(i)}`);return t}function dd(i){return`[${Object.getOwnPropertyNames(i).map(e=>`"${e}"`).join(", ")}]`}function fd(i){var t;return br(i.name)||br(i.filename)||((t=br(i.path))==null?void 0:t.split(/[\\/]/).pop())}const br=i=>{if(typeof i=="string")return i;if(typeof Buffer<"u"&&i instanceof Buffer)return String(i)},pd=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function",ko=i=>i&&typeof i=="object"&&i.body&&i[Symbol.toStringTag]==="MultipartBody",Ei=async i=>{const t=await gd(i.body);return Ua(t,i)},gd=async i=>{const t=new $a;return await Promise.all(Object.entries(i||{}).map(([e,s])=>Wr(t,e,s))),t},Wr=async(i,t,e)=>{if(e!==void 0){if(e==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")i.append(t,String(e));else if(cd(e)){const s=await ll(e);i.append(t,s)}else if(Array.isArray(e))await Promise.all(e.map(s=>Wr(i,t+"[]",s)));else if(typeof e=="object")await Promise.all(Object.entries(e).map(([s,n])=>Wr(i,`${t}[${s}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${e} instead`)}};var Ve={},md=function(i,t,e,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?i!==t||!n:!t.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(i,e):n?n.value=e:t.set(i,e),e},yd=function(i,t,e,s){if(e==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?i!==t||!s:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?s:e==="a"?s.call(i):s?s.value:t.get(i)},zi;async function hl(i){const{response:t}=i;if(i.options.stream)return ze("response",t.status,t.url,t.headers,t.body),i.options.__streamClass?i.options.__streamClass.fromSSEResponse(t,i.controller):Zt.fromSSEResponse(t,i.controller);if(t.status===204)return null;if(i.options.__binaryResponse)return t;const e=t.headers.get("content-type");if((e==null?void 0:e.includes("application/json"))||(e==null?void 0:e.includes("application/vnd.api+json"))){const r=await t.json();return ze("response",t.status,t.url,t.headers,r),r}const n=await t.text();return ze("response",t.status,t.url,t.headers,n),n}class ir extends Promise{constructor(t,e=hl){super(s=>{s(null)}),this.responsePromise=t,this.parseResponse=e}_thenUnwrap(t){return new ir(this.responsePromise,async e=>t(await this.parseResponse(e)))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class vd{constructor({baseURL:t,maxRetries:e=2,timeout:s=6e5,httpAgent:n,fetch:r}){this.baseURL=t,this.maxRetries=wr("maxRetries",e),this.timeout=wr("timeout",s),this.httpAgent=n,this.fetch=r??za}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),..._d(),...this.authHeaders(t)}}validateHeaders(t,e){}defaultIdempotencyKey(){return`stainless-node-retry-${Ad()}`}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,s){return this.request(Promise.resolve(s).then(n=>({method:t,path:e,...n})))}getAPIList(t,e,s){return this.requestAPIList(e,{method:"get",path:t,...s})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}return null}buildRequest(t){var v;const{method:e,path:s,query:n,headers:r={}}=t,o=ko(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,a=this.calculateContentLength(o),l=this.buildURL(s,n);"timeout"in t&&wr("timeout",t.timeout);const c=t.timeout??this.timeout,u=t.httpAgent??this.httpAgent??Xa(l),f=c+1e3;typeof((v=u==null?void 0:u.options)==null?void 0:v.timeout)=="number"&&f>(u.options.timeout??0)&&(u.options.timeout=f),this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=t.idempotencyKey);const w=this.buildHeaders({options:t,headers:r,contentLength:a});return{req:{method:e,...o&&{body:o},headers:w,...u&&{agent:u},signal:t.signal??null},url:l,timeout:c}}buildHeaders({options:t,headers:e,contentLength:s}){const n={};s&&(n["content-length"]=s);const r=this.defaultHeaders(t);return Mo(n,r),Mo(n,e),ko(t.body)&&bi!=="node"&&delete n["content-type"],this.validateHeaders(n,e),n}async prepareOptions(t){}async prepareRequest(t,{url:e,options:s}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(e=>[...e])):{...t}:{}}makeStatusError(t,e,s,n){return ut.generate(t,e,s,n)}request(t,e=null){return new ir(this.makeRequest(t,e))}async makeRequest(t,e){var u,f;const s=await t;e==null&&(e=s.maxRetries??this.maxRetries),await this.prepareOptions(s);const{req:n,url:r,timeout:o}=this.buildRequest(s);if(await this.prepareRequest(n,{url:r,options:s}),ze("request",r,s,n.headers),(u=s.signal)!=null&&u.aborted)throw new Rt;const a=new AbortController,l=await this.fetchWithTimeout(r,n,o,a).catch(Hr);if(l instanceof Error){if((f=s.signal)!=null&&f.aborted)throw new Rt;if(e)return this.retryRequest(s,e);throw l.name==="AbortError"?new vn:new er({cause:l})}const c=wd(l.headers);if(!l.ok){if(e&&this.shouldRetry(l)){const B=`retrying, ${e} attempts remaining`;return ze(`response (error; ${B})`,l.status,r,c),this.retryRequest(s,e,c)}const w=await l.text().catch(B=>Hr(B).message),g=kd(w),v=g?void 0:w;throw ze(`response (error; ${e?"(error; no more retries left)":"(error; not retryable)"})`,l.status,r,c,v),this.makeStatusError(l.status,g,v,c)}return{response:l,options:s,controller:a}}requestAPIList(t,e){const s=this.makeRequest(e,null);return new bd(this,s,t)}buildURL(t,e){const s=Pd(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),n=this.defaultQuery();return ul(n)||(e={...n,...e}),typeof e=="object"&&e&&!Array.isArray(e)&&(s.search=this.stringifyQuery(e)),s.toString()}stringifyQuery(t){return Object.entries(t).filter(([e,s])=>typeof s<"u").map(([e,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(e)}=`;throw new V(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,e,s,n){const{signal:r,...o}=e||{};r&&r.addEventListener("abort",()=>n.abort());const a=setTimeout(()=>n.abort(),s);return this.getRequestClient().fetch.call(void 0,t,{signal:n.signal,...o}).finally(()=>{clearTimeout(a)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,s){let n;const r=s==null?void 0:s["retry-after-ms"];if(r){const a=parseFloat(r);Number.isNaN(a)||(n=a)}const o=s==null?void 0:s["retry-after"];if(o&&!n){const a=parseFloat(o);Number.isNaN(a)?n=Date.parse(o)-Date.now():n=a*1e3}if(!(n&&0<=n&&n<60*1e3)){const a=t.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(e,a)}return await bn(n),this.makeRequest(t,e-1)}calculateDefaultRetryTimeoutMillis(t,e){const r=e-t,o=Math.min(.5*Math.pow(2,r),8),a=1-Math.random()*.25;return o*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Ie}`}}class cl{constructor(t,e,s,n){zi.set(this,void 0),md(this,zi,t,"f"),this.options=n,this.response=e,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new V("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const e={...this.options};if("params"in t&&typeof e.query=="object")e.query={...e.query,...t.params};else if("url"in t){const s=[...Object.entries(e.query||{}),...t.url.searchParams.entries()];for(const[n,r]of s)t.url.searchParams.set(n,r);e.query=void 0,e.path=t.url.toString()}return await yd(this,zi,"f").requestAPIList(this.constructor,e)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(zi=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const e of t.getPaginatedItems())yield e}}class bd extends ir{constructor(t,e,s){super(e,async n=>new s(t,n.response,await hl(n),n.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const e of t)yield e}}const wd=i=>new Proxy(Object.fromEntries(i.entries()),{get(t,e){const s=e.toString();return t[s.toLowerCase()]||t[s]}}),Cd={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},te=i=>typeof i=="object"&&i!==null&&!ul(i)&&Object.keys(i).every(t=>dl(Cd,t)),xd=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ie,"X-Stainless-OS":Po(Deno.build.os),"X-Stainless-Arch":Eo(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ie,"X-Stainless-OS":Po(process.platform),"X-Stainless-Arch":Eo(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const i=Sd();return i?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${i.browser}`,"X-Stainless-Runtime-Version":i.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Sd(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of i){const s=e.exec(navigator.userAgent);if(s){const n=s[1]||0,r=s[2]||0,o=s[3]||0;return{browser:t,version:`${n}.${r}.${o}`}}}return null}const Eo=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",Po=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let Ao;const _d=()=>Ao??(Ao=xd()),kd=i=>{try{return JSON.parse(i)}catch{return}},Ed=new RegExp("^(?:[a-z]+:)?//","i"),Pd=i=>Ed.test(i),bn=i=>new Promise(t=>setTimeout(t,i)),wr=(i,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new V(`${i} must be an integer`);if(t<0)throw new V(`${i} must be a positive integer`);return t},Hr=i=>i instanceof Error?i:new Error(i),Cr=i=>{var t,e,s,n;if(typeof process<"u")return((t=Ve==null?void 0:Ve[i])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(n=(s=(e=Deno.env)==null?void 0:e.get)==null?void 0:s.call(e,i))==null?void 0:n.trim()};function ul(i){if(!i)return!0;for(const t in i)return!1;return!0}function dl(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function Mo(i,t){for(const e in t){if(!dl(t,e))continue;const s=e.toLowerCase();if(!s)continue;const n=t[e];n===null?delete i[s]:n!==void 0&&(i[s]=n)}}function ze(i,...t){typeof process<"u"&&(Ve==null?void 0:Ve.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${i}`,...t)}const Ad=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const t=Math.random()*16|0;return(i==="x"?t:t&3|8).toString(16)}),Md=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function To(i){return i!=null&&typeof i=="object"&&!Array.isArray(i)}class wn extends cl{constructor(t,e,s,n){super(t,e,s,n),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class ae extends cl{constructor(t,e,s,n){super(t,e,s,n),this.data=s.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const e=Object.fromEntries(t.url.searchParams);return Object.keys(e).length?e:null}nextPageInfo(){var s;const t=this.getPaginatedItems();if(!t.length)return null;const e=(s=t[t.length-1])==null?void 0:s.id;return e?{params:{after:e}}:null}}class tt{constructor(t){this._client=t}}let ys=class extends tt{create(t,e){return this._client.post("/chat/completions",{body:t,...e,stream:t.stream??!1})}};ys||(ys={});let vs=class extends tt{constructor(){super(...arguments),this.completions=new ys(this._client)}};(function(i){i.Completions=ys})(vs||(vs={}));class bs extends tt{create(t,e){return this._client.post("/audio/speech",{body:t,...e,__binaryResponse:!0})}}bs||(bs={});class ws extends tt{create(t,e){return this._client.post("/audio/transcriptions",Ei({body:t,...e}))}}ws||(ws={});class Cs extends tt{create(t,e){return this._client.post("/audio/translations",Ei({body:t,...e}))}}Cs||(Cs={});class xs extends tt{constructor(){super(...arguments),this.transcriptions=new ws(this._client),this.translations=new Cs(this._client),this.speech=new bs(this._client)}}(function(i){i.Transcriptions=ws,i.Translations=Cs,i.Speech=bs})(xs||(xs={}));let Ss=class extends tt{create(t,e,s){return this._client.post(`/assistants/${t}/files`,{body:e,...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}retrieve(t,e,s){return this._client.get(`/assistants/${t}/files/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}list(t,e={},s){return te(e)?this.list(t,{},e):this._client.getAPIList(`/assistants/${t}/files`,Cn,{query:e,...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}del(t,e,s){return this._client.delete(`/assistants/${t}/files/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}};class Cn extends ae{}(function(i){i.AssistantFilesPage=Cn})(Ss||(Ss={}));class _s extends tt{constructor(){super(...arguments),this.files=new Ss(this._client)}create(t,e){return this._client.post("/assistants",{body:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}retrieve(t,e){return this._client.get(`/assistants/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}update(t,e,s){return this._client.post(`/assistants/${t}`,{body:e,...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}list(t={},e){return te(t)?this.list({},t):this._client.getAPIList("/assistants",xn,{query:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}del(t,e){return this._client.delete(`/assistants/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}}class xn extends ae{}(function(i){i.AssistantsPage=xn,i.Files=Ss,i.AssistantFilesPage=Cn})(_s||(_s={}));function Bo(i){return typeof i.parse=="function"}const $e=i=>(i==null?void 0:i.role)==="assistant",fl=i=>(i==null?void 0:i.role)==="function",pl=i=>(i==null?void 0:i.role)==="tool";var Ot=function(i,t,e,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?i!==t||!n:!t.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(i,e):n?n.value=e:t.set(i,e),e},W=function(i,t,e,s){if(e==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?i!==t||!s:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?s:e==="a"?s.call(i):s?s.value:t.get(i)},dt,Zi,Qi,ni,oi,ts,ai,se,li,es,is,Oe,jr,ks,Vr,zr,$r,Gr,gl,Ur;const Ro=10;class ml{constructor(){dt.add(this),this.controller=new AbortController,Zi.set(this,void 0),Qi.set(this,()=>{}),ni.set(this,()=>{}),oi.set(this,void 0),ts.set(this,()=>{}),ai.set(this,()=>{}),se.set(this,{}),this._chatCompletions=[],this.messages=[],li.set(this,!1),es.set(this,!1),is.set(this,!1),Oe.set(this,!1),Gr.set(this,t=>{if(Ot(this,es,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Rt),t instanceof Rt)return Ot(this,is,!0,"f"),this._emit("abort",t);if(t instanceof V)return this._emit("error",t);if(t instanceof Error){const e=new V(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new V(String(t)))}),Ot(this,Zi,new Promise((t,e)=>{Ot(this,Qi,t,"f"),Ot(this,ni,e,"f")}),"f"),Ot(this,oi,new Promise((t,e)=>{Ot(this,ts,t,"f"),Ot(this,ai,e,"f")}),"f"),W(this,Zi,"f").catch(()=>{}),W(this,oi,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},W(this,Gr,"f"))},0)}_addChatCompletion(t){var s;this._chatCompletions.push(t),this._emit("chatCompletion",t);const e=(s=t.choices[0])==null?void 0:s.message;return e&&this._addMessage(e),t}_addMessage(t,e=!0){if("content"in t||(t.content=null),this.messages.push(t),e){if(this._emit("message",t),(fl(t)||pl(t))&&t.content)this._emit("functionCallResult",t.content);else if($e(t)&&t.function_call)this._emit("functionCall",t.function_call);else if($e(t)&&t.tool_calls)for(const s of t.tool_calls)s.type==="function"&&this._emit("functionCall",s.function)}}_connected(){this.ended||(W(this,Qi,"f").call(this),this._emit("connect"))}get ended(){return W(this,li,"f")}get errored(){return W(this,es,"f")}get aborted(){return W(this,is,"f")}abort(){this.controller.abort()}on(t,e){return(W(this,se,"f")[t]||(W(this,se,"f")[t]=[])).push({listener:e}),this}off(t,e){const s=W(this,se,"f")[t];if(!s)return this;const n=s.findIndex(r=>r.listener===e);return n>=0&&s.splice(n,1),this}once(t,e){return(W(this,se,"f")[t]||(W(this,se,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise((e,s)=>{Ot(this,Oe,!0,"f"),t!=="error"&&this.once("error",s),this.once(t,e)})}async done(){Ot(this,Oe,!0,"f"),await W(this,oi,"f")}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new V("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),W(this,dt,"m",jr).call(this)}async finalMessage(){return await this.done(),W(this,dt,"m",ks).call(this)}async finalFunctionCall(){return await this.done(),W(this,dt,"m",Vr).call(this)}async finalFunctionCallResult(){return await this.done(),W(this,dt,"m",zr).call(this)}async totalUsage(){return await this.done(),W(this,dt,"m",$r).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(t,...e){if(W(this,li,"f"))return;t==="end"&&(Ot(this,li,!0,"f"),W(this,ts,"f").call(this));const s=W(this,se,"f")[t];if(s&&(W(this,se,"f")[t]=s.filter(n=>!n.once),s.forEach(({listener:n})=>n(...e))),t==="abort"){const n=e[0];!W(this,Oe,"f")&&!(s!=null&&s.length)&&Promise.reject(n),W(this,ni,"f").call(this,n),W(this,ai,"f").call(this,n),this._emit("end");return}if(t==="error"){const n=e[0];!W(this,Oe,"f")&&!(s!=null&&s.length)&&Promise.reject(n),W(this,ni,"f").call(this,n),W(this,ai,"f").call(this,n),this._emit("end")}}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const e=W(this,dt,"m",ks).call(this);e&&this._emit("finalMessage",e);const s=W(this,dt,"m",jr).call(this);s&&this._emit("finalContent",s);const n=W(this,dt,"m",Vr).call(this);n&&this._emit("finalFunctionCall",n);const r=W(this,dt,"m",zr).call(this);r!=null&&this._emit("finalFunctionCallResult",r),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",W(this,dt,"m",$r).call(this))}async _createChatCompletion(t,e,s){const n=s==null?void 0:s.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),W(this,dt,"m",gl).call(this,e);const r=await t.create({...e,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(r)}async _runChatCompletion(t,e,s){for(const n of e.messages)this._addMessage(n,!1);return await this._createChatCompletion(t,e,s)}async _runFunctions(t,e,s){var w;const n="function",{function_call:r="auto",stream:o,...a}=e,l=typeof r!="string"&&(r==null?void 0:r.name),{maxChatCompletions:c=Ro}=s||{},u={};for(const g of e.functions)u[g.name||g.function.name]=g;const f=e.functions.map(g=>({name:g.name||g.function.name,parameters:g.parameters,description:g.description}));for(const g of e.messages)this._addMessage(g,!1);for(let g=0;g<c;++g){const P=(w=(await this._createChatCompletion(t,{...a,function_call:r,functions:f,messages:[...this.messages]},s)).choices[0])==null?void 0:w.message;if(!P)throw new V("missing message in ChatCompletion response");if(!P.function_call)return;const{name:T,arguments:B}=P.function_call,j=u[T];if(j){if(l&&l!==T){const L=`Invalid function_call: ${JSON.stringify(T)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:n,name:T,content:L});continue}}else{const L=`Invalid function_call: ${JSON.stringify(T)}. Available options are: ${f.map(U=>JSON.stringify(U.name)).join(", ")}. Please try again`;this._addMessage({role:n,name:T,content:L});continue}let I;try{I=Bo(j)?await j.parse(B):B}catch(L){this._addMessage({role:n,name:T,content:L instanceof Error?L.message:String(L)});continue}const F=await j.function(I,this),G=W(this,dt,"m",Ur).call(this,F);if(this._addMessage({role:n,name:T,content:G}),l)return}}async _runTools(t,e,s){var w,g;const n="tool",{tool_choice:r="auto",stream:o,...a}=e,l=typeof r!="string"&&((w=r==null?void 0:r.function)==null?void 0:w.name),{maxChatCompletions:c=Ro}=s||{},u={};for(const v of e.tools)v.type==="function"&&(u[v.function.name||v.function.function.name]=v.function);const f="tools"in e?e.tools.map(v=>v.type==="function"?{type:"function",function:{name:v.function.name||v.function.function.name,parameters:v.function.parameters,description:v.function.description}}:v):void 0;for(const v of e.messages)this._addMessage(v,!1);for(let v=0;v<c;++v){const T=(g=(await this._createChatCompletion(t,{...a,tool_choice:r,tools:f,messages:[...this.messages]},s)).choices[0])==null?void 0:g.message;if(!T)throw new V("missing message in ChatCompletion response");if(!T.tool_calls)return;for(const B of T.tool_calls){if(B.type!=="function")continue;const j=B.id,{name:I,arguments:F}=B.function,G=u[I];if(G){if(l&&l!==I){const J=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:n,tool_call_id:j,content:J});continue}}else{const J=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${f.map(Et=>JSON.stringify(Et.function.name)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:j,content:J});continue}let L;try{L=Bo(G)?await G.parse(F):F}catch(J){const Et=J instanceof Error?J.message:String(J);this._addMessage({role:n,tool_call_id:j,content:Et});continue}const U=await G.function(L,this),rt=W(this,dt,"m",Ur).call(this,U);if(this._addMessage({role:n,tool_call_id:j,content:rt}),l)return}}}}Zi=new WeakMap,Qi=new WeakMap,ni=new WeakMap,oi=new WeakMap,ts=new WeakMap,ai=new WeakMap,se=new WeakMap,li=new WeakMap,es=new WeakMap,is=new WeakMap,Oe=new WeakMap,Gr=new WeakMap,dt=new WeakSet,jr=function(){return W(this,dt,"m",ks).call(this).content??null},ks=function(){let t=this.messages.length;for(;t-- >0;){const e=this.messages[t];if($e(e))return{...e,content:e.content??null}}throw new V("stream ended without producing a ChatCompletionMessage with role=assistant")},Vr=function(){var t,e;for(let s=this.messages.length-1;s>=0;s--){const n=this.messages[s];if($e(n)&&(n!=null&&n.function_call))return n.function_call;if($e(n)&&((t=n==null?void 0:n.tool_calls)!=null&&t.length))return(e=n.tool_calls.at(-1))==null?void 0:e.function}},zr=function(){for(let t=this.messages.length-1;t>=0;t--){const e=this.messages[t];if(fl(e)&&e.content!=null||pl(e)&&e.content!=null&&this.messages.some(s=>{var n;return s.role==="assistant"&&((n=s.tool_calls)==null?void 0:n.some(r=>r.type==="function"&&r.id===e.tool_call_id))}))return e.content}},$r=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:e}of this._chatCompletions)e&&(t.completion_tokens+=e.completion_tokens,t.prompt_tokens+=e.prompt_tokens,t.total_tokens+=e.total_tokens);return t},gl=function(t){if(t.n!=null&&t.n>1)throw new V("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Ur=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Pi extends ml{static runFunctions(t,e,s){const n=new Pi,r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(t,e,r)),n}static runTools(t,e,s){const n=new Pi,r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(t,e,r)),n}_addMessage(t){super._addMessage(t),$e(t)&&t.content&&this._emit("content",t.content)}}var Dt=function(i,t,e,s){if(e==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?i!==t||!s:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?s:e==="a"?s.call(i):s?s.value:t.get(i)},xr=function(i,t,e,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?i!==t||!n:!t.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(i,e):n?n.value=e:t.set(i,e),e},Yt,he,Sr,_r,$i,Lo;class Ai extends ml{constructor(){super(...arguments),Yt.add(this),he.set(this,void 0)}get currentChatCompletionSnapshot(){return Dt(this,he,"f")}static fromReadableStream(t){const e=new Ai;return e._run(()=>e._fromReadableStream(t)),e}static createChatCompletion(t,e,s){const n=new Ai;return n._run(()=>n._runChatCompletion(t,{...e,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(t,e,s){var o;const n=s==null?void 0:s.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Dt(this,Yt,"m",Sr).call(this);const r=await t.create({...e,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const a of r)Dt(this,Yt,"m",_r).call(this,a);if((o=r.controller.signal)!=null&&o.aborted)throw new Rt;return this._addChatCompletion(Dt(this,Yt,"m",$i).call(this))}async _fromReadableStream(t,e){var o;const s=e==null?void 0:e.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Dt(this,Yt,"m",Sr).call(this),this._connected();const n=Zt.fromReadableStream(t,this.controller);let r;for await(const a of n)r&&r!==a.id&&this._addChatCompletion(Dt(this,Yt,"m",$i).call(this)),Dt(this,Yt,"m",_r).call(this,a),r=a.id;if((o=n.controller.signal)!=null&&o.aborted)throw new Rt;return this._addChatCompletion(Dt(this,Yt,"m",$i).call(this))}[(he=new WeakMap,Yt=new WeakSet,Sr=function(){this.ended||xr(this,he,void 0,"f")},_r=function(e){var o,a,l;if(this.ended)return;const s=Dt(this,Yt,"m",Lo).call(this,e);this._emit("chunk",e,s);const n=(a=(o=e.choices[0])==null?void 0:o.delta)==null?void 0:a.content,r=(l=s.choices[0])==null?void 0:l.message;n!=null&&(r==null?void 0:r.role)==="assistant"&&(r!=null&&r.content)&&this._emit("content",n,r.content)},$i=function(){if(this.ended)throw new V("stream has ended, this shouldn't happen");const e=Dt(this,he,"f");if(!e)throw new V("request ended without sending any chunks");return xr(this,he,void 0,"f"),Td(e)},Lo=function(e){var s,n,r;let o=Dt(this,he,"f");const{choices:a,...l}=e;o?Object.assign(o,l):o=xr(this,he,{...l,choices:[]},"f");for(const{delta:c,finish_reason:u,index:f,logprobs:w=null,...g}of e.choices){let v=o.choices[f];if(v||(v=o.choices[f]={finish_reason:u,index:f,message:{},logprobs:w,...g}),w)if(!v.logprobs)v.logprobs=Object.assign({},w);else{const{content:F,...G}=w;Object.assign(v.logprobs,G),F&&((s=v.logprobs).content??(s.content=[]),v.logprobs.content.push(...F))}if(u&&(v.finish_reason=u),Object.assign(v,g),!c)continue;const{content:P,function_call:T,role:B,tool_calls:j,...I}=c;if(Object.assign(v.message,I),P&&(v.message.content=(v.message.content||"")+P),B&&(v.message.role=B),T&&(v.message.function_call?(T.name&&(v.message.function_call.name=T.name),T.arguments&&((n=v.message.function_call).arguments??(n.arguments=""),v.message.function_call.arguments+=T.arguments)):v.message.function_call=T),j){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:F,id:G,type:L,function:U,...rt}of j){const J=(r=v.message.tool_calls)[F]??(r[F]={});Object.assign(J,rt),G&&(J.id=G),L&&(J.type=L),U&&(J.function??(J.function={arguments:""})),U!=null&&U.name&&(J.function.name=U.name),U!=null&&U.arguments&&(J.function.arguments+=U.arguments)}}}return o},Symbol.asyncIterator)](){const t=[],e=[];let s=!1;return this.on("chunk",n=>{const r=e.shift();r?r.resolve(n):t.push(n)}),this.on("end",()=>{s=!0;for(const n of e)n.resolve(void 0);e.length=0}),this.on("abort",n=>{s=!0;for(const r of e)r.reject(n);e.length=0}),this.on("error",n=>{s=!0;for(const r of e)r.reject(n);e.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,o)=>e.push({resolve:r,reject:o})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Zt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Td(i){const{id:t,choices:e,created:s,model:n,system_fingerprint:r,...o}=i;return{...o,id:t,choices:e.map(({message:a,finish_reason:l,index:c,logprobs:u,...f})=>{if(!l)throw new V(`missing finish_reason for choice ${c}`);const{content:w=null,function_call:g,tool_calls:v,...P}=a,T=a.role;if(!T)throw new V(`missing role for choice ${c}`);if(g){const{arguments:B,name:j}=g;if(B==null)throw new V(`missing function_call.arguments for choice ${c}`);if(!j)throw new V(`missing function_call.name for choice ${c}`);return{...f,message:{content:w,function_call:{arguments:B,name:j},role:T},finish_reason:l,index:c,logprobs:u}}return v?{...f,index:c,finish_reason:l,logprobs:u,message:{...P,role:T,content:w,tool_calls:v.map((B,j)=>{const{function:I,type:F,id:G,...L}=B,{arguments:U,name:rt,...J}=I||{};if(G==null)throw new V(`missing choices[${c}].tool_calls[${j}].id
${Gi(i)}`);if(F==null)throw new V(`missing choices[${c}].tool_calls[${j}].type
${Gi(i)}`);if(rt==null)throw new V(`missing choices[${c}].tool_calls[${j}].function.name
${Gi(i)}`);if(U==null)throw new V(`missing choices[${c}].tool_calls[${j}].function.arguments
${Gi(i)}`);return{...L,id:G,type:F,function:{...J,name:rt,arguments:U}}})}}:{...f,message:{...P,content:w,role:T},finish_reason:l,index:c,logprobs:u}}),created:s,model:n,object:"chat.completion",...r?{system_fingerprint:r}:{}}}function Gi(i){return JSON.stringify(i)}class Ge extends Ai{static fromReadableStream(t){const e=new Ge;return e._run(()=>e._fromReadableStream(t)),e}static runFunctions(t,e,s){const n=new Ge,r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(t,e,r)),n}static runTools(t,e,s){const n=new Ge,r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(t,e,r)),n}}let yl=class extends tt{runFunctions(t,e){return t.stream?Ge.runFunctions(this._client.chat.completions,t,e):Pi.runFunctions(this._client.chat.completions,t,e)}runTools(t,e){return t.stream?Ge.runTools(this._client.chat.completions,t,e):Pi.runTools(this._client.chat.completions,t,e)}stream(t,e){return Ai.createChatCompletion(this._client.chat.completions,t,e)}};class Es extends tt{constructor(){super(...arguments),this.completions=new yl(this._client)}}(function(i){i.Completions=yl})(Es||(Es={}));var Nt=function(i,t,e,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?i!==t||!n:!t.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(i,e):n?n.value=e:t.set(i,e),e},it=function(i,t,e,s){if(e==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?i!==t||!s:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?s:e==="a"?s.call(i):s?s.value:t.get(i)},ss,rs,hi,ci,ns,ui,re,di,os,as,De,Xr;class Bd{constructor(){this.controller=new AbortController,ss.set(this,void 0),rs.set(this,()=>{}),hi.set(this,()=>{}),ci.set(this,void 0),ns.set(this,()=>{}),ui.set(this,()=>{}),re.set(this,{}),di.set(this,!1),os.set(this,!1),as.set(this,!1),De.set(this,!1),Xr.set(this,t=>{if(Nt(this,os,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Rt),t instanceof Rt)return Nt(this,as,!0,"f"),this._emit("abort",t);if(t instanceof V)return this._emit("error",t);if(t instanceof Error){const e=new V(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new V(String(t)))}),Nt(this,ss,new Promise((t,e)=>{Nt(this,rs,t,"f"),Nt(this,hi,e,"f")}),"f"),Nt(this,ci,new Promise((t,e)=>{Nt(this,ns,t,"f"),Nt(this,ui,e,"f")}),"f"),it(this,ss,"f").catch(()=>{}),it(this,ci,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emit("end")},it(this,Xr,"f"))},0)}_addRun(t){return t}_connected(){this.ended||(it(this,rs,"f").call(this),this._emit("connect"))}get ended(){return it(this,di,"f")}get errored(){return it(this,os,"f")}get aborted(){return it(this,as,"f")}abort(){this.controller.abort()}on(t,e){return(it(this,re,"f")[t]||(it(this,re,"f")[t]=[])).push({listener:e}),this}off(t,e){const s=it(this,re,"f")[t];if(!s)return this;const n=s.findIndex(r=>r.listener===e);return n>=0&&s.splice(n,1),this}once(t,e){return(it(this,re,"f")[t]||(it(this,re,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise((e,s)=>{Nt(this,De,!0,"f"),t!=="error"&&this.once("error",s),this.once(t,e)})}async done(){Nt(this,De,!0,"f"),await it(this,ci,"f")}_emit(t,...e){if(it(this,di,"f"))return;t==="end"&&(Nt(this,di,!0,"f"),it(this,ns,"f").call(this));const s=it(this,re,"f")[t];if(s&&(it(this,re,"f")[t]=s.filter(n=>!n.once),s.forEach(({listener:n})=>n(...e))),t==="abort"){const n=e[0];!it(this,De,"f")&&!(s!=null&&s.length)&&Promise.reject(n),it(this,hi,"f").call(this,n),it(this,ui,"f").call(this,n),this._emit("end");return}if(t==="error"){const n=e[0];!it(this,De,"f")&&!(s!=null&&s.length)&&Promise.reject(n),it(this,hi,"f").call(this,n),it(this,ui,"f").call(this,n),this._emit("end")}}async _threadAssistantStream(t,e,s){return await this._createThreadAssistantStream(e,t,s)}async _runAssistantStream(t,e,s,n){return await this._createAssistantStream(e,t,s,n)}async _runToolAssistantStream(t,e,s,n,r){return await this._createToolAssistantStream(s,t,e,n,r)}async _createThreadAssistantStream(t,e,s){const n=s==null?void 0:s.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const r=await t.createAndRun({...e,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addRun(r)}async _createToolAssistantStream(t,e,s,n,r){const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a=await t.submitToolOutputs(e,s,{...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addRun(a)}async _createAssistantStream(t,e,s,n){const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const o=await t.create(e,{...s,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addRun(o)}}ss=new WeakMap,rs=new WeakMap,hi=new WeakMap,ci=new WeakMap,ns=new WeakMap,ui=new WeakMap,re=new WeakMap,di=new WeakMap,os=new WeakMap,as=new WeakMap,De=new WeakMap,Xr=new WeakMap;var A=function(i,t,e,s){if(e==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?i!==t||!s:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?s:e==="a"?s.call(i):s?s.value:t.get(i)},At=function(i,t,e,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?i!==t||!n:!t.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(i,e):n?n.value=e:t.set(i,e),e},ht,Yr,Kt,ls,Ht,Se,Ne,Ce,Ps,Mt,hs,cs,wi,fi,pi,Io,Oo,Do,No,Fo,Wo,Ho;class zt extends Bd{constructor(){super(...arguments),ht.add(this),Yr.set(this,[]),Kt.set(this,{}),ls.set(this,{}),Ht.set(this,void 0),Se.set(this,void 0),Ne.set(this,void 0),Ce.set(this,void 0),Ps.set(this,void 0),Mt.set(this,void 0),hs.set(this,void 0),cs.set(this,void 0),wi.set(this,void 0)}[(Yr=new WeakMap,Kt=new WeakMap,ls=new WeakMap,Ht=new WeakMap,Se=new WeakMap,Ne=new WeakMap,Ce=new WeakMap,Ps=new WeakMap,Mt=new WeakMap,hs=new WeakMap,cs=new WeakMap,wi=new WeakMap,ht=new WeakSet,Symbol.asyncIterator)](){const t=[],e=[];let s=!1;return this.on("event",n=>{const r=e.shift();r?r.resolve(n):t.push(n)}),this.on("end",()=>{s=!0;for(const n of e)n.resolve(void 0);e.length=0}),this.on("abort",n=>{s=!0;for(const r of e)r.reject(n);e.length=0}),this.on("error",n=>{s=!0;for(const r of e)r.reject(n);e.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,o)=>e.push({resolve:r,reject:o})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const e=new zt;return e._run(()=>e._fromReadableStream(t)),e}async _fromReadableStream(t,e){var r;const s=e==null?void 0:e.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const n=Zt.fromReadableStream(t,this.controller);for await(const o of n)A(this,ht,"m",fi).call(this,o);if((r=n.controller.signal)!=null&&r.aborted)throw new Rt;return this._addRun(A(this,ht,"m",pi).call(this))}toReadableStream(){return new Zt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,e,s,n,r){const o=new zt;return o._run(()=>o._runToolAssistantStream(t,e,s,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(t,e,s,n,r){var c;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await t.submitToolOutputs(e,s,a,{...r,signal:this.controller.signal});this._connected();for await(const u of l)A(this,ht,"m",fi).call(this,u);if((c=l.controller.signal)!=null&&c.aborted)throw new Rt;return this._addRun(A(this,ht,"m",pi).call(this))}static createThreadAssistantStream(t,e,s){const n=new zt;return n._run(()=>n._threadAssistantStream(t,e,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(t,e,s,n){const r=new zt;return r._run(()=>r._runAssistantStream(t,e,s,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}currentEvent(){return A(this,hs,"f")}currentRun(){return A(this,cs,"f")}currentMessageSnapshot(){return A(this,Ht,"f")}currentRunStepSnapshot(){return A(this,wi,"f")}async finalRunSteps(){return await this.done(),Object.values(A(this,Kt,"f"))}async finalMessages(){return await this.done(),Object.values(A(this,ls,"f"))}async finalRun(){if(await this.done(),!A(this,Se,"f"))throw Error("Final run was not received.");return A(this,Se,"f")}async _createThreadAssistantStream(t,e,s){var a;const n=s==null?void 0:s.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const r={...e,stream:!0},o=await t.createAndRun(r,{...s,signal:this.controller.signal});this._connected();for await(const l of o)A(this,ht,"m",fi).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new Rt;return this._addRun(A(this,ht,"m",pi).call(this))}async _createAssistantStream(t,e,s,n){var l;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},a=await t.create(e,o,{...n,signal:this.controller.signal});this._connected();for await(const c of a)A(this,ht,"m",fi).call(this,c);if((l=a.controller.signal)!=null&&l.aborted)throw new Rt;return this._addRun(A(this,ht,"m",pi).call(this))}static accumulateDelta(t,e){for(const[s,n]of Object.entries(e)){if(!t.hasOwnProperty(s)){t[s]=n;continue}let r=t[s];if(r==null){t[s]=n;continue}if(s==="index"||s==="type"){t[s]=n;continue}if(typeof r=="string"&&typeof n=="string")r+=n;else if(typeof r=="number"&&typeof n=="number")r+=n;else if(To(r)&&To(n))r=this.accumulateDelta(r,n);else if(Array.isArray(r)&&Array.isArray(n)){if(r.every(o=>typeof o=="string"||typeof o=="number")){r.push(...n);continue}}else throw Error(`Unhandled record type: ${s}, deltaValue: ${n}, accValue: ${r}`);t[s]=r}return t}}fi=function(t){if(!this.ended)switch(At(this,hs,t,"f"),A(this,ht,"m",Do).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":A(this,ht,"m",Ho).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":A(this,ht,"m",Oo).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":A(this,ht,"m",Io).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},pi=function(){if(this.ended)throw new V("stream has ended, this shouldn't happen");if(!A(this,Se,"f"))throw Error("Final run has not been received");return A(this,Se,"f")},Io=function(t){const[e,s]=A(this,ht,"m",Fo).call(this,t,A(this,Ht,"f"));At(this,Ht,e,"f"),A(this,ls,"f")[e.id]=e;for(const n of s){const r=e.content[n.index];(r==null?void 0:r.type)=="text"&&this._emit("textCreated",r.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,e),t.data.delta.content)for(const n of t.data.delta.content){if(n.type=="text"&&n.text){let r=n.text,o=e.content[n.index];if(o&&o.type=="text")this._emit("textDelta",r,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(n.index!=A(this,Ne,"f")){if(A(this,Ce,"f"))switch(A(this,Ce,"f").type){case"text":this._emit("textDone",A(this,Ce,"f").text,A(this,Ht,"f"));break;case"image_file":this._emit("imageFileDone",A(this,Ce,"f").image_file,A(this,Ht,"f"));break}At(this,Ne,n.index,"f")}At(this,Ce,e.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(A(this,Ne,"f")!==void 0){const n=t.data.content[A(this,Ne,"f")];if(n)switch(n.type){case"image_file":this._emit("imageFileDone",n.image_file,A(this,Ht,"f"));break;case"text":this._emit("textDone",n.text,A(this,Ht,"f"));break}}A(this,Ht,"f")&&this._emit("messageDone",t.data),At(this,Ht,void 0,"f")}},Oo=function(t){const e=A(this,ht,"m",No).call(this,t);switch(At(this,wi,e,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const s=t.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&e.step_details.type=="tool_calls")for(const r of s.step_details.tool_calls)r.index==A(this,Ps,"f")?this._emit("toolCallDelta",r,e.step_details.tool_calls[r.index]):(A(this,Mt,"f")&&this._emit("toolCallDone",A(this,Mt,"f")),At(this,Ps,r.index,"f"),At(this,Mt,e.step_details.tool_calls[r.index],"f"),A(this,Mt,"f")&&this._emit("toolCallCreated",A(this,Mt,"f")));this._emit("runStepDelta",t.data.delta,e);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":At(this,wi,void 0,"f"),t.data.step_details.type=="tool_calls"&&A(this,Mt,"f")&&(this._emit("toolCallDone",A(this,Mt,"f")),At(this,Mt,void 0,"f")),this._emit("runStepDone",t.data,e);break}},Do=function(t){A(this,Yr,"f").push(t),this._emit("event",t)},No=function(t){switch(t.event){case"thread.run.step.created":return A(this,Kt,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let e=A(this,Kt,"f")[t.data.id];if(!e)throw Error("Received a RunStepDelta before creation of a snapshot");let s=t.data;if(s.delta){const n=zt.accumulateDelta(e,s.delta);A(this,Kt,"f")[t.data.id]=n}return A(this,Kt,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":A(this,Kt,"f")[t.data.id]=t.data;break}if(A(this,Kt,"f")[t.data.id])return A(this,Kt,"f")[t.data.id];throw new Error("No snapshot available")},Fo=function(t,e){let s=[];switch(t.event){case"thread.message.created":return[t.data,s];case"thread.message.delta":if(!e)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=t.data;if(n.delta.content)for(const r of n.delta.content)if(r.index in e.content){let o=e.content[r.index];e.content[r.index]=A(this,ht,"m",Wo).call(this,r,o)}else e.content[r.index]=r,s.push(r);return[e,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(e)return[e,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Wo=function(t,e){return zt.accumulateDelta(e,t)},Ho=function(t){switch(At(this,cs,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":At(this,Se,t.data,"f"),A(this,Mt,"f")&&(this._emit("toolCallDone",A(this,Mt,"f")),At(this,Mt,void 0,"f"));break}};let As=class extends tt{retrieve(t,e,s,n){return this._client.get(`/threads/${t}/messages/${e}/files/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,e,s={},n){return te(s)?this.list(t,e,{},s):this._client.getAPIList(`/threads/${t}/messages/${e}/files`,Sn,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}};class Sn extends ae{}(function(i){i.MessageFilesPage=Sn})(As||(As={}));class Ms extends tt{constructor(){super(...arguments),this.files=new As(this._client)}create(t,e,s){return this._client.post(`/threads/${t}/messages`,{body:e,...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}retrieve(t,e,s){return this._client.get(`/threads/${t}/messages/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}update(t,e,s,n){return this._client.post(`/threads/${t}/messages/${e}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,e={},s){return te(e)?this.list(t,{},e):this._client.getAPIList(`/threads/${t}/messages`,_n,{query:e,...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}}class _n extends ae{}(function(i){i.MessagesPage=_n,i.Files=As,i.MessageFilesPage=Sn})(Ms||(Ms={}));class Ts extends tt{retrieve(t,e,s,n){return this._client.get(`/threads/${t}/runs/${e}/steps/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,e,s={},n){return te(s)?this.list(t,e,{},s):this._client.getAPIList(`/threads/${t}/runs/${e}/steps`,kn,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}class kn extends ae{}(function(i){i.RunStepsPage=kn})(Ts||(Ts={}));class Bs extends tt{constructor(){super(...arguments),this.steps=new Ts(this._client)}create(t,e,s){return this._client.post(`/threads/${t}/runs`,{body:e,...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers},stream:e.stream??!1})}retrieve(t,e,s){return this._client.get(`/threads/${t}/runs/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}update(t,e,s,n){return this._client.post(`/threads/${t}/runs/${e}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,e={},s){return te(e)?this.list(t,{},e):this._client.getAPIList(`/threads/${t}/runs`,En,{query:e,...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}cancel(t,e,s){return this._client.post(`/threads/${t}/runs/${e}/cancel`,{...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}async createAndPoll(t,e,s){const n=await this.create(t,e,s);return await this.poll(t,n.id,s)}createAndStream(t,e,s){return zt.createAssistantStream(t,this._client.beta.threads.runs,e,s)}async poll(t,e,s){const n={...s==null?void 0:s.headers,"X-Stainless-Poll-Helper":"true"};for(s!=null&&s.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=s.pollIntervalMs.toString());;){const{data:r,response:o}=await this.retrieve(t,e,{...s,headers:{...s==null?void 0:s.headers,...n}}).withResponse();switch(r.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(s!=null&&s.pollIntervalMs)a=s.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(a=c)}}await bn(a);break;case"requires_action":case"cancelled":case"completed":case"failed":case"expired":return r}}}stream(t,e,s){return zt.createAssistantStream(t,this._client.beta.threads.runs,e,s)}submitToolOutputs(t,e,s,n){return this._client.post(`/threads/${t}/runs/${e}/submit_tool_outputs`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers},stream:s.stream??!1})}async submitToolOutputsAndPoll(t,e,s,n){const r=await this.submitToolOutputs(t,e,s,n);return await this.poll(t,r.id,n)}submitToolOutputsStream(t,e,s,n){return zt.createToolAssistantStream(t,e,this._client.beta.threads.runs,s,n)}}class En extends ae{}(function(i){i.RunsPage=En,i.Steps=Ts,i.RunStepsPage=kn})(Bs||(Bs={}));class Rs extends tt{constructor(){super(...arguments),this.runs=new Bs(this._client),this.messages=new Ms(this._client)}create(t={},e){return te(t)?this.create({},t):this._client.post("/threads",{body:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}retrieve(t,e){return this._client.get(`/threads/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}update(t,e,s){return this._client.post(`/threads/${t}`,{body:e,...s,headers:{"OpenAI-Beta":"assistants=v1",...s==null?void 0:s.headers}})}del(t,e){return this._client.delete(`/threads/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}createAndRun(t,e){return this._client.post("/threads/runs",{body:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers},stream:t.stream??!1})}async createAndRunPoll(t,e){const s=await this.createAndRun(t,e);return await this.runs.poll(s.thread_id,s.id,e)}createAndRunStream(t,e){return zt.createThreadAssistantStream(t,this._client.beta.threads,e)}}(function(i){i.Runs=Bs,i.RunsPage=En,i.Messages=Ms,i.MessagesPage=_n})(Rs||(Rs={}));class Ls extends tt{constructor(){super(...arguments),this.chat=new Es(this._client),this.assistants=new _s(this._client),this.threads=new Rs(this._client)}}(function(i){i.Chat=Es,i.Assistants=_s,i.AssistantsPage=xn,i.Threads=Rs})(Ls||(Ls={}));class Is extends tt{create(t,e){return this._client.post("/completions",{body:t,...e,stream:t.stream??!1})}}Is||(Is={});class Os extends tt{create(t,e){return this._client.post("/embeddings",{body:t,...e})}}Os||(Os={});class Ds extends tt{create(t,e){return this._client.post("/files",Ei({body:t,...e}))}retrieve(t,e){return this._client.get(`/files/${t}`,e)}list(t={},e){return te(t)?this.list({},t):this._client.getAPIList("/files",Pn,{query:t,...e})}del(t,e){return this._client.delete(`/files/${t}`,e)}content(t,e){return this._client.get(`/files/${t}/content`,{...e,__binaryResponse:!0})}retrieveContent(t,e){return this._client.get(`/files/${t}/content`,{...e,headers:{Accept:"application/json",...e==null?void 0:e.headers}})}async waitForProcessing(t,{pollInterval:e=5e3,maxWait:s=30*60*1e3}={}){const n=new Set(["processed","error","deleted"]),r=Date.now();let o=await this.retrieve(t);for(;!o.status||!n.has(o.status);)if(await bn(e),o=await this.retrieve(t),Date.now()-r>s)throw new vn({message:`Giving up on waiting for file ${t} to finish processing after ${s} milliseconds.`});return o}}class Pn extends wn{}(function(i){i.FileObjectsPage=Pn})(Ds||(Ds={}));class Ns extends tt{create(t,e){return this._client.post("/fine_tuning/jobs",{body:t,...e})}retrieve(t,e){return this._client.get(`/fine_tuning/jobs/${t}`,e)}list(t={},e){return te(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",An,{query:t,...e})}cancel(t,e){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,e)}listEvents(t,e={},s){return te(e)?this.listEvents(t,{},e):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,Mn,{query:e,...s})}}class An extends ae{}class Mn extends ae{}(function(i){i.FineTuningJobsPage=An,i.FineTuningJobEventsPage=Mn})(Ns||(Ns={}));class Fs extends tt{constructor(){super(...arguments),this.jobs=new Ns(this._client)}}(function(i){i.Jobs=Ns,i.FineTuningJobsPage=An,i.FineTuningJobEventsPage=Mn})(Fs||(Fs={}));class Ws extends tt{createVariation(t,e){return this._client.post("/images/variations",Ei({body:t,...e}))}edit(t,e){return this._client.post("/images/edits",Ei({body:t,...e}))}generate(t,e){return this._client.post("/images/generations",{body:t,...e})}}Ws||(Ws={});class Hs extends tt{retrieve(t,e){return this._client.get(`/models/${t}`,e)}list(t){return this._client.getAPIList("/models",Tn,t)}del(t,e){return this._client.delete(`/models/${t}`,e)}}class Tn extends wn{}(function(i){i.ModelsPage=Tn})(Hs||(Hs={}));class js extends tt{create(t,e){return this._client.post("/moderations",{body:t,...e})}}js||(js={});var vl;class lt extends vd{constructor({baseURL:t=Cr("OPENAI_BASE_URL"),apiKey:e=Cr("OPENAI_API_KEY"),organization:s=Cr("OPENAI_ORG_ID")??null,...n}={}){if(e===void 0)throw new V("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const r={apiKey:e,organization:s,...n,baseURL:t||"https://api.openai.com/v1"};if(!r.dangerouslyAllowBrowser&&Md())throw new V(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:r.baseURL,timeout:r.timeout??6e5,httpAgent:r.httpAgent,maxRetries:r.maxRetries,fetch:r.fetch}),this.completions=new Is(this),this.chat=new vs(this),this.embeddings=new Os(this),this.files=new Ds(this),this.images=new Ws(this),this.audio=new xs(this),this.moderations=new js(this),this.models=new Hs(this),this.fineTuning=new Fs(this),this.beta=new Ls(this),this._options=r,this.apiKey=e,this.organization=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}vl=lt;lt.OpenAI=vl;lt.OpenAIError=V;lt.APIError=ut;lt.APIConnectionError=er;lt.APIConnectionTimeoutError=vn;lt.APIUserAbortError=Rt;lt.NotFoundError=Qa;lt.ConflictError=tl;lt.RateLimitError=il;lt.BadRequestError=qa;lt.AuthenticationError=Ja;lt.InternalServerError=sl;lt.PermissionDeniedError=Za;lt.UnprocessableEntityError=el;(function(i){i.toFile=ll,i.fileFromPath=Ya,i.Page=wn,i.CursorPage=ae,i.Completions=Is,i.Chat=vs,i.Embeddings=Os,i.Files=Ds,i.FileObjectsPage=Pn,i.Images=Ws,i.Audio=xs,i.Moderations=js,i.Models=Hs,i.ModelsPage=Tn,i.FineTuning=Fs,i.Beta=Ls})(lt||(lt={}));const Rd=lt,Ld="/StickerEditor/assets/Loading-Blt9h-Iq.gif",Id={class:"px-20 py-10"},Od=Y("p",{class:"text-xl font-bold"},"Prompt",-1),Dd=["disabled"],Nd={key:0,class:"flex items-center justify-center mt-5"},Fd=["src"],Wd=["src"],Hd={__name:"Generate",setup(i){const t=new Rd({organization:"org-XXygSipTZ0fjqKM619BA11Cp",apiKey:"",dangerouslyAllowBrowser:!0});let e=Tt(null),s=Tt(""),n=Tt(""),r=Tt(!1);const o=async()=>{if(!r.value)try{r.value=!0,e.value=await t.images.generate({model:"dall-e-3",prompt:s.value,n:1,size:"1024x1024"}),n.value=e.value.data[0].url,console.log(n.value)}catch(a){console.error("Error generating image:",a)}finally{r.value=!1}};return(a,l)=>(ct(),gt("main",Id,[Od,kh(Y("textarea",{"onUpdate:modelValue":l[0]||(l[0]=c=>yt(s)?s.value=c:s=c),class:"border-2 border-black px-5 py-2 w-[600px] h-[200px]",maxlength:"1000",placeholder:"Enter your prompt (max 1000 words)"},null,512),[[jc,ft(s)]]),Y("button",{onClick:o,disabled:ft(r),class:"border-2 border-black px-5 py-2 bg-black text-white font-bold",type:"button"},Fn(ft(r)?"Loading...":"Generate"),9,Dd),Y("p",null,"Image-url: "+Fn(ft(n)),1),ft(r)?(ct(),gt("div",Nd,[Y("img",{src:ft(Ld),alt:"Loading..."},null,8,Fd)])):ft(n)?(ct(),gt("img",{key:1,class:"w-[1024px] h-[1024px] border border-black mt-5",src:ft(n),alt:"Generated Image"},null,8,Wd)):ac("",!0)]))}},jd={class:"m-0 p-0 box-border min-w-[1440px] min-h-screen overflow-hidden mx-auto"},Vd={__name:"App",setup(i){return(t,e)=>(ct(),gt(xt,null,[Y("main",jd,[St(ed)]),St(Hd,{class:"hidden"})],64))}};$c(Vd).mount("#app");
