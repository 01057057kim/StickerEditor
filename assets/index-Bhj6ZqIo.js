(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jl(e,t){const r=new Set(e.split(","));return i=>r.has(i)}const Bt={},_i=[],Ie=()=>{},Xv=()=>!1,Na=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),$l=e=>e.startsWith("onUpdate:"),ie=Object.assign,Xl=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Uv=Object.prototype.hasOwnProperty,Et=(e,t)=>Uv.call(e,t),bt=Array.isArray,Ei=e=>Ga(e)==="[object Map]",lf=e=>Ga(e)==="[object Set]",St=e=>typeof e=="function",Jt=e=>typeof e=="string",Vi=e=>typeof e=="symbol",Gt=e=>e!==null&&typeof e=="object",uf=e=>(Gt(e)||St(e))&&St(e.then)&&St(e.catch),cf=Object.prototype.toString,Ga=e=>cf.call(e),Yv=e=>Ga(e).slice(8,-1),hf=e=>Ga(e)==="[object Object]",Ul=e=>Jt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,gn=jl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wa=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},qv=/-(\w)/g,Oi=Wa(e=>e.replace(qv,(t,r)=>r?r.toUpperCase():"")),Kv=/\B([A-Z])/g,ji=Wa(e=>e.replace(Kv,"-$1").toLowerCase()),ff=Wa(e=>e.charAt(0).toUpperCase()+e.slice(1)),vo=Wa(e=>e?`on${ff(e)}`:""),Lr=(e,t)=>!Object.is(e,t),Ps=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},qs=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Uo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let hc;const df=()=>hc||(hc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ha(e){if(bt(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=Jt(i)?tg(i):Ha(i);if(n)for(const s in n)t[s]=n[s]}return t}else if(Jt(e)||Gt(e))return e}const Jv=/;(?![^(]*\))/g,Zv=/:([^]+)/,Qv=/\/\*[^]*?\*\//g;function tg(e){const t={};return e.replace(Qv,"").split(Jv).forEach(r=>{if(r){const i=r.split(Zv);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Yl(e){let t="";if(Jt(e))t=e;else if(bt(e))for(let r=0;r<e.length;r++){const i=Yl(e[r]);i&&(t+=i+" ")}else if(Gt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const eg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rg=jl(eg);function pf(e){return!!e||e===""}const fc=e=>Jt(e)?e:e==null?"":bt(e)||Gt(e)&&(e.toString===cf||!St(e.toString))?JSON.stringify(e,vf,2):String(e),vf=(e,t)=>t&&t.__v_isRef?vf(e,t.value):Ei(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n],s)=>(r[go(i,s)+" =>"]=n,r),{})}:lf(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>go(r))}:Vi(t)?go(t):Gt(t)&&!bt(t)&&!hf(t)?String(t):t,go=(e,t="")=>{var r;return Vi(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let He;class ig{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=He,!t&&He&&(this.index=(He.scopes||(He.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=He;try{return He=this,t()}finally{He=r}}}on(){He=this}off(){He=this.parent}stop(t){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function ng(e,t=He){t&&t.active&&t.effects.push(e)}function sg(){return He}let Zr;class ql{constructor(t,r,i,n){this.fn=t,this.trigger=r,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,ng(this,n)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ai();for(let t=0;t<this._depsLength;t++){const r=this.deps[t];if(r.computed&&(ag(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),oi()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Or,r=Zr;try{return Or=!0,Zr=this,this._runnings++,dc(this),this.fn()}finally{pc(this),this._runnings--,Zr=r,Or=t}}stop(){var t;this.active&&(dc(this),pc(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function ag(e){return e.value}function dc(e){e._trackId++,e._depsLength=0}function pc(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)gf(e.deps[t],e);e.deps.length=e._depsLength}}function gf(e,t){const r=e.get(t);r!==void 0&&t._trackId!==r&&(e.delete(t),e.size===0&&e.cleanup())}let Or=!0,Yo=0;const mf=[];function ai(){mf.push(Or),Or=!1}function oi(){const e=mf.pop();Or=e===void 0?!0:e}function Kl(){Yo++}function Jl(){for(Yo--;!Yo&&qo.length;)qo.shift()()}function yf(e,t,r){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const i=e.deps[e._depsLength];i!==t?(i&&gf(i,e),e.deps[e._depsLength++]=t):e._depsLength++}}const qo=[];function bf(e,t,r){Kl();for(const i of e.keys()){let n;i._dirtyLevel<t&&(n??(n=e.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=t),i._shouldSchedule&&(n??(n=e.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&qo.push(i.scheduler)))}Jl()}const xf=(e,t)=>{const r=new Map;return r.cleanup=e,r.computed=t,r},Ko=new WeakMap,Qr=Symbol(""),Jo=Symbol("");function _e(e,t,r){if(Or&&Zr){let i=Ko.get(e);i||Ko.set(e,i=new Map);let n=i.get(r);n||i.set(r,n=xf(()=>i.delete(r))),yf(Zr,n)}}function gr(e,t,r,i,n,s){const a=Ko.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(r==="length"&&bt(e)){const l=Number(i);a.forEach((u,c)=>{(c==="length"||!Vi(c)&&c>=l)&&o.push(u)})}else switch(r!==void 0&&o.push(a.get(r)),t){case"add":bt(e)?Ul(r)&&o.push(a.get("length")):(o.push(a.get(Qr)),Ei(e)&&o.push(a.get(Jo)));break;case"delete":bt(e)||(o.push(a.get(Qr)),Ei(e)&&o.push(a.get(Jo)));break;case"set":Ei(e)&&o.push(a.get(Qr));break}Kl();for(const l of o)l&&bf(l,4);Jl()}const og=jl("__proto__,__v_isRef,__isVue"),Sf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Vi)),vc=lg();function lg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const i=Dt(this);for(let s=0,a=this.length;s<a;s++)_e(i,"get",s+"");const n=i[t](...r);return n===-1||n===!1?i[t](...r.map(Dt)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){ai(),Kl();const i=Dt(this)[t].apply(this,r);return Jl(),oi(),i}}),e}function ug(e){const t=Dt(this);return _e(t,"has",e),t.hasOwnProperty(e)}class Cf{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,i){const n=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return s;if(r==="__v_raw")return i===(n?s?Cg:kf:s?Ef:_f).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const a=bt(t);if(!n){if(a&&Et(vc,r))return Reflect.get(vc,r,i);if(r==="hasOwnProperty")return ug}const o=Reflect.get(t,r,i);return(Vi(r)?Sf.has(r):og(r))||(n||_e(t,"get",r),s)?o:le(o)?a&&Ul(r)?o:o.value:Gt(o)?n?Mf(o):tu(o):o}}class wf extends Cf{constructor(t=!1){super(!1,t)}set(t,r,i,n){let s=t[r];if(!this._isShallow){const l=Bi(s);if(!Ks(i)&&!Bi(i)&&(s=Dt(s),i=Dt(i)),!bt(t)&&le(s)&&!le(i))return l?!1:(s.value=i,!0)}const a=bt(t)&&Ul(r)?Number(r)<t.length:Et(t,r),o=Reflect.set(t,r,i,n);return t===Dt(n)&&(a?Lr(i,s)&&gr(t,"set",r,i):gr(t,"add",r,i)),o}deleteProperty(t,r){const i=Et(t,r);t[r];const n=Reflect.deleteProperty(t,r);return n&&i&&gr(t,"delete",r,void 0),n}has(t,r){const i=Reflect.has(t,r);return(!Vi(r)||!Sf.has(r))&&_e(t,"has",r),i}ownKeys(t){return _e(t,"iterate",bt(t)?"length":Qr),Reflect.ownKeys(t)}}class cg extends Cf{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const hg=new wf,fg=new cg,dg=new wf(!0),Zl=e=>e,Va=e=>Reflect.getPrototypeOf(e);function ns(e,t,r=!1,i=!1){e=e.__v_raw;const n=Dt(e),s=Dt(t);r||(Lr(t,s)&&_e(n,"get",t),_e(n,"get",s));const{has:a}=Va(n),o=i?Zl:r?ru:Pn;if(a.call(n,t))return o(e.get(t));if(a.call(n,s))return o(e.get(s));e!==n&&e.get(t)}function ss(e,t=!1){const r=this.__v_raw,i=Dt(r),n=Dt(e);return t||(Lr(e,n)&&_e(i,"has",e),_e(i,"has",n)),e===n?r.has(e):r.has(e)||r.has(n)}function as(e,t=!1){return e=e.__v_raw,!t&&_e(Dt(e),"iterate",Qr),Reflect.get(e,"size",e)}function gc(e){e=Dt(e);const t=Dt(this);return Va(t).has.call(t,e)||(t.add(e),gr(t,"add",e,e)),this}function mc(e,t){t=Dt(t);const r=Dt(this),{has:i,get:n}=Va(r);let s=i.call(r,e);s||(e=Dt(e),s=i.call(r,e));const a=n.call(r,e);return r.set(e,t),s?Lr(t,a)&&gr(r,"set",e,t):gr(r,"add",e,t),this}function yc(e){const t=Dt(this),{has:r,get:i}=Va(t);let n=r.call(t,e);n||(e=Dt(e),n=r.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return n&&gr(t,"delete",e,void 0),s}function bc(){const e=Dt(this),t=e.size!==0,r=e.clear();return t&&gr(e,"clear",void 0,void 0),r}function os(e,t){return function(i,n){const s=this,a=s.__v_raw,o=Dt(a),l=t?Zl:e?ru:Pn;return!e&&_e(o,"iterate",Qr),a.forEach((u,c)=>i.call(n,l(u),l(c),s))}}function ls(e,t,r){return function(...i){const n=this.__v_raw,s=Dt(n),a=Ei(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=n[e](...i),c=r?Zl:t?ru:Pn;return!t&&_e(s,"iterate",l?Jo:Qr),{next(){const{value:h,done:f}=u.next();return f?{value:h,done:f}:{value:o?[c(h[0]),c(h[1])]:c(h),done:f}},[Symbol.iterator](){return this}}}}function Er(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function pg(){const e={get(s){return ns(this,s)},get size(){return as(this)},has:ss,add:gc,set:mc,delete:yc,clear:bc,forEach:os(!1,!1)},t={get(s){return ns(this,s,!1,!0)},get size(){return as(this)},has:ss,add:gc,set:mc,delete:yc,clear:bc,forEach:os(!1,!0)},r={get(s){return ns(this,s,!0)},get size(){return as(this,!0)},has(s){return ss.call(this,s,!0)},add:Er("add"),set:Er("set"),delete:Er("delete"),clear:Er("clear"),forEach:os(!0,!1)},i={get(s){return ns(this,s,!0,!0)},get size(){return as(this,!0)},has(s){return ss.call(this,s,!0)},add:Er("add"),set:Er("set"),delete:Er("delete"),clear:Er("clear"),forEach:os(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=ls(s,!1,!1),r[s]=ls(s,!0,!1),t[s]=ls(s,!1,!0),i[s]=ls(s,!0,!0)}),[e,r,t,i]}const[vg,gg,mg,yg]=pg();function Ql(e,t){const r=t?e?yg:mg:e?gg:vg;return(i,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(Et(r,n)&&n in i?r:i,n,s)}const bg={get:Ql(!1,!1)},xg={get:Ql(!1,!0)},Sg={get:Ql(!0,!1)},_f=new WeakMap,Ef=new WeakMap,kf=new WeakMap,Cg=new WeakMap;function wg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _g(e){return e.__v_skip||!Object.isExtensible(e)?0:wg(Yv(e))}function tu(e){return Bi(e)?e:eu(e,!1,hg,bg,_f)}function Eg(e){return eu(e,!1,dg,xg,Ef)}function Mf(e){return eu(e,!0,fg,Sg,kf)}function eu(e,t,r,i,n){if(!Gt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const a=_g(e);if(a===0)return e;const o=new Proxy(e,a===2?i:r);return n.set(e,o),o}function ki(e){return Bi(e)?ki(e.__v_raw):!!(e&&e.__v_isReactive)}function Bi(e){return!!(e&&e.__v_isReadonly)}function Ks(e){return!!(e&&e.__v_isShallow)}function Pf(e){return ki(e)||Bi(e)}function Dt(e){const t=e&&e.__v_raw;return t?Dt(t):e}function Df(e){return Object.isExtensible(e)&&qs(e,"__v_skip",!0),e}const Pn=e=>Gt(e)?tu(e):e,ru=e=>Gt(e)?Mf(e):e;class Tf{constructor(t,r,i,n){this.getter=t,this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ql(()=>t(this._value),()=>Ds(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const t=Dt(this);return(!t._cacheable||t.effect.dirty)&&Lr(t._value,t._value=t.effect.run())&&Ds(t,4),Rf(t),t.effect._dirtyLevel>=2&&Ds(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function kg(e,t,r=!1){let i,n;const s=St(e);return s?(i=e,n=Ie):(i=e.get,n=e.set),new Tf(i,n,s||!n,r)}function Rf(e){var t;Or&&Zr&&(e=Dt(e),yf(Zr,(t=e.dep)!=null?t:e.dep=xf(()=>e.dep=void 0,e instanceof Tf?e:void 0)))}function Ds(e,t=4,r){e=Dt(e);const i=e.dep;i&&bf(i,t)}function le(e){return!!(e&&e.__v_isRef===!0)}function Se(e){return Mg(e,!1)}function Mg(e,t){return le(e)?e:new Pg(e,t)}class Pg{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Dt(t),this._value=r?t:Pn(t)}get value(){return Rf(this),this._value}set value(t){const r=this.__v_isShallow||Ks(t)||Bi(t);t=r?t:Dt(t),Lr(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:Pn(t),Ds(this,4))}}function ee(e){return le(e)?e.value:e}const Dg={get:(e,t,r)=>ee(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return le(n)&&!le(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function Af(e){return ki(e)?e:new Proxy(e,Dg)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Br(e,t,r,i){try{return i?e(...i):e()}catch(n){ja(n,t,r)}}function qe(e,t,r,i){if(St(e)){const s=Br(e,t,r,i);return s&&uf(s)&&s.catch(a=>{ja(a,t,r)}),s}const n=[];for(let s=0;s<e.length;s++)n.push(qe(e[s],t,r,i));return n}function ja(e,t,r,i=!0){const n=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${r}`;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,o)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Br(l,null,10,[e,a,o]);return}}Tg(e,r,n,i)}function Tg(e,t,r,i=!0){console.error(e)}let Dn=!1,Zo=!1;const oe=[];let sr=0;const Mi=[];let Pr=null,Vr=0;const Of=Promise.resolve();let iu=null;function Bf(e){const t=iu||Of;return e?t.then(this?e.bind(this):e):t}function Rg(e){let t=sr+1,r=oe.length;for(;t<r;){const i=t+r>>>1,n=oe[i],s=Tn(n);s<e||s===e&&n.pre?t=i+1:r=i}return t}function nu(e){(!oe.length||!oe.includes(e,Dn&&e.allowRecurse?sr+1:sr))&&(e.id==null?oe.push(e):oe.splice(Rg(e.id),0,e),If())}function If(){!Dn&&!Zo&&(Zo=!0,iu=Of.then(Ff))}function Ag(e){const t=oe.indexOf(e);t>sr&&oe.splice(t,1)}function Og(e){bt(e)?Mi.push(...e):(!Pr||!Pr.includes(e,e.allowRecurse?Vr+1:Vr))&&Mi.push(e),If()}function xc(e,t,r=Dn?sr+1:0){for(;r<oe.length;r++){const i=oe[r];if(i&&i.pre){if(e&&i.id!==e.uid)continue;oe.splice(r,1),r--,i()}}}function Lf(e){if(Mi.length){const t=[...new Set(Mi)].sort((r,i)=>Tn(r)-Tn(i));if(Mi.length=0,Pr){Pr.push(...t);return}for(Pr=t,Vr=0;Vr<Pr.length;Vr++)Pr[Vr]();Pr=null,Vr=0}}const Tn=e=>e.id==null?1/0:e.id,Bg=(e,t)=>{const r=Tn(e)-Tn(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function Ff(e){Zo=!1,Dn=!0,oe.sort(Bg);try{for(sr=0;sr<oe.length;sr++){const t=oe[sr];t&&t.active!==!1&&Br(t,null,14)}}finally{sr=0,oe.length=0,Lf(),Dn=!1,iu=null,(oe.length||Mi.length)&&Ff()}}function Ig(e,t,...r){if(e.isUnmounted)return;const i=e.vnode.props||Bt;let n=r;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in i){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:h,trim:f}=i[c]||Bt;f&&(n=r.map(d=>Jt(d)?d.trim():d)),h&&(n=r.map(Uo))}let o,l=i[o=vo(t)]||i[o=vo(Oi(t))];!l&&s&&(l=i[o=vo(ji(t))]),l&&qe(l,e,6,n);const u=i[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,qe(u,e,6,n)}}function zf(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const s=e.emits;let a={},o=!1;if(!St(e)){const l=u=>{const c=zf(u,t,!0);c&&(o=!0,ie(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(Gt(e)&&i.set(e,null),null):(bt(s)?s.forEach(l=>a[l]=null):ie(a,s),Gt(e)&&i.set(e,a),a)}function $a(e,t){return!e||!Na(t)?!1:(t=t.slice(2).replace(/Once$/,""),Et(e,t[0].toLowerCase()+t.slice(1))||Et(e,ji(t))||Et(e,t))}let Te=null,Xa=null;function Js(e){const t=Te;return Te=e,Xa=e&&e.type.__scopeId||null,t}function Lg(e){Xa=e}function Fg(){Xa=null}function zg(e,t=Te,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&Tc(-1);const s=Js(t);let a;try{a=e(...n)}finally{Js(s),i._d&&Tc(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function mo(e){const{type:t,vnode:r,proxy:i,withProxy:n,props:s,propsOptions:[a],slots:o,attrs:l,emit:u,render:c,renderCache:h,data:f,setupState:d,ctx:p,inheritAttrs:v}=e;let g,m;const b=Js(e);try{if(r.shapeFlag&4){const x=n||i,C=x;g=nr(c.call(C,x,h,s,d,f,p)),m=l}else{const x=t;g=nr(x.length>1?x(s,{attrs:l,slots:o,emit:u}):x(s,null)),m=t.props?l:Ng(l)}}catch(x){bn.length=0,ja(x,e,1),g=Ce(ti)}let S=g;if(m&&v!==!1){const x=Object.keys(m),{shapeFlag:C}=S;x.length&&C&7&&(a&&x.some($l)&&(m=Gg(m,a)),S=Ii(S,m))}return r.dirs&&(S=Ii(S),S.dirs=S.dirs?S.dirs.concat(r.dirs):r.dirs),r.transition&&(S.transition=r.transition),g=S,Js(b),g}const Ng=e=>{let t;for(const r in e)(r==="class"||r==="style"||Na(r))&&((t||(t={}))[r]=e[r]);return t},Gg=(e,t)=>{const r={};for(const i in e)(!$l(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function Wg(e,t,r){const{props:i,children:n,component:s}=e,{props:a,children:o,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?Sc(i,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const f=c[h];if(a[f]!==i[f]&&!$a(u,f))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?Sc(i,a,u):!0:!!a;return!1}function Sc(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(t[s]!==e[s]&&!$a(r,s))return!0}return!1}function Hg({vnode:e,parent:t},r){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=r,t=t.parent;else break}}const Vg=Symbol.for("v-ndc"),jg=e=>e.__isSuspense;function $g(e,t){t&&t.pendingBranch?bt(e)?t.effects.push(...e):t.effects.push(e):Og(e)}const Xg=Symbol.for("v-scx"),Ug=()=>lr(Xg),us={};function Ts(e,t,r){return Nf(e,t,r)}function Nf(e,t,{immediate:r,deep:i,flush:n,once:s,onTrack:a,onTrigger:o}=Bt){if(t&&s){const y=t;t=(...w)=>{y(...w),C()}}const l=ve,u=y=>i===!0?y:qr(y,i===!1?1:void 0);let c,h=!1,f=!1;if(le(e)?(c=()=>e.value,h=Ks(e)):ki(e)?(c=()=>u(e),h=!0):bt(e)?(f=!0,h=e.some(y=>ki(y)||Ks(y)),c=()=>e.map(y=>{if(le(y))return y.value;if(ki(y))return u(y);if(St(y))return Br(y,l,2)})):St(e)?t?c=()=>Br(e,l,2):c=()=>(d&&d(),qe(e,l,3,[p])):c=Ie,t&&i){const y=c;c=()=>qr(y())}let d,p=y=>{d=S.onStop=()=>{Br(y,l,4),d=S.onStop=void 0}},v;if(Ka)if(p=Ie,t?r&&qe(t,l,3,[c(),f?[]:void 0,p]):c(),n==="sync"){const y=Ug();v=y.__watcherHandles||(y.__watcherHandles=[])}else return Ie;let g=f?new Array(e.length).fill(us):us;const m=()=>{if(!(!S.active||!S.dirty))if(t){const y=S.run();(i||h||(f?y.some((w,_)=>Lr(w,g[_])):Lr(y,g)))&&(d&&d(),qe(t,l,3,[y,g===us?void 0:f&&g[0]===us?[]:g,p]),g=y)}else S.run()};m.allowRecurse=!!t;let b;n==="sync"?b=m:n==="post"?b=()=>ye(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),b=()=>nu(m));const S=new ql(c,Ie,b),x=sg(),C=()=>{S.stop(),x&&Xl(x.effects,S)};return t?r?m():g=S.run():n==="post"?ye(S.run.bind(S),l&&l.suspense):S.run(),v&&v.push(C),C}function Yg(e,t,r){const i=this.proxy,n=Jt(e)?e.includes(".")?Gf(i,e):()=>i[e]:e.bind(i,i);let s;St(t)?s=t:(s=t.handler,r=t);const a=Hn(this),o=Nf(n,s.bind(i),r);return a(),o}function Gf(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function qr(e,t,r=0,i){if(!Gt(e)||e.__v_skip)return e;if(t&&t>0){if(r>=t)return e;r++}if(i=i||new Set,i.has(e))return e;if(i.add(e),le(e))qr(e.value,t,r,i);else if(bt(e))for(let n=0;n<e.length;n++)qr(e[n],t,r,i);else if(lf(e)||Ei(e))e.forEach(n=>{qr(n,t,r,i)});else if(hf(e))for(const n in e)qr(e[n],t,r,i);return e}function qg(e,t){if(Te===null)return e;const r=Ja(Te)||Te.proxy,i=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[s,a,o,l=Bt]=t[n];s&&(St(s)&&(s={mounted:s,updated:s}),s.deep&&qr(a),i.push({dir:s,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function Wr(e,t,r,i){const n=e.dirs,s=t&&t.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(ai(),qe(l,r,8,[e.el,o,e,t]),oi())}}/*! #__NO_SIDE_EFFECTS__ */function Kg(e,t){return St(e)?ie({name:e.name},t,{setup:e}):e}const Rs=e=>!!e.type.__asyncLoader,Wf=e=>e.type.__isKeepAlive;function Jg(e,t){Hf(e,"a",t)}function Zg(e,t){Hf(e,"da",t)}function Hf(e,t,r=ve){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Ua(t,i,r),r){let n=r.parent;for(;n&&n.parent;)Wf(n.parent.vnode)&&Qg(i,t,r,n),n=n.parent}}function Qg(e,t,r,i){const n=Ua(t,e,i,!0);jf(()=>{Xl(i[t],n)},r)}function Ua(e,t,r=ve,i=!1){if(r){const n=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;ai();const o=Hn(r),l=qe(t,r,e,a);return o(),oi(),l});return i?n.unshift(s):n.push(s),s}}const Cr=e=>(t,r=ve)=>(!Ka||e==="sp")&&Ua(e,(...i)=>t(...i),r),t0=Cr("bm"),Vf=Cr("m"),e0=Cr("bu"),r0=Cr("u"),i0=Cr("bum"),jf=Cr("um"),n0=Cr("sp"),s0=Cr("rtg"),a0=Cr("rtc");function o0(e,t=ve){Ua("ec",e,t)}function Zs(e,t,r,i){let n;const s=r;if(bt(e)||Jt(e)){n=new Array(e.length);for(let a=0,o=e.length;a<o;a++)n[a]=t(e[a],a,void 0,s)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,s)}else if(Gt(e))if(e[Symbol.iterator])n=Array.from(e,(a,o)=>t(a,o,void 0,s));else{const a=Object.keys(e);n=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const u=a[o];n[o]=t(e[u],u,o,s)}}else n=[];return n}const Qo=e=>e?nd(e)?Ja(e)||e.proxy:Qo(e.parent):null,mn=ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Qo(e.parent),$root:e=>Qo(e.root),$emit:e=>e.emit,$options:e=>su(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,nu(e.update)}),$nextTick:e=>e.n||(e.n=Bf.bind(e.proxy)),$watch:e=>Yg.bind(e)}),yo=(e,t)=>e!==Bt&&!e.__isScriptSetup&&Et(e,t),l0={get({_:e},t){const{ctx:r,setupState:i,data:n,props:s,accessCache:a,type:o,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return s[t]}else{if(yo(i,t))return a[t]=1,i[t];if(n!==Bt&&Et(n,t))return a[t]=2,n[t];if((u=e.propsOptions[0])&&Et(u,t))return a[t]=3,s[t];if(r!==Bt&&Et(r,t))return a[t]=4,r[t];tl&&(a[t]=0)}}const c=mn[t];let h,f;if(c)return t==="$attrs"&&_e(e,"get",t),c(e);if((h=o.__cssModules)&&(h=h[t]))return h;if(r!==Bt&&Et(r,t))return a[t]=4,r[t];if(f=l.config.globalProperties,Et(f,t))return f[t]},set({_:e},t,r){const{data:i,setupState:n,ctx:s}=e;return yo(n,t)?(n[t]=r,!0):i!==Bt&&Et(i,t)?(i[t]=r,!0):Et(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:s}},a){let o;return!!r[a]||e!==Bt&&Et(e,a)||yo(t,a)||(o=s[0])&&Et(o,a)||Et(i,a)||Et(mn,a)||Et(n.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Et(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Cc(e){return bt(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let tl=!0;function u0(e){const t=su(e),r=e.proxy,i=e.ctx;tl=!1,t.beforeCreate&&wc(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:h,mounted:f,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:S,unmounted:x,render:C,renderTracked:y,renderTriggered:w,errorCaptured:_,serverPrefetch:E,expose:M,inheritAttrs:O,components:A,directives:R,filters:L}=t;if(u&&c0(u,i,null),a)for(const W in a){const z=a[W];St(z)&&(i[W]=z.bind(r))}if(n){const W=n.call(r,r);Gt(W)&&(e.data=tu(W))}if(tl=!0,s)for(const W in s){const z=s[W],Y=St(z)?z.bind(r,r):St(z.get)?z.get.bind(r,r):Ie,K=!St(z)&&St(z.set)?z.set.bind(r):Ie,G=G0({get:Y,set:K});Object.defineProperty(i,W,{enumerable:!0,configurable:!0,get:()=>G.value,set:tt=>G.value=tt})}if(o)for(const W in o)$f(o[W],i,r,W);if(l){const W=St(l)?l.call(r):l;Reflect.ownKeys(W).forEach(z=>{fi(z,W[z])})}c&&wc(c,e,"c");function H(W,z){bt(z)?z.forEach(Y=>W(Y.bind(r))):z&&W(z.bind(r))}if(H(t0,h),H(Vf,f),H(e0,d),H(r0,p),H(Jg,v),H(Zg,g),H(o0,_),H(a0,y),H(s0,w),H(i0,b),H(jf,x),H(n0,E),bt(M))if(M.length){const W=e.exposed||(e.exposed={});M.forEach(z=>{Object.defineProperty(W,z,{get:()=>r[z],set:Y=>r[z]=Y})})}else e.exposed||(e.exposed={});C&&e.render===Ie&&(e.render=C),O!=null&&(e.inheritAttrs=O),A&&(e.components=A),R&&(e.directives=R)}function c0(e,t,r=Ie){bt(e)&&(e=el(e));for(const i in e){const n=e[i];let s;Gt(n)?"default"in n?s=lr(n.from||i,n.default,!0):s=lr(n.from||i):s=lr(n),le(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[i]=s}}function wc(e,t,r){qe(bt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function $f(e,t,r,i){const n=i.includes(".")?Gf(r,i):()=>r[i];if(Jt(e)){const s=t[e];St(s)&&Ts(n,s)}else if(St(e))Ts(n,e.bind(r));else if(Gt(e))if(bt(e))e.forEach(s=>$f(s,t,r,i));else{const s=St(e.handler)?e.handler.bind(r):t[e.handler];St(s)&&Ts(n,s,e)}}function su(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!n.length&&!r&&!i?l=t:(l={},n.length&&n.forEach(u=>Qs(l,u,a,!0)),Qs(l,t,a)),Gt(t)&&s.set(t,l),l}function Qs(e,t,r,i=!1){const{mixins:n,extends:s}=t;s&&Qs(e,s,r,!0),n&&n.forEach(a=>Qs(e,a,r,!0));for(const a in t)if(!(i&&a==="expose")){const o=h0[a]||r&&r[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const h0={data:_c,props:Ec,emits:Ec,methods:tn,computed:tn,beforeCreate:fe,created:fe,beforeMount:fe,mounted:fe,beforeUpdate:fe,updated:fe,beforeDestroy:fe,beforeUnmount:fe,destroyed:fe,unmounted:fe,activated:fe,deactivated:fe,errorCaptured:fe,serverPrefetch:fe,components:tn,directives:tn,watch:d0,provide:_c,inject:f0};function _c(e,t){return t?e?function(){return ie(St(e)?e.call(this,this):e,St(t)?t.call(this,this):t)}:t:e}function f0(e,t){return tn(el(e),el(t))}function el(e){if(bt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function fe(e,t){return e?[...new Set([].concat(e,t))]:t}function tn(e,t){return e?ie(Object.create(null),e,t):t}function Ec(e,t){return e?bt(e)&&bt(t)?[...new Set([...e,...t])]:ie(Object.create(null),Cc(e),Cc(t??{})):t}function d0(e,t){if(!e)return t;if(!t)return e;const r=ie(Object.create(null),e);for(const i in t)r[i]=fe(e[i],t[i]);return r}function Xf(){return{app:null,config:{isNativeTag:Xv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let p0=0;function v0(e,t){return function(i,n=null){St(i)||(i=ie({},i)),n!=null&&!Gt(n)&&(n=null);const s=Xf(),a=new WeakSet;let o=!1;const l=s.app={_uid:p0++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:W0,get config(){return s.config},set config(u){},use(u,...c){return a.has(u)||(u&&St(u.install)?(a.add(u),u.install(l,...c)):St(u)&&(a.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,h){if(!o){const f=Ce(i,n);return f.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),c&&t?t(f,u):e(f,u,h),o=!0,l._container=u,u.__vue_app__=l,Ja(f.component)||f.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l},runWithContext(u){const c=yn;yn=l;try{return u()}finally{yn=c}}};return l}}let yn=null;function fi(e,t){if(ve){let r=ve.provides;const i=ve.parent&&ve.parent.provides;i===r&&(r=ve.provides=Object.create(i)),r[e]=t}}function lr(e,t,r=!1){const i=ve||Te;if(i||yn){const n=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:yn._context.provides;if(n&&e in n)return n[e];if(arguments.length>1)return r&&St(t)?t.call(i&&i.proxy):t}}function g0(e,t,r,i=!1){const n={},s={};qs(s,qa,1),e.propsDefaults=Object.create(null),Uf(e,t,n,s);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);r?e.props=i?n:Eg(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function m0(e,t,r,i){const{props:n,attrs:s,vnode:{patchFlag:a}}=e,o=Dt(n),[l]=e.propsOptions;let u=!1;if((i||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let h=0;h<c.length;h++){let f=c[h];if($a(e.emitsOptions,f))continue;const d=t[f];if(l)if(Et(s,f))d!==s[f]&&(s[f]=d,u=!0);else{const p=Oi(f);n[p]=rl(l,o,p,d,e,!1)}else d!==s[f]&&(s[f]=d,u=!0)}}}else{Uf(e,t,n,s)&&(u=!0);let c;for(const h in o)(!t||!Et(t,h)&&((c=ji(h))===h||!Et(t,c)))&&(l?r&&(r[h]!==void 0||r[c]!==void 0)&&(n[h]=rl(l,o,h,void 0,e,!0)):delete n[h]);if(s!==o)for(const h in s)(!t||!Et(t,h))&&(delete s[h],u=!0)}u&&gr(e,"set","$attrs")}function Uf(e,t,r,i){const[n,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(gn(l))continue;const u=t[l];let c;n&&Et(n,c=Oi(l))?!s||!s.includes(c)?r[c]=u:(o||(o={}))[c]=u:$a(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,a=!0)}if(s){const l=Dt(r),u=o||Bt;for(let c=0;c<s.length;c++){const h=s[c];r[h]=rl(n,l,h,u[h],e,!Et(u,h))}}return a}function rl(e,t,r,i,n,s){const a=e[r];if(a!=null){const o=Et(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&St(l)){const{propsDefaults:u}=n;if(r in u)i=u[r];else{const c=Hn(n);i=u[r]=l.call(null,t),c()}}else i=l}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===ji(r))&&(i=!0))}return i}function Yf(e,t,r=!1){const i=t.propsCache,n=i.get(e);if(n)return n;const s=e.props,a={},o=[];let l=!1;if(!St(e)){const c=h=>{l=!0;const[f,d]=Yf(h,t,!0);ie(a,f),d&&o.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return Gt(e)&&i.set(e,_i),_i;if(bt(s))for(let c=0;c<s.length;c++){const h=Oi(s[c]);kc(h)&&(a[h]=Bt)}else if(s)for(const c in s){const h=Oi(c);if(kc(h)){const f=s[c],d=a[h]=bt(f)||St(f)?{type:f}:ie({},f);if(d){const p=Dc(Boolean,d.type),v=Dc(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||Et(d,"default"))&&o.push(h)}}}const u=[a,o];return Gt(e)&&i.set(e,u),u}function kc(e){return e[0]!=="$"&&!gn(e)}function Mc(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Pc(e,t){return Mc(e)===Mc(t)}function Dc(e,t){return bt(t)?t.findIndex(r=>Pc(r,e)):St(t)&&Pc(t,e)?0:-1}const qf=e=>e[0]==="_"||e==="$stable",au=e=>bt(e)?e.map(nr):[nr(e)],y0=(e,t,r)=>{if(t._n)return t;const i=zg((...n)=>au(t(...n)),r);return i._c=!1,i},Kf=(e,t,r)=>{const i=e._ctx;for(const n in e){if(qf(n))continue;const s=e[n];if(St(s))t[n]=y0(n,s,i);else if(s!=null){const a=au(s);t[n]=()=>a}}},Jf=(e,t)=>{const r=au(t);e.slots.default=()=>r},b0=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Dt(t),qs(t,"_",r)):Kf(t,e.slots={})}else e.slots={},t&&Jf(e,t);qs(e.slots,qa,1)},x0=(e,t,r)=>{const{vnode:i,slots:n}=e;let s=!0,a=Bt;if(i.shapeFlag&32){const o=t._;o?r&&o===1?s=!1:(ie(n,t),!r&&o===1&&delete n._):(s=!t.$stable,Kf(t,n)),a=t}else t&&(Jf(e,t),a={default:1});if(s)for(const o in n)!qf(o)&&a[o]==null&&delete n[o]};function il(e,t,r,i,n=!1){if(bt(e)){e.forEach((f,d)=>il(f,t&&(bt(t)?t[d]:t),r,i,n));return}if(Rs(i)&&!n)return;const s=i.shapeFlag&4?Ja(i.component)||i.component.proxy:i.el,a=n?null:s,{i:o,r:l}=e,u=t&&t.r,c=o.refs===Bt?o.refs={}:o.refs,h=o.setupState;if(u!=null&&u!==l&&(Jt(u)?(c[u]=null,Et(h,u)&&(h[u]=null)):le(u)&&(u.value=null)),St(l))Br(l,o,12,[a,c]);else{const f=Jt(l),d=le(l);if(f||d){const p=()=>{if(e.f){const v=f?Et(h,l)?h[l]:c[l]:l.value;n?bt(v)&&Xl(v,s):bt(v)?v.includes(s)||v.push(s):f?(c[l]=[s],Et(h,l)&&(h[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else f?(c[l]=a,Et(h,l)&&(h[l]=a)):d&&(l.value=a,e.k&&(c[e.k]=a))};a?(p.id=-1,ye(p,r)):p()}}}const ye=$g;function S0(e){return C0(e)}function C0(e,t){const r=df();r.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:f,setScopeId:d=Ie,insertStaticContent:p}=e,v=(k,P,B,F=null,N=null,$=null,j=void 0,V=null,q=!!P.dynamicChildren)=>{if(k===P)return;k&&!Zi(k,P)&&(F=ot(k),tt(k,N,$,!0),k=null),P.patchFlag===-2&&(q=!1,P.dynamicChildren=null);const{type:X,ref:rt,shapeFlag:lt}=P;switch(X){case Ya:g(k,P,B,F);break;case ti:m(k,P,B,F);break;case xo:k==null&&b(P,B,F,j);break;case xe:A(k,P,B,F,N,$,j,V,q);break;default:lt&1?C(k,P,B,F,N,$,j,V,q):lt&6?R(k,P,B,F,N,$,j,V,q):(lt&64||lt&128)&&X.process(k,P,B,F,N,$,j,V,q,Ct)}rt!=null&&N&&il(rt,k&&k.ref,$,P||k,!P)},g=(k,P,B,F)=>{if(k==null)i(P.el=o(P.children),B,F);else{const N=P.el=k.el;P.children!==k.children&&u(N,P.children)}},m=(k,P,B,F)=>{k==null?i(P.el=l(P.children||""),B,F):P.el=k.el},b=(k,P,B,F)=>{[k.el,k.anchor]=p(k.children,P,B,F,k.el,k.anchor)},S=({el:k,anchor:P},B,F)=>{let N;for(;k&&k!==P;)N=f(k),i(k,B,F),k=N;i(P,B,F)},x=({el:k,anchor:P})=>{let B;for(;k&&k!==P;)B=f(k),n(k),k=B;n(P)},C=(k,P,B,F,N,$,j,V,q)=>{P.type==="svg"?j="svg":P.type==="math"&&(j="mathml"),k==null?y(P,B,F,N,$,j,V,q):E(k,P,N,$,j,V,q)},y=(k,P,B,F,N,$,j,V)=>{let q,X;const{props:rt,shapeFlag:lt,transition:at,dirs:vt}=k;if(q=k.el=a(k.type,$,rt&&rt.is,rt),lt&8?c(q,k.children):lt&16&&_(k.children,q,null,F,N,bo(k,$),j,V),vt&&Wr(k,null,F,"created"),w(q,k,k.scopeId,j,F),rt){for(const Mt in rt)Mt!=="value"&&!gn(Mt)&&s(q,Mt,null,rt[Mt],$,k.children,F,N,Z);"value"in rt&&s(q,"value",null,rt.value,$),(X=rt.onVnodeBeforeMount)&&er(X,F,k)}vt&&Wr(k,null,F,"beforeMount");const mt=w0(N,at);mt&&at.beforeEnter(q),i(q,P,B),((X=rt&&rt.onVnodeMounted)||mt||vt)&&ye(()=>{X&&er(X,F,k),mt&&at.enter(q),vt&&Wr(k,null,F,"mounted")},N)},w=(k,P,B,F,N)=>{if(B&&d(k,B),F)for(let $=0;$<F.length;$++)d(k,F[$]);if(N){let $=N.subTree;if(P===$){const j=N.vnode;w(k,j,j.scopeId,j.slotScopeIds,N.parent)}}},_=(k,P,B,F,N,$,j,V,q=0)=>{for(let X=q;X<k.length;X++){const rt=k[X]=V?Dr(k[X]):nr(k[X]);v(null,rt,P,B,F,N,$,j,V)}},E=(k,P,B,F,N,$,j)=>{const V=P.el=k.el;let{patchFlag:q,dynamicChildren:X,dirs:rt}=P;q|=k.patchFlag&16;const lt=k.props||Bt,at=P.props||Bt;let vt;if(B&&Hr(B,!1),(vt=at.onVnodeBeforeUpdate)&&er(vt,B,P,k),rt&&Wr(P,k,B,"beforeUpdate"),B&&Hr(B,!0),X?M(k.dynamicChildren,X,V,B,F,bo(P,N),$):j||z(k,P,V,null,B,F,bo(P,N),$,!1),q>0){if(q&16)O(V,P,lt,at,B,F,N);else if(q&2&&lt.class!==at.class&&s(V,"class",null,at.class,N),q&4&&s(V,"style",lt.style,at.style,N),q&8){const mt=P.dynamicProps;for(let Mt=0;Mt<mt.length;Mt++){const At=mt[Mt],Ht=lt[At],se=at[At];(se!==Ht||At==="value")&&s(V,At,Ht,se,N,k.children,B,F,Z)}}q&1&&k.children!==P.children&&c(V,P.children)}else!j&&X==null&&O(V,P,lt,at,B,F,N);((vt=at.onVnodeUpdated)||rt)&&ye(()=>{vt&&er(vt,B,P,k),rt&&Wr(P,k,B,"updated")},F)},M=(k,P,B,F,N,$,j)=>{for(let V=0;V<P.length;V++){const q=k[V],X=P[V],rt=q.el&&(q.type===xe||!Zi(q,X)||q.shapeFlag&70)?h(q.el):B;v(q,X,rt,null,F,N,$,j,!0)}},O=(k,P,B,F,N,$,j)=>{if(B!==F){if(B!==Bt)for(const V in B)!gn(V)&&!(V in F)&&s(k,V,B[V],null,j,P.children,N,$,Z);for(const V in F){if(gn(V))continue;const q=F[V],X=B[V];q!==X&&V!=="value"&&s(k,V,X,q,j,P.children,N,$,Z)}"value"in F&&s(k,"value",B.value,F.value,j)}},A=(k,P,B,F,N,$,j,V,q)=>{const X=P.el=k?k.el:o(""),rt=P.anchor=k?k.anchor:o("");let{patchFlag:lt,dynamicChildren:at,slotScopeIds:vt}=P;vt&&(V=V?V.concat(vt):vt),k==null?(i(X,B,F),i(rt,B,F),_(P.children||[],B,rt,N,$,j,V,q)):lt>0&&lt&64&&at&&k.dynamicChildren?(M(k.dynamicChildren,at,B,N,$,j,V),(P.key!=null||N&&P===N.subTree)&&Zf(k,P,!0)):z(k,P,B,rt,N,$,j,V,q)},R=(k,P,B,F,N,$,j,V,q)=>{P.slotScopeIds=V,k==null?P.shapeFlag&512?N.ctx.activate(P,B,F,j,q):L(P,B,F,N,$,j,q):I(k,P,q)},L=(k,P,B,F,N,$,j)=>{const V=k.component=B0(k,F,N);if(Wf(k)&&(V.ctx.renderer=Ct),I0(V),V.asyncDep){if(N&&N.registerDep(V,H),!k.el){const q=V.subTree=Ce(ti);m(null,q,P,B)}}else H(V,k,P,B,N,$,j)},I=(k,P,B)=>{const F=P.component=k.component;if(Wg(k,P,B))if(F.asyncDep&&!F.asyncResolved){W(F,P,B);return}else F.next=P,Ag(F.update),F.effect.dirty=!0,F.update();else P.el=k.el,F.vnode=P},H=(k,P,B,F,N,$,j)=>{const V=()=>{if(k.isMounted){let{next:rt,bu:lt,u:at,parent:vt,vnode:mt}=k;{const tr=Qf(k);if(tr){rt&&(rt.el=mt.el,W(k,rt,j)),tr.asyncDep.then(()=>{k.isUnmounted||V()});return}}let Mt=rt,At;Hr(k,!1),rt?(rt.el=mt.el,W(k,rt,j)):rt=mt,lt&&Ps(lt),(At=rt.props&&rt.props.onVnodeBeforeUpdate)&&er(At,vt,rt,mt),Hr(k,!0);const Ht=mo(k),se=k.subTree;k.subTree=Ht,v(se,Ht,h(se.el),ot(se),k,N,$),rt.el=Ht.el,Mt===null&&Hg(k,Ht.el),at&&ye(at,N),(At=rt.props&&rt.props.onVnodeUpdated)&&ye(()=>er(At,vt,rt,mt),N)}else{let rt;const{el:lt,props:at}=P,{bm:vt,m:mt,parent:Mt}=k,At=Rs(P);if(Hr(k,!1),vt&&Ps(vt),!At&&(rt=at&&at.onVnodeBeforeMount)&&er(rt,Mt,P),Hr(k,!0),lt&&ht){const Ht=()=>{k.subTree=mo(k),ht(lt,k.subTree,k,N,null)};At?P.type.__asyncLoader().then(()=>!k.isUnmounted&&Ht()):Ht()}else{const Ht=k.subTree=mo(k);v(null,Ht,B,F,k,N,$),P.el=Ht.el}if(mt&&ye(mt,N),!At&&(rt=at&&at.onVnodeMounted)){const Ht=P;ye(()=>er(rt,Mt,Ht),N)}(P.shapeFlag&256||Mt&&Rs(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&k.a&&ye(k.a,N),k.isMounted=!0,P=B=F=null}},q=k.effect=new ql(V,Ie,()=>nu(X),k.scope),X=k.update=()=>{q.dirty&&q.run()};X.id=k.uid,Hr(k,!0),X()},W=(k,P,B)=>{P.component=k;const F=k.vnode.props;k.vnode=P,k.next=null,m0(k,P.props,F,B),x0(k,P.children,B),ai(),xc(k),oi()},z=(k,P,B,F,N,$,j,V,q=!1)=>{const X=k&&k.children,rt=k?k.shapeFlag:0,lt=P.children,{patchFlag:at,shapeFlag:vt}=P;if(at>0){if(at&128){K(X,lt,B,F,N,$,j,V,q);return}else if(at&256){Y(X,lt,B,F,N,$,j,V,q);return}}vt&8?(rt&16&&Z(X,N,$),lt!==X&&c(B,lt)):rt&16?vt&16?K(X,lt,B,F,N,$,j,V,q):Z(X,N,$,!0):(rt&8&&c(B,""),vt&16&&_(lt,B,F,N,$,j,V,q))},Y=(k,P,B,F,N,$,j,V,q)=>{k=k||_i,P=P||_i;const X=k.length,rt=P.length,lt=Math.min(X,rt);let at;for(at=0;at<lt;at++){const vt=P[at]=q?Dr(P[at]):nr(P[at]);v(k[at],vt,B,null,N,$,j,V,q)}X>rt?Z(k,N,$,!0,!1,lt):_(P,B,F,N,$,j,V,q,lt)},K=(k,P,B,F,N,$,j,V,q)=>{let X=0;const rt=P.length;let lt=k.length-1,at=rt-1;for(;X<=lt&&X<=at;){const vt=k[X],mt=P[X]=q?Dr(P[X]):nr(P[X]);if(Zi(vt,mt))v(vt,mt,B,null,N,$,j,V,q);else break;X++}for(;X<=lt&&X<=at;){const vt=k[lt],mt=P[at]=q?Dr(P[at]):nr(P[at]);if(Zi(vt,mt))v(vt,mt,B,null,N,$,j,V,q);else break;lt--,at--}if(X>lt){if(X<=at){const vt=at+1,mt=vt<rt?P[vt].el:F;for(;X<=at;)v(null,P[X]=q?Dr(P[X]):nr(P[X]),B,mt,N,$,j,V,q),X++}}else if(X>at)for(;X<=lt;)tt(k[X],N,$,!0),X++;else{const vt=X,mt=X,Mt=new Map;for(X=mt;X<=at;X++){const ce=P[X]=q?Dr(P[X]):nr(P[X]);ce.key!=null&&Mt.set(ce.key,X)}let At,Ht=0;const se=at-mt+1;let tr=!1,rs=0;const _r=new Array(se);for(X=0;X<se;X++)_r[X]=0;for(X=vt;X<=lt;X++){const ce=k[X];if(Ht>=se){tt(ce,N,$,!0);continue}let Oe;if(ce.key!=null)Oe=Mt.get(ce.key);else for(At=mt;At<=at;At++)if(_r[At-mt]===0&&Zi(ce,P[At])){Oe=At;break}Oe===void 0?tt(ce,N,$,!0):(_r[Oe-mt]=X+1,Oe>=rs?rs=Oe:tr=!0,v(ce,P[Oe],B,null,N,$,j,V,q),Ht++)}const ci=tr?_0(_r):_i;for(At=ci.length-1,X=se-1;X>=0;X--){const ce=mt+X,Oe=P[ce],is=ce+1<rt?P[ce+1].el:F;_r[X]===0?v(null,Oe,B,is,N,$,j,V,q):tr&&(At<0||X!==ci[At]?G(Oe,B,is,2):At--)}}},G=(k,P,B,F,N=null)=>{const{el:$,type:j,transition:V,children:q,shapeFlag:X}=k;if(X&6){G(k.component.subTree,P,B,F);return}if(X&128){k.suspense.move(P,B,F);return}if(X&64){j.move(k,P,B,Ct);return}if(j===xe){i($,P,B);for(let lt=0;lt<q.length;lt++)G(q[lt],P,B,F);i(k.anchor,P,B);return}if(j===xo){S(k,P,B);return}if(F!==2&&X&1&&V)if(F===0)V.beforeEnter($),i($,P,B),ye(()=>V.enter($),N);else{const{leave:lt,delayLeave:at,afterLeave:vt}=V,mt=()=>i($,P,B),Mt=()=>{lt($,()=>{mt(),vt&&vt()})};at?at($,mt,Mt):Mt()}else i($,P,B)},tt=(k,P,B,F=!1,N=!1)=>{const{type:$,props:j,ref:V,children:q,dynamicChildren:X,shapeFlag:rt,patchFlag:lt,dirs:at}=k;if(V!=null&&il(V,null,B,k,!0),rt&256){P.ctx.deactivate(k);return}const vt=rt&1&&at,mt=!Rs(k);let Mt;if(mt&&(Mt=j&&j.onVnodeBeforeUnmount)&&er(Mt,P,k),rt&6)nt(k.component,B,F);else{if(rt&128){k.suspense.unmount(B,F);return}vt&&Wr(k,null,P,"beforeUnmount"),rt&64?k.type.remove(k,P,B,N,Ct,F):X&&($!==xe||lt>0&&lt&64)?Z(X,P,B,!1,!0):($===xe&&lt&384||!N&&rt&16)&&Z(q,P,B),F&&st(k)}(mt&&(Mt=j&&j.onVnodeUnmounted)||vt)&&ye(()=>{Mt&&er(Mt,P,k),vt&&Wr(k,null,P,"unmounted")},B)},st=k=>{const{type:P,el:B,anchor:F,transition:N}=k;if(P===xe){et(B,F);return}if(P===xo){x(k);return}const $=()=>{n(B),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(k.shapeFlag&1&&N&&!N.persisted){const{leave:j,delayLeave:V}=N,q=()=>j(B,$);V?V(k.el,$,q):q()}else $()},et=(k,P)=>{let B;for(;k!==P;)B=f(k),n(k),k=B;n(P)},nt=(k,P,B)=>{const{bum:F,scope:N,update:$,subTree:j,um:V}=k;F&&Ps(F),N.stop(),$&&($.active=!1,tt(j,k,P,B)),V&&ye(V,P),ye(()=>{k.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},Z=(k,P,B,F=!1,N=!1,$=0)=>{for(let j=$;j<k.length;j++)tt(k[j],P,B,F,N)},ot=k=>k.shapeFlag&6?ot(k.component.subTree):k.shapeFlag&128?k.suspense.next():f(k.anchor||k.el);let ct=!1;const gt=(k,P,B)=>{k==null?P._vnode&&tt(P._vnode,null,null,!0):v(P._vnode||null,k,P,null,null,null,B),ct||(ct=!0,xc(),Lf(),ct=!1),P._vnode=k},Ct={p:v,um:tt,m:G,r:st,mt:L,mc:_,pc:z,pbc:M,n:ot,o:e};let it,ht;return{render:gt,hydrate:it,createApp:v0(gt,it)}}function bo({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Hr({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function w0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Zf(e,t,r=!1){const i=e.children,n=t.children;if(bt(i)&&bt(n))for(let s=0;s<i.length;s++){const a=i[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=Dr(n[s]),o.el=a.el),r||Zf(a,o)),o.type===Ya&&(o.el=a.el)}}function _0(e){const t=e.slice(),r=[0];let i,n,s,a,o;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(n=r[r.length-1],e[n]<u){t[i]=n,r.push(i);continue}for(s=0,a=r.length-1;s<a;)o=s+a>>1,e[r[o]]<u?s=o+1:a=o;u<e[r[s]]&&(s>0&&(t[i]=r[s-1]),r[s]=i)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=t[a];return r}function Qf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Qf(t)}const E0=e=>e.__isTeleport,xe=Symbol.for("v-fgt"),Ya=Symbol.for("v-txt"),ti=Symbol.for("v-cmt"),xo=Symbol.for("v-stc"),bn=[];let Ue=null;function Yt(e=!1){bn.push(Ue=e?null:[])}function k0(){bn.pop(),Ue=bn[bn.length-1]||null}let Rn=1;function Tc(e){Rn+=e}function td(e){return e.dynamicChildren=Rn>0?Ue||_i:null,k0(),Rn>0&&Ue&&Ue.push(e),e}function re(e,t,r,i,n,s){return td(Pt(e,t,r,i,n,s,!0))}function ed(e,t,r,i,n){return td(Ce(e,t,r,i,n,!0))}function M0(e){return e?e.__v_isVNode===!0:!1}function Zi(e,t){return e.type===t.type&&e.key===t.key}const qa="__vInternal",rd=({key:e})=>e??null,As=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Jt(e)||le(e)||St(e)?{i:Te,r:e,k:t,f:!!r}:e:null);function Pt(e,t=null,r=null,i=0,n=null,s=e===xe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&rd(t),ref:t&&As(t),scopeId:Xa,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Te};return o?(ou(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=Jt(r)?8:16),Rn>0&&!a&&Ue&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ue.push(l),l}const Ce=P0;function P0(e,t=null,r=null,i=0,n=null,s=!1){if((!e||e===Vg)&&(e=ti),M0(e)){const o=Ii(e,t,!0);return r&&ou(o,r),Rn>0&&!s&&Ue&&(o.shapeFlag&6?Ue[Ue.indexOf(e)]=o:Ue.push(o)),o.patchFlag|=-2,o}if(N0(e)&&(e=e.__vccOpts),t){t=D0(t);let{class:o,style:l}=t;o&&!Jt(o)&&(t.class=Yl(o)),Gt(l)&&(Pf(l)&&!bt(l)&&(l=ie({},l)),t.style=Ha(l))}const a=Jt(e)?1:jg(e)?128:E0(e)?64:Gt(e)?4:St(e)?2:0;return Pt(e,t,r,i,n,a,s,!0)}function D0(e){return e?Pf(e)||qa in e?ie({},e):e:null}function Ii(e,t,r=!1){const{props:i,ref:n,patchFlag:s,children:a}=e,o=t?R0(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&rd(o),ref:t&&t.ref?r&&n?bt(n)?n.concat(As(t)):[n,As(t)]:As(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xe?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ii(e.ssContent),ssFallback:e.ssFallback&&Ii(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function T0(e=" ",t=0){return Ce(Ya,null,e,t)}function id(e="",t=!1){return t?(Yt(),ed(ti,null,e)):Ce(ti,null,e)}function nr(e){return e==null||typeof e=="boolean"?Ce(ti):bt(e)?Ce(xe,null,e.slice()):typeof e=="object"?Dr(e):Ce(Ya,null,String(e))}function Dr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ii(e)}function ou(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(bt(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),ou(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!(qa in t)?t._ctx=Te:n===3&&Te&&(Te.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else St(t)?(t={default:t,_ctx:Te},r=32):(t=String(t),i&64?(r=16,t=[T0(t)]):r=8);e.children=t,e.shapeFlag|=r}function R0(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=Yl([t.class,i.class]));else if(n==="style")t.style=Ha([t.style,i.style]);else if(Na(n)){const s=t[n],a=i[n];a&&s!==a&&!(bt(s)&&s.includes(a))&&(t[n]=s?[].concat(s,a):a)}else n!==""&&(t[n]=i[n])}return t}function er(e,t,r,i=null){qe(e,t,7,[r,i])}const A0=Xf();let O0=0;function B0(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||A0,s={uid:O0++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new ig(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yf(i,n),emitsOptions:zf(i,n),emit:null,emitted:null,propsDefaults:Bt,inheritAttrs:i.inheritAttrs,ctx:Bt,data:Bt,props:Bt,attrs:Bt,slots:Bt,refs:Bt,setupState:Bt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Ig.bind(null,s),e.ce&&e.ce(s),s}let ve=null,ta,nl;{const e=df(),t=(r,i)=>{let n;return(n=e[r])||(n=e[r]=[]),n.push(i),s=>{n.length>1?n.forEach(a=>a(s)):n[0](s)}};ta=t("__VUE_INSTANCE_SETTERS__",r=>ve=r),nl=t("__VUE_SSR_SETTERS__",r=>Ka=r)}const Hn=e=>{const t=ve;return ta(e),e.scope.on(),()=>{e.scope.off(),ta(t)}},Rc=()=>{ve&&ve.scope.off(),ta(null)};function nd(e){return e.vnode.shapeFlag&4}let Ka=!1;function I0(e,t=!1){t&&nl(t);const{props:r,children:i}=e.vnode,n=nd(e);g0(e,r,n,t),b0(e,i);const s=n?L0(e,t):void 0;return t&&nl(!1),s}function L0(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Df(new Proxy(e.ctx,l0));const{setup:i}=r;if(i){const n=e.setupContext=i.length>1?z0(e):null,s=Hn(e);ai();const a=Br(i,e,0,[e.props,n]);if(oi(),s(),uf(a)){if(a.then(Rc,Rc),t)return a.then(o=>{Ac(e,o,t)}).catch(o=>{ja(o,e,0)});e.asyncDep=a}else Ac(e,a,t)}else sd(e,t)}function Ac(e,t,r){St(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Gt(t)&&(e.setupState=Af(t)),sd(e,r)}let Oc;function sd(e,t,r){const i=e.type;if(!e.render){if(!t&&Oc&&!i.render){const n=i.template||su(e).template;if(n){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=i,u=ie(ie({isCustomElement:s,delimiters:o},a),l);i.render=Oc(n,u)}}e.render=i.render||Ie}{const n=Hn(e);ai();try{u0(e)}finally{oi(),n()}}}function F0(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return _e(e,"get","$attrs"),t[r]}}))}function z0(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return F0(e)},slots:e.slots,emit:e.emit,expose:t}}function Ja(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Af(Df(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in mn)return mn[r](e)},has(t,r){return r in t||r in mn}}))}function N0(e){return St(e)&&"__vccOpts"in e}const G0=(e,t)=>kg(e,t,Ka),W0="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const H0="http://www.w3.org/2000/svg",V0="http://www.w3.org/1998/Math/MathML",Tr=typeof document<"u"?document:null,Bc=Tr&&Tr.createElement("template"),j0={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t==="svg"?Tr.createElementNS(H0,e):t==="mathml"?Tr.createElementNS(V0,e):Tr.createElement(e,r?{is:r}:void 0);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>Tr.createTextNode(e),createComment:e=>Tr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Tr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,i,n,s){const a=r?r.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===s||!(n=n.nextSibling)););else{Bc.innerHTML=i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e;const o=Bc.content;if(i==="svg"||i==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},$0=Symbol("_vtc");function X0(e,t,r){const i=e[$0];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Ic=Symbol("_vod"),U0=Symbol("_vsh"),Y0=Symbol(""),q0=/(^|;)\s*display\s*:/;function K0(e,t,r){const i=e.style,n=Jt(r);let s=!1;if(r&&!n){if(t)if(Jt(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&Os(i,o,"")}else for(const a in t)r[a]==null&&Os(i,a,"");for(const a in r)a==="display"&&(s=!0),Os(i,a,r[a])}else if(n){if(t!==r){const a=i[Y0];a&&(r+=";"+a),i.cssText=r,s=q0.test(r)}}else t&&e.removeAttribute("style");Ic in e&&(e[Ic]=s?i.display:"",e[U0]&&(i.display="none"))}const Lc=/\s*!important$/;function Os(e,t,r){if(bt(r))r.forEach(i=>Os(e,t,i));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=J0(e,t);Lc.test(r)?e.setProperty(ji(i),r.replace(Lc,""),"important"):e[i]=r}}const Fc=["Webkit","Moz","ms"],So={};function J0(e,t){const r=So[t];if(r)return r;let i=Oi(t);if(i!=="filter"&&i in e)return So[t]=i;i=ff(i);for(let n=0;n<Fc.length;n++){const s=Fc[n]+i;if(s in e)return So[t]=s}return t}const zc="http://www.w3.org/1999/xlink";function Z0(e,t,r,i,n){if(i&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(zc,t.slice(6,t.length)):e.setAttributeNS(zc,t,r);else{const s=rg(t);r==null||s&&!pf(r)?e.removeAttribute(t):e.setAttribute(t,s?"":r)}}function Q0(e,t,r,i,n,s,a){if(t==="innerHTML"||t==="textContent"){i&&a(i,n,s),e[t]=r??"";return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const u=o==="OPTION"?e.getAttribute("value")||"":e.value,c=r??"";(u!==c||!("_value"in e))&&(e.value=c),r==null&&e.removeAttribute(t),e._value=r;return}let l=!1;if(r===""||r==null){const u=typeof e[t];u==="boolean"?r=pf(r):r==null&&u==="string"?(r="",l=!0):u==="number"&&(r=0,l=!0)}try{e[t]=r}catch{}l&&e.removeAttribute(t)}function di(e,t,r,i){e.addEventListener(t,r,i)}function tm(e,t,r,i){e.removeEventListener(t,r,i)}const Nc=Symbol("_vei");function em(e,t,r,i,n=null){const s=e[Nc]||(e[Nc]={}),a=s[t];if(i&&a)a.value=i;else{const[o,l]=rm(t);if(i){const u=s[t]=sm(i,n);di(e,o,u,l)}else a&&(tm(e,o,a,l),s[t]=void 0)}}const Gc=/(?:Once|Passive|Capture)$/;function rm(e){let t;if(Gc.test(e)){t={};let i;for(;i=e.match(Gc);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ji(e.slice(2)),t]}let Co=0;const im=Promise.resolve(),nm=()=>Co||(im.then(()=>Co=0),Co=Date.now());function sm(e,t){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;qe(am(i,r.value),t,5,[i])};return r.value=e,r.attached=nm(),r}function am(e,t){if(bt(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const Wc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,om=(e,t,r,i,n,s,a,o,l)=>{const u=n==="svg";t==="class"?X0(e,i,u):t==="style"?K0(e,r,i):Na(t)?$l(t)||em(e,t,r,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):lm(e,t,i,u))?Q0(e,t,i,s,a,o,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Z0(e,t,i,u))};function lm(e,t,r,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&Wc(t)&&St(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Wc(t)&&Jt(r)?!1:t in e}const Hc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return bt(t)?r=>Ps(t,r):t};function um(e){e.target.composing=!0}function Vc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const wo=Symbol("_assign"),cm={created(e,{modifiers:{lazy:t,trim:r,number:i}},n){e[wo]=Hc(n);const s=i||n.props&&n.props.type==="number";di(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;r&&(o=o.trim()),s&&(o=Uo(o)),e[wo](o)}),r&&di(e,"change",()=>{e.value=e.value.trim()}),t||(di(e,"compositionstart",um),di(e,"compositionend",Vc),di(e,"change",Vc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:i,number:n}},s){if(e[wo]=Hc(s),e.composing)return;const a=n||e.type==="number"?Uo(e.value):e.value,o=t??"";a!==o&&(document.activeElement===e&&e.type!=="range"&&(r||i&&e.value.trim()===o)||(e.value=o))}},hm=ie({patchProp:om},j0);let jc;function fm(){return jc||(jc=S0(hm))}const dm=(...e)=>{const t=fm().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=vm(i);if(!n)return;const s=t._component;!St(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const a=r(n,!1,pm(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t};function pm(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function vm(e){return Jt(e)?document.querySelector(e):e}const gm="/StickerEditor/assets/add1-DpgXoKJM.png",mm="/StickerEditor/assets/add2-RRQ8YQ0u.png",ym="/StickerEditor/assets/add3-DWmAwVb9.png",bm="/StickerEditor/assets/add4-DrcPqAIq.png",xm="/StickerEditor/assets/add5-BIXogDIN.png",Sm="/StickerEditor/assets/add6-D0aQ2SaT.png",Cm="/StickerEditor/assets/add21-BGbuhfVT.jpg",wm={class:"bg-Surface left-0 h-screen w-[22vw] py-5"},_m={class:"max-h-[95vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},Em=["src","alt","onClick"],km={__name:"AsideLeft",setup(e){let t=Se([{src:gm,alt:"add on 1"},{src:mm,alt:"add on 2"},{src:ym,alt:"add on 3"},{src:bm,alt:"add on 4"},{src:xm,alt:"add on 5"},{src:Sm,alt:"add on 6"},{src:Cm,alt:"add on 7"}]);const r=lr("handleStickerSelected"),i=n=>{r(n)};return(n,s)=>(Yt(),re("div",wm,[Pt("div",_m,[(Yt(!0),re(xe,null,Zs(ee(t),(a,o)=>(Yt(),re("div",{key:o,class:"object-fill flex justify-center items-center"},[Pt("img",{class:"max-w-[8vw] cursor-pointer hover:opacity-60 transition-opacity duration-200",src:a.src,alt:a.alt,onClick:l=>i(a.src)},null,8,Em)]))),128))])]))}},Mm={class:"flex flex-col gap-5"},Pm={class:"bg-Surface h-[50vh] w-[22vw] relative rounded-bl-xl",ref:"parentContainer"},Dm=Pt("label",{Class:"text-Primary font-semibold flex justify-center mb-2 mt-2 text-xl"},"Gallery",-1),Tm={class:"max-h-[42vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},Rm=["onClick"],Am=["src","alt"],Om={class:"bg-Surface h-[50vh] w-[22vw] relative rounded-tl-xl",ref:"parentContainer"},Bm=Pt("label",{Class:"text-Primary font-semibold flex justify-center mb-2 mt-2 text-xl"},"Saved image",-1),Im={class:"max-h-[42vh] w-[22vw] overflow-y-auto grid grid-cols-2 gap-2 items-center justify-center p-5"},Lm=["onClick"],Fm=["src"],zm={__name:"AsideRight",emits:["selectImage"],setup(e,{emit:t}){const r=lr("images"),i=lr("savedImages"),n=t,s=a=>{n("selectImage",a)};return(a,o)=>(Yt(),re("div",Mm,[Pt("div",Pm,[Dm,Pt("div",Tm,[(Yt(!0),re(xe,null,Zs(ee(r),(l,u)=>(Yt(),re("div",{key:u,class:"object-fill flex justify-center items-center cursor-pointer",onClick:c=>s(l.src)},[Pt("img",{class:"min-w-[8vw]",src:l.src,alt:l.alt},null,8,Am)],8,Rm))),128))])],512),Pt("div",Om,[Bm,Pt("div",Im,[(Yt(!0),re(xe,null,Zs(ee(i),(l,u)=>(Yt(),re("div",{key:u,class:"object-fill flex justify-center items-center cursor-pointer",onClick:c=>s(l)},[Pt("img",{class:"max-w-[8vw]",src:l,alt:"Saved Image"},null,8,Fm)],8,Lm))),128))])],512)]))}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ad=function(e,t){return(ad=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])})(e,t)};function Lt(e,t){function r(){this.constructor=e}ad(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function $c(e,t,r,i){return new(r||(r=Promise))(function(n,s){function a(u){try{l(i.next(u))}catch(c){s(c)}}function o(u){try{l(i.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?n(u.value):(c=u.value,c instanceof r?c:new r(function(h){h(c)})).then(a,o)}l((i=i.apply(e,[])).next())})}function Xc(e,t){var r,i,n,s,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=2&c[0]?i.return:c[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,c[1])).done)return n;switch(i=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,i=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(n=a.trys,!((n=n.length>0&&n[n.length-1])||c[0]!==6&&c[0]!==2)){a=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){a.label=c[1];break}if(c[0]===6&&a.label<n[1]){a.label=n[1],n=c;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(c);break}n[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(h){c=[6,h],i=0}finally{r=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function An(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,n++)i[n]=s[a];return i}var J=function(){function e(){}return e.createDefs=function(){return document.createElementNS("http://www.w3.org/2000/svg","defs")},e.setAttributes=function(t,r){for(var i=0,n=r;i<n.length;i++){var s=n[i],a=s[0],o=s[1];t.setAttribute(a,o)}},e.createRect=function(t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.setAttribute("width",t.toString()),n.setAttribute("height",r.toString()),i&&e.setAttributes(n,i),n},e.createLine=function(t,r,i,n,s){var a=document.createElementNS("http://www.w3.org/2000/svg","line");return a.setAttribute("x1",t.toString()),a.setAttribute("y1",r.toString()),a.setAttribute("x2",i.toString()),a.setAttribute("y2",n.toString()),s&&e.setAttributes(a,s),a},e.createPolygon=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","polygon");return i.setAttribute("points",t),r&&e.setAttributes(i,r),i},e.createCircle=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",(t/2).toString()),i.setAttribute("cy",(t/2).toString()),i.setAttribute("r",t.toString()),r&&e.setAttributes(i,r),i},e.createEllipse=function(t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return n.setAttribute("cx",(t/2).toString()),n.setAttribute("cy",(r/2).toString()),n.setAttribute("rx",(t/2).toString()),n.setAttribute("ry",(r/2).toString()),i&&e.setAttributes(n,i),n},e.createGroup=function(t){var r=document.createElementNS("http://www.w3.org/2000/svg","g");return t&&e.setAttributes(r,t),r},e.createTransform=function(){return document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGTransform()},e.createMarker=function(t,r,i,n,s,a,o){var l=document.createElementNS("http://www.w3.org/2000/svg","marker");return e.setAttributes(l,[["id",t],["orient",r],["markerWidth",i.toString()],["markerHeight",n.toString()],["refX",s.toString()],["refY",a.toString()]]),l.appendChild(o),l},e.createText=function(t){var r=document.createElementNS("http://www.w3.org/2000/svg","text");return r.setAttribute("x","0"),r.setAttribute("y","0"),t&&e.setAttributes(r,t),r},e.createTSpan=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","tspan");return i.textContent=t,r&&e.setAttributes(i,r),i},e.createImage=function(t){var r=document.createElementNS("http://www.w3.org/2000/svg","image");return t&&e.setAttributes(r,t),r},e.createPoint=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGPoint();return i.x=t,i.y=r,i},e.createPath=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",t),r&&e.setAttributes(i,r),i},e}(),Uc=function(){function e(){}return e.addKey=function(t){e.key=t},Object.defineProperty(e,"isLicensed",{get:function(){return!!e.key&&new RegExp(/^MJS2-[A-Z][0-9]{3}-[A-Z][0-9]{3}-[0-9]{4}$/,"i").test(e.key)},enumerable:!1,configurable:!0}),e}(),Nm=function(){function e(){this.naturalSize=!1,this.imageType="image/png",this.markersOnly=!1}return e.prototype.rasterize=function(t,r,i){var n=this;return new Promise(function(s){var a=i!==void 0?i:document.createElement("canvas");t===null&&(n.markersOnly=!0,n.naturalSize=!1);var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("width",r.width.baseVal.valueAsString),o.setAttribute("height",r.height.baseVal.valueAsString),o.setAttribute("viewBox","0 0 "+r.viewBox.baseVal.width.toString()+" "+r.viewBox.baseVal.height.toString()),o.innerHTML=r.innerHTML,n.naturalSize===!0?(o.width.baseVal.value=t.naturalWidth,o.height.baseVal.value=t.naturalHeight):n.width!==void 0&&n.height!==void 0&&(o.width.baseVal.value=n.width,o.height.baseVal.value=n.height),a.width=o.width.baseVal.value,a.height=o.height.baseVal.value;var l=o.outerHTML,u=a.getContext("2d");n.markersOnly!==!0&&u.drawImage(t,0,0,a.width,a.height);var c=window.URL,h=new Image(a.width,a.height);h.setAttribute("crossOrigin","anonymous");var f=new Blob([l],{type:"image/svg+xml"}),d=c.createObjectURL(f);h.onload=function(){u.drawImage(h,0,0),c.revokeObjectURL(d);var p=a.toDataURL(n.imageType,n.imageQuality);s(p)},h.src=d})},e}(),Yc=function(){},Gm=function(){function e(t){this._classNamePrefixBase="__markerjs2_",this.classes=[],this.rules=[],this.settings=this.defaultSettings,this._classNamePrefix=this._classNamePrefixBase+"_"+t+"_"}return Object.defineProperty(e.prototype,"classNamePrefixBase",{get:function(){return this._classNamePrefixBase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNamePrefix",{get:function(){return this._classNamePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultSettings",{get:function(){return{canvasBackgroundColor:"#ffffff",toolbarBackgroundColor:"#111111",toolbarBackgroundHoverColor:"#333333",toolbarColor:"#eeeeee",toolbarHeight:40,toolboxColor:"#eeeeee",toolboxAccentColor:"#3080c3",undoButtonVisible:!0,redoButtonVisible:!1,zoomButtonVisible:!1,zoomOutButtonVisible:!1,clearButtonVisible:!1,resultButtonBlockVisible:!0,logoPosition:"left"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fadeInAnimationClassName",{get:function(){return this.classNamePrefix+"fade_in"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fadeOutAnimationClassName",{get:function(){return this.classNamePrefix+"fade_out"},enumerable:!1,configurable:!0}),e.prototype.addClass=function(t){return this.styleSheet===void 0&&this.addStyleSheet(),t.name=""+this.classNamePrefix+t.localName,this.classes.push(t),this.styleSheet.sheet.insertRule("."+t.name+" {"+t.style+"}",this.styleSheet.sheet.cssRules.length),t},e.prototype.addRule=function(t){this.styleSheet===void 0&&this.addStyleSheet(),this.rules.push(t),this.styleSheet.sheet.insertRule(t.selector+" {"+t.style+"}",this.styleSheet.sheet.cssRules.length)},e.prototype.addStyleSheet=function(){var t;this.styleSheet=document.createElement("style"),((t=this.styleSheetRoot)!==null&&t!==void 0?t:document.head).appendChild(this.styleSheet),this.addRule(new Xe("."+this.classNamePrefix+" h3","font-family: sans-serif")),this.addRule(new Xe("@keyframes "+this.classNamePrefix+"_fade_in_animation_frames",`
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
    `)),this.addRule(new Xe("@keyframes "+this.classNamePrefix+"_fade_out_animation_frames",`
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
    `)),this.addClass(new Ut("fade_in",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_in_animation_frames;
    `)),this.addClass(new Ut("fade_out",`
      animation-duration: 0.3s;
      animation-name: `+this.classNamePrefix+`_fade_out_animation_frames;
    `))},e.prototype.removeStyleSheet=function(){var t;this.styleSheet&&(((t=this.styleSheetRoot)!==null&&t!==void 0?t:document.head).removeChild(this.styleSheet),this.styleSheet=void 0)},e}(),Xe=function(e,t){this.selector=e,this.style=t},Ut=function(e,t){this.localName=e,this.style=t},Wm=function(){function e(t,r,i,n,s){this.buttons=[],this.markerButtons=[],this.buttonClickListeners=[],this.markerjsContainer=t,this.displayMode=r,this.markerItems=i,this.uiStyleSettings=n,this.styles=s,this.addStyles(),this.adjustLayout=this.adjustLayout.bind(this),this.overflowButtonClicked=this.overflowButtonClicked.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this)}return e.prototype.show=function(t){var r=this;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=t,this.uiContainer.className=this.toolbarStyleClass.name+" "+this.styles.fadeInAnimationClassName+" "+(this.uiStyleSettings.toolbarStyleColorsClassName?this.uiStyleSettings.toolbarStyleColorsClassName:this.toolbarStyleColorsClass.name);var i=document.createElement("div");i.className=this.toolbarBlockStyleClass.name,i.style.whiteSpace="nowrap",this.uiContainer.appendChild(i),this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M10.07 14.27a.997.997 0 011.33.48l2.3 4.99 1.8-.85-2.31-4.98c-.24-.5-.02-1.1.48-1.33l.28-.08 2.3-.45L8 5.12V15.9l1.82-1.47.25-.16m3.57 7.7a.99.99 0 01-1.33-.47l-2.18-4.74-2.51 2.02c-.17.14-.38.22-.62.22a1 1 0 01-1-1V3a1 1 0 011-1c.24 0 .47.09.64.23l.01-.01 11.49 9.64a1.001 1.001 0 01-.44 1.75l-3.16.62 2.2 4.73c.26.5.02 1.09-.48 1.32l-3.62 1.69z"/></svg>',"select","Select mode"),this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M9 3v1H4v2h1v13a2 2 0 002 2h10a2 2 0 002-2V6h1V4h-5V3H9M7 6h10v13H7V6m2 2v9h2V8H9m4 0v9h2V8h-2z"/></svg>',"delete","Delete marker"),this.uiStyleSettings.clearButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M19.36 2.72l1.42 1.42-5.72 5.71c1.07 1.54 1.22 3.39.32 4.59L9.06 8.12c1.2-.9 3.05-.75 4.59.32l5.71-5.72M5.93 17.57c-2.01-2.01-3.24-4.41-3.58-6.65l4.88-2.09 7.44 7.44-2.09 4.88c-2.24-.34-4.64-1.57-6.65-3.58z"/></svg>',"clear","Delete all markers"),this.uiStyleSettings.undoButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M12.5 8c-2.65 0-5.05 1-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>',"undo","Undo"),this.uiStyleSettings.redoButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 017.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/></svg>',"redo","Redo"),this.uiStyleSettings.zoomButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M15.5 14l5 5-1.5 1.5-5-5v-.79l-.27-.28A6.471 6.471 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3 6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.57 4.23l.28.27h.79m-6 0C12 14 14 12 14 9.5S12 5 9.5 5 5 7 5 9.5 7 14 9.5 14m2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"/></svg>',"zoom","Zoom in"),this.uiStyleSettings.zoomButtonVisible&&this.uiStyleSettings.zoomOutButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 009.5 3 6.5 6.5 0 003 9.5 6.5 6.5 0 009.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.5-1.5-5-5m-6 0C7 14 5 12 5 9.5S7 5 9.5 5 14 7 14 9.5 12 14 9.5 14M7 9h5v1H7V9z"/></svg>',"zoom-out","Zoom out"),this.uiStyleSettings.notesButtonVisible&&this.addActionButton(i,'<svg viewBox="0 0 24 24"><path d="M18.13 12l1.26-1.26c.44-.44 1-.68 1.61-.74V9l-6-6H5c-1.11 0-2 .89-2 2v14a2 2 0 002 2h6v-1.87l.13-.13H5V5h7v7h6.13M14 4.5l5.5 5.5H14V4.5m5.13 9.33l2.04 2.04L15.04 22H13v-2.04l6.13-6.13m3.72.36l-.98.98-2.04-2.04.98-.98c.19-.2.52-.2.72 0l1.32 1.32c.2.2.2.53 0 .72z"/></svg>',"notes","Notes"),this.markerButtonBlock=document.createElement("div"),this.markerButtonBlock.className=this.toolbarBlockStyleClass.name,this.markerButtonBlock.style.flexGrow="2",this.markerButtonBlock.style.textAlign="center",this.uiContainer.appendChild(this.markerButtonBlock),this.markerButtonOverflowBlock=document.createElement("div"),this.markerButtonOverflowBlock.className=this.toolbarOverflowBlockStyleClass.name+" "+(this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName?this.uiStyleSettings.toolbarOverflowBlockStyleColorsClassName:this.toolbarOverflowBlockStyleColorsClass.name),this.markerButtonOverflowBlock.style.display="none",this.uiContainer.appendChild(this.markerButtonOverflowBlock),this.markerItems&&(this.markerItems.forEach(function(s){var a=document.createElement("div");a.className=""+r.toolbarButtonStyleClass.name,a.setAttribute("data-type-name",s.typeName),a.setAttribute("aria-label",s.title),a.setAttribute("title",s.title),a.innerHTML=s.icon,a.addEventListener("click",function(){r.markerToolbarButtonClicked(a,s)}),r.buttons.push(a),r.markerButtons.push(a)}),this.overflowButton=document.createElement("div"),this.overflowButton.className=this.toolbarButtonStyleClass.name+" "+(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name),this.overflowButton.innerHTML='<svg viewBox="0 0 24 24"><path d="M12 16a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2z"/></svg>',this.overflowButton.addEventListener("click",this.overflowButtonClicked),this.markerButtonBlock.appendChild(this.overflowButton));var n=document.createElement("div");n.className=this.toolbarBlockStyleClass.name,n.style.whiteSpace="nowrap",n.style.display=this.uiStyleSettings.resultButtonBlockVisible!==!1?"":"none",this.uiContainer.appendChild(n),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M9 20.42l-6.21-6.21 2.83-2.83L9 14.77l9.88-9.89 2.83 2.83L9 20.42z"/></svg>',"render","Save and close"),this.addActionButton(n,'<svg viewBox="0 0 24 24"><path d="M20 6.91L17.09 4 12 9.09 6.91 4 4 6.91 9.09 12 4 17.09 6.91 20 12 14.91 17.09 20 20 17.09 14.91 12 20 6.91z"/></svg>',"close","Close"),this.markerjsContainer.appendChild(this.uiContainer),this.setSelectMode(),this.setCurrentMarker(),this.adjustLayout()},e.prototype.addButtonClickListener=function(t){this.buttonClickListeners.push(t)},e.prototype.removeButtonClickListener=function(t){this.buttonClickListeners.indexOf(t)>-1&&this.buttonClickListeners.splice(this.buttonClickListeners.indexOf(t),1)},e.prototype.setSelectMode=function(){this.resetButtonStyles(),this.setActiveButton(this.buttons[0])},e.prototype.adjustLayout=function(){if(this.markerButtons&&this.markerButtons.length>0){var t=Math.floor(this.markerButtonBlock.clientWidth/this.uiStyleSettings.toolbarHeight)-1;this.markerButtonBlock.innerHTML="",this.markerButtonOverflowBlock.innerHTML="";for(var r=0;r<this.markerButtons.length;r++)r<t||r===t&&this.markerButtons.length-1===t?this.markerButtonBlock.appendChild(this.markerButtons[r]):(r===t&&this.markerButtonBlock.appendChild(this.overflowButton),this.markerButtonOverflowBlock.appendChild(this.markerButtons[r]))}},e.prototype.overflowButtonClicked=function(){this.markerButtonOverflowBlock.style.display!=="none"?(this.markerButtonOverflowBlock.className=this.markerButtonOverflowBlock.className.replace(this.styles.fadeInAnimationClassName,""),this.markerButtonOverflowBlock.style.display="none"):(this.markerButtonOverflowBlock.className+=" "+this.styles.fadeInAnimationClassName,this.markerButtonOverflowBlock.style.top=this.uiContainer.offsetTop+this.overflowButton.offsetHeight+"px",this.markerButtonOverflowBlock.style.right=this.uiContainer.offsetWidth-this.overflowButton.offsetLeft-this.overflowButton.offsetWidth+2*this.uiContainer.offsetLeft+"px",this.markerButtonOverflowBlock.style.display="inline-block")},e.prototype.resetButtonStyles=function(){var t=this;this.buttons.forEach(function(r){r.className=r.className.replace(t.uiStyleSettings.toolbarButtonStyleColorsClassName?t.uiStyleSettings.toolbarButtonStyleColorsClassName:t.toolbarButtonStyleColorsClass.name,"").trim(),r.className=r.className.replace(t.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?t.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:t.toolbarActiveButtonStyleColorsClass.name,"").trim(),r.className+=" "+(t.uiStyleSettings.toolbarButtonStyleColorsClassName?t.uiStyleSettings.toolbarButtonStyleColorsClassName:t.toolbarButtonStyleColorsClass.name)})},e.prototype.addActionButton=function(t,r,i,n){var s=this,a=document.createElement("div");switch(a.className=""+this.toolbarButtonStyleClass.name,a.innerHTML=r,a.setAttribute("role","button"),a.setAttribute("data-action",i),a.title=n,a.setAttribute("aria-label",n),a.addEventListener("click",function(){s.actionToolbarButtonClicked(a,i)}),i){case"select":a.style.fill=this.uiStyleSettings.selectButtonColor;break;case"delete":case"clear":a.style.fill=this.uiStyleSettings.deleteButtonColor;break;case"undo":case"redo":a.style.fill=this.uiStyleSettings.selectButtonColor;break;case"render":a.style.fill=this.uiStyleSettings.okButtonColor;break;case"close":a.style.fill=this.uiStyleSettings.closeButtonColor}t.appendChild(a),this.buttons.push(a)},e.prototype.addStyles=function(){this.toolbarStyleClass=this.styles.addClass(new Ut("toolbar",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: row;
      justify-content: space-between;      
      height: `+this.uiStyleSettings.toolbarHeight+`px;
      box-sizing: content-box;
      `+(this.displayMode==="inline"?"border-top-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-top-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolbarStyleColorsClass=this.styles.addClass(new Ut("toolbar_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      box-shadow: 0px 3px rgba(33, 33, 33, 0.1);
    `)),this.toolbarBlockStyleClass=this.styles.addClass(new Ut("toolbar-block",`
        display: inline-block;
        box-sizing: content-box;
    `)),this.toolbarOverflowBlockStyleClass=this.styles.addClass(new Ut("toolbar-overflow-block",`
        position: absolute;
        top: `+this.uiStyleSettings.toolbarHeight+`px;
        max-width: `+2*this.uiStyleSettings.toolbarHeight+`px;
        z-index: 10;
        box-sizing: content-box;
      `)),this.toolbarOverflowBlockStyleColorsClass=this.styles.addClass(new Ut("toolbar-overflow-block_colors",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
      `));var t=this.uiStyleSettings.toolbarHeight/4;this.toolbarButtonStyleClass=this.styles.addClass(new Ut("toolbar_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*t)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*t)+`px;
      padding: `+t+`px;
      box-sizing: content-box;
    `)),this.toolbarButtonStyleColorsClass=this.styles.addClass(new Ut("toolbar_button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolbarActiveButtonStyleColorsClass=this.styles.addClass(new Ut("toolbar_active_button",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new Xe("."+this.toolbarButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new Xe("."+this.toolbarButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `))},e.prototype.markerToolbarButtonClicked=function(t,r){this.setActiveButton(t),this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(i){return i("marker",r)}),this.markerButtonOverflowBlock.style.display="none"},e.prototype.actionToolbarButtonClicked=function(t,r){this.buttonClickListeners&&this.buttonClickListeners.length>0&&this.buttonClickListeners.forEach(function(i){return i("action",r)}),this.markerButtonOverflowBlock.style.display="none",this.setActiveButton(this.buttons[0])},e.prototype.setActiveButton=function(t){this.resetButtonStyles(),t.className=t.className.replace(this.uiStyleSettings.toolbarButtonStyleColorsClassName?this.uiStyleSettings.toolbarButtonStyleColorsClassName:this.toolbarButtonStyleColorsClass.name,"").trim(),t.className+=" "+(this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName?this.uiStyleSettings.toolbarActiveButtonStyleColorsClassName:this.toolbarActiveButtonStyleColorsClass.name)},e.prototype.setActiveMarkerButton=function(t){var r=this.markerButtons.find(function(i){return i.getAttribute("data-type-name")===t});r&&this.setActiveButton(r)},e.prototype.setCurrentMarker=function(t){var r=this;this.currentMarker=t,this.buttons.filter(function(i){return/delete|notes/.test(i.getAttribute("data-action"))}).forEach(function(i){r.currentMarker===void 0?(i.style.fillOpacity="0.4",i.style.pointerEvents="none"):(i.style.fillOpacity="1",i.style.pointerEvents="all")})},e}(),Hm=function(){function e(t,r,i,n){this.panels=[],this.panelButtons=[],this.markerjsContainer=t,this.displayMode=r,this.uiStyleSettings=i,this.styles=n,this.panelButtonClick=this.panelButtonClick.bind(this),this.addStyles()}return e.prototype.addStyles=function(){var t;this.toolboxStyleClass=this.styles.addClass(new Ut("toolbox",`
      width: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      font-family: sans-serif;
      `+(this.displayMode==="popup"?"height:"+2.5*this.uiStyleSettings.toolbarHeight+"px;":"")+`
      box-sizing: content-box;
      `+(this.displayMode==="popup"?"background-color: "+this.uiStyleSettings.canvasBackgroundColor+";":"")+`
      `+(this.displayMode==="inline"?"border-bottom-left-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      `+(this.displayMode==="inline"?"border-bottom-right-radius: "+Math.round(this.uiStyleSettings.toolbarHeight/10)+"px;":"")+`
      overflow: hidden;
    `)),this.toolboxStyleColorsClass=this.styles.addClass(new Ut("toolbox_colors",`
      color: `+this.uiStyleSettings.toolboxColor+`;
    `));var r=this.uiStyleSettings.toolbarHeight/4;this.toolboxButtonRowStyleClass=this.styles.addClass(new Ut("toolbox-button-row",`
      display: flex;
      cursor: default;
      box-sizing: content-box;
    `)),this.toolboxButtonRowStyleColorsClass=this.styles.addClass(new Ut("toolbox-button-row_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundColor+`;
    `)),this.toolboxPanelRowStyleClass=this.styles.addClass(new Ut("toolbox-panel-row",`
      display: flex;
      `+(this.displayMode==="inline"?"position: absolute;":"")+`
      `+(this.displayMode==="inline"?"bottom: "+this.uiStyleSettings.toolbarHeight+"px;":"")+`
      cursor: default;
      height: `+1.5*this.uiStyleSettings.toolbarHeight+`px;
      `+(this.displayMode==="inline"?"width: 100%;":"")+`
      box-sizing: content-box;
    `)),this.toolboxPanelRowStyleColorsClass=this.styles.addClass(new Ut("toolbox-panel-row_colors",`
      background-color: `+((t=this.uiStyleSettings.toolboxBackgroundColor)!==null&&t!==void 0?t:this.uiStyleSettings.toolbarBackgroundHoverColor)+`;
    `)),this.toolboxButtonStyleClass=this.styles.addClass(new Ut("toolbox_button",`
      display: inline-block;
      width: `+(this.uiStyleSettings.toolbarHeight-2*r)+`px;
      height: `+(this.uiStyleSettings.toolbarHeight-2*r)+`px;
      padding: `+r+`px;
      box-sizing: content-box;
    `)),this.toolboxButtonStyleColorsClass=this.styles.addClass(new Ut("toolbox-button_colors",`
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.toolboxActiveButtonStyleColorsClass=this.styles.addClass(new Ut("toolbox-active-button_colors",`
      background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`;
      fill: `+this.uiStyleSettings.toolbarColor+`;
    `)),this.styles.addRule(new Xe("."+this.toolboxButtonStyleColorsClass.name+":hover",`
        background-color: `+this.uiStyleSettings.toolbarBackgroundHoverColor+`
    `)),this.styles.addRule(new Xe("."+this.toolboxButtonStyleClass.name+" svg",`
      height: `+this.uiStyleSettings.toolbarHeight/2+`px;
    `)),this.styles.addRule(new Xe("."+this.toolboxPanelRowStyleClass.name+" > div",`
        scrollbar-width: thin;
        `)),this.styles.addRule(new Xe("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar",`
      height: 10px;
      width: 10px;
    `)),this.styles.addRule(new Xe("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-track",`
        background-color: transparent;
        `)),this.styles.addRule(new Xe("."+this.toolboxPanelRowStyleClass.name+" > div::-webkit-scrollbar-thumb",`
        background-color: #444;
        border-radius: 20px;
        border: 2px solid #aaa;
        `))},e.prototype.show=function(t){var r;this.uiContainer=document.createElement("div"),this.uiContainer.style.visibility=t,this.uiContainer.className=this.toolboxStyleClass.name+" "+((r=this.uiStyleSettings.toolboxStyleColorsClassName)!==null&&r!==void 0?r:this.toolboxStyleColorsClass.name),this.markerjsContainer.appendChild(this.uiContainer)},e.prototype.setPanelButtons=function(t){var r,i,n=this;this.panels=t,this.uiContainer!==void 0&&(this.uiContainer.innerHTML="",this.panelRow=document.createElement("div"),this.panelRow.className=this.toolboxPanelRowStyleClass.name+" "+((r=this.uiStyleSettings.toolboxPanelRowStyleColorsClassName)!==null&&r!==void 0?r:this.toolboxPanelRowStyleColorsClass.name),this.uiContainer.appendChild(this.panelRow),this.buttonRow=document.createElement("div"),this.buttonRow.className=this.toolboxButtonRowStyleClass.name+" "+((i=this.uiStyleSettings.toolboxButtonRowStyleColorsClassName)!==null&&i!==void 0?i:this.toolboxButtonRowStyleColorsClass.name)+" ",this.uiContainer.appendChild(this.buttonRow),this.panelButtons.splice(0),this.panels.forEach(function(s){var a;s.uiStyleSettings=n.uiStyleSettings;var o=document.createElement("div");o.className=n.toolboxButtonStyleClass.name+" "+((a=n.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&a!==void 0?a:n.toolboxButtonStyleColorsClass.name),o.innerHTML=s.icon,o.title=s.title,o.setAttribute("role","button"),o.setAttribute("aria-label",s.title),s.id&&o.setAttribute("data-action",s.id),o.addEventListener("click",function(){n.panelButtonClick(s)}),n.panelButtons.push(o),n.buttonRow.appendChild(o)}),this.displayMode==="inline"?this.panelRow.style.display="none":this.panelRow.style.visibility="hidden")},e.prototype.panelButtonClick=function(t){var r=this,i=-1;if(t!==this.activePanel){i=this.panels.indexOf(t),this.panelRow.innerHTML="";var n=t.getUi();n.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.panelRow.appendChild(n),this.panelRow.style.display="flex",this.panelRow.style.visibility="visible",this.panelRow.className=this.panelRow.className.replace(this.styles.fadeOutAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeInAnimationClassName,this.activePanel=t}else this.activePanel=void 0,this.panelRow.className=this.panelRow.className.replace(this.styles.fadeInAnimationClassName,""),this.panelRow.className+=" "+this.styles.fadeOutAnimationClassName,setTimeout(function(){r.displayMode==="inline"?r.panelRow.style.display="none":r.panelRow.style.visibility="hidden"},200);this.panelButtons.forEach(function(s,a){var o,l;s.className=r.toolboxButtonStyleClass.name+" "+(a===i?""+((o=r.uiStyleSettings.toolboxActiveButtonStyleColorsClassName)!==null&&o!==void 0?o:r.toolboxActiveButtonStyleColorsClass.name):""+((l=r.uiStyleSettings.toolboxButtonStyleColorsClassName)!==null&&l!==void 0?l:r.toolboxButtonStyleColorsClass.name))})},e}(),$i=function(){function e(t,r,i){this.title=t,this.icon=r,this._id=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e}(),we=function(e){function t(r,i,n,s,a){var o=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M17.5 12a1.5 1.5 0 01-1.5-1.5A1.5 1.5 0 0117.5 9a1.5 1.5 0 011.5 1.5 1.5 1.5 0 01-1.5 1.5m-3-4A1.5 1.5 0 0113 6.5 1.5 1.5 0 0114.5 5 1.5 1.5 0 0116 6.5 1.5 1.5 0 0114.5 8m-5 0A1.5 1.5 0 018 6.5 1.5 1.5 0 019.5 5 1.5 1.5 0 0111 6.5 1.5 1.5 0 019.5 8m-3 4A1.5 1.5 0 015 10.5 1.5 1.5 0 016.5 9 1.5 1.5 0 018 10.5 1.5 1.5 0 016.5 12M12 3a9 9 0 00-9 9 9 9 0 009 9 1.5 1.5 0 001.5-1.5c0-.39-.15-.74-.39-1-.23-.27-.38-.62-.38-1a1.5 1.5 0 011.5-1.5H16a5 5 0 005-5c0-4.42-4.03-8-9-8z"/></svg>',a||"color-picker-panel")||this;return o.colors=[],o.addTransparent=!1,o.colorBoxes=[],o.colors=i,o.currentColor=n,o.setCurrentColor=o.setCurrentColor.bind(o),o.getColorBox=o.getColorBox.bind(o),o}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.overflow="hidden",i.style.overflowX="scroll",i.style.whiteSpace="nowrap",this.colors.forEach(function(n){var s=r.getColorBox(n);i.appendChild(s),r.colorBoxes.push(s)}),i},t.prototype.getColorBox=function(r){var i=this,n=this.uiStyleSettings.toolbarHeight/4,s=this.uiStyleSettings.toolbarHeight-n,a=document.createElement("div");a.style.display="inline-block",a.style.boxSizing="content-box",a.style.width=s-2+"px",a.style.height=s-2+"px",a.style.padding="1px",a.style.marginRight="2px",a.style.marginBottom="2px",a.style.borderWidth="2px",a.style.borderStyle="solid",a.style.borderRadius=(s+2)/2+"px",a.style.borderColor=r===this.currentColor?this.uiStyleSettings.toolboxAccentColor:"transparent",a.addEventListener("click",function(){i.setCurrentColor(r,a)});var o=document.createElement("div");return o.style.display="inline-block",o.style.width=s-2+"px",o.style.height=s-2+"px",o.style.backgroundColor=r,o.style.borderRadius=s/2+"px",r==="transparent"&&(o.style.fill=this.uiStyleSettings.toolboxAccentColor,o.innerHTML=`<svg viewBox="0 0 24 24">
        <path d="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z" />
      </svg>`),a.appendChild(o),a},t.prototype.setCurrentColor=function(r,i){var n=this;this.currentColor=r,this.colorBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onColorChanged&&this.onColorChanged(r)},t}($i),od=function(){function e(t,r,i){this._state="new",this._isSelected=!1,this._container=t,this._overlayContainer=r,this.globalSettings=i,this.stateChanged=this.stateChanged.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this)}return Object.defineProperty(e.prototype,"typeName",{get:function(){return Object.getPrototypeOf(this).constructor.typeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overlayContainer",{get:function(){return this._overlayContainer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toolboxPanels",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.ownsTarget=function(t){return!1},Object.defineProperty(e.prototype,"isSelected",{get:function(){return this._isSelected},enumerable:!1,configurable:!0}),e.prototype.select=function(){this.container.style.cursor="move",this._isSelected=!0,this.manipulationStartState=this.getState()},e.prototype.deselect=function(){this.container.style.cursor="default",this._isSelected=!1,this.stateChanged()},e.prototype.pointerDown=function(t,r){},e.prototype.dblClick=function(t,r){},e.prototype.manipulate=function(t){},e.prototype.pointerUp=function(t){this.stateChanged()},e.prototype.dispose=function(){},e.prototype.addMarkerVisualToContainer=function(t){this.container.childNodes.length>0?this.container.insertBefore(t,this.container.childNodes[0]):this.container.appendChild(t)},e.prototype.getState=function(){return{typeName:e.typeName,state:this.state,notes:this.notes}},e.prototype.restoreState=function(t){this._state=t.state,this.notes=t.notes},e.prototype.scale=function(t,r){},e.prototype.colorChanged=function(t){this.onColorChanged&&this.onColorChanged(t),this.stateChanged()},e.prototype.fillColorChanged=function(t){this.onFillColorChanged&&this.onFillColorChanged(t),this.stateChanged()},e.prototype.stateChanged=function(){if(this.onStateChanged&&this.state!=="creating"&&this.state!=="new"){var t=this.getState();this.manipulationStartState!==void 0&&(this.manipulationStartState.state="select"),t.state="select",JSON.stringify(this.manipulationStartState)!=JSON.stringify(t)&&this.onStateChanged(this)}},e.typeName="MarkerBase",e}(),Vm=function(){function e(){this.findGripByVisual=this.findGripByVisual.bind(this)}return e.prototype.findGripByVisual=function(t){return this.topLeft.ownsTarget(t)?this.topLeft:this.topCenter.ownsTarget(t)?this.topCenter:this.topRight.ownsTarget(t)?this.topRight:this.centerLeft.ownsTarget(t)?this.centerLeft:this.centerRight.ownsTarget(t)?this.centerRight:this.bottomLeft.ownsTarget(t)?this.bottomLeft:this.bottomCenter.ownsTarget(t)?this.bottomCenter:this.bottomRight.ownsTarget(t)?this.bottomRight:void 0},e}(),lu=function(){function e(){this.GRIP_SIZE=10,this.visual=J.createGroup(),this.visual.appendChild(J.createCircle(1.5*this.GRIP_SIZE,[["fill","transparent"]])),this.visual.appendChild(J.createCircle(this.GRIP_SIZE,[["fill","#cccccc"],["fill-opacity","0.7"],["stroke","#333333"],["stroke-width","2"],["stroke-opacity","0.7"]]))}return e.prototype.ownsTarget=function(t){return t===this.visual||t===this.visual.childNodes[0]||t===this.visual.childNodes[1]},e}(),cs=function(){function e(){}return e.toITransformMatrix=function(t){return{a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}},e.toSVGMatrix=function(t,r){return t.a=r.a,t.b=r.b,t.c=r.c,t.d=r.d,t.e=r.e,t.f=r.f,t},e}(),Vn=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.left=0,s.top=0,s.width=0,s.height=0,s.defaultSize={x:50,y:20},s.offsetX=0,s.offsetY=0,s.rotationAngle=0,s.CB_DISTANCE=10,s._suppressMarkerCreateEvent=!1,s.container.transform.baseVal.appendItem(J.createTransform()),s.setupControlBox(),s}return Lt(t,e),Object.defineProperty(t.prototype,"centerX",{get:function(){return this.left+this.width/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this.top+this.height/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visual",{get:function(){return this._visual},set:function(r){this._visual=r;var i=J.createTransform();this._visual.transform.baseVal.appendItem(i)},enumerable:!1,configurable:!0}),t.prototype.ownsTarget=function(r){return!!e.prototype.ownsTarget.call(this,r)||!!(this.controlGrips.findGripByVisual(r)!==void 0||this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(r))},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.left=r.x,this.top=r.y),this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.manipulationStartWidth=this.width,this.manipulationStartHeight=this.height;var n=this.unrotatePoint(r);if(this.manipulationStartX=n.x,this.manipulationStartY=n.y,this.offsetX=n.x-this.left,this.offsetY=n.y-this.top,this.state!=="new")if(this.select(),this.activeGrip=this.controlGrips.findGripByVisual(i),this.activeGrip!==void 0)this._state="resize";else if(this.rotatorGrip!==void 0&&this.rotatorGrip.ownsTarget(i)){this.activeGrip=this.rotatorGrip;var s=this.rotatePoint({x:this.centerX,y:this.centerY});this.left=s.x-this.width/2,this.top=s.y-this.height/2,this.moveVisual({x:this.left,y:this.top});var a=this.container.transform.baseVal.getItem(0);a.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(a,0),this.adjustControlBox(),this._state="rotate"}else this._state="move"},t.prototype.pointerUp=function(r){var i=this.state;e.prototype.pointerUp.call(this,r),this.state==="creating"&&this.width<10&&this.height<10?(this.width=this.defaultSize.x,this.height=this.defaultSize.y):this.manipulate(r),this._state="select",i==="creating"&&this.onMarkerCreated&&this._suppressMarkerCreateEvent===!1&&this.onMarkerCreated(this)},t.prototype.moveVisual=function(r){this.visual.style.transform="translate("+r.x+"px, "+r.y+"px)"},t.prototype.manipulate=function(r){var i=this.unrotatePoint(r);this.state==="creating"?this.resize(r):this.state==="move"?(this.left=this.manipulationStartLeft+(i.x-this.manipulationStartLeft)-this.offsetX,this.top=this.manipulationStartTop+(i.y-this.manipulationStartTop)-this.offsetY,this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()):this.state==="resize"?this.resize(i):this.state==="rotate"&&this.rotate(r)},t.prototype.resize=function(r){var i=this.manipulationStartLeft,n=this.manipulationStartWidth,s=this.manipulationStartTop,a=this.manipulationStartHeight;switch(this.activeGrip){case this.controlGrips.bottomLeft:case this.controlGrips.centerLeft:case this.controlGrips.topLeft:i=this.manipulationStartLeft+r.x-this.manipulationStartX,n=this.manipulationStartWidth+this.manipulationStartLeft-i;break;case this.controlGrips.bottomRight:case this.controlGrips.centerRight:case this.controlGrips.topRight:case void 0:n=this.manipulationStartWidth+r.x-this.manipulationStartX}switch(this.activeGrip){case this.controlGrips.topCenter:case this.controlGrips.topLeft:case this.controlGrips.topRight:s=this.manipulationStartTop+r.y-this.manipulationStartY,a=this.manipulationStartHeight+this.manipulationStartTop-s;break;case this.controlGrips.bottomCenter:case this.controlGrips.bottomLeft:case this.controlGrips.bottomRight:case void 0:a=this.manipulationStartHeight+r.y-this.manipulationStartY}n>=0?(this.left=i,this.width=n):(this.left=i+n,this.width=-n),a>=0?(this.top=s,this.height=a):(this.top=s+a,this.height=-a),this.setSize()},t.prototype.setSize=function(){this.moveVisual({x:this.left,y:this.top}),this.adjustControlBox()},t.prototype.rotate=function(r){if(Math.abs(r.x-this.centerX)>.1){var i=Math.sign(r.x-this.centerX);this.rotationAngle=180*Math.atan((r.y-this.centerY)/(r.x-this.centerX))/Math.PI+90*i,this.applyRotation()}},t.prototype.applyRotation=function(){var r=this.container.transform.baseVal.getItem(0);r.setRotate(this.rotationAngle,this.centerX,this.centerY),this.container.transform.baseVal.replaceItem(r,0)},t.prototype.rotatePoint=function(r){if(this.rotationAngle===0)return r;var i=this.container.getCTM(),n=J.createPoint(r.x,r.y);return{x:(n=n.matrixTransform(i)).x,y:n.y}},t.prototype.unrotatePoint=function(r){if(this.rotationAngle===0)return r;var i=this.container.getCTM();i=i.inverse();var n=J.createPoint(r.x,r.y);return{x:(n=n.matrixTransform(i)).x,y:n.y}},t.prototype.select=function(){e.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},t.prototype.deselect=function(){e.prototype.deselect.call(this),this.controlBox.style.display="none"},t.prototype.setupControlBox=function(){this.controlBox=J.createGroup();var r=J.createTransform();r.setTranslate(-this.CB_DISTANCE/2,-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.appendItem(r),this.container.appendChild(this.controlBox),this.controlRect=J.createRect(this.width+this.CB_DISTANCE,this.height+this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"],["fill","transparent"],["pointer-events","none"]]),this.controlBox.appendChild(this.controlRect),this.globalSettings.disableRotation!==!0&&(this.rotatorGripLine=J.createLine((this.width+2*this.CB_DISTANCE)/2,this.top-this.CB_DISTANCE,(this.width+2*this.CB_DISTANCE)/2,this.top-3*this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.appendChild(this.rotatorGripLine)),this.controlGrips=new Vm,this.addControlGrips(),this.controlBox.style.display="none"},t.prototype.adjustControlBox=function(){var r=this.controlBox.transform.baseVal.getItem(0);r.setTranslate(this.left-this.CB_DISTANCE/2,this.top-this.CB_DISTANCE/2),this.controlBox.transform.baseVal.replaceItem(r,0),this.controlRect.setAttribute("width",(this.width+this.CB_DISTANCE).toString()),this.controlRect.setAttribute("height",(this.height+this.CB_DISTANCE).toString()),this.rotatorGripLine!==void 0&&(this.rotatorGripLine.setAttribute("x1",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y1",(-this.CB_DISTANCE/2).toString()),this.rotatorGripLine.setAttribute("x2",((this.width+this.CB_DISTANCE)/2).toString()),this.rotatorGripLine.setAttribute("y2",(3*-this.CB_DISTANCE).toString())),this.positionGrips()},t.prototype.addControlGrips=function(){this.controlGrips.topLeft=this.createGrip(),this.controlGrips.topCenter=this.createGrip(),this.controlGrips.topRight=this.createGrip(),this.controlGrips.centerLeft=this.createGrip(),this.controlGrips.centerRight=this.createGrip(),this.controlGrips.bottomLeft=this.createGrip(),this.controlGrips.bottomCenter=this.createGrip(),this.controlGrips.bottomRight=this.createGrip(),this.globalSettings.disableRotation!==!0&&(this.rotatorGrip=this.createGrip()),this.positionGrips()},t.prototype.createGrip=function(){var r=new lu;return r.visual.transform.baseVal.appendItem(J.createTransform()),this.controlBox.appendChild(r.visual),r},t.prototype.positionGrips=function(){var r=this.controlGrips.topLeft.GRIP_SIZE,i=-r/2,n=i,s=(this.width+this.CB_DISTANCE)/2-r/2,a=(this.height+this.CB_DISTANCE)/2-r/2,o=this.height+this.CB_DISTANCE-r/2,l=this.width+this.CB_DISTANCE-r/2;this.positionGrip(this.controlGrips.topLeft.visual,i,n),this.positionGrip(this.controlGrips.topCenter.visual,s,n),this.positionGrip(this.controlGrips.topRight.visual,l,n),this.positionGrip(this.controlGrips.centerLeft.visual,i,a),this.positionGrip(this.controlGrips.centerRight.visual,l,a),this.positionGrip(this.controlGrips.bottomLeft.visual,i,o),this.positionGrip(this.controlGrips.bottomCenter.visual,s,o),this.positionGrip(this.controlGrips.bottomRight.visual,l,o),this.rotatorGrip!==void 0&&this.positionGrip(this.rotatorGrip.visual,s,n-3*this.CB_DISTANCE)},t.prototype.positionGrip=function(r,i,n){var s=r.transform.baseVal.getItem(0);s.setTranslate(i,n),r.transform.baseVal.replaceItem(s,0)},t.prototype.hideControlBox=function(){this.controlBox.style.display="none"},t.prototype.showControlBox=function(){this.controlBox.style.display=""},t.prototype.getState=function(){return Object.assign({left:this.left,top:this.top,width:this.width,height:this.height,rotationAngle:this.rotationAngle,visualTransformMatrix:cs.toITransformMatrix(this.visual.transform.baseVal.getItem(0).matrix),containerTransformMatrix:cs.toITransformMatrix(this.container.transform.baseVal.getItem(0).matrix)},e.prototype.getState.call(this))},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var i=r;this.left=i.left,this.top=i.top,this.width=i.width,this.height=i.height,this.rotationAngle=i.rotationAngle,this.visual.transform.baseVal.getItem(0).setMatrix(cs.toSVGMatrix(this.visual.transform.baseVal.getItem(0).matrix,i.visualTransformMatrix)),this.container.transform.baseVal.getItem(0).setMatrix(cs.toSVGMatrix(this.container.transform.baseVal.getItem(0).matrix,i.containerTransformMatrix))},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i);var n=this.rotatePoint({x:this.left,y:this.top}),s=this.unrotatePoint({x:n.x*r,y:n.y*i});this.left=s.x,this.top=s.y,this.width=this.width*r,this.height=this.height*i,this.adjustControlBox()},t}(od),ld=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.fillColor="transparent",s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.opacity=1,s.setStrokeColor=s.setStrokeColor.bind(s),s.setFillColor=s.setFillColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.createVisual=s.createVisual.bind(s),s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual)},t.prototype.createVisual=function(){this.visual=J.createRect(1,1,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.setSize()},t.prototype.setSize=function(){e.prototype.setSize.call(this),J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]])},t.prototype.pointerUp=function(r){e.prototype.pointerUp.call(this,r),this.setSize()},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.visual&&J.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},t.prototype.setFillColor=function(r){this.fillColor=r,this.visual&&J.setAttributes(this.visual,[["fill",this.fillColor]]),this.stateChanged()},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.visual&&J.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.visual&&J.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},t.prototype.getState=function(){return Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},e.prototype.getState.call(this))},t.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.opacity=i.opacity,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.setSize()},t.title="Rectangle marker",t}(Vn),Xi=function(e){function t(r,i,n,s,a){var o=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M3 17h18v-2H3v2m0 3h18v-1H3v1m0-7h18v-3H3v3m0-9v4h18V4H3z"/></svg>',a||"line-width-panel")||this;return o.widths=[],o.widthBoxes=[],o.widths=i,o.currentWidth=n,o.setCurrentWidth=o.setCurrentWidth.bind(o),o}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",this.widths.forEach(function(n){var s=document.createElement("div");s.style.display="flex",s.style.flexGrow="2",s.style.alignItems="center",s.style.justifyContent="space-between",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.borderColor=n===r.currentWidth?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentWidth(n,s)}),i.appendChild(s);var a=document.createElement("div");a.innerText=n.toString(),a.style.marginRight="5px",s.appendChild(a);var o=document.createElement("div");o.style.minHeight="20px",o.style.flexGrow="2",o.style.display="flex",o.style.alignItems="center";var l=document.createElement("hr");l.style.minWidth="20px",l.style.border="0px",l.style.borderTop=n+"px solid "+r.uiStyleSettings.toolboxColor,l.style.flexGrow="2",o.appendChild(l),s.appendChild(o),r.widthBoxes.push(s)}),i},t.prototype.setCurrentWidth=function(r,i){var n=this;this.currentWidth=r,this.widthBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onWidthChanged&&this.onWidthChanged(this.currentWidth)},t}($i),jn=function(e){function t(r,i,n,s,a){var o=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M3 16h5v-2H3v2m6.5 0h5v-2h-5v2m6.5 0h5v-2h-5v2M3 20h2v-2H3v2m4 0h2v-2H7v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2m4 0h2v-2h-2v2M3 12h8v-2H3v2m10 0h8v-2h-8v2M3 4v4h18V4H3z"/></svg>',a||"line-style-panel")||this;return o.styles=[],o.styleBoxes=[],o.styles=i,o.currentStyle=n,o.setCurrentStyle=o.setCurrentStyle.bind(o),o}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",this.styles.forEach(function(n){var s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="space-between",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.overflow="hidden",s.style.maxWidth=100/r.styles.length-5+"%",s.style.borderColor=n===r.currentStyle?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentStyle(n,s)}),i.appendChild(s);var a=document.createElement("div");a.style.minHeight="20px",a.style.flexGrow="2",a.style.overflow="hidden";var o=`<svg width="100" height="20">
      <line x1="0" y1="10" x2="100" y2="10" stroke="`+r.uiStyleSettings.toolboxColor+'" stroke-width="3" '+(n!==""?'stroke-dasharray="'+n+'"':"")+` />
  </svg>`;a.innerHTML=o,s.appendChild(a),r.styleBoxes.push(s)}),i},t.prototype.setCurrentStyle=function(r,i){var n=this;this.currentStyle=r,this.styleBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onStyleChanged&&this.onStyleChanged(this.currentStyle)},t}($i),_o=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.strokeColor=n.defaultColor,s.strokeWidth=n.defaultStrokeWidth,s.strokeDasharray=n.defaultStrokeDasharray,s.strokePanel=new we("Line color",n.defaultColorSet,n.defaultColor),s.strokePanel.onColorChanged=s.setStrokeColor,s.strokeWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new jn("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s}return Lt(t,e),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="FrameMarker",t.title="Frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4m14 11H6V8h12v9z"/></svg>',t}(ld),jm=function(){this.defaultColorSet=["#EF4444","#10B981","#2563EB","#FFFF00","#7C3AED","#F472B6","#000000","#FFFFFF"],this.defaultColor=this.defaultColorSet[0],this.defaultFillColor=this.defaultColorSet[0],this.defaultStrokeColor=this.defaultColorSet[7],this.defaultHighlightColor=this.defaultColorSet[3],this.defaultStrokeWidth=3,this.defaultStrokeDasharray="",this.defaultHighlightOpacity=.5,this.defaultFontFamily="Helvetica, Arial, sans-serif",this.defaultStrokeWidths=[1,2,3,5,10],this.defaultStrokeDasharrays=["","3","12 3","9 6 3 6"],this.defaultOpacitySteps=[.1,.25,.5,.75,1],this.displayMode="inline",this.defaultFontFamilies=['Times, "Times New Roman", serif',"Helvetica, Arial, sans-serif",'Courier, "Courier New", monospace',"cursive","fantasy"],this.popupMargin=30,this.newFreehandMarkerOnPointerUp=!1,this.defaultColorsFollowCurrentColors=!1,this.freehandPixelRatio=1,this.disableRotation=!1,this.defaultCaptionFontSize="1rem",this.defaultCaptionText="Text",this.wrapText=!1,this.defaultText="Your text here"},ud=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.x1=0,s.y1=0,s.x2=0,s.y2=0,s.defaultLength=50,s.manipulationStartX=0,s.manipulationStartY=0,s.manipulationStartX1=0,s.manipulationStartY1=0,s.manipulationStartX2=0,s.manipulationStartY2=0,s.setupControlBox(),s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!!e.prototype.ownsTarget.call(this,r)||!(!this.grip1.ownsTarget(r)&&!this.grip2.ownsTarget(r))},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.manipulationStartX=r.x,this.manipulationStartY=r.y,this.state==="new"&&(this.x1=r.x,this.y1=r.y,this.x2=r.x,this.y2=r.y),this.manipulationStartX1=this.x1,this.manipulationStartY1=this.y1,this.manipulationStartX2=this.x2,this.manipulationStartY2=this.y2,this.state!=="new"&&(this.select(),this.grip1.ownsTarget(i)?this.activeGrip=this.grip1:this.grip2.ownsTarget(i)?this.activeGrip=this.grip2:this.activeGrip=void 0,this.activeGrip?this._state="resize":this._state="move")},t.prototype.pointerUp=function(r){var i=this.state;e.prototype.pointerUp.call(this,r),this.state==="creating"&&Math.abs(this.x1-this.x2)<10&&Math.abs(this.y1-this.y2)<10?(this.x2=this.x1+this.defaultLength,this.adjustVisual(),this.adjustControlBox()):this.manipulate(r),this._state="select",i==="creating"&&this.onMarkerCreated&&this.onMarkerCreated(this)},t.prototype.adjustVisual=function(){},t.prototype.manipulate=function(r){this.state==="creating"?this.resize(r):this.state==="move"?(this.x1=this.manipulationStartX1+r.x-this.manipulationStartX,this.y1=this.manipulationStartY1+r.y-this.manipulationStartY,this.x2=this.manipulationStartX2+r.x-this.manipulationStartX,this.y2=this.manipulationStartY2+r.y-this.manipulationStartY,this.adjustVisual(),this.adjustControlBox()):this.state==="resize"&&this.resize(r)},t.prototype.resize=function(r){switch(this.activeGrip){case this.grip1:this.x1=r.x,this.y1=r.y;break;case this.grip2:case void 0:this.x2=r.x,this.y2=r.y}this.adjustVisual(),this.adjustControlBox()},t.prototype.select=function(){e.prototype.select.call(this),this.adjustControlBox(),this.controlBox.style.display=""},t.prototype.deselect=function(){e.prototype.deselect.call(this),this.controlBox.style.display="none"},t.prototype.setupControlBox=function(){this.controlBox=J.createGroup(),this.container.appendChild(this.controlBox),this.addControlGrips(),this.controlBox.style.display="none"},t.prototype.adjustControlBox=function(){this.positionGrips()},t.prototype.addControlGrips=function(){this.grip1=this.createGrip(),this.grip2=this.createGrip(),this.positionGrips()},t.prototype.createGrip=function(){var r=new lu;return r.visual.transform.baseVal.appendItem(J.createTransform()),this.controlBox.appendChild(r.visual),r},t.prototype.positionGrips=function(){var r=this.grip1.GRIP_SIZE;this.positionGrip(this.grip1.visual,this.x1-r/2,this.y1-r/2),this.positionGrip(this.grip2.visual,this.x2-r/2,this.y2-r/2)},t.prototype.positionGrip=function(r,i,n){var s=r.transform.baseVal.getItem(0);s.setTranslate(i,n),r.transform.baseVal.replaceItem(s,0)},t.prototype.getState=function(){return Object.assign({x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2},e.prototype.getState.call(this))},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var i=r;this.x1=i.x1,this.y1=i.y1,this.x2=i.x2,this.y2=i.y2},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.x1=this.x1*r,this.y1=this.y1*i,this.x2=this.x2*r,this.y2=this.y2*i,this.adjustVisual(),this.adjustControlBox()},t}(od),uu=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.setStrokeColor=s.setStrokeColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.strokeColor=n.defaultColor,s.strokeWidth=n.defaultStrokeWidth,s.strokeDasharray=n.defaultStrokeDasharray,s.strokePanel=new we("Line color",n.defaultColorSet,n.defaultColor),s.strokePanel.onColorChanged=s.setStrokeColor,s.strokeWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new jn("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.selectorLine&&r!==this.visibleLine)},t.prototype.createVisual=function(){this.visual=J.createGroup(),this.selectorLine=J.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()]]),this.visibleLine=J.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.visual.appendChild(this.selectorLine),this.visual.appendChild(this.visibleLine),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.adjustVisual(),this._state="creating")},t.prototype.adjustVisual=function(){this.selectorLine&&this.visibleLine&&(this.selectorLine.setAttribute("x1",this.x1.toString()),this.selectorLine.setAttribute("y1",this.y1.toString()),this.selectorLine.setAttribute("x2",this.x2.toString()),this.selectorLine.setAttribute("y2",this.y2.toString()),this.visibleLine.setAttribute("x1",this.x1.toString()),this.visibleLine.setAttribute("y1",this.y1.toString()),this.visibleLine.setAttribute("x2",this.x2.toString()),this.visibleLine.setAttribute("y2",this.y2.toString()),J.setAttributes(this.visibleLine,[["stroke",this.strokeColor]]),J.setAttributes(this.visibleLine,[["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.visibleLine,[["stroke-dasharray",this.strokeDasharray.toString()]]))},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.adjustVisual(),this.colorChanged(r)},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.adjustVisual()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.adjustVisual(),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var i=r;this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.createVisual(),this.adjustVisual()},t.typeName="LineMarker",t.title="Line marker",t.icon='<svg viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>',t}(ud),cu=function(e){function t(r,i,n,s,a){var o=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M17 8h3v12h1v1h-4v-1h1v-3h-4l-1.5 3H14v1h-4v-1h1l6-12m1 1l-3.5 7H18V9M5 3h5c1.11 0 2 .89 2 2v11H9v-5H6v5H3V5c0-1.11.89-2 2-2m1 2v4h3V5H6z"/></svg>',a||"font-family-panel")||this;return o.fonts=[],o.fontBoxes=[],o.fonts=i,o.currentFont=n,o.setCurrentFont=o.setCurrentFont.bind(o),o}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.overflow="hidden",i.style.flexGrow="2",this.fonts.forEach(function(n){var s=document.createElement("div");s.style.display="inline-block",s.style.alignItems="center",s.style.justifyContent="space-between",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.overflow="hidden",s.style.maxWidth=100/r.fonts.length-5+"%",s.style.borderColor=n===r.currentFont?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentFont(n,s)}),i.appendChild(s);var a=document.createElement("div");a.style.display="flex",a.style.minHeight="20px",a.style.flexGrow="2",a.style.fontFamily=n,a.style.overflow="hidden";var o=document.createElement("div");o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.textOverflow="ellipsis",o.innerHTML="The quick brown fox jumps over the lazy dog",a.appendChild(o),s.appendChild(a),r.fontBoxes.push(s)}),i},t.prototype.setCurrentFont=function(r,i){var n=this;this.currentFont=r,this.fontBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onFontChanged&&this.onFontChanged(this.currentFont)},t}($i),en=function(e){function t(r,i,n){var s,a=e.call(this,r,i,n)||this;return a.color="transparent",a.padding=5,a.DEFAULT_TEXT="your text here",a.isMoved=!1,a.color=n.defaultColor,a.fontFamily=n.defaultFontFamily,a.text=(s=n.defaultText)!==null&&s!==void 0?s:a.DEFAULT_TEXT,a.defaultSize={x:100,y:30},a.setColor=a.setColor.bind(a),a.setFont=a.setFont.bind(a),a.renderText=a.renderText.bind(a),a.sizeText=a.sizeText.bind(a),a.textEditDivClicked=a.textEditDivClicked.bind(a),a.showTextEditor=a.showTextEditor.bind(a),a.setSize=a.setSize.bind(a),a.positionTextEditor=a.positionTextEditor.bind(a),a.wrapText=a.wrapText.bind(a),a.colorPanel=new we("Color",n.defaultColorSet,n.defaultColor),a.colorPanel.onColorChanged=a.setColor,a.fontFamilyPanel=new cu("Font",n.defaultFontFamilies,n.defaultFontFamily),a.fontFamilyPanel.onFontChanged=a.setFont,a}return Lt(t,e),t.prototype.ownsTarget=function(r){if(e.prototype.ownsTarget.call(this,r)||r===this.visual||r===this.textElement||r===this.bgRectangle)return!0;var i=!1;return this.textElement.childNodes.forEach(function(n){n===r&&(i=!0)}),i},t.prototype.createVisual=function(){this.visual=J.createGroup(),this.bgRectangle=J.createRect(1,1,[["fill","transparent"]]),this.visual.appendChild(this.bgRectangle),this.textElement=J.createText([["fill",this.color],["font-family",this.fontFamily],["font-size","16px"],["x","0"],["y","0"]]),this.textElement.transform.baseVal.appendItem(J.createTransform()),this.textElement.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.textElement),this.addMarkerVisualToContainer(this.visual),this.renderText()},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.isMoved=!1,this.pointerDownPoint=r,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.wrapText=function(){function r(u){var c=u[0].length;return u.forEach(function(h){h.length>c&&(c=h.length)}),.35*c/u.length}if(this.text!==""){for(var i=this.text.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/),n=1*this.width/this.height,s=new(Array.bind.apply(Array,An([void 0],i))),a=r(s),o=Number.MAX_VALUE,l=function(){var u=s[0];s.forEach(function(c){c.length>u.length&&(u=c)}),(o=u.lastIndexOf(" ",o-1))>0?(s=[],i.forEach(function(c){for(var h=c;h.length>o;){var f=h.lastIndexOf(" ",o);f<0&&(f=h.indexOf(" ")),f>0?(s.push(h.substring(0,f)),h=h.substring(f).trim()):(s.push(h),h="")}s.push(h)}),a=r(s)):a=-1};a>n;)l();return s.join(`\r
`)}return this.text},t.prototype.renderText=function(){var r=this;if(this.textElement){for(;this.textElement.lastChild;)this.textElement.removeChild(this.textElement.lastChild);(this.globalSettings.wrapText?this.wrapText():this.text).split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/).forEach(function(i){r.textElement.appendChild(J.createTSpan(i.trim()===""?" ":i.trim(),[["x","0"],["dy","1.2em"]]))}),setTimeout(this.sizeText,10)}},t.prototype.getTextScale=function(){var r=this.textElement.getBBox(),i=1;if(r.width>0&&r.height>0){var n=(1*this.width-this.width*this.padding*2/100)/r.width,s=(1*this.height-this.height*this.padding*2/100)/r.height;i=Math.min(n,s)}return i},t.prototype.getTextPosition=function(r){var i=window.getComputedStyle(this.textElement).direction==="rtl"?1:-1,n=this.textElement.getBBox(),s=0,a=0;return n.width>0&&n.height>0&&(s=(this.width+i*n.width*r)/2,a=this.height/2-n.height*r/2),{x:s,y:a}},t.prototype.sizeText=function(){var r=this.textElement.getBBox(),i=this.getTextScale(),n=this.getTextPosition(i);n.y-=r.y*i,navigator.userAgent.indexOf("Edge/")>-1?this.textElement.style.transform="translate("+n.x+"px, "+n.y+"px) scale("+i+", "+i+")":(this.textElement.transform.baseVal.getItem(0).setTranslate(n.x,n.y),this.textElement.transform.baseVal.getItem(1).setScale(i,i))},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(r.x-this.pointerDownPoint.x)>5||Math.abs(r.y-this.pointerDownPoint.y)>5)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.isMoved=!0,this.setSize(),this.globalSettings.wrapText?this.renderText():this.sizeText()},t.prototype.setSize=function(){e.prototype.setSize.call(this),this.visual&&this.bgRectangle&&(J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.bgRectangle,[["width",this.width.toString()],["height",this.height.toString()]]))},t.prototype.pointerUp=function(r){var i=this.state;i==="creating"&&(this._suppressMarkerCreateEvent=!0),e.prototype.pointerUp.call(this,r),this.setSize(),(i==="creating"||!this.isMoved&&Date.now()-this.pointerDownTimestamp>500)&&this.showTextEditor(),this.pointerDownPoint=void 0},t.prototype.showTextEditor=function(){var r=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditor=document.createElement("div"),this.textEditor.style.position="absolute",this.textEditor.style.fontFamily=this.fontFamily,this.textEditor.style.lineHeight="1em",this.textEditor.innerText=this.text,this.textEditor.contentEditable="true",this.textEditor.style.color=this.color,this.textEditor.style.whiteSpace="pre",this.positionTextEditor(),this.textEditor.addEventListener("pointerup",function(i){i.stopPropagation()}),this.globalSettings.wrapText||this.textEditor.addEventListener("input",function(){for(var i=Number.parseFloat(r.textEditor.style.fontSize);r.textEditor.clientWidth>=Number.parseInt(r.textEditor.style.maxWidth)&&i>.9;)i-=.1,r.textEditor.style.fontSize=Math.max(i,.9)+"em"}),this.textEditor.addEventListener("keyup",function(i){i.cancelBubble=!0}),this.textEditor.addEventListener("paste",function(i){if(i.clipboardData){var n=i.clipboardData.getData("text"),s=window.getSelection();if(!s.rangeCount)return!1;s.deleteFromDocument(),s.getRangeAt(0).insertNode(document.createTextNode(n)),i.preventDefault()}}),this.textEditDiv.addEventListener("pointerup",function(){r.textEditDivClicked(r.textEditor.innerText)}),this.textEditDiv.appendChild(this.textEditor),this.overlayContainer.appendChild(this.textEditDiv),this.hideVisual(),this.textEditor.focus(),document.execCommand("selectAll")},t.prototype.positionTextEditor=function(){if(this.state==="edit")if(this.textEditor===void 0)this.showTextEditor();else if(this.globalSettings.wrapText)this.textEditor.style.left=this.left+this.padding+"px",this.textEditor.style.top=this.top+this.padding+"px",this.textEditor.style.width=this.width-2*this.padding+"px",this.textEditor.style.height=this.height-2*this.padding+"px",this.textEditor.style.maxHeight=this.textEditor.style.height,this.textEditor.style.whiteSpace="wrap";else{this.textElement.style.display="";var r=this.getTextScale(),i=this.rotatePoint({x:this.left+this.width/2,y:this.top+this.height/2}),n=this.textElement.getBBox(),s={x:n.width*r,y:n.height*r};i.x-=s.x/2,i.y-=s.y/2,this.textEditor.style.top=i.y+"px",this.textEditor.style.left=i.x+"px",this.textEditor.style.maxWidth=this.overlayContainer.offsetWidth-i.x+"px",this.textEditor.style.fontSize=Math.max(16*r,12)+"px",this.textElement.style.display="none"}},t.prototype.textEditDivClicked=function(r){this.text=r.trim(),this.overlayContainer.innerHTML="",this.renderText(),this.showVisual(),this._suppressMarkerCreateEvent&&(this._suppressMarkerCreateEvent=!1,this.onMarkerCreated&&this.onMarkerCreated(this)),this.stateChanged()},t.prototype.select=function(){e.prototype.select.call(this),this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText)},t.prototype.deselect=function(){this.state==="edit"&&this.textEditDivClicked(this.textEditor.innerText),e.prototype.deselect.call(this)},t.prototype.dblClick=function(r,i){e.prototype.dblClick.call(this,r,i),this.showTextEditor()},t.prototype.setColor=function(r){this.textElement&&J.setAttributes(this.textElement,[["fill",r]]),this.color=r,this.textEditor&&(this.textEditor.style.color=this.color),this.colorChanged(r)},t.prototype.setFont=function(r){this.textElement&&J.setAttributes(this.textElement,[["font-family",r]]),this.fontFamily=r,this.textEditor&&(this.textEditor.style.fontFamily=this.fontFamily),this.renderText(),this.stateChanged()},t.prototype.hideVisual=function(){this.textElement.style.display="none",this.hideControlBox()},t.prototype.showVisual=function(){this.state==="edit"&&(this._state="select"),this.textElement.style.display="",this.showControlBox()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({color:this.color,fontFamily:this.fontFamily,padding:this.padding,text:this.text,wrapText:this.globalSettings.wrapText},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){var i=r;this.color=i.color,this.fontFamily=i.fontFamily,this.padding=i.padding,this.text=i.text,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize(),this.globalSettings.wrapText&&this.renderText()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.setSize(),this.sizeText(),this.positionTextEditor()},t.typeName="TextMarker",t.title="Text marker",t.icon='<svg viewBox="0 0 24 24"><path d="M9.6 14L12 7.7l2.4 6.3M11 5L5.5 19h2.2l1.1-3H15l1.1 3h2.2L13 5h-2z"/></svg>',t}(Vn),Qi=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.color="transparent",s.lineWidth=3,s.drawing=!1,s.pixelRatio=1,s.color=n.defaultColor,s.lineWidth=n.defaultStrokeWidth,s.pixelRatio=n.freehandPixelRatio,s.setColor=s.setColor.bind(s),s.addCanvas=s.addCanvas.bind(s),s.finishCreation=s.finishCreation.bind(s),s.setLineWidth=s.setLineWidth.bind(s),s.colorPanel=new we("Color",n.defaultColorSet,n.defaultColor),s.colorPanel.onColorChanged=s.setColor,s.lineWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.lineWidthPanel.onWidthChanged=s.setLineWidth,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.drawingImage)},t.prototype.createVisual=function(){this.visual=J.createGroup(),this.drawingImage=J.createImage(),this.visual.appendChild(this.drawingImage);var r=J.createTransform();this.visual.transform.baseVal.appendItem(r),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,i){this.state==="new"&&(this.addCanvas(),this.createVisual(),this._state="creating"),this.state==="creating"?(this.canvasContext.strokeStyle=this.color,this.canvasContext.lineWidth=this.lineWidth,this.canvasContext.beginPath(),this.canvasContext.moveTo(r.x,r.y),this.drawing=!0):e.prototype.pointerDown.call(this,r,i)},t.prototype.manipulate=function(r){this.state==="creating"?this.drawing&&(this.canvasContext.lineTo(r.x,r.y),this.canvasContext.stroke()):e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),J.setAttributes(this.visual,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]])},t.prototype.pointerUp=function(r){this._state==="creating"?this.drawing&&(this.canvasContext.closePath(),this.drawing=!1,this.globalSettings.newFreehandMarkerOnPointerUp&&this.finishCreation()):e.prototype.pointerUp.call(this,r)},t.prototype.addCanvas=function(){this.overlayContainer.innerHTML="",this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.overlayContainer.clientWidth*this.pixelRatio,this.canvasElement.height=this.overlayContainer.clientHeight*this.pixelRatio,this.canvasContext=this.canvasElement.getContext("2d"),this.canvasContext.scale(this.pixelRatio,this.pixelRatio),this.overlayContainer.appendChild(this.canvasElement)},t.prototype.select=function(){this.state==="creating"&&this.finishCreation(),e.prototype.select.call(this)},t.prototype.deselect=function(){this.state==="creating"&&this.finishCreation(),e.prototype.deselect.call(this)},t.prototype.finishCreation=function(){for(var r=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),i=[this.canvasElement.width+1,this.canvasElement.height+1,-1,-1],n=i[0],s=i[1],a=i[2],o=i[3],l=!1,u=0;u<this.canvasElement.height;u++)for(var c=0;c<this.canvasElement.width;c++)r.data[u*this.canvasElement.width*4+4*c+3]>0&&(l=!0,u<s&&(s=u),c<n&&(n=c),u>o&&(o=u),c>a&&(a=c));if(l){this.left=n/this.pixelRatio,this.top=s/this.pixelRatio,this.width=(a-n)/this.pixelRatio,this.height=(o-s)/this.pixelRatio;var h=document.createElement("canvas");h.width=a-n,h.height=o-s,h.getContext("2d").putImageData(this.canvasContext.getImageData(n,s,a-n,o-s),0,0),this.drawingImgUrl=h.toDataURL("image/png"),this.setDrawingImage(),this._state="select",this.onMarkerCreated&&this.onMarkerCreated(this)}this.overlayContainer.innerHTML=""},t.prototype.setDrawingImage=function(){J.setAttributes(this.drawingImage,[["width",this.width.toString()],["height",this.height.toString()]]),J.setAttributes(this.drawingImage,[["href",this.drawingImgUrl]]),this.moveVisual({x:this.left,y:this.top})},t.prototype.setColor=function(r){this.color=r,this.colorChanged(r)},t.prototype.setLineWidth=function(r){this.lineWidth=r},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return this.state==="new"||this.state==="creating"?[this.colorPanel,this.lineWidthPanel]:[]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({drawingImgUrl:this.drawingImgUrl},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){this.createVisual(),e.prototype.restoreState.call(this,r),this.drawingImgUrl=r.drawingImgUrl,this.setDrawingImage()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.setDrawingImage()},t.typeName="FreehandMarker",t.title="Freehand marker",t.icon='<svg viewBox="0 0 24 24"><path d="M9.75 20.85c1.78-.7 1.39-2.63.49-3.85-.89-1.25-2.12-2.11-3.36-2.94A9.817 9.817 0 014.54 12c-.28-.33-.85-.94-.27-1.06.59-.12 1.61.46 2.13.68.91.38 1.81.82 2.65 1.34l1.01-1.7C8.5 10.23 6.5 9.32 4.64 9.05c-1.06-.16-2.18.06-2.54 1.21-.32.99.19 1.99.77 2.77 1.37 1.83 3.5 2.71 5.09 4.29.34.33.75.72.95 1.18.21.44.16.47-.31.47-1.24 0-2.79-.97-3.8-1.61l-1.01 1.7c1.53.94 4.09 2.41 5.96 1.79m11.09-15.6c.22-.22.22-.58 0-.79l-1.3-1.3a.562.562 0 00-.78 0l-1.02 1.02 2.08 2.08M11 10.92V13h2.08l6.15-6.15-2.08-2.08L11 10.92z"/></svg>',t}(Vn),$m=function(e){function t(r,i,n,s){var a=e.call(this,r,n||'<svg viewBox="0 0 24 24"><path d="M8 14v4l-6-6 6-6v4h8V6l6 6-6 6v-4H8z"/></svg>',s||"arrow-type-panel")||this;return a.typeBoxes=[],a.currentType=i,a.setCurrentType=a.setCurrentType.bind(a),a}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2";for(var n=function(o){var l="both";switch(o){case 0:l="both";break;case 1:l="start";break;case 2:l="end";break;case 3:l="none"}var u=document.createElement("div");if(u.style.display="flex",u.style.flexGrow="2",u.style.alignItems="center",u.style.justifyContent="space-between",u.style.padding="5px",u.style.borderWidth="2px",u.style.borderStyle="solid",u.style.borderColor=l===s.currentType?s.uiStyleSettings.toolboxAccentColor:"transparent",u.addEventListener("click",function(){r.setCurrentType(l,u)}),i.appendChild(u),l==="both"||l==="start"){var c=document.createElement("div");c.style.display="flex",c.style.alignItems="center",c.style.minHeight="20px",c.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,5 10,0 10,10" fill="`+(s.uiStyleSettings!==void 0?s.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,c.style.marginLeft="5px",u.appendChild(c)}var h=document.createElement("div");h.style.display="flex",h.style.alignItems="center",h.style.minHeight="20px",h.style.flexGrow="2";var f=document.createElement("hr");if(f.style.minWidth="20px",f.style.border="0px",f.style.borderTop="3px solid "+(s.uiStyleSettings!==void 0?s.uiStyleSettings.toolboxColor:"#eeeeee"),f.style.flexGrow="2",h.appendChild(f),u.appendChild(h),l==="both"||l==="end"){var d=document.createElement("div");d.style.display="flex",d.style.alignItems="center",d.style.minHeight="20px",d.innerHTML=`<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,0 10,5 0,10" fill="`+(s.uiStyleSettings!==void 0?s.uiStyleSettings.toolboxColor:"#eeeeee")+`" />
        </svg>`,d.style.marginRight="5px",u.appendChild(d)}s.typeBoxes.push(u)},s=this,a=0;a<4;a++)n(a);return i},t.prototype.setCurrentType=function(r,i){var n=this;this.currentType=r,this.typeBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings!==void 0?n.uiStyleSettings.toolboxAccentColor:"#3080c3":"transparent"}),this.onArrowTypeChanged&&this.onArrowTypeChanged(this.currentType)},t}($i),Eo=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.arrowType="end",s.arrowBaseHeight=10,s.arrowBaseWidth=10,s.getArrowPoints=s.getArrowPoints.bind(s),s.setArrowType=s.setArrowType.bind(s),s.arrowTypePanel=new $m("Arrow type","end"),s.arrowTypePanel.onArrowTypeChanged=s.setArrowType,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.arrow1&&r!==this.arrow2)},t.prototype.getArrowPoints=function(r,i){var n=this.arrowBaseWidth+2*this.strokeWidth,s=this.arrowBaseHeight+2*this.strokeWidth;return r-n/2+","+(i+s/2)+" "+r+","+(i-s/2)+" "+(r+n/2)+","+(i+s/2)},t.prototype.createTips=function(){this.arrow1=J.createPolygon(this.getArrowPoints(this.x1,this.y1),[["fill",this.strokeColor]]),this.arrow1.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.arrow1),this.arrow2=J.createPolygon(this.getArrowPoints(this.x2,this.y2),[["fill",this.strokeColor]]),this.arrow2.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.arrow2)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="creating"&&this.createTips()},t.prototype.adjustVisual=function(){if(e.prototype.adjustVisual.call(this),this.arrow1&&this.arrow2){this.arrow1.style.display=this.arrowType==="both"||this.arrowType==="start"?"":"none",this.arrow2.style.display=this.arrowType==="both"||this.arrowType==="end"?"":"none",J.setAttributes(this.arrow1,[["points",this.getArrowPoints(this.x1,this.y1)],["fill",this.strokeColor]]),J.setAttributes(this.arrow2,[["points",this.getArrowPoints(this.x2,this.y2)],["fill",this.strokeColor]]);var r=0;Math.abs(this.x1-this.x2)>.1&&(r=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2));var i=this.arrow1.transform.baseVal.getItem(0);i.setRotate(r,this.x1,this.y1),this.arrow1.transform.baseVal.replaceItem(i,0);var n=this.arrow2.transform.baseVal.getItem(0);n.setRotate(r+180,this.x2,this.y2),this.arrow2.transform.baseVal.replaceItem(n,0)}},t.prototype.setArrowType=function(r){this.arrowType=r,this.adjustVisual(),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel,this.arrowTypePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({arrowType:this.arrowType},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var i=r;this.arrowType=i.arrowType,this.createTips(),this.adjustVisual()},t.typeName="ArrowMarker",t.title="Arrow marker",t.icon='<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 7 15.59V9H5v10h10v-2H8.41L19 6.41z"/></svg>',t}(uu),cd=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.fillColor=n.defaultFillColor,s.strokeWidth=0,s.fillPanel=new we("Color",n.defaultColorSet,n.defaultFillColor),s.fillPanel.onColorChanged=s.setFillColor,s}return Lt(t,e),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.fillPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="CoverMarker",t.title="Cover marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 6v13h16V6H4z"/></svg>',t}(ld),hd=function(e){function t(r,i,n,s,a){var o=e.call(this,r,s||'<svg viewBox="0 0 24 24"><path d="M17.66 8L12 2.35 6.34 8A8.02 8.02 0 004 13.64c0 2 .78 4.11 2.34 5.67a7.99 7.99 0 0011.32 0c1.56-1.56 2.34-3.67 2.34-5.67S19.22 9.56 17.66 8M6 14c0-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 18 12 18 14H6z"/></svg>',a||"opacity-panel")||this;return o.opacities=[],o.opacityBoxes=[],o.opacities=i,o.currentOpacity=n,o.setCurrentOpacity=o.setCurrentOpacity.bind(o),o}return Lt(t,e),t.prototype.getUi=function(){var r=this,i=document.createElement("div");return i.style.display="flex",i.style.overflow="hidden",i.style.flexGrow="2",i.style.justifyContent="space-between",this.opacities.forEach(function(n){var s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.padding="5px",s.style.borderWidth="2px",s.style.borderStyle="solid",s.style.borderColor=n===r.currentOpacity?r.uiStyleSettings.toolboxAccentColor:"transparent",s.addEventListener("click",function(){r.setCurrentOpacity(n,s)}),i.appendChild(s);var a=document.createElement("div");a.innerText=100*n+"%",s.appendChild(a),r.opacityBoxes.push(s)}),i},t.prototype.setCurrentOpacity=function(r,i){var n=this;this.currentOpacity=r,this.opacityBoxes.forEach(function(s){s.style.borderColor=s===i?n.uiStyleSettings.toolboxAccentColor:"transparent"}),this.onOpacityChanged&&this.onOpacityChanged(this.currentOpacity)},t}($i),ko=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.setOpacity=s.setOpacity.bind(s),s.fillColor=n.defaultHighlightColor,s.strokeWidth=0,s.opacity=n.defaultHighlightOpacity,s.fillPanel=new we("Color",n.defaultColorSet,s.fillColor),s.fillPanel.onColorChanged=s.setFillColor,s.opacityPanel=new hd("Opacity",n.defaultOpacitySteps,s.opacity),s.opacityPanel.onOpacityChanged=s.setOpacity,s}return Lt(t,e),t.prototype.setOpacity=function(r){this.opacity=r,this.visual&&J.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.fillPanel,this.opacityPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="HighlightMarker",t.title="Highlight marker",t.icon='<svg viewBox="0 0 24 24"><path d="M18.5 1.15c-.53 0-1.04.19-1.43.58l-5.81 5.82 5.65 5.65 5.82-5.81c.77-.78.77-2.04 0-2.83l-2.84-2.83c-.39-.39-.89-.58-1.39-.58M10.3 8.5l-5.96 5.96c-.78.78-.78 2.04.02 2.85C3.14 18.54 1.9 19.77.67 21h5.66l.86-.86c.78.76 2.03.75 2.81-.02l5.95-5.96"/></svg>',t}(cd),fd='<svg viewBox="0 0 24 24"><path d="M9.62 12L12 5.67 14.37 12M11 3L5.5 17h2.25l1.12-3h6.25l1.13 3h2.25L13 3h-2z"/></svg>',hu='<svg viewBox="0 0 24 24"><path d="M19 11.5s-2 2.17-2 3.5a2 2 0 002 2 2 2 0 002-2c0-1.33-2-3.5-2-3.5M5.21 10L10 5.21 14.79 10m1.77-1.06L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.56-.59 1.53 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.59.59-1.56 0-2.12z"/></svg>',qc=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.bgColor="transparent",s.tipPosition={x:0,y:0},s.tipBase1Position={x:0,y:0},s.tipBase2Position={x:0,y:0},s.tipMoving=!1,s.color=n.defaultStrokeColor,s.bgColor=n.defaultFillColor,s.fontFamily=n.defaultFontFamily,s.defaultSize={x:100,y:30},s.setBgColor=s.setBgColor.bind(s),s.getTipPoints=s.getTipPoints.bind(s),s.positionTip=s.positionTip.bind(s),s.setTipPoints=s.setTipPoints.bind(s),s.colorPanel=new we("Text color",n.defaultColorSet,s.color,fd,"text-color-panel"),s.colorPanel.onColorChanged=s.setColor,s.bgColorPanel=new we("Fill color",n.defaultColorSet,s.bgColor,hu,"fill-color-panel"),s.bgColorPanel.onColorChanged=s.setBgColor,s.fontFamilyPanel=new cu("Font",n.defaultFontFamilies,n.defaultFontFamily),s.fontFamilyPanel.onFontChanged=s.setFont,s.tipGrip=new lu,s.tipGrip.visual.transform.baseVal.appendItem(J.createTransform()),s.controlBox.appendChild(s.tipGrip.visual),s}return Lt(t,e),t.prototype.ownsTarget=function(r){return e.prototype.ownsTarget.call(this,r)||this.tipGrip.ownsTarget(r)||this.tip===r},t.prototype.createTip=function(){J.setAttributes(this.bgRectangle,[["fill",this.bgColor],["rx","10px"]]),this.tip=J.createPolygon(this.getTipPoints(),[["fill",this.bgColor]]),this.visual.appendChild(this.tip)},t.prototype.pointerDown=function(r,i){this.state==="new"&&e.prototype.pointerDown.call(this,r,i),this.state==="creating"?this.createTip():this.tipGrip.ownsTarget(i)?(this.manipulationStartLeft=this.left,this.manipulationStartTop=this.top,this.tipMoving=!0):e.prototype.pointerDown.call(this,r,i)},t.prototype.pointerUp=function(r){if(this.tipMoving)this.tipMoving=!1,this.isMoved=!0,e.prototype.pointerUp.call(this,r);else{var i=this.state==="creating";e.prototype.pointerUp.call(this,r),this.setTipPoints(i),this.positionTip()}},t.prototype.manipulate=function(r){if(this.tipMoving){var i=this.unrotatePoint(r);this.tipPosition={x:i.x-this.manipulationStartLeft,y:i.y-this.manipulationStartTop},this.positionTip()}else e.prototype.manipulate.call(this,r)},t.prototype.setBgColor=function(r){this.bgRectangle&&this.tip&&(J.setAttributes(this.bgRectangle,[["fill",r]]),J.setAttributes(this.tip,[["fill",r]])),this.bgColor=r,this.fillColorChanged(r)},t.prototype.getTipPoints=function(){return this.setTipPoints(this.state==="creating"),this.tipBase1Position.x+","+this.tipBase1Position.y+" "+this.tipBase2Position.x+","+this.tipBase2Position.y+" "+this.tipPosition.x+","+this.tipPosition.y},t.prototype.setTipPoints=function(r){r===void 0&&(r=!1);var i=Math.min(this.height/2,15),n=this.height/5;r&&(this.tipPosition={x:i+n/2,y:this.height+20});var s=Math.atan(this.height/2/(this.width/2));this.tipPosition.x<this.width/2&&this.tipPosition.y<this.height/2?s<Math.atan((this.height/2-this.tipPosition.y)/(this.width/2-this.tipPosition.x))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:i,y:0},this.tipBase2Position={x:i+n,y:0}):(this.tipBase1Position={x:0,y:i},this.tipBase2Position={x:0,y:i+n}):this.tipPosition.x>=this.width/2&&this.tipPosition.y<this.height/2?s<Math.atan((this.height/2-this.tipPosition.y)/(this.tipPosition.x-this.width/2))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-i-n,y:0},this.tipBase2Position={x:this.width-i,y:0}):(this.tipBase1Position={x:this.width,y:i},this.tipBase2Position={x:this.width,y:i+n}):this.tipPosition.x>=this.width/2&&this.tipPosition.y>=this.height/2?s<Math.atan((this.tipPosition.y-this.height/2)/(this.tipPosition.x-this.width/2))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:this.width-i-n,y:this.height},this.tipBase2Position={x:this.width-i,y:this.height}):(this.tipBase1Position={x:this.width,y:this.height-i-n},this.tipBase2Position={x:this.width,y:this.height-i}):s<Math.atan((this.tipPosition.y-this.height/2)/(this.width/2-this.tipPosition.x))?(n=this.width/5,i=Math.min(this.width/2,15),this.tipBase1Position={x:i,y:this.height},this.tipBase2Position={x:i+n,y:this.height}):(this.tipBase1Position={x:0,y:this.height-i},this.tipBase2Position={x:0,y:this.height-i-n})},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.positionTip()},t.prototype.positionTip=function(){J.setAttributes(this.tip,[["points",this.getTipPoints()]]);var r=this.tipGrip.visual.transform.baseVal.getItem(0);r.setTranslate(this.tipPosition.x,this.tipPosition.y),this.tipGrip.visual.transform.baseVal.replaceItem(r,0)},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.colorPanel,this.bgColorPanel,this.fontFamilyPanel]},enumerable:!1,configurable:!0}),t.prototype.select=function(){this.positionTip(),e.prototype.select.call(this)},t.prototype.getState=function(){var r=Object.assign({bgColor:this.bgColor,tipPosition:this.tipPosition},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){var i=r;this.bgColor=i.bgColor,this.tipPosition=i.tipPosition,e.prototype.restoreState.call(this,r),this.createTip(),this.setTipPoints()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.tipPosition={x:this.tipPosition.x*r,y:this.tipPosition.y*i},this.positionTip()},t.typeName="CalloutMarker",t.title="Callout marker",t.icon='<svg viewBox="0 0 24 24"><path d="M4 2h16a2 2 0 012 2v12a2 2 0 01-2 2h-4l-4 4-4-4H4a2 2 0 01-2-2V4a2 2 0 012-2m0 2v12h4.83L12 19.17 15.17 16H20V4H4m2 3h12v2H6V7m0 4h10v2H6v-2z"/></svg>',t}(en),sl=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.fillColor="transparent",s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.opacity=1,s.strokeColor=n.defaultColor,s.strokeWidth=n.defaultStrokeWidth,s.strokeDasharray=n.defaultStrokeDasharray,s.fillColor=n.defaultFillColor,s.setStrokeColor=s.setStrokeColor.bind(s),s.setFillColor=s.setFillColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.setOpacity=s.setOpacity.bind(s),s.createVisual=s.createVisual.bind(s),s.strokePanel=new we("Line color",An(n.defaultColorSet,["transparent"]),n.defaultColor,void 0,"stroke-color-panel"),s.strokePanel.onColorChanged=s.setStrokeColor,s.fillPanel=new we("Fill color",An(n.defaultColorSet,["transparent"]),s.fillColor,hu,"fill-color-panel"),s.fillPanel.onColorChanged=s.setFillColor,s.strokeWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new jn("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s.opacityPanel=new hd("Opacity",n.defaultOpacitySteps,s.opacity),s.opacityPanel.onOpacityChanged=s.setOpacity,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual)},t.prototype.createVisual=function(){this.visual=J.createEllipse(this.width/2,this.height/2,[["fill",this.fillColor],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray],["opacity",this.opacity.toString()]]),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.setSize()},t.prototype.setSize=function(){e.prototype.setSize.call(this),J.setAttributes(this.visual,[["cx",(this.width/2).toString()],["cy",(this.height/2).toString()],["rx",(this.width/2).toString()],["ry",(this.height/2).toString()]])},t.prototype.pointerUp=function(r){e.prototype.pointerUp.call(this,r),this.setSize()},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.visual&&J.setAttributes(this.visual,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},t.prototype.setFillColor=function(r){this.fillColor=r,this.visual&&J.setAttributes(this.visual,[["fill",this.fillColor]]),this.fillColorChanged(r),this.stateChanged()},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.visual&&J.setAttributes(this.visual,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.visual&&J.setAttributes(this.visual,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},t.prototype.setOpacity=function(r){this.opacity=r,this.visual&&J.setAttributes(this.visual,[["opacity",this.opacity.toString()]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.opacityPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:this.opacity},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.opacity=i.opacity,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.setSize()},t.typeName="EllipseMarker",t.title="Ellipse marker",t.icon='<svg viewBox="0 0 24 24"><path d="M12 4C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',t}(Vn),Xm=function(e){function t(r,i,n){return e.call(this,r,i,n)||this}return Lt(t,e),Object.defineProperty(t.prototype,"tipLength",{get:function(){return 10+3*this.strokeWidth},enumerable:!1,configurable:!0}),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.tip1&&r!==this.tip2)},t.prototype.createTips=function(){this.tip1=J.createLine(this.x1-this.tipLength/2,this.y1,this.x1+this.tipLength/2,this.y1,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip1.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.tip1),this.tip2=J.createLine(this.x2-this.tipLength/2,this.y2,this.x2+this.tipLength/2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.tip2.transform.baseVal.appendItem(J.createTransform()),this.visual.appendChild(this.tip2)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.state==="creating"&&this.createTips()},t.prototype.adjustVisual=function(){if(e.prototype.adjustVisual.call(this),this.tip1&&this.tip2&&(J.setAttributes(this.tip1,[["x1",(this.x1-this.tipLength/2).toString()],["y1",this.y1.toString()],["x2",(this.x1+this.tipLength/2).toString()],["y2",this.y1.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.tip2,[["x1",(this.x2-this.tipLength/2).toString()],["y1",this.y2.toString()],["x2",(this.x2+this.tipLength/2).toString()],["y2",this.y2.toString()],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),Math.abs(this.x1-this.x2)>.1)){var r=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2),i=this.tip1.transform.baseVal.getItem(0);i.setRotate(r,this.x1,this.y1),this.tip1.transform.baseVal.replaceItem(i,0);var n=this.tip2.transform.baseVal.getItem(0);n.setRotate(r+180,this.x2,this.y2),this.tip2.transform.baseVal.replaceItem(n,0)}},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r),this.createTips(),this.adjustVisual()},t.typeName="MeasurementMarker",t.title="Measurement marker",t.icon='<svg viewBox="0 0 24 24"><path d="M1.39 18.36l1.77-1.76L4.58 18l1.06-1.05-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.42 1.41L10.59 12l-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.41 1.41 1.07-1.06-1.42-1.41 1.42-1.42L18 6.7l1.07-1.06-2.47-2.48 1.76-1.77 4.25 4.25L5.64 22.61l-4.25-4.25z"/></svg>',t}(uu),Um=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.strokePanel.colors=n.defaultColorSet,s.fillColor="transparent",s}return Lt(t,e),Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=e.prototype.getState.call(this);return r.typeName=t.typeName,r},t.typeName="EllipseFrameMarker",t.title="Ellipse frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M12 6c4.41 0 8 2.69 8 6s-3.59 6-8 6-8-2.69-8-6 3.59-6 8-6m0-2C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8-4.5-8-10-8z"/></svg>',t}(sl),Ym=function(){function e(){this.undoStack=[],this.redoStack=[]}return Object.defineProperty(e.prototype,"isUndoPossible",{get:function(){return this.undoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRedoPossible",{get:function(){return this.redoStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoStepCount",{get:function(){return this.undoStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redoStepCount",{get:function(){return this.redoStack.length},enumerable:!1,configurable:!0}),e.prototype.addUndoStep=function(t){this.undoStack.length!==0&&JSON.stringify(this.undoStack[this.undoStack.length-1])===JSON.stringify(t)||(this.undoStack.push(t),JSON.stringify(this.lastRedoStep)!==JSON.stringify(t)&&this.redoStack.splice(0,this.redoStack.length))},e.prototype.replaceLastUndoStep=function(t){this.undoStack.length>0&&(this.undoStack[this.undoStack.length-1]=t)},e.prototype.getLastUndoStep=function(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0},e.prototype.undo=function(){if(this.undoStack.length>1){var t=this.undoStack.pop();return t!==void 0&&this.redoStack.push(t),this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0}},e.prototype.redo=function(){return this.lastRedoStep=this.redoStack.pop(),this.lastRedoStep},e}(),qm=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.curveX=0,s.curveY=0,s.manipulationStartCurveX=0,s.manipulationStartCurveY=0,s.setStrokeColor=s.setStrokeColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.positionGrips=s.positionGrips.bind(s),s.addControlGrips=s.addControlGrips.bind(s),s.adjustVisual=s.adjustVisual.bind(s),s.setupControlBox=s.setupControlBox.bind(s),s.resize=s.resize.bind(s),s.strokeColor=n.defaultColor,s.strokeWidth=n.defaultStrokeWidth,s.strokeDasharray=n.defaultStrokeDasharray,s.strokePanel=new we("Line color",n.defaultColorSet,n.defaultColor),s.strokePanel.onColorChanged=s.setStrokeColor,s.strokeWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new jn("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.selectorCurve&&r!==this.visibleCurve&&!this.curveGrip.ownsTarget(r))},t.prototype.getPathD=function(){return"M "+this.x1+" "+this.y1+" Q "+this.curveX+" "+this.curveY+", "+this.x2+" "+this.y2},t.prototype.createVisual=function(){this.visual=J.createGroup(),this.selectorCurve=J.createPath(this.getPathD(),[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()],["fill","transparent"]]),this.visibleCurve=J.createPath(this.getPathD(),[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["fill","transparent"]]),this.visual.appendChild(this.selectorCurve),this.visual.appendChild(this.visibleCurve),this.addMarkerVisualToContainer(this.visual)},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.manipulationStartCurveX=this.curveX,this.manipulationStartCurveY=this.curveY,this.state==="new"&&(this.curveX=r.x,this.curveY=r.y),this.state==="new"?(this.createVisual(),this.adjustVisual(),this._state="creating"):this.curveGrip.ownsTarget(i)&&(this.activeGrip=this.curveGrip,this._state="resize")},t.prototype.adjustVisual=function(){this.selectorCurve&&this.visibleCurve&&(this.selectorCurve.setAttribute("d",this.getPathD()),this.visibleCurve.setAttribute("d",this.getPathD()),J.setAttributes(this.visibleCurve,[["stroke",this.strokeColor]]),J.setAttributes(this.visibleCurve,[["stroke-width",this.strokeWidth.toString()]]),J.setAttributes(this.visibleCurve,[["stroke-dasharray",this.strokeDasharray.toString()]]))},t.prototype.setupControlBox=function(){e.prototype.setupControlBox.call(this),this.curveControlLine1=J.createLine(this.x1,this.y1,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.curveControlLine2=J.createLine(this.x2,this.y2,this.curveX,this.curveY,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"]]),this.controlBox.insertBefore(this.curveControlLine1,this.controlBox.firstChild),this.controlBox.insertBefore(this.curveControlLine2,this.controlBox.firstChild)},t.prototype.addControlGrips=function(){this.curveGrip=this.createGrip(),this.curveX=0,this.curveY=0,e.prototype.addControlGrips.call(this)},t.prototype.positionGrips=function(){e.prototype.positionGrips.call(this);var r=this.curveGrip.GRIP_SIZE;this.positionGrip(this.curveGrip.visual,this.curveX-r/2,this.curveY-r/2),this.curveControlLine1&&this.curveControlLine2&&(this.curveControlLine1.setAttribute("x1",this.x1.toString()),this.curveControlLine1.setAttribute("y1",this.y1.toString()),this.curveControlLine1.setAttribute("x2",this.curveX.toString()),this.curveControlLine1.setAttribute("y2",this.curveY.toString()),this.curveControlLine2.setAttribute("x1",this.x2.toString()),this.curveControlLine2.setAttribute("y1",this.y2.toString()),this.curveControlLine2.setAttribute("x2",this.curveX.toString()),this.curveControlLine2.setAttribute("y2",this.curveY.toString()))},t.prototype.manipulate=function(r){this.state==="move"&&(this.curveX=this.manipulationStartCurveX+r.x-this.manipulationStartX,this.curveY=this.manipulationStartCurveY+r.y-this.manipulationStartY),e.prototype.manipulate.call(this,r)},t.prototype.resize=function(r){this.activeGrip===this.curveGrip&&(this.curveX=r.x,this.curveY=r.y),e.prototype.resize.call(this,r),this.state==="creating"&&(this.curveX=this.x1+(this.x2-this.x1)/2,this.curveY=this.y1+(this.y2-this.y1)/2)},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.adjustVisual(),this.colorChanged(r)},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.adjustVisual()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.adjustVisual()},t.prototype.scale=function(r,i){this.curveX=this.curveX*r,this.curveY=this.curveY*i,e.prototype.scale.call(this,r,i)},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.strokeWidthPanel,this.strokeStylePanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,curveX:this.curveX,curveY:this.curveY},e.prototype.getState.call(this));return r.typeName=t.typeName,r},t.prototype.restoreState=function(r){e.prototype.restoreState.call(this,r);var i=r;this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.curveX=i.curveX,this.curveY=i.curveY,this.createVisual(),this.adjustVisual()},t.typeName="CurveMarker",t.title="Curve marker",t.icon='<svg viewBox="0 0 24 24"><path d="M18.5 2A1.5 1.5 0 0120 3.5 1.5 1.5 0 0118.5 5c-.23 0-.45-.05-.65-.15l-3.69 3.7.34.45c2.19-1.26 4.76-2 7.5-2l1 .03v2.01L22 9c-2.58 0-5 .75-7 2.04A3.96 3.96 0 0111.04 15C9.75 17 9 19.42 9 22l.04 1H7.03L7 22c0-2.74.74-5.31 2-7.5l-.45-.34-3.7 3.69c.1.2.15.42.15.65A1.5 1.5 0 013.5 20 1.5 1.5 0 012 18.5 1.5 1.5 0 013.5 17c.23 0 .45.05.65.15l3.69-3.7C7.31 12.78 7 11.92 7 11a4 4 0 014-4c.92 0 1.78.31 2.45.84l3.7-3.69c-.1-.2-.15-.42-.15-.65A1.5 1.5 0 0118.5 2M11 9a2 2 0 00-2 2 2 2 0 002 2 2 2 0 002-2 2 2 0 00-2-2z"/></svg>',t}(ud),Km=function(e){function t(r,i,n){var s=e.call(this,r,i,n)||this;return s.fillColor="transparent",s.strokeColor="transparent",s.strokeWidth=0,s.strokeDasharray="",s.textColor="transparent",s.fontSize="1rem",s.isMoved=!1,s.captionText="Caption",s.PADDING=5,s.captionBoxWidth=0,s.captionBoxHeight=0,s.strokeColor=n.defaultColor,s.strokeWidth=n.defaultStrokeWidth,s.strokeDasharray=n.defaultStrokeDasharray,s.fillColor=n.defaultFillColor,s.textColor=n.defaultStrokeColor,s.fontFamily=n.defaultFontFamily,s.fontSize=n.defaultCaptionFontSize,s.captionText=n.defaultCaptionText,s.setStrokeColor=s.setStrokeColor.bind(s),s.setFillColor=s.setFillColor.bind(s),s.setStrokeWidth=s.setStrokeWidth.bind(s),s.setStrokeDasharray=s.setStrokeDasharray.bind(s),s.createVisual=s.createVisual.bind(s),s.sizeCaption=s.sizeCaption.bind(s),s.setCaptionText=s.setCaptionText.bind(s),s.showTextEditor=s.showTextEditor.bind(s),s.positionTextEditor=s.positionTextEditor.bind(s),s.finishTextEditing=s.finishTextEditing.bind(s),s.setFont=s.setFont.bind(s),s.setTextColor=s.setTextColor.bind(s),s.strokePanel=new we("Line color",An(n.defaultColorSet,["transparent"]),s.strokeColor,void 0,"stroke-color-panel"),s.strokePanel.onColorChanged=s.setStrokeColor,s.fillPanel=new we("Fill color",An(n.defaultColorSet,["transparent"]),s.fillColor,hu,"fill-color-panel"),s.fillPanel.onColorChanged=s.setFillColor,s.strokeWidthPanel=new Xi("Line width",n.defaultStrokeWidths,n.defaultStrokeWidth),s.strokeWidthPanel.onWidthChanged=s.setStrokeWidth,s.strokeStylePanel=new jn("Line style",n.defaultStrokeDasharrays,n.defaultStrokeDasharray),s.strokeStylePanel.onStyleChanged=s.setStrokeDasharray,s.fontFamilyPanel=new cu("Font",n.defaultFontFamilies,n.defaultFontFamily),s.fontFamilyPanel.onFontChanged=s.setFont,s.textColorPanel=new we("Text color",n.defaultColorSet,s.textColor,fd,"text-color-panel"),s.textColorPanel.onColorChanged=s.setTextColor,s}return Lt(t,e),t.prototype.ownsTarget=function(r){return!(!e.prototype.ownsTarget.call(this,r)&&r!==this.visual&&r!==this.frame&&r!==this.captionBg&&r!==this.captionElement)},t.prototype.createVisual=function(){this.visual=J.createGroup(),this.addMarkerVisualToContainer(this.visual),this.captionBg=J.createRect(1,1,[["fill",this.fillColor]]),this.visual.appendChild(this.captionBg),this.captionElement=J.createText([["fill",this.textColor],["font-family",this.fontFamily]]),this.captionElement.style.fontSize=this.fontSize,this.captionElement.style.textAnchor="start",this.captionElement.style.dominantBaseline="text-before-edge",this.captionElement.textContent=this.captionText,this.visual.appendChild(this.captionElement),this.frame=J.createRect(this.width,this.height,[["fill","transparent"],["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray]]),this.visual.appendChild(this.frame),this.sizeCaption()},t.prototype.setCaptionText=function(r){this.captionText=r,this.captionElement.textContent=this.captionText,this.sizeCaption()},t.prototype.pointerDown=function(r,i){e.prototype.pointerDown.call(this,r,i),this.isMoved=!1,this.pointerDownPoint=r,this.pointerDownTimestamp=Date.now(),this.state==="new"&&(this.createVisual(),this.moveVisual(r),this._state="creating")},t.prototype.manipulate=function(r){e.prototype.manipulate.call(this,r),this.pointerDownPoint!==void 0&&(this.isMoved=Math.abs(r.x-this.pointerDownPoint.x)>5||Math.abs(r.y-this.pointerDownPoint.y)>5)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this.setSize()},t.prototype.sizeCaption=function(){var r=this.captionElement.getBBox();this.captionText.trim()!==""?(this.captionBoxWidth=r.width+2*this.PADDING,this.captionBoxHeight=r.height+2*this.PADDING):(this.captionBoxWidth=0,this.captionBoxHeight=0),J.setAttributes(this.captionBg,[["width",this.captionBoxWidth.toString()],["height",this.captionBoxHeight.toString()],["clip-path","path('M0,0 H"+this.width+" V"+this.height+" H"+-this.width+" Z')"]]),J.setAttributes(this.captionElement,[["x",this.PADDING.toString()],["y",this.PADDING.toString()],["clip-path","path('M0,0 H"+(this.width-this.PADDING)+" V"+this.height+" H"+(-this.width-this.PADDING)+" Z')"]])},t.prototype.showTextEditor=function(){var r=this;this._state="edit",this.overlayContainer.innerHTML="",this.textEditDiv=document.createElement("div"),this.textEditDiv.style.flexGrow="2",this.textEditDiv.style.alignItems="center",this.textEditDiv.style.justifyContent="center",this.textEditDiv.style.pointerEvents="auto",this.textEditDiv.style.overflow="hidden",this.textEditBox=document.createElement("input"),this.textEditBox.style.position="absolute",this.textEditBox.style.width=this.width+"px",this.captionBoxHeight>0&&(this.textEditBox.style.height=this.captionBoxHeight+"px"),this.textEditBox.style.fontSize=this.fontSize,this.textEditBox.style.fontFamily=this.fontFamily,this.textEditBox.style.backgroundColor=this.fillColor,this.textEditBox.style.color=this.textColor,this.textEditBox.style.borderWidth="0",this.textEditBox.setAttribute("value",this.captionText),this.textEditBox.select(),this.textEditDiv.appendChild(this.textEditBox),this.overlayContainer.appendChild(this.textEditDiv),this.textEditBox.addEventListener("pointerup",function(i){i.stopPropagation()}),this.textEditBox.addEventListener("keypress",function(i){i.key==="Enter"&&r.finishTextEditing(r.textEditBox.value)}),this.textEditBox.addEventListener("keyup",function(i){i.cancelBubble=!0}),this.textEditBox.addEventListener("blur",function(){r.finishTextEditing(r.textEditBox.value)}),this.textEditDiv.addEventListener("pointerup",function(){r.finishTextEditing(r.textEditBox.value)}),this.positionTextEditor(),this.textEditBox.focus()},t.prototype.positionTextEditor=function(){this.state==="edit"&&(this.textEditBox===void 0?this.showTextEditor():(this.textEditBox.style.left=this.left+"px",this.textEditBox.style.top=this.top+"px",this.textEditBox.style.transform="rotate("+this.rotationAngle+"deg)",this.textEditBox.style.transformOrigin=this.width/2+"px "+this.height/2+"px"))},t.prototype.finishTextEditing=function(r){this.setCaptionText(r.trim()),this.overlayContainer.innerHTML="",this.stateChanged()},t.prototype.setFont=function(r){this.captionElement&&J.setAttributes(this.captionElement,[["font-family",r]]),this.fontFamily=r,this.textEditBox&&(this.textEditBox.style.fontFamily=this.fontFamily),this.sizeCaption(),this.stateChanged()},t.prototype.setTextColor=function(r){this.captionElement&&J.setAttributes(this.captionElement,[["fill",r]]),this.textColor=r,this.textEditBox&&(this.textEditBox.style.color=this.textColor),this.stateChanged()},t.prototype.setSize=function(){e.prototype.setSize.call(this),J.setAttributes(this.frame,[["width",this.width.toString()],["height",this.height.toString()]]),this.sizeCaption()},t.prototype.pointerUp=function(r){e.prototype.pointerUp.call(this,r),this.setSize(),!this.isMoved&&Date.now()-this.pointerDownTimestamp>500&&this.showTextEditor(),this.pointerDownPoint=void 0},t.prototype.dblClick=function(r,i){e.prototype.dblClick.call(this,r,i),this.showTextEditor()},t.prototype.setStrokeColor=function(r){this.strokeColor=r,this.frame&&J.setAttributes(this.frame,[["stroke",this.strokeColor]]),this.colorChanged(r),this.stateChanged()},t.prototype.setFillColor=function(r){this.fillColor=r,this.captionBg&&J.setAttributes(this.captionBg,[["fill",this.fillColor]]),this.fillColorChanged(r),this.stateChanged()},t.prototype.setStrokeWidth=function(r){this.strokeWidth=r,this.frame&&J.setAttributes(this.frame,[["stroke-width",this.strokeWidth.toString()]]),this.stateChanged()},t.prototype.setStrokeDasharray=function(r){this.strokeDasharray=r,this.frame&&J.setAttributes(this.frame,[["stroke-dasharray",this.strokeDasharray]]),this.stateChanged()},Object.defineProperty(t.prototype,"toolboxPanels",{get:function(){return[this.strokePanel,this.fillPanel,this.strokeWidthPanel,this.strokeStylePanel,this.fontFamilyPanel,this.textColorPanel]},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var r=Object.assign({fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,opacity:1,textColor:this.textColor,fontFamily:this.fontFamily,fontSize:this.fontSize,captionText:this.captionText},e.prototype.getState.call(this));return r.typeName=this.typeName,r},t.prototype.restoreState=function(r){var i=r;this.fillColor=i.fillColor,this.strokeColor=i.strokeColor,this.strokeWidth=i.strokeWidth,this.strokeDasharray=i.strokeDasharray,this.textColor=i.textColor,this.fontFamily=i.fontFamily,this.captionText=i.captionText,this.fontSize=i.fontSize,this.createVisual(),e.prototype.restoreState.call(this,r),this.setSize()},t.prototype.scale=function(r,i){e.prototype.scale.call(this,r,i),this.setSize()},t.typeName="CaptionFrameMarker",t.title="Caption frame marker",t.icon='<svg viewBox="0 0 24 24"><path d="M5 3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2H5m0 2h14v14H5V5m2 2v2h10V7H7z"/></svg>',t}(Vn),Ve=function(){function e(t,r){r===void 0&&(r=!1),this.cancelable=!1,this._defaultPrevented=!1,this.markerArea=t,this.cancelable=r}return Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this._defaultPrevented=!0},e}(),Jm=function(e){function t(r,i,n){var s=e.call(this,r,!1)||this;return s.dataUrl=i,s.state=n,s}return Lt(t,e),t}(Ve),dr=function(e){function t(r,i,n){n===void 0&&(n=!1);var s=e.call(this,r,n)||this;return s.marker=i,s}return Lt(t,e),t}(Ve),Zm=function(){function e(){this.render=[],this.beforeclose=[],this.close=[],this.show=[],this.restorestate=[],this.statechange=[],this.markerselect=[],this.markerdeselect=[],this.markercreating=[],this.markercreate=[],this.markerbeforedelete=[],this.markerdelete=[],this.markerchange=[],this.focus=[],this.blur=[]}return e.prototype.addEventListener=function(t,r){this[t].push(r)},e.prototype.removeEventListener=function(t,r){var i=this[t].indexOf(r);i>-1&&this[t].splice(i,1)},e}(),Qm=function(){function e(t){this.touchPoints=0,this._availableMarkerTypes=this.DEFAULT_MARKER_TYPES,this.mode="select",this.markers=[],this.isDragging=!1,this.renderEventListeners=[],this.closeEventListeners=[],this.settings=new jm,this._isOpen=!1,this.undoRedoManager=new Ym,this.renderAtNaturalSize=!1,this.renderImageType="image/png",this.renderMarkersOnly=!1,this.zoomSteps=[1,1.5,2,4],this._zoomLevel=1,this._isResizing=!1,this.prevPanPoint={x:0,y:0},this.eventListeners=new Zm,this._silentRenderMode=!1,this._isFocused=!1,this._instanceNo=e.instanceCounter++,this.styles=new Gm(this.instanceNo),this.uiStyleSettings=this.styles.settings,this.target=t,this.targetRoot=document.body,this.width=t.clientWidth,this.height=t.clientHeight,this.styles.removeStyleSheet(),this.open=this.open.bind(this),this.setTopLeft=this.setTopLeft.bind(this),this.toolbarButtonClicked=this.toolbarButtonClicked.bind(this),this.createNewMarker=this.createNewMarker.bind(this),this.addNewMarker=this.addNewMarker.bind(this),this.markerCreated=this.markerCreated.bind(this),this.setCurrentMarker=this.setCurrentMarker.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onDblClick=this.onDblClick.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.overrideOverflow=this.overrideOverflow.bind(this),this.restoreOverflow=this.restoreOverflow.bind(this),this.close=this.close.bind(this),this.closeUI=this.closeUI.bind(this),this.addCloseEventListener=this.addCloseEventListener.bind(this),this.removeCloseEventListener=this.removeCloseEventListener.bind(this),this.addRenderEventListener=this.addRenderEventListener.bind(this),this.removeRenderEventListener=this.removeRenderEventListener.bind(this),this.clientToLocalCoordinates=this.clientToLocalCoordinates.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.deleteSelectedMarker=this.deleteSelectedMarker.bind(this),this.setWindowHeight=this.setWindowHeight.bind(this),this.removeMarker=this.removeMarker.bind(this),this.colorChanged=this.colorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this),this.onPopupTargetResize=this.onPopupTargetResize.bind(this),this.showNotesEditor=this.showNotesEditor.bind(this),this.hideNotesEditor=this.hideNotesEditor.bind(this),this.stepZoom=this.stepZoom.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.markerStateChanged=this.markerStateChanged.bind(this),this.switchToSelectMode=this.switchToSelectMode.bind(this),this.addDefs=this.addDefs.bind(this),this.addDefsToImage=this.addDefsToImage.bind(this),this.addMarkerEvents=this.addMarkerEvents.bind(this)}return Object.defineProperty(e.prototype,"ALL_MARKER_TYPES",{get:function(){return[_o,Qi,Eo,en,Um,sl,ko,qc,Xm,cd,uu,qm,Km]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DEFAULT_MARKER_TYPES",{get:function(){return[_o,Qi,Eo,en,sl,ko,qc]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BASIC_MARKER_TYPES",{get:function(){return[_o,Qi,Eo,en,ko]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableMarkerTypes",{get:function(){return this._availableMarkerTypes},set:function(t){var r=this;this._availableMarkerTypes.splice(0),t.forEach(function(i){if(typeof i=="string"){var n=r.ALL_MARKER_TYPES.find(function(s){return s.typeName===i});n!==void 0&&r._availableMarkerTypes.push(n)}else r._availableMarkerTypes.push(i)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentMarker",{get:function(){return this._currentMarker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUndoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isUndoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRedoPossible",{get:function(){return!(!this.undoRedoManager||!this.undoRedoManager.isRedoPossible)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){return this._zoomLevel},set:function(t){this._zoomLevel=t,this.editorCanvas&&this.contentDiv&&(this.editorCanvas.style.transform="scale("+this._zoomLevel+")",this.contentDiv.scrollTo({left:(this.editorCanvas.clientWidth*this._zoomLevel-this.contentDiv.clientWidth)/2,top:(this.editorCanvas.clientHeight*this._zoomLevel-this.contentDiv.clientHeight)/2}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instanceNo",{get:function(){return this._instanceNo},enumerable:!1,configurable:!0}),e.prototype.open=function(){this.setupResizeObserver(),this.setEditingTarget(),this.setTopLeft(),this.initMarkerCanvas(),this.initOverlay(),this.attachEvents(),this.settings.displayMode==="popup"&&this.onPopupTargetResize(),Uc.isLicensed||this.addLogo(),this._isOpen=!0,this._isFocused=!0},e.prototype.show=function(){var t=this;this.styles.styleSheetRoot===void 0&&Yc.styleSheetRoot!==void 0&&(this.styles.styleSheetRoot=Yc.styleSheetRoot),this.markers.splice(0),this.setWindowHeight(),this.showUI(),this.open(),this.eventListeners.show.forEach(function(r){return r(new Ve(t))})},e.prototype.render=function(){return $c(this,void 0,void 0,function(){var t;return Xc(this,function(r){switch(r.label){case 0:return this.setCurrentMarker(),(t=new Nm).naturalSize=this.renderAtNaturalSize,t.imageType=this.renderImageType,t.imageQuality=this.renderImageQuality,t.markersOnly=this.renderMarkersOnly,t.width=this.renderWidth,t.height=this.renderHeight,[4,t.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 1:return r.sent(),[4,t.rasterize(this.target instanceof HTMLImageElement?this.target:null,this.markerImage,this.renderTarget)];case 2:return[2,r.sent()]}})})},e.prototype.close=function(t){var r=this;if(t===void 0&&(t=!1),this.isOpen){var i=!1;t||this.eventListeners.beforeclose.forEach(function(n){var s=new Ve(r,!0);n(s),s.defaultPrevented&&(i=!0)}),i||(this.coverDiv&&this.closeUI(),this.targetObserver&&(this.targetObserver.unobserve(this.target),this.targetObserver.unobserve(this.editorCanvas)),this.settings.displayMode==="popup"&&window.removeEventListener("resize",this.setWindowHeight),this.eventListeners.close.forEach(function(n){return n(new Ve(r))}),this.detachEvents(),this._isOpen=!1)}},e.prototype.addMarkersToToolbar=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];(t=this._availableMarkerTypes).push.apply(t,r)},e.prototype.addRenderEventListener=function(t){this.addEventListener("render",function(r){t(r.dataUrl,r.state)})},e.prototype.removeRenderEventListener=function(t){},e.prototype.addCloseEventListener=function(t){this.addEventListener("close",function(){t()})},e.prototype.removeCloseEventListener=function(t){},e.prototype.setupResizeObserver=function(){var t=this;this.settings.displayMode==="inline"?window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){t.resize(t.target.clientWidth,t.target.clientHeight)}),this.targetObserver.observe(this.target)):this.settings.displayMode==="popup"&&(window.ResizeObserver&&(this.targetObserver=new ResizeObserver(function(){return t.onPopupTargetResize()}),this.targetObserver.observe(this.editorCanvas)),window.addEventListener("resize",this.setWindowHeight))},e.prototype.onPopupTargetResize=function(){var t=1*this.target.clientWidth/this.target.clientHeight,r=this.editorCanvas.clientWidth/t>this.editorCanvas.clientHeight?this.editorCanvas.clientHeight*t:this.editorCanvas.clientWidth,i=r<this.editorCanvas.clientWidth?this.editorCanvas.clientHeight:this.editorCanvas.clientWidth/t;this.resize(r,i)},e.prototype.setWindowHeight=function(){this.windowHeight=window.innerHeight},e.prototype.resize=function(t,r){this._isResizing=!0;var i=t/this.imageWidth,n=r/this.imageHeight;this.imageWidth=Math.round(t),this.imageHeight=Math.round(r),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px",this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.settings.displayMode!=="popup"?this.coverDiv.style.width=this.imageWidth.toString()+"px":(this.setTopLeft(),this.positionMarkerImage()),this.toolbar!==void 0&&this.toolbar.adjustLayout(),this.positionLogo(),this.scaleMarkers(i,n),this._isResizing=!1},e.prototype.scaleMarkers=function(t,r){var i,n=this;this._currentMarker&&this._currentMarker instanceof en?this._currentMarker.scale(t,r):(i=this._currentMarker,this.setCurrentMarker()),this.markers.forEach(function(s){s!==n._currentMarker&&s.scale(t,r)}),i!==void 0&&this.setCurrentMarker(i)},e.prototype.setEditingTarget=function(){this.imageWidth=Math.round(this.target.clientWidth),this.imageHeight=Math.round(this.target.clientHeight),this.target instanceof HTMLImageElement&&this.editingTarget instanceof HTMLImageElement&&(this.editingTarget.src=this.target.src),this.editingTarget.width=this.imageWidth,this.editingTarget.height=this.imageHeight,this.editingTarget.style.width=this.imageWidth+"px",this.editingTarget.style.height=this.imageHeight+"px"},e.prototype.setTopLeft=function(){var t=this.editingTarget.getBoundingClientRect(),r=this.editorCanvas.getBoundingClientRect();this.left=t.left-r.left,this.top=t.top-r.top},e.prototype.initMarkerCanvas=function(){this.markerImageHolder=document.createElement("div"),this.markerImageHolder.style.setProperty("touch-action","pinch-zoom"),this.markerImage=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.markerImage.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.markerImage.setAttribute("width",this.imageWidth.toString()),this.markerImage.setAttribute("height",this.imageHeight.toString()),this.markerImage.setAttribute("viewBox","0 0 "+this.imageWidth.toString()+" "+this.imageHeight.toString()),this.markerImage.style.pointerEvents="auto",this.markerImageHolder.style.position="absolute",this.markerImageHolder.style.width=this.imageWidth+"px",this.markerImageHolder.style.height=this.imageHeight+"px",this.markerImageHolder.style.transformOrigin="top left",this.positionMarkerImage(),this.markerImageHolder.appendChild(this.markerImage),this.editorCanvas.appendChild(this.markerImageHolder)},e.prototype.addDefs=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];this.defs=J.createDefs(),this.addDefsToImage(),(t=this.defs).append.apply(t,r)},e.prototype.addDefsToImage=function(){this.defs&&this.markerImage.insertBefore(this.defs,this.markerImage.firstChild)},e.prototype.initOverlay=function(){this.overlayContainer=document.createElement("div"),this.overlayContainer.style.position="absolute",this.overlayContainer.style.left="0px",this.overlayContainer.style.top="0px",this.overlayContainer.style.width=this.imageWidth+"px",this.overlayContainer.style.height=this.imageHeight+"px",this.overlayContainer.style.display="flex",this.markerImageHolder.appendChild(this.overlayContainer)},e.prototype.positionMarkerImage=function(){this.markerImageHolder.style.top=this.top/this.zoomLevel+"px",this.markerImageHolder.style.left=this.left/this.zoomLevel+"px"},e.prototype.attachEvents=function(){this.markerImage.addEventListener("pointerdown",this.onPointerDown),this.markerImage.addEventListener("touchmove",function(t){return t.preventDefault()}),this.markerImage.addEventListener("dblclick",this.onDblClick),this.attachWindowEvents()},e.prototype.attachWindowEvents=function(){window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerOut),window.addEventListener("pointerout",this.onPointerOut),window.addEventListener("pointerleave",this.onPointerUp),window.addEventListener("resize",this.onWindowResize),window.addEventListener("keyup",this.onKeyUp)},e.prototype.detachEvents=function(){this.markerImage.removeEventListener("pointerdown",this.onPointerDown),this.markerImage.removeEventListener("dblclick",this.onDblClick),this.detachWindowEvents()},e.prototype.detachWindowEvents=function(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerOut),window.removeEventListener("pointerout",this.onPointerOut),window.removeEventListener("pointerleave",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("keyup",this.onKeyUp)},e.prototype.addLogo=function(){this.logoUI=document.createElement("div"),this.logoUI.style.display="inline-block",this.logoUI.style.margin="0px",this.logoUI.style.padding="0px",this.logoUI.style.fill="#333333";var t=document.createElement("a");t.href="https://markerjs.com/",t.target="_blank",t.innerHTML='<svg viewBox="0 0 112 96" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="#e5f20d" fill-opacity=".647" d="M0 40.386h111.96V95.62H0z"/><path d="M93.61 61.452c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.591 1.048-1.481 0-2.222-.74-2.222-2.22 0-16.617-.533-29.347-1.604-38.192-1.068-8.842-2.92-13.265-5.552-13.265-4.443 0-10.94 15.509-19.497 46.52v.124c0 .987-.328 1.831-.987 2.53-.657.7-1.52 1.048-2.592 1.048-1.48 0-2.22-.74-2.22-2.22 0-3.29.165-8.392.493-15.302.33-7.732.494-13.82.494-18.262 0-6.17-.186-10.55-.556-13.142-.37-2.591-1.172-3.887-2.406-3.887-2.796 0-6.333 5.12-10.612 15.363C38.494 34.367 34.01 46.44 29.32 60.34l-1.11 3.209a5.714 5.714 0 01-1.42 2.097c-.617.578-1.295.864-2.036.864-.987 0-1.644-.081-1.974-.247-.328-.162-.533-.656-.617-1.48-.41-4.03-.74-9.418-.987-16.165-.163-1.728-.329-4.566-.494-8.515-.822-13.901-1.562-23.3-2.221-28.196-.657-4.893-.987-7.628-.987-8.205 0-.657.33-1.44.987-2.345.659-.903 1.276-1.357 1.85-1.357 1.319 0 2.387.947 3.21 2.838.411.906.863 4.526 1.357 10.859.493 6.335.905 14.19 1.233 23.568l.617 18.88c4.527-13.983 9.216-26.673 14.068-38.068C45.65 6.686 50.093.988 54.123.988c2.715 0 4.566 1.974 5.553 5.923.987 3.949 1.481 9.667 1.481 17.152 0 3.949-.081 9.625-.247 17.029l-.123 5.676c3.373-11.762 6.725-21.634 10.057-29.615 3.331-7.979 6.685-11.97 10.056-11.97 8.475 0 12.71 18.757 12.71 56.269z" fill-rule="nonzero"/></svg>',t.title="Powered by marker.js",t.style.display="grid",t.style.alignItems="center",t.style.justifyItems="center",t.style.padding="3px",t.style.width="20px",t.style.height="20px",this.logoUI.appendChild(t),this.editorCanvas.appendChild(this.logoUI),this.logoUI.style.position="absolute",this.logoUI.style.pointerEvents="all",this.positionLogo()},e.prototype.positionLogo=function(){this.logoUI&&(this.uiStyleSettings.logoPosition!=="right"?this.logoUI.style.left=this.markerImageHolder.offsetLeft+10+"px":this.logoUI.style.left=this.markerImageHolder.offsetLeft+this.markerImageHolder.offsetWidth-this.logoUI.clientWidth-10+"px",this.logoUI.style.top=this.markerImageHolder.offsetTop+this.markerImageHolder.offsetHeight-this.logoUI.clientHeight-10+"px")},e.prototype.overrideOverflow=function(){this.scrollXState=window.scrollX,this.scrollYState=window.scrollY,this.bodyOverflowState=document.body.style.overflow,window.scroll({top:0,left:0}),document.body.style.overflow="hidden"},e.prototype.restoreOverflow=function(){document.body.style.overflow=this.bodyOverflowState,window.scroll({top:this.scrollYState,left:this.scrollXState})},e.prototype.showUI=function(){var t;switch(this.settings.displayMode==="popup"&&this.overrideOverflow(),this.coverDiv=document.createElement("div"),this.coverDiv.style.visibility=this._silentRenderMode?"hidden":"visible",this.coverDiv.className=this.styles.classNamePrefixBase+" "+this.styles.classNamePrefix,this.coverDiv.style.fontSize="16px",this.coverDiv.style.userSelect="none",this.settings.displayMode){case"inline":this.coverDiv.style.position="absolute";var r=this.settings.uiOffsetTop!==void 0?this.target.offsetTop+this.settings.uiOffsetTop:this.target.offsetTop>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0,i=this.target.offsetLeft+((t=this.settings.uiOffsetLeft)!==null&&t!==void 0?t:0);this.coverDiv.style.top=r+"px",this.coverDiv.style.left=i+"px",this.coverDiv.style.width=this.target.offsetWidth.toString()+"px",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"5";break;case"popup":this.coverDiv.style.position="fixed",this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=window.innerHeight+"px",this.coverDiv.style.backgroundColor="rgba(0, 0, 0, 0.75)",this.coverDiv.style.zIndex=this.uiStyleSettings.zIndex!==void 0?this.uiStyleSettings.zIndex:"1000",this.coverDiv.style.display="flex"}this.targetRoot.appendChild(this.coverDiv),this.uiDiv=document.createElement("div"),this.uiDiv.style.display="flex",this.uiDiv.style.flexDirection="column",this.uiDiv.style.flexGrow="2",this.uiDiv.style.margin=this.settings.displayMode==="popup"?this.settings.popupMargin+"px":"0px",this.settings.displayMode==="popup"&&(this.uiDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px"),this.uiDiv.style.border="0px",this.coverDiv.appendChild(this.uiDiv),this.toolbar=new Wm(this.uiDiv,this.settings.displayMode,this._availableMarkerTypes,this.uiStyleSettings,this.styles),this.toolbar.addButtonClickListener(this.toolbarButtonClicked),this.toolbar.show(this._silentRenderMode||this.uiStyleSettings.hideToolbar?"hidden":"visible"),this.contentDiv=document.createElement("div"),this.contentDiv.style.display="flex",this.contentDiv.style.flexDirection="row",this.contentDiv.style.flexGrow="2",this.contentDiv.style.flexShrink="1",this.settings.displayMode==="popup"&&(this.contentDiv.style.backgroundColor=this.uiStyleSettings.canvasBackgroundColor,this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.uiStyleSettings.toolbarHeight+"px",this.contentDiv.style.maxWidth="calc(100vw - "+2*this.settings.popupMargin+"px)"),this.contentDiv.style.overflow="auto",this.uiDiv.appendChild(this.contentDiv),this.editorCanvas=document.createElement("div"),this.editorCanvas.style.flexGrow="2",this.editorCanvas.style.flexShrink="1",this.editorCanvas.style.position="relative",this.editorCanvas.style.overflow="hidden",this.editorCanvas.style.display="flex",this.settings.displayMode==="popup"&&(this.editorCanvas.style.alignItems="center",this.editorCanvas.style.justifyContent="center"),this.editorCanvas.style.pointerEvents="none",this.editorCanvas.style.transformOrigin="left top",this.editorCanvas.style.transform="scale("+this.zoomLevel+")",this.contentDiv.appendChild(this.editorCanvas),this.editingTarget=this.target instanceof HTMLImageElement?document.createElement("img"):document.createElement("canvas"),this.settings.displayMode==="inline"&&this.settings.uiOffsetTop===void 0&&this.target.offsetTop<this.styles.settings.toolbarHeight&&(this.editingTarget.style.marginTop=this.target.offsetTop-this.styles.settings.toolbarHeight+"px"),this.editorCanvas.appendChild(this.editingTarget),this.toolbox=new Hm(this.uiDiv,this.settings.displayMode,this.uiStyleSettings,this.styles),this.toolbox.show(this._silentRenderMode||this.uiStyleSettings.hideToolbox?"hidden":"visible")},e.prototype.closeUI=function(){this.settings.displayMode==="popup"&&this.restoreOverflow(),this.targetRoot.removeChild(this.coverDiv),this.coverDiv.remove(),this.coverDiv=null},e.prototype.removeMarker=function(t){this.markerImage.removeChild(t.container),this.markers.indexOf(t)>-1&&this.markers.splice(this.markers.indexOf(t),1),t.dispose()},e.prototype.switchToSelectMode=function(){this.mode="select",this.hideNotesEditor(),this._currentMarker!==void 0&&(this._currentMarker.state!=="new"?this._currentMarker.select():(this.removeMarker(this._currentMarker),this.setCurrentMarker(),this.markerImage.style.cursor="default"),this.addUndoStep())},e.prototype.toolbarButtonClicked=function(t,r){if(t==="marker"&&r!==void 0)this.createNewMarker(r);else if(t==="action")switch(r){case"select":this.switchToSelectMode(),this.switchToSelectMode();break;case"delete":this.deleteSelectedMarker();break;case"clear":this.clear();break;case"undo":this.undo();break;case"redo":this.redo();break;case"zoom":this.stepZoom();break;case"zoom-out":this.zoomLevel=1;break;case"notes":this.notesArea===void 0?(this.switchToSelectMode(),this.zoomLevel=1,this.showNotesEditor()):this.switchToSelectMode();break;case"close":this.close();break;case"render":this.switchToSelectMode(),this.startRenderAndClose()}},e.prototype.deleteSelectedMarker=function(){var t=this;if(this._currentMarker!==void 0){var r=!1;if(this.eventListeners.markerbeforedelete.forEach(function(n){var s=new dr(t,t._currentMarker,!0);n(s),s.defaultPrevented&&(r=!0)}),!r){var i=this._currentMarker;this._currentMarker.dispose(),this.markerImage.removeChild(this._currentMarker.container),this.markers.splice(this.markers.indexOf(this._currentMarker),1),this.setCurrentMarker(),this.addUndoStep(),this.eventListeners.markerdelete.forEach(function(n){return n(new dr(t,i))})}}},e.prototype.clear=function(){var t=this,r=!1;if(this.markers.length>0&&(this.eventListeners.markerbeforedelete.forEach(function(a){var o=new dr(t,void 0,!0);a(o),o.defaultPrevented&&(r=!0)}),!r)){this.setCurrentMarker();for(var i=function(a){var o=n.markers[a];n.setCurrentMarker(n.markers[a]),n._currentMarker.dispose(),n.markerImage.removeChild(n._currentMarker.container),n.markers.splice(n.markers.indexOf(n._currentMarker),1),n.eventListeners.markerdelete.forEach(function(l){return l(new dr(t,o))})},n=this,s=this.markers.length-1;s>=0;s--)i(s);this.addUndoStep()}},Object.defineProperty(e.prototype,"isNotesAreaOpen",{get:function(){return this.notesArea!==void 0},enumerable:!1,configurable:!0}),e.prototype.showNotesEditor=function(){var t;this._currentMarker!==void 0&&(this.overlayContainer.innerHTML="",this.notesArea=document.createElement("textarea"),this.notesArea.className=this.uiStyleSettings.notesAreaStyleClassName,this.notesArea.style.pointerEvents="auto",this.notesArea.style.alignSelf="stretch",this.notesArea.style.width="100%",this.notesArea.style.margin=this.uiStyleSettings.toolbarHeight/4+"px",this.notesArea.value=(t=this._currentMarker.notes)!==null&&t!==void 0?t:"",this.overlayContainer.appendChild(this.notesArea))},e.prototype.hideNotesEditor=function(){this.isNotesAreaOpen&&(this._currentMarker!==void 0&&(this._currentMarker.notes=this.notesArea.value.trim()!==""?this.notesArea.value:void 0),this.overlayContainer.removeChild(this.notesArea),this.notesArea=void 0)},e.prototype.selectLastMarker=function(){this.markers.length>0?this.setCurrentMarker(this.markers[this.markers.length-1]):this.setCurrentMarker()},e.prototype.addUndoStep=function(){var t=this;if(this._currentMarker===void 0||this._currentMarker.state!=="edit"){var r=this.getState(),i=this.undoRedoManager.getLastUndoStep();if(!i||i.width===r.width&&i.height===r.height){var n=this.undoRedoManager.undoStepCount;this.undoRedoManager.addUndoStep(r),n<this.undoRedoManager.undoStepCount&&this.eventListeners.statechange.forEach(function(s){return s(new Ve(t))})}else this.undoRedoManager.replaceLastUndoStep(r)}},e.prototype.undo=function(){this.switchToSelectMode(),this.addUndoStep(),this.undoStep()},e.prototype.undoStep=function(){var t=this,r=this.undoRedoManager.undo();r!==void 0&&(this.restoreState(r),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(i){return i(new Ve(t))}))},e.prototype.redo=function(){this.switchToSelectMode(),this.redoStep()},e.prototype.redoStep=function(){var t=this,r=this.undoRedoManager.redo();r!==void 0&&(this.restoreState(r),this.addDefsToImage(),this.selectLastMarker(),this.eventListeners.statechange.forEach(function(i){return i(new Ve(t))}))},e.prototype.stepZoom=function(){var t=this.zoomSteps.indexOf(this.zoomLevel);this.zoomLevel=t<this.zoomSteps.length-1?this.zoomSteps[t+1]:this.zoomSteps[0]},e.prototype.panTo=function(t){this.contentDiv.scrollBy({left:this.prevPanPoint.x-t.x,top:this.prevPanPoint.y-t.y}),this.prevPanPoint=t},e.prototype.startRenderAndClose=function(){return $c(this,void 0,void 0,function(){var t,r,i=this;return Xc(this,function(n){switch(n.label){case 0:return[4,this.render()];case 1:return t=n.sent(),r=this.getState(),this.eventListeners.render.forEach(function(s){return s(new Jm(i,t,r))}),this.close(!0),[2]}})})},e.prototype.getState=function(t){t===!0&&this.setCurrentMarker();var r={width:this.imageWidth,height:this.imageHeight,markers:[]};return this.markers.forEach(function(i){return r.markers.push(i.getState())}),r},e.prototype.restoreState=function(t){var r=this;for(this.markers.splice(0);this.markerImage.lastChild;)this.markerImage.removeChild(this.markerImage.lastChild);t.markers.forEach(function(i){var n=r._availableMarkerTypes.find(function(a){return a.typeName===i.typeName});if(n!==void 0){var s=r.addNewMarker(n);s.restoreState(i),r.addMarkerEvents(s),r.markers.push(s)}}),t.width&&t.height&&(t.width!==this.imageWidth||t.height!==this.imageHeight)&&this.scaleMarkers(this.imageWidth/t.width,this.imageHeight/t.height),this.eventListeners.restorestate.forEach(function(i){return i(new Ve(r))})},e.prototype.addNewMarker=function(t){var r=J.createGroup();return this.markerImage.appendChild(r),new t(r,this.overlayContainer,this.settings)},e.prototype.createNewMarker=function(t){var r,i=this;(r=typeof t=="string"?this._availableMarkerTypes.find(function(n){return n.typeName===t}):t)&&(this.setCurrentMarker(),this.addUndoStep(),this._currentMarker=this.addNewMarker(r),this.addMarkerEvents(this._currentMarker),this.markerImage.style.cursor="crosshair",this.toolbar.setActiveMarkerButton(r.typeName),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this.eventListeners.markercreating.forEach(function(n){return n(new dr(i,i._currentMarker))}))},e.prototype.addMarkerEvents=function(t){t.onMarkerCreated=this.markerCreated,t.onColorChanged=this.colorChanged,t.onFillColorChanged=this.fillColorChanged,t.onStateChanged=this.markerStateChanged},e.prototype.markerCreated=function(t){var r=this;this.mode="select",this.markerImage.style.cursor="default",this.markers.push(t),this.setCurrentMarker(t),t instanceof Qi&&this.settings.newFreehandMarkerOnPointerUp?this.createNewMarker(Qi):this.toolbar.setSelectMode(),this.addUndoStep(),this.eventListeners.markercreate.forEach(function(i){return i(new dr(r,t))})},e.prototype.colorChanged=function(t){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultColor=t,this.settings.defaultStrokeColor=t)},e.prototype.fillColorChanged=function(t){this.settings.defaultColorsFollowCurrentColors&&(this.settings.defaultFillColor=t)},e.prototype.markerStateChanged=function(t){var r=this;this.eventListeners.markerchange.forEach(function(i){return i(new dr(r,t))})},e.prototype.setCurrentMarker=function(t){var r=this;this._currentMarker!==t&&this._currentMarker!==void 0&&(this._currentMarker.deselect(),this.toolbar.setCurrentMarker(),this.toolbox.setPanelButtons([]),this._isResizing||this.eventListeners.markerdeselect.forEach(function(i){return i(new dr(r,r._currentMarker))})),this._currentMarker=t,this._currentMarker===void 0||this._currentMarker.isSelected||(this._currentMarker.state!=="new"&&this._currentMarker.select(),this.toolbar.setCurrentMarker(this._currentMarker),this.toolbox.setPanelButtons(this._currentMarker.toolboxPanels),this._isResizing||this.eventListeners.markerselect.forEach(function(i){return i(new dr(r,r._currentMarker))}))},e.prototype.onPointerDown=function(t){if(this._isFocused||this.focus(),this.touchPoints++,this.touchPoints===1||t.pointerType!=="touch")if(this._currentMarker===void 0||this._currentMarker.state!=="new"&&this._currentMarker.state!=="creating"){if(this.mode==="select"){var r=this.markers.find(function(i){return i.ownsTarget(t.target)});r!==void 0?(this.setCurrentMarker(r),this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(t.clientX,t.clientY),t.target)):(this.setCurrentMarker(),this.isDragging=!0,this.prevPanPoint={x:t.clientX,y:t.clientY})}}else this.isDragging=!0,this._currentMarker.pointerDown(this.clientToLocalCoordinates(t.clientX,t.clientY))},e.prototype.onDblClick=function(t){if(this._isFocused||this.focus(),this.mode==="select"){var r=this.markers.find(function(i){return i.ownsTarget(t.target)});r!==void 0&&r!==this._currentMarker&&this.setCurrentMarker(r),this._currentMarker!==void 0?this._currentMarker.dblClick(this.clientToLocalCoordinates(t.clientX,t.clientY),t.target):this.setCurrentMarker()}},e.prototype.onPointerMove=function(t){this.touchPoints!==1&&t.pointerType==="touch"||(this._currentMarker!==void 0||this.isDragging)&&(this._currentMarker!==void 0&&this._currentMarker.state==="edit"||t.preventDefault(),this._currentMarker!==void 0?this._currentMarker.manipulate(this.clientToLocalCoordinates(t.clientX,t.clientY)):this.zoomLevel>1&&this.panTo({x:t.clientX,y:t.clientY}))},e.prototype.onPointerUp=function(t){this.touchPoints>0&&this.touchPoints--,this.touchPoints===0&&this.isDragging&&this._currentMarker!==void 0&&this._currentMarker.pointerUp(this.clientToLocalCoordinates(t.clientX,t.clientY)),this.isDragging=!1,this.addUndoStep()},e.prototype.onPointerOut=function(){this.touchPoints>0&&this.touchPoints--},e.prototype.onKeyUp=function(t){this._currentMarker===void 0||this.notesArea!==void 0||t.key!=="Delete"&&t.key!=="Backspace"||this.deleteSelectedMarker()},e.prototype.clientToLocalCoordinates=function(t,r){var i=this.markerImage.getBoundingClientRect(),n=i.width/this.imageWidth/this.zoomLevel,s=i.height/this.imageHeight/this.zoomLevel;return{x:(t-i.left)/this.zoomLevel/n,y:(r-i.top)/this.zoomLevel/s}},e.prototype.onWindowResize=function(){this.positionUI()},e.prototype.positionUI=function(){switch(this.setTopLeft(),this.settings.displayMode){case"inline":var t=this.target.getClientRects(),r=t.length>0&&t.item(0)&&t.item(0).y>this.styles.settings.toolbarHeight?this.target.offsetTop-this.styles.settings.toolbarHeight:0;this.coverDiv.style.top=r+"px",this.coverDiv.style.left=this.target.offsetLeft.toString()+"px";break;case"popup":this.coverDiv.style.top="0px",this.coverDiv.style.left="0px",this.coverDiv.style.width="100vw",this.coverDiv.style.height=this.windowHeight+"px",this.contentDiv.style.maxHeight=this.windowHeight-2*this.settings.popupMargin-3.5*this.styles.settings.toolbarHeight+"px"}this.positionMarkerImage(),this.positionLogo()},e.prototype.addLicenseKey=function(t){Uc.addKey(t)},e.prototype.addEventListener=function(t,r){this.eventListeners.addEventListener(t,r)},e.prototype.removeEventListener=function(t,r){this.eventListeners.removeEventListener(t,r)},e.prototype.renderState=function(t){this._silentRenderMode=!0,this.settings.displayMode="inline",this.isOpen||this.show(),this.restoreState(t),this.startRenderAndClose(),this._silentRenderMode=!1},Object.defineProperty(e.prototype,"isFocused",{get:function(){return this._isFocused},enumerable:!1,configurable:!0}),e.prototype.focus=function(){var t=this;this._isFocused||(this.attachWindowEvents(),this._isFocused=!0,this._previousCurrentMarker!==void 0&&this.setCurrentMarker(this._previousCurrentMarker),this.eventListeners.focus.forEach(function(r){return r(new Ve(t))}))},e.prototype.blur=function(){var t=this;this._isFocused&&(this.detachWindowEvents(),this._isFocused=!1,this._previousCurrentMarker=this._currentMarker,this.setCurrentMarker(),this.eventListeners.blur.forEach(function(r){return r(new Ve(t))}))},e.instanceCounter=0,e}();function ty(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(i){return i.split(" ").map(function(n){return n?""+e+n:""}).join(" ")}).join(" ")}function ey(e,t){return t.replace(/([^}{]*){/gm,function(r,i){return i.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function mr(e,t){return function(r){r&&(e[t]=r)}}function dd(e,t,r){return function(i){i&&(e[t][r]=i)}}function Kc(e,t){return function(r){var i=r.prototype;e.forEach(function(n){t(i,n)})}}function ry(e,t){return t===void 0&&(t={}),function(r,i){e.forEach(function(n){var s=t[n]||n;s in r||(r[s]=function(){for(var a,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var u=(a=this[i])[n].apply(a,o);return u===this[i]?this:u})})}}var iy="function",ny="object",sy="string",ay="number",fu="undefined",pd=typeof window!==fu,oy=typeof document!==fu&&document,ly=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],jt=1e-7,hs={cm:function(e){return e*96/2.54},mm:function(e){return e*96/254},in:function(e){return e*96},pt:function(e){return e*96/72},pc:function(e){return e*96/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function uy(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,n++)i[n]=s[a];return i}function ea(e,t,r,i){return(e*i+t*r)/(r+i)}function $n(e){return typeof e===fu}function Ze(e){return e&&typeof e===ny}function $t(e){return Array.isArray(e)}function Ee(e){return typeof e===sy}function Li(e){return typeof e===ay}function du(e){return typeof e===iy}function cy(e,t){var r=e===""||e==" ",i=t===""||t==" ";return i&&r||e===t}function vd(e,t,r,i,n){var s=pu(e,t,r);return s?r:hy(e,t,r+1,i,n)}function pu(e,t,r){if(!e.ignore)return null;var i=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(i)}function hy(e,t,r,i,n){for(var s=function(u){var c=t[u].trim();if(c===e.close&&!pu(e,t,u))return{value:u};var h=u,f=ke(n,function(d){var p=d.open;return p===c});if(f&&(h=vd(f,t,u,i,n)),h===-1)return a=u,"break";u=h,a=u},a,o=r;o<i;++o){var l=s(o);if(o=a,typeof l=="object")return l.value;if(l==="break")break}return-1}function vu(e,t){var r=Ee(t)?{separator:t}:t,i=r.separator,n=i===void 0?",":i,s=r.isSeparateFirst,a=r.isSeparateOnlyOpenClose,o=r.isSeparateOpenClose,l=o===void 0?a:o,u=r.openCloseCharacters,c=u===void 0?ly:u,h=c.map(function(w){var _=w.open,E=w.close;return _===E?_:_+"|"+E}).join("|"),f="(\\s*"+n+"\\s*|"+h+"|\\s+)",d=new RegExp(f,"g"),p=e.split(d).filter(function(w){return w&&w!=="undefined"}),v=p.length,g=[],m=[];function b(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var S=function(w){var _=p[w].trim(),E=w,M=ke(c,function(R){var L=R.open;return L===_}),O=ke(c,function(R){var L=R.close;return L===_});if(M){if(E=vd(M,p,w,v,c),E!==-1&&l)return b()&&s||(g.push(p.slice(w,E+1).join("")),w=E,s)?(x=w,"break"):(x=w,"continue")}else if(O&&!pu(O,p,w)){var A=uy(c);return A.splice(c.indexOf(O),1),{value:vu(e,{separator:n,isSeparateFirst:s,isSeparateOnlyOpenClose:a,isSeparateOpenClose:l,openCloseCharacters:A})}}else if(cy(_,n)&&!a)return b(),s?(x=w,"break"):(x=w,"continue");E===-1&&(E=v-1),m.push(p.slice(w,E+1).join("")),w=E,x=w},x,C=0;C<v;++C){var y=S(C);if(C=x,typeof y=="object")return y.value;if(y==="break")break}return m.length&&g.push(m.join("")),g}function Fr(e){return vu(e,"")}function Kr(e){return vu(e,",")}function gd(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function Xn(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],i=t[2],n=t[3];return{prefix:r,unit:n,value:parseFloat(i)}}function fy(e){return e.replace(/[\s-_]+([^\s-_])/g,function(t,r){return r.toUpperCase()})}function Bs(e,t){return e.replace(/([a-z])([A-Z])/g,function(r,i,n){return""+i+t+n.toLowerCase()})}function On(){return Date.now?Date.now():new Date().getTime()}function xr(e,t,r){r===void 0&&(r=-1);for(var i=e.length,n=0;n<i;++n)if(t(e[n],n,e))return n;return r}function ke(e,t,r){var i=xr(e,t);return i>-1?e[i]:r}var md=function(){var e=On(),t=pd&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(r){var i=On(),n=setTimeout(function(){r(i-e)},1e3/60);return n}}(),dy=function(){var e=pd&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}}();function Sr(e){return Object.keys(e)}function py(e){var t=Sr(e);return t.map(function(r){return e[r]})}function Tt(e,t){var r=Xn(e),i=r.value,n=r.unit;if(Ze(t)){var s=t[n];if(s){if(du(s))return s(i);if(hs[n])return hs[n](i,s)}}else if(n==="%")return i*t/100;return hs[n]?hs[n](i):i}function al(e,t,r){return Math.max(t,Math.min(e,r))}function Jc(e,t,r,i){return i===void 0&&(i=e[0]/e[1]),[[yt(t[0],jt),yt(t[0]/i,jt)],[yt(t[1]*i,jt),yt(t[1],jt)]].filter(function(n){return n.every(function(s,a){var o=t[a],l=yt(o,jt);return r?s<=o||s<=l:s>=o||s>=l})})[0]||e}function yd(e,t,r,i){if(!i)return e.map(function(d,p){return al(d,t[p],r[p])});var n=e[0],s=e[1],a=i===!0?n/s:i,o=Jc(e,t,!1,a),l=o[0],u=o[1],c=Jc(e,r,!0,a),h=c[0],f=c[1];return n<l||s<u?(n=l,s=u):(n>h||s>f)&&(n=h,s=f),[n,s]}function vy(e){for(var t=e.length,r=0,i=t-1;i>=0;--i)r+=e[i];return r}function ol(e){for(var t=e.length,r=0,i=t-1;i>=0;--i)r+=e[i];return t?r/t:0}function Wt(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=Math.atan2(i,r);return n>=0?n:n+Math.PI*2}function gy(e){return[0,1].map(function(t){return ol(e.map(function(r){return r[t]}))})}function Zc(e){var t=gy(e),r=Wt(t,e[0]),i=Wt(t,e[1]);return r<i&&i-r<Math.PI||r>i&&i-r<-Math.PI?1:-1}function yr(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function yt(e,t){if(!t)return e;var r=1/t;return Math.round(e/t)/r}function Qc(e,t){return e.forEach(function(r,i){e[i]=yt(e[i],t)}),e}function my(e){for(var t=[],r=0;r<e;++r)t.push(r);return t}function bd(e){return e.reduce(function(t,r){return t.concat(r)},[])}function xd(e,t){e.indexOf(t)===-1&&e.push(t)}function qt(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function Sd(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function Cd(e,t){if(e.classList)e.classList.remove(t);else{var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function Qt(e,t,r,i){e.addEventListener(t,r,i)}function Xt(e,t,r,i){e.removeEventListener(t,r,i)}function Ui(e){return(e==null?void 0:e.ownerDocument)||oy}function gu(e){return Ui(e).documentElement}function Gr(e){return Ui(e).body}function Ir(e){var t;return((t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function wd(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}function Yi(e){return Ze(e)&&e.nodeName&&e.nodeType&&"ownerDocument"in e}var yy=function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(r){return this.values[this.keys.indexOf(r)]},t.set=function(r,i){var n=this.keys,s=this.values,a=n.indexOf(r),o=a===-1?n.length:a;n[o]=r,s[o]=i},e}(),by=function(){function e(){this.object={}}var t=e.prototype;return t.get=function(r){return this.object[r]},t.set=function(r,i){this.object[r]=i},e}(),xy=typeof Map=="function",Sy=function(){function e(){}var t=e.prototype;return t.connect=function(r,i){this.prev=r,this.next=i,r&&(r.next=this),i&&(i.prev=this)},t.disconnect=function(){var r=this.prev,i=this.next;r&&(r.next=i),i&&(i.prev=r)},t.getIndex=function(){for(var r=this,i=-1;r;)r=r.prev,++i;return i},e}();function Cy(e,t){var r=[],i=[];return e.forEach(function(n){var s=n[0],a=n[1],o=new Sy;r[s]=o,i[a]=o}),r.forEach(function(n,s){n.connect(r[s-1])}),e.filter(function(n,s){return!t[s]}).map(function(n,s){var a=n[0],o=n[1];if(a===o)return[0,0];var l=r[a],u=i[o-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,r[0]);var h=l.getIndex();return[c,h]})}var wy=function(){function e(r,i,n,s,a,o,l,u){this.prevList=r,this.list=i,this.added=n,this.removed=s,this.changed=a,this.maintained=o,this.changedBeforeAdded=l,this.fixed=u}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var r=Cy(this.changedBeforeAdded,this.fixed),i=this.changed,n=[];this.cacheOrdered=r.filter(function(s,a){var o=s[0],l=s[1],u=i[a],c=u[0],h=u[1];if(o!==l)return n.push([c,h]),!0}),this.cachePureChanged=n},e}();function Un(e,t,r){var i=xy?Map:r?by:yy,n=r||function(b){return b},s=[],a=[],o=[],l=e.map(n),u=t.map(n),c=new i,h=new i,f=[],d=[],p={},v=[],g=0,m=0;return l.forEach(function(b,S){c.set(b,S)}),u.forEach(function(b,S){h.set(b,S)}),l.forEach(function(b,S){var x=h.get(b);typeof x>"u"?(++m,a.push(S)):p[x]=m}),u.forEach(function(b,S){var x=c.get(b);typeof x>"u"?(s.push(S),++g):(o.push([x,S]),m=p[S]||0,f.push([x-m,S-g]),d.push(S===x),x!==S&&v.push([x,S]))}),a.reverse(),new wy(e,t,s,a,v,o,f,d)}var _y=function(){function e(r,i){r===void 0&&(r=[]),this.findKeyCallback=i,this.list=[].slice.call(r)}var t=e.prototype;return t.update=function(r){var i=[].slice.call(r),n=Un(this.list,i,this.findKeyCallback);return this.list=i,n},e}(),ll=function(e,t){return ll=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},ll(e,t)};function Yn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ll(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ar=function(){return ar=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ar.apply(this,arguments)};function _d(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function th(e,t,r){for(var i=0,n=t.length,s;i<n;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}function eh(e){var t=0;return e.map(function(r){return r==null?"$compat".concat(++t):"".concat(r)})}function Ed(e){var t=[];return e.forEach(function(r){t=t.concat($t(r)?Ed(r):r)}),t}function Mo(e,t){if(!t)return e;for(var r in t)$n(e[r])&&(e[r]=t[r]);return e}function ra(e,t){if(e===t)return!1;for(var r in e)if(!(r in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function rh(e){var t=e.className,r=_d(e,["className"]);return t!=null&&(r.class=t),delete r.style,delete r.children,r}function ih(e){var t={},r={};for(var i in e)i.indexOf("on")===0?r[i]=e[i]:t[i]=e[i];return[t,r]}function Za(e){if(!e)return null;var t=e.b;return Yi(t)?t:Za(e.c)}function kd(e){var t=e.parentNode;t&&t.removeChild(e)}function Md(e){e.forEach(function(t){t()})}function Ey(){return this.constructor(this.props,this.context)}var mu=0,Qa=function(){function e(r,i,n,s,a,o,l){l===void 0&&(l={}),this.t=r,this.d=i,this.k=n,this.i=s,this.c=a,this.ref=o,this.ps=l,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var t=e.prototype;return t.s=function(){return!0},t.u=function(r,i,n,s,a){var o=this,l=o.d,u=py(i).filter(function(p){return p.$_req}),c=Ed(u.map(function(p){return p.$_subs})),h=ke(c,function(p){return p.d===l});if(o.b&&!Ee(n)&&!a&&!o.s(n.props,s)&&!h){var f=c.reduce(function(p,v){var g=v.d;return p[0]?p[0].d===g&&p.push(v):g>l&&p.push(v),p},[]);return f.forEach(function(p){qn(p,p._ps,[p.o],r,i,!0)}),!1}o.o=n,o.ss(s);var d=o.ps;return Ee(n)||(o.ps=n.props,o.ref=n.ref),yu(this),o.r(r,i,o.b?d:{},s),!0},t.md=function(){this.rr()},t.ss=function(){},t.ud=function(){this.rr()},t.rr=function(){var r=this,i=r.ref,n=r.fr;i&&i(n?n.current:r.b)},e}();function Pd(){return Object.__CROACT_CURRENT_INSTNACE__}function ky(){return mu}function My(e){mu=e}function yu(e){return Object.__CROACT_CURRENT_INSTNACE__=e,mu=0,e}var bu=function(){function e(r,i){r===void 0&&(r={}),this.props=r,this.context=i,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var t=e.prototype;return t.render=function(){return null},t.shouldComponentUpdate=function(r,i){return this.props!==r||this.state!==i},t.setState=function(r,i,n){var s=this;s.$_timer||(s.$_state={}),clearTimeout(s.$_timer),s.$_timer=0,s.$_state=ar(ar({},s.$_state),r),n?s.$_setState(i,n):s.$_timer=window.setTimeout(function(){s.$_timer=0,s.$_setState(i,n)})},t.forceUpdate=function(r){this.setState({},r,!0)},t.componentDidMount=function(){},t.componentDidUpdate=function(r,i){},t.componentWillUnmount=function(){},t.$_setState=function(r,i){var n=[],s=this.$_p,a=qn(s.c,[s],[s.o],n,s._cs,ar(ar({},this.state),this.$_state),i);a&&(r&&n.push(r),Md(n),yu(null))},e}(),Dd=function(e){Yn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}var r=t.prototype;return r.shouldComponentUpdate=function(i,n){return ra(this.props,i)||ra(this.state,n)},t}(bu);function Td(e){var t=function(r){t.current=r};return t.current=e,t}function Py(e){return e._fr=!0,e}function Dy(e,t,r,i){var n,s;return!((n=e==null?void 0:e.prototype)===null||n===void 0)&&n.render?s=new e(t,r):(s=new bu(t,r),s.constructor=e,e._fr?(i.fr=Td(),s.render=function(){return this.constructor(this.props,i.fr)}):s.render=Ey),s.$_p=i,s}var Ty=function(e){Yn(t,e);function t(i,n,s,a,o,l,u){u===void 0&&(u={});var c=e.call(this,i,n,s,a,o,l,Mo(u,i.defaultProps))||this;return c.typ="comp",c._usefs=[],c._uefs=[],c._defs=[],c}var r=t.prototype;return r.s=function(i,n){var s=this.b;return s.shouldComponentUpdate(Mo(i,this.t.defaultProps),n||s.state)!==!1},r.r=function(i,n,s){var a,o,l=this,u=l.t;l.ps=Mo(l.ps,l.t.defaultProps);var c=l.ps,h=!l.b,f=u.contextType,d=l.b,p=f==null?void 0:f.get(l);l._cs=n,h?(d=Dy(u,c,p,l),l.b=d):(d.props=c,d.context=p);var v=d.state;l._usefs=[],l._uefs=[];var g=d.render();((o=(a=g==null?void 0:g.props)===null||a===void 0?void 0:a.children)===null||o===void 0?void 0:o.length)===0&&(g.props.children=l.ps.children);var m=ar(ar({},n),d.$_cs);qn(l,l._ps,g?[g]:[],i,m),h?l._uefs.push(function(){f==null||f.register(l),d.componentDidMount()}):l._uefs.push(function(){d.componentDidUpdate(s,v)}),i.push(function(){l._usefs.forEach(function(b){b()}),h?l.md():l.ud(),l._defs=l._uefs.map(function(b){return b()})})},r.ss=function(i){var n=this.b;!n||!i||(n.state=i)},r.un=function(){var i,n=this;n._ps.forEach(function(a){a.un()});var s=n.t;(i=s.contextType)===null||i===void 0||i.unregister(n),clearTimeout(n.b.$_timer),n._defs.forEach(function(a){a&&a()}),n.b.componentWillUnmount()},t}(Qa);function Ry(e,t,r){var i=xu(rh(e),rh(t)),n=i.added,s=i.removed,a=i.changed;for(var o in n)r.setAttribute(o,n[o]);for(var l in a)r.setAttribute(l,a[l][1]);for(var u in s)r.removeAttribute(u)}function Ay(e,t,r){var i=xu(e,t),n=i.added,s=i.removed;for(var a in s)r.e(a,!0);for(var o in n)r.e(o)}function xu(e,t){var r=Sr(e),i=Sr(t),n=Un(r,i,function(l){return l}),s={},a={},o={};return n.added.forEach(function(l){var u=i[l];s[u]=t[u]}),n.removed.forEach(function(l){var u=r[l];a[u]=e[u]}),n.maintained.forEach(function(l){var u=l[0],c=r[u],h=[e[c],t[c]];e[c]!==t[c]&&(o[c]=h)}),{added:s,removed:a,changed:o}}function Oy(e,t,r){var i=r.style,n=xu(e,t),s=n.added,a=n.removed,o=n.changed;for(var l in s){var u=Bs(l,"-");i.setProperty(u,s[l])}for(var l in o){var c=Bs(l,"-");i.setProperty(c,o[l][1])}for(var l in a){var h=Bs(l,"-");i.removeProperty(h)}}function By(e){return e.replace(/^on/g,"").toLowerCase()}var Iy=function(e){Yn(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.typ="elem",i._es={},i._svg=!1,i}var r=t.prototype;return r.e=function(i,n){var s=this,a=s._es,o=s.b,l=By(i);n?(Xt(o,l,a[i]),delete a[i]):(a[i]=function(u){var c,h;(h=(c=s.ps)[i])===null||h===void 0||h.call(c,u)},Qt(o,l,a[i]))},r.s=function(i){return ra(this.ps,i)},r.r=function(i,n,s){var a,o=this,l=!o.b,u=o.ps;if(l){var c=Za(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=c&&c.ownerSVGElement,o._svg=h;var f=(a=o._hyd)===null||a===void 0?void 0:a.splice(0,1)[0],d=o.t;if(f)o._hyd=[].slice.call(f.children||[]);else{var p=Ui(c);h?f=p.createElementNS("http://www.w3.org/2000/svg",d):f=p.createElement(d)}o.b=f}qn(o,o._ps,u.children,i,n);var v=o.b,g=ih(s),m=g[0],b=g[1],S=ih(u),x=S[0],C=S[1];return Ry(m,x,v),Ay(b,C,o),Oy(s.style||{},u.style||{},v),i.push(function(){l?o.md():o.ud()}),!0},r.un=function(){var i=this,n=i._es,s=i.b;for(var a in n)Xt(s,a,n[a]);i._ps.forEach(function(o){o.un()}),i._es={},i._sel||kd(s)},t}(Qa);function Bn(e){if(!e||Yi(e))return e;var t=e.$_p._ps;return t.length?Bn(t[0].b):null}function Rd(e){if(e){if(e.b&&Yi(e.b))return e;var t=e._ps;return t.length?Rd(t[0]):null}}function Ke(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=t||{},s=n.key,a=n.ref,o=_d(n,["key","ref"]);return{type:e,key:s,ref:a,props:ar(ar({},o),{children:bd(r).filter(function(l){return l!=null&&l!==!1})})}}var Ad=function(e){Yn(t,e);function t(i,n){n===void 0&&(n=0);var s=e.call(this,"container",n,"container",0,null)||this;return s.typ="container",s.b=i,s}var r=t.prototype;return r.r=function(){return!0},r.un=function(){},t}(Qa),Ly=function(e){Yn(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.typ="text",i}var r=t.prototype;return r.r=function(i){var n,s=this,a=!s.b;if(a){var o=Za(s.c),l=(n=s._hyd)===null||n===void 0?void 0:n.splice(0,1)[0];s.b=l||Ui(o).createTextNode(s.t.replace("text_",""))}return i.push(function(){a?s.md():s.ud()}),!0},r.un=function(){kd(this.b)},t}(Qa);function Fy(e,t,r){var i=r.map(function(l){return Ee(l)?null:l.key}),n=eh(t.map(function(l){return l.k})),s=eh(i),a=Un(n,s,function(l){return l});a.removed.forEach(function(l){t.splice(l,1)[0].un()}),a.ordered.forEach(function(l){var u=l[0],c=l[1],h=t.splice(u,1)[0];t.splice(c,0,h);var f=Bn(h.b),d=Bn(t[c+1]&&t[c+1].b);f&&f.parentNode.insertBefore(f,d)}),a.added.forEach(function(l){t.splice(l,0,nh(r[l],i[l],l,e))});var o=a.maintained.filter(function(l){l[0];var u=l[1],c=r[u],h=t[u],f=Ee(c)?"text_".concat(c):c.type;return f!==h.t?(h.un(),t.splice(u,1,nh(c,i[u],u,e)),!0):(h.i=u,!1)});return th(th([],a.added,!0),o.map(function(l){l[0];var u=l[1];return u}))}function zy(e,t){for(var r=e._ps,i=r.length,n=t.i+1;n<i;++n){var s=Bn(r[n].b);if(s)return s}return null}function nh(e,t,r,i){var n=i.d+1;if(Ee(e)||Li(e))return new Ly("text_".concat(e),n,t,r,i,null,{});var s=e.type,a=typeof s=="string"?Iy:Ty;return new a(s,n,t,r,i,e.ref,e.props)}function qn(e,t,r,i,n,s,a){var o=Fy(e,t,r),l=e._hyd,u=t.filter(function(h,f){return h._hyd=l,h.u(i,n,r[f],s,a)});e.typ==="container"&&e._sel&&t.forEach(function(h){var f=Rd(h);f&&(f._sel=!0)}),e._hyd=null;var c=Za(e);return c&&o.reverse().forEach(function(h){var f=t[h],d=Bn(f.b);if(d&&c!==d&&!d.parentNode){var p=zy(e,f);c.insertBefore(d,p)}}),u.length>0}function Ny(e,t,r,i){r===void 0&&(r=t.__CROACT__),i===void 0&&(i={});var n=!!r;r||(r=new Ad(t));var s=[];return qn(r,r._ps,e?[e]:[],s,i,void 0,void 0),Md(s),yu(null),n||(t.__CROACT__=r),r}function sh(e,t,r){return!r&&e&&(r=new Ad(t.parentElement),r._hyd=[t],r._sel=!0),Ny(e,t,r),r}function Od(e){var t=Pd(),r=t._hs||(t._hs=[]),i=ky(),n=r[i];if(My(i+1),n){if(!ra(n.deps,e.deps))return n.updated=!1,n;r[i]=e}else r.push(e);return e.value=e.func(),e.updated=!0,e}function Gy(e,t){var r=Od({func:e,deps:t});return r.value}function Wy(e){return Gy(function(){return Td(e)},[])}function Bd(e,t,r){var i=Pd(),n=Od({func:function(){return e},deps:t}),s=r?i._usefs:i._uefs;n.updated?s.push(function(){return n.effect&&n.effect(),n.effect=e(),n.effect}):s.push(function(){return n.effect})}function Hy(e,t,r){Bd(function(){e==null||e(t())},r,!0)}function Su(e,t){for(var r=e.length,i=0;i<r;++i)if(t(e[i],i))return!0;return!1}function Id(e,t){for(var r=e.length,i=0;i<r;++i)if(t(e[i],i))return e[i];return null}function Ld(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function Cu(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function Vy(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!!(t&&t.length)}function jy(e,t){var r=Cu("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return r?r[3]:""}function ul(e){return e.replace(/_/g,".")}function rn(e,t){var r=null,i="-1";return Su(e,function(n){var s=Cu("("+n.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!s||n.brand?!1:(r=n,i=s[3]||"-1",n.versionAlias?i=n.versionAlias:n.versionTest&&(i=jy(n.versionTest.toLowerCase(),t)||i),i=ul(i),!0)}),{preset:r,version:i}}function fs(e,t){var r={brand:"",version:"-1"};return Su(e,function(i){var n=Fd(t,i);return n?(r.brand=i.id,r.version=i.versionAlias||n.version,r.version!=="-1"):!1}),r}function Fd(e,t){return Id(e,function(r){var i=r.brand;return Cu(""+t.test,i.toLowerCase())})}var zd=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Nd=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],cl=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Gd=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Wd=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Hd(e){return!!rn(Gd,e).preset}function $y(e){var t=Ld(e),r=!!/mobi/g.exec(t),i={name:"unknown",version:"-1",majorVersion:-1,webview:Hd(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},n={name:"unknown",version:"-1",majorVersion:-1},s=rn(zd,t),a=s.preset,o=s.version,l=rn(Wd,t),u=l.preset,c=l.version,h=rn(Nd,t);if(i.chromium=!!h.preset,i.chromiumVersion=h.version,!i.chromium){var f=rn(cl,t);i.webkit=!!f.preset,i.webkitVersion=f.version}return u&&(n.name=u.id,n.version=c,n.majorVersion=parseInt(c,10)),a&&(i.name=a.id,i.version=o,i.webview&&n.name==="ios"&&i.name!=="safari"&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:n,isMobile:r,isHints:!1}}function Xy(e){var t=navigator.userAgentData,r=(t.uaList||t.brands).slice(),i=t.mobile||!1,n=r[0],s=(t.platform||navigator.platform).toLowerCase(),a={name:n.brand,version:n.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!fs(Gd,r).brand||Hd(Ld())},o={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&Su(cl,function(f){return Fd(r,f)});var l=fs(Nd,r);if(a.chromium=!!l.brand,a.chromiumVersion=l.version,!a.chromium){var u=fs(cl,r);a.webkit=!!u.brand,a.webkitVersion=u.version}var c=Id(Wd,function(f){return new RegExp(""+f.test,"g").exec(s)});o.name=c?c.id:"";{var h=fs(zd,r);a.name=h.brand||a.name,a.version=h.brand&&e?e.uaFullVersion:h.version}return a.webkit&&(o.name=i?"ios":"mac"),o.name==="ios"&&a.webview&&(a.version="-1"),o.version=ul(o.version),a.version=ul(a.version),o.majorVersion=parseInt(o.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:o,isMobile:i,isHints:!0}}function Uy(e){return Vy()?Xy():$y(e)}function Yy(e,t,r,i,n,s){for(var a=0;a<n;++a){var o=r+a*n,l=i+a*n;e[o]+=e[l]*s,t[o]+=t[l]*s}}function qy(e,t,r,i,n){for(var s=0;s<n;++s){var a=r+s*n,o=i+s*n,l=e[a],u=t[a];e[a]=e[o],e[o]=l,t[a]=t[o],t[o]=u}}function Ky(e,t,r,i,n){for(var s=0;s<i;++s){var a=r+s*i;e[a]/=n,t[a]/=n}}function Vd(e,t,r){for(var i=e.slice(),n=0;n<r;++n)i[n*r+t-1]=0,i[(t-1)*r+n]=0;return i[(t-1)*(r+1)]=1,i}function cr(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=e.slice(),i=It(t),n=0;n<t;++n){var s=t*n+n;if(!yt(r[s],jt)){for(var a=n+1;a<t;++a)if(r[t*n+a]){qy(r,i,n,a,t);break}}if(!yt(r[s],jt))return[];Ky(r,i,n,t,r[s]);for(var a=0;a<t;++a){var o=a,l=a+n*t,u=r[l];!yt(u,jt)||n===a||Yy(r,i,o,n,t,-u)}}return i}function Jy(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],i=0;i<t;++i)for(var n=0;n<t;++n)r[n*t+i]=e[t*i+n];return r}function jd(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],i=e[t*t-1],n=0;n<t-1;++n)r[n]=e[t*(t-1)+n]/i;return r[t-1]=0,r}function Zy(e,t){for(var r=It(t),i=0;i<t-1;++i)r[t*(t-1)+i]=e[i]||0;return r}function ei(e,t){for(var r=e.slice(),i=e.length;i<t-1;++i)r[i]=0;return r[t-1]=1,r}function Qe(e,t,r){if(t===void 0&&(t=Math.sqrt(e.length)),t===r)return e;for(var i=It(r),n=Math.min(t,r),s=0;s<n-1;++s){for(var a=0;a<n-1;++a)i[s*r+a]=e[s*t+a];i[(s+1)*r-1]=e[(s+1)*t-1],i[(r-1)*r+s]=e[(t-1)*t+s]}return i[r*r-1]=e[t*t-1],i}function ia(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=It(e);return t.forEach(function(n){i=Rt(i,n,e)}),i}function Rt(e,t,r){r===void 0&&(r=Math.sqrt(e.length));var i=[],n=e.length/r,s=t.length/n;if(n){if(!s)return e}else return t;for(var a=0;a<r;++a)for(var o=0;o<s;++o){i[o*r+a]=0;for(var l=0;l<n;++l)i[o*r+a]+=e[l*r+a]*t[o*n+l]}return i}function kt(e,t){for(var r=Math.min(e.length,t.length),i=e.slice(),n=0;n<r;++n)i[n]=i[n]+t[n];return i}function pt(e,t){for(var r=Math.min(e.length,t.length),i=e.slice(),n=0;n<r;++n)i[n]=i[n]-t[n];return i}function Qy(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function $d(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function ue(e,t,r){r===void 0&&(r=t.length);var i=Rt(e,t,r),n=i[r-1];return i.map(function(s){return s/n})}function t1(e,t){return Rt(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function e1(e,t){return Rt(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function r1(e,t){return Rt(e,Jn(t,4))}function ds(e,t){var r=t[0],i=r===void 0?1:r,n=t[1],s=n===void 0?1:n,a=t[2],o=a===void 0?1:a;return Rt(e,[i,0,0,0,0,s,0,0,0,0,o,0,0,0,0,1],4)}function Kn(e,t){return ue(Jn(t,3),ei(e,3))}function Po(e,t){var r=t[0],i=r===void 0?0:r,n=t[1],s=n===void 0?0:n,a=t[2],o=a===void 0?0:a;return Rt(e,[1,0,0,0,0,1,0,0,0,0,1,0,i,s,o,1],4)}function ah(e,t){return Rt(e,t,4)}function Jn(e,t){var r=Math.cos(e),i=Math.sin(e),n=It(t);return n[0]=r,n[1]=i,n[t]=-i,n[t+1]=r,n}function It(e){for(var t=e*e,r=[],i=0;i<t;++i)r[i]=i%(e+1)?0:1;return r}function wu(e,t){for(var r=It(t),i=Math.min(e.length,t-1),n=0;n<i;++n)r[(t+1)*n]=e[n];return r}function ri(e,t){for(var r=It(t),i=Math.min(e.length,t-1),n=0;n<i;++n)r[t*(t-1)+n]=e[n];return r}function _u(e,t,r,i,n,s,a,o){var l=e[0],u=e[1],c=t[0],h=t[1],f=r[0],d=r[1],p=i[0],v=i[1],g=n[0],m=n[1],b=s[0],S=s[1],x=a[0],C=a[1],y=o[0],w=o[1],_=[l,0,c,0,f,0,p,0,u,0,h,0,d,0,v,0,1,0,1,0,1,0,1,0,0,l,0,c,0,f,0,p,0,u,0,h,0,d,0,v,0,1,0,1,0,1,0,1,-g*l,-m*l,-b*c,-S*c,-x*f,-C*f,-y*p,-w*p,-g*u,-m*u,-b*h,-S*h,-x*d,-C*d,-y*v,-w*v],E=cr(_,8);if(!E.length)return[];var M=Rt(E,[g,m,b,S,x,C,y,w],8);return M[8]=1,Qe(Jy(M),3,4)}var xn=function(){return xn=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},xn.apply(this,arguments)};function i1(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function In(e,t){return t===void 0&&(t=0),pi(Fi(e,t))}function n1(e,t){var r=ue(e,[t[0],t[1]||0,t[2]||0,1],4),i=r[3]||1;return[r[0]/i,r[1]/i,r[2]/i]}function pi(e){var t=i1();return e.forEach(function(r){var i=r.matrixFunction,n=r.functionValue;i&&(t=i(t,n))}),t}function Fi(e,t){t===void 0&&(t=0);var r=$t(e)?e:Fr(e);return r.map(function(i){var n=gd(i),s=n.prefix,a=n.value,o=null,l=s,u="";if(s==="translate"||s==="translateX"||s==="translate3d"){var c=Ze(t)?xn(xn({},t),{"o%":t["%"]}):{"%":t,"o%":t},h=Kr(a).map(function(R,L){return L===0&&"x%"in c?c["%"]=t["x%"]:L===1&&"y%"in c?c["%"]=t["y%"]:c["%"]=t["o%"],Tt(R,c)}),f=h[0],d=h[1],p=d===void 0?0:d,v=h[2],g=v===void 0?0:v;o=Po,u=[f,p,g]}else if(s==="translateY"){var m=Ze(t)?xn({"%":t["y%"]},t):{"%":t},p=Tt(a,m);o=Po,u=[0,p,0]}else if(s==="translateZ"){var g=parseFloat(a);o=Po,u=[0,0,g]}else if(s==="scale"||s==="scale3d"){var b=Kr(a).map(function(R){return parseFloat(R)}),S=b[0],x=b[1],C=x===void 0?S:x,y=b[2],w=y===void 0?1:y;o=ds,u=[S,C,w]}else if(s==="scaleX"){var S=parseFloat(a);o=ds,u=[S,1,1]}else if(s==="scaleY"){var C=parseFloat(a);o=ds,u=[1,C,1]}else if(s==="scaleZ"){var w=parseFloat(a);o=ds,u=[1,1,w]}else if(s==="rotate"||s==="rotateZ"||s==="rotateX"||s==="rotateY"){var _=Xn(a),E=_.unit,M=_.value,O=E==="rad"?M:M*Math.PI/180;s==="rotate"||s==="rotateZ"?(l="rotateZ",o=r1):s==="rotateX"?o=t1:s==="rotateY"&&(o=e1),u=O}else if(s==="matrix3d")o=ah,u=Kr(a).map(function(R){return parseFloat(R)});else if(s==="matrix"){var A=Kr(a).map(function(R){return parseFloat(R)});o=ah,u=[A[0],A[1],0,0,A[2],A[3],0,0,0,0,1,0,A[4],A[5],0,1]}else l="";return{name:s,functionName:l,value:a,matrixFunction:o,functionValue:u}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var hl=function(e,t){return hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},hl(e,t)};function s1(e,t){hl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Xd=typeof Map=="function"?void 0:function(){var e=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++e)}}(),Ud=function(e){s1(t,e);function t(r){return r===void 0&&(r=[]),e.call(this,r,Xd)||this}return t}(_y);function a1(e,t){return Un(e,t,Xd)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fl=function(){return fl=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},fl.apply(this,arguments)};function o1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,n++)i[n]=s[a];return i}var to=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(r,i){if(Ze(r))for(var n in r)this.on(n,r[n]);else this._addEvent(r,i,{});return this},t.off=function(r,i){if(!r)this._events={};else if(Ze(r))for(var n in r)this.off(n);else if(!i)this._events[r]=[];else{var s=this._events[r];if(s){var a=xr(s,function(o){return o.listener===i});a>-1&&s.splice(a,1)}}return this},t.once=function(r,i){var n=this;return i&&this._addEvent(r,i,{once:!0}),new Promise(function(s){n._addEvent(r,s,{once:!0})})},t.emit=function(r,i){var n=this;i===void 0&&(i={});var s=this._events[r];if(!r||!s)return!0;var a=!1;return i.eventType=r,i.stop=function(){a=!0},i.currentTarget=this,o1(s).forEach(function(o){o.listener(i),o.once&&n.off(r,o.listener)}),!a},t.trigger=function(r,i){return i===void 0&&(i={}),this.emit(r,i)},t._addEvent=function(r,i,n){var s=this._events;s[r]=s[r]||[];var a=s[r];a.push(fl({listener:i},n))},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dl=function(e,t){return dl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},dl(e,t)};function l1(e,t){dl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var yi=function(){return yi=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},yi.apply(this,arguments)};function u1(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function oh(e,t){return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}function ps(e){if(e){if(Ee(e))return document.querySelector(e)}else return null;if(du(e))return e();if(e instanceof Element)return e;if("current"in e)return e.current;if("value"in e)return e.value}var c1=function(e){l1(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i._startRect=null,i._startPos=[],i._prevTime=0,i._timer=0,i._prevScrollPos=[0,0],i._isWait=!1,i._flag=!1,i._currentOptions=null,i._lock=!1,i._unregister=null,i._onScroll=function(){var n=i._currentOptions;i._lock||!n||i.emit("scrollDrag",{next:function(s){i.checkScroll({container:n.container,inputEvent:s})}})},i}var r=t.prototype;return r.dragStart=function(i,n){var s=ps(n.container);if(!s){this._flag=!1;return}var a=0,o=0,l=0,u=0;if(s===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=s.getBoundingClientRect();a=c.top,o=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[i.clientX,i.clientY],this._startRect={top:a,left:o,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],n),this._currentOptions=n,this._registerScrollEvent(n)},r.drag=function(i,n){if(clearTimeout(this._timer),!!this._flag){var s=i.clientX,a=i.clientY,o=n.threshold,l=o===void 0?0:o,u=this,c=u._startRect,h=u._startPos;this._currentOptions=n;var f=[0,0];return c.top>a-l?(h[1]>c.top||a<h[1])&&(f[1]=-1):c.top+c.height<a+l&&(h[1]<c.top+c.height||a>h[1])&&(f[1]=1),c.left>s-l?(h[0]>c.left||s<h[0])&&(f[0]=-1):c.left+c.width<s+l&&(h[0]<c.left+c.width||s>h[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(yi(yi({},n),{direction:f,inputEvent:i,isDrag:!0}))}},r.checkScroll=function(i){var n=this;if(this._isWait)return!1;var s=i.prevScrollPos,a=s===void 0?this._prevScrollPos:s,o=i.direction,l=i.throttleTime,u=l===void 0?0:l,c=i.inputEvent,h=i.isDrag,f=this._getScrollPosition(o||[0,0],i),d=f[0]-a[0],p=f[1]-a[1],v=o||[d?Math.abs(d)/d:0,p?Math.abs(p)/p:0];return this._prevScrollPos=f,this._lock=!1,!d&&!p?!1:(this.emit("move",{offsetX:v[0]?d:0,offsetY:v[1]?p:0,inputEvent:c}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){n._continueDrag(i)},u)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(i,n){var s=n.container,a=n.getScrollPosition,o=a===void 0?u1:a;return o({container:ps(s),direction:i})},r._continueDrag=function(i){var n=this,s,a=i.container,o=i.direction,l=i.throttleTime,u=i.useScroll,c=i.isDrag,h=i.inputEvent;if(!(!this._flag||c&&this._isWait)){var f=On(),d=Math.max(l+this._prevTime-f,0);if(d>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){n._continueDrag(i)},d),!1;this._prevTime=f;var p=this._getScrollPosition(o,i);this._prevScrollPos=p,c&&(this._isWait=!0),u||(this._lock=!0);var v={container:ps(a),direction:o,inputEvent:h};return(s=i.requestScroll)===null||s===void 0||s.call(i,v),this.emit("scroll",v),this._isWait=!1,u||this.checkScroll(yi(yi({},i),{prevScrollPos:p,direction:o,inputEvent:h}))}},r._registerScrollEvent=function(i){this._unregisterScrollEvent();var n=i.checkScrollEvent;if(n){var s=n===!0?oh:n,a=ps(i.container);n===!0&&(a===document.body||a===document.documentElement)?this._unregister=oh(window,this._onScroll):this._unregister=s(a,this._onScroll)}},r._unregisterScrollEvent=function(){var i;(i=this._unregister)===null||i===void 0||i.call(this),this._unregister=null},t}(to);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function h1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,n++)i[n]=s[a];return i}function be(e){return yt(e,jt)}function f1(e,t){return e.every(function(r,i){return be(r-t[i])===0})}function d1(e,t){return!be(e[0]-t[0])&&!be(e[1]-t[1])}function Yd(e){return e.length<3?0:Math.abs(vy(e.map(function(t,r){var i=e[r+1]||e[0];return t[0]*i[1]-i[0]*t[1]})))/2}function lh(e,t){var r=t.width,i=t.height,n=t.left,s=t.top,a=ii(e),o=a.minX,l=a.minY,u=a.maxX,c=a.maxY,h=r/(u-o),f=i/(c-l);return e.map(function(d){return[n+(d[0]-o)*h,s+(d[1]-l)*f]})}function ii(e){var t=e.map(function(i){return i[0]}),r=e.map(function(i){return i[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,r)}}function pl(e,t,r){var i=e[0],n=e[1],s=ii(t),a=s.minX,o=s.maxX,l=[[a,n],[o,n]],u=na(l[0],l[1]),c=vl(t),h=[];if(c.forEach(function(p){var v=na(p[0],p[1]),g=p[0];if(f1(u,v))h.push({pos:e,line:p,type:"line"});else{var m=qd(Eu(u,v),[l,p]);m.forEach(function(b){p.some(function(S){return d1(S,b)})?h.push({pos:b,line:p,type:"point"}):be(g[1]-n)!==0&&h.push({pos:b,line:p,type:"intersection"})})}}),ke(h,function(p){return p[0]===i}))return!0;var f=0,d={};return h.forEach(function(p){var v=p.pos,g=p.type,m=p.line;if(!(v[0]>i))if(g==="intersection")++f;else{if(g==="line")return;if(g==="point"){var b=ke(m,function(C){return C[1]!==n}),S=d[v[0]],x=b[1]>n?1:-1;S?S!==x&&++f:d[v[0]]=x}}}),f%2===1}function na(e,t){var r=e[0],i=e[1],n=t[0],s=t[1],a=n-r,o=s-i;Math.abs(a)<jt&&(a=0),Math.abs(o)<jt&&(o=0);var l=0,u=0,c=0;return a?o?(l=-o/a,u=1,c=-l*r-i):(u=1,c=-i):o&&(l=-1,c=r),[l,u,c]}function Eu(e,t){var r=e[0],i=e[1],n=e[2],s=t[0],a=t[1],o=t[2],l=r===0&&s===0,u=i===0&&a===0,c=[];if(l&&u)return[];if(l){var h=-n/i,f=-o/a;return h!==f?[]:[[-1/0,h],[1/0,h]]}else if(u){var d=-n/r,p=-o/s;return d!==p?[]:[[d,-1/0],[d,1/0]]}else if(r===0){var v=-n/i,g=-(a*v+o)/s;c=[[g,v]]}else if(s===0){var v=-o/a,g=-(i*v+n)/r;c=[[g,v]]}else if(i===0){var g=-n/r,v=-(s*g+o)/a;c=[[g,v]]}else if(a===0){var g=-o/s,v=-(r*g+n)/i;c=[[g,v]]}else{var g=(i*o-a*n)/(a*r-i*s),v=-(r*g+n)/i;c=[[g,v]]}return c.map(function(m){return[m[0],m[1]]})}function qd(e,t){var r=t.map(function(h){return[0,1].map(function(f){return[Math.min(h[0][f],h[1][f]),Math.max(h[0][f],h[1][f])]})}),i=[];if(e.length===2){var n=e[0],s=n[0],a=n[1];if(be(s-e[1][0])){if(!be(a-e[1][1])){var u=Math.max.apply(Math,r.map(function(h){return h[0][0]})),c=Math.min.apply(Math,r.map(function(h){return h[0][1]}));if(be(u-c)>0)return[];i=[[u,a],[c,a]]}}else{var o=Math.max.apply(Math,r.map(function(h){return h[1][0]})),l=Math.min.apply(Math,r.map(function(h){return h[1][1]}));if(be(o-l)>0)return[];i=[[s,o],[s,l]]}}return i.length||(i=e.filter(function(h){var f=h[0],d=h[1];return r.every(function(p){return 0<=be(f-p[0][0])&&0<=be(p[0][1]-f)&&0<=be(d-p[1][0])&&0<=be(p[1][1]-d)})})),i.map(function(h){return[be(h[0]),be(h[1])]})}function vl(e){return h1(e.slice(1),[e[0]]).map(function(t,r){return[e[r],t]})}function p1(e,t){var r=e.slice(),i=t.slice();Zc(r)===-1&&r.reverse(),Zc(i)===-1&&i.reverse();var n=vl(r),s=vl(i),a=n.map(function(c){return na(c[0],c[1])}),o=s.map(function(c){return na(c[0],c[1])}),l=[];a.forEach(function(c,h){var f=n[h],d=[];o.forEach(function(p,v){var g=Eu(c,p),m=qd(g,[f,s[v]]);d.push.apply(d,m.map(function(b){return{index1:h,index2:v,pos:b,type:"intersection"}}))}),d.sort(function(p,v){return yr(f[0],p.pos)-yr(f[0],v.pos)}),l.push.apply(l,d),pl(f[1],i)&&l.push({index1:h,index2:-1,pos:f[1],type:"inside"})}),s.forEach(function(c,h){if(pl(c[1],r)){var f=!1,d=xr(l,function(p){var v=p.index2;return v===h?(f=!0,!1):!!f});d===-1&&(f=!1,d=xr(l,function(p){var v=p.index1,g=p.index2;return v===-1&&g+1===h?(f=!0,!1):!!f})),d===-1?l.push({index1:-1,index2:h,pos:c[1],type:"inside"}):l.splice(d,0,{index1:-1,index2:h,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var h=c.pos,f=h[0]+"x"+h[1];return u[f]?!1:(u[f]=!0,!0)})}function v1(e,t){var r=p1(e,t);return r.map(function(i){var n=i.pos;return n})}function g1(e,t){var r=v1(e,t);return Yd(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gl=function(e,t){return gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},gl(e,t)};function m1(e,t){gl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Vt=function(){return Vt=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Vt.apply(this,arguments)};function y1(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=Math.atan2(i,r);return n>=0?n:n+Math.PI*2}function Do(e){return y1([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180}function b1(e){return e.touches&&e.touches.length>=2}function vs(e){return e?e.touches?S1(e.touches):[Kd(e)]:[]}function x1(e){return e&&(e.type.indexOf("mouse")>-1||"button"in e)}function uh(e,t,r){var i=r.length,n=Sn(e,i),s=n.clientX,a=n.clientY,o=n.originalClientX,l=n.originalClientY,u=Sn(t,i),c=u.clientX,h=u.clientY,f=Sn(r,i),d=f.clientX,p=f.clientY,v=s-c,g=a-h,m=s-d,b=a-p;return{clientX:o,clientY:l,deltaX:v,deltaY:g,distX:m,distY:b}}function To(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function S1(e){for(var t=Math.min(e.length,2),r=[],i=0;i<t;++i)r.push(Kd(e[i]));return r}function Kd(e){return{clientX:e.clientX,clientY:e.clientY}}function Sn(e,t){t===void 0&&(t=e.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},i=Math.min(e.length,t),n=0;n<i;++n){var s=e[n];r.originalClientX+="originalClientX"in s?s.originalClientX:s.clientX,r.originalClientY+="originalClientY"in s?s.originalClientY:s.clientY,r.clientX+=s.clientX,r.clientY+=s.clientY}return t?{clientX:r.clientX/t,clientY:r.clientY/t,originalClientX:r.originalClientX/t,originalClientY:r.originalClientY/t}:r}var Ro=function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),Do(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),Do(t)-Do(this.startClients)},e.prototype.getPosition=function(t,r){t===void 0&&(t=this.prevClients);var i=uh(t||this.prevClients,this.prevClients,this.startClients),n=i.deltaX,s=i.deltaY;return this.movement+=Math.sqrt(n*n+s*s),this.prevClients=t,i},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var r=this.prevClients,i=this.startClients,n=Math.min(this.length,r.length),s=[],a=0;a<n;++a)s[a]=uh([t[a]],[r[a]],[i[a]]);return s},e.prototype.getMovement=function(t){var r=this.movement;if(!t)return r;var i=Sn(t,this.length),n=Sn(this.prevClients,this.length),s=i.clientX-n.clientX,a=i.clientY-n.clientY;return Math.sqrt(s*s+a*a)+r},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),To(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),To(t)/To(this.startClients)},e.prototype.move=function(t,r){this.startClients.forEach(function(i){i.clientX-=t,i.clientY-=r}),this.prevClients.forEach(function(i){i.clientX-=t,i.clientY-=r})},e}(),ch=["textarea","input"],C1=function(e){m1(t,e);function t(r,i){i===void 0&&(i={});var n=e.call(this)||this;n.options={},n.flag=!1,n.pinchFlag=!1,n.data={},n.isDrag=!1,n.isPinch=!1,n.clientStores=[],n.targets=[],n.prevTime=0,n.doubleFlag=!1,n._useMouse=!1,n._useTouch=!1,n._useDrag=!1,n._dragFlag=!1,n._isTrusted=!1,n._isMouseEvent=!1,n._isSecondaryButton=!1,n._preventMouseEvent=!1,n._prevInputEvent=null,n._isDragAPI=!1,n._isIdle=!0,n._preventMouseEventId=0,n._window=window,n.onDragStart=function(f,d){if(d===void 0&&(d=!0),!(!n.flag&&f.cancelable===!1)){var p=f.type.indexOf("drag")>=-1;if(!(n.flag&&p)){n._isDragAPI=!0;var v=n.options,g=v.container,m=v.pinchOutside,b=v.preventWheelClick,S=v.preventRightClick,x=v.preventDefault,C=v.checkInput,y=v.dragFocusedInput,w=v.preventClickEventOnDragStart,_=v.preventClickEventOnDrag,E=v.preventClickEventByCondition,M=n._useTouch,O=!n.flag;if(n._isSecondaryButton=f.which===3||f.button===2,b&&(f.which===2||f.button===1)||S&&(f.which===3||f.button===2))return n.stop(),!1;if(O){var A=n._window.document.activeElement,R=f.target;if(R){var L=R.tagName.toLowerCase(),I=ch.indexOf(L)>-1,H=R.isContentEditable;if(I||H){if(C||!y&&A===R)return!1;if(A&&(A===R||H&&A.isContentEditable&&A.contains(R)))if(y)R.blur();else return!1}else if((x||f.type==="touchstart")&&A){var W=A.tagName.toLowerCase();(A.isContentEditable||ch.indexOf(W)>-1)&&A.blur()}(w||_||E)&&Qt(n._window,"click",n._onClick,!0)}n.clientStores=[new Ro(vs(f))],n._isIdle=!1,n.flag=!0,n.isDrag=!1,n._isTrusted=d,n._dragFlag=!0,n._prevInputEvent=f,n.data={},n.doubleFlag=On()-n.prevTime<200,n._isMouseEvent=x1(f),!n._isMouseEvent&&n._preventMouseEvent&&n._allowMouseEvent();var z=n._preventMouseEvent||n.emit("dragStart",Vt(Vt({data:n.data,datas:n.data,inputEvent:f,isMouseEvent:n._isMouseEvent,isSecondaryButton:n._isSecondaryButton,isTrusted:d,isDouble:n.doubleFlag},n.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));z===!1&&n.stop(),n._isMouseEvent&&n.flag&&x&&f.preventDefault()}if(!n.flag)return!1;var Y=0;if(O?(n._attchDragEvent(),M&&m&&(Y=setTimeout(function(){Qt(g,"touchstart",n.onDragStart,{passive:!1})}))):M&&m&&Xt(g,"touchstart",n.onDragStart),n.flag&&b1(f)){if(clearTimeout(Y),O&&f.touches.length!==f.changedTouches.length)return;n.pinchFlag||n.onPinchStart(f)}}}},n.onDrag=function(f,d){if(n.flag){var p=n.options.preventDefault;!n._isMouseEvent&&p&&f.preventDefault(),n._prevInputEvent=f;var v=vs(f),g=n.moveClients(v,f,!1);if(n._dragFlag){if(n.pinchFlag||g.deltaX||g.deltaY){var m=n._preventMouseEvent||n.emit("drag",Vt(Vt({},g),{isScroll:!!d,inputEvent:f}));if(m===!1){n.stop();return}}n.pinchFlag&&n.onPinch(f,v)}n.getCurrentStore().getPosition(v,!0)}},n.onDragEnd=function(f){if(n.flag){var d=n.options,p=d.pinchOutside,v=d.container,g=d.preventClickEventOnDrag,m=d.preventClickEventOnDragStart,b=d.preventClickEventByCondition,S=n.isDrag;(g||m||b)&&requestAnimationFrame(function(){n._allowClickEvent()}),!b&&!m&&g&&!S&&n._allowClickEvent(),n._useTouch&&p&&Xt(v,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(f);var x=f!=null&&f.touches?vs(f):[],C=x.length;C===0||!n.options.keepDragging?n.flag=!1:n._addStore(new Ro(x));var y=n._getPosition(),w=On(),_=!S&&n.doubleFlag;n._prevInputEvent=null,n.prevTime=S||_?0:w,n.flag||(n._dettachDragEvent(),n._preventMouseEvent||n.emit("dragEnd",Vt({data:n.data,datas:n.data,isDouble:_,isDrag:S,isClick:!S,isMouseEvent:n._isMouseEvent,isSecondaryButton:n._isSecondaryButton,inputEvent:f,isTrusted:n._isTrusted},y)),n.clientStores=[],n._isMouseEvent||(n._preventMouseEvent=!0,clearTimeout(n._preventMouseEventId),n._preventMouseEventId=setTimeout(function(){n._preventMouseEvent=!1},200)),n._isIdle=!0)}},n.onBlur=function(){n.onDragEnd()},n._allowClickEvent=function(){Xt(n._window,"click",n._onClick,!0)},n._onClick=function(f){n._allowClickEvent(),n._allowMouseEvent();var d=n.options.preventClickEventByCondition;d!=null&&d(f)||(f.stopPropagation(),f.preventDefault())},n._onContextMenu=function(f){var d=n.options;d.preventRightClick?n.onDragEnd(f):f.preventDefault()},n._passCallback=function(){};var s=[].concat(r),a=s[0];n._window=wd(a)?a:Ir(a),n.options=Vt({checkInput:!1,container:a&&!("document"in a)?Ir(a):a,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var o=n.options,l=o.container,u=o.events,c=o.checkWindowBlur;if(n._useDrag=u.indexOf("drag")>-1,n._useTouch=u.indexOf("touch")>-1,n._useMouse=u.indexOf("mouse")>-1,n.targets=s,n._useDrag&&s.forEach(function(f){Qt(f,"dragstart",n.onDragStart)}),n._useMouse&&(s.forEach(function(f){Qt(f,"mousedown",n.onDragStart),Qt(f,"mousemove",n._passCallback)}),Qt(l,"contextmenu",n._onContextMenu)),c&&Qt(Ir(),"blur",n.onBlur),n._useTouch){var h={passive:!1};s.forEach(function(f){Qt(f,"touchstart",n.onDragStart,h),Qt(f,"touchmove",n._passCallback,h)})}return n}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(i,n){return i+n.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(r,i,n,s){s===void 0&&(s=!0),this.flag&&(this.clientStores[0].move(r,i),s&&this.onDrag(n,!0))},t.prototype.move=function(r,i){var n=r[0],s=r[1],a=this.getCurrentStore(),o=a.prevClients;return this.moveClients(o.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+n,clientY:c+s,originalClientX:u,originalClientY:c}}),i,!0)},t.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},t.prototype.setEventData=function(r){var i=this.data;for(var n in r)i[n]=r[n];return this},t.prototype.setEventDatas=function(r){return this.setEventData(r)},t.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),Vt(Vt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var r=this,i=this.targets,n=this.options.container;this.off(),Xt(this._window,"blur",this.onBlur),this._useDrag&&i.forEach(function(s){Xt(s,"dragstart",r.onDragStart)}),this._useMouse&&(i.forEach(function(s){Xt(s,"mousedown",r.onDragStart)}),Xt(n,"contextmenu",this._onContextMenu)),this._useTouch&&(i.forEach(function(s){Xt(s,"touchstart",r.onDragStart)}),Xt(n,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(r){var i=this,n=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>n)){var s=new Ro(vs(r));this.pinchFlag=!0,this._addStore(s);var a=this.emit("pinchStart",Vt(Vt({data:this.data,datas:this.data,angle:s.getAngle(),touches:this.getCurrentStore().getPositions()},s.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));a===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(r,i){if(!(!this.flag||!this.pinchFlag||i.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Vt(Vt({data:this.data,datas:this.data,movement:this.getMovement(i),angle:n.getAngle(i),rotation:n.getRotation(i),touches:n.getPositions(i),scale:n.getScale(i),distance:n.getDistance(i)},n.getPosition(i)),{inputEvent:r,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(r){if(this.pinchFlag){var i=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",Vt(Vt({data:this.data,datas:this.data,isPinch:i,touches:n.getPositions()},n.getPosition()),{inputEvent:r}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(r,i,n){var s=this._getPosition(r,n),a=this.isDrag;(s.deltaX||s.deltaY)&&(this.isDrag=!0);var o=!1;return!a&&this.isDrag&&(o=!0),Vt(Vt({data:this.data,datas:this.data},s),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:i,isTrusted:this._isTrusted,isFirstDrag:o})},t.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},t.prototype._getPosition=function(r,i){var n=this.getCurrentStore(),s=n.getPosition(r,i),a=this.clientStores.slice(1).reduce(function(u,c){var h=c.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},s),o=a.distX,l=a.distY;return Vt(Vt({},s),{distX:o,distY:l})},t.prototype._attchDragEvent=function(){var r=this._window,i=this.options.container,n={passive:!1};this._isDragAPI&&(Qt(i,"dragover",this.onDrag,n),Qt(r,"dragend",this.onDragEnd)),this._useMouse&&(Qt(i,"mousemove",this.onDrag),Qt(r,"mouseup",this.onDragEnd)),this._useTouch&&(Qt(i,"touchmove",this.onDrag,n),Qt(r,"touchend",this.onDragEnd,n),Qt(r,"touchcancel",this.onDragEnd,n))},t.prototype._dettachDragEvent=function(){var r=this._window,i=this.options.container;this._isDragAPI&&(Xt(i,"dragover",this.onDrag),Xt(r,"dragend",this.onDragEnd)),this._useMouse&&(Xt(i,"mousemove",this.onDrag),Xt(r,"mouseup",this.onDragEnd)),this._useTouch&&(Xt(i,"touchstart",this.onDragStart),Xt(i,"touchmove",this.onDrag),Xt(r,"touchend",this.onDragEnd),Xt(r,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t}(to);function w1(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}var _1=w1;function E1(e){return _1(e).toString(36)}function k1(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function M1(e,t,r){return r.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(i,n){var s=n.trim();return(s?Kr(s):[""]).map(function(a){var o=a.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(e))):o?".".concat(e," ").concat(o):".".concat(e)}).join(", ")+" {"})}function P1(e,t,r,i,n){var s=Ui(i),a=s.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",e),a.setAttribute("data-styled-count","1"),r.nonce&&a.setAttribute("nonce",r.nonce),a.innerHTML=M1(e,t,r),(n||s.head||s.body).appendChild(a),a}function D1(e){var t="rCS"+E1(e);return{className:t,inject:function(r,i){i===void 0&&(i={});var n=k1(r),s=(n||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!s)s=P1(t,e,i,r,n);else{var a=parseFloat(s.getAttribute("data-styled-count"))||0;s.setAttribute("data-styled-count","".concat(a+1))}return{destroy:function(){var o,l=parseFloat(s.getAttribute("data-styled-count"))||0;l<=1?(s.remove?s.remove():(o=s.parentNode)===null||o===void 0||o.removeChild(s),s=null):s.setAttribute("data-styled-count","".concat(l-1))}}}}}var ml=function(){return ml=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ml.apply(this,arguments)};function T1(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function Jd(e,t){var r=D1(t),i=r.className;return Py(function(n,s){var a=n.className,o=a===void 0?"":a;n.cspNonce;var l=T1(n,["className","cspNonce"]),u=Wy();return Hy(s,function(){return u.current},[]),Bd(function(){var c=r.inject(u.current,{nonce:n.cspNonce});return function(){c.destroy()}},[]),Ke(e,ml({ref:u,"data-styled-id":i,className:"".concat(o," ").concat(i)},l))})}var yl=function(e,t){return yl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},yl(e,t)};function Zn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");yl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var D=function(){return D=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},D.apply(this,arguments)};function R1(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function A1(e,t,r,i){var n=arguments.length,s=n<3?t:i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(n<3?a(s):n>3?a(t,r,s):a(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s}function O1(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function T(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function Q(e,t,r){if(arguments.length===2)for(var i=0,n=t.length,s;i<n;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}function Qn(e,t){return D({events:[],props:[],name:e},t)}var B1=["n","w","s","e"],ku=["n","w","s","e","nw","ne","sw","se"];function I1(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*e,'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function L1(e){var t=I1(1,e),r=Math.round(e/45)*45%180,i="ns-resize";return r===135?i="nwse-resize":r===45?i="nesw-resize":r===90&&(i="ew-resize"),"cursor:".concat(i,";cursor: url('").concat(t,"') 16 16, ").concat(i,";")}var qi=Uy(),Zd=qi.browser.webkit,Qd=Zd&&function(){var e=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1}(),tp=qi.browser.name,ep=parseInt(qi.browser.version,10),F1=tp==="chrome",z1=qi.browser.chromium,N1=parseInt(qi.browser.chromiumVersion,10)||0,G1=F1&&ep>=109||z1&&N1>=109,W1=tp==="firefox",H1=parseInt(qi.browser.webkitVersion,10)>=612||ep>=15,Mu="moveable-",V1=ku.map(function(e){var t="",r="",i="center",n="center",s="calc(var(--moveable-control-padding, 20) * -1px)";return e.indexOf("n")>-1&&(t="top: ".concat(s,";"),n="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",n="top"),e.indexOf("w")>-1&&(r="left: ".concat(s,";"),i="right"),e.indexOf("e")>-1&&(r="left: 0px;",i="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(r).concat(t,`
        transform-origin: `).concat(i," ").concat(n,`;
    }`)}).join(`
`),j1=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(V1,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
`).concat(L1(e),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Qd?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),$1=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],bl=1e-4,me=1e-7,gs=1e-9,xl=Math.pow(10,10),hh=-xl,X1={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Pu={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},rp={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},ip=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function ts(e,t,r,i,n,s){var a,o;s===void 0&&(s="draggable");var l=(o=(a=t.gestos[s])===null||a===void 0?void 0:a.move(r,e.inputEvent))!==null&&o!==void 0?o:{},u=l.originalDatas||l.datas,c=u[s]||(u[s]={});return D(D({},l),{isPinch:!!i,parentEvent:!0,datas:c,originalDatas:e.originalDatas})}var zi=function(){function e(t){var r;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[t]={},r)}return e.prototype.dragStart=function(t,r){this.isDrag=!1,this.isFlag=!1;var i=r.originalDatas;return this.datas=i,i[this.ableName]||(i[this.ableName]={}),D(D({},this.move(t,r.inputEvent)),{type:"dragstart"})},e.prototype.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},e.prototype.move=function(t,r){var i,n,s=!1;if(!this.isFlag)this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],i=t[0],n=t[1],this.isFlag=!0;else{var a=this.isDrag;i=this.prevX+t[0],n=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!a&&this.isDrag&&(s=!0)}return this.prevX=i,this.prevY=n,{type:"drag",clientX:i,clientY:n,inputEvent:r,isFirstDrag:s,isDrag:this.isDrag,distX:i-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e}();function Pi(e,t,r,i){var n=e.length===16,s=n?4:3,a=ui(e,r,i,s),o=T(a,4),l=T(o[0],2),u=l[0],c=l[1],h=T(o[1],2),f=h[0],d=h[1],p=T(o[2],2),v=p[0],g=p[1],m=T(o[3],2),b=m[0],S=m[1],x=T(Nt(e,t,s),2),C=x[0],y=x[1],w=Math.min(u,f,v,b),_=Math.min(c,d,g,S),E=Math.max(u,f,v,b),M=Math.max(c,d,g,S);u=u-w||0,f=f-w||0,v=v-w||0,b=b-w||0,c=c-_||0,d=d-_||0,g=g-_||0,S=S-_||0,C=C-w||0,y=y-_||0;var O=e[0],A=e[s+1],R=pe(O*A);return{left:w,top:_,right:E,bottom:M,origin:[C,y],pos1:[u,c],pos2:[f,d],pos3:[v,g],pos4:[b,S],direction:R}}function np(e,t){var r=t.clientX,i=t.clientY,n=t.datas,s=e.state,a=s.moveableClientRect,o=s.rootMatrix,l=s.is3d,u=s.pos1,c=a.left,h=a.top,f=l?4:3,d=T(pt(Wi(o,[r-c,i-h],f),u),2),p=d[0],v=d[1],g=T(fr({datas:n,distX:p,distY:v}),2),m=g[0],b=g[1];return[m,b]}function li(e,t){var r=t.datas,i=e.state,n=i.allMatrix,s=i.beforeMatrix,a=i.is3d,o=i.left,l=i.top,u=i.origin,c=i.offsetMatrix,h=i.targetMatrix,f=i.transformOrigin,d=a?4:3;r.is3d=a,r.matrix=n,r.targetMatrix=h,r.beforeMatrix=s,r.offsetMatrix=c,r.transformOrigin=f,r.inverseMatrix=cr(n,d),r.inverseBeforeMatrix=cr(s,d),r.absoluteOrigin=ei(kt([o,l],u),d),r.startDragBeforeDist=ue(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=ue(r.inverseMatrix,r.absoluteOrigin,d)}function U1(e){return Pi(e.datas.beforeTransform,[50,50],100,100).direction}function eo(e,t,r){var i=t.datas,n=t.originalDatas.beforeRenderable,s=i.transformIndex,a=n.nextTransforms,o=a.length,l=n.nextTransformAppendedIndexes,u=-1;s===-1?(r==="translate"?u=0:r==="rotate"&&(u=xr(a,function(d){return d.match(/scale\(/g)})),u===-1&&(u=a.length),i.transformIndex=u):ke(l,function(d){return d.index===s&&d.functionName===r})?u=s:u=s+l.filter(function(d){return d.index<s}).length;var c=bx(a,e.state,u),h=c.targetFunction,f=r==="rotate"?"rotateZ":r;i.beforeFunctionTexts=c.beforeFunctionTexts,i.afterFunctionTexts=c.afterFunctionTexts,i.beforeTransform=c.beforeFunctionMatrix,i.beforeTransform2=c.beforeFunctionMatrix2,i.targetTansform=c.targetFunctionMatrix,i.afterTransform=c.afterFunctionMatrix,i.afterTransform2=c.afterFunctionMatrix2,i.targetAllTransform=c.allFunctionMatrix,h.functionName===f?(i.afterFunctionTexts.splice(0,1),i.isAppendTransform=!1):o>u&&(i.isAppendTransform=!0,n.nextTransformAppendedIndexes=Q(Q([],T(l),!1),[{functionName:r,index:u,isAppend:!0}],!1))}function ro(e,t,r){return"".concat(e.beforeFunctionTexts.join(" ")," ").concat(e.isAppendTransform?r:t," ").concat(e.afterFunctionTexts.join(" "))}function Y1(e){var t=e.datas,r=e.distX,i=e.distY,n=T(ap({datas:t,distX:r,distY:i}),2),s=n[0],a=n[1],o=sp(t,Zy([s,a],4));return ue(o,ei([0,0,0],4),4)}function sp(e,t,r){var i=e.beforeTransform,n=e.afterTransform,s=e.beforeTransform2,a=e.afterTransform2,o=e.targetAllTransform,l=r?Rt(o,t,4):Rt(t,o,4),u=Rt(cr(r?s:i,4),l,4),c=Rt(u,cr(r?a:n,4),4);return c}function ap(e){var t=e.datas,r=e.distX,i=e.distY,n=t.inverseBeforeMatrix,s=t.is3d,a=t.startDragBeforeDist,o=t.absoluteOrigin,l=s?4:3;return pt(ue(n,kt(o,[r,i]),l),a)}function fr(e,t){var r=e.datas,i=e.distX,n=e.distY,s=r.inverseBeforeMatrix,a=r.inverseMatrix,o=r.is3d,l=r.startDragBeforeDist,u=r.startDragDist,c=r.absoluteOrigin,h=o?4:3;return pt(ue(t?s:a,kt(c,[i,n]),h),t?l:u)}function q1(e,t){var r=e.datas,i=e.distX,n=e.distY;r.beforeMatrix;var s=r.matrix,a=r.is3d;r.startDragBeforeDist;var o=r.startDragDist,l=r.absoluteOrigin,u=a?4:3;return pt(ue(s,kt(o,[i,n]),u),l)}function K1(e,t,r,i,n,s){return i===void 0&&(i=t),n===void 0&&(n=r),s===void 0&&(s=[0,0]),e?e.map(function(a,o){var l=Xn(a),u=l.value,c=l.unit,h=o?n:i,f=o?r:t;if(a==="%"||isNaN(u)){var d=h?s[o]/h:0;return f*d}else if(c!=="%")return u;return f*u/100}):s}function op(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function J1(e,t){return op(t).map(function(r){return e[r]})}function Ao(e,t){var r=(t+1)/2;return[ea(e[0][0],e[1][0],r,1-r),ea(e[0][1],e[1][1],r,1-r)]}function Kt(e,t){var r=Ao([e[0],e[1]],t[0]),i=Ao([e[2],e[3]],t[0]);return Ao([r,i],t[1])}function Z1(e,t,r,i,n,s){var a=ui(t,r,i,n),o=Kt(a,s),l=e[0]-o[0],u=e[1]-o[1];return[l,u]}function es(e,t,r,i){return Rt(e,wn(t,i,r),i)}function Q1(e,t,r,i){var n=e.transformOrigin,s=e.offsetMatrix,a=e.is3d,o=a?4:3,l;if(Ee(r)){var u=t.beforeTransform,c=t.afterTransform;i?l=Qe(In(r),4,o):l=Qe(Rt(Rt(u,In([r]),4),c,4),4,o)}else l=r;return es(s,l,n,o)}function tb(e,t){var r=e.transformOrigin,i=e.offsetMatrix,n=e.is3d,s=e.targetMatrix,a=e.targetAllTransform,o=n?4:3;return es(i,Rt(a||s,wu(t,o),o),r,o)}function io(e,t){var r=Ki(t);return{setTransform:function(i,n){n===void 0&&(n=-1),r.startTransforms=$t(i)?i:Fr(i),Sl(e,t,n)},setTransformIndex:function(i){Sl(e,t,i)}}}function no(e,t,r){var i=Ki(t),n=i.startTransforms;Sl(e,t,xr(n,function(s){return s.indexOf("".concat(r,"("))===0}))}function Sl(e,t,r){var i=Ki(t),n=t.datas;if(n.transformIndex=r,r!==-1){var s=i.startTransforms[r];if(s){var a=e.state,o=Fi([s],{"x%":function(l){return l/100*a.offsetWidth},"y%":function(l){return l/100*a.offsetHeight}});n.startValue=o[0].functionValue}}}function Du(e,t){var r=Ki(e);r.nextTransforms=Fr(t)}function Ki(e){return e.originalDatas.beforeRenderable}function sa(e){var t=e.originalDatas.beforeRenderable;return t.nextTransforms}function ms(e){return(sa(e)||[]).join(" ")}function ys(e){return Ki(e).nextStyle}function lp(e,t,r,i,n){Du(n,t);var s=de.drag(e,ts(n,e.state,r,i)),a=s?s.transform:t;return D(D({transform:t,drag:s},ge({transform:a},n)),{afterTransform:a})}function Tu(e,t,r,i,n,s){var a=Q1(e.state,n,t,s),o=ib(e,r,i,a);return o}function up(e,t,r,i,n,s,a){var o=Tu(e,t,r,n,s,a),l=e.state,u=l.left,c=l.top,h=e.props.groupable,f=h?u:0,d=h?c:0,p=pt(i,o);return pt(p,[f,d])}function eb(e,t,r,i,n,s,a){var o=up(e,t,r,i,n,s,a);return o}function rb(e,t,r){return[t?-1+e[0]/(t/2):0,r?-1+e[1]/(r/2):0]}function ib(e,t,r,i){i===void 0&&(i=e.state.allMatrix);var n=e.state,s=n.width,a=n.height,o=n.is3d,l=o?4:3,u=[s/2*(1+t[0])+r[0],a/2*(1+t[1])+r[1]];return Nt(i,u,l)}function nb(e,t,r){var i=r.fixedDirection,n=r.fixedPosition,s=r.fixedOffset;return up(e,"rotate(".concat(t,"deg)"),i,n,s,r)}function sb(e,t,r,i,n,s){var a=e.props.groupable,o=e.state,l=o.transformOrigin,u=o.offsetMatrix,c=o.is3d,h=o.width,f=o.height,d=o.left,p=o.top,v=s.fixedDirection,g=s.nextTargetMatrix||o.targetMatrix,m=c?4:3,b=K1(n,t,r,h,f,l),S=a?d:0,x=a?p:0,C=es(u,g,b,m),y=Z1(i,C,t,r,m,v);return pt(y,[S,x])}function ab(e,t){return Kt(ze(e.state),t)}function ob(e,t){var r=e.targetGesto,i=e.controlGesto,n;return r!=null&&r.isFlag()&&(n=r.getEventData()[t]),!n&&(i!=null&&i.isFlag())&&(n=i.getEventData()[t]),n||{}}function lb(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function ub(e){var t=e("scale"),r=e("rotate"),i=e("translate"),n=[];return i&&i!=="0px"&&i!=="none"&&n.push("translate(".concat(i.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&n.push("rotate(".concat(r,")")),t&&t!=="1"&&t!=="none"&&n.push("scale(".concat(t.split(/\s+/).join(","),")")),n}function cp(e,t,r){for(var i=e,n=[],s=gu(e)||Gr(e),a=!r&&e===t||e===s,o=a,l=!1,u=3,c,h,f,d=!1,p=Fn(t,t,!0).offsetParent,v=1;i&&!o;){o=a;var g=Me(i),m=g("position"),b=Bp(i),S=m==="fixed",x=ub(g),C=Qy(ax(b)),y=void 0,w=!1,_=!1,E=0,M=0,O=0,A=0,R={hasTransform:!1,fixedContainer:null};S&&(d=!0,R=hx(i),p=R.fixedContainer);var L=C.length;!l&&(L===16||x.length)&&(l=!0,u=4,Ml(n),f&&(f=Qe(f,3,4))),l&&L===9&&(C=Qe(C,3,4));var I=cx(i,e),H=I.tagName,W=I.hasOffset,z=I.isSVG,Y=I.origin,K=I.targetOrigin,G=I.offset,tt=T(G,2),st=tt[0],et=tt[1];H==="svg"&&!i.ownerSVGElement&&f&&(n.push({type:"target",target:i,matrix:fx(i,u)}),n.push({type:"offset",target:i,matrix:It(u)}));var nt=parseFloat(g("zoom"))||1;if(S)y=R.fixedContainer,w=!0;else{var Z=Fn(i,t,!1,!0,g),ot=Z.offsetZoom;if(y=Z.offsetParent,w=Z.isEnd,_=Z.isStatic,v*=ot,(Z.isCustomElement||ot!==1)&&_)st-=y.offsetLeft,et-=y.offsetTop;else if(W1||G1){var ct=Z.parentSlotElement;if(ct){for(var gt=y,Ct=0,it=0;gt&&lb(gt);)Ct+=gt.offsetLeft,it+=gt.offsetTop,gt=gt.offsetParent;st-=Ct,et-=it}}}if(Zd&&!H1&&W&&!z&&_&&(m==="relative"||m==="static")&&(st-=y.offsetLeft,et-=y.offsetTop,a=a||w),S)W&&R.hasTransform&&(O=y.clientLeft,A=y.clientTop);else if(W&&p!==y&&(E=y.clientLeft,M=y.clientTop),W&&y===s){var ht=Ip(i,!1);st+=ht[0],et+=ht[1]}if(n.push({type:"target",target:i,matrix:wn(C,u,Y)}),x.length&&(n.push({type:"offset",target:i,matrix:It(u)}),n.push({type:"target",target:i,matrix:wn(In(x),u,Y)})),W){var k=i===e,P=k?0:i.scrollLeft,B=k?0:i.scrollTop;n.push({type:"offset",target:i,matrix:ri([st-P+E-O,et-B+M-A],u)})}else n.push({type:"offset",target:i,origin:Y});if(nt!==1&&n.push({type:"zoom",target:i,matrix:wn(wu([nt,nt],u),u,[0,0])}),f||(f=C),c||(c=Y),h||(h=K),o||S)break;i=y,a=w,(!r||i===s)&&(o=a)}return f||(f=It(u)),c||(c=[0,0]),h||(h=[0,0]),{zoom:v,offsetContainer:p,matrixes:n,targetMatrix:f,transformOrigin:c,targetOrigin:h,is3d:l,hasFixed:d}}var jr=null,$r=null,bi=null;function Ni(e){e?(window.Map&&(jr=new Map,$r=new Map),bi=[]):(jr=null,bi=null,$r=null)}function cb(e){var t=$r==null?void 0:$r.get(e);if(t)return t;var r=_n(e,!0);return $r&&$r.set(e,r),r}function hb(e,t){if(bi){var r=ke(bi,function(n){return n[0][0]==e&&n[0][1]==t});if(r)return r[1]}var i=cp(e,t,!0);return bi&&bi.push([[e,t],i]),i}function Me(e){var t=jr==null?void 0:jr.get(e);if(!t){var r=Ir(e).getComputedStyle(e);if(!jr)return function(s){return r[s]};t={style:r,cached:{}},jr.set(e,t)}var i=t.cached,n=t.style;return function(s){return s in i||(i[s]=n[s]),i[s]}}function Je(e,t,r){var i=r.originalDatas;i.groupable=i.groupable||{};var n=i.groupable;n.childDatas=n.childDatas||[];var s=n.childDatas;return e.moveables.map(function(a,o){return s[o]=s[o]||{},s[o][t]=s[o][t]||{},D(D({},r),{isRequestChild:!0,datas:s[o][t],originalDatas:s[o]})})}function Oo(e,t,r,i,n,s,a){var o=!!r.match(/Start$/g),l=!!r.match(/End$/g),u=n.isPinch,c=n.datas,h=Je(e,t.name,n),f=e.moveables,d=[],p=h.map(function(v,g){var m=f[g],b=m.state,S=b.gestos,x=v;if(o)x=new zi(a).dragStart(i,v),d.push(x);else{if(S[a]||(S[a]=c.childGestos[g]),!S[a])return;x=ts(v,b,i,u,s,a),d.push(x)}var C=t[r](m,D(D({},x),{parentFlag:!0}));return l&&(S[a]=null),C});return o&&(c.childGestos=f.map(function(v){return v.state.gestos[a]})),{eventParams:p,childEvents:d}}function br(e,t,r,i,n,s){n===void 0&&(n=function(c,h){return h});var a=!!r.match(/End$/g),o=Je(e,t.name,i),l=e.moveables,u=o.map(function(c,h){var f=l[h],d=c;d=n(f,c);var p=t[r](f,D(D({},d),{parentFlag:!0}));return p&&s&&s(f,c,p,h),a&&(f.state.gestos={}),p});return u}function aa(e,t,r,i){var n=r.fixedDirection,s=r.fixedPosition,a=i.datas.startPositions||ze(t.state),o=Kt(a,n),l=T(ue(Jn(-e.rotation/180*Math.PI,3),[o[0]-s[0],o[1]-s[1],1],3),2),u=l[0],c=l[1];return i.datas.originalX=u,i.datas.originalY=c,i}function hp(e,t,r,i){var n=e.getState(),s=n.renderPoses,a=n.rotation,o=n.direction,l=ni(e.props,t).zoom,u=Cn(a/Math.PI*180),c={},h=e.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var f=h.renderDirectionMap;r.forEach(function(p){var v=p.dir;c[v]=!0});var d=pe(o);return r.map(function(p){var v=p.data,g=p.classNames,m=p.dir,b=Pu[m];if(!b||!c[m])return null;f[m]=!0;var S=(yt(u,15)+d*rp[m]+720)%180,x={};return Sr(v).forEach(function(C){x["data-".concat(C)]=v[C]}),i.createElement("div",D({className:dt.apply(void 0,Q(["control","direction",m,t],T(g),!1)),"data-rotation":S,"data-direction":m},x,{key:"direction-".concat(m),style:ca.apply(void 0,Q([a,l],T(b.map(function(C){return s[C]})),!1))}))})}function fp(e,t,r,i){var n=ni(e.props,r),s=n.renderDirections,a=s===void 0?t:s,o=n.displayAroundControls;if(!a)return[];var l=a===!0?ku:a;return Q(Q([],T(o?gp(e,i,r,l):[]),!1),T(hp(e,r,l.map(function(u){return{data:{},classNames:[],dir:u}}),i)),!1)}function Ln(e,t,r,i,n,s){for(var a=[],o=6;o<arguments.length;o++)a[o-6]=arguments[o];var l=Wt(r,i),u=t?yt(l/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(s),className:dt.apply(void 0,Q(["line","direction",t?"edge":"",t],T(a),!1)),"data-rotation":u,"data-line-key":s,"data-direction":t,style:sn(r,i,n,l)})}function dp(e,t,r,i,n){var s=r===!0?B1:r;return s.map(function(a,o){var l=T(Pu[a],2),u=l[0],c=l[1];if(c!=null)return Ln(e,a,i[u],i[c],n,"".concat(t,"Edge").concat(o),t)}).filter(Boolean)}function pp(e){return function(t,r){var i=ni(t.props,e).edge;return i&&(i===!0||i.length)?Q(Q([],T(dp(r,e,i,t.getState().renderPoses,t.props.zoom)),!1),T(fb(t,e,r)),!1):vp(t,e,r)}}function vp(e,t,r){return fp(e,ku,t,r)}function fb(e,t,r){return fp(e,["nw","ne","sw","se"],t,r)}function gp(e,t,r,i){var n=e.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var s=e.getState(),a=s.renderPoses,o=s.rotation,l=s.direction,u=n.renderDirectionMap,c=e.props.zoom,h=pe(l),f=o/Math.PI*180;return(i||Sr(u)).map(function(d){var p=Pu[d];if(!p)return null;var v=(yt(f,15)+h*rp[d]+720)%180,g=["around-control"];return r&&g.push("direction",r),t.createElement("div",{className:dt.apply(void 0,Q([],T(g),!1)),"data-rotation":v,"data-direction":d,key:"direction-around-".concat(d),style:ca.apply(void 0,Q([o,c],T(p.map(function(m){return a[m]})),!1))})})}function Ru(e,t,r){var i=e||{},n=i.position,s=n===void 0?"client":n,a=i.left,o=a===void 0?-1/0:a,l=i.top,u=l===void 0?-1/0:l,c=i.right,h=c===void 0?1/0:c,f=i.bottom,d=f===void 0?1/0:f,p={position:s,left:o,top:u,right:h,bottom:d};return{vertical:fh(p,t,!0),horizontal:fh(p,r,!1)}}function so(e,t){var r=e.state,i=r.containerClientRect,n=i.clientHeight,s=i.clientWidth,a=i.clientLeft,o=i.clientTop,l=r.snapOffset,u=l.left,c=l.top,h=l.right,f=l.bottom,d=t||e.props.bounds||{},p=d.position||"client",v=p==="css",g=d.left,m=g===void 0?-1/0:g,b=d.top,S=b===void 0?-1/0:b,x=d.right,C=x===void 0?v?-1/0:1/0:x,y=d.bottom,w=y===void 0?v?-1/0:1/0:y;return v&&(C=s+h-u-C,w=n+f-c-w),{left:m+u-a,right:C+u-a,top:S+c-o,bottom:w+c-o}}function db(e,t,r){var i=so(e),n=i.left,s=i.top,a=i.right,o=i.bottom,l=T(r,2),u=l[0],c=l[1],h=T(pt(r,t),2),f=h[0],d=h[1];U(f)<me&&(f=0),U(d)<me&&(d=0);var p=d>0,v=f>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(f===0&&d===0)return{vertical:g,horizontal:m};if(f===0)p?o<c&&(m.pos=o,m.offset=c-o):s>c&&(m.pos=s,m.offset=c-s);else if(d===0)v?a<u&&(g.pos=a,g.offset=u-a):n>u&&(g.pos=n,g.offset=u-n);else{var b=d/f,S=r[1]-b*u,x=0,C=0,y=!1;v&&a<=u?(x=b*a+S,C=a,y=!0):!v&&u<=n&&(x=b*n+S,C=n,y=!0),y&&(x<s||x>o)&&(y=!1),y||(p&&o<=c?(x=o,C=(x-S)/b,y=!0):!p&&c<=s&&(x=s,C=(x-S)/b,y=!0)),y&&(g.isBound=!0,g.pos=C,g.offset=u-C,m.isBound=!0,m.pos=x,m.offset=c-x)}return{vertical:g,horizontal:m}}function fh(e,t,r){var i=e[r?"left":"top"],n=e[r?"right":"bottom"],s=Math.min.apply(Math,Q([],T(t),!1)),a=Math.max.apply(Math,Q([],T(t),!1)),o=[];return i+1>s&&o.push({direction:"start",isBound:!0,offset:s-i,pos:i}),n-1<a&&o.push({direction:"end",isBound:!0,offset:a-n,pos:n}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(l,u){return U(u.offset)-U(l.offset)})}function dh(e,t,r){var i=r?e.map(function(n){return Kn(n,r)}):e;return i.some(function(n){return n[0]<t.left&&U(n[0]-t.left)>.1||n[0]>t.right&&U(n[0]-t.right)>.1||n[1]<t.top&&U(n[1]-t.top)>.1||n[1]>t.bottom&&U(n[1]-t.bottom)>.1})}function pb(e,t,r){var i=Fe(e),n=Math.sqrt(i*i-t*t)||0;return[n,-n].sort(function(s,a){return U(s-e[r?0:1])-U(a-e[r?0:1])}).map(function(s){return Wt([0,0],r?[s,t]:[t,s])})}function vb(e,t,r,i,n){if(!e.props.bounds)return[];var s=n*Math.PI/180,a=so(e),o=a.left,l=a.top,u=a.right,c=a.bottom,h=o-i[0],f=u-i[0],d=l-i[1],p=c-i[1],v={left:h,top:d,right:f,bottom:p};if(!dh(r,v,0))return[];var g=[];return[[h,0],[f,0],[d,1],[p,1]].forEach(function(m){var b=T(m,2),S=b[0],x=b[1];r.forEach(function(C){var y=Wt([0,0],C);g.push.apply(g,Q([],T(pb(C,S,x).map(function(w){return s+w-y}).filter(function(w){return!dh(t,v,w)}).map(function(w){return yt(w*180/Math.PI,me)})),!1))})}),g}var gb=["left","right","center"],mb=["top","bottom","middle"],ph={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},zr={start:"left",end:"right",center:"center"},Nr={start:"top",end:"bottom",center:"middle"};function xi(){return{left:!1,top:!1,right:!1,bottom:!1}}function Ji(e,t){var r=e.props,i=r.snappable,n=r.bounds,s=r.innerBounds,a=r.verticalGuidelines,o=r.horizontalGuidelines,l=r.snapGridWidth,u=r.snapGridHeight,c=e.state,h=c.guidelines,f=c.enableSnap;return!i||!f||t&&i!==!0&&i.indexOf(t)<0?!1:!!(l||u||n||s||h&&h.length||a&&a.length||o&&o.length)}function Au(e){return e===!1?{}:e===!0||!e?{left:!0,right:!0,top:!0,bottom:!0}:e}function yb(e,t){var r=Au(e),i={};for(var n in r)n in t&&r[n]&&(i[n]=t[n]);return i}function Ou(e,t){var r=yb(e,t),i=mb.filter(function(s){return s in r}),n=gb.filter(function(s){return s in r});return{horizontalNames:i,verticalNames:n,horizontal:i.map(function(s){return r[s]}),vertical:n.map(function(s){return r[s]})}}function bb(e,t,r){var i=Nt(e,[t.clientLeft,t.clientTop],r);return[t.left+i[0],t.top+i[1]]}function xb(e){var t=T(e,2),r=t[0],i=t[1],n=i[0]-r[0],s=i[1]-r[1];Math.abs(n)<jt&&(n=0),Math.abs(s)<jt&&(s=0);var a=0,o=0,l=0;return n?s?(a=-s/n,o=1,l=a*r[0]-r[1]):(o=1,l=-r[1]):(a=-1,l=r[0]),[a,o,l].map(function(u){return yt(u,jt)})}var mp="snapRotationThreshold",yp="snapRotationDegrees",bp="snapHorizontalThreshold",xp="snapVerticalThreshold";function ao(e,t,r,i,n,s,a){var o;i===void 0&&(i=[]),n===void 0&&(n=[]);var l=e.props,u=((o=e.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],c=Dh(a,l[bp],5),h=Dh(s,l[xp],5);return Sp(e.state.guidelines,t,r,i,n,c,h,u)}function Sp(e,t,r,i,n,s,a,o){return{vertical:gh(e,"vertical",t,a*o[0],i),horizontal:gh(e,"horizontal",r,s*o[1],n)}}function Sb(e,t,r){var i=T(r,2),n=i[0],s=i[1],a=T(t,2),o=a[0],l=a[1],u=T(pt(r,t),2),c=u[0],h=u[1],f=h>0,d=c>0;c=ha(c),h=ha(h);var p={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(c===0&&h===0)return{vertical:p,horizontal:v};var g=ao(e,c?[n]:[],h?[s]:[],[],[],void 0,void 0),m=g.vertical,b=g.horizontal;m.posInfos.filter(function(H){var W=H.pos;return d?W>=o:W<=o}),b.posInfos.filter(function(H){var W=H.pos;return f?W>=l:W<=l}),m.isSnap=m.posInfos.length>0,b.isSnap=b.posInfos.length>0;var S=Cl(m),x=S.isSnap,C=S.guideline,y=Cl(b),w=y.isSnap,_=y.guideline,E=w?_.pos[1]:0,M=x?C.pos[0]:0;if(c===0)w&&(v.isSnap=!0,v.pos=_.pos[1],v.offset=s-v.pos);else if(h===0)x&&(p.isSnap=!0,p.pos=M,p.offset=n-M);else{var O=h/c,A=r[1]-O*n,R=0,L=0,I=!1;x?(L=M,R=O*L+A,I=!0):w&&(R=E,L=(R-A)/O,I=!0),I&&(p.isSnap=!0,p.pos=L,p.offset=n-L,v.isSnap=!0,v.pos=R,v.offset=s-R)}return{vertical:p,horizontal:v}}function Rr(e){var t="";return e===-1||e==="top"||e==="left"?t="start":e===0||e==="center"||e==="middle"?t="center":(e===1||e==="right"||e==="bottom")&&(t="end"),t}function vh(e,t,r,i){var n=Ou(e.props.snapDirections,t),s=ao(e,n.vertical,n.horizontal,n.verticalNames.map(function(l){return Rr(l)}),n.horizontalNames.map(function(l){return Rr(l)}),r,i),a=Rr(n.horizontalNames[s.horizontal.index]),o=Rr(n.verticalNames[s.vertical.index]);return{vertical:D(D({},s.vertical),{direction:o}),horizontal:D(D({},s.horizontal),{direction:a})}}function Cl(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=e.posInfos[0],i=r.guidelineInfos[0],n=i.offset,s=i.dist,a=i.guideline;return{isSnap:t,offset:n,dist:s,pos:r.pos,guideline:a}}function gh(e,t,r,i,n){var s,a;if(n===void 0&&(n=[]),!e||!e.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=t==="vertical",l=o?0:1,u=r.map(function(h,f){var d=n[f]||"",p=e.map(function(v){var g=v.pos,m=h-g[l];return{offset:m,dist:U(m),guideline:v,direction:d}}).filter(function(v){var g=v.guideline,m=v.dist,b=g.type;return!(b!==t||m>i)}).sort(function(v,g){return v.dist-g.dist});return{pos:h,index:f,guidelineInfos:p,direction:d}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,f){return h.guidelineInfos[0].dist-f.guidelineInfos[0].dist}),c=u.length>0;return{isSnap:c,index:c?u[0].index:-1,direction:(a=(s=u[0])===null||s===void 0?void 0:s.direction)!==null&&a!==void 0?a:"",posInfos:u}}function Cb(e,t,r,i,n){var s=[];r[0]&&r[1]?s=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(f,d,p){var v=p[d+1]||p[0];s.push(f),s.push([(f[0]+v[0])/2,(f[1]+v[1])/2])}):e.props.keepRatio?s.push([-1,-1],[-1,1],[1,-1],[1,1],r):(s.push.apply(s,Q([],T(J1([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),s.length>1&&s.push([(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]));var a=s.map(function(f){return Kt(t,f)}),o=a.map(function(f){return f[0]}),l=a.map(function(f){return f[1]}),u=ao(e,o,l,s.map(function(f){return Rr(f[0])}),s.map(function(f){return Rr(f[1])}),i,n),c=Rr(s.map(function(f){return f[0]})[u.vertical.index]),h=Rr(s.map(function(f){return f[1]})[u.horizontal.index]);return{vertical:D(D({},u.vertical),{direction:c}),horizontal:D(D({},u.horizontal),{direction:h})}}function Cp(e,t){var r=U(e.offset),i=U(t.offset);return e.isBound&&t.isBound?i-r:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?i-r:e.isSnap?-1:t.isSnap||r<me?1:i<me?-1:r-i}function oa(e,t){return e.slice().sort(function(r,i){var n=r.sign[t],s=i.sign[t],a=r.offset[t],o=i.offset[t];if(n){if(!s)return-1}else return 1;return Cp({isBound:r.isBound,isSnap:r.isSnap,offset:a},{isBound:i.isBound,isSnap:i.isSnap,offset:o})})[0]}function wb(e,t,r){var i=[];if(r)U(t[0])!==1||U(t[1])!==1?i.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):i.push([t,[e[0],-e[1]]],[t,[-e[0],e[1]]]),i.push([t,e]);else if(e[0]&&e[1]||!e[0]&&!e[1]){var n=e[0]?e:[1,1];[1,-1].forEach(function(a){[1,-1].forEach(function(o){var l=[a*n[0],o*n[1]];t[0]===l[0]&&t[1]===l[1]||i.push([t,l])})})}else if(e[0]){var s=U(t[0])===1?[1]:[1,-1];s.forEach(function(a){i.push([[t[0],-1],[a*e[0],-1]],[[t[0],0],[a*e[0],0]],[[t[0],1],[a*e[0],1]])})}else if(e[1]){var s=U(t[1])===1?[1]:[1,-1];s.forEach(function(o){i.push([[-1,t[1]],[-1,o*e[1]]],[[0,t[1]],[0,o*e[1]]],[[1,t[1]],[1,o*e[1]]])})}return i}function wp(e,t){var r=ol([t[0][0],t[1][0]]),i=ol([t[0][1],t[1][1]]);return{vertical:r<=e[0],horizontal:i<=e[1]}}function Bu(e,t){var r=T(t,2),i=r[0],n=r[1],s=n[0]-i[0],a=n[1]-i[1];U(s)<me&&(s=0),U(a)<me&&(a=0);var o,l;if(!s)o=i[0],l=e[0];else if(!a)o=i[1],l=e[1];else{var u=a/s;o=u*(e[0]-i[0])+i[1],l=e[1]}return o-l}function _p(e,t,r,i){return i===void 0&&(i=me),e.every(function(n){var s=Bu(n,t),a=s<=0;return a===r||U(s)<=i})}function mh(e,t,r,i,n){return n===void 0&&(n=0),i&&t-n<=e||!i&&e<=r+n?{isBound:!0,offset:i?t-e:r-e}:{isBound:!1,offset:0}}function _b(e,t){var r=t.line,i=t.centerSign,n=t.verticalSign,s=t.horizontalSign,a=t.lineConstants,o=e.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=o.left,u=o.top,c=o.width,h=o.height,f=[[l,u],[l,u+h]],d=[[l,u],[l+c,u]],p=[[l+c,u],[l+c,u+h]],v=[[l,u+h],[l+c,u+h]];if(_p([[l,u],[l+c,u],[l,u+h],[l+c,u+h]],r,i))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Ar(r,a,d,n),m=Ar(r,a,v,n),b=Ar(r,a,f,s),S=Ar(r,a,p,s),x=g.isBound&&m.isBound,C=g.isBound||m.isBound,y=b.isBound&&S.isBound,w=b.isBound||S.isBound,_=Gi(g.offset,m.offset),E=Gi(b.offset,S.offset),M=[0,0],O=!1,A=!1;return U(E)<U(_)?(M=[_,0],O=C,A=x):(M=[0,E],O=w,A=y),{isAllBound:A,isVerticalBound:C,isHorizontalBound:w,isBound:O,offset:M}}function Ar(e,t,r,i,n,s){var a=T(t,2),o=a[0],l=a[1],u=e[0],c=r[0],h=r[1],f=ha(h[1]-c[1]),d=ha(h[0]-c[0]),p=l,v=o,g=-o/l;if(d){if(!f){if(s&&!p)return{isBound:!1,offset:0};if(v){var x=(c[1]-u[1])/g+u[0];return mh(x,c[0],h[0],i,n)}else{var b=c[1]-u[1],S=U(b)<=(n||0);return{isBound:S,offset:S?b:0}}}}else{if(s&&!v)return{isBound:!1,offset:0};if(p){var m=g*(c[0]-u[0])+u[1];return mh(m,c[1],h[1],i,n)}else{var b=c[0]-u[0],S=U(b)<=(n||0);return{isBound:S,offset:S?b:0}}}return{isBound:!1,offset:0}}function Ep(e,t,r){return t.map(function(i){var n=_b(e,i),s=n.isBound,a=n.offset,o=n.isVerticalBound,l=n.isHorizontalBound,u=i.multiple,c=fr({datas:r,distX:a[0],distY:a[1]}).map(function(h,f){return h*(u[f]?2/u[f]:0)});return{sign:u,isBound:s,isVerticalBound:o,isHorizontalBound:l,isSnap:!1,offset:c}})}function Eb(e,t,r){var i,n=Iu(e,t,[0,0],!1).map(function(f){return D(D({},f),{multiple:f.multiple.map(function(d){return U(d)*2})})}),s=Ep(e,n,r),a=oa(s,0),o=oa(s,1),l=0,u=0,c=a.isVerticalBound||o.isVerticalBound,h=a.isHorizontalBound||o.isHorizontalBound;return(c||h)&&(i=T(q1({datas:r,distX:-a.offset[0],distY:-o.offset[1]}),2),l=i[0],u=i[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:h,offset:u}}}function kb(e,t){var r=[],i=e[0],n=e[1];return i&&n?r.push([[0,n*2],e,[-i,n]],[[i*2,0],e,[i,-n]]):i?(r.push([[i*2,0],[i,1],[i,-1]]),t&&r.push([[0,-1],[i,-1],[-i,-1]],[[0,1],[i,1],[-i,1]])):n?(r.push([[0,n*2],[1,n],[-1,n]]),t&&r.push([[-1,0],[-1,n],[-1,-n]],[[1,0],[1,n],[1,-n]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function Iu(e,t,r,i){var n=e.state,s=n.allMatrix,a=n.is3d,o=ui(s,100,100,a?4:3),l=Kt(o,[0,0]);return kb(r,i).map(function(u){var c=T(u,3),h=c[0],f=c[1],d=c[2],p=[Kt(o,f),Kt(o,d)],v=xb(p),g=wp(l,p),m=g.vertical,b=g.horizontal,S=Bu(l,p)<=0;return{multiple:h,centerSign:S,verticalSign:m,horizontalSign:b,lineConstants:v,line:[Kt(t,f),Kt(t,d)]}})}function yh(e,t,r,i){var n=i?e.map(function(s){return Kn(s,i)}):e;return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].some(function(s){var a=Bu(r,s)<=0;return!_p(t,s,a)})}function Mb(e){var t=T(e,2),r=t[0],i=t[1],n=i[0]-r[0],s=i[1]-r[1];if(!n)return U(r[0]);if(!s)return U(r[1]);var a=s/n;return U((-a*r[0]+r[1])/Math.sqrt(Math.pow(a,2)+1))}function Pb(e){var t=T(e,2),r=t[0],i=t[1],n=i[0]-r[0],s=i[1]-r[1];if(!n)return[r[0],0];if(!s)return[0,r[1]];var a=s/n,o=-a*r[0]+r[1];return[-o/(a+1/a),o/(a*a+1)]}function Db(e,t,r,i,n){var s=e.props.innerBounds,a=n*Math.PI/180;if(!s)return[];var o=s.left,l=s.top,u=s.width,c=s.height,h=o-i[0],f=o+u-i[0],d=l-i[1],p=l+c-i[1],v=[[h,d],[f,d],[h,p],[f,p]],g=Kt(r,[0,0]);if(!yh(r,v,g,0))return[];var m=[],b=v.map(function(S){return[Fe(S),Wt([0,0],S)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(S){var x=Wt([0,0],Pb(S)),C=Mb(S);m.push.apply(m,Q([],T(b.filter(function(y){var w=T(y,1),_=w[0];return _&&C<=_}).map(function(y){var w=T(y,2),_=w[0],E=w[1],M=Math.acos(_?C/_:0),O=E+M,A=E-M;return[a+O-x,a+A-x]}).reduce(function(y,w){return y.push.apply(y,Q([],T(w),!1)),y},[]).filter(function(y){return!yh(t,v,g,y)}).map(function(y){return yt(y*180/Math.PI,me)})),!1))}),m}function Tb(e){var t=e.props.innerBounds,r=xi();if(!t)return{boundMap:r,vertical:[],horizontal:[]};var i=e.getRect(),n=i.pos1,s=i.pos2,a=i.pos3,o=i.pos4,l=[n,s,a,o],u=Kt(l,[0,0]),c=t.left,h=t.top,f=t.width,d=t.height,p=[[c,h],[c,h+d]],v=[[c,h],[c+f,h]],g=[[c+f,h],[c+f,h+d]],m=[[c,h+d],[c+f,h+d]],b=Iu(e,l,[0,0],!1),S=[],x=[];return b.forEach(function(C){var y=C.line,w=C.lineConstants,_=wp(u,y),E=_.horizontal,M=_.vertical,O=Ar(y,w,v,M,1,!0),A=Ar(y,w,m,M,1,!0),R=Ar(y,w,p,E,1,!0),L=Ar(y,w,g,E,1,!0);O.isBound&&!r.top&&(S.push(h),r.top=!0),A.isBound&&!r.bottom&&(S.push(h+d),r.bottom=!0),R.isBound&&!r.left&&(x.push(c),r.left=!0),L.isBound&&!r.right&&(x.push(c+f),r.right=!0)}),{boundMap:r,horizontal:S,vertical:x}}function Rb(e,t,r,i){var n=t[0]-e[0],s=t[1]-e[1];if(U(n)<jt&&(n=0),U(s)<jt&&(s=0),!n)return i?[0,0]:[0,r];if(!s)return i?[r,0]:[0,0];var a=s/n,o=e[1]-a*e[0];if(i){var l=a*(t[0]+r)+o;return[r,l-t[1]]}else{var u=(t[1]+r-o)/a;return[u-t[0],r]}}function wl(e,t,r,i,n){var s=Rb(e,t,r,i);if(!s)return{isOutside:!1,offset:[0,0]};var a=yr(e,t),o=yr(s,e),l=yr(s,t),u=o>a||l>a,c=T(fr({datas:n,distX:s[0],distY:s[1]}),2),h=c[0],f=c[1];return{offset:[h,f],isOutside:u}}function la(e,t){return e.isBound?e.offset:t.isSnap?Cl(t).offset:0}function Ab(e,t,r,i,n){var s=T(t,2),a=s[0],o=s[1],l=T(r,2),u=l[0],c=l[1],h=T(i,2),f=h[0],d=h[1],p=T(n,2),v=p[0],g=p[1],m=-v,b=-g;if(e&&a&&o){m=0,b=0;var S=[];if(u&&c?S.push([0,g],[v,0]):u?S.push([v,0]):c?S.push([0,g]):f&&d?S.push([0,g],[v,0]):f?S.push([v,0]):d&&S.push([0,g]),S.length){S.sort(function(w,_){return Fe(pt([a,o],w))-Fe(pt([a,o],_))});var x=S[0];if(x[0]&&U(a)>jt)m=-x[0],b=o*U(a+m)/U(a)-o;else if(x[1]&&U(o)>jt){var C=o;b=-x[1],m=a*U(o+b)/U(C)-a}if(e&&c&&u)if(U(m)>jt&&U(m)<U(v)){var y=U(v)/U(m);m*=y,b*=y}else if(U(b)>jt&&U(b)<U(g)){var y=U(g)/U(b);m*=y,b*=y}else m=Gi(-v,m),b=Gi(-g,b)}}else m=a||u?-v:0,b=o||c?-g:0;return[m,b]}function Ob(e,t,r,i,n,s){if(!Ji(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=zu(s.absolutePoses,[t,r]),o=Le(a),l=o.left,u=o.right,c=o.top,h=o.bottom,f={horizontal:a.map(function(L){return L[1]}),vertical:a.map(function(L){return L[0]})},d=Au(e.props.snapDirections),p=Ou(d,{left:l,right:u,top:c,bottom:h,center:(l+u)/2,middle:(c+h)/2}),v=oo(e,n,p,f),g=v.vertical,m=v.horizontal,b=Eb(e,a,s),S=b.vertical,x=b.horizontal,C=g.isSnap,y=m.isSnap,w=g.isBound||S.isBound,_=m.isBound||x.isBound,E=Gi(g.offset,S.offset),M=Gi(m.offset,x.offset),O=T(Ab(i,[t,r],[w,_],[C,y],[E,M]),2),A=O[0],R=O[1];return[{isBound:w,isSnap:C,offset:A},{isBound:_,isSnap:y,offset:R}]}function oo(e,t,r,i){i===void 0&&(i=r);var n=Ru(so(e),i.vertical,i.horizontal),s=n.horizontal,a=n.vertical,o=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ao(e,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),l=o.horizontal,u=o.vertical,c=la(s[0],l),h=la(a[0],u),f=U(c),d=U(h);return{horizontal:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:f,bounds:s,snap:l},vertical:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:d,bounds:a,snap:u}}}function bh(e,t,r,i,n,s,a){a===void 0&&(a=[1,1]);var o=Ru(t,r,i),l=o.horizontal,u=o.vertical,c=Sp(e,r,i,[],[],n,s,a),h=c.horizontal,f=c.vertical,d=la(l[0],h),p=la(u[0],f),v=U(d),g=U(p);return{horizontal:{isBound:l[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:d,dist:v,bounds:l,snap:h},vertical:{isBound:u[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:p,dist:g,bounds:u,snap:f}}}function Bb(e,t,r,i){var n=Wt(e,t)/Math.PI*180,s=r.vertical,a=s.isBound,o=s.isSnap,l=s.dist,u=r.horizontal,c=u.isBound,h=u.isSnap,f=u.dist,d=n%180,p=d<3||d>177,v=d>87&&d<93;return f<l&&(a||o&&!v&&(!i||!p))?"vertical":c||h&&!p&&(!i||!v)?"horizontal":""}function Ib(e,t,r,i,n,s){return r.map(function(a){var o=T(a,2),l=o[0],u=o[1],c=Kt(t,l),h=Kt(t,u),f=i?Lb(e,c,h,n):oo(e,n,{vertical:[h[0]],horizontal:[h[1]]}),d=f.horizontal,p=d.offset,v=d.isBound,g=d.isSnap,m=f.vertical,b=m.offset,S=m.isBound,x=m.isSnap,C=pt(u,l);if(!b&&!p)return{isBound:S||v,isSnap:x||g,sign:C,offset:[0,0]};var y=Bb(c,h,f,i);if(!y)return{sign:C,isBound:!1,isSnap:!1,offset:[0,0]};var w=y==="vertical",_=[0,0];return!i&&U(u[0])===1&&U(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?_=fr({datas:s,distX:-b,distY:-p}):_=wl(c,h,-(w?b:p),w,s).offset,_=_.map(function(E,M){return E*(C[M]?2/C[M]:0)}),{sign:C,isBound:w?S:v,isSnap:w?x:g,offset:_}})}function xh(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function Lb(e,t,r,i){var n=db(e,t,r),s=n.horizontal,a=n.vertical,o=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Sb(e,t,r),l=o.horizontal,u=o.vertical,c=xh(s,l),h=xh(a,u),f=U(c),d=U(h);return{horizontal:{isBound:s.isBound,isSnap:l.isSnap,offset:c,dist:f},vertical:{isBound:a.isBound,isSnap:u.isSnap,offset:h,dist:d}}}function Fb(e,t,r,i,n){var s=[-r[0],-r[1]],a=e.state,o=a.width,l=a.height,u=e.props.bounds,c=1/0,h=1/0;if(u){var f=[[r[0],-r[1]],[-r[0],r[1]]],d=u.left,p=d===void 0?-1/0:d,v=u.top,g=v===void 0?-1/0:v,m=u.right,b=m===void 0?1/0:m,S=u.bottom,x=S===void 0?1/0:S;f.forEach(function(C){var y=C[0]!==s[0],w=C[1]!==s[1],_=Kt(t,C),E=Wt(i,_)*360/Math.PI;if(w){var M=_.slice();(U(E-360)<2||U(E-180)<2)&&(M[1]=i[1]);var O=wl(i,M,(i[1]<_[1]?x:g)-_[1],!1,n),A=T(O.offset,2),R=A[1],L=O.isOutside;isNaN(R)||(h=l+(L?1:-1)*U(R))}if(y){var M=_.slice();(U(E-90)<2||U(E-270)<2)&&(M[0]=i[0]);var I=wl(i,M,(i[0]<_[0]?b:p)-_[0],!0,n),H=T(I.offset,1),W=H[0],z=I.isOutside;isNaN(W)||(c=o+(z?1:-1)*U(W))}})}return{maxWidth:c,maxHeight:h}}var de={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var r=e.props,i=r.hideThrottleDragRotateLine,n=r.throttleDragRotate,s=r.zoom,a=e.getState(),o=a.dragInfo,l=a.beforeOrigin;if(i||!n||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var c=Fe(u),h=Wt(u,[0,0]);return[t.createElement("div",{className:dt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(h,"rad) scaleY(").concat(s,")")}})]},dragStart:function(e,t){var r=t.datas,i=t.parentEvent,n=t.parentGesto,s=e.state,a=s.gestos,o=s.style;if(a.draggable)return!1;a.draggable=n||e.targetGesto,r.datas={},r.left=parseFloat(o.left||"")||0,r.top=parseFloat(o.top||"")||0,r.bottom=parseFloat(o.bottom||"")||0,r.right=parseFloat(o.right||"")||0,r.startValue=[0,0],li(e,t),no(e,t,"translate"),rx(e,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=xt(e,t,D({set:function(c){r.startValue=c}},io(e,t))),u=i||ut(e,"onDragStart",l);return u!==!1?(r.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(a.draggable=null,r.isPinch=!1),r.isDrag?l:!1},drag:function(e,t){if(t){eo(e,t,"translate");var r=t.datas,i=t.parentEvent,n=t.parentFlag,s=t.isPinch,a=t.deltaOffset,o=t.useSnap,l=t.isRequest,u=t.isGroup,c=t.parentThrottleDrag,h=t.distX,f=t.distY,d=r.isDrag,p=r.prevDist,v=r.prevBeforeDist,g=r.startValue;if(d){a&&(h+=a[0],f+=a[1]);var m=e.props,b=m.parentMoveable,S=u?0:m.throttleDrag||c||0,x=i?0:m.throttleDragRotate||0,C=0,y=!1,w=!1,_=!1,E=!1;if(!i&&x>0&&(h||f)){var M=m.startDragRotate||0,O=yt(M+Wt([0,0],[h,f])*180/Math.PI,x)-M,A=f*Math.abs(Math.cos((O-90)/180*Math.PI)),R=h*Math.abs(Math.cos(O/180*Math.PI)),L=Fe([R,A]);C=O*Math.PI/180,h=L*Math.cos(C),f=L*Math.sin(C)}if(!s&&!i&&!n){var I=T(Ob(e,h,f,x,!o&&l||a,r),2),H=I[0],W=I[1];y=H.isSnap,w=H.isBound,_=W.isSnap,E=W.isBound;var z=H.offset,Y=W.offset;h+=z,f+=Y}var K=kt(ap({datas:r,distX:h,distY:f}),g),G=kt(Y1({datas:r,distX:h,distY:f}),g);Qc(G,me),Qc(K,me),x||(!y&&!w&&(G[0]=yt(G[0],S),K[0]=yt(K[0],S)),!_&&!E&&(G[1]=yt(G[1],S),K[1]=yt(K[1],S)));var tt=pt(K,g),st=pt(G,g),et=pt(st,p),nt=pt(tt,v);r.prevDist=st,r.prevBeforeDist=tt,r.passDelta=et,r.passDist=st;var Z=r.left+tt[0],ot=r.top+tt[1],ct=r.right-tt[0],gt=r.bottom-tt[1],Ct=ro(r,"translate(".concat(G[0],"px, ").concat(G[1],"px)"),"translate(".concat(st[0],"px, ").concat(st[1],"px)"));if(Du(t,Ct),e.state.dragInfo.dist=i?[0,0]:st,!(!i&&!b&&et.every(function(B){return!B})&&nt.some(function(B){return!B}))){var it=e.state,ht=it.width,k=it.height,P=xt(e,t,D({transform:Ct,dist:st,delta:et,translate:G,beforeDist:tt,beforeDelta:nt,beforeTranslate:K,left:Z,top:ot,right:ct,bottom:gt,width:ht,height:k,isPinch:s},ge({transform:Ct},t)));return!i&&ut(e,"onDrag",P),P}}}},dragAfter:function(e,t){var r=t.datas,i=r.deltaOffset;return i[0]||i[1]?(r.deltaOffset=[0,0],this.drag(e,D(D({},t),{deltaOffset:i}))):!1},dragEnd:function(e,t){var r=t.parentEvent,i=t.datas;if(e.state.dragInfo=null,!!i.isDrag){i.isDrag=!1;var n=Ae(e,t,{});return!r&&ut(e,"onDragEnd",n),n}},dragGroupStart:function(e,t){var r,i,n=t.datas,s=t.clientX,a=t.clientY,o=this.dragStart(e,t);if(!o)return!1;var l=Oo(e,this,"dragStart",[s||0,a||0],t,!1,"draggable"),u=l.childEvents,c=l.eventParams,h=D(D({},o),{targets:e.props.targets,events:c}),f=ut(e,"onDragGroupStart",h);n.isDrag=f!==!1;var d=(i=(r=u[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&i!==void 0?i:[0,0];return n.throttleOffset=[d[0]%1,d[1]%1],n.isDrag?o:!1},dragGroup:function(e,t){var r=t.datas;if(r.isDrag){var i=this.drag(e,D(D({},t),{parentThrottleDrag:e.props.throttleDrag})),n=t.datas.passDelta,s=Oo(e,this,"drag",n,t,!1,"draggable").eventParams;if(i){var a=D({targets:e.props.targets,events:s},i);return ut(e,"onDragGroup",a),a}}},dragGroupEnd:function(e,t){var r=t.isDrag,i=t.datas;if(i.isDrag){this.dragEnd(e,t);var n=Oo(e,this,"dragEnd",[0,0],t,!1,"draggable").eventParams;return ut(e,"onDragGroupEnd",Ae(e,t,{targets:e.props.targets,events:n})),r}},request:function(e){var t={},r=e.getRect(),i=0,n=0,s=!1;return{isControl:!1,requestStart:function(a){return s=a.useSnap,{datas:t,useSnap:s}},request:function(a){return"x"in a?i=a.x-r.left:"deltaX"in a&&(i+=a.deltaX),"y"in a?n=a.y-r.top:"deltaY"in a&&(n+=a.deltaY),{datas:t,distX:i,distY:n,useSnap:s}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:s}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}};function kp(e,t){var r=Kt(e,t),i=[0,0];return{fixedPosition:r,fixedDirection:t,fixedOffset:i}}function zb(e,t){var r=e.allMatrix,i=e.is3d,n=e.width,s=e.height,a=i?4:3,o=[n/2*(1+t[0]),s/2*(1+t[1])],l=Nt(r,o,a),u=[0,0];return{fixedPosition:l,fixedDirection:t,fixedOffset:u}}function Mp(e,t){var r=e.allMatrix,i=e.is3d,n=e.width,s=e.height,a=i?4:3,o=rb(t,n,s),l=Nt(r,t,a),u=[n?0:t[0],s?0:t[1]];return{fixedPosition:l,fixedDirection:o,fixedOffset:u}}var Sh=Wu("resizable"),_l={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:pp("resizable"),dragControlCondition:Sh,viewClassName:Gu("resizable"),dragControlStart:function(e,t){var r,i=t.inputEvent,n=t.isPinch,s=t.isGroup,a=t.parentDirection,o=t.parentGesto,l=t.datas,u=t.parentFixedDirection,c=t.parentEvent,h=Gp(a,n,i,l),f=e.state,d=f.target,p=f.width,v=f.height,g=f.gestos;if(!h||!d||g.resizable)return!1;g.resizable=o||e.controlGesto,!n&&li(e,t),l.datas={},l.direction=h,l.startOffsetWidth=p,l.startOffsetHeight=v,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.inlineCSSWidth||f.cssWidth,l.startHeight=f.inlineCSSHeight||f.cssHeight,l.maxSize=[1/0,1/0],s||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var m=e.props.transformOrigin||"% %";l.transformOrigin=m&&Ee(m)?m.split(" "):m,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=(r=t==null?void 0:t.parentIsWidth)!==null&&r!==void 0?r:!h[0]&&!h[1]||h[0]||!h[1];function b(E){l.ratio=E&&isFinite(E)?E:0}l.startPositions=ze(e.state);function S(E){var M=kp(l.startPositions,E);l.fixedDirection=M.fixedDirection,l.fixedPosition=M.fixedPosition,l.fixedOffset=M.fixedOffset}function x(E){var M=Mp(e.state,E);l.fixedDirection=M.fixedDirection,l.fixedPosition=M.fixedPosition,l.fixedOffset=M.fixedOffset}function C(E){l.minSize=[Tt("".concat(E[0]),0)||0,Tt("".concat(E[1]),0)||0]}function y(E){var M=[E[0]||1/0,E[1]||1/0];(!Li(M[0])||isFinite(M[0]))&&(M[0]=Tt("".concat(M[0]),0)||1/0),(!Li(M[1])||isFinite(M[1]))&&(M[1]=Tt("".concat(M[1]),0)||1/0),l.maxSize=M}b(p/v),S(u||[-h[0],-h[1]]),l.setFixedDirection=S,l.setFixedPosition=x,l.setMin=C,l.setMax=y;var w=xt(e,t,{direction:h,startRatio:l.ratio,set:function(E){var M=T(E,2),O=M[0],A=M[1];l.startWidth=O,l.startHeight=A},setMin:C,setMax:y,setRatio:b,setFixedDirection:S,setFixedPosition:x,setOrigin:function(E){l.transformOrigin=E},dragStart:de.dragStart(e,new zi().dragStart([0,0],t))}),_=c||ut(e,"onResizeStart",w);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,_!==!1&&(l.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:h}),l.isResize?w:!1},dragControl:function(e,t){var r,i=t.datas,n=t.parentFlag,s=t.isPinch,a=t.parentKeepRatio,o=t.dragClient,l=t.parentDist,u=t.useSnap,c=t.isRequest,h=t.isGroup,f=t.parentEvent,d=t.resolveMatrix,p=i.isResize,v=i.transformOrigin,g=i.startWidth,m=i.startHeight,b=i.prevWidth,S=i.prevHeight,x=i.minSize,C=i.maxSize,y=i.ratio,w=i.startOffsetWidth,_=i.startOffsetHeight,E=i.isWidth;if(!p)return;if(d){var M=e.state.is3d,O=i.startOffsetMatrix,A=i.startTransformOrigin,R=M?4:3,L=In(sa(t)),I=Math.sqrt(L.length);R!==I&&(L=Qe(L,I,R));var H=es(O,L,A,R),W=ui(H,w,_,R);i.startPositions=W,i.nextTargetMatrix=L,i.nextAllMatrix=H}var z=ni(e.props,"resizable"),Y=z.resizeFormat,K=z.throttleResize,G=K===void 0?n?0:1:K,tt=z.parentMoveable,st=z.keepRatioFinally,et=i.direction,nt=et,Z=0,ot=0;!et[0]&&!et[1]&&(nt=[1,1]);var ct=y&&(a??z.keepRatio)||!1;function gt(){var lt=i.fixedDirection,at=Xp(nt,ct,i,t);Z=at.distWidth,ot=at.distHeight;var vt=nt[0]-lt[0]||ct?Math.max(w+Z,me):w,mt=nt[1]-lt[1]||ct?Math.max(_+ot,me):_;return ct&&w&&_&&(E?mt=vt/y:vt=mt*y),[vt,mt]}var Ct=T(gt(),2),it=Ct[0],ht=Ct[1];f||(i.setFixedDirection(i.fixedDirection),ut(e,"onBeforeResize",xt(e,t,{startFixedDirection:i.startFixedDirection,startFixedPosition:i.startFixedPosition,setFixedDirection:function(lt){var at;return i.setFixedDirection(lt),at=T(gt(),2),it=at[0],ht=at[1],[it,ht]},setFixedPosition:function(lt){var at;return i.setFixedPosition(lt),at=T(gt(),2),it=at[0],ht=at[1],[it,ht]},boundingWidth:it,boundingHeight:ht,setSize:function(lt){var at;at=T(lt,2),it=at[0],ht=at[1]}},!0)));var k=o;o||(!n&&s?k=ab(e,[0,0]):k=i.fixedPosition);var P=[0,0];s||(P=tx(e,it,ht,et,k,!u&&c,i)),l&&(!l[0]&&(P[0]=0),!l[1]&&(P[1]=0));function B(){var lt;Y&&(lt=T(Y([it,ht]),2),it=lt[0],ht=lt[1]),it=yt(it,G),ht=yt(ht,G)}if(ct){nt[0]&&nt[1]&&P[0]&&P[1]&&(U(P[0])>U(P[1])?P[1]=0:P[0]=0);var F=!P[0]&&!P[1];F&&B(),nt[0]&&!nt[1]||P[0]&&!P[1]||F&&E?(it+=P[0],ht=it/y):(!nt[0]&&nt[1]||!P[0]&&P[1]||F&&!E)&&(ht+=P[1],it=ht*y)}else it+=P[0],ht+=P[1],it=Math.max(0,it),ht=Math.max(0,ht);r=T(yd([it,ht],x,C,ct?y:!1),2),it=r[0],ht=r[1],B(),ct&&(h||st)&&(E?ht=it/y:it=ht*y),Z=it-w,ot=ht-_;var N=[Z-b,ot-S];i.prevWidth=Z,i.prevHeight=ot;var $=sb(e,it,ht,k,v,i);if(!(!tt&&N.every(function(lt){return!lt})&&$.every(function(lt){return!lt}))){var j=de.drag(e,ts(t,e.state,$,!!s,!1,"draggable")),V=j.transform,q=g+Z,X=m+ot,rt=xt(e,t,D({width:q,height:X,offsetWidth:Math.round(it),offsetHeight:Math.round(ht),startRatio:y,boundingWidth:it,boundingHeight:ht,direction:et,dist:[Z,ot],delta:N,isPinch:!!s,drag:j},Hp({style:{width:"".concat(q,"px"),height:"".concat(X,"px")},transform:V},j,t)));return!f&&ut(e,"onResize",rt),rt}},dragControlAfter:function(e,t){var r=t.datas,i=r.isResize,n=r.startOffsetWidth,s=r.startOffsetHeight,a=r.prevWidth,o=r.prevHeight;if(!(!i||e.props.checkResizableError===!1)){var l=e.state,u=l.width,c=l.height,h=u-(n+a),f=c-(s+o),d=U(h)>3,p=U(f)>3;if(d&&(r.startWidth+=h,r.startOffsetWidth+=h,r.prevWidth+=h),p&&(r.startHeight+=f,r.startOffsetHeight+=f,r.prevHeight+=f),d||p)return this.dragControl(e,t)}},dragControlEnd:function(e,t){var r=t.datas,i=t.parentEvent;if(r.isResize){r.isResize=!1;var n=Ae(e,t,{});return!i&&ut(e,"onResizeEnd",n),n}},dragGroupControlCondition:Sh,dragGroupControlStart:function(e,t){var r=t.datas,i=this.dragControlStart(e,D(D({},t),{isGroup:!0}));if(!i)return!1;var n=Je(e,"resizable",t),s=r.startOffsetWidth,a=r.startOffsetHeight;function o(){var d=r.minSize;n.forEach(function(p){var v=p.datas,g=v.minSize,m=v.startOffsetWidth,b=v.startOffsetHeight,S=s*(m?g[0]/m:0),x=a*(b?g[1]/b:0);d[0]=Math.max(d[0],S),d[1]=Math.max(d[1],x)})}function l(){var d=r.maxSize;n.forEach(function(p){var v=p.datas,g=v.maxSize,m=v.startOffsetWidth,b=v.startOffsetHeight,S=s*(m?g[0]/m:0),x=a*(b?g[1]/b:0);d[0]=Math.min(d[0],S),d[1]=Math.min(d[1],x)})}var u=br(e,this,"dragControlStart",t,function(d,p){return aa(e,d,r,p)});o(),l();var c=function(d){i.setFixedDirection(d),u.forEach(function(p,v){p.setFixedDirection(d),aa(e,p.moveable,r,n[v])})};r.setFixedDirection=c;var h=D(D({},i),{targets:e.props.targets,events:u.map(function(d){return D(D({},d),{setMin:function(p){d.setMin(p),o()},setMax:function(p){d.setMax(p),l()}})}),setFixedDirection:c,setMin:function(d){i.setMin(d),o()},setMax:function(d){i.setMax(d),l()}}),f=ut(e,"onResizeGroupStart",h);return r.isResize=f!==!1,r.isResize?i:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isResize){var i=ni(e.props,"resizable");uo(e,"onBeforeResize",function(d){ut(e,"onBeforeResizeGroup",xt(e,t,D(D({},d),{targets:i.targets}),!0))});var n=this.dragControl(e,D(D({},t),{isGroup:!0}));if(n){var s=n.boundingWidth,a=n.boundingHeight,o=n.dist,l=i.keepRatio,u=[s/(s-o[0]),a/(a-o[1])],c=r.fixedPosition,h=br(e,this,"dragControl",t,function(d,p){var v=T(ue(Jn(e.rotation/180*Math.PI,3),[p.datas.originalX*u[0],p.datas.originalY*u[1],1],3),2),g=v[0],m=v[1];return D(D({},p),{parentDist:null,parentScale:u,dragClient:kt(c,[g,m]),parentKeepRatio:l})}),f=D({targets:i.targets,events:h},n);return ut(e,"onResizeGroup",f),f}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,i=t.datas;if(i.isResize){this.dragControlEnd(e,t);var n=br(e,this,"dragControlEnd",t),s=Ae(e,t,{targets:e.props.targets,events:n});return ut(e,"onResizeGroupEnd",s),r}},request:function(e){var t={},r=0,i=0,n=!1,s=e.getRect();return{isControl:!0,requestStart:function(a){var o;return n=a.useSnap,{datas:t,parentDirection:a.direction||[1,1],parentIsWidth:(o=a==null?void 0:a.horizontal)!==null&&o!==void 0?o:!0,useSnap:n}},request:function(a){return"offsetWidth"in a?r=a.offsetWidth-s.offsetWidth:"deltaWidth"in a&&(r+=a.deltaWidth),"offsetHeight"in a?i=a.offsetHeight-s.offsetHeight:"deltaHeight"in a&&(i+=a.deltaHeight),{datas:t,parentDist:[r,i],parentKeepRatio:a.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}},unset:function(e){e.state.gestos.resizable=null}};function Bo(e,t,r,i,n){var s=e.props.groupable,a=e.state,o=a.is3d?4:3,l=t.origin,u=Nt(e.state.rootMatrix,pt([l[0],l[1]],s?[0,0]:[a.left,a.top]),o),c=kt([n.left,n.top],u);t.startAbsoluteOrigin=c,t.prevDeg=Wt(c,[r,i])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=yr(c,[r,i])}function Is(e,t,r){var i=r.defaultDeg,n=r.prevDeg,s=n%360,a=Math.floor(n/360);s<0&&(s+=360),s>e&&s>270&&e<90?++a:s<e&&s<90&&e>270&&--a;var o=t*(a*360+e-i);return r.prevDeg=i+o,o}function Io(e,t,r,i){return Is(Wt(i.startAbsoluteOrigin,[e,t])/Math.PI*180,r,i)}function Lo(e,t,r,i,n,s){var a=e.props.throttleRotate,o=a===void 0?0:a,l=r.prevSnapDeg,u=0,c=!1;if(s){var h=Qb(e,t,i,n+i);c=h.isSnap,u=n+h.dist}c||(u=yt(n+i,o));var f=u-n;return r.prevSnapDeg=f,[f-l,f,u]}function Pp(e,t,r){var i=T(t,4),n=i[0],s=i[1],a=i[2],o=i[3];if(e==="none")return[];if($t(e))return e.map(function(g){return Pp(g,[n,s,a,o],r)[0]});var l=T((e||"top").split("-"),2),u=l[0],c=l[1],h=[n,s];u==="left"?h=[a,n]:u==="right"?h=[s,o]:u==="bottom"&&(h=[o,a]);var f=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],d=zp(h,r);if(c){var p=c==="top"||c==="left",v=u==="bottom"||u==="left";f=h[p&&!v||!p&&v?0:1]}return[[f,d]]}function El(e,t){if(t.isRequest)return t.requestAble==="rotatable";var r=t.inputEvent.target;if(qt(r,dt("rotation-control"))||e.props.rotateAroundControls&&qt(r,dt("around-control"))||qt(r,dt("control"))&&qt(r,dt("rotatable")))return!0;var i=e.props.rotationTarget;return i?Hu(i,!0).some(function(n){return n?r===n||r.contains(n):!1}):!1}var Nb=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Gb={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Nb],viewClassName:function(e){return e.isDragging("rotatable")?dt("view-rotation-dragging"):""},render:function(e,t){var r=ni(e.props,"rotatable"),i=r.rotatable,n=r.rotationPosition,s=r.zoom,a=r.renderDirections,o=r.rotateAroundControls,l=r.resolveAblesWithRotatable,u=e.getState(),c=u.renderPoses,h=u.direction;if(!i)return null;var f=Pp(n,c,h),d=[];if(f.forEach(function(m,b){var S=T(m,2),x=S[0],C=S[1];d.push(t.createElement("div",{key:"rotation".concat(b),className:dt("rotation"),style:{transform:"translate(-50%) translate(".concat(x[0],"px, ").concat(x[1],"px) rotate(").concat(C,"rad)")}},t.createElement("div",{className:dt("line rotation-line"),style:{transform:"scaleX(".concat(s,")")}}),t.createElement("div",{className:dt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(s,")")}})))}),a){var p=Sr(l||{}),v={};p.forEach(function(m){l[m].forEach(function(b){v[b]=m})});var g=[];$t(a)&&(g=a.map(function(m){var b=v[m];return{data:b?{resolve:b}:{},classNames:b?["move"]:[],dir:m}})),d.push.apply(d,Q([],T(hp(e,"rotatable",g,t)),!1))}return o&&d.push.apply(d,Q([],T(gp(e,t)),!1)),d},dragControlCondition:El,dragControlStart:function(e,t){var r,i,n=t.datas,s=t.clientX,a=t.clientY,o=t.parentRotate,l=t.parentFlag,u=t.isPinch,c=t.isRequest,h=e.state,f=h.target,d=h.left,p=h.top,v=h.direction,g=h.beforeDirection,m=h.targetTransform,b=h.moveableClientRect,S=h.offsetMatrix,x=h.targetMatrix,C=h.allMatrix,y=h.width,w=h.height;if(!c&&!f)return!1;var _=e.getRect();n.rect=_,n.transform=m,n.left=d,n.top=p;var E=function(nt){var Z=Mp(e.state,nt);n.fixedDirection=Z.fixedDirection,n.fixedOffset=Z.fixedOffset,n.fixedPosition=Z.fixedPosition,G&&G.setFixedPosition(nt)},M=function(nt){var Z=zb(e.state,nt);n.fixedDirection=Z.fixedDirection,n.fixedOffset=Z.fixedOffset,n.fixedPosition=Z.fixedPosition,G&&G.setFixedDirection(nt)},O=s,A=a;if(c||u||l){var R=o||0;n.beforeInfo={origin:_.beforeOrigin,prevDeg:R,defaultDeg:R,prevSnapDeg:0,startDist:0},n.afterInfo=D(D({},n.beforeInfo),{origin:_.origin}),n.absoluteInfo=D(D({},n.beforeInfo),{origin:_.origin,startValue:R})}else{var L=(i=t.inputEvent)===null||i===void 0?void 0:i.target;if(L){var I=L.getAttribute("data-direction")||"",H=X1[I];if(H){n.isControl=!0,n.isAroundControl=qt(L,dt("around-control")),n.controlDirection=H;var W=L.getAttribute("data-resolve");W&&(n.resolveAble=W);var z=vx(h.rootMatrix,h.renderPoses,b);r=T(Kt(z,H),2),O=r[0],A=r[1]}}n.beforeInfo={origin:_.beforeOrigin},n.afterInfo={origin:_.origin},n.absoluteInfo={origin:_.origin,startValue:_.rotation};var Y=E;E=function(nt){var Z=h.is3d?4:3,ot=T(kt(jd(x,Z),nt),2),ct=ot[0],gt=ot[1],Ct=ue(S,ei([ct,gt],Z)),it=ue(C,ei([nt[0],nt[1]],Z));Y(nt);var ht=h.posDelta;n.beforeInfo.origin=pt(Ct,ht),n.afterInfo.origin=pt(it,ht),n.absoluteInfo.origin=pt(it,ht),Bo(e,n.beforeInfo,O,A,b),Bo(e,n.afterInfo,O,A,b),Bo(e,n.absoluteInfo,O,A,b)},M=function(nt){var Z=Kt([[0,0],[y,0],[0,w],[y,w]],nt);E(Z)}}n.startClientX=O,n.startClientY=A,n.direction=v,n.beforeDirection=g,n.startValue=0,n.datas={},no(e,t,"rotate");var K=!1,G=!1;if(n.isControl&&n.resolveAble){var tt=n.resolveAble;tt==="resizable"&&(G=_l.dragControlStart(e,D(D({},new zi("resizable").dragStart([0,0],t)),{parentPosition:n.controlPosition,parentFixedPosition:n.fixedPosition})))}G||(K=de.dragStart(e,new zi().dragStart([0,0],t))),E(gx(e));var st=xt(e,t,D(D({set:function(nt){n.startValue=nt*Math.PI/180},setFixedDirection:M,setFixedPosition:E},io(e,t)),{dragStart:K,resizeStart:G})),et=ut(e,"onRotateStart",st);return n.isRotate=et!==!1,h.snapRenderInfo={request:t.isRequest},n.isRotate?st:!1},dragControl:function(e,t){var r,i,n,s=t.datas,a=t.clientDistX,o=t.clientDistY,l=t.parentRotate,u=t.parentFlag,c=t.isPinch,h=t.groupDelta,f=t.resolveMatrix,d=s.beforeDirection,p=s.beforeInfo,v=s.afterInfo,g=s.absoluteInfo,m=s.isRotate,b=s.startValue,S=s.rect,x=s.startClientX,C=s.startClientY;if(m){eo(e,t,"rotate");var y=U1(t),w=d*y,_=e.props.parentMoveable,E=0,M,O,A=0,R,L,I=0,H,W,z=180/Math.PI*b,Y=g.startValue,K=!1,G=x+a,tt=C+o;if(!u&&"parentDist"in t){var st=t.parentDist;M=st,R=st,H=st}else c||u?(M=Is(l,d,p),R=Is(l,w,v),H=Is(l,w,g)):(M=Io(G,tt,d,p),R=Io(G,tt,w,v),H=Io(G,tt,w,g),K=!0);if(O=z+M,L=z+R,W=Y+H,ut(e,"onBeforeRotate",xt(e,t,{beforeRotation:O,rotation:L,absoluteRotation:W,setRotation:function(k){R=k-z,M=R,H=R}},!0)),r=T(Lo(e,S,p,M,z,K),3),E=r[0],M=r[1],O=r[2],i=T(Lo(e,S,v,R,z,K),3),A=i[0],R=i[1],L=i[2],n=T(Lo(e,S,g,H,Y,K),3),I=n[0],H=n[1],W=n[2],!(!I&&!A&&!E&&!_&&!f)){var et=ro(s,"rotate(".concat(L,"deg)"),"rotate(".concat(R,"deg)"));f&&(s.fixedPosition=Tu(e,s.targetAllTransform,s.fixedDirection,s.fixedOffset,s));var nt=nb(e,R,s),Z=pt(kt(h||[0,0],nt),s.prevInverseDist||[0,0]);s.prevInverseDist=nt,s.requestValue=null;var ot=lp(e,et,Z,c,t),ct=ot,gt=yr([G,tt],g.startAbsoluteOrigin)-g.startDist,Ct=void 0;if(s.resolveAble==="resizable"){var it=_l.dragControl(e,D(D({},ts(t,e.state,[t.deltaX,t.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:gt}));it&&(Ct=it,ct=Hp(ct,it,t))}var ht=xt(e,t,D(D({delta:A,dist:R,rotate:L,rotation:L,beforeDist:M,beforeDelta:E,beforeRotate:O,beforeRotation:O,absoluteDist:H,absoluteDelta:I,absoluteRotate:W,absoluteRotation:W,isPinch:!!c,resize:Ct},ot),ct));return ut(e,"onRotate",ht),ht}}},dragControlEnd:function(e,t){var r=t.datas;if(r.isRotate){r.isRotate=!1;var i=Ae(e,t,{});return ut(e,"onRotateEnd",i),i}},dragGroupControlCondition:El,dragGroupControlStart:function(e,t){var r=t.datas,i=e.state,n=i.left,s=i.top,a=i.beforeOrigin,o=this.dragControlStart(e,t);if(!o)return!1;o.set(r.beforeDirection*e.rotation);var l=br(e,this,"dragControlStart",t,function(h,f){var d=h.state,p=d.left,v=d.top,g=d.beforeOrigin,m=kt(pt([p,v],[n,s]),pt(g,a));return f.datas.startGroupClient=m,f.datas.groupClient=m,D(D({},f),{parentRotate:0})}),u=D(D({},o),{targets:e.props.targets,events:l}),c=ut(e,"onRotateGroupStart",u);return r.isRotate=c!==!1,r.isRotate?o:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isRotate){uo(e,"onBeforeRotate",function(u){ut(e,"onBeforeRotateGroup",xt(e,t,D(D({},u),{targets:e.props.targets}),!0))});var i=this.dragControl(e,t);if(i){var n=r.beforeDirection,s=i.beforeDist,a=s/180*Math.PI,o=br(e,this,"dragControl",t,function(u,c){var h=c.datas.startGroupClient,f=T(c.datas.groupClient,2),d=f[0],p=f[1],v=T(Kn(h,a*n),2),g=v[0],m=v[1],b=[g-d,m-p];return c.datas.groupClient=[g,m],D(D({},c),{parentRotate:s,groupDelta:b})});e.rotation=n*i.beforeRotation;var l=D({targets:e.props.targets,events:o,set:function(u){e.rotation=u},setGroupRotation:function(u){e.rotation=u}},i);return ut(e,"onRotateGroup",l),l}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,i=t.datas;if(i.isRotate){this.dragControlEnd(e,t);var n=br(e,this,"dragControlEnd",t),s=Ae(e,t,{targets:e.props.targets,events:n});return ut(e,"onRotateGroupEnd",s),r}},request:function(e){var t={},r=0,i=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(n){return"deltaRotate"in n?r+=n.deltaRotate:"rotate"in n&&(r=n.rotate-i),{datas:t,parentDist:r}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Wb(e,t){var r,i=e.direction,n=e.classNames,s=e.size,a=e.pos,o=e.zoom,l=e.key,u=i==="horizontal",c=u?"Y":"X";return t.createElement("div",{key:l,className:n.join(" "),style:(r={},r[u?"width":"height"]="".concat(s),r.transform="translate(".concat(a[0],", ").concat(a[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(o,")"),r)})}function Lu(e,t){return Wb(D(D({},e),{classNames:Q([dt("line","guideline",e.direction)],T(e.classNames),!1).filter(function(r){return r}),size:e.size||"".concat(e.sizeValue,"px"),pos:e.pos||e.posValue.map(function(r){return"".concat(yt(r,.1),"px")})}),t)}function Ch(e,t,r,i,n,s,a,o){var l=e.props.zoom;return r.map(function(u,c){var h=u.type,f=u.pos,d=[0,0];return d[a]=i,d[a?0:1]=-n+f,Lu({key:"".concat(t,"TargetGuideline").concat(c),classNames:[dt("target","bold",h)],posValue:d,sizeValue:s,zoom:l,direction:t},o)})}function wh(e,t,r,i,n,s){var a=e.props,o=a.zoom,l=a.isDisplayInnerSnapDigit,u=t==="horizontal"?zr:Nr,c=n[u.start],h=n[u.end];return r.filter(function(f){var d=f.hide,p=f.elementRect;if(d)return!1;if(l&&p){var v=p.rect;if(v[u.start]<=c&&h<=v[u.end])return!1}return!0}).map(function(f,d){var p=f.pos,v=f.size,g=f.element,m=f.className,b=[-i[0]+p[0],-i[1]+p[1]];return Lu({key:"".concat(t,"-default-guideline-").concat(d),classNames:g?[dt("bold"),m]:[dt("normal"),m],direction:t,posValue:b,sizeValue:v,zoom:o},s)})}function nn(e,t,r,i,n,s,a,o){var l,u=e.props,c=u.snapDigit,h=c===void 0?0:c,f=u.isDisplaySnapDigit,d=f===void 0?!0:f,p=u.snapDistFormat,v=p===void 0?function(C,y){return C}:p,g=u.zoom,m=t==="horizontal"?"X":"Y",b=t==="vertical"?"height":"width",S=Math.abs(n),x=d?parseFloat(S.toFixed(h)):0;return o.createElement("div",{key:"".concat(t,"-").concat(r,"-guideline-").concat(i),className:dt("guideline-group",t),style:(l={left:"".concat(s[0],"px"),top:"".concat(s[1],"px")},l[b]="".concat(S,"px"),l)},Lu({direction:t,classNames:[dt(r),a],size:"100%",posValue:[0,0],sizeValue:S,zoom:g},o),o.createElement("div",{className:dt("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},x>0?v(x,t):""))}function Hb(e,t,r,i){var n=e==="vertical"?0:1,s=e==="vertical"?1:0,a=n?zr:Nr,o=r[a.start],l=r[a.end];return Vp(t,function(u){return u.pos[n]}).map(function(u){var c=[],h=[],f=[];return u.forEach(function(d){var p,v,g=d.element,m=d.elementRect.rect;if(m[a.end]<o)c.push(d);else if(l<m[a.start])h.push(d);else if(m[a.start]<=o&&l<=m[a.end]&&i){var b=d.pos,S={element:g,rect:D(D({},m),(p={},p[a.end]=m[a.start],p))},x={element:g,rect:D(D({},m),(v={},v[a.start]=m[a.end],v))},C=[0,0],y=[0,0];C[n]=b[n],C[s]=b[s],y[n]=b[n],y[s]=b[s]+d.size,c.push({type:e,pos:C,size:0,elementRect:S,direction:"",elementDirection:"end"}),h.push({type:e,pos:y,size:0,elementRect:x,direction:"",elementDirection:"start"})}}),c.sort(function(d,p){return p.pos[s]-d.pos[s]}),h.sort(function(d,p){return d.pos[s]-p.pos[s]}),{total:u,start:c,end:h,inner:f}})}function Vb(e,t,r,i,n){var s=e.props.isDisplayInnerSnapDigit,a=[];return["vertical","horizontal"].forEach(function(o){var l=t.filter(function(g){return g.type===o}),u=o==="vertical"?1:0,c=u?0:1,h=Hb(o,l,i,s),f=u?Nr:zr,d=u?zr:Nr,p=i[f.start],v=i[f.end];h.forEach(function(g){var m=g.total,b=g.start,S=g.end,x=g.inner,C=r[c]+m[0].pos[c]-i[d.start],y=i;b.forEach(function(w){var _=w.elementRect.rect,E=y[f.start]-_[f.end];if(E>0){var M=[0,0];M[u]=r[u]+y[f.start]-p-E,M[c]=C,a.push(nn(e,o,"dashed",a.length,E,M,w.className,n))}y=_}),y=i,S.forEach(function(w){var _=w.elementRect.rect,E=_[f.start]-y[f.end];if(E>0){var M=[0,0];M[u]=r[u]+y[f.end]-p,M[c]=C,a.push(nn(e,o,"dashed",a.length,E,M,w.className,n))}y=_}),x.forEach(function(w){var _=w.elementRect.rect,E=p-_[f.start],M=_[f.end]-v,O=[0,0],A=[0,0];O[u]=r[u]-E,O[c]=C,A[u]=r[u]+v-p,A[c]=C,a.push(nn(e,o,"dashed",a.length,E,O,w.className,n)),a.push(nn(e,o,"dashed",a.length,M,A,w.className,n))})})}),a}function jb(e,t,r,i,n){var s=[];return["horizontal","vertical"].forEach(function(a){var o=t.filter(function(g){return g.type===a}).slice(0,1),l=a==="vertical"?0:1,u=l?0:1,c=l?Nr:zr,h=l?zr:Nr,f=i[c.start],d=i[c.end],p=i[h.start],v=i[h.end];o.forEach(function(g){var m=g.gap,b=g.gapRects,S=Math.max.apply(Math,Q([p],T(b.map(function(y){var w=y.rect;return w[h.start]})),!1)),x=Math.min.apply(Math,Q([v],T(b.map(function(y){var w=y.rect;return w[h.end]})),!1)),C=(S+x)/2;S===x||C===(p+v)/2||b.forEach(function(y){var w=y.rect,_=y.className,E=[r[0],r[1]];if(w[c.end]<f)E[l]+=w[c.end]-f;else if(d<w[c.start])E[l]+=w[c.start]-f-m;else return;E[u]+=C-p,s.push(nn(e,l?"vertical":"horizontal","gap",s.length,m,E,_,n))})})}),s}function kl(e){var t,r,i=e.state,n=i.containerClientRect,s=i.hasFixed,a=n.overflow,o=n.scrollHeight,l=n.scrollWidth,u=n.clientHeight,c=n.clientWidth,h=n.clientLeft,f=n.clientTop,d=e.props,p=d.snapGap,v=p===void 0?!0:p,g=d.verticalGuidelines,m=d.horizontalGuidelines,b=d.snapThreshold,S=b===void 0?5:b,x=d.maxSnapElementGuidelineDistance,C=x===void 0?1/0:x,y=d.isDisplayGridGuidelines,w=Le(ze(e.state)),_=w.top,E=w.left,M=w.bottom,O=w.right,A={top:_,left:E,bottom:M,right:O,center:(E+O)/2,middle:(_+M)/2},R=Yb(e),L=Q([],T(R),!1),I=((r=(t=i.snapThresholdInfo)===null||t===void 0?void 0:t.multiples)!==null&&r!==void 0?r:[1,1]).map(function(Y){return Y*S});v&&L.push.apply(L,Q([],T($b(e,A,I)),!1));var H=D({},i.snapOffset||{left:0,top:0,bottom:0,right:0});if(L.push.apply(L,Q([],T(Ub(e,a?l:c,a?o:u,h,f,H,y)),!1)),s){var W=n.left,z=n.top;H.left+=W,H.top+=z,H.right+=W,H.bottom+=z}return L.push.apply(L,Q([],T(Tp(m||!1,g||!1,a?l:c,a?o:u,h,f,H)),!1)),L=L.filter(function(Y){var K=Y.element,G=Y.elementRect,tt=Y.type;if(!K||!G)return!0;var st=G.rect;return Dp(A,st,tt,C)}),L}function $b(e,t,r){var i=e.props,n=i.maxSnapElementGuidelineDistance,s=n===void 0?1/0:n,a=i.maxSnapElementGapDistance,o=a===void 0?1/0:a,l=e.state.elementRects,u=[];return[["vertical",zr,Nr],["horizontal",Nr,zr]].forEach(function(c){var h=T(c,3),f=h[0],d=h[1],p=h[2],v=t[d.start],g=t[d.end],m=t[d.center],b=t[p.start],S=t[p.end],x={left:r[0],top:r[1]};function C(_){var E=_.rect,M=x[d.start];return E[d.end]<v+M?v-E[d.end]:g-M<E[d.start]?E[d.start]-g:-1}var y=l.filter(function(_){var E=_.rect;return E[p.start]>S||E[p.end]<b?!1:C(_)>0}).sort(function(_,E){return C(_)-C(E)}),w=[];y.forEach(function(_){y.forEach(function(E){if(_!==E){var M=_.rect,O=E.rect,A=M[p.start],R=M[p.end],L=O[p.start],I=O[p.end];A>I||L>R||w.push([_,E])}})}),w.forEach(function(_){var E=T(_,2),M=E[0],O=E[1],A=M.rect,R=O.rect,L=A[d.start],I=A[d.end],H=R[d.start],W=R[d.end],z=x[d.start],Y=0,K=0,G=!1,tt=!1,st=!1;if(I<=v&&g<=H){if(tt=!0,Y=(H-I-(g-v))/2,K=I+Y+(g-v)/2,U(K-m)>z)return}else if(I<H&&W<v+z){if(G=!0,Y=H-I,K=W+Y,U(K-v)>z)return}else if(I<H&&g-z<L){if(st=!0,Y=H-I,K=L-Y,U(K-g)>z)return}else return;Y&&Dp(t,R,f,s)&&(Y>o||u.push({type:f,pos:f==="vertical"?[K,0]:[0,K],element:O.element,size:0,className:O.className,isStart:G,isCenter:tt,isEnd:st,gap:Y,hide:!0,gapRects:[M,O],direction:"",elementDirection:""}))})}),u}function Xb(e,t,r,i){var n,s,a=e.props,o=e.state,l=a.snapGridAll,u=a.snapGridWidth,c=u===void 0?0:u,h=a.snapGridHeight,f=h===void 0?0:h,d=o.snapRenderInfo,p=d&&(((n=d.direction)===null||n===void 0?void 0:n[0])||((s=d.direction)===null||s===void 0?void 0:s[1])),v=e.moveables;if(l&&v&&p&&(c||f)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=e.getRect(),m=g.children,b=d.direction;if(m){var S=b.map(function(C,y){var w=y===0?{snapSize:c,posName:"left",sizeName:"width",clientOffset:i.left-t}:{snapSize:f,posName:"top",sizeName:"height",clientOffset:i.top-r},_=w.snapSize,E=w.posName,M=w.sizeName,O=w.clientOffset;if(!_)return{dir:C,multiple:1,snapSize:_,snapOffset:0};var A=g[M],R=g[E],L=bd(m.map(function(G){return[G[E]-R,G[M],A-G[M]-G[E]+R]})).filter(function(G){return G}).sort(function(G,tt){return G-tt}),I=L[0],H=L.map(function(G){return yt(G/I,.1)*_}),W=1,z=yt(A/I,.1);for(W=1;W<=10&&!H.every(function(G){return G*W%1===0});++W);var Y=(-C+1)/2,K=ea(R-O,R-O+A,Y,1-Y);return{multiple:z*W,dir:C,snapSize:_,snapOffset:Math.round(K/_)}}),x=S.map(function(C){return C.multiple||1});o.snapThresholdInfo.multiples=x,o.snapThresholdInfo.offset=S.map(function(C){return C.snapOffset}),S.forEach(function(C,y){C.snapSize})}}else o.snapThresholdInfo=null}function Ub(e,t,r,i,n,s,a){i===void 0&&(i=0),n===void 0&&(n=0);var o=e.props,l=e.state,u=o.snapGridWidth,c=u===void 0?0:u,h=o.snapGridHeight,f=h===void 0?0:h,d=[],p=s.left,v=s.top,g=[0,0];Xb(e,i,n,s);var m=l.snapThresholdInfo,b=c,S=f;if(m&&(c*=m.multiples[0]||1,f*=m.multiples[1]||1,g=m.offset),f){for(var x=function(y){d.push({type:"horizontal",pos:[p,yt(g[1]*S+y-n+v,.1)],className:dt("grid-guideline"),size:t,hide:!a,direction:"",grid:!0})},C=0;C<=r*2;C+=f)x(C);for(var C=-f;C>=-r;C-=f)x(C)}if(c){for(var x=function(w){d.push({type:"vertical",pos:[yt(g[0]*b+w-i+p,.1),v],className:dt("grid-guideline"),size:r,hide:!a,direction:"",grid:!0})},C=0;C<=t*2;C+=c)x(C);for(var C=-c;C>=-t;C-=c)x(C)}return d}function Dp(e,t,r,i){return r==="horizontal"?U(e.right-t.left)<=i||U(e.left-t.right)<=i||e.left<=t.right&&t.left<=e.right:r==="vertical"?U(e.bottom-t.top)<=i||U(e.top-t.bottom)<=i||e.top<=t.bottom&&t.top<=e.bottom:!0}function Yb(e){var t=e.state,r=e.props.elementGuidelines,i=r===void 0?[]:r;if(!i.length)return t.elementRects=[],[];var n=(t.elementRects||[]).filter(function(f){return!f.refresh}),s=i.map(function(f){return Ze(f)&&"element"in f?D(D({},f),{element:ur(f.element,!0)}):{element:ur(f,!0)}}).filter(function(f){return f.element}),a=a1(n.map(function(f){return f.element}),s.map(function(f){return f.element})),o=a.maintained,l=a.added,u=[];o.forEach(function(f){var d=T(f,2),p=d[0],v=d[1];u[v]=n[p]}),qb(e,l.map(function(f){return s[f]})).map(function(f,d){u[l[d]]=f}),t.elementRects=u;var c=Au(e.props.elementSnapDirections),h=[];return u.forEach(function(f){var d=f.element,p=f.top,v=p===void 0?c.top:p,g=f.left,m=g===void 0?c.left:g,b=f.right,S=b===void 0?c.right:b,x=f.bottom,C=x===void 0?c.bottom:x,y=f.center,w=y===void 0?c.center:y,_=f.middle,E=_===void 0?c.middle:_,M=f.className,O=f.rect,A=Ou({top:v,right:S,left:m,bottom:C,center:w,middle:E},O),R=A.horizontal,L=A.vertical,I=A.horizontalNames,H=A.verticalNames,W=O.top,z=O.left,Y=O.right-z,K=O.bottom-W,G=[Y,K];L.forEach(function(tt,st){h.push({type:"vertical",element:d,pos:[yt(tt,.1),W],size:K,sizes:G,className:M,elementRect:f,elementDirection:ph[H[st]]||H[st],direction:""})}),R.forEach(function(tt,st){h.push({type:"horizontal",element:d,pos:[z,yt(tt,.1)],size:Y,sizes:G,className:M,elementRect:f,elementDirection:ph[I[st]]||I[st],direction:""})})}),h}function _h(e,t){return e?e.map(function(r){var i=Ze(r)?r:{pos:r},n=i.pos;return Li(n)?i:D(D({},i),{pos:Tt(n,t)})}):[]}function Tp(e,t,r,i,n,s,a){n===void 0&&(n=0),s===void 0&&(s=0),a===void 0&&(a={left:0,top:0,right:0,bottom:0});var o=[],l=a.left,u=a.top,c=a.bottom,h=a.right,f=r+h-l,d=i+c-u;return _h(e,d).forEach(function(p){o.push({type:"horizontal",pos:[l,yt(p.pos-s+u,.1)],size:f,className:p.className,direction:""})}),_h(t,f).forEach(function(p){o.push({type:"vertical",pos:[yt(p.pos-n+l,.1),u],size:d,className:p.className,direction:""})}),o}function qb(e,t){if(!t.length)return[];var r=e.props.groupable,i=e.state,n=i.containerClientRect,s=i.rootMatrix,a=i.is3d,o=i.offsetDelta,l=a?4:3,u=T(bb(s,n,l),2),c=u[0],h=u[1],f=r?0:o[0],d=r?0:o[1];return t.map(function(p){var v=p.element.getBoundingClientRect(),g=v.left-c-f,m=v.top-h-d,b=m+v.height,S=g+v.width,x=T(Wi(s,[g,m],l),2),C=x[0],y=x[1],w=T(Wi(s,[S,b],l),2),_=w[0],E=w[1];return D(D({},p),{rect:{left:C,right:_,top:y,bottom:E,center:(C+_)/2,middle:(y+E)/2}})})}function bs(e){var t=e.state,r=t.container,i=e.props.snapContainer||r;if(t.snapContainer===i&&t.guidelines&&t.guidelines.length)return!1;var n=t.containerClientRect,s={left:0,top:0,bottom:0,right:0};if(r!==i){var a=ur(i,!0);if(a){var o=_n(a),l=Th(t,[o.left-n.left,o.top-n.top]),u=Th(t,[o.right-n.right,o.bottom-n.bottom]);s.left=yt(l[0],1e-5),s.top=yt(l[1],1e-5),s.right=yt(u[0],1e-5),s.bottom=yt(u[1],1e-5)}}return t.snapContainer=i,t.snapOffset=s,t.guidelines=kl(e),t.enableSnap=!0,!0}function Rp(e,t,r,i,n,s){var a=ui(e,t,r,s?4:3),o=Kt(a,i);return zu(a,pt(n,o))}function Eh(e){return e?e/U(e):0}function Kb(e,t,r,i,n,s){var a=s.fixedDirection,o=wb(r,a,i),l=Iu(e,t,r,i),u=Q(Q([],T(Ib(e,t,o,i,n,s)),!1),T(Ep(e,l,s)),!1),c=oa(u,0),h=oa(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function Jb(e,t,r,i,n,s,a,o,l){var u=Kt(t,a),c=oo(e,o,{vertical:[u[0]],horizontal:[u[1]]}),h=c.horizontal.offset,f=c.vertical.offset;if(yt(f,bl)||yt(h,bl)){var d=T(fr({datas:l,distX:-f,distY:-h}),2),p=d[0],v=d[1],g=Math.min(n||1/0,r+a[0]*p),m=Math.min(s||1/0,i+a[1]*v);return[g-r,m-i]}return[0,0]}function Ap(e,t,r,i,n,s,a,o){for(var l=ze(e.state),u=e.props.keepRatio,c=0,h=0,f=0;f<2;++f){var d=t(c,h),p=Kb(e,d,n,u,a,o),v=p.width,g=p.height,m=v.isBound,b=g.isBound,S=v.offset,x=g.offset;if(f===1&&(m||(S=0),b||(x=0)),f===0&&a&&!m&&!b)return[0,0];if(u){var C=U(S)*(r?1/r:1),y=U(x)*(i?1/i:1),w=m&&b?C<y:b||!m&&C<y;w?S=r*x/i:x=i*S/r}c+=S,h+=x}if(!u&&n[0]&&n[1]){var _=Fb(e,l,n,s,o),E=_.maxWidth,M=_.maxHeight,O=T(Jb(e,t(c,h).map(function(L){return L.map(function(I){return yt(I,bl)})}),r+c,i+h,E,M,n,a,o),2),S=O[0],x=O[1];c+=S,h+=x}return[c,h]}function Cn(e){return e<0&&(e=e%360+360),e%=360,e}function Zb(e,t){t=Cn(t);var r=Math.floor(e/360),i=r*360+360-t,n=r*360+t;return U(e-i)<U(e-n)?i:n}function Fo(e,t){e=Cn(e),t=Cn(t);var r=Cn(e-t);return Math.min(r,360-r)}function Qb(e,t,r,i){var n,s=e.props,a=(n=s[mp])!==null&&n!==void 0?n:5,o=s[yp];if(Ji(e,"rotatable")){var l=t.pos1,u=t.pos2,c=t.pos3,h=t.pos4,f=t.origin,d=r*Math.PI/180,p=[l,u,c,h].map(function(x){return pt(x,f)}),v=p.map(function(x){return Kn(x,d)}),g=Q(Q([],T(vb(e,p,v,f,r)),!1),T(Db(e,p,v,f,r)),!1);g.sort(function(x,C){return U(x-r)-U(C-r)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:r}}if(o!=null&&o.length&&a){var b=o.slice().sort(function(x,C){return Fo(x,i)-Fo(C,i)}),S=b[0];if(Fo(S,i)<=a)return{isSnap:!0,dist:r+Zb(i,S)-i}}return{isSnap:!1,dist:r}}function tx(e,t,r,i,n,s,a){if(!Ji(e,"resizable"))return[0,0];var o=a.fixedDirection,l=a.nextAllMatrix,u=e.state,c=u.allMatrix,h=u.is3d;return Ap(e,function(f,d){return Rp(l||c,t+f,r+d,o,n,h)},t,r,i,n,s,a)}function ex(e,t,r,i,n){if(!Ji(e,"scalable"))return[0,0];var s=n.startOffsetWidth,a=n.startOffsetHeight,o=n.fixedPosition,l=n.fixedDirection,u=n.is3d,c=Ap(e,function(h,f){return Rp(tb(n,kt(t,[h/s,f/a])),s,a,l,o,u)},s,a,r,o,i,n);return[c[0]/s,c[1]/a]}function rx(e,t){t.absolutePoses=ze(e.state)}function kh(e){var t=[];return e.forEach(function(r){r.guidelineInfos.forEach(function(i){var n=i.guideline;ke(t,function(s){return s.guideline===n})||(n.direction="",t.push({guideline:n,posInfo:r}))})}),t.map(function(r){var i=r.guideline,n=r.posInfo;return D(D({},i),{direction:n.direction})})}function Mh(e,t,r,i,n,s){var a=Ru(so(e,s),t,r),o=a.vertical,l=a.horizontal,u=xi();o.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.left=!0),p.direction==="end"&&(u.right=!0),i.push({type:"bounds",pos:p.pos}))}),l.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.top=!0),p.direction==="end"&&(u.bottom=!0),n.push({type:"bounds",pos:p.pos}))});var c=Tb(e),h=c.boundMap,f=c.vertical,d=c.horizontal;return f.forEach(function(p){xr(i,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||i.push({type:"bounds",pos:p})}),d.forEach(function(p){xr(n,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),{boundMap:u,innerBoundMap:h}}var ix=Wu("",["resizable","scalable"]),nx={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",mp,yp,bp,xp,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(e,t){var r=e.state,i=r.top,n=r.left,s=r.pos1,a=r.pos2,o=r.pos3,l=r.pos4,u=r.snapRenderInfo,c=e.props.snapRenderThreshold,h=c===void 0?1:c;if(!u||!u.render||!Ji(e,""))return Ci(e,"boundMap",xi(),function(et){return JSON.stringify(et)}),Ci(e,"innerBoundMap",xi(),function(et){return JSON.stringify(et)}),[];r.guidelines=kl(e);var f=Math.min(s[0],a[0],o[0],l[0]),d=Math.min(s[1],a[1],o[1],l[1]),p=u.externalPoses||[],v=ze(e.state),g=[],m=[],b=[],S=[],x=[],C=Le(v),y=C.width,w=C.height,_=C.top,E=C.left,M=C.bottom,O=C.right,A={left:E,right:O,top:_,bottom:M,center:(E+O)/2,middle:(_+M)/2},R=p.length>0,L=R?Le(p):{};if(!u.request){if(u.direction&&x.push(Cb(e,v,u.direction,h,h)),u.snap){var I=Le(v);u.center&&(I.middle=(I.top+I.bottom)/2,I.center=(I.left+I.right)/2),x.push(vh(e,I,h,h))}R&&(u.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),x.push(vh(e,L,h,h))),x.forEach(function(et){var nt=et.vertical.posInfos,Z=et.horizontal.posInfos;g.push.apply(g,Q([],T(nt.filter(function(ot){var ct=ot.guidelineInfos;return ct.some(function(gt){var Ct=gt.guideline;return!Ct.hide})}).map(function(ot){return{type:"snap",pos:ot.pos}})),!1)),m.push.apply(m,Q([],T(Z.filter(function(ot){var ct=ot.guidelineInfos;return ct.some(function(gt){var Ct=gt.guideline;return!Ct.hide})}).map(function(ot){return{type:"snap",pos:ot.pos}})),!1)),b.push.apply(b,Q([],T(kh(nt)),!1)),S.push.apply(S,Q([],T(kh(Z)),!1))})}var H=Mh(e,[E,O],[_,M],g,m),W=H.boundMap,z=H.innerBoundMap;R&&Mh(e,[L.left,L.right],[L.top,L.bottom],g,m,u.externalBounds);var Y=Q(Q([],T(b),!1),T(S),!1),K=Y.filter(function(et){return et.element&&!et.gapRects}),G=Y.filter(function(et){return et.gapRects}).sort(function(et,nt){return et.gap-nt.gap});ut(e,"onSnap",{guidelines:Y.filter(function(et){var nt=et.element;return!nt}),elements:K,gaps:G},!0);var tt=Ci(e,"boundMap",W,function(et){return JSON.stringify(et)},xi()),st=Ci(e,"innerBoundMap",z,function(et){return JSON.stringify(et)},xi());return(W===tt||z===st)&&ut(e,"onBound",{bounds:W,innerBounds:z},!0),Q(Q(Q(Q(Q(Q([],T(Vb(e,K,[f,d],A,t)),!1),T(jb(e,G,[f,d],A,t)),!1),T(wh(e,"horizontal",S,[n,i],A,t)),!1),T(wh(e,"vertical",b,[n,i],A,t)),!1),T(Ch(e,"horizontal",m,f,i,y,0,t)),!1),T(Ch(e,"vertical",g,d,n,w,1,t)),!1)},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},bs(e)},drag:function(e){var t=e.state;bs(e)||(t.guidelines=kl(e)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){if(ix(e,t)||El(e,t))return!0;if(!t.isRequest&&t.inputEvent)return qt(t.inputEvent.target,dt("snap-control"))},dragControlStart:function(e){e.state.snapRenderInfo=null,bs(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,bs(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function sx(e,t){return[e[0]*t[0],e[1]*t[1]]}function dt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ty.apply(void 0,Q([Mu],T(e),!1))}function Op(e){e()}function ax(e){return!e||e==="none"?[1,0,0,1,0,0]:Ze(e)?e:In(e)}function wn(e,t,r){return ia(t,ri(r,t),e,ri(r.map(function(i){return-i}),t))}function ox(e,t,r){if(t==="%"){var i=Fu(e.ownerSVGElement);return i[r?"width":"height"]/100}return 1}function lx(e){var t=ux(Nu(e,":before"));return t.map(function(r,i){var n=Xn(r),s=n.value,a=n.unit;return s*ox(e,a,i===0)})}function ua(e){return e?e.split(" "):["0","0"]}function ux(e){return ua(e.transformOrigin)}function Bp(e){var t=Me(e),r=t("transform");if(r&&r!=="none")return r;if("transform"in e){var i=e.transform,n=i.baseVal;if(!n)return"";var s=n.length;if(!s)return"";for(var a=[],o=function(u){var c=n[u].matrix;a.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return c[h]}).join(", "),")"))},l=0;l<s;++l)o(l);return a.join(" ")}return""}function Fn(e,t,r,i,n){var s,a,o=gu(e)||Gr(e),l=!1,u,c;if(!e||r)u=e;else{var h=(s=e==null?void 0:e.assignedSlot)===null||s===void 0?void 0:s.parentElement,f=e.parentElement;h?(l=!0,c=f,u=h):u=f}for(var d=!1,p=e===t||u===t,v="relative",g=1,m=parseFloat(n==null?void 0:n("zoom"))||1,b=n==null?void 0:n("position");u&&u!==o;){t===u&&(p=!0);var S=Me(u),x=u.tagName.toLowerCase(),C=Bp(u),y=S("willChange"),w=parseFloat(S("zoom"))||1;if(v=S("position"),i&&w!==1){g=w;break}if(!r&&i&&m!==1&&b&&b!=="absolute"||x==="svg"||x==="foreignobject"||v!=="static"||C&&C!=="none"||y==="transform")break;var _=(a=e==null?void 0:e.assignedSlot)===null||a===void 0?void 0:a.parentNode,E=u.parentNode;_&&(l=!0,c=E);var M=E;if(M&&M.nodeType===11){u=M.host,d=!0,v=Me(u)("position");break}u=M,v="relative"}return{offsetZoom:g,hasSlot:l,parentSlotElement:c,isCustomElement:d,isStatic:v==="static",isEnd:p||!u||u===o,offsetParent:u||o}}function cx(e,t){var r,i=e.tagName.toLowerCase(),n=e.offsetLeft,s=e.offsetTop,a=Me(e),o=$n(n),l=!o,u,c;return!l&&(i!=="svg"||e.ownerSVGElement)?(u=Qd?lx(e):ua(a("transformOrigin")).map(function(h){return parseFloat(h)}),c=u.slice(),l=!0,i==="svg"?(n=0,s=0):(r=T(dx(e,u,e===t&&t.tagName.toLowerCase()==="g"),4),n=r[0],s=r[1],u[0]=r[2],u[1]=r[3])):(u=ua(a("transformOrigin")).map(function(h){return parseFloat(h)}),c=u.slice()),{tagName:i,isSVG:o,hasOffset:l,offset:[n||0,s||0],origin:u,targetOrigin:c}}function Ip(e,t){var r=Me(e),i=Me(Gr(e)),n=i("position");if(!t&&(!n||n==="static"))return[0,0];var s=parseInt(i("marginLeft"),10),a=parseInt(i("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(a=0),(r("left")!=="auto"||r("right")!=="auto")&&(s=0)),[s,a]}function Ml(e){e.forEach(function(t){var r=t.matrix;r&&(t.matrix=Qe(r,3,4))})}function hx(e){for(var t=e.parentElement,r=!1,i=Gr(e);t;){var n=Nu(t).transform;if(n&&n!=="none"){r=!0;break}if(t===i)break;t=t.parentElement}return{fixedContainer:t||i,hasTransform:r}}function lo(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat($d(e,!t).join(","),")")}function Fu(e){var t=e.clientWidth,r=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:r};var i=e.viewBox,n=i&&i.baseVal||{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width||t,height:n.height||r,clientWidth:t,clientHeight:r}}function fx(e,t){var r,i=Fu(e),n=i.width,s=i.height,a=i.clientWidth,o=i.clientHeight,l=a/n,u=o/s,c=e.preserveAspectRatio.baseVal,h=c.align,f=c.meetOrSlice,d=[0,0],p=[l,u],v=[0,0];if(h!==1){var g=(h-2)%3,m=Math.floor((h-2)/3);d[0]=n*g/2,d[1]=s*m/2;var b=f===2?Math.max(u,l):Math.min(l,u);p[0]=b,p[1]=b,v[0]=(a-n)/2*g,v[1]=(o-s)/2*m}var S=wu(p,t);return r=T(v,2),S[t*(t-1)]=r[0],S[t*(t-1)+1]=r[1],wn(S,t,d)}function dx(e,t,r){var i=e.tagName.toLowerCase();if(!e.getBBox||!r&&i==="g")return[0,0,0,0];var n=Me(e),s=n("transform-box")==="fill-box",a=e.getBBox(),o=Fu(e.ownerSVGElement),l=a.x,u=a.y;i==="foreignobject"&&!l&&!u&&(l=parseFloat(e.getAttribute("x"))||0,u=parseFloat(e.getAttribute("y"))||0);var c=l-o.x,h=u-o.y,f=s?t[0]:t[0]-c,d=s?t[1]:t[1]-h;return[c,h,f,d]}function Nt(e,t,r){return ue(e,ei(t,r),r)}function ui(e,t,r,i){return[[0,0],[t,0],[0,r],[t,r]].map(function(n){return Nt(e,n,i)})}function Le(e){var t=e.map(function(u){return u[0]}),r=e.map(function(u){return u[1]}),i=Math.min.apply(Math,Q([],T(t),!1)),n=Math.min.apply(Math,Q([],T(r),!1)),s=Math.max.apply(Math,Q([],T(t),!1)),a=Math.max.apply(Math,Q([],T(r),!1)),o=s-i,l=a-n;return{left:i,top:n,right:s,bottom:a,width:o,height:l}}function Ph(e,t,r,i){var n=ui(e,t,r,i);return Le(n)}function px(e,t,r,i,n){var s,a=e.target,o=e.origin,l=t.matrix,u=Fp(a),c=u.offsetWidth,h=u.offsetHeight,f=r.getBoundingClientRect(),d=[0,0];r===Gr(r)&&(d=Ip(a,!0));for(var p=a.getBoundingClientRect(),v=p.left-f.left+r.scrollLeft-(r.clientLeft||0)+d[0],g=p.top-f.top+r.scrollTop-(r.clientTop||0)+d[1],m=p.width,b=p.height,S=ia(i,n,l),x=Ph(S,c,h,i),C=x.left,y=x.top,w=x.width,_=x.height,E=Nt(S,o,i),M=pt(E,[C,y]),O=[v+M[0]*m/w,g+M[1]*b/_],A=[0,0],R=0;++R<10;){var L=cr(n,i);s=T(pt(Nt(L,O,i),Nt(L,E,i)),2),A[0]=s[0],A[1]=s[1];var I=ia(i,n,ri(A,i),l),H=Ph(I,c,h,i),W=H.left,z=H.top,Y=W-v,K=z-g;if(U(Y)<2&&U(K)<2)break;O[0]-=Y,O[1]-=K}return A.map(function(G){return Math.round(G)})}function vx(e,t,r){var i=e.length===16,n=i?4:3,s=t.map(function(l){return Nt(e,l,n)}),a=r.left,o=r.top;return s.map(function(l){return[l[0]+a,l[1]+o]})}function Fe(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Lp(e,t){return Fe([t[0]-e[0],t[1]-e[1]])}function sn(e,t,r,i){r===void 0&&(r=1),i===void 0&&(i=Wt(e,t));var n=Lp(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(i,"rad) scaleY(").concat(r,")"),width:"".concat(n,"px")}}function ca(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r.length,s=r.reduce(function(o,l){return o+l[0]},0)/n,a=r.reduce(function(o,l){return o+l[1]},0)/n;return{transform:"translateZ(0px) translate(".concat(s,"px, ").concat(a,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function ni(e,t){var r=e[t];return Ze(r)?D(D({},e),r):e}function Fp(e){var t=e&&!$n(e.offsetWidth),r=0,i=0,n=0,s=0,a=0,o=0,l=0,u=0,c=0,h=0,f=0,d=0,p=1/0,v=1/0,g=1/0,m=1/0,b=0,S=0,x=!1;if(e)if(!t&&e.ownerSVGElement){var C=e.getBBox();x=!0,r=C.width,i=C.height,a=r,o=i,l=r,u=i,n=r,s=i}else{var y=Me(e),w=e.style,_=y("boxSizing")==="border-box",E=parseFloat(y("borderLeftWidth"))||0,M=parseFloat(y("borderRightWidth"))||0,O=parseFloat(y("borderTopWidth"))||0,A=parseFloat(y("borderBottomWidth"))||0,R=parseFloat(y("paddingLeft"))||0,L=parseFloat(y("paddingRight"))||0,I=parseFloat(y("paddingTop"))||0,H=parseFloat(y("paddingBottom"))||0,W=R+L,z=I+H,Y=E+M,K=O+A,G=W+Y,tt=z+K,st=y("position"),et=0,nt=0;if("clientLeft"in e){var Z=null;if(st==="absolute"){var ot=Fn(e,Gr(e));Z=ot.offsetParent}else Z=e.parentElement;if(Z){var ct=Me(Z);et=parseFloat(ct("width")),nt=parseFloat(ct("height"))}}c=Math.max(W,Tt(y("minWidth"),et)||0),h=Math.max(z,Tt(y("minHeight"),nt)||0),p=Tt(y("maxWidth"),et),v=Tt(y("maxHeight"),nt),isNaN(p)&&(p=1/0),isNaN(v)&&(v=1/0),b=Tt(w.width,0)||0,S=Tt(w.height,0)||0,a=parseFloat(y("width"))||0,o=parseFloat(y("height"))||0,l=U(a-b)<1?al(c,b||a,p):a,u=U(o-S)<1?al(h,S||o,v):o,r=l,i=u,n=l,s=u,_?(g=p,m=v,f=c,d=h,l=r-G,u=i-tt):(g=p+G,m=v+tt,f=c+G,d=h+tt,r=l+G,i=u+tt),n=l+W,s=u+z}return{svg:x,offsetWidth:r,offsetHeight:i,clientWidth:n,clientHeight:s,contentWidth:l,contentHeight:u,inlineCSSWidth:b,inlineCSSHeight:S,cssWidth:a,cssHeight:o,minWidth:c,minHeight:h,maxWidth:p,maxHeight:v,minOffsetWidth:f,minOffsetHeight:d,maxOffsetWidth:g,maxOffsetHeight:m}}function zp(e,t){return Wt(t>0?e[0]:e[1],t>0?e[1]:e[0])}function xs(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Np(e,t){var r=e===Gr(e)||e===gu(e),i={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return r&&(i.clientHeight=Math.max(t.height,i.clientHeight),i.scrollHeight=Math.max(t.height,i.scrollHeight)),i.overflow=Me(e)("overflow")!=="visible",D(D({},t),i)}function zo(e,t,r,i){var n=e.left,s=e.right,a=e.top,o=e.bottom,l=t.top,u=t.left,c={left:u+n,top:l+a,right:u+s,bottom:l+o,width:s-n,height:o-a};return r&&i?Np(r,c):c}function _n(e,t){var r=0,i=0,n=0,s=0;if(e){var a=e.getBoundingClientRect();r=a.left,i=a.top,n=a.width,s=a.height}var o={left:r,top:i,width:n,height:s,right:r+n,bottom:i+s};return e&&t?Np(e,o):o}function gx(e){var t=e.props,r=t.groupable,i=t.svgOrigin,n=e.getState(),s=n.offsetWidth,a=n.offsetHeight,o=n.svg,l=n.transformOrigin;return!r&&o&&i?Vu(i,s,a):l}function Gp(e,t,r,i){var n;if(e)n=e;else if(t)n=[0,0];else{var s=r.target;n=Wp(s,i)}return n}function Wp(e,t){if(e){var r=e.getAttribute("data-rotation")||"",i=e.getAttribute("data-direction");if(t.deg=r,!!i){var n=[0,0];return i.indexOf("w")>-1&&(n[0]=-1),i.indexOf("e")>-1&&(n[0]=1),i.indexOf("n")>-1&&(n[1]=-1),i.indexOf("s")>-1&&(n[1]=1),n}}}function zu(e,t){return[kt(t,e[0]),kt(t,e[1]),kt(t,e[2]),kt(t,e[3])]}function ze(e){var t=e.left,r=e.top,i=e.pos1,n=e.pos2,s=e.pos3,a=e.pos4;return zu([i,n,s,a],[t,r])}function Pl(e,t){e[t?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(e)})}function Si(e,t){var r=t?"controlGesto":"targetGesto",i=e[r];(i==null?void 0:i.isIdle())===!1&&Pl(e,t),i==null||i.unset(),e[r]=null}function ge(e,t){if(t){var r=Ki(t);r.nextStyle=D(D({},r.nextStyle),e)}return{style:e,cssText:Sr(e).map(function(i){return"".concat(Bs(i,"-"),": ").concat(e[i],";")}).join("")}}function Hp(e,t,r){var i=t.afterTransform||t.transform;return D(D({},ge(D(D(D({},e.style),t.style),{transform:i}),r)),{afterTransform:i,transform:e.transform})}function xt(e,t,r,i){var n=t.datas;n.datas||(n.datas={});var s=D(D({},r),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:n.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){n.isEventStart=!1},stopDrag:function(){var a;(a=t.stop)===null||a===void 0||a.call(t)}});return n.isStartEvent?i||(n.lastEvent=s):n.isStartEvent=!0,s}function Ae(e,t,r){var i=t.datas,n="isDrag"in r?r.isDrag:t.isDrag;return i.datas||(i.datas={}),D(D({isDrag:n},r),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:i.lastEvent,isDouble:t.isDouble,datas:i.datas,isFirstDrag:!!t.isFirstDrag})}function uo(e,t,r){e._emitter.on(t,r)}function ut(e,t,r,i,n){return e.triggerEvent(t,r,i,n)}function Nu(e,t){return Ir(e).getComputedStyle(e,t)}function Ss(e,t,r){var i={},n={};return e.filter(function(s){var a=s.name;if(i[a]||!t.some(function(o){return s[o]}))return!1;if(!r&&s.ableGroup){if(n[s.ableGroup])return!1;n[s.ableGroup]=!0}return i[a]=!0,!0})}function Dl(e,t){return e===t||e==null&&t==null}function Dh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length-1,i=0;i<r;++i){var n=e[i];if(!$n(n))return n}return e[r]}function Vp(e,t){var r=[],i=[];return e.forEach(function(n,s){var a=t(n,s,e),o=i.indexOf(a),l=r[o]||[];o===-1&&(i.push(a),r.push(l)),l.push(n)}),r}function mx(e,t){var r=[],i={};return e.forEach(function(n,s){var a=t(n,s,e),o=i[a];o||(o=[],i[a]=o,r.push(o)),o.push(n)}),r}function jp(e){return e.reduce(function(t,r){return t.concat(r)},[])}function Gi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(r,i){return U(i)-U(r)}),e[0]}function Wi(e,t,r){return ue(cr(e,r),ei(t,r),r)}function yx(e,t){var r,i=e.is3d,n=e.rootMatrix,s=i?4:3;return r=T(Wi(n,[t.distX,t.distY],s),2),t.distX=r[0],t.distY=r[1],t}function Be(e,t,r,i){if(!r[0]&&!r[1])return t;var n=Nt(e,[Eh(r[0]||1),0],i),s=Nt(e,[0,Eh(r[1]||1)],i),a=Nt(e,[r[0]/Fe(n),r[1]/Fe(s)],i);return kt(t,a)}function $e(e,t,r){return r?"".concat(e/t*100,"%"):"".concat(e,"px")}function ha(e){return U(e)<=me?0:e}function Gu(e){return function(t){if(!t.isDragging(e))return"";var r=ob(t,e),i=r.deg;return i?dt("view-control-rotation".concat(i)):""}}function Wu(e,t){return t===void 0&&(t=[e]),function(r,i){if(i.isRequest)return t.some(function(s){return i.requestAble===s})?i.parentDirection:!1;var n=i.inputEvent.target;return qt(n,dt("direction"))&&(!e||qt(n,dt(e)))}}function bx(e,t,r){var i,n=Fi(e,{"x%":function(C){return C/100*t.offsetWidth},"y%":function(C){return C/100*t.offsetHeight}}),s=e.slice(0,r<0?void 0:r),a=e.slice(0,r<0?void 0:r+1),o=e[r]||"",l=r<0?[]:e.slice(r),u=r<0?[]:e.slice(r+1),c=n.slice(0,r<0?void 0:r),h=n.slice(0,r<0?void 0:r+1),f=(i=n[r])!==null&&i!==void 0?i:Fi([""])[0],d=r<0?[]:n.slice(r),p=r<0?[]:n.slice(r+1),v=f?[f]:[],g=pi(c),m=pi(h),b=pi(d),S=pi(p),x=Rt(g,b,4);return{transforms:e,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:pi(v),afterFunctionMatrix:b,afterFunctionMatrix2:S,allFunctionMatrix:x,beforeFunctions:c,beforeFunctions2:h,targetFunction:v[0],afterFunctions:d,afterFunctions2:p,beforeFunctionTexts:s,beforeFunctionTexts2:a,targetFunctionText:o,afterFunctionTexts:l,afterFunctionTexts2:u}}function xx(e){return!e||!Ze(e)||Yi(e)?!1:$t(e)||"length"in e}function ur(e,t){return e?Yi(e)?e:Ee(e)?t?document.querySelector(e):e:du(e)?e():wd(e)?e:"current"in e?e.current:e:null}function Hu(e,t){if(!e)return[];var r=xx(e)?[].slice.call(e):[e];return r.reduce(function(i,n){return Ee(n)&&t?Q(Q([],T(i),!1),T([].slice.call(document.querySelectorAll(n))),!1):($t(n)?i.push(Hu(n,t)):i.push(ur(n,t)),i)},[])}function Sx(e,t,r){var i=Wt(e,t)/Math.PI*180;return i=r>=0?i:180-i,i=i>=0?i:360+i,i}function Th(e,t){var r=e.rootMatrix,i=e.is3d,n=i?4:3,s=cr(r,n);return i||(s=Qe(s,3,4)),s[12]=0,s[13]=0,s[14]=0,n1(s,t)}function $p(e,t,r,i,n){var s=T(e,2),a=s[0],o=s[1],l=0,u=0;if(n&&a&&o){var c=Wt([0,0],t),h=Wt([0,0],i),f=Fe(t),d=Math.cos(c-h)*f;if(!i[0])u=d,l=u*r;else if(!i[1])l=d,u=l/r;else{var p=i[0]*a,v=i[1]*o,g=Math.atan2(p+t[0],v+t[1]),m=Math.atan2(p,v);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var b=0;U(g-m)<Math.PI/2||U(g-m)>Math.PI/2*3||(m+=Math.PI),b=g-m,b>Math.PI*2?b-=Math.PI*2:b>Math.PI?b=2*Math.PI-b:b<-Math.PI&&(b=-2*Math.PI-b);var S=Fe([p+t[0],v+t[1]])*Math.cos(b);l=S*Math.sin(m)-p,u=S*Math.cos(m)-v,i[0]<0&&(l*=-1),i[1]<0&&(u*=-1)}}else l=i[0]*t[0],u=i[1]*t[1];return[l,u]}function Xp(e,t,r,i){var n,s=r.ratio,a=r.startOffsetWidth,o=r.startOffsetHeight,l=0,u=0,c=i.distX,h=i.distY,f=i.pinchScale,d=i.parentDistance,p=i.parentDist,v=i.parentScale,g=r.fixedDirection,m=[0,1].map(function(w){return U(e[w]-g[w])}),b=[0,1].map(function(w){var _=m[w];return _!==0&&(_=2/_),_});if(p)l=p[0],u=p[1],t&&(l?u||(u=l/s):l=u*s);else if(Li(f))l=(f-1)*a,u=(f-1)*o;else if(v)l=(v[0]-1)*a,u=(v[1]-1)*o;else if(d){var S=a*m[0],x=o*m[1],C=Fe([S,x]);l=d/C*S*b[0],u=d/C*x*b[1]}else{var y=fr({datas:r,distX:c,distY:h});y=b.map(function(w,_){return y[_]*w}),n=T($p([a,o],y,s,e,t),2),l=n[0],u=n[1]}return{distWidth:l,distHeight:u}}function Tl(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var r=T(e.split(" "),2),i=r[0],n=r[1],s=Tl(i||""),a=Tl(n||""),o=D(D({},s),a),l={x:"50%",y:"50%"};return o.x&&(l.x=o.x),o.y&&(l.y=o.y),o.value&&(o.x&&!o.y&&(l.y=o.value),!o.x&&o.y&&(l.x=o.value)),l}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function Vu(e,t,r){var i=Tl(e,!0),n=i.x,s=i.y;return[Tt(n,t)||0,Tt(s,r)||0]}function Cx(e,t,r){var i=e.map(function(s){return pt(s,t)}),n=i.map(function(s){return Kn(s,r)});return{prev:i,next:n,result:n.map(function(s){return kt(s,t)})}}function Up(e,t){return e.length===t.length&&e.every(function(r,i){var n=t[i],s=$t(r),a=$t(n);return s&&a?Up(r,n):!s&&!a?r===n:!1})}function Ci(e,t,r,i,n){var s=e._store,a=s[t];if(!(t in s))if(n!=null)s[t]=n,a=n;else return s[t]=r,r;return a===r||i(a)===i(r)?a:(s[t]=r,r)}function pe(e){return e>=0?1:-1}function U(e){return Math.abs(e)}function No(e,t){return my(e).map(function(r){return t(r)})}function Yp(e){return Li(e)?{top:e,left:e,right:e,bottom:e}:{left:e.left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}}var wx=Qn("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(e,t){var r=t.datas,i=t.targets,n=t.angle,s=t.originalDatas,a=e.props,o=a.pinchable,l=a.ables;if(!o)return!1;var u="onPinch".concat(i?"Group":"","Start"),c="drag".concat(i?"Group":"","ControlStart"),h=(o===!0?e.controlAbles:l.filter(function(v){return o.indexOf(v.name)>-1})).filter(function(v){return v.canPinch&&v[c]}),f=xt(e,t,{});i&&(f.targets=i);var d=ut(e,u,f);r.isPinch=d!==!1,r.ables=h;var p=r.isPinch;return p?(h.forEach(function(v){if(s[v.name]=s[v.name]||{},!!v[c]){var g=D(D({},t),{datas:s[v.name],parentRotate:n,isPinch:!0});v[c](e,g)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},p):!1},pinch:function(e,t){var r=t.datas,i=t.scale,n=t.distance,s=t.originalDatas,a=t.inputEvent,o=t.targets,l=t.angle;if(r.isPinch){var u=n*(1-1/i),c=xt(e,t,{});o&&(c.targets=o);var h="onPinch".concat(o?"Group":"");ut(e,h,c);var f=r.ables,d="drag".concat(o?"Group":"","Control");return f.forEach(function(p){p[d]&&p[d](e,D(D({},t),{datas:s[p.name],inputEvent:a,resolveMatrix:!0,pinchScale:i,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(e,t){var r=t.datas,i=t.isPinch,n=t.inputEvent,s=t.targets,a=t.originalDatas;if(r.isPinch){var o="onPinch".concat(s?"Group":"","End"),l=Ae(e,t,{isDrag:i});s&&(l.targets=s),ut(e,o,l);var u=r.ables,c="drag".concat(s?"Group":"","ControlEnd");return u.forEach(function(h){h[c]&&h[c](e,D(D({},t),{isDrag:i,datas:a[h.name],inputEvent:n,isPinch:!0}))}),i}},pinchGroupStart:function(e,t){return this.pinchStart(e,D(D({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,D(D({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,D(D({},t),{targets:e.props.targets}))}}),Rh=Wu("scalable"),_x={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:pp("scalable"),dragControlCondition:Rh,viewClassName:Gu("scalable"),dragControlStart:function(e,t){var r=t.datas,i=t.isPinch,n=t.inputEvent,s=t.parentDirection,a=Gp(s,i,n,r),o=e.state,l=o.width,u=o.height,c=o.targetTransform,h=o.target,f=o.pos1,d=o.pos2,p=o.pos4;if(!a||!h)return!1;i||li(e,t),r.datas={},r.transform=c,r.prevDist=[1,1],r.direction=a,r.startOffsetWidth=l,r.startOffsetHeight=u,r.startValue=[1,1];var v=!a[0]&&!a[1]||a[0]||!a[1];no(e,t,"scale"),r.isWidth=v;function g(y){r.ratio=y&&isFinite(y)?y:0}r.startPositions=ze(e.state);function m(y){var w=kp(r.startPositions,y);r.fixedDirection=w.fixedDirection,r.fixedPosition=w.fixedPosition,r.fixedOffset=w.fixedOffset}r.setFixedDirection=m,g(yr(f,d)/yr(d,p)),m([-a[0],-a[1]]);var b=function(y){r.minScaleSize=y},S=function(y){r.maxScaleSize=y};b([-1/0,-1/0]),S([1/0,1/0]);var x=xt(e,t,D(D({direction:a,set:function(y){r.startValue=y},setRatio:g,setFixedDirection:m,setMinScaleSize:b,setMaxScaleSize:S},io(e,t)),{dragStart:de.dragStart(e,new zi().dragStart([0,0],t))})),C=ut(e,"onScaleStart",x);return r.startFixedDirection=r.fixedDirection,C!==!1&&(r.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:a}),r.isScale?x:!1},dragControl:function(e,t){eo(e,t,"scale");var r=t.datas,i=t.parentKeepRatio,n=t.parentFlag,s=t.isPinch,a=t.dragClient,o=t.isRequest,l=t.useSnap,u=t.resolveMatrix,c=r.prevDist,h=r.direction,f=r.startOffsetWidth,d=r.startOffsetHeight,p=r.isScale,v=r.startValue,g=r.isWidth,m=r.ratio;if(!p)return!1;var b=e.props,S=b.throttleScale,x=b.parentMoveable,C=h;!h[0]&&!h[1]&&(C=[1,1]);var y=m&&(i??b.keepRatio)||!1,w=e.state,_=[v[0],v[1]];function E(){var it=Xp(C,y,r,t),ht=it.distWidth,k=it.distHeight,P=f?(f+ht)/f:1,B=d?(d+k)/d:1;v[0]||(_[0]=ht/f),v[1]||(_[1]=k/d);var F=(C[0]||y?P:1)*_[0],N=(C[1]||y?B:1)*_[1];return F===0&&(F=pe(c[0])*gs),N===0&&(N=pe(c[1])*gs),[F,N]}var M=E();if(!s&&e.props.groupable){var O=w.snapRenderInfo||{},A=O.direction;$t(A)&&(A[0]||A[1])&&(w.snapRenderInfo={direction:h,request:t.isRequest})}ut(e,"onBeforeScale",xt(e,t,{scale:M,setFixedDirection:function(it){return r.setFixedDirection(it),M=E(),M},startFixedDirection:r.startFixedDirection,setScale:function(it){M=it}},!0));var R=[M[0]/_[0],M[1]/_[1]],L=a,I=[0,0],H=pe(R[0]*R[1]),W=!a&&!n&&s;if(W||u?L=Tu(e,r.targetAllTransform,[0,0],[0,0],r):a||(L=r.fixedPosition),s||(I=ex(e,R,h,!l&&o,r)),y){C[0]&&C[1]&&I[0]&&I[1]&&(Math.abs(I[0]*f)>Math.abs(I[1]*d)?I[1]=0:I[0]=0);var z=!I[0]&&!I[1];if(z&&(g?R[0]=yt(R[0]*_[0],S)/_[0]:R[1]=yt(R[1]*_[1],S)/_[1]),C[0]&&!C[1]||I[0]&&!I[1]||z&&g){R[0]+=I[0];var Y=f*R[0]*_[0]/m;R[1]=pe(H*R[0])*U(Y/d/_[1])}else if(!C[0]&&C[1]||!I[0]&&I[1]||z&&!g){R[1]+=I[1];var K=d*R[1]*_[1]*m;R[0]=pe(H*R[1])*U(K/f/_[0])}}else R[0]+=I[0],R[1]+=I[1],I[0]||(R[0]=yt(R[0]*_[0],S)/_[0]),I[1]||(R[1]=yt(R[1]*_[1],S)/_[1]);R[0]===0&&(R[0]=pe(c[0])*gs),R[1]===0&&(R[1]=pe(c[1])*gs),M=sx(R,[_[0],_[1]]);var G=[f,d],tt=[f*M[0],d*M[1]];tt=yd(tt,r.minScaleSize,r.maxScaleSize,y?m:!1),M=No(2,function(it){return G[it]?tt[it]/G[it]:tt[it]}),R=No(2,function(it){return M[it]/_[it]});var st=No(2,function(it){return c[it]?R[it]/c[it]:R[it]}),et="scale(".concat(R.join(", "),")"),nt="scale(".concat(M.join(", "),")"),Z=ro(r,nt,et),ot=!v[0]||!v[1],ct=eb(e,ot?nt:et,r.fixedDirection,L,r.fixedOffset,r,ot),gt=W?ct:pt(ct,r.prevInverseDist||[0,0]);if(r.prevDist=R,r.prevInverseDist=ct,M[0]===c[0]&&M[1]===c[1]&&gt.every(function(it){return!it})&&!x&&!W)return!1;var Ct=xt(e,t,D({offsetWidth:f,offsetHeight:d,direction:h,scale:M,dist:R,delta:st,isPinch:!!s},lp(e,Z,gt,s,t)));return ut(e,"onScale",Ct),Ct},dragControlEnd:function(e,t){var r=t.datas;if(!r.isScale)return!1;r.isScale=!1;var i=Ae(e,t,{});return ut(e,"onScaleEnd",i),i},dragGroupControlCondition:Rh,dragGroupControlStart:function(e,t){var r=t.datas,i=this.dragControlStart(e,t);if(!i)return!1;var n=Je(e,"resizable",t);r.moveableScale=e.scale;var s=br(e,this,"dragControlStart",t,function(u,c){return aa(e,u,r,c)}),a=function(u){i.setFixedDirection(u),s.forEach(function(c,h){c.setFixedDirection(u),aa(e,c.moveable,r,n[h])})};r.setFixedDirection=a;var o=D(D({},i),{targets:e.props.targets,events:s,setFixedDirection:a}),l=ut(e,"onScaleGroupStart",o);return r.isScale=l!==!1,r.isScale?o:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isScale){uo(e,"onBeforeScale",function(c){ut(e,"onBeforeScaleGroup",xt(e,t,D(D({},c),{targets:e.props.targets}),!0))});var i=this.dragControl(e,t);if(i){var n=i.dist,s=r.moveableScale;e.scale=[n[0]*s[0],n[1]*s[1]];var a=e.props.keepRatio,o=r.fixedPosition,l=br(e,this,"dragControl",t,function(c,h){var f=T(ue(Jn(e.rotation/180*Math.PI,3),[h.datas.originalX*n[0],h.datas.originalY*n[1],1],3),2),d=f[0],p=f[1];return D(D({},h),{parentDist:null,parentScale:n,parentKeepRatio:a,dragClient:kt(o,[d,p])})}),u=D({targets:e.props.targets,events:l},i);return ut(e,"onScaleGroup",u),u}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,i=t.datas;if(i.isScale){this.dragControlEnd(e,t);var n=br(e,this,"dragControlEnd",t),s=Ae(e,t,{targets:e.props.targets,events:n});return ut(e,"onScaleGroupEnd",s),r}},request:function(){var e={},t=0,r=0,i=!1;return{isControl:!0,requestStart:function(n){return i=n.useSnap,{datas:e,parentDirection:n.direction||[1,1],useSnap:i}},request:function(n){return t+=n.deltaWidth,r+=n.deltaHeight,{datas:e,parentDist:[t,r],parentKeepRatio:n.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}}};function kr(e,t){return e.map(function(r,i){return ea(r,t[i],1,2)})}function Ah(e,t,r){var i=Wt(e,t),n=Wt(e,r),s=n-i;return s>=0?s:s+2*Math.PI}function Ex(e,t){var r=Ah(e[0],e[1],e[2]),i=Ah(t[0],t[1],t[2]),n=Math.PI;return!(r>=n&&i<=n||r<=n&&i>=n)}var kx={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Gu("warpable"),render:function(e,t){var r=e.props,i=r.resizable,n=r.scalable,s=r.warpable,a=r.zoom;if(i||n||!s)return[];var o=e.state,l=o.pos1,u=o.pos2,c=o.pos3,h=o.pos4,f=kr(l,u),d=kr(u,l),p=kr(l,c),v=kr(c,l),g=kr(c,h),m=kr(h,c),b=kr(u,h),S=kr(h,u);return Q([t.createElement("div",{className:dt("line"),key:"middeLine1",style:sn(f,g,a)}),t.createElement("div",{className:dt("line"),key:"middeLine2",style:sn(d,m,a)}),t.createElement("div",{className:dt("line"),key:"middeLine3",style:sn(p,b,a)}),t.createElement("div",{className:dt("line"),key:"middeLine4",style:sn(v,S,a)})],T(vp(e,"warpable",t)),!1)},dragControlCondition:function(e,t){if(t.isRequest)return!1;var r=t.inputEvent.target;return qt(r,dt("direction"))&&qt(r,dt("warpable"))},dragControlStart:function(e,t){var r=t.datas,i=t.inputEvent,n=e.props.target,s=i.target,a=Wp(s,r);if(!a||!n)return!1;var o=e.state,l=o.transformOrigin,u=o.is3d,c=o.targetTransform,h=o.targetMatrix,f=o.width,d=o.height,p=o.left,v=o.top;r.datas={},r.targetTransform=c,r.warpTargetMatrix=u?h:Qe(h,3,4),r.targetInverseMatrix=Vd(cr(r.warpTargetMatrix,4),3,4),r.direction=a,r.left=p,r.top=v,r.poses=[[0,0],[f,0],[0,d],[f,d]].map(function(b){return pt(b,l)}),r.nextPoses=r.poses.map(function(b){var S=T(b,2),x=S[0],C=S[1];return ue(r.warpTargetMatrix,[x,C,0,1],4)}),r.startValue=It(4),r.prevMatrix=It(4),r.absolutePoses=ze(o),r.posIndexes=op(a),li(e,t),no(e,t,"matrix3d"),o.snapRenderInfo={request:t.isRequest,direction:a};var g=xt(e,t,D({set:function(b){r.startValue=b}},io(e,t))),m=ut(e,"onWarpStart",g);return m!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(e,t){var r=t.datas,i=t.isRequest,n=t.distX,s=t.distY,a=r.targetInverseMatrix,o=r.prevMatrix,l=r.isWarp,u=r.startValue,c=r.poses,h=r.posIndexes,f=r.absolutePoses;if(!l)return!1;if(eo(e,t,"matrix3d"),Ji(e,"warpable")){var d=h.map(function(E){return f[E]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=oo(e,i,{horizontal:d.map(function(E){return E[1]+s}),vertical:d.map(function(E){return E[0]+n})}),v=p.horizontal,g=p.vertical;s-=v.offset,n-=g.offset}var m=fr({datas:r,distX:n,distY:s},!0),b=r.nextPoses.slice();if(h.forEach(function(E){b[E]=kt(b[E],m)}),!$1.every(function(E){return Ex(E.map(function(M){return c[M]}),E.map(function(M){return b[M]}))}))return!1;var S=_u(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!S.length)return!1;var x=Rt(a,S,4),C=sp(r,x,!0),y=Rt(cr(o,4),C,4);r.prevMatrix=C;var w=Rt(u,C,4),_=ro(r,"matrix3d(".concat(w.join(", "),")"),"matrix3d(".concat(C.join(", "),")"));return Du(t,_),ut(e,"onWarp",xt(e,t,D({delta:y,matrix:w,dist:C,multiply:Rt,transform:_},ge({transform:_},t)))),!0},dragControlEnd:function(e,t){var r=t.datas,i=t.isDrag;return r.isWarp?(r.isWarp=!1,ut(e,"onWarpEnd",Ae(e,t,{})),i):!1}},Mx=dt("area-pieces"),Cs=dt("area-piece"),qp=dt("avoid"),Px=dt("view-dragging");function Go(e){var t=e.areaElement;if(t){var r=e.state,i=r.width,n=r.height;Cd(t,qp),t.style.cssText+="left: 0px; top: 0px; width: ".concat(i,"px; height: ").concat(n,"px")}}function Oh(e){return e.createElement("div",{key:"area_pieces",className:Mx},e.createElement("div",{className:Cs}),e.createElement("div",{className:Cs}),e.createElement("div",{className:Cs}),e.createElement("div",{className:Cs}))}var Kp={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(e,t){var r=e.props,i=r.target,n=r.dragArea,s=r.groupable,a=r.passDragArea,o=e.getState(),l=o.width,u=o.height,c=o.renderPoses,h=a?dt("area","pass"):dt("area");if(s)return[t.createElement("div",{key:"area",ref:mr(e,"areaElement"),className:h}),Oh(t)];if(!i||!n)return[];var f=_u([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),d=f.length?lo(f,!0):"none";return[t.createElement("div",{key:"area",ref:mr(e,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:d}}),Oh(t)]},dragStart:function(e,t){var r=t.datas,i=t.clientX,n=t.clientY,s=t.inputEvent;if(!s)return!1;r.isDragArea=!1;var a=e.areaElement,o=e.state,l=o.moveableClientRect,u=o.renderPoses,c=o.rootMatrix,h=o.is3d,f=l.left,d=l.top,p=Le(u),v=p.left,g=p.top,m=p.width,b=p.height,S=h?4:3,x=T(Wi(c,[i-f,n-d],S),2),C=x[0],y=x[1];C-=v,y-=g;var w=[{left:v,top:g,width:m,height:y-10},{left:v,top:g,width:C-10,height:b},{left:v,top:g+y+10,width:m,height:b-y-10},{left:v+C+10,top:g,width:m-C-10,height:b}],_=[].slice.call(a.nextElementSibling.children);w.forEach(function(E,M){_[M].style.cssText="left: ".concat(E.left,"px;top: ").concat(E.top,"px; width: ").concat(E.width,"px; height: ").concat(E.height,"px;")}),Sd(a,qp),o.disableNativeEvent=!0},drag:function(e,t){var r=t.datas,i=t.inputEvent;if(this.enableNativeEvent(e),!i)return!1;r.isDragArea||(r.isDragArea=!0,Go(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var r=t.inputEvent,i=t.datas;if(!r)return!1;i.isDragArea||Go(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){Go(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&md(function(){t.disableNativeEvent=!1})}},Dx=Qn("origin",{props:["origin","svgOrigin"],render:function(e,t){var r=e.props,i=r.zoom,n=r.svgOrigin,s=r.groupable,a=e.getState(),o=a.beforeOrigin,l=a.rotation,u=a.svg,c=a.allMatrix,h=a.is3d,f=a.left,d=a.top,p=a.offsetWidth,v=a.offsetHeight,g;if(!s&&u&&n){var m=T(Vu(n,p,v),2),b=m[0],S=m[1],x=h?4:3,C=Nt(c,[b,S],x);g=ca(l,i,pt(C,[f,d]))}else g=ca(l,i,o);return[t.createElement("div",{className:dt("control","origin"),style:g,key:"beforeOrigin"})]}});function Tx(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var Rx={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(e,t){var r=e.props,i=r.scrollContainer,n=i===void 0?e.getContainer():i,s=r.scrollOptions,a=new c1,o=ur(n,!0);t.datas.dragScroll=a,e.state.dragScroll=a;var l=t.isControl?"controlGesto":"targetGesto",u=t.targets;a.on("scroll",function(c){var h=c.container,f=c.direction,d=xt(e,t,{scrollContainer:h,direction:f}),p=u?"onScrollGroup":"onScroll";u&&(d.targets=u),ut(e,p,d)}).on("move",function(c){var h=c.offsetX,f=c.offsetY,d=c.inputEvent;e[l].scrollBy(h,f,d.inputEvent,!1)}).on("scrollDrag",function(c){var h=c.next;h(e[l].getCurrentEvent())}),a.dragStart(t,D({container:o},s))},checkScroll:function(e,t){var r=t.datas.dragScroll;if(r){var i=e.props,n=i.scrollContainer,s=n===void 0?e.getContainer():n,a=i.scrollThreshold,o=a===void 0?0:a,l=i.scrollThrottleTime,u=l===void 0?0:l,c=i.getScrollPosition,h=c===void 0?Tx:c,f=i.scrollOptions;return r.drag(t,D({container:s,threshold:o,throttleTime:u,getScrollPosition:function(d){return h({scrollContainer:d.container,direction:d.direction})}},f)),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,D(D({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,D(D({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,D(D({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,D(D({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,D(D({},t),{targets:e.props.targets,isControl:!0}))},dragGroupControl:function(e,t){return this.drag(e,D(D({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,D(D({},t),{targets:e.props.targets}))},unset:function(e){var t,r=e.state;(t=r.dragScroll)===null||t===void 0||t.dragEnd(),r.dragScroll=null}},Jp={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},Ax=Qn("padding",{props:["padding"],render:function(e,t){var r=e.props;if(r.dragArea)return[];var i=Yp(r.padding||{}),n=i.left,s=i.top,a=i.right,o=i.bottom,l=e.getState(),u=l.renderPoses,c=l.pos1,h=l.pos2,f=l.pos3,d=l.pos4,p=[c,h,f,d],v=[];return n>0&&v.push([0,2]),s>0&&v.push([0,1]),a>0&&v.push([1,3]),o>0&&v.push([2,3]),v.map(function(g,m){var b=T(g,2),S=b[0],x=b[1],C=p[S],y=p[x],w=u[S],_=u[x],E=_u([0,0],[100,0],[0,100],[100,100],C,y,w,_);if(E.length)return t.createElement("div",{key:"padding".concat(m),className:dt("padding"),style:{transform:lo(E,!0)}})})}}),Bh=["nw","ne","se","sw"];function ws(e,t){var r=e[0]+e[1],i=r>t?t/r:1;return e[0]*=i,e[1]=t-e[1]*i,e}var Ox=[1,2,5,6],Bx=[0,3,4,7],Xr=[1,-1,-1,1],Ur=[1,1,-1,-1];function ju(e,t,r,i,n,s,a,o){n===void 0&&(n=0),s===void 0&&(s=0),a===void 0&&(a=r),o===void 0&&(o=i);var l=[],u=!1,c=e.filter(function(f){return!f.virtual}),h=c.map(function(f){var d=f.horizontal,p=f.vertical,v=f.pos;if(p&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,p===1?v[1]-s:o-v[1]);return l.push($e(g,i,t)),g}else{var g=Math.max(0,d===1?v[0]-n:a-v[0]);return l.push($e(g,r,t)),g}});return{radiusPoses:c,styles:l,raws:h}}function Zp(e){for(var t=[0,0],r=[0,0],i=e.length,n=0;n<i;++n){var s=e[n];s.sub&&(s.horizontal&&(t[1]===0&&(t[0]=n),t[1]=n-t[0]+1,r[0]=n+1),s.vertical&&(r[1]===0&&(r[0]=n),r[1]=n-r[0]+1))}return{horizontalRange:t,verticalRange:r}}function Qp(e,t,r,i,n,s,a){var o,l,u,c;s===void 0&&(s=[0,0]),a===void 0&&(a=!1);var h=e.indexOf("/"),f=(h>-1?e.slice(0,h):e).length,d=e.slice(0,f),p=e.slice(f+1),v=d.length,g=p.length,m=g>0,b=T(d,4),S=b[0],x=S===void 0?"0px":S,C=b[1],y=C===void 0?x:C,w=b[2],_=w===void 0?x:w,E=b[3],M=E===void 0?y:E,O=T(p,4),A=O[0],R=A===void 0?x:A,L=O[1],I=L===void 0?m?R:y:L,H=O[2],W=H===void 0?m?R:_:H,z=O[3],Y=z===void 0?m?I:M:z,K=[x,y,_,M].map(function(Z){return Tt(Z,t)}),G=[R,I,W,Y].map(function(Z){return Tt(Z,r)}),tt=K.slice(),st=G.slice();o=T(ws([tt[0],tt[1]],t),2),tt[0]=o[0],tt[1]=o[1],l=T(ws([tt[3],tt[2]],t),2),tt[3]=l[0],tt[2]=l[1],u=T(ws([st[0],st[3]],r),2),st[0]=u[0],st[3]=u[1],c=T(ws([st[1],st[2]],r),2),st[1]=c[0],st[2]=c[1];var et=a?tt:tt.slice(0,Math.max(s[0],v)),nt=a?st:st.slice(0,Math.max(s[1],g));return Q(Q([],T(et.map(function(Z,ot){var ct=Bh[ot];return{virtual:ot>=v,horizontal:Xr[ot],vertical:0,pos:[i+Z,n+(Ur[ot]===-1?r:0)],sub:!0,raw:K[ot],direction:ct}})),!1),T(nt.map(function(Z,ot){var ct=Bh[ot];return{virtual:ot>=g,horizontal:0,vertical:Ur[ot],pos:[i+(Xr[ot]===-1?t:0),n+Z],sub:!0,raw:G[ot],direction:ct}})),!1)}function Ix(e,t,r,i,n){n===void 0&&(n=t.length);var s=Zp(e.slice(i)),a=s.horizontalRange,o=s.verticalRange,l=r-i,u=0;if(l===0)u=n;else if(l>0&&l<a[1])u=a[1]-l;else if(l>=o[0])u=o[0]+o[1]-l;else return;e.splice(r,u),t.splice(r,u)}function Lx(e,t,r,i,n,s,a,o,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var h=Zp(e.slice(r)),f=h.horizontalRange,d=h.verticalRange;if(i>-1)for(var p=Xr[i]===1?s-u:o-s,v=f[1];v<=i;++v){var g=Ur[v]===1?c:l,m=0;if(i===v?m=s:v===0?m=u+p:Xr[v]===-1&&(m=o-(t[r][0]-u)),e.splice(r+v,0,{horizontal:Xr[v],vertical:0,pos:[m,g]}),t.splice(r+v,0,[m,g]),v===0)break}else if(n>-1){var b=Ur[n]===1?a-c:l-a;if(f[1]===0&&d[1]===0){var S=[u+b,c];e.push({horizontal:Xr[0],vertical:0,pos:S}),t.push(S)}for(var x=d[0],v=d[1];v<=n;++v){var m=Xr[v]===1?u:o,g=0;if(n===v?g=a:v===0?g=c+b:Ur[v]===1?g=t[r+x][1]:Ur[v]===-1&&(g=l-(t[r+x][1]-c)),e.push({horizontal:0,vertical:Ur[v],pos:[m,g]}),t.push([m,g]),v===0)break}}}function Fx(e,t){t===void 0&&(t=e.map(function(n){return n.raw}));var r=e.map(function(n,s){return n.horizontal?t[s]:null}).filter(function(n){return n!=null}),i=e.map(function(n,s){return n.vertical?t[s]:null}).filter(function(n){return n!=null});return{horizontals:r,verticals:i}}var zx=[[0,-1,"n"],[1,0,"e"]],Nx=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function $u(e,t,r){var i=e.props.clipRelative,n=e.state,s=n.width,a=n.height,o=t,l=o.type,u=o.poses,c=l==="rect",h=l==="circle";if(l==="polygon")return r.map(function(y){return"".concat($e(y[0],s,i)," ").concat($e(y[1],a,i))});if(c||l==="inset"){var f=r[1][1],d=r[3][0],p=r[7][0],v=r[5][1];if(c)return[f,d,v,p].map(function(y){return"".concat(y,"px")});var g=[f,s-d,a-v,p].map(function(y,w){return $e(y,w%2?s:a,i)});if(r.length>8){var m=T(pt(r[4],r[0]),2),b=m[0],S=m[1];g.push.apply(g,Q(["round"],T(ju(u.slice(8).map(function(y,w){return D(D({},y),{pos:r[w]})}),i,b,S,p,f,d,v).styles),!1))}return g}else if(h||l==="ellipse"){var x=r[0],C=$e(U(r[1][1]-x[1]),h?Math.sqrt((s*s+a*a)/2):a,i),g=h?[C]:[$e(U(r[2][0]-x[0]),s,i),C];return g.push("at",$e(x[0],s,i),$e(x[1],a,i)),g}}function fa(e,t,r,i){var n=[i,(i+t)/2,t],s=[e,(e+r)/2,r];return Nx.map(function(a){var o=T(a,3),l=o[0],u=o[1],c=o[2],h=n[l+1],f=s[u+1];return{vertical:U(u),horizontal:U(l),direction:c,pos:[h,f]}})}function tv(e){var t=[1/0,-1/0],r=[1/0,-1/0];return e.forEach(function(i){var n=i.pos;t[0]=Math.min(t[0],n[0]),t[1]=Math.max(t[1],n[0]),r[0]=Math.min(r[0],n[1]),r[1]=Math.max(r[1],n[1])}),[U(t[1]-t[0]),U(r[1]-r[0])]}function Ih(e,t,r,i,n){var s,a,o,l,u,c,h,f,d;if(e){var p=n;if(!p){var v=Me(e),g=v("clipPath");p=g!=="none"?g:v("clip")}if(!((!p||p==="none"||p==="auto")&&(p=i,!p))){var m=gd(p),b=m.prefix,S=b===void 0?p:b,x=m.value,C=x===void 0?"":x,y=S==="circle",w=" ";if(S==="polygon"){var _=Kr(C||"0% 0%, 100% 0%, 100% 100%, 0% 100%");w=",";var E=_.map(function(q){var X=T(q.split(" "),2),rt=X[0],lt=X[1];return{vertical:1,horizontal:1,pos:[Tt(rt,t),Tt(lt,r)]}}),M=ii(E.map(function(q){return q.pos}));return{type:S,clipText:p,poses:E,splitter:w,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(y||S==="ellipse"){var O="",A="",R=0,L=0,_=Fr(C);if(y){var I="";s=T(_,4),a=s[0],I=a===void 0?"50%":a,o=s[2],O=o===void 0?"50%":o,l=s[3],A=l===void 0?"50%":l,R=Tt(I,Math.sqrt((t*t+r*r)/2)),L=R}else{var H="",W="";u=T(_,5),c=u[0],H=c===void 0?"50%":c,h=u[1],W=h===void 0?"50%":h,f=u[3],O=f===void 0?"50%":f,d=u[4],A=d===void 0?"50%":d,R=Tt(H,t),L=Tt(W,r)}var z=[Tt(O,t),Tt(A,r)],E=Q([{vertical:1,horizontal:1,pos:z,direction:"nesw"}],T(zx.slice(0,y?1:2).map(function(rt){return{vertical:U(rt[1]),horizontal:rt[0],direction:rt[2],sub:!0,pos:[z[0]+rt[0]*R,z[1]+rt[1]*L]}})),!1);return{type:S,clipText:p,radiusX:R,radiusY:L,left:z[0]-R,top:z[1]-L,right:z[0]+R,bottom:z[1]+L,poses:E,splitter:w}}else if(S==="inset"){var _=Fr(C||"0 0 0 0"),Y=_.indexOf("round"),K=(Y>-1?_.slice(0,Y):_).length,G=_.slice(K+1),tt=T(_.slice(0,K),4),st=tt[0],et=tt[1],nt=et===void 0?st:et,Z=tt[2],ot=Z===void 0?st:Z,ct=tt[3],gt=ct===void 0?nt:ct,Ct=T([st,ot].map(function(rt){return Tt(rt,r)}),2),it=Ct[0],ht=Ct[1],k=T([gt,nt].map(function(rt){return Tt(rt,t)}),2),P=k[0],B=k[1],F=t-B,N=r-ht,$=Qp(G,F-P,N-it,P,it),E=Q(Q([],T(fa(it,F,N,P)),!1),T($),!1);return{type:"inset",clipText:p,poses:E,top:it,left:P,right:F,bottom:N,radius:G,splitter:w}}else if(S==="rect"){var _=Kr(C||"0px, ".concat(t,"px, ").concat(r,"px, 0px"));w=",";var j=T(_.map(function(vt){var mt=Xn(vt).value;return mt}),4),V=j[0],B=j[1],ht=j[2],P=j[3],E=fa(V,B,ht,P);return{type:"rect",clipText:p,poses:E,top:V,right:B,bottom:ht,left:P,values:_,splitter:w}}}}}function Gx(e,t,r,i,n){var s=e[t],a=s.direction,o=s.sub,l=e.map(function(){return[0,0]}),u=a?a.split(""):[];if(i&&t<8){var c=u.filter(function(R){return R==="w"||R==="e"}),h=u.filter(function(R){return R==="n"||R==="s"}),f=c[0],d=h[0];l[t]=r;var p=T(tv(e),2),v=p[0],g=p[1],m=v&&g?v/g:0;if(m&&n){var b=(t+4)%8,S=e[b].pos,x=[0,0];a.indexOf("w")>-1?x[0]=-1:a.indexOf("e")>-1&&(x[0]=1),a.indexOf("n")>-1?x[1]=-1:a.indexOf("s")>-1&&(x[1]=1);var C=$p([v,g],r,m,x,!0),y=v+C[0],w=g+C[1],_=S[1],E=S[1],M=S[0],O=S[0];x[0]===-1?M=O-y:x[0]===1?O=M+y:(M=M-y/2,O=O+y/2),x[1]===-1?_=E-w:(x[1]===1||(_=E-w/2),E=_+w);var A=fa(_,O,E,M);e.forEach(function(R,L){l[L][0]=A[L].pos[0]-R.pos[0],l[L][1]=A[L].pos[1]-R.pos[1]})}else e.forEach(function(R,L){var I=R.direction;I&&(I.indexOf(f)>-1&&(l[L][0]=r[0]),I.indexOf(d)>-1&&(l[L][1]=r[1]))}),f&&(l[1][0]=r[0]/2,l[5][0]=r[0]/2),d&&(l[3][1]=r[1]/2,l[7][1]=r[1]/2)}else a&&!o?u.forEach(function(R){var L=R==="n"||R==="s";e.forEach(function(I,H){var W=I.direction,z=I.horizontal,Y=I.vertical;!W||W.indexOf(R)===-1||(l[H]=[L||!z?0:r[0],!L||!Y?0:r[1]])})}):l[t]=r;return l}function Wx(e,t){var r=T(np(e,t),2),i=r[0],n=r[1],s=t.datas,a=s.clipPath,o=s.clipIndex,l=a,u=l.type,c=l.poses,h=l.splitter,f=c.map(function(b){return b.pos});if(u==="polygon")f.splice(o,0,[i,n]);else if(u==="inset"){var d=Ox.indexOf(o),p=Bx.indexOf(o),v=c.length;if(Lx(c,f,8,d,p,i,n,f[4][0],f[4][1],f[0][0],f[0][1]),v===c.length)return}else return;var g=$u(e,a,f),m="".concat(u,"(").concat(g.join(h),")");ut(e,"onClip",xt(e,t,D({clipEventType:"added",clipType:u,poses:f,clipStyles:g,clipStyle:m,distX:0,distY:0},ge({clipPath:m},t))))}function Hx(e,t){var r=t.datas,i=r.clipPath,n=r.clipIndex,s=i,a=s.type,o=s.poses,l=s.splitter,u=o.map(function(d){return d.pos}),c=u.length;if(a==="polygon")o.splice(n,1),u.splice(n,1);else if(a==="inset"){if(n<8||(Ix(o,u,n,8,c),c===o.length))return}else return;var h=$u(e,i,u),f="".concat(a,"(").concat(h.join(l),")");ut(e,"onClip",xt(e,t,D({clipEventType:"removed",clipType:a,poses:u,clipStyles:h,clipStyle:f,distX:0,distY:0},ge({clipPath:f},t))))}var Vx={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(e,t){var r=e.props,i=r.customClipPath,n=r.defaultClipPath,s=r.clipArea,a=r.zoom,o=r.groupable,l=e.getState(),u=l.target,c=l.width,h=l.height,f=l.allMatrix,d=l.is3d,p=l.left,v=l.top,g=l.pos1,m=l.pos2,b=l.pos3,S=l.pos4,x=l.clipPathState,C=l.snapBoundInfos,y=l.rotation;if(!u||o)return[];var w=Ih(u,c,h,n||"inset",x||i);if(!w)return[];var _=d?4:3,E=w.type,M=w.poses,O=M.map(function(B){var F=Nt(f,B.pos,_);return[F[0]-p,F[1]-v]}),A=[],R=[],L=E==="rect",I=E==="inset",H=E==="polygon";if(L||I||H){var W=I?O.slice(0,8):O;R=W.map(function(B,F){var N=F===0?W[W.length-1]:W[F-1],$=Wt(N,B),j=Lp(N,B);return t.createElement("div",{key:"clipLine".concat(F),className:dt("line","clip-line","snap-control"),"data-clip-index":F,style:{width:"".concat(j,"px"),transform:"translate(".concat(N[0],"px, ").concat(N[1],"px) rotate(").concat($,"rad) scaleY(").concat(a,")")}})})}if(A=O.map(function(B,F){return t.createElement("div",{key:"clipControl".concat(F),className:dt("control","clip-control","snap-control"),"data-clip-index":F,style:{transform:"translate(".concat(B[0],"px, ").concat(B[1],"px) rotate(").concat(y,"rad) scale(").concat(a,")")}})}),I&&A.push.apply(A,Q([],T(O.slice(8).map(function(B,F){return t.createElement("div",{key:"clipRadiusControl".concat(F),className:dt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+F,style:{transform:"translate(".concat(B[0],"px, ").concat(B[1],"px) rotate(").concat(y,"rad) scale(").concat(a,")")}})})),!1)),E==="circle"||E==="ellipse"){var z=w.left,Y=w.top,K=w.radiusX,G=w.radiusY,tt=T(pt(Nt(f,[z,Y],_),Nt(f,[0,0],_)),2),st=tt[0],et=tt[1],nt="none";if(!s){for(var Z=Math.max(10,K/5,G/5),ot=[],ct=0;ct<=Z;++ct){var gt=Math.PI*2/Z*ct;ot.push([K+(K-a)*Math.cos(gt),G+(G-a)*Math.sin(gt)])}ot.push([K,-2]),ot.push([-2,-2]),ot.push([-2,G*2+2]),ot.push([K*2+2,G*2+2]),ot.push([K*2+2,-2]),ot.push([K,-2]),nt="polygon(".concat(ot.map(function(B){return"".concat(B[0],"px ").concat(B[1],"px")}).join(", "),")")}A.push(t.createElement("div",{key:"clipEllipse",className:dt("clip-ellipse","snap-control"),style:{width:"".concat(K*2,"px"),height:"".concat(G*2,"px"),clipPath:nt,transform:"translate(".concat(-p+st,"px, ").concat(-v+et,"px) ").concat(lo(f))}}))}if(s){var Ct=Le(Q([g,m,b,S],T(O),!1)),it=Ct.width,ht=Ct.height,k=Ct.left,P=Ct.top;if(H||L||I){var ot=I?O.slice(0,8):O;A.push(t.createElement("div",{key:"clipArea",className:dt("clip-area","snap-control"),style:{width:"".concat(it,"px"),height:"".concat(ht,"px"),transform:"translate(".concat(k,"px, ").concat(P,"px)"),clipPath:"polygon(".concat(ot.map(function(F){return"".concat(F[0]-k,"px ").concat(F[1]-P,"px")}).join(", "),")")}}))}}return C&&["vertical","horizontal"].forEach(function(B){var F=C[B],N=B==="horizontal";F.isSnap&&R.push.apply(R,Q([],T(F.snap.posInfos.map(function($,j){var V=$.pos,q=pt(Nt(f,N?[0,V]:[V,0],_),[p,v]),X=pt(Nt(f,N?[c,V]:[V,h],_),[p,v]);return Ln(t,"",q,X,a,"clip".concat(B,"snap").concat(j),"guideline")})),!1)),F.isBound&&R.push.apply(R,Q([],T(F.bounds.map(function($,j){var V=$.pos,q=pt(Nt(f,N?[0,V]:[V,0],_),[p,v]),X=pt(Nt(f,N?[c,V]:[V,h],_),[p,v]);return Ln(t,"",q,X,a,"clip".concat(B,"bounds").concat(j),"guideline","bounds","bold")})),!1))}),Q(Q([],T(A),!1),T(R),!1)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var r=e.props,i=r.dragWithClip,n=i===void 0?!0:i;return n?!1:this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,D(D({},t),{isDragTarget:!0}))},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var r=e.state,i=e.props,n=i.defaultClipPath,s=i.customClipPath,a=r.target,o=r.width,l=r.height,u=t.inputEvent?t.inputEvent.target:null,c=u&&u.getAttribute("class")||"",h=t.datas,f=Ih(a,o,l,n||"inset",s);if(!f)return!1;var d=f.clipText,p=f.type,v=f.poses,g=ut(e,"onClipStart",xt(e,t,{clipType:p,clipStyle:d,poses:v.map(function(m){return m.pos})}));return g===!1?(h.isClipStart=!1,!1):(h.isControl=c&&c.indexOf("clip-control")>-1,h.isLine=c.indexOf("clip-line")>-1,h.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,h.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,h.clipPath=f,h.isClipStart=!0,r.clipPathState=d,li(e,t),!0)},dragControl:function(e,t){var r,i,n,s=t.datas,a=t.originalDatas,o=t.isDragTarget;if(!s.isClipStart)return!1;var l=s,u=l.isControl,c=l.isLine,h=l.isArea,f=l.clipIndex,d=l.clipPath;if(!d)return!1;var p=ni(e.props,"clippable"),v=p.keepRatio,g=0,m=0,b=a.draggable,S=fr(t);o&&b?(r=T(b.prevBeforeDist,2),g=r[0],m=r[1]):(i=T(S,2),g=i[0],m=i[1]);var x=[g,m],C=e.state,y=C.width,w=C.height,_=!h&&!u&&!c,E=d.type,M=d.poses,O=d.splitter,A=M.map(function(Ot){return Ot.pos});_&&(g=-g,m=-m);var R=!u||M[f].direction==="nesw",L=E==="inset"||E==="rect",I=M.map(function(){return[0,0]});if(u&&!R){var H=M[f],W=H.horizontal,z=H.vertical,Y=[g*U(W),m*U(z)];I=Gx(M,f,Y,L,v)}else R&&(I=A.map(function(){return[g,m]}));var K=A.map(function(Ot,he){return kt(Ot,I[he])}),G=Q([],T(K),!1);C.snapBoundInfos=null;var tt=d.type==="circle",st=d.type==="ellipse";if(tt||st){var et=Le(K),nt=U(et.bottom-et.top),Z=U(st?et.right-et.left:nt),ot=K[0][1]+nt,ct=K[0][0]-Z,gt=K[0][0]+Z;tt&&(G.push([gt,et.bottom]),I.push([1,0])),G.push([et.left,ot]),I.push([0,1]),G.push([ct,et.bottom]),I.push([1,0])}var Ct=Tp((p.clipHorizontalGuidelines||[]).map(function(Ot){return Tt("".concat(Ot),w)}),(p.clipVerticalGuidelines||[]).map(function(Ot){return Tt("".concat(Ot),y)}),y,w),it=[],ht=[];if(tt||st)it=[G[4][0],G[2][0]],ht=[G[1][1],G[3][1]];else if(L){var k=[G[0],G[2],G[4],G[6]],P=[I[0],I[2],I[4],I[6]];it=k.filter(function(Ot,he){return P[he][0]}).map(function(Ot){return Ot[0]}),ht=k.filter(function(Ot,he){return P[he][1]}).map(function(Ot){return Ot[1]})}else it=G.filter(function(Ot,he){return I[he][0]}).map(function(Ot){return Ot[0]}),ht=G.filter(function(Ot,he){return I[he][1]}).map(function(Ot){return Ot[1]});var B=[0,0],F=bh(Ct,p.clipTargetBounds&&{left:0,top:0,right:y,bottom:w},it,ht,5,5),N=F.horizontal,$=F.vertical,j=N.offset,V=$.offset;if(N.isBound&&(B[1]+=j),$.isBound&&(B[0]+=V),(st||tt)&&I[0][0]===0&&I[0][1]===0){var et=Le(K),q=et.bottom-et.top,X=st?et.right-et.left:q,rt=$.isBound?U(V):$.snapIndex===0?-V:V,lt=N.isBound?U(j):N.snapIndex===0?-j:j;X-=rt,q-=lt,tt&&(q=Cp($,N)>0?q:X,X=q);var at=G[0];G[1][1]=at[1]-q,G[2][0]=at[0]+X,G[3][1]=at[1]+q,G[4][0]=at[0]-X}else if(L&&v&&u){var vt=T(tv(M),2),mt=vt[0],Mt=vt[1],At=mt&&Mt?mt/Mt:0,Ht=M[f],se=Ht.direction||"",tr=G[1][1],ot=G[5][1],ct=G[7][0],gt=G[3][0];U(j)<=U(V)?j=pe(j)*U(V)/At:V=pe(V)*U(j)*At,se.indexOf("w")>-1?ct-=V:se.indexOf("e")>-1?gt-=V:(ct+=V/2,gt-=V/2),se.indexOf("n")>-1?tr-=j:se.indexOf("s")>-1?ot-=j:(tr+=j/2,ot-=j/2);var rs=fa(tr,gt,ot,ct);G.forEach(function(cc,$v){var po;po=T(rs[$v].pos,2),cc[0]=po[0],cc[1]=po[1]})}else G.forEach(function(Ot,he){var uc=I[he];uc[0]&&(Ot[0]-=V),uc[1]&&(Ot[1]-=j)});var _r=$u(e,d,K),ci="".concat(E,"(").concat(_r.join(O),")");if(C.clipPathState=ci,tt||st)it=[G[4][0],G[2][0]],ht=[G[1][1],G[3][1]];else if(L){var k=[G[0],G[2],G[4],G[6]];it=k.map(function(he){return he[0]}),ht=k.map(function(he){return he[1]})}else it=G.map(function(Ot){return Ot[0]}),ht=G.map(function(Ot){return Ot[1]});if(C.snapBoundInfos=bh(Ct,p.clipTargetBounds&&{left:0,top:0,right:y,bottom:w},it,ht,1,1),b){var ce=C.is3d,Oe=C.allMatrix,is=ce?4:3,fo=B;o&&(fo=[x[0]+B[0]-S[0],x[1]+B[1]-S[1]]),b.deltaOffset=Rt(Oe,[fo[0],fo[1],0,0],is)}return ut(e,"onClip",xt(e,t,D({clipEventType:"changed",clipType:E,poses:K,clipStyle:ci,clipStyles:_r,distX:g,distY:m},ge((n={},n[E==="rect"?"clip":"clipPath"]=ci,n),t)))),!0},dragControlEnd:function(e,t){this.unset(e);var r=t.isDrag,i=t.datas,n=t.isDouble,s=i.isLine,a=i.isClipStart,o=i.isControl;return a?(ut(e,"onClipEnd",Ae(e,t,{})),n&&(o?Hx(e,t):s&&Wx(e,t)),n||r):!1},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},jx={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(e,t){return t.isRequest?t.requestAble==="originDraggable":qt(t.inputEvent.target,dt("origin"))},dragControlStart:function(e,t){var r=t.datas;li(e,t);var i=xt(e,t,{dragStart:de.dragStart(e,new zi().dragStart([0,0],t))}),n=ut(e,"onDragOriginStart",i);return r.startOrigin=e.state.transformOrigin,r.startTargetOrigin=e.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,n===!1?(r.isDragOrigin=!1,!1):i},dragControl:function(e,t){var r=t.datas,i=t.isPinch,n=t.isRequest;if(!r.isDragOrigin)return!1;var s=T(fr(t),2),a=s[0],o=s[1],l=e.state,u=l.width,c=l.height,h=l.offsetMatrix,f=l.targetMatrix,d=l.is3d,p=e.props.originRelative,v=p===void 0?!0:p,g=d?4:3,m=[a,o];if(n){var b=t.distOrigin;(b[0]||b[1])&&(m=b)}var S=kt(r.startOrigin,m),x=kt(r.startTargetOrigin,m),C=pt(m,r.prevOrigin),y=es(h,f,S,g),w=e.getRect(),_=Le(ui(y,u,c,g)),E=[w.left-_.left,w.top-_.top];r.prevOrigin=m;var M=[$e(x[0],u,v),$e(x[1],c,v)].join(" "),O=de.drag(e,ts(t,e.state,E,!!i)),A=xt(e,t,D(D({width:u,height:c,origin:S,dist:m,delta:C,transformOrigin:M,drag:O},ge({transformOrigin:M,transform:O.transform},t)),{afterTransform:O.transform}));return ut(e,"onDragOrigin",A),A},dragControlEnd:function(e,t){var r=t.datas;return r.isDragOrigin?(ut(e,"onDragOriginEnd",Ae(e,t,{})),!0):!1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);return!!r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);return r?(e.transformOrigin=r.transformOrigin,!0):!1},request:function(e){var t={},r=e.getRect(),i=0,n=0,s=r.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(o){return"deltaOrigin"in o?(a[0]+=o.deltaOrigin[0],a[1]+=o.deltaOrigin[1]):"origin"in o?(a[0]=o.origin[0]-s[0],a[1]=o.origin[1]-s[1]):("x"in o?i=o.x-r.left:"deltaX"in o&&(i+=o.deltaX),"y"in o?n=o.y-r.top:"deltaY"in o&&(n+=o.deltaY)),{datas:t,distX:i,distY:n,distOrigin:a}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function $x(e,t,r,i){var n=e.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,s=e.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,a=-1;if(t===0&&(n===0?a=0:n===1&&(a=1)),t===2&&(n<=2?a=2:n<=3&&(a=3)),t===3&&(s===0?a=4:s<4&&(a=7)),t===1&&(s<=1?a=5:s<=2&&(a=6)),!(a===-1||!e[a].virtual)){var o=e[a];Xx(e,a),a<4?o.pos[0]=r:o.pos[1]=i}}function Xx(e,t){t<4?e.slice(0,t+1).forEach(function(r){r.virtual=!1}):(e[0].virtual&&(e[0].virtual=!1),e.slice(4,t+1).forEach(function(r){r.virtual=!1}))}function Ux(e,t){t<4?e.slice(t,4).forEach(function(r){r.virtual=!0}):e.slice(t).forEach(function(r){r.virtual=!0})}function Lh(e,t,r,i,n){i===void 0&&(i=[0,0]);var s=[];return!e||e==="0px"?s=[]:s=Fr(e),Qp(s,t,r,0,0,i,n)}function Fh(e,t,r,i,n){var s=e.state,a=s.width,o=s.height,l=ju(n,e.props.roundRelative,a,o),u=l.raws,c=l.styles,h=l.radiusPoses,f=Fx(h,u),d=f.horizontals,p=f.verticals,v=c.join(" ");s.borderRadiusState=v;var g=xt(e,t,D({horizontals:d,verticals:p,borderRadius:v,width:a,height:o,delta:i,dist:r},ge({borderRadius:v},t)));return ut(e,"onRound",g),g}function zh(e){var t,r,i=e.getState().style,n=i.borderRadius||"";if(!n&&e.props.groupable){var s=e.moveables[0],a=e.getTargets()[0];a&&((s==null?void 0:s.props.target)===a?(n=(r=(t=e.moveables[0])===null||t===void 0?void 0:t.state.style.borderRadius)!==null&&r!==void 0?r:"",i.borderRadius=n):(n=Nu(a).borderRadius,i.borderRadius=n))}return n}var Yx={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(e){var t=e.props.roundClickable;return t===!0||t==="line"?dt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(e,t){var r=e.getState(),i=r.target,n=r.width,s=r.height,a=r.allMatrix,o=r.is3d,l=r.left,u=r.top,c=r.borderRadiusState,h=e.props,f=h.minRoundControls,d=f===void 0?[0,0]:f,p=h.maxRoundControls,v=p===void 0?[4,4]:p,g=h.zoom,m=h.roundPadding,b=m===void 0?0:m,S=h.isDisplayShadowRoundControls,x=h.groupable;if(!i)return null;var C=c||zh(e),y=o?4:3,w=Lh(C,n,s,d,!0);if(!w)return null;var _=0,E=0,M=x?[0,0]:[l,u];return w.map(function(O,A){var R=O.horizontal,L=O.vertical,I=O.direction||"",H=Q([],T(O.pos),!1);E+=Math.abs(R),_+=Math.abs(L),R&&I.indexOf("n")>-1&&(H[1]-=b),L&&I.indexOf("w")>-1&&(H[0]-=b),R&&I.indexOf("s")>-1&&(H[1]+=b),L&&I.indexOf("e")>-1&&(H[0]+=b);var W=pt(Nt(a,H,y),M),z=S&&S!=="horizontal",Y=O.vertical?_<=v[1]&&(z||!O.virtual):E<=v[0]&&(S||!O.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(A),className:dt("control","border-radius",O.vertical?"vertical":"",O.virtual?"virtual":""),"data-radius-index":A,style:{display:Y?"block":"none",transform:"translate(".concat(W[0],"px, ").concat(W[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var r=t.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragControlStart:function(e,t){var r=t.inputEvent,i=t.datas,n=r.target,s=n.getAttribute("class")||"",a=s.indexOf("border-radius")>-1,o=s.indexOf("moveable-line")>-1&&s.indexOf("moveable-direction")>-1,l=a?parseInt(n.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var c=n.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!a&&!o)return!1;var h=xt(e,t,{}),f=ut(e,"onRoundStart",h);if(f===!1)return!1;i.lineIndex=u,i.controlIndex=l,i.isControl=a,i.isLine=o,li(e,t);var d=e.props,p=d.roundRelative,v=d.minRoundControls,g=v===void 0?[0,0]:v,m=e.state,b=m.width,S=m.height;i.isRound=!0,i.prevDist=[0,0];var x=zh(e),C=Lh(x||"",b,S,g,!0)||[];return i.controlPoses=C,m.borderRadiusState=ju(C,p,b,S).styles.join(" "),h},dragControl:function(e,t){var r=t.datas,i=r.controlPoses;if(!r.isRound||!r.isControl||!i.length)return!1;var n=r.controlIndex,s=T(fr(t),2),a=s[0],o=s[1],l=[a,o],u=pt(l,r.prevDist),c=e.props.maxRoundControls,h=c===void 0?[4,4]:c,f=e.state,d=f.width,p=f.height,v=i[n],g=v.vertical,m=v.horizontal,b=i.map(function(x){var C=x.horizontal,y=x.vertical,w=[C*m*l[0],y*g*l[1]];if(C){if(h[0]===1)return w;if(h[0]<4&&C!==m)return w}else{if(h[1]===0)return w[1]=y*m*l[0]/d*p,w;if(g){if(h[1]===1)return w;if(h[1]<4&&y!==g)return w}}return[0,0]});b[n]=l;var S=i.map(function(x,C){return D(D({},x),{pos:kt(x.pos,b[C])})});return n<4?S.slice(0,n+1).forEach(function(x){x.virtual=!1}):S.slice(4,n+1).forEach(function(x){x.virtual=!1}),r.prevDist=[a,o],Fh(e,t,l,u,S)},dragControlEnd:function(e,t){var r=e.state;r.borderRadiusState="";var i=t.datas,n=t.isDouble;if(!i.isRound)return!1;var s=i.isControl,a=i.controlIndex,o=i.isLine,l=i.lineIndex,u=i.controlPoses,c=u.filter(function(m){var b=m.virtual;return b}).length,h=e.props.roundClickable,f=h===void 0?!0:h;if(n&&f){if(s&&(f===!0||f==="control"))Ux(u,a);else if(o&&(f===!0||f==="line")){var d=T(np(e,t),2),p=d[0],v=d[1];$x(u,l,p,v)}c!==u.filter(function(m){var b=m.virtual;return b}).length&&Fh(e,t,[0,0],[0,0],u)}var g=Ae(e,t,{});return ut(e,"onRoundEnd",g),r.borderRadiusState="",g},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);if(!r)return!1;var i=e.moveables,n=e.props.targets,s=Je(e,"roundable",t),a=D({targets:e.props.targets,events:s.map(function(o,l){return D(D({},o),{target:n[l],moveable:i[l],currentTarget:i[l]})})},r);return ut(e,"onRoundGroupStart",a),r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);if(!r)return!1;var i=e.moveables,n=e.props.targets,s=Je(e,"roundable",t),a=D({targets:e.props.targets,events:s.map(function(o,l){return D(D(D({},o),{target:n[l],moveable:i[l],currentTarget:i[l]}),ge({borderRadius:r.borderRadius},o))})},r);return ut(e,"onRoundGroup",a),a},dragGroupControlEnd:function(e,t){var r=e.moveables,i=e.props.targets,n=Je(e,"roundable",t);uo(e,"onRound",function(o){var l=D({targets:e.props.targets,events:n.map(function(u,c){return D(D(D({},u),{target:i[c],moveable:r[c],currentTarget:r[c]}),ge({borderRadius:o.borderRadius},u))})},o);ut(e,"onRoundGroup",l)});var s=this.dragControlEnd(e,t);if(!s)return!1;var a=D({targets:e.props.targets,events:n.map(function(o,l){var u;return D(D({},o),{target:i[l],moveable:r[l],currentTarget:r[l],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},s);return ut(e,"onRoundGroupEnd",a),a},unset:function(e){e.state.borderRadiusState=""}};function qx(e,t){var r=t?4:3,i=It(r),n="matrix".concat(t?"3d":"","(").concat(i.join(","),")");return e===n||e==="matrix(1,0,0,1,0,0)"}var ev={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(e,t){var r=e.state,i=r.is3d,n=r.targetMatrix,s=r.inlineTransform,a=i?"matrix3d(".concat(n.join(","),")"):"matrix(".concat($d(n,!0),")"),o=!s||s==="none"?a:s;t.datas.startTransforms=qx(o,i)?[]:Fr(o)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return xt(e,t,{setTransform:function(r){t.datas.startTransforms=$t(r)?r:Fr(r)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return xt(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),ut(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){t.datas.startTransforms||this.setTransform(e,t),this.resetStyle(t),ut(e,"onBeforeRender",xt(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t.datas.startTransforms||(this.setTransform(e,t),this.resetStyle(t)),ut(e,"onBeforeRenderEnd",xt(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var r=this;this.dragStart(e,t);var i=Je(e,"beforeRenderable",t),n=e.moveables,s=i.map(function(a,o){var l=n[o];return r.setTransform(l,a),r.resetStyle(a),r.fillDragStartParams(l,a)});ut(e,"onBeforeRenderGroupStart",xt(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:s}))},dragGroup:function(e,t){var r=this;this.drag(e,t);var i=Je(e,"beforeRenderable",t),n=e.moveables,s=i.map(function(a,o){var l=n[o];return r.resetStyle(a),r.fillDragParams(l,a)});ut(e,"onBeforeRenderGroup",xt(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:s}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),ut(e,"onBeforeRenderGroupEnd",xt(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},rv={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(e,t){ut(e,"onRenderStart",xt(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){ut(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){return this.drag(e,t)},dragEnd:function(e,t){ut(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){ut(e,"onRenderGroupStart",xt(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var r=this,i=Je(e,"beforeRenderable",t),n=e.moveables,s=i.map(function(a,o){var l=n[o];return r.fillDragParams(l,a)});ut(e,"onRenderGroup",xt(e,t,D(D({isPinch:!!t.isPinch,targets:e.props.targets,transform:ms(t),transformObject:{}},ge(ys(t))),{events:s})))},dragGroupEnd:function(e,t){var r=this,i=Je(e,"beforeRenderable",t),n=e.moveables,s=i.map(function(a,o){var l=n[o];return r.fillDragEndParams(l,a)});ut(e,"onRenderGroupEnd",xt(e,t,D({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:s,transformObject:{},transform:ms(t)},ge(ys(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){var r={};return Fi(sa(t)||[]).forEach(function(i){r[i.name]=i.functionValue}),xt(e,t,D({isPinch:!!t.isPinch,transformObject:r,transform:ms(t)},ge(ys(t))))},fillDragEndParams:function(e,t){var r={};return Fi(sa(t)||[]).forEach(function(i){r[i.name]=i.functionValue}),xt(e,t,D({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:r,transform:ms(t)},ge(ys(t))))}};function En(e,t,r,i,n,s,a){s.clientDistX=s.distX,s.clientDistY=s.distY;var o=n==="Start",l=n==="End",u=n==="After",c=e.state.target,h=s.isRequest,f=i.indexOf("Control")>-1;if(!c||o&&f&&!h&&e.areaElement===s.inputEvent.target)return!1;var d=Q([],T(t),!1);if(h){var p=s.requestAble;d.some(function(A){return A.name===p})||d.push.apply(d,Q([],T(e.props.ables.filter(function(A){return A.name===p})),!1))}if(!d.length||d.every(function(A){return A.dragRelation}))return!1;var v=s.inputEvent,g;l&&v&&(g=document.elementFromPoint(s.clientX,s.clientY)||v.target);var m=!1,b=function(){var A;m=!0,(A=s.stop)===null||A===void 0||A.call(s)},S=o&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());S&&e.updateRect(n,!0,!1);var x=s.datas,C=f?"controlGesto":"targetGesto",y=e[C],w=function(A,R,L){if(!(R in A)||y!==e[C])return!1;var I=A.name,H=x[I]||(x[I]={});if(o&&(H.isEventStart=!L||!A[L]||A[L](e,s)),!H.isEventStart)return!1;var W=A[R](e,D(D({},s),{stop:b,datas:H,originalDatas:x,inputTarget:g}));return e._emitter.off(),o&&W===!1&&(H.isEventStart=!1),W};S&&d.forEach(function(A){A.unset&&A.unset(e)}),w(ev,"drag".concat(i).concat(n));var _=0,E=0;r.forEach(function(A){if(m)return!1;var R="".concat(A).concat(i).concat(n),L="".concat(A).concat(i,"Condition");n===""&&!h&&yx(e.state,s);var I=d.filter(function(z){return z[R]});I=I.filter(function(z,Y){return z.name&&I.indexOf(z)===Y});var H=I.filter(function(z){return w(z,R,L)}),W=H.length;m&&++_,W&&++E,!m&&o&&I.length&&!W&&(_+=I.filter(function(z){var Y=z.name,K=x[Y];return K.isEventStart?z.dragRelation!=="strong":!1}).length?1:0)}),(!u||E)&&w(rv,"drag".concat(i).concat(n));var M=y!==e[C]||_===r.length;if((l||m||M)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(A){A.state.gestos={}}),d.forEach(function(A){A.unset&&A.unset(e)})),o&&!M&&!h&&E&&e.props.preventDefault&&(s==null||s.preventDefault()),e.isUnmounted||M)return!1;if(!o&&E&&!a||l){var O=e.props.flushSync||Op;O(function(){e.updateRect(l?n:"",!0,!1),e.forceUpdate()})}return!o&&!l&&!u&&E&&!a&&En(e,t,r,i,n+"After",s),!0}function Xu(e,t){return function(r,i){var n;i===void 0&&(i=r.inputEvent.target);var s=i,a=e.areaElement,o=e._dragTarget;return!o||!t&&(!((n=e.controlGesto)===null||n===void 0)&&n.isFlag())?!1:s===o||o.contains(s)||s===a||!e.isMoveableElement(s)&&!e.controlBox.contains(s)||qt(s,"moveable-area")||qt(s,"moveable-padding")||qt(s,"moveable-edgeDraggable")}}function iv(e,t,r){var i=e.controlBox,n=[],s=e.props,a=s.dragArea,o=e.state.target,l=s.dragTarget;n.push(i),(!a||l)&&n.push(t),!a&&l&&o&&t!==o&&s.dragTargetSelf&&n.push(o);var u=Xu(e);return sv(e,n,"targetAbles",r,{dragStart:u,pinchStart:u})}function nv(e,t){var r=e.controlBox,i=[];i.push(r);var n=Xu(e,!0),s=function(a,o){if(o===void 0&&(o=a.inputEvent.target),o===r)return!0;var l=n(a,o);return!l};return sv(e,i,"controlAbles",t,{dragStart:s,pinchStart:s})}function sv(e,t,r,i,n){n===void 0&&(n={});var s=r==="targetAbles",a=e.props,o=a.pinchOutside,l=a.pinchThreshold,u=a.preventClickEventOnDrag,c=a.preventClickDefault,h=a.checkInput,f=a.dragFocusedInput,d=a.preventDefault,p=d===void 0?!0:d,v=a.preventRightClick,g=v===void 0?!0:v,m=a.preventWheelClick,b=m===void 0?!0:m,S=a.dragContainer,x=ur(S,!0),C={preventDefault:p,preventRightClick:g,preventWheelClick:b,container:x||Ir(e.getControlBoxElement()),pinchThreshold:l,pinchOutside:o,preventClickEventOnDrag:s?u:!1,preventClickEventOnDragStart:s?c:!1,preventClickEventByCondition:s?null:function(_){return e.controlBox.contains(_.target)},checkInput:s?h:!1,dragFocusedInput:f},y=new C1(t,C),w=i==="Control";return["drag","pinch"].forEach(function(_){["Start","","End"].forEach(function(E){y.on("".concat(_).concat(E),function(M){var O,A=M.eventType,R=_==="drag"&&M.isPinch;if(n[A]&&!n[A](M)){M.stop();return}if(!R){var L=_==="drag"?[_]:["drag",_],I=Q([],T(e[r]),!1),H=En(e,I,L,i,E,M);H?(e.props.stopPropagation||E==="Start"&&w)&&((O=M==null?void 0:M.inputEvent)===null||O===void 0||O.stopPropagation()):M.stop()}})})}),y}var Kx=function(){function e(t,r,i){var n=this;this.target=t,this.moveable=r,this.eventName=i,this.ables=[],this._onEvent=function(s){var a=n.eventName,o=n.moveable;o.state.disableNativeEvent||n.ables.forEach(function(l){l[a](o,{inputEvent:s})})},t.addEventListener(i.toLowerCase(),this._onEvent)}return e.prototype.setAbles=function(t){this.ables=t},e.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e}();function Jx(e,t,r,i){var n;r===void 0&&(r=t);var s=cp(e,t),a=s.matrixes,o=s.is3d,l=s.targetMatrix,u=s.transformOrigin,c=s.targetOrigin,h=s.offsetContainer,f=s.hasFixed,d=s.zoom,p=hb(h,r),v=p.matrixes,g=p.is3d,m=p.offsetContainer,b=p.zoom,S=i,x=4,C=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,y=l,w=It(x),_=It(x),E=It(x),M=It(x),O=a.length,A=v.map(function(Y){return D(D({},Y),{matrix:Y.matrix?Q([],T(Y.matrix),!1):void 0})}).reverse();a.reverse(),!o&&S&&(y=Qe(y,3,4),Ml(a)),!g&&S&&Ml(A),A.forEach(function(Y){_=Rt(_,Y.matrix,x)});var R=r||Gr(e),L=((n=A[0])===null||n===void 0?void 0:n.target)||Fn(R,R,!0).offsetParent,I=A.slice(1).reduce(function(Y,K){return Rt(Y,K.matrix,x)},It(x));a.forEach(function(Y,K){if(O-2===K&&(E=w.slice()),O-1===K&&(M=w.slice()),!Y.matrix){var G=a[K+1],tt=px(Y,G,L,x,Rt(I,w,x));Y.matrix=ri(tt,x)}w=Rt(w,Y.matrix,x)});var H=!C&&o;y||(y=It(H?4:3));var W=lo(C&&y.length===16?Qe(y,4,3):y,H),z=_;return _=Vd(_,x,x),{hasZoom:d!==1||b!==1,hasFixed:f,matrixes:a,rootMatrix:_,originalRootMatrix:z,beforeMatrix:E,offsetMatrix:M,allMatrix:w,targetMatrix:y,targetTransform:W,inlineTransform:e.style.transform,transformOrigin:u,targetOrigin:c,is3d:S,offsetContainer:h,offsetRootContainer:m}}function Zx(e,t,r,i){r===void 0&&(r=t);var n=0,s=0,a=0,o={},l=Fp(e);if(e&&(n=l.offsetWidth,s=l.offsetHeight),e){var u=Jx(e,t,r,i),c=Pi(u.allMatrix,u.transformOrigin,n,s);o=D(D({},u),c);var h=Pi(u.allMatrix,[50,50],100,100);a=zp([h.pos1,h.pos2],h.direction)}var f=4;return D(D(D({hasZoom:!1,width:n,height:s,rotation:a},l),{originalRootMatrix:It(f),rootMatrix:It(f),beforeMatrix:It(f),offsetMatrix:It(f),allMatrix:It(f),targetMatrix:It(f),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!i,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function Rl(e,t,r,i,n,s){s===void 0&&(s=[]);var a=1,o=[0,0],l=xs(),u=xs(),c=xs(),h=xs(),f=[0,0],d={},p=Zx(t,r,n,!0);if(t){var v=Me(t);s.forEach(function(A){d[A]=v(A)});var g=p.is3d?4:3,m=Pi(p.offsetMatrix,kt(p.transformOrigin,jd(p.targetMatrix,g)),p.width,p.height);a=m.direction,o=kt(m.origin,[m.left-p.left,m.top-p.top]),h=_n(p.offsetRootContainer);var b=Fn(i,i,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var S=Pi(Rt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),x=Pi(p.originalRootMatrix,ua(Me(b)("transformOrigin")).map(function(A){return parseFloat(A)}),b.offsetWidth,b.offsetHeight);if(l=zo(S,h),c=zo(x,h,b,!0),e){var C=S.left,y=S.top;u=zo({left:C,top:y,bottom:y,right:y},h)}}else{l=_n(t),c=cb(b),e&&(u=_n(e));var w=c.left,_=c.top,E=c.clientLeft,M=c.clientTop,O=[l.left-w,l.top-_];f=pt(Wi(p.rootMatrix,O,4),[E+p.left,M+p.top])}}return D({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:h,beforeDirection:a,beforeOrigin:o,originalBeforeOrigin:o,target:t,style:d,offsetDelta:f},p)}function Nh(e){var t=e.pos1,r=e.pos2,i=e.pos3,n=e.pos4;if(!t||!r||!i||!n)return null;var s=ii([t,r,i,n]),a=[s.minX,s.minY],o=pt(e.origin,a);return t=pt(t,a),r=pt(r,a),i=pt(i,a),n=pt(n,a),D(D({},e),{left:e.left,top:e.top,posDelta:a,pos1:t,pos2:r,pos3:i,pos4:n,origin:o,beforeOrigin:o,isPersisted:!0})}var Hi=function(e){Zn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state=D({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Rl(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new to,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var i=r.props.parentMoveable;if(i){i.checkUpdateRect();return}dy(r._observerId),r._observerId=md(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(i){i.stopPropagation(),i.preventDefault()},r}return t.prototype.render=function(){var r=this.props,i=this.getState(),n=r.parentPosition,s=r.className,a=r.target,o=r.zoom,l=r.cspNonce,u=r.translateZ,c=r.cssStyled,h=r.groupable,f=r.linePadding,d=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=T(n||[0,0],2),v=p[0],g=p[1],m=i.left,b=i.top,S=i.target,x=i.direction,C=i.hasFixed,y=i.offsetDelta,w=r.targets,_=this.isDragging(),E={};this.getEnabledAbles().forEach(function(I){E["data-able-".concat(I.name.toLowerCase())]=!0});var M=this._getAbleClassName(),O=w&&w.length&&(S||h)||a||!this._hasFirstTarget&&this.state.isPersisted,A=this.controlBox||this.props.firstRenderState||this.props.persistData,R=[m-v,b-g];!h&&r.useAccuratePosition&&(R[0]+=y[0],R[1]+=y[1]);var L={position:C?"fixed":"absolute",display:O?"block":"none",visibility:A?"visible":"hidden",transform:"translate3d(".concat(R[0],"px, ").concat(R[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return f&&(L["--moveable-line-padding"]=f),d&&(L["--moveable-control-padding"]=d),Ke(c,D({cspNonce:l,ref:mr(this,"controlBox"),className:"".concat(dt("control-box",x===-1?"reverse":"",_?"dragging":"")," ").concat(M," ").concat(s)},E,{onClick:this._onPreventClick,style:L}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,i=r.parentMoveable,n=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!n&&!i&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},t.prototype.componentWillUnmount=function(){var r,i;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(i=this._mutationObserver)===null||i===void 0||i.disconnect();var n=this._viewContainer;n&&this._changeAbleViewClassNames([]),Si(this,!1),Si(this,!0);var s=this.events;for(var a in s){var o=s[a];o&&o.destroy()}},t.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},t.prototype.getAble=function(r){var i=this.props.ables||[];return ke(i,function(n){return n.name===r})},t.prototype.getContainer=function(){var r=this.props,i=r.parentMoveable,n=r.wrapperMoveable,s=r.container;return s||n&&n.getContainer()||i&&i.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(r){var i;return r&&(((i=r.getAttribute)===null||i===void 0?void 0:i.call(r,"class"))||"").indexOf(Mu)>-1},t.prototype.dragStart=function(r,i){i===void 0&&(i=r.target);var n=this.targetGesto,s=this.controlGesto;return n&&Xu(this)({inputEvent:r},i)?n.isFlag()||n.triggerDragStart(r):s&&this.isMoveableElement(i)&&(s.isFlag()||s.triggerDragStart(r)),this},t.prototype.hitTest=function(r){var i=this.state,n=i.target,s=i.pos1,a=i.pos2,o=i.pos3,l=i.pos4,u=i.targetClientRect;if(!n)return 0;var c;if(Yi(r)){var h=r.getBoundingClientRect();c={left:h.left,top:h.top,width:h.width,height:h.height}}else c=D({width:0,height:0},r);var f=c.left,d=c.top,p=c.width,v=c.height,g=lh([s,a,l,o],u),m=g1(g,[[f,d],[f+p,d],[f+p,d+v],[f,d+v]]),b=Yd(g);return!m||!b?0:Math.min(100,m/b*100)},t.prototype.isInside=function(r,i){var n=this.state,s=n.target,a=n.pos1,o=n.pos2,l=n.pos3,u=n.pos4,c=n.targetClientRect;return s?pl([r,i],lh([a,o,u,l],c)):!1},t.prototype.updateRect=function(r,i,n){n===void 0&&(n=!0);var s=this.props,a=!s.parentPosition&&!s.wrapperMoveable;a&&Ni(!0);var o=s.parentMoveable,l=this.state,u=l.target||s.target,c=this.getContainer(),h=o?o._rootContainer:this._rootContainer,f=Rl(this.controlBox,u,c,c,h||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&s.persistData){var d=Nh(s.persistData);for(var p in d)f[p]=d[p]}a&&Ni(),this.updateState(f,o?!1:n)},t.prototype.isDragging=function(r){var i,n,s=this.targetGesto,a=this.controlGesto;if(s!=null&&s.isFlag()){if(!r)return!0;var o=s.getEventData();return!!(!((i=o[r])===null||i===void 0)&&i.isEventStart)}if(a!=null&&a.isFlag()){if(!r)return!0;var o=a.getEventData();return!!(!((n=o[r])===null||n===void 0)&&n.isEventStart)}return!1},t.prototype.updateTarget=function(r){this.updateRect(r,!0)},t.prototype.getRect=function(){var r=this.state,i=ze(this.state),n=T(i,4),s=n[0],a=n[1],o=n[2],l=n[3],u=Le(i),c=r.width,h=r.height,f=u.width,d=u.height,p=u.left,v=u.top,g=[r.left,r.top],m=kt(g,r.origin),b=kt(g,r.beforeOrigin),S=r.transformOrigin;return{width:f,height:d,left:p,top:v,pos1:s,pos2:a,pos3:o,pos4:l,offsetWidth:c,offsetHeight:h,beforeOrigin:b,origin:m,transformOrigin:S,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(r){if(!r||r==="target"){var i=this.targetGesto;(i==null?void 0:i.isIdle())===!1&&Pl(this,!1),i==null||i.stop()}if(!r||r==="control"){var i=this.controlGesto;(i==null?void 0:i.isIdle())===!1&&Pl(this,!0),i==null||i.stop()}},t.prototype.getRotation=function(){var r=this.state,i=r.pos1,n=r.pos2,s=r.direction;return Sx(i,n,s)},t.prototype.request=function(r,i,n){i===void 0&&(i={});var s=this,a=s.props,o=a.parentMoveable||a.wrapperMoveable||s,l=o.props.ables,u=a.groupable,c=ke(l,function(m){return m.name===r});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var h=c.request(s),f=n||i.isInstant,d=h.isControl?"controlAbles":"targetAbles",p="".concat(u?"Group":"").concat(h.isControl?"Control":""),v=Q([],T(o[d]),!1),g={request:function(m){return En(s,v,["drag"],p,"",D(D({},h.request(m)),{requestAble:r,isRequest:!0}),f),g},requestEnd:function(){return En(s,v,["drag"],p,"End",D(D({},h.requestEnd()),{requestAble:r,isRequest:!0}),f),g}};return En(s,v,["drag"],p,"Start",D(D({},h.requestStart(i)),{requestAble:r,isRequest:!0}),f),f?g.request(i).requestEnd():g},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var r=this.getState(),i=this.props,n=i.padding,s=r.originalBeforeOrigin,a=r.transformOrigin,o=r.allMatrix,l=r.is3d,u=r.pos1,c=r.pos2,h=r.pos3,f=r.pos4,d=r.left,p=r.top,v=r.isPersisted,g=i.zoom||1;if(!n&&g<=1){r.renderPoses=[u,c,h,f],r.renderLines=[[u,c],[c,f],[f,h],[h,u]];return}var m=Yp(n||{}),b=m.left,S=m.top,x=m.bottom,C=m.right,y=l?4:3,w=[];v?w=a:this.controlBox&&i.groupable?w=s:w=kt(s,[d,p]);var _=ia(y,ri(w.map(function(L){return-L}),y),o,ri(a,y)),E=Be(_,u,[-b,-S],y),M=Be(_,c,[C,-S],y),O=Be(_,h,[-b,x],y),A=Be(_,f,[C,x],y);if(r.renderPoses=[E,M,O,A],r.renderLines=[[E,M],[M,A],[A,O],[O,E]],g){var R=g/2;r.renderLines=[[Be(_,u,[-b-R,-S],y),Be(_,c,[C+R,-S],y)],[Be(_,c,[C,-S-R],y),Be(_,f,[C,x+R],y)],[Be(_,f,[C+R,x],y),Be(_,h,[-b-R,x],y)],[Be(_,h,[-b,x+R],y),Be(_,u,[-b,-S-R],y)]]}},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,i=r.target,n=r.container,s=r.parentMoveable,a=this.state,o=a.target,l=a.container;if(!(!o&&!i)){this.updateAbles();var u=!Dl(o,i),c=u||!Dl(l,n);if(c){var h=n||this.controlBox;h&&this.unsetAbles(),this.updateState({target:i,container:n}),!s&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(r,i){var n=this.props;if(this._emitter.trigger(r,i),n.parentMoveable&&i.isRequest&&!i.isRequestChild)return n.parentMoveable.triggerEvent(r,i,!0);var s=n[r];return s&&s(i)},t.prototype.useCSS=function(r,i){var n=this.props.customStyledMap,s=r+i;return n[s]||(n[s]=Jd(r,i)),n[s]},t.prototype.getState=function(){var r,i=this.props;(i.target||!((r=i.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var n=this.controlBox,s=i.persistData,a=i.firstRenderState;if(a&&!n)return a;if(!this._hasFirstTarget&&s){var o=Nh(s);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(i){i.unset&&i.unset(r)})},t.prototype.updateAbles=function(r,i){r===void 0&&(r=this.props.ables),i===void 0&&(i="");var n=this.props,s=n.triggerAblesSimultaneously,a=this.getEnabledAbles(r),o="drag".concat(i,"Start"),l="pinch".concat(i,"Start"),u="drag".concat(i,"ControlStart"),c=Ss(a,[o,l],s),h=Ss(a,[u],s);this.enabledAbles=a,this.targetAbles=c,this.controlAbles=h},t.prototype.updateState=function(r,i){if(i){if(this.isUnmounted)return;this.setState(r)}else{var n=this.state;for(var s in r)n[s]=r[s]}},t.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var i=this.props;return r.filter(function(n){return n&&(n.always&&i[n.name]!==!1||i[n.name])})},t.prototype.renderAbles=function(){var r=this,i=this.props,n=i.triggerAblesSimultaneously,s={createElement:Ke};return this.renderState={},mx(jp(Ss(this.getEnabledAbles(),["render"],n).map(function(a){var o=a.render;return o(r,s)||[]})).filter(function(a){return a}),function(a){var o=a.key;return o}).map(function(a){return a[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(i,n){var s,a,o=(a=(s=n.requestStyle)===null||s===void 0?void 0:s.call(n))!==null&&a!==void 0?a:[];return Q(Q([],T(i),!1),T(o),!1)},Q([],T(this.props.requestStyles||[]),!1));return r},t.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},t.prototype._updateEvents=function(){var r=this.targetAbles.length,i=this.controlAbles.length,n=this._dragTarget,s=!r&&this.targetGesto||this._isTargetChanged(!0);s&&(Si(this,!1),this.updateState({gestos:{}})),i||Si(this,!0),n&&r&&!this.targetGesto&&(this.targetGesto=iv(this,n,"")),!this.controlGesto&&i&&(this.controlGesto=nv(this,"Control"))},t.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=ur(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var r=this.props,i=r,n=i.zoom,s=i.hideDefaultLines,a=i.hideChildMoveableDefaultLines,o=i.parentMoveable;if(s||o&&a)return[];var l=this.getState(),u={createElement:Ke};return l.renderLines.map(function(c,h){return Ln(u,"",c[0],c[1],n,"render-line-".concat(h))})},t.prototype._isTargetChanged=function(r){var i=this.props,n=i.dragTarget||i.target,s=this._prevOriginalDragTarget,a=this._prevDragArea,o=i.dragArea,l=!o&&s!==n,u=(r||o)&&a!==o;return l||u||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var r=this,i=this.props,n=i.dragArea?this.areaElement:this.state.target,s=this.events,a=Sr(s);if(this._isTargetChanged())for(var o in s){var l=s[o];l&&l.destroy(),s[o]=null}if(n){var u=this.enabledAbles;a.forEach(function(c){var h=Ss(u,[c]),f=h.length>0,d=s[c];if(!f){d&&(d.destroy(),s[c]=null);return}d||(d=new Kx(n,r,c),s[c]=d),d.setAbles(h)})}},t.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=ur(r,!0))},t.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=ur(r,!0));var i=this._viewContainer;i&&this._changeAbleViewClassNames(Q(Q([],T(this._getAbleViewClassNames()),!1),[this.isDragging()?Px:""],!1))},t.prototype._changeAbleViewClassNames=function(r){var i=this._viewContainer,n=Vp(r.filter(Boolean),function(u){return u}).map(function(u){var c=T(u,1),h=c[0];return h}),s=this._viewClassNames,a=Un(s,n),o=a.removed,l=a.added;o.forEach(function(u){Cd(i,s[u])}),l.forEach(function(u){Sd(i,n[u])}),this._viewClassNames=n},t.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(i){var n;return((n=i.viewClassName)===null||n===void 0?void 0:n.call(i,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(r){var i=this;r===void 0&&(r="");var n=this.getEnabledAbles(),s=this.targetGesto,a=this.controlGesto,o=s!=null&&s.isFlag()?s.getEventData():{},l=a!=null&&a.isFlag()?a.getEventData():{};return n.map(function(u){var c,h,f,d=u.name,p=((c=u.className)===null||c===void 0?void 0:c.call(u,i))||"";return(!((h=o[d])===null||h===void 0)&&h.isEventStart||!((f=l[d])===null||f===void 0)&&f.isEventStart)&&(p+=" ".concat(dt("".concat(d).concat(r,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(r){var i,n=this.props,s=n.target,a=Ir(this.getControlBoxElement());if(!a.ResizeObserver||!s||!n.useResizeObserver){(i=this._reiszeObserver)===null||i===void 0||i.disconnect();return}if(!(r.target===s&&this._reiszeObserver)){var o=new a.ResizeObserver(this.checkUpdateRect);o.observe(s,{box:"border-box"}),this._reiszeObserver=o}},t.prototype._updateMutationObserver=function(r){var i=this,n,s=this.props,a=s.target,o=Ir(this.getControlBoxElement());if(!o.MutationObserver||!a||!s.useMutationObserver){(n=this._mutationObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===a&&this._mutationObserver)){var l=new o.MutationObserver(function(u){var c,h;try{for(var f=O1(u),d=f.next();!d.done;d=f.next()){var p=d.value;p.type==="attributes"&&p.attributeName==="style"&&i.checkUpdateRect()}}catch(v){c={error:v}}finally{try{d&&!d.done&&(h=f.return)&&h.call(f)}finally{if(c)throw c.error}}});l.observe(a,{attributes:!0}),this._mutationObserver=l}},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Op,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t}(Dd),Uu={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(e,t){var r,i=e.props,n=i.targets||[],s=e.getState(),a=s.left,o=s.top,l=s.isPersisted,u=i.zoom||1,c=e.renderGroupRects,h=((r=i.persistData)===null||r===void 0?void 0:r.children)||[];l?n=h.map(function(){return null}):h=[];var f=Ci(e,"parentPosition",[a,o],function(p){return p.join(",")}),d=Ci(e,"requestStyles",e.getRequestChildStyles(),function(p){return p.join(",")});return e.moveables=e.moveables.slice(0,n.length),Q(Q([],T(n.map(function(p,v){return t.createElement(Hi,{key:"moveable"+v,ref:dd(e,"moveables",v),target:p,origin:!1,requestStyles:d,cssStyled:i.cssStyled,customStyledMap:i.customStyledMap,useResizeObserver:i.useResizeObserver,useMutationObserver:i.useMutationObserver,hideChildMoveableDefaultLines:i.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:[a,o],persistData:h[v],zoom:u})})),!1),T(jp(c.map(function(p,v){var g=p.pos1,m=p.pos2,b=p.pos3,S=p.pos4,x=[g,m,b,S];return[[0,1],[1,3],[3,2],[2,0]].map(function(C,y){var w=T(C,2),_=w[0],E=w[1];return Ln(t,"",pt(x[_],f),pt(x[E],f),u,"group-rect-".concat(v,"-").concat(y))})}))),!1)}},Qx=Qn("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var r=e.props.target,i=t.inputEvent,n=t.inputTarget,s=e.isMoveableElement(n),a=!s&&e.controlBox.contains(n);if(!(!i||!n||t.isDrag||e.isMoveableElement(n)||a)){var o=r.contains(n);ut(e,"onClick",xt(e,t,{isDouble:t.isDouble,inputTarget:n,isTarget:r===n,moveableTarget:e.props.target,containsTarget:o}))}},dragGroupEnd:function(e,t){var r=t.inputEvent,i=t.inputTarget;if(!(!r||!i||t.isDrag||e.isMoveableElement(i)||t.datas.inputTarget===i)){var n=e.props.targets,s=n.indexOf(i),a=s>-1,o=!1;s===-1&&(s=xr(n,function(l){return l.contains(i)}),o=s>-1),ut(e,"onClickGroup",xt(e,t,{isDouble:t.isDouble,targets:n,inputTarget:i,targetIndex:s,isTarget:a,containsTarget:o,moveableTarget:n[s]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}});function hi(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),D(D({},e),{datas:t})}var tS=Qn("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(e,t){var r=e.props,i=r.edgeDraggable;return i?dp(t,"edgeDraggable",i,e.getState().renderPoses,r.zoom):[]},dragCondition:function(e,t){var r,i=e.props,n=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!i.edgeDraggable||!n?!1:!i.draggable&&qt(n,dt("direction"))&&qt(n,dt("edge"))&&qt(n,dt("edgeDraggable"))},dragStart:function(e,t){return de.dragStart(e,hi(t))},drag:function(e,t){return de.drag(e,hi(t))},dragEnd:function(e,t){return de.dragEnd(e,hi(t))},dragGroupCondition:function(e,t){var r,i=e.props,n=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!i.edgeDraggable||!n?!1:!i.draggable&&qt(n,dt("direction"))&&qt(n,dt("line"))},dragGroupStart:function(e,t){return de.dragGroupStart(e,hi(t))},dragGroup:function(e,t){return de.dragGroup(e,hi(t))},dragGroupEnd:function(e,t){return de.dragGroupEnd(e,hi(t))},unset:function(e){return de.unset(e)}}),av={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Yu=[ev,Jp,nx,wx,de,tS,_l,_x,kx,Gb,Rx,Ax,Dx,jx,Vx,Yx,Uu,av,Qx,Kp,rv],eS=Yu.reduce(function(e,t){return(t.events||[]).forEach(function(r){xd(e,r)}),e},[]),rS=Yu.reduce(function(e,t){return(t.props||[]).forEach(function(r){xd(e,r)}),e},[]);function Gh(e,t){var r=T(e,3),i=r[0],n=r[1],s=r[2];return(i*t[0]+n*t[1]+s)/Math.sqrt(i*i+n*n)}function _s(e,t){var r=T(e,2),i=r[0],n=r[1];return-i*t[0]-n*t[1]}function Wh(e,t){return Math.max.apply(Math,Q([],T(e.map(function(r){var i=T(r,4),n=i[0],s=i[1],a=i[2],o=i[3];return Math.max(n[t],s[t],a[t],o[t])})),!1))}function Hh(e,t){return Math.min.apply(Math,Q([],T(e.map(function(r){var i=T(r,4),n=i[0],s=i[1],a=i[2],o=i[3];return Math.min(n[t],s[t],a[t],o[t])})),!1))}function iS(e,t){var r,i,n,s=[0,0],a=[0,0],o=[0,0],l=[0,0],u=0,c=0;if(!e.length)return{pos1:s,pos2:a,pos3:o,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:t};var h=yt(t,me);if(h%90){var f=h/180*Math.PI,d=Math.tan(f),p=-1/d,v=[xl,hh],g=[[0,0],[0,0]],m=[xl,hh],b=[[0,0],[0,0]];e.forEach(function(st){st.forEach(function(et){var nt=Gh([-d,1,0],et),Z=Gh([-p,1,0],et);v[0]>nt&&(g[0]=et,v[0]=nt),v[1]<nt&&(g[1]=et,v[1]=nt),m[0]>Z&&(b[0]=et,m[0]=Z),m[1]<Z&&(b[1]=et,m[1]=Z)})});var S=T(g,2),x=S[0],C=S[1],y=T(b,2),w=y[0],_=y[1],E=[-d,1,_s([-d,1],x)],M=[-d,1,_s([-d,1],C)],O=[-p,1,_s([-p,1],w)],A=[-p,1,_s([-p,1],_)];r=T([[E,O],[E,A],[M,O],[M,A]].map(function(st){var et=T(st,2),nt=et[0],Z=et[1];return Eu(nt,Z)[0]}),4),s=r[0],a=r[1],o=r[2],l=r[3],u=m[1]-m[0],c=v[1]-v[0]}else{var R=Hh(e,0),L=Hh(e,1),I=Wh(e,0),H=Wh(e,1);if(s=[R,L],a=[I,L],o=[R,H],l=[I,H],u=I-R,c=H-L,h%180){var W=[o,s,l,a];i=T(W,4),s=i[0],a=i[1],o=i[2],l=i[3],u=H-L,c=I-R}}if(h%360>180){var W=[l,o,a,s];n=T(W,4),s=n[0],a=n[1],o=n[2],l=n[3]}var z=ii([s,a,o,l]),Y=z.minX,K=z.minY,G=z.maxX,tt=z.maxY;return{pos1:s,pos2:a,pos3:o,pos4:l,width:u,height:c,minX:Y,minY:K,maxX:G,maxY:tt,rotation:t}}function ov(e,t){var r=t.map(function(i){if($t(i)){var n=ov(e,i),s=n.length;return s>1?n:s===1?n[0]:null}else{var a=ke(e,function(o){var l=o.manager;return l.props.target===i});return a?(a.finded=!0,a.manager):null}}).filter(Boolean);return r.length===1&&$t(r[0])?r[0]:r}var nS=function(e){Zn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.differ=new Ud,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,i,n){var s;n===void 0&&(n=!0);var a=this.state;if(!this.controlBox||a.isPersisted)return;Ni(!0),this.moveables.forEach(function(ct){ct.updateRect(r,!1,!1)});var o=this.props,l=this.moveables,u=a.target||o.target,c=l.map(function(ct){return{finded:!1,manager:ct}}),h=this.props.targetGroups||[],f=ov(c,h),d=o.useDefaultGroupRotate;f.push.apply(f,Q([],T(c.filter(function(ct){var gt=ct.finded;return!gt}).map(function(ct){var gt=ct.manager;return gt})),!1));var p=[],v=!i||r!==""&&o.updateGroup,g=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(s=o.persistData)===null||s===void 0?void 0:s.rotation;m!=null&&(g=m)}function b(ct,gt,Ct){var it=ct.map(function($){if($t($)){var j=b($,gt),V=[j.pos1,j.pos2,j.pos3,j.pos4];return p.push(j),{poses:V,rotation:j.rotation}}else return{poses:ze($.state),rotation:$.getRotation()}}),ht=it.map(function($){var j=$.rotation;return j}),k=0,P=ht[0],B=ht.every(function($){return Math.abs(P-$)<.1});v?k=!d&&B?P:g:k=!d&&!Ct&&B?P:gt;var F=it.map(function($){var j=$.poses;return j}),N=iS(F,k);return N}var S=b(f,this.rotation,!0);v&&(this.rotation=S.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=p;var x=this.transformOrigin,C=this.rotation,y=this.scale,w=S.width,_=S.height,E=S.minX,M=S.minY,O=Cx([[0,0],[w,0],[0,_],[w,_]],Vu(x,w,_),this.rotation/180*Math.PI),A=ii(O.result),R=A.minX,L=A.minY,I=" rotate(".concat(C,"deg)")+" scale(".concat(pe(y[0]),", ").concat(pe(y[1]),")"),H="translate(".concat(-R,"px, ").concat(-L,"px)").concat(I);this.controlBox.style.transform="translate3d(".concat(E,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(x,";")+"width:".concat(w,"px;height:").concat(_,"px;")+"transform: ".concat(H),a.width=w,a.height=_;var W=this.getContainer(),z=Rl(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||W,[]),Y=[z.left,z.top],K=T(ze(z),4),G=K[0],tt=K[1],st=K[2],et=K[3],nt=ii([G,tt,st,et]),Z=[nt.minX,nt.minY],ot=pe(y[0]*y[1]);z.pos1=pt(G,Z),z.pos2=pt(tt,Z),z.pos3=pt(st,Z),z.pos4=pt(et,Z),z.left=E-z.left+Z[0],z.top=M-z.top+Z[1],z.origin=pt(kt(Y,z.origin),Z),z.beforeOrigin=pt(kt(Y,z.beforeOrigin),Z),z.originalBeforeOrigin=kt(Y,z.originalBeforeOrigin),z.transformOrigin=pt(kt(Y,z.transformOrigin),Z),u.style.transform="translate(".concat(-R-Z[0],"px, ").concat(-L-Z[1],"px)")+I,Ni(),this.updateState(D(D({},z),{posDelta:Z,direction:ot,beforeDirection:ot}),n)},t.prototype.getRect=function(){return D(D({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.triggerEvent=function(r,i,n){if(n||r.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,r,i);this._emitter.trigger(r,i)},t.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(i,n){var s,a,o=(a=(s=n.requestChildStyle)===null||s===void 0?void 0:s.call(n))!==null&&a!==void 0?a:[];return Q(Q([],T(i),!1),T(o),!1)},[]);return r},t.prototype.getMoveables=function(){return Q([],T(this.moveables),!1)},t.prototype.updateAbles=function(){e.prototype.updateAbles.call(this,Q(Q([],T(this.props.ables),!1),[Uu],!1),"Group")},t.prototype._updateTargets=function(){e.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=ur(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var r=this.state,i=this.props,n=this._prevDragTarget,s=i.dragTarget||this.areaElement,a=i.targets,o=this.differ.update(a),l=o.added,u=o.changed,c=o.removed,h=l.length||c.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Si(this,!1),Si(this,!0),this.updateState({gestos:{}})),n!==s&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=iv(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=nv(this,"GroupControl")));var f=!Dl(r.container,i.container);f&&(r.container=i.container),(f||h||this.transformOrigin!==(i.defaultGroupOrigin||"50% 50%")||u.length||a.length&&!Up(this._targetGroups,i.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},t.prototype._updateObserver=function(){},t.defaultProps=D(D({},Hi.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(Hi),sS=function(e){Zn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.moveables=[],r}return t.prototype.render=function(){var r=this,i,n=this.props,s=n.cspNonce,a=n.cssStyled,o=n.persistData,l=n.targets||[],u=l.length,c=this.isUnmounted||!u,h=(i=o==null?void 0:o.children)!==null&&i!==void 0?i:[];return c&&!u&&h.length?l=h.map(function(){return null}):c||(h=[]),Ke(a,{cspNonce:s,ref:mr(this,"controlBox"),className:dt("control-box")},l.map(function(f,d){var p,v,g=(v=(p=n.individualGroupableProps)===null||p===void 0?void 0:p.call(n,f,d))!==null&&v!==void 0?v:{};return Ke(Hi,D({key:"moveable"+d,ref:dd(r,"moveables",d)},n,g,{target:f,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:h[d]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,i,n){n===void 0&&(n=!0),Ni(!0),this.moveables.forEach(function(s){s.updateRect(r,i,n)}),Ni()},t.prototype.getRect=function(){return D(D({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.request=function(r,i,n){i===void 0&&(i={});var s=this.moveables.map(function(l){return l.request(r,D(D({},i),{isInstant:!1}),!1)}),a=n||i.isInstant,o={request:function(l){return s.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return s.forEach(function(l){return l.requestEnd()}),this}};return a?o.request(i).requestEnd():o},t.prototype.dragStart=function(r,i){i===void 0&&(i=r.target);var n=i,s=ke(this.moveables,function(a){var o=a.getTargets()[0],l=a.getControlBoxElement(),u=a.getDragElement();return!o||!u?!1:u===n||u.contains(n)||u!==o&&o===n||o.contains(n)||l===n||l.contains(n)});return s&&s.dragStart(r,i),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return Q([],T(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t}(Hi);function lv(e,t){var r=[];return e.forEach(function(i){if(i){if(Ee(i)){t[i]&&r.push.apply(r,Q([],T(t[i]),!1));return}$t(i)?r.push.apply(r,Q([],T(lv(i,t)),!1)):r.push(i)}}),r}function uv(e,t){var r=[];return e.forEach(function(i){if(i){if(Ee(i)){t[i]&&r.push.apply(r,Q([],T(t[i]),!1));return}$t(i)?r.push(uv(i,t)):r.push(i)}}),r}function cv(e,t){return e.length!==t.length||e.some(function(r,i){var n=t[i];return!r&&!n?!1:r!=n?$t(r)&&$t(n)?cv(r,n):!0:!1})}var aS=function(e){Zn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new Ud,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return t.makeStyled=function(){var r={},i=this.getTotalAbles();i.forEach(function(s){var a=s.css;a&&a.forEach(function(o){r[o]=!0})});var n=Sr(r).join(`
`);this.defaultStyled=Jd("div",ey(Mu,j1+n))},t.getTotalAbles=function(){return Q([Jp,Uu,av,Kp],T(this.defaultAbles),!1)},t.prototype.render=function(){var r,i=this.constructor;i.defaultStyled||i.makeStyled();var n=this.props,s=n.ables,a=n.props,o=R1(n,["ables","props"]),l=T(this._updateRefs(!0),2),u=l[0],c=l[1],h=lv(u,c),f=h.length>1,d=i.getTotalAbles(),p=Q(Q([],T(d),!1),T(s||[]),!1),v=D(D(D({},o),a||{}),{ables:p,cssStyled:i.defaultStyled,customStyledMap:i.customStyledMap});this._elementTargets=h;var g=null,m=this.moveable,b=o.persistData;if(b!=null&&b.children&&(f=!0),o.individualGroupable)return Ke(sS,D({key:"individual-group",ref:mr(this,"moveable")},v,{target:null,targets:h}));if(f){var S=uv(u,c);if(m&&!m.props.groupable&&!m.props.individualGroupable){var x=m.props.target;x&&h.indexOf(x)>-1&&(g=D({},m.state))}return Ke(nS,D({key:"group",ref:mr(this,"moveable")},v,(r=o.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:h,targetGroups:S,firstRenderState:g}))}else{var C=h[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var y=m.moveables||[],w=ke(y,function(_){return _.props.target===C});w&&(g=D({},w.state))}return Ke(Hi,D({key:"single",ref:mr(this,"moveable")},v,{target:C,firstRenderState:g}))}},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var r,i;return(i=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&i!==void 0?i:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var r=this,i;return this._onChangeTargets=function(){r._onChangeTargets=null,i()},new Promise(function(n){i=n})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(r){var i=this.refTargets,n=Hu(this.props.target||this.props.targets),s=typeof document<"u",a=cv(i,n),o=this.selectorMap,l={};return this.refTargets.forEach(function u(c){if(Ee(c)){var h=o[c];h?l[c]=o[c]:s&&(a=!0,l[c]=[].slice.call(document.querySelectorAll(c)))}else $t(c)&&c.forEach(u)}),this._tmpRefTargets=n,this._tmpSelectorMap=l,[n,l,!r&&a]},t.prototype._checkChangeTargets=function(){var r,i,n;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var s=this._differ.update(this._elementTargets),a=s.added,o=s.removed,l=a.length||o.length;l&&((i=(r=this.props).onChangeTargets)===null||i===void 0||i.call(r,{moveable:this.moveable,targets:this._elementTargets}),(n=this._onChangeTargets)===null||n===void 0||n.call(this));var u=T(this._updateRefs(),3),c=u[0],h=u[1],f=u[2];this.refTargets=c,this.selectorMap=h,f&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,A1([ry(ip)],t.prototype,"moveable",void 0),t}(Dd),oS=function(e){Zn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultAbles=Yu,t}(aS),Al=function(e,t){return Al=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},Al(e,t)};function qu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Al(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var zn=function(){return zn=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},zn.apply(this,arguments)};function lS(e,t,r,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(n<3?a(s):n>3?a(t,r,s):a(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s}var uS=function(e){qu(t,e);function t(i){var n=e.call(this,i)||this;return n.state={},n.state=n.props,n}var r=t.prototype;return r.render=function(){return Ke(oS,zn({ref:mr(this,"moveable")},this.state))},t}(bu),da=rS,hv=ip,fv=eS,cS=function(e){qu(t,e);function t(i,n){n===void 0&&(n={});var s=e.call(this)||this;s.containerProvider=null,s.selfElement=null,s._warp=!1;var a=zn({},n),o={};fv.forEach(function(c){o[fy("on ".concat(c))]=function(h){return s.trigger(c,h)}});var l;n.warpSelf?(delete n.warpSelf,s._warp=!0,l=i):(l=Ui(i).createElement("div"),i.appendChild(l)),s.containerProvider=sh(Ke(uS,zn({ref:mr(s,"innerMoveable")},a,o)),l),s.selfElement=l;var u=a.target;return $t(u)&&u.length>1&&s.updateRect(),s}var r=t.prototype;return r.setState=function(i,n){this.innerMoveable.setState(i,n)},r.forceUpdate=function(i){this.innerMoveable.forceUpdate(i)},r.dragStart=function(i,n){n===void 0&&(n=i.target);var s=this.innerMoveable;s.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(i,n)},r.destroy=function(){var i,n=this.selfElement;sh(null,n,this.containerProvider),this._warp||(i=n==null?void 0:n.parentElement)===null||i===void 0||i.removeChild(n),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},t=lS([Kc(hv,function(i,n){i[n]||(i[n]=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=this.getMoveable();if(!(!o||!o[n]))return o[n].apply(o,s)})}),Kc(da,function(i,n){Object.defineProperty(i,n,{get:function(){return this.getMoveable().props[n]},set:function(s){var a;this.setState((a={},a[n]=s,a))},enumerable:!0,configurable:!0})})],t),t}(to),hS=function(e){qu(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(cS);const dv={};hv.forEach(e=>{dv[e]=function(...t){return this.$_moveable[e](...t)}});const pv={};da.forEach(e=>{pv[e]=function(t){this.$_moveable[e]=t}});const fS=Kg({name:"moveable",methods:dv,props:da,watch:pv,mounted(){const e={},t=this.$props;da.forEach(s=>{const a=t[s];$n(a)||(e[s]=t[s])});const i=this.$refs.moveableElement,n=new hS(i,{...e,warpSelf:!0});fv.forEach(s=>{n.on(s,a=>{this.$emit(s,{...a})})}),this.$_moveable=n},beforeUnmount(){this.$_moveable.destroy()}}),dS=fS,pS=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},vS={ref:"moveableElement"};function gS(e,t,r,i,n,s){return Yt(),re("div",vS,null,512)}const mS=pS(dS,[["render",gS]]),Vh="/StickerEditor/assets/out11-DOU5pnUw.jpg",yS=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},bS=e=>(Lg("data-v-c9ce5c55"),e=e(),Fg(),e),xS={class:"flex flex-col"},SS={class:"bg-Surface w-[52vw] h-auto flex items-center justify-center rounded-xl p-10 relative"},CS={class:"relative"},wS=["src"],_S=["data-id","onMousedown"],ES=["src"],kS=["onClick"],MS={class:"mt-5 flex items-center justify-center gap-5"},PS=bS(()=>Pt("label",{for:"file-upload",class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh] content-center text-center hover:cursor-pointer"}," Import ",-1)),DS=["href"],TS=1,RS=0,AS=0,OS={__name:"Editor",setup(e,{expose:t}){let r=Se(null),i=Se(null),n=null;const s=lr("selectedImage"),a=lr("savedImages"),o=lr("images"),l=Se([]),u=Se(null),c=x=>{const C=r.value.getBoundingClientRect(),y={id:Date.now(),src:x,style:{position:"absolute",leftPercent:50,topPercent:50,widthPercent:100/C.width*100,heightPercent:100/C.height*100,transform:"translate(-50%, -50%) rotate(0deg) scale(1, 1)"}};l.value.push(y),Bf(()=>{u.value=y.id})},h=({target:x,clientX:C,clientY:y})=>{const w=l.value.find(_=>_.id===parseInt(x.dataset.id));if(w&&r.value){const _=r.value.getBoundingClientRect(),E=x.getBoundingClientRect();let M=C-_.left,O=y-_.top;M=Math.max(E.width/2,Math.min(M,_.width-E.width/2)),O=Math.max(E.height/2,Math.min(O,_.height-E.height/2)),w.style.leftPercent=M/_.width*100,w.style.topPercent=O/_.height*100}},f=x=>{x.target.style.transform=x.drag.transform;const C=l.value.find(y=>y.id===parseInt(x.target.dataset.id));if(C){const y=r.value.getBoundingClientRect(),w=x.target.getBoundingClientRect();C.style.widthPercent=w.width/y.width*100,C.style.heightPercent=w.height/y.height*100}},d=x=>{x.target.style.transform=x.drag.transform;const C=l.value.find(y=>y.id===parseInt(x.target.dataset.id));C&&(C.style.transform=x.drag.transform)},p=x=>{l.value=l.value.filter(C=>C.id!==x),u.value===x&&(u.value=null)},v=()=>{l.value=[],u.value=null},g=x=>{u.value=x},m=()=>new Promise((x,C)=>{if(!r.value){C(new Error("Image reference not found"));return}const y=r.value,w=y.naturalWidth,_=y.naturalHeight,E=document.createElement("canvas"),M=E.getContext("2d");E.width=w,E.height=_;const O=new Image;O.src=y.src,O.onload=()=>{M.drawImage(O,0,0,w,_);const A=(I,H)=>{const W=new Image;W.src=I.src,W.onload=()=>{const z=I.style.leftPercent/100*w,Y=I.style.topPercent/100*_,K=I.style.widthPercent/100*w,G=I.style.heightPercent/100*_,tt=I.style.transform,st=tt.match(/rotate\((.*?)deg\)/),et=st?parseFloat(st[1]):0,nt=tt.match(/scale\((.*?)\)/),Z=nt?parseFloat(nt[1]):1,ot=nt?parseFloat(nt[1]):1,ct=K*Z,gt=G*ot;M.save(),M.translate(z,Y),M.rotate(et*Math.PI/180),M.drawImage(W,-ct/2,-gt/2,ct,gt),M.restore(),H()}};let R=0;const L=l.value.length;if(L===0){x(E.toDataURL("image/png"));return}l.value.forEach(I=>{A(I,()=>{R++,R===L&&x(E.toDataURL("image/png"))})})},O.onerror=()=>{C(new Error("Failed to load the base image"))}}),b=async()=>{try{const x=await m();v();const C=new Qm(r.value);C.availableMarkerTypes=C.ALL_MARKER_TYPES,C.uiStyleSettings.redoButtonVisible=!0,C.uiStyleSettings.zoomButtonVisible=!0,C.uiStyleSettings.zoomOutButtonVisible=!0,C.uiStyleSettings.clearButtonVisible=!0,C.settings.displayMode="popup",C.settings.defaultColor=["#000000"],C.settings.defaultFontFamilies=["Poetsen One","Indie Flower","Dela Gothic One","DynaPuff","Pixelify Sans","Gluten","Teko"],C.addRenderEventListener(y=>{a.value.push(y),r.value.src=y,i.value.href=y}),r.value.src=x,i.value.href=x,C.show()}catch(x){console.error("Merge failed",x)}},S=x=>{const C=x.target.files[0],y=new FileReader;y.onload=()=>{n=y.result,r.value.src=n,i.value.href=n,o.value.push({src:n,alt:C.name}),emit("newImage",n)},C&&y.readAsDataURL(C)};return Vf(()=>{const x=document.createElement("canvas"),C=x.getContext("2d"),y=new Image;y.src=Vh,y.onload=()=>{x.width=y.width,x.height=y.height,C.drawImage(y,0,0),n=x.toDataURL("image/png"),i.value.href=n}}),Ts(s,x=>{x&&(r.value.src=x,i.value.href=x)}),t({addSticker:c}),(x,C)=>(Yt(),re("div",xS,[Pt("div",SS,[Pt("div",CS,[Pt("img",{class:"w-auto max-w-[48vw] h-auto min-h-[60vh] max-h-[75vh] object-fill rounded-xl",ref_key:"imgRef",ref:r,src:ee(s)||ee(Vh),alt:"Test img"},null,8,wS),(Yt(!0),re(xe,null,Zs(l.value,y=>(Yt(),re("div",{key:y.id,style:Ha({position:"absolute",left:`${y.style.leftPercent}%`,top:`${y.style.topPercent}%`,width:`${y.style.widthPercent}%`,height:`${y.style.heightPercent}%`,transform:y.style.transform}),"data-id":y.id,class:"sticker",onMousedown:w=>g(y.id)},[Pt("img",{src:y.src,style:{width:"100%",height:"100%","object-fit":"fill"}},null,8,ES),Pt("button",{onClick:w=>p(y.id),class:"delete-btn"}," X ",8,kS)],44,_S))),128)),u.value?(Yt(),ed(ee(mS),{key:0,class:"moveable",target:`.sticker[data-id='${u.value}']`,draggable:!0,scalable:!0,rotatable:!0,origin:!1,keepRatio:!1,throttleDrag:TS,throttleScale:RS,throttleRotate:AS,renderDirections:["nw","n","ne","w","e","sw","s","se"],rotationPosition:"top",onDrag:h,onScale:f,onScaleStart:x.onScaleStart,onRotate:d},null,8,["target","onScaleStart"])):id("",!0)])]),Pt("div",MS,[PS,Pt("input",{id:"file-upload",type:"file",onChange:S,accept:"image/*",class:"hidden"},null,32),Pt("button",{class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh]",onClick:b}," Edit "),Pt("a",{class:"bg-Secondary rounded-2xl w-[6vw] h-[6vh] flex items-center justify-center",ref_key:"downloadButton",ref:i,href:ee(n),download:"image.png"}," Download ",8,DS)])]))}},BS=yS(OS,[["__scopeId","data-v-c9ce5c55"]]),IS="/StickerEditor/assets/add21-BGbuhfVT.jpg",LS="/StickerEditor/assets/out3-DDp8jPL9.png",FS="/StickerEditor/assets/out4-CcsAHtZO.png",zS="/StickerEditor/assets/out5-f7Ma6H0z.png",NS="/StickerEditor/assets/out6-DvOdD5OY.png",GS="/StickerEditor/assets/out7-Bh2lHIfN.png",WS="/StickerEditor/assets/out8-CHEbLBCF.png",HS="/StickerEditor/assets/out9-YMO4_2Fq.png",VS="/StickerEditor/assets/out10-BOWi-BKK.png",jS="/StickerEditor/assets/out11-DOU5pnUw.jpg",$S={class:"bg-Background h-screen gap-10 mx-auto grid grid-rows-3 relative"},XS={class:"row-span-1 w-[400px] absolute left-0"},US={class:"row-span-1 flex items-center justify-center min-h-screen absolute left-1/4 right-1/4"},YS={class:"row-span-1 h-screen flex justify-end absolute right-0"},qS={__name:"ImageEditor",setup(e){let t=Se([{src:IS,alt:"add on 1"},{src:LS,alt:"add on 2"},{src:zS,alt:"add on 3"},{src:FS,alt:"add on 4"},{src:NS,alt:"add on 5"},{src:GS,alt:"add on 6"},{src:WS,alt:"add on 7"},{src:HS,alt:"add on 8"},{src:VS,alt:"add on 9"},{src:jS,alt:"add on 10"}]),r=Se(!1),i=Se(null);const n=Se([]),s=Se(null),a=l=>{t.value.unshift({src:l,alt:"New Image"})};return fi("handleStickerSelected",l=>{s.value&&s.value.addSticker(l)}),fi("images",t),fi("selectedImage",i),fi("typeButton",r),fi("savedImages",n),(l,u)=>(Yt(),re("section",$S,[Pt("aside",XS,[Ce(km)]),Pt("main",US,[Ce(BS,{ref_key:"editorRef",ref:s,"selected-image":ee(i),onNewImage:a},null,8,["selected-image"])]),Pt("aside",YS,[Ce(zm,{onSelectImage:u[0]||(u[0]=c=>le(i)?i.value=c:i=c)})])]))}},vi="4.32.2";let jh=!1,kn,vv,gv,Ol,mv,yv,bv,xv,Sv;function KS(e,t={auto:!1}){if(jh)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(kn)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${kn}'\``);jh=t.auto,kn=e.kind,vv=e.fetch,gv=e.FormData,Ol=e.File,mv=e.ReadableStream,yv=e.getMultipartRequestOptions,bv=e.getDefaultAgent,xv=e.fileFromPath,Sv=e.isFsReadStream}class JS{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function ZS({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,i,n,s;try{r=fetch,i=Request,n=Response,s=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${t}`)}return{kind:"web",fetch:r,Request:i,Response:n,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new JS(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}kn||KS(ZS(),{auto:!0});class _t extends Error{}class ne extends _t{constructor(t,r,i,n){super(`${ne.makeMessage(t,r,i)}`),this.status=t,this.headers=n;const s=r;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(t,r,i){const n=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):i;return t&&n?`${t} ${n}`:t?`${t} status code (no body)`:n||"(no status code or body)"}static generate(t,r,i,n){if(!t)return new co({cause:Il(r)});const s=r==null?void 0:r.error;return t===400?new Cv(t,s,i,n):t===401?new wv(t,s,i,n):t===403?new _v(t,s,i,n):t===404?new Ev(t,s,i,n):t===409?new kv(t,s,i,n):t===422?new Mv(t,s,i,n):t===429?new Pv(t,s,i,n):t>=500?new Dv(t,s,i,n):new ne(t,s,i,n)}}class Re extends ne{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class co extends ne{constructor({message:t,cause:r}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}}class Ku extends co{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Cv extends ne{constructor(){super(...arguments),this.status=400}}class wv extends ne{constructor(){super(...arguments),this.status=401}}class _v extends ne{constructor(){super(...arguments),this.status=403}}class Ev extends ne{constructor(){super(...arguments),this.status=404}}class kv extends ne{constructor(){super(...arguments),this.status=409}}class Mv extends ne{constructor(){super(...arguments),this.status=422}}class Pv extends ne{constructor(){super(...arguments),this.status=429}}class Dv extends ne{}class or{constructor(t,r){this.iterator=t,this.controller=r}static fromSSEResponse(t,r){let i=!1;async function*n(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let s=!1;try{for await(const a of QS(t,r))if(!s){if(a.data.startsWith("[DONE]")){s=!0;continue}if(a.event===null){let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(o&&o.error)throw new ne(void 0,o.error,void 0,void 0);yield o}else{let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(a.event=="error")throw new ne(void 0,o.error,o.message,void 0);yield{event:a.event,data:o}}}s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||r.abort()}}return new or(n,r)}static fromReadableStream(t,r){let i=!1;async function*n(){const a=new si,o=Tv(t);for await(const l of o)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*s(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const o of n())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||r.abort()}}return new or(s,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],r=[],i=this.iterator(),n=s=>({next:()=>{if(s.length===0){const a=i.next();t.push(a),r.push(a)}return s.shift()}});return[new or(()=>n(t),this.controller),new or(()=>n(r),this.controller)]}toReadableStream(){const t=this;let r;const i=new TextEncoder;return new mv({async start(){r=t[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:a}=await r.next();if(a)return n.close();const o=i.encode(JSON.stringify(s)+`
`);n.enqueue(o)}catch(s){n.error(s)}},async cancel(){var n;await((n=r.return)==null?void 0:n.call(r))}})}}async function*QS(e,t){if(!e.body)throw t.abort(),new _t("Attempted to iterate over a response with no body");const r=new rC,i=new si,n=Tv(e.body);for await(const s of tC(n))for(const a of i.decode(s)){const o=r.decode(a);o&&(yield o)}for(const s of i.flush()){const a=r.decode(s);a&&(yield a)}}async function*tC(e){let t=new Uint8Array;for await(const r of e){if(r==null)continue;const i=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r;let n=new Uint8Array(t.length+i.length);n.set(t),n.set(i,t.length),t=n;let s;for(;(s=eC(t))!==-1;)yield t.slice(0,s),t=t.slice(s)}t.length>0&&(yield t)}function eC(e){for(let i=0;i<e.length-2;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}class rC{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[r,i,n]=iC(t,":");return n.startsWith(" ")&&(n=n.substring(1)),r==="event"?this.event=n:r==="data"&&this.data.push(n),null}}class si{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let r=this.decodeText(t);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];const i=si.NEWLINE_CHARS.has(r[r.length-1]||"");let n=r.split(si.NEWLINE_REGEXP);return i&&n.pop(),n.length===1&&!i?(this.buffer.push(n[0]),[]):(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),i||(this.buffer=[n.pop()||""]),n)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new _t(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new _t(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new _t("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}si.NEWLINE_CHARS=new Set([`
`,"\r"]);si.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function iC(e,t){const r=e.indexOf(t);return r!==-1?[e.substring(0,r),t,e.substring(r+t.length)]:[e,"",""]}function Tv(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const r=await t.read();return r!=null&&r.done&&t.releaseLock(),r}catch(r){throw t.releaseLock(),r}},async return(){const r=t.cancel();return t.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Rv=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",Av=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Ov(e),Ov=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",nC=e=>Av(e)||Rv(e)||Sv(e);async function Bv(e,t,r){var n;if(e=await e,r??(r=Av(e)?{lastModified:e.lastModified,type:e.type}:{}),Rv(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new Ol([s],t,r)}const i=await sC(e);if(t||(t=oC(e)??"unknown_file"),!r.type){const s=(n=i[0])==null?void 0:n.type;typeof s=="string"&&(r={...r,type:s})}return new Ol(i,t,r)}async function sC(e){var r;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Ov(e))t.push(await e.arrayBuffer());else if(lC(e))for await(const i of e)t.push(i);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(r=e==null?void 0:e.constructor)==null?void 0:r.name}; props: ${aC(e)}`);return t}function aC(e){return`[${Object.getOwnPropertyNames(e).map(r=>`"${r}"`).join(", ")}]`}function oC(e){var t;return Wo(e.name)||Wo(e.filename)||((t=Wo(e.path))==null?void 0:t.split(/[\\/]/).pop())}const Wo=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},lC=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",$h=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",Nn=async e=>{const t=await uC(e.body);return yv(t,e)},uC=async e=>{const t=new gv;return await Promise.all(Object.entries(e||{}).map(([r,i])=>Bl(t,r,i))),t},Bl=async(e,t,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")e.append(t,String(r));else if(nC(r)){const i=await Bv(r);e.append(t,i)}else if(Array.isArray(r))await Promise.all(r.map(i=>Bl(e,t+"[]",i)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([i,n])=>Bl(e,`${t}[${i}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var Di={},cC=function(e,t,r,i,n){if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r},hC=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},Es;async function Iv(e){const{response:t}=e;if(e.options.stream)return Ti("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):or.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const r=t.headers.get("content-type");if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.includes("application/vnd.api+json"))){const s=await t.json();return Ti("response",t.status,t.url,t.headers,s),s}const n=await t.text();return Ti("response",t.status,t.url,t.headers,n),n}class ho extends Promise{constructor(t,r=Iv){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=r}_thenUnwrap(t){return new ho(this.responsePromise,async r=>t(await this.parseResponse(r)))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,r){return this.parse().then(t,r)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class fC{constructor({baseURL:t,maxRetries:r=2,timeout:i=6e5,httpAgent:n,fetch:s}){this.baseURL=t,this.maxRetries=Ho("maxRetries",r),this.timeout=Ho("timeout",i),this.httpAgent=n,this.fetch=s??vv}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...yC(),...this.authHeaders(t)}}validateHeaders(t,r){}defaultIdempotencyKey(){return`stainless-node-retry-${CC()}`}get(t,r){return this.methodRequest("get",t,r)}post(t,r){return this.methodRequest("post",t,r)}patch(t,r){return this.methodRequest("patch",t,r)}put(t,r){return this.methodRequest("put",t,r)}delete(t,r){return this.methodRequest("delete",t,r)}methodRequest(t,r,i){return this.request(Promise.resolve(i).then(n=>({method:t,path:r,...n})))}getAPIList(t,r,i){return this.requestAPIList(r,{method:"get",path:t,...i})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}return null}buildRequest(t){var p;const{method:r,path:i,query:n,headers:s={}}=t,a=$h(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,o=this.calculateContentLength(a),l=this.buildURL(i,n);"timeout"in t&&Ho("timeout",t.timeout);const u=t.timeout??this.timeout,c=t.httpAgent??this.httpAgent??bv(l),h=u+1e3;typeof((p=c==null?void 0:c.options)==null?void 0:p.timeout)=="number"&&h>(c.options.timeout??0)&&(c.options.timeout=h),this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const f=this.buildHeaders({options:t,headers:s,contentLength:o});return{req:{method:r,...a&&{body:a},headers:f,...c&&{agent:c},signal:t.signal??null},url:l,timeout:u}}buildHeaders({options:t,headers:r,contentLength:i}){const n={};i&&(n["content-length"]=i);const s=this.defaultHeaders(t);return qh(n,s),qh(n,r),$h(t.body)&&kn!=="node"&&delete n["content-type"],this.validateHeaders(n,r),n}async prepareOptions(t){}async prepareRequest(t,{url:r,options:i}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(r=>[...r])):{...t}:{}}makeStatusError(t,r,i,n){return ne.generate(t,r,i,n)}request(t,r=null){return new ho(this.makeRequest(t,r))}async makeRequest(t,r){var c,h;const i=await t;r==null&&(r=i.maxRetries??this.maxRetries),await this.prepareOptions(i);const{req:n,url:s,timeout:a}=this.buildRequest(i);if(await this.prepareRequest(n,{url:s,options:i}),Ti("request",s,i,n.headers),(c=i.signal)!=null&&c.aborted)throw new Re;const o=new AbortController,l=await this.fetchWithTimeout(s,n,a,o).catch(Il);if(l instanceof Error){if((h=i.signal)!=null&&h.aborted)throw new Re;if(r)return this.retryRequest(i,r);throw l.name==="AbortError"?new Ku:new co({cause:l})}const u=pC(l.headers);if(!l.ok){if(r&&this.shouldRetry(l)){const m=`retrying, ${r} attempts remaining`;return Ti(`response (error; ${m})`,l.status,s,u),this.retryRequest(i,r,u)}const f=await l.text().catch(m=>Il(m).message),d=bC(f),p=d?void 0:f;throw Ti(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,l.status,s,u,p),this.makeStatusError(l.status,d,p,u)}return{response:l,options:i,controller:o}}requestAPIList(t,r){const i=this.makeRequest(r,null);return new dC(this,i,t)}buildURL(t,r){const i=SC(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),n=this.defaultQuery();return Fv(n)||(r={...n,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(i.search=this.stringifyQuery(r)),i.toString()}stringifyQuery(t){return Object.entries(t).filter(([r,i])=>typeof i<"u").map(([r,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(r)}=`;throw new _t(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,r,i,n){const{signal:s,...a}=r||{};s&&s.addEventListener("abort",()=>n.abort());const o=setTimeout(()=>n.abort(),i);return this.getRequestClient().fetch.call(void 0,t,{signal:n.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const r=t.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,r,i){let n;const s=i==null?void 0:i["retry-after-ms"];if(s){const o=parseFloat(s);Number.isNaN(o)||(n=o)}const a=i==null?void 0:i["retry-after"];if(a&&!n){const o=parseFloat(a);Number.isNaN(o)?n=Date.parse(a)-Date.now():n=o*1e3}if(!(n&&0<=n&&n<60*1e3)){const o=t.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(r,o)}return await Ju(n),this.makeRequest(t,r-1)}calculateDefaultRetryTimeoutMillis(t,r){const s=r-t,a=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${vi}`}}class Lv{constructor(t,r,i,n){Es.set(this,void 0),cC(this,Es,t),this.options=n,this.response=r,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new _t("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in t&&typeof r.query=="object")r.query={...r.query,...t.params};else if("url"in t){const i=[...Object.entries(r.query||{}),...t.url.searchParams.entries()];for(const[n,s]of i)t.url.searchParams.set(n,s);r.query=void 0,r.path=t.url.toString()}return await hC(this,Es,"f").requestAPIList(this.constructor,r)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Es=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const r of t.getPaginatedItems())yield r}}class dC extends ho{constructor(t,r,i){super(r,async n=>new i(t,n.response,await Iv(n),n.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const r of t)yield r}}const pC=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,r){const i=r.toString();return t[i.toLowerCase()]||t[i]}}),vC={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},hr=e=>typeof e=="object"&&e!==null&&!Fv(e)&&Object.keys(e).every(t=>zv(vC,t)),gC=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":Uh(Deno.build.os),"X-Stainless-Arch":Xh(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":Uh(process.platform),"X-Stainless-Arch":Xh(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=mC();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function mC(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const i=r.exec(navigator.userAgent);if(i){const n=i[1]||0,s=i[2]||0,a=i[3]||0;return{browser:t,version:`${n}.${s}.${a}`}}}return null}const Xh=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Uh=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Yh;const yC=()=>Yh??(Yh=gC()),bC=e=>{try{return JSON.parse(e)}catch{return}},xC=new RegExp("^(?:[a-z]+:)?//","i"),SC=e=>xC.test(e),Ju=e=>new Promise(t=>setTimeout(t,e)),Ho=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new _t(`${e} must be an integer`);if(t<0)throw new _t(`${e} must be a positive integer`);return t},Il=e=>e instanceof Error?e:new Error(e),Vo=e=>{var t,r,i,n;if(typeof process<"u")return((t=Di==null?void 0:Di[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(n=(i=(r=Deno.env)==null?void 0:r.get)==null?void 0:i.call(r,e))==null?void 0:n.trim()};function Fv(e){if(!e)return!0;for(const t in e)return!1;return!0}function zv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function qh(e,t){for(const r in t){if(!zv(t,r))continue;const i=r.toLowerCase();if(!i)continue;const n=t[r];n===null?delete e[i]:n!==void 0&&(e[i]=n)}}function Ti(e,...t){typeof process<"u"&&(Di==null?void 0:Di.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const CC=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),wC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Kh(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class Zu extends Lv{constructor(t,r,i,n){super(t,r,i,n),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class wr extends Lv{constructor(t,r,i,n){super(t,r,i,n),this.data=i.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const r=Object.fromEntries(t.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var i;const t=this.getPaginatedItems();if(!t.length)return null;const r=(i=t[t.length-1])==null?void 0:i.id;return r?{params:{after:r}}:null}}class Ft{constructor(t){this._client=t}}let pa=class extends Ft{create(t,r){return this._client.post("/chat/completions",{body:t,...r,stream:t.stream??!1})}};pa||(pa={});let va=class extends Ft{constructor(){super(...arguments),this.completions=new pa(this._client)}};(function(e){e.Completions=pa})(va||(va={}));class ga extends Ft{create(t,r){return this._client.post("/audio/speech",{body:t,...r,__binaryResponse:!0})}}ga||(ga={});class ma extends Ft{create(t,r){return this._client.post("/audio/transcriptions",Nn({body:t,...r}))}}ma||(ma={});class ya extends Ft{create(t,r){return this._client.post("/audio/translations",Nn({body:t,...r}))}}ya||(ya={});class ba extends Ft{constructor(){super(...arguments),this.transcriptions=new ma(this._client),this.translations=new ya(this._client),this.speech=new ga(this._client)}}(function(e){e.Transcriptions=ma,e.Translations=ya,e.Speech=ga})(ba||(ba={}));let xa=class extends Ft{create(t,r,i){return this._client.post(`/assistants/${t}/files`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}retrieve(t,r,i){return this._client.get(`/assistants/${t}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,r={},i){return hr(r)?this.list(t,{},r):this._client.getAPIList(`/assistants/${t}/files`,Qu,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}del(t,r,i){return this._client.delete(`/assistants/${t}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}};class Qu extends wr{}(function(e){e.AssistantFilesPage=Qu})(xa||(xa={}));class Sa extends Ft{constructor(){super(...arguments),this.files=new xa(this._client)}create(t,r){return this._client.post("/assistants",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(t,r){return this._client.get(`/assistants/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(t,r,i){return this._client.post(`/assistants/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t={},r){return hr(t)?this.list({},t):this._client.getAPIList("/assistants",tc,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(t,r){return this._client.delete(`/assistants/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}class tc extends wr{}(function(e){e.AssistantsPage=tc,e.Files=xa,e.AssistantFilesPage=Qu})(Sa||(Sa={}));function Jh(e){return typeof e.parse=="function"}const Ri=e=>(e==null?void 0:e.role)==="assistant",Nv=e=>(e==null?void 0:e.role)==="function",Gv=e=>(e==null?void 0:e.role)==="tool";var Ne=function(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},wt=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},ae,Ls,Fs,an,on,zs,ln,pr,un,Ns,Gs,gi,Ll,Ca,Fl,zl,Nl,Gl,Wv,Wl;const Zh=10;class Hv{constructor(){ae.add(this),this.controller=new AbortController,Ls.set(this,void 0),Fs.set(this,()=>{}),an.set(this,()=>{}),on.set(this,void 0),zs.set(this,()=>{}),ln.set(this,()=>{}),pr.set(this,{}),this._chatCompletions=[],this.messages=[],un.set(this,!1),Ns.set(this,!1),Gs.set(this,!1),gi.set(this,!1),Gl.set(this,t=>{if(Ne(this,Ns,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Re),t instanceof Re)return Ne(this,Gs,!0,"f"),this._emit("abort",t);if(t instanceof _t)return this._emit("error",t);if(t instanceof Error){const r=new _t(t.message);return r.cause=t,this._emit("error",r)}return this._emit("error",new _t(String(t)))}),Ne(this,Ls,new Promise((t,r)=>{Ne(this,Fs,t,"f"),Ne(this,an,r,"f")}),"f"),Ne(this,on,new Promise((t,r)=>{Ne(this,zs,t,"f"),Ne(this,ln,r,"f")}),"f"),wt(this,Ls,"f").catch(()=>{}),wt(this,on,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},wt(this,Gl,"f"))},0)}_addChatCompletion(t){var i;this._chatCompletions.push(t),this._emit("chatCompletion",t);const r=(i=t.choices[0])==null?void 0:i.message;return r&&this._addMessage(r),t}_addMessage(t,r=!0){if("content"in t||(t.content=null),this.messages.push(t),r){if(this._emit("message",t),(Nv(t)||Gv(t))&&t.content)this._emit("functionCallResult",t.content);else if(Ri(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(Ri(t)&&t.tool_calls)for(const i of t.tool_calls)i.type==="function"&&this._emit("functionCall",i.function)}}_connected(){this.ended||(wt(this,Fs,"f").call(this),this._emit("connect"))}get ended(){return wt(this,un,"f")}get errored(){return wt(this,Ns,"f")}get aborted(){return wt(this,Gs,"f")}abort(){this.controller.abort()}on(t,r){return(wt(this,pr,"f")[t]||(wt(this,pr,"f")[t]=[])).push({listener:r}),this}off(t,r){const i=wt(this,pr,"f")[t];if(!i)return this;const n=i.findIndex(s=>s.listener===r);return n>=0&&i.splice(n,1),this}once(t,r){return(wt(this,pr,"f")[t]||(wt(this,pr,"f")[t]=[])).push({listener:r,once:!0}),this}emitted(t){return new Promise((r,i)=>{Ne(this,gi,!0,"f"),t!=="error"&&this.once("error",i),this.once(t,r)})}async done(){Ne(this,gi,!0,"f"),await wt(this,on,"f")}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new _t("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),wt(this,ae,"m",Ll).call(this)}async finalMessage(){return await this.done(),wt(this,ae,"m",Ca).call(this)}async finalFunctionCall(){return await this.done(),wt(this,ae,"m",Fl).call(this)}async finalFunctionCallResult(){return await this.done(),wt(this,ae,"m",zl).call(this)}async totalUsage(){return await this.done(),wt(this,ae,"m",Nl).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(t,...r){if(wt(this,un,"f"))return;t==="end"&&(Ne(this,un,!0,"f"),wt(this,zs,"f").call(this));const i=wt(this,pr,"f")[t];if(i&&(wt(this,pr,"f")[t]=i.filter(n=>!n.once),i.forEach(({listener:n})=>n(...r))),t==="abort"){const n=r[0];!wt(this,gi,"f")&&!(i!=null&&i.length)&&Promise.reject(n),wt(this,an,"f").call(this,n),wt(this,ln,"f").call(this,n),this._emit("end");return}if(t==="error"){const n=r[0];!wt(this,gi,"f")&&!(i!=null&&i.length)&&Promise.reject(n),wt(this,an,"f").call(this,n),wt(this,ln,"f").call(this,n),this._emit("end")}}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const r=wt(this,ae,"m",Ca).call(this);r&&this._emit("finalMessage",r);const i=wt(this,ae,"m",Ll).call(this);i&&this._emit("finalContent",i);const n=wt(this,ae,"m",Fl).call(this);n&&this._emit("finalFunctionCall",n);const s=wt(this,ae,"m",zl).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",wt(this,ae,"m",Nl).call(this))}async _createChatCompletion(t,r,i){const n=i==null?void 0:i.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),wt(this,ae,"m",Wv).call(this,r);const s=await t.create({...r,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(t,r,i){for(const n of r.messages)this._addMessage(n,!1);return await this._createChatCompletion(t,r,i)}async _runFunctions(t,r,i){var f;const n="function",{function_call:s="auto",stream:a,...o}=r,l=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:u=Zh}=i||{},c={};for(const d of r.functions)c[d.name||d.function.name]=d;const h=r.functions.map(d=>({name:d.name||d.function.name,parameters:d.parameters,description:d.description}));for(const d of r.messages)this._addMessage(d,!1);for(let d=0;d<u;++d){const v=(f=(await this._createChatCompletion(t,{...o,function_call:s,functions:h,messages:[...this.messages]},i)).choices[0])==null?void 0:f.message;if(!v)throw new _t("missing message in ChatCompletion response");if(!v.function_call)return;const{name:g,arguments:m}=v.function_call,b=c[g];if(b){if(l&&l!==g){const y=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:n,name:g,content:y});continue}}else{const y=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${h.map(w=>JSON.stringify(w.name)).join(", ")}. Please try again`;this._addMessage({role:n,name:g,content:y});continue}let S;try{S=Jh(b)?await b.parse(m):m}catch(y){this._addMessage({role:n,name:g,content:y instanceof Error?y.message:String(y)});continue}const x=await b.function(S,this),C=wt(this,ae,"m",Wl).call(this,x);if(this._addMessage({role:n,name:g,content:C}),l)return}}async _runTools(t,r,i){var f,d;const n="tool",{tool_choice:s="auto",stream:a,...o}=r,l=typeof s!="string"&&((f=s==null?void 0:s.function)==null?void 0:f.name),{maxChatCompletions:u=Zh}=i||{},c={};for(const p of r.tools)p.type==="function"&&(c[p.function.name||p.function.function.name]=p.function);const h="tools"in r?r.tools.map(p=>p.type==="function"?{type:"function",function:{name:p.function.name||p.function.function.name,parameters:p.function.parameters,description:p.function.description}}:p):void 0;for(const p of r.messages)this._addMessage(p,!1);for(let p=0;p<u;++p){const g=(d=(await this._createChatCompletion(t,{...o,tool_choice:s,tools:h,messages:[...this.messages]},i)).choices[0])==null?void 0:d.message;if(!g)throw new _t("missing message in ChatCompletion response");if(!g.tool_calls)return;for(const m of g.tool_calls){if(m.type!=="function")continue;const b=m.id,{name:S,arguments:x}=m.function,C=c[S];if(C){if(l&&l!==S){const E=`Invalid tool_call: ${JSON.stringify(S)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:n,tool_call_id:b,content:E});continue}}else{const E=`Invalid tool_call: ${JSON.stringify(S)}. Available options are: ${h.map(M=>JSON.stringify(M.function.name)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:b,content:E});continue}let y;try{y=Jh(C)?await C.parse(x):x}catch(E){const M=E instanceof Error?E.message:String(E);this._addMessage({role:n,tool_call_id:b,content:M});continue}const w=await C.function(y,this),_=wt(this,ae,"m",Wl).call(this,w);if(this._addMessage({role:n,tool_call_id:b,content:_}),l)return}}}}Ls=new WeakMap,Fs=new WeakMap,an=new WeakMap,on=new WeakMap,zs=new WeakMap,ln=new WeakMap,pr=new WeakMap,un=new WeakMap,Ns=new WeakMap,Gs=new WeakMap,gi=new WeakMap,Gl=new WeakMap,ae=new WeakSet,Ll=function(){return wt(this,ae,"m",Ca).call(this).content??null},Ca=function(){let t=this.messages.length;for(;t-- >0;){const r=this.messages[t];if(Ri(r))return{...r,content:r.content??null}}throw new _t("stream ended without producing a ChatCompletionMessage with role=assistant")},Fl=function(){var t,r;for(let i=this.messages.length-1;i>=0;i--){const n=this.messages[i];if(Ri(n)&&(n!=null&&n.function_call))return n.function_call;if(Ri(n)&&((t=n==null?void 0:n.tool_calls)!=null&&t.length))return(r=n.tool_calls.at(-1))==null?void 0:r.function}},zl=function(){for(let t=this.messages.length-1;t>=0;t--){const r=this.messages[t];if(Nv(r)&&r.content!=null||Gv(r)&&r.content!=null&&this.messages.some(i=>{var n;return i.role==="assistant"&&((n=i.tool_calls)==null?void 0:n.some(s=>s.type==="function"&&s.id===r.tool_call_id))}))return r.content}},Nl=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(t.completion_tokens+=r.completion_tokens,t.prompt_tokens+=r.prompt_tokens,t.total_tokens+=r.total_tokens);return t},Wv=function(t){if(t.n!=null&&t.n>1)throw new _t("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Wl=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Gn extends Hv{static runFunctions(t,r,i){const n=new Gn,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(t,r,s)),n}static runTools(t,r,i){const n=new Gn,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(t,r,s)),n}_addMessage(t){super._addMessage(t),Ri(t)&&t.content&&this._emit("content",t.content)}}var Ge=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},jo=function(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},rr,Mr,$o,Xo,ks,Qh;class Wn extends Hv{constructor(){super(...arguments),rr.add(this),Mr.set(this,void 0)}get currentChatCompletionSnapshot(){return Ge(this,Mr,"f")}static fromReadableStream(t){const r=new Wn;return r._run(()=>r._fromReadableStream(t)),r}static createChatCompletion(t,r,i){const n=new Wn;return n._run(()=>n._runChatCompletion(t,{...r,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(t,r,i){var a;const n=i==null?void 0:i.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Ge(this,rr,"m",$o).call(this);const s=await t.create({...r,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const o of s)Ge(this,rr,"m",Xo).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new Re;return this._addChatCompletion(Ge(this,rr,"m",ks).call(this))}async _fromReadableStream(t,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ge(this,rr,"m",$o).call(this),this._connected();const n=or.fromReadableStream(t,this.controller);let s;for await(const o of n)s&&s!==o.id&&this._addChatCompletion(Ge(this,rr,"m",ks).call(this)),Ge(this,rr,"m",Xo).call(this,o),s=o.id;if((a=n.controller.signal)!=null&&a.aborted)throw new Re;return this._addChatCompletion(Ge(this,rr,"m",ks).call(this))}[(Mr=new WeakMap,rr=new WeakSet,$o=function(){this.ended||jo(this,Mr,void 0,"f")},Xo=function(r){var a,o,l;if(this.ended)return;const i=Ge(this,rr,"m",Qh).call(this,r);this._emit("chunk",r,i);const n=(o=(a=r.choices[0])==null?void 0:a.delta)==null?void 0:o.content,s=(l=i.choices[0])==null?void 0:l.message;n!=null&&(s==null?void 0:s.role)==="assistant"&&(s!=null&&s.content)&&this._emit("content",n,s.content)},ks=function(){if(this.ended)throw new _t("stream has ended, this shouldn't happen");const r=Ge(this,Mr,"f");if(!r)throw new _t("request ended without sending any chunks");return jo(this,Mr,void 0,"f"),_C(r)},Qh=function(r){var i,n,s;let a=Ge(this,Mr,"f");const{choices:o,...l}=r;a?Object.assign(a,l):a=jo(this,Mr,{...l,choices:[]},"f");for(const{delta:u,finish_reason:c,index:h,logprobs:f=null,...d}of r.choices){let p=a.choices[h];if(p||(p=a.choices[h]={finish_reason:c,index:h,message:{},logprobs:f,...d}),f)if(!p.logprobs)p.logprobs=Object.assign({},f);else{const{content:x,...C}=f;Object.assign(p.logprobs,C),x&&((i=p.logprobs).content??(i.content=[]),p.logprobs.content.push(...x))}if(c&&(p.finish_reason=c),Object.assign(p,d),!u)continue;const{content:v,function_call:g,role:m,tool_calls:b,...S}=u;if(Object.assign(p.message,S),v&&(p.message.content=(p.message.content||"")+v),m&&(p.message.role=m),g&&(p.message.function_call?(g.name&&(p.message.function_call.name=g.name),g.arguments&&((n=p.message.function_call).arguments??(n.arguments=""),p.message.function_call.arguments+=g.arguments)):p.message.function_call=g),b){p.message.tool_calls||(p.message.tool_calls=[]);for(const{index:x,id:C,type:y,function:w,..._}of b){const E=(s=p.message.tool_calls)[x]??(s[x]={});Object.assign(E,_),C&&(E.id=C),y&&(E.type=y),w&&(E.function??(E.function={arguments:""})),w!=null&&w.name&&(E.function.name=w.name),w!=null&&w.arguments&&(E.function.arguments+=w.arguments)}}}return a},Symbol.asyncIterator)](){const t=[],r=[];let i=!1;return this.on("chunk",n=>{const s=r.shift();s?s.resolve(n):t.push(n)}),this.on("end",()=>{i=!0;for(const n of r)n.resolve(void 0);r.length=0}),this.on("abort",n=>{i=!0;for(const s of r)s.reject(n);r.length=0}),this.on("error",n=>{i=!0;for(const s of r)s.reject(n);r.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((s,a)=>r.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new or(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function _C(e){const{id:t,choices:r,created:i,model:n,system_fingerprint:s,...a}=e;return{...a,id:t,choices:r.map(({message:o,finish_reason:l,index:u,logprobs:c,...h})=>{if(!l)throw new _t(`missing finish_reason for choice ${u}`);const{content:f=null,function_call:d,tool_calls:p,...v}=o,g=o.role;if(!g)throw new _t(`missing role for choice ${u}`);if(d){const{arguments:m,name:b}=d;if(m==null)throw new _t(`missing function_call.arguments for choice ${u}`);if(!b)throw new _t(`missing function_call.name for choice ${u}`);return{...h,message:{content:f,function_call:{arguments:m,name:b},role:g},finish_reason:l,index:u,logprobs:c}}return p?{...h,index:u,finish_reason:l,logprobs:c,message:{...v,role:g,content:f,tool_calls:p.map((m,b)=>{const{function:S,type:x,id:C,...y}=m,{arguments:w,name:_,...E}=S||{};if(C==null)throw new _t(`missing choices[${u}].tool_calls[${b}].id
${Ms(e)}`);if(x==null)throw new _t(`missing choices[${u}].tool_calls[${b}].type
${Ms(e)}`);if(_==null)throw new _t(`missing choices[${u}].tool_calls[${b}].function.name
${Ms(e)}`);if(w==null)throw new _t(`missing choices[${u}].tool_calls[${b}].function.arguments
${Ms(e)}`);return{...y,id:C,type:x,function:{...E,name:_,arguments:w}}})}}:{...h,message:{...v,content:f,role:g},finish_reason:l,index:u,logprobs:c}}),created:i,model:n,object:"chat.completion",...s?{system_fingerprint:s}:{}}}function Ms(e){return JSON.stringify(e)}class Ai extends Wn{static fromReadableStream(t){const r=new Ai;return r._run(()=>r._fromReadableStream(t)),r}static runFunctions(t,r,i){const n=new Ai,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(t,r,s)),n}static runTools(t,r,i){const n=new Ai,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(t,r,s)),n}}let Vv=class extends Ft{runFunctions(t,r){return t.stream?Ai.runFunctions(this._client.chat.completions,t,r):Gn.runFunctions(this._client.chat.completions,t,r)}runTools(t,r){return t.stream?Ai.runTools(this._client.chat.completions,t,r):Gn.runTools(this._client.chat.completions,t,r)}stream(t,r){return Wn.createChatCompletion(this._client.chat.completions,t,r)}};class wa extends Ft{constructor(){super(...arguments),this.completions=new Vv(this._client)}}(function(e){e.Completions=Vv})(wa||(wa={}));var We=function(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},zt=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},Ws,Hs,cn,hn,Vs,fn,vr,dn,js,$s,mi,Hl;class EC{constructor(){this.controller=new AbortController,Ws.set(this,void 0),Hs.set(this,()=>{}),cn.set(this,()=>{}),hn.set(this,void 0),Vs.set(this,()=>{}),fn.set(this,()=>{}),vr.set(this,{}),dn.set(this,!1),js.set(this,!1),$s.set(this,!1),mi.set(this,!1),Hl.set(this,t=>{if(We(this,js,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Re),t instanceof Re)return We(this,$s,!0,"f"),this._emit("abort",t);if(t instanceof _t)return this._emit("error",t);if(t instanceof Error){const r=new _t(t.message);return r.cause=t,this._emit("error",r)}return this._emit("error",new _t(String(t)))}),We(this,Ws,new Promise((t,r)=>{We(this,Hs,t,"f"),We(this,cn,r,"f")}),"f"),We(this,hn,new Promise((t,r)=>{We(this,Vs,t,"f"),We(this,fn,r,"f")}),"f"),zt(this,Ws,"f").catch(()=>{}),zt(this,hn,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emit("end")},zt(this,Hl,"f"))},0)}_addRun(t){return t}_connected(){this.ended||(zt(this,Hs,"f").call(this),this._emit("connect"))}get ended(){return zt(this,dn,"f")}get errored(){return zt(this,js,"f")}get aborted(){return zt(this,$s,"f")}abort(){this.controller.abort()}on(t,r){return(zt(this,vr,"f")[t]||(zt(this,vr,"f")[t]=[])).push({listener:r}),this}off(t,r){const i=zt(this,vr,"f")[t];if(!i)return this;const n=i.findIndex(s=>s.listener===r);return n>=0&&i.splice(n,1),this}once(t,r){return(zt(this,vr,"f")[t]||(zt(this,vr,"f")[t]=[])).push({listener:r,once:!0}),this}emitted(t){return new Promise((r,i)=>{We(this,mi,!0,"f"),t!=="error"&&this.once("error",i),this.once(t,r)})}async done(){We(this,mi,!0,"f"),await zt(this,hn,"f")}_emit(t,...r){if(zt(this,dn,"f"))return;t==="end"&&(We(this,dn,!0,"f"),zt(this,Vs,"f").call(this));const i=zt(this,vr,"f")[t];if(i&&(zt(this,vr,"f")[t]=i.filter(n=>!n.once),i.forEach(({listener:n})=>n(...r))),t==="abort"){const n=r[0];!zt(this,mi,"f")&&!(i!=null&&i.length)&&Promise.reject(n),zt(this,cn,"f").call(this,n),zt(this,fn,"f").call(this,n),this._emit("end");return}if(t==="error"){const n=r[0];!zt(this,mi,"f")&&!(i!=null&&i.length)&&Promise.reject(n),zt(this,cn,"f").call(this,n),zt(this,fn,"f").call(this,n),this._emit("end")}}async _threadAssistantStream(t,r,i){return await this._createThreadAssistantStream(r,t,i)}async _runAssistantStream(t,r,i,n){return await this._createAssistantStream(r,t,i,n)}async _runToolAssistantStream(t,r,i,n,s){return await this._createToolAssistantStream(i,t,r,n,s)}async _createThreadAssistantStream(t,r,i){const n=i==null?void 0:i.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const s=await t.createAndRun({...r,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addRun(s)}async _createToolAssistantStream(t,r,i,n,s){const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o=await t.submitToolOutputs(r,i,{...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addRun(o)}async _createAssistantStream(t,r,i,n){const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a=await t.create(r,{...i,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addRun(a)}}Ws=new WeakMap,Hs=new WeakMap,cn=new WeakMap,hn=new WeakMap,Vs=new WeakMap,fn=new WeakMap,vr=new WeakMap,dn=new WeakMap,js=new WeakMap,$s=new WeakMap,mi=new WeakMap,Hl=new WeakMap;var ft=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},Pe=function(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},te,Vl,ir,Xs,je,Jr,wi,Yr,_a,De,Us,Ys,Mn,pn,vn,tf,ef,rf,nf,sf,af,of;class Ye extends EC{constructor(){super(...arguments),te.add(this),Vl.set(this,[]),ir.set(this,{}),Xs.set(this,{}),je.set(this,void 0),Jr.set(this,void 0),wi.set(this,void 0),Yr.set(this,void 0),_a.set(this,void 0),De.set(this,void 0),Us.set(this,void 0),Ys.set(this,void 0),Mn.set(this,void 0)}[(Vl=new WeakMap,ir=new WeakMap,Xs=new WeakMap,je=new WeakMap,Jr=new WeakMap,wi=new WeakMap,Yr=new WeakMap,_a=new WeakMap,De=new WeakMap,Us=new WeakMap,Ys=new WeakMap,Mn=new WeakMap,te=new WeakSet,Symbol.asyncIterator)](){const t=[],r=[];let i=!1;return this.on("event",n=>{const s=r.shift();s?s.resolve(n):t.push(n)}),this.on("end",()=>{i=!0;for(const n of r)n.resolve(void 0);r.length=0}),this.on("abort",n=>{i=!0;for(const s of r)s.reject(n);r.length=0}),this.on("error",n=>{i=!0;for(const s of r)s.reject(n);r.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((s,a)=>r.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const r=new Ye;return r._run(()=>r._fromReadableStream(t)),r}async _fromReadableStream(t,r){var s;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const n=or.fromReadableStream(t,this.controller);for await(const a of n)ft(this,te,"m",pn).call(this,a);if((s=n.controller.signal)!=null&&s.aborted)throw new Re;return this._addRun(ft(this,te,"m",vn).call(this))}toReadableStream(){return new or(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,r,i,n,s){const a=new Ye;return a._run(()=>a._runToolAssistantStream(t,r,i,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(t,r,i,n,s){var u;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},l=await t.submitToolOutputs(r,i,o,{...s,signal:this.controller.signal});this._connected();for await(const c of l)ft(this,te,"m",pn).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new Re;return this._addRun(ft(this,te,"m",vn).call(this))}static createThreadAssistantStream(t,r,i){const n=new Ye;return n._run(()=>n._threadAssistantStream(t,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(t,r,i,n){const s=new Ye;return s._run(()=>s._runAssistantStream(t,r,i,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return ft(this,Us,"f")}currentRun(){return ft(this,Ys,"f")}currentMessageSnapshot(){return ft(this,je,"f")}currentRunStepSnapshot(){return ft(this,Mn,"f")}async finalRunSteps(){return await this.done(),Object.values(ft(this,ir,"f"))}async finalMessages(){return await this.done(),Object.values(ft(this,Xs,"f"))}async finalRun(){if(await this.done(),!ft(this,Jr,"f"))throw Error("Final run was not received.");return ft(this,Jr,"f")}async _createThreadAssistantStream(t,r,i){var o;const n=i==null?void 0:i.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},a=await t.createAndRun(s,{...i,signal:this.controller.signal});this._connected();for await(const l of a)ft(this,te,"m",pn).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new Re;return this._addRun(ft(this,te,"m",vn).call(this))}async _createAssistantStream(t,r,i,n){var l;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...i,stream:!0},o=await t.create(r,a,{...n,signal:this.controller.signal});this._connected();for await(const u of o)ft(this,te,"m",pn).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new Re;return this._addRun(ft(this,te,"m",vn).call(this))}static accumulateDelta(t,r){for(const[i,n]of Object.entries(r)){if(!t.hasOwnProperty(i)){t[i]=n;continue}let s=t[i];if(s==null){t[i]=n;continue}if(i==="index"||i==="type"){t[i]=n;continue}if(typeof s=="string"&&typeof n=="string")s+=n;else if(typeof s=="number"&&typeof n=="number")s+=n;else if(Kh(s)&&Kh(n))s=this.accumulateDelta(s,n);else if(Array.isArray(s)&&Array.isArray(n)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...n);continue}}else throw Error(`Unhandled record type: ${i}, deltaValue: ${n}, accValue: ${s}`);t[i]=s}return t}}pn=function(t){if(!this.ended)switch(Pe(this,Us,t,"f"),ft(this,te,"m",rf).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ft(this,te,"m",of).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ft(this,te,"m",ef).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ft(this,te,"m",tf).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},vn=function(){if(this.ended)throw new _t("stream has ended, this shouldn't happen");if(!ft(this,Jr,"f"))throw Error("Final run has not been received");return ft(this,Jr,"f")},tf=function(t){const[r,i]=ft(this,te,"m",sf).call(this,t,ft(this,je,"f"));Pe(this,je,r,"f"),ft(this,Xs,"f")[r.id]=r;for(const n of i){const s=r.content[n.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,r),t.data.delta.content)for(const n of t.data.delta.content){if(n.type=="text"&&n.text){let s=n.text,a=r.content[n.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(n.index!=ft(this,wi,"f")){if(ft(this,Yr,"f"))switch(ft(this,Yr,"f").type){case"text":this._emit("textDone",ft(this,Yr,"f").text,ft(this,je,"f"));break;case"image_file":this._emit("imageFileDone",ft(this,Yr,"f").image_file,ft(this,je,"f"));break}Pe(this,wi,n.index,"f")}Pe(this,Yr,r.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(ft(this,wi,"f")!==void 0){const n=t.data.content[ft(this,wi,"f")];if(n)switch(n.type){case"image_file":this._emit("imageFileDone",n.image_file,ft(this,je,"f"));break;case"text":this._emit("textDone",n.text,ft(this,je,"f"));break}}ft(this,je,"f")&&this._emit("messageDone",t.data),Pe(this,je,void 0,"f")}},ef=function(t){const r=ft(this,te,"m",nf).call(this,t);switch(Pe(this,Mn,r,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const i=t.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const s of i.step_details.tool_calls)s.index==ft(this,_a,"f")?this._emit("toolCallDelta",s,r.step_details.tool_calls[s.index]):(ft(this,De,"f")&&this._emit("toolCallDone",ft(this,De,"f")),Pe(this,_a,s.index,"f"),Pe(this,De,r.step_details.tool_calls[s.index],"f"),ft(this,De,"f")&&this._emit("toolCallCreated",ft(this,De,"f")));this._emit("runStepDelta",t.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Pe(this,Mn,void 0,"f"),t.data.step_details.type=="tool_calls"&&ft(this,De,"f")&&(this._emit("toolCallDone",ft(this,De,"f")),Pe(this,De,void 0,"f")),this._emit("runStepDone",t.data,r);break}},rf=function(t){ft(this,Vl,"f").push(t),this._emit("event",t)},nf=function(t){switch(t.event){case"thread.run.step.created":return ft(this,ir,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let r=ft(this,ir,"f")[t.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let i=t.data;if(i.delta){const n=Ye.accumulateDelta(r,i.delta);ft(this,ir,"f")[t.data.id]=n}return ft(this,ir,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ft(this,ir,"f")[t.data.id]=t.data;break}if(ft(this,ir,"f")[t.data.id])return ft(this,ir,"f")[t.data.id];throw new Error("No snapshot available")},sf=function(t,r){let i=[];switch(t.event){case"thread.message.created":return[t.data,i];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=t.data;if(n.delta.content)for(const s of n.delta.content)if(s.index in r.content){let a=r.content[s.index];r.content[s.index]=ft(this,te,"m",af).call(this,s,a)}else r.content[s.index]=s,i.push(s);return[r,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},af=function(t,r){return Ye.accumulateDelta(r,t)},of=function(t){switch(Pe(this,Ys,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Pe(this,Jr,t.data,"f"),ft(this,De,"f")&&(this._emit("toolCallDone",ft(this,De,"f")),Pe(this,De,void 0,"f"));break}};let Ea=class extends Ft{retrieve(t,r,i,n){return this._client.get(`/threads/${t}/messages/${r}/files/${i}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,r,i={},n){return hr(i)?this.list(t,r,{},i):this._client.getAPIList(`/threads/${t}/messages/${r}/files`,ec,{query:i,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}};class ec extends wr{}(function(e){e.MessageFilesPage=ec})(Ea||(Ea={}));class ka extends Ft{constructor(){super(...arguments),this.files=new Ea(this._client)}create(t,r,i){return this._client.post(`/threads/${t}/messages`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}retrieve(t,r,i){return this._client.get(`/threads/${t}/messages/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}update(t,r,i,n){return this._client.post(`/threads/${t}/messages/${r}`,{body:i,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,r={},i){return hr(r)?this.list(t,{},r):this._client.getAPIList(`/threads/${t}/messages`,rc,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class rc extends wr{}(function(e){e.MessagesPage=rc,e.Files=Ea,e.MessageFilesPage=ec})(ka||(ka={}));class Ma extends Ft{retrieve(t,r,i,n){return this._client.get(`/threads/${t}/runs/${r}/steps/${i}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,r,i={},n){return hr(i)?this.list(t,r,{},i):this._client.getAPIList(`/threads/${t}/runs/${r}/steps`,ic,{query:i,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}class ic extends wr{}(function(e){e.RunStepsPage=ic})(Ma||(Ma={}));class Pa extends Ft{constructor(){super(...arguments),this.steps=new Ma(this._client)}create(t,r,i){return this._client.post(`/threads/${t}/runs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers},stream:r.stream??!1})}retrieve(t,r,i){return this._client.get(`/threads/${t}/runs/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}update(t,r,i,n){return this._client.post(`/threads/${t}/runs/${r}`,{body:i,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(t,r={},i){return hr(r)?this.list(t,{},r):this._client.getAPIList(`/threads/${t}/runs`,nc,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}cancel(t,r,i){return this._client.post(`/threads/${t}/runs/${r}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}async createAndPoll(t,r,i){const n=await this.create(t,r,i);return await this.poll(t,n.id,i)}createAndStream(t,r,i){return Ye.createAssistantStream(t,this._client.beta.threads.runs,r,i)}async poll(t,r,i){const n={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const{data:s,response:a}=await this.retrieve(t,r,{...i,headers:{...i==null?void 0:i.headers,...n}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(i!=null&&i.pollIntervalMs)o=i.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Ju(o);break;case"requires_action":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(t,r,i){return Ye.createAssistantStream(t,this._client.beta.threads.runs,r,i)}submitToolOutputs(t,r,i,n){return this._client.post(`/threads/${t}/runs/${r}/submit_tool_outputs`,{body:i,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers},stream:i.stream??!1})}async submitToolOutputsAndPoll(t,r,i,n){const s=await this.submitToolOutputs(t,r,i,n);return await this.poll(t,s.id,n)}submitToolOutputsStream(t,r,i,n){return Ye.createToolAssistantStream(t,r,this._client.beta.threads.runs,i,n)}}class nc extends wr{}(function(e){e.RunsPage=nc,e.Steps=Ma,e.RunStepsPage=ic})(Pa||(Pa={}));class Da extends Ft{constructor(){super(...arguments),this.runs=new Pa(this._client),this.messages=new ka(this._client)}create(t={},r){return hr(t)?this.create({},t):this._client.post("/threads",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(t,r){return this._client.get(`/threads/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(t,r,i){return this._client.post(`/threads/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}del(t,r){return this._client.delete(`/threads/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}createAndRun(t,r){return this._client.post("/threads/runs",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers},stream:t.stream??!1})}async createAndRunPoll(t,r){const i=await this.createAndRun(t,r);return await this.runs.poll(i.thread_id,i.id,r)}createAndRunStream(t,r){return Ye.createThreadAssistantStream(t,this._client.beta.threads,r)}}(function(e){e.Runs=Pa,e.RunsPage=nc,e.Messages=ka,e.MessagesPage=rc})(Da||(Da={}));class Ta extends Ft{constructor(){super(...arguments),this.chat=new wa(this._client),this.assistants=new Sa(this._client),this.threads=new Da(this._client)}}(function(e){e.Chat=wa,e.Assistants=Sa,e.AssistantsPage=tc,e.Threads=Da})(Ta||(Ta={}));class Ra extends Ft{create(t,r){return this._client.post("/completions",{body:t,...r,stream:t.stream??!1})}}Ra||(Ra={});class Aa extends Ft{create(t,r){return this._client.post("/embeddings",{body:t,...r})}}Aa||(Aa={});class Oa extends Ft{create(t,r){return this._client.post("/files",Nn({body:t,...r}))}retrieve(t,r){return this._client.get(`/files/${t}`,r)}list(t={},r){return hr(t)?this.list({},t):this._client.getAPIList("/files",sc,{query:t,...r})}del(t,r){return this._client.delete(`/files/${t}`,r)}content(t,r){return this._client.get(`/files/${t}/content`,{...r,__binaryResponse:!0})}retrieveContent(t,r){return this._client.get(`/files/${t}/content`,{...r,headers:{Accept:"application/json",...r==null?void 0:r.headers}})}async waitForProcessing(t,{pollInterval:r=5e3,maxWait:i=30*60*1e3}={}){const n=new Set(["processed","error","deleted"]),s=Date.now();let a=await this.retrieve(t);for(;!a.status||!n.has(a.status);)if(await Ju(r),a=await this.retrieve(t),Date.now()-s>i)throw new Ku({message:`Giving up on waiting for file ${t} to finish processing after ${i} milliseconds.`});return a}}class sc extends Zu{}(function(e){e.FileObjectsPage=sc})(Oa||(Oa={}));class Ba extends Ft{create(t,r){return this._client.post("/fine_tuning/jobs",{body:t,...r})}retrieve(t,r){return this._client.get(`/fine_tuning/jobs/${t}`,r)}list(t={},r){return hr(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",ac,{query:t,...r})}cancel(t,r){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,r)}listEvents(t,r={},i){return hr(r)?this.listEvents(t,{},r):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,oc,{query:r,...i})}}class ac extends wr{}class oc extends wr{}(function(e){e.FineTuningJobsPage=ac,e.FineTuningJobEventsPage=oc})(Ba||(Ba={}));class Ia extends Ft{constructor(){super(...arguments),this.jobs=new Ba(this._client)}}(function(e){e.Jobs=Ba,e.FineTuningJobsPage=ac,e.FineTuningJobEventsPage=oc})(Ia||(Ia={}));class La extends Ft{createVariation(t,r){return this._client.post("/images/variations",Nn({body:t,...r}))}edit(t,r){return this._client.post("/images/edits",Nn({body:t,...r}))}generate(t,r){return this._client.post("/images/generations",{body:t,...r})}}La||(La={});class Fa extends Ft{retrieve(t,r){return this._client.get(`/models/${t}`,r)}list(t){return this._client.getAPIList("/models",lc,t)}del(t,r){return this._client.delete(`/models/${t}`,r)}}class lc extends Zu{}(function(e){e.ModelsPage=lc})(Fa||(Fa={}));class za extends Ft{create(t,r){return this._client.post("/moderations",{body:t,...r})}}za||(za={});var jv;class Zt extends fC{constructor({baseURL:t=Vo("OPENAI_BASE_URL"),apiKey:r=Vo("OPENAI_API_KEY"),organization:i=Vo("OPENAI_ORG_ID")??null,...n}={}){if(r===void 0)throw new _t("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:r,organization:i,...n,baseURL:t||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&wC())throw new _t(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new Ra(this),this.chat=new va(this),this.embeddings=new Aa(this),this.files=new Oa(this),this.images=new La(this),this.audio=new ba(this),this.moderations=new za(this),this.models=new Fa(this),this.fineTuning=new Ia(this),this.beta=new Ta(this),this._options=s,this.apiKey=r,this.organization=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}jv=Zt;Zt.OpenAI=jv;Zt.OpenAIError=_t;Zt.APIError=ne;Zt.APIConnectionError=co;Zt.APIConnectionTimeoutError=Ku;Zt.APIUserAbortError=Re;Zt.NotFoundError=Ev;Zt.ConflictError=kv;Zt.RateLimitError=Pv;Zt.BadRequestError=Cv;Zt.AuthenticationError=wv;Zt.InternalServerError=Dv;Zt.PermissionDeniedError=_v;Zt.UnprocessableEntityError=Mv;(function(e){e.toFile=Bv,e.fileFromPath=xv,e.Page=Zu,e.CursorPage=wr,e.Completions=Ra,e.Chat=va,e.Embeddings=Aa,e.Files=Oa,e.FileObjectsPage=sc,e.Images=La,e.Audio=ba,e.Moderations=za,e.Models=Fa,e.ModelsPage=lc,e.FineTuning=Ia,e.Beta=Ta})(Zt||(Zt={}));const kC="/StickerEditor/assets/Loading-Blt9h-Iq.gif",MC={class:"px-20 py-10"},PC=Pt("p",{class:"text-xl font-bold"},"Prompt",-1),DC=["disabled"],TC={key:0,class:"flex items-center justify-center mt-5"},RC=["src"],AC=["src"],OC={__name:"Generate",setup(e){const t=new Zt({organization:void 0,apiKey:void 0,dangerouslyAllowBrowser:!0});let r=Se(null),i=Se(""),n=Se(""),s=Se(!1);const a=async()=>{if(!s.value)try{s.value=!0,r.value=await t.images.generate({model:"dall-e-3",prompt:i.value,n:1,size:"1024x1024"}),n.value=r.value.data[0].url,console.log(n.value)}catch(o){console.error("Error generating image:",o)}finally{s.value=!1}};return(o,l)=>(Yt(),re("main",MC,[PC,qg(Pt("textarea",{"onUpdate:modelValue":l[0]||(l[0]=u=>le(i)?i.value=u:i=u),class:"border-2 border-black px-5 py-2 w-[600px] h-[200px]",maxlength:"1000",placeholder:"Enter your prompt (max 1000 words)"},null,512),[[cm,ee(i)]]),Pt("button",{onClick:a,disabled:ee(s),class:"border-2 border-black px-5 py-2 bg-black text-white font-bold",type:"button"},fc(ee(s)?"Loading...":"Generate"),9,DC),Pt("p",null,"Image-url: "+fc(ee(n)),1),ee(s)?(Yt(),re("div",TC,[Pt("img",{src:ee(kC),alt:"Loading..."},null,8,RC)])):ee(n)?(Yt(),re("img",{key:1,class:"w-[1024px] h-[1024px] border border-black mt-5",src:ee(n),alt:"Generated Image"},null,8,AC)):id("",!0)]))}},BC={class:"m-0 p-0 box-border min-w-[1440px] min-h-screen overflow-hidden mx-auto"},IC={__name:"App",setup(e){return(t,r)=>(Yt(),re(xe,null,[Pt("main",BC,[Ce(qS)]),Ce(OC,{class:"hidden"})],64))}};dm(IC).mount("#app");
